(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.LichessAnalyse = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function r(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var t,n=function(){function r(){}var t=r.prototype;return t.unwrap=function(r,t){var n=this._chain((function(t){return exports.Result.ok(r?r(t):t)}),(function(r){return t?exports.Result.ok(t(r)):exports.Result.err(r)}));if(n.isErr)throw n.error;return n.value},t.map=function(r,t){return this._chain((function(t){return exports.Result.ok(r(t))}),(function(r){return exports.Result.err(t?t(r):r)}))},t.chain=function(r,t){return this._chain(r,t||function(r){return exports.Result.err(r)})},r}(),e=function(t){function n(r){var n;return(n=t.call(this)||this).value=r,n.isOk=!0,n.isErr=!1,n}return r(n,t),n.prototype._chain=function(r,t){return r(this.value)},n}(n),u=function(t){function n(r){var n;return(n=t.call(this)||this).error=r,n.isOk=!1,n.isErr=!0,n}return r(n,t),n.prototype._chain=function(r,t){return t(this.error)},n}(n);(t=exports.Result||(exports.Result={})).ok=function(r){return new e(r)},t.err=function(r){return new u(r)},t.all=function(r){if(Array.isArray(r)){for(var n=[],e=0;e<r.length;e++){var u=r[e];if(u.isErr)return u;n.push(u.value)}return t.ok(n)}for(var o={},i=Object.keys(r),s=0;s<i.length;s++){var c=r[i[s]];if(c.isErr)return c;o[i[s]]=c.value}return t.ok(o)};


},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util = require("./util");
function anim(mutation, state) {
    return state.animation.enabled ? animate(mutation, state) : render(mutation, state);
}
exports.anim = anim;
function render(mutation, state) {
    const result = mutation(state);
    state.dom.redraw();
    return result;
}
exports.render = render;
function makePiece(key, piece) {
    return {
        key: key,
        pos: util.key2pos(key),
        piece: piece
    };
}
function closer(piece, pieces) {
    return pieces.sort((p1, p2) => {
        return util.distanceSq(piece.pos, p1.pos) - util.distanceSq(piece.pos, p2.pos);
    })[0];
}
function computePlan(prevPieces, current) {
    const anims = {}, animedOrigs = [], fadings = {}, missings = [], news = [], prePieces = {};
    let curP, preP, i, vector;
    for (i in prevPieces) {
        prePieces[i] = makePiece(i, prevPieces[i]);
    }
    for (const key of util.allKeys) {
        curP = current.pieces[key];
        preP = prePieces[key];
        if (curP) {
            if (preP) {
                if (!util.samePiece(curP, preP.piece)) {
                    missings.push(preP);
                    news.push(makePiece(key, curP));
                }
            }
            else
                news.push(makePiece(key, curP));
        }
        else if (preP)
            missings.push(preP);
    }
    news.forEach(newP => {
        preP = closer(newP, missings.filter(p => util.samePiece(newP.piece, p.piece)));
        if (preP) {
            vector = [preP.pos[0] - newP.pos[0], preP.pos[1] - newP.pos[1]];
            anims[newP.key] = vector.concat(vector);
            animedOrigs.push(preP.key);
        }
    });
    missings.forEach(p => {
        if (!util.containsX(animedOrigs, p.key))
            fadings[p.key] = p.piece;
    });
    return {
        anims: anims,
        fadings: fadings
    };
}
function step(state, now) {
    const cur = state.animation.current;
    if (cur === undefined) {
        if (!state.dom.destroyed)
            state.dom.redrawNow();
        return;
    }
    const rest = 1 - (now - cur.start) * cur.frequency;
    if (rest <= 0) {
        state.animation.current = undefined;
        state.dom.redrawNow();
    }
    else {
        const ease = easing(rest);
        for (let i in cur.plan.anims) {
            const cfg = cur.plan.anims[i];
            cfg[2] = cfg[0] * ease;
            cfg[3] = cfg[1] * ease;
        }
        state.dom.redrawNow(true);
        requestAnimationFrame((now = performance.now()) => step(state, now));
    }
}
function animate(mutation, state) {
    const prevPieces = Object.assign({}, state.pieces);
    const result = mutation(state);
    const plan = computePlan(prevPieces, state);
    if (!isObjectEmpty(plan.anims) || !isObjectEmpty(plan.fadings)) {
        const alreadyRunning = state.animation.current && state.animation.current.start;
        state.animation.current = {
            start: performance.now(),
            frequency: 1 / state.animation.duration,
            plan: plan
        };
        if (!alreadyRunning)
            step(state, performance.now());
    }
    else {
        state.dom.redraw();
    }
    return result;
}
function isObjectEmpty(o) {
    for (let _ in o)
        return false;
    return true;
}
function easing(t) {
    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
}

},{"./util":18}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const board = require("./board");
const fen_1 = require("./fen");
const config_1 = require("./config");
const anim_1 = require("./anim");
const drag_1 = require("./drag");
const explosion_1 = require("./explosion");
function start(state, redrawAll) {
    function toggleOrientation() {
        board.toggleOrientation(state);
        redrawAll();
    }
    ;
    return {
        set(config) {
            if (config.orientation && config.orientation !== state.orientation)
                toggleOrientation();
            (config.fen ? anim_1.anim : anim_1.render)(state => config_1.configure(state, config), state);
        },
        state,
        getFen: () => fen_1.write(state.pieces),
        toggleOrientation,
        setPieces(pieces) {
            anim_1.anim(state => board.setPieces(state, pieces), state);
        },
        selectSquare(key, force) {
            if (key)
                anim_1.anim(state => board.selectSquare(state, key, force), state);
            else if (state.selected) {
                board.unselect(state);
                state.dom.redraw();
            }
        },
        move(orig, dest) {
            anim_1.anim(state => board.baseMove(state, orig, dest), state);
        },
        newPiece(piece, key) {
            anim_1.anim(state => board.baseNewPiece(state, piece, key), state);
        },
        playPremove() {
            if (state.premovable.current) {
                if (anim_1.anim(board.playPremove, state))
                    return true;
                state.dom.redraw();
            }
            return false;
        },
        playPredrop(validate) {
            if (state.predroppable.current) {
                const result = board.playPredrop(state, validate);
                state.dom.redraw();
                return result;
            }
            return false;
        },
        cancelPremove() {
            anim_1.render(board.unsetPremove, state);
        },
        cancelPredrop() {
            anim_1.render(board.unsetPredrop, state);
        },
        cancelMove() {
            anim_1.render(state => { board.cancelMove(state); drag_1.cancel(state); }, state);
        },
        stop() {
            anim_1.render(state => { board.stop(state); drag_1.cancel(state); }, state);
        },
        explode(keys) {
            explosion_1.default(state, keys);
        },
        setAutoShapes(shapes) {
            anim_1.render(state => state.drawable.autoShapes = shapes, state);
        },
        setShapes(shapes) {
            anim_1.render(state => state.drawable.shapes = shapes, state);
        },
        getKeyAtDomPos(pos) {
            return board.getKeyAtDomPos(pos, board.whitePov(state), state.dom.bounds());
        },
        redrawAll,
        dragNewPiece(piece, event, force) {
            drag_1.dragNewPiece(state, piece, event, force);
        },
        destroy() {
            board.stop(state);
            state.dom.unbind && state.dom.unbind();
            state.dom.destroyed = true;
        }
    };
}
exports.start = start;

},{"./anim":2,"./board":4,"./config":6,"./drag":7,"./explosion":11,"./fen":12}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
const premove_1 = require("./premove");
function callUserFunction(f, ...args) {
    if (f)
        setTimeout(() => f(...args), 1);
}
exports.callUserFunction = callUserFunction;
function toggleOrientation(state) {
    state.orientation = util_1.opposite(state.orientation);
    state.animation.current =
        state.draggable.current =
            state.selected = undefined;
}
exports.toggleOrientation = toggleOrientation;
function reset(state) {
    state.lastMove = undefined;
    unselect(state);
    unsetPremove(state);
    unsetPredrop(state);
}
exports.reset = reset;
function setPieces(state, pieces) {
    for (let key in pieces) {
        const piece = pieces[key];
        if (piece)
            state.pieces[key] = piece;
        else
            delete state.pieces[key];
    }
}
exports.setPieces = setPieces;
function setCheck(state, color) {
    state.check = undefined;
    if (color === true)
        color = state.turnColor;
    if (color)
        for (let k in state.pieces) {
            if (state.pieces[k].role === 'king' && state.pieces[k].color === color) {
                state.check = k;
            }
        }
}
exports.setCheck = setCheck;
function setPremove(state, orig, dest, meta) {
    unsetPredrop(state);
    state.premovable.current = [orig, dest];
    callUserFunction(state.premovable.events.set, orig, dest, meta);
}
function unsetPremove(state) {
    if (state.premovable.current) {
        state.premovable.current = undefined;
        callUserFunction(state.premovable.events.unset);
    }
}
exports.unsetPremove = unsetPremove;
function setPredrop(state, role, key) {
    unsetPremove(state);
    state.predroppable.current = { role, key };
    callUserFunction(state.predroppable.events.set, role, key);
}
function unsetPredrop(state) {
    const pd = state.predroppable;
    if (pd.current) {
        pd.current = undefined;
        callUserFunction(pd.events.unset);
    }
}
exports.unsetPredrop = unsetPredrop;
function tryAutoCastle(state, orig, dest) {
    if (!state.autoCastle)
        return false;
    const king = state.pieces[orig];
    if (!king || king.role !== 'king')
        return false;
    const origPos = util_1.key2pos(orig);
    if (origPos[0] !== 5)
        return false;
    if (origPos[1] !== 1 && origPos[1] !== 8)
        return false;
    const destPos = util_1.key2pos(dest);
    let oldRookPos, newRookPos, newKingPos;
    if (destPos[0] === 7 || destPos[0] === 8) {
        oldRookPos = util_1.pos2key([8, origPos[1]]);
        newRookPos = util_1.pos2key([6, origPos[1]]);
        newKingPos = util_1.pos2key([7, origPos[1]]);
    }
    else if (destPos[0] === 3 || destPos[0] === 1) {
        oldRookPos = util_1.pos2key([1, origPos[1]]);
        newRookPos = util_1.pos2key([4, origPos[1]]);
        newKingPos = util_1.pos2key([3, origPos[1]]);
    }
    else
        return false;
    const rook = state.pieces[oldRookPos];
    if (!rook || rook.role !== 'rook')
        return false;
    delete state.pieces[orig];
    delete state.pieces[oldRookPos];
    state.pieces[newKingPos] = king;
    state.pieces[newRookPos] = rook;
    return true;
}
function baseMove(state, orig, dest) {
    const origPiece = state.pieces[orig], destPiece = state.pieces[dest];
    if (orig === dest || !origPiece)
        return false;
    const captured = (destPiece && destPiece.color !== origPiece.color) ? destPiece : undefined;
    if (dest == state.selected)
        unselect(state);
    callUserFunction(state.events.move, orig, dest, captured);
    if (!tryAutoCastle(state, orig, dest)) {
        state.pieces[dest] = origPiece;
        delete state.pieces[orig];
    }
    state.lastMove = [orig, dest];
    state.check = undefined;
    callUserFunction(state.events.change);
    return captured || true;
}
exports.baseMove = baseMove;
function baseNewPiece(state, piece, key, force) {
    if (state.pieces[key]) {
        if (force)
            delete state.pieces[key];
        else
            return false;
    }
    callUserFunction(state.events.dropNewPiece, piece, key);
    state.pieces[key] = piece;
    state.lastMove = [key];
    state.check = undefined;
    callUserFunction(state.events.change);
    state.movable.dests = undefined;
    state.turnColor = util_1.opposite(state.turnColor);
    return true;
}
exports.baseNewPiece = baseNewPiece;
function baseUserMove(state, orig, dest) {
    const result = baseMove(state, orig, dest);
    if (result) {
        state.movable.dests = undefined;
        state.turnColor = util_1.opposite(state.turnColor);
        state.animation.current = undefined;
    }
    return result;
}
function userMove(state, orig, dest) {
    if (canMove(state, orig, dest)) {
        const result = baseUserMove(state, orig, dest);
        if (result) {
            const holdTime = state.hold.stop();
            unselect(state);
            const metadata = {
                premove: false,
                ctrlKey: state.stats.ctrlKey,
                holdTime
            };
            if (result !== true)
                metadata.captured = result;
            callUserFunction(state.movable.events.after, orig, dest, metadata);
            return true;
        }
    }
    else if (canPremove(state, orig, dest)) {
        setPremove(state, orig, dest, {
            ctrlKey: state.stats.ctrlKey
        });
        unselect(state);
        return true;
    }
    unselect(state);
    return false;
}
exports.userMove = userMove;
function dropNewPiece(state, orig, dest, force) {
    if (canDrop(state, orig, dest) || force) {
        const piece = state.pieces[orig];
        delete state.pieces[orig];
        baseNewPiece(state, piece, dest, force);
        callUserFunction(state.movable.events.afterNewPiece, piece.role, dest, {
            predrop: false
        });
    }
    else if (canPredrop(state, orig, dest)) {
        setPredrop(state, state.pieces[orig].role, dest);
    }
    else {
        unsetPremove(state);
        unsetPredrop(state);
    }
    delete state.pieces[orig];
    unselect(state);
}
exports.dropNewPiece = dropNewPiece;
function selectSquare(state, key, force) {
    callUserFunction(state.events.select, key);
    if (state.selected) {
        if (state.selected === key && !state.draggable.enabled) {
            unselect(state);
            state.hold.cancel();
            return;
        }
        else if ((state.selectable.enabled || force) && state.selected !== key) {
            if (userMove(state, state.selected, key)) {
                state.stats.dragged = false;
                return;
            }
        }
    }
    if (isMovable(state, key) || isPremovable(state, key)) {
        setSelected(state, key);
        state.hold.start();
    }
}
exports.selectSquare = selectSquare;
function setSelected(state, key) {
    state.selected = key;
    if (isPremovable(state, key)) {
        state.premovable.dests = premove_1.default(state.pieces, key, state.premovable.castle);
    }
    else
        state.premovable.dests = undefined;
}
exports.setSelected = setSelected;
function unselect(state) {
    state.selected = undefined;
    state.premovable.dests = undefined;
    state.hold.cancel();
}
exports.unselect = unselect;
function isMovable(state, orig) {
    const piece = state.pieces[orig];
    return !!piece && (state.movable.color === 'both' || (state.movable.color === piece.color &&
        state.turnColor === piece.color));
}
function canMove(state, orig, dest) {
    return orig !== dest && isMovable(state, orig) && (state.movable.free || (!!state.movable.dests && util_1.containsX(state.movable.dests[orig], dest)));
}
exports.canMove = canMove;
function canDrop(state, orig, dest) {
    const piece = state.pieces[orig];
    return !!piece && dest && (orig === dest || !state.pieces[dest]) && (state.movable.color === 'both' || (state.movable.color === piece.color &&
        state.turnColor === piece.color));
}
function isPremovable(state, orig) {
    const piece = state.pieces[orig];
    return !!piece && state.premovable.enabled &&
        state.movable.color === piece.color &&
        state.turnColor !== piece.color;
}
function canPremove(state, orig, dest) {
    return orig !== dest &&
        isPremovable(state, orig) &&
        util_1.containsX(premove_1.default(state.pieces, orig, state.premovable.castle), dest);
}
function canPredrop(state, orig, dest) {
    const piece = state.pieces[orig];
    const destPiece = state.pieces[dest];
    return !!piece && dest &&
        (!destPiece || destPiece.color !== state.movable.color) &&
        state.predroppable.enabled &&
        (piece.role !== 'pawn' || (dest[1] !== '1' && dest[1] !== '8')) &&
        state.movable.color === piece.color &&
        state.turnColor !== piece.color;
}
function isDraggable(state, orig) {
    const piece = state.pieces[orig];
    return !!piece && state.draggable.enabled && (state.movable.color === 'both' || (state.movable.color === piece.color && (state.turnColor === piece.color || state.premovable.enabled)));
}
exports.isDraggable = isDraggable;
function playPremove(state) {
    const move = state.premovable.current;
    if (!move)
        return false;
    const orig = move[0], dest = move[1];
    let success = false;
    if (canMove(state, orig, dest)) {
        const result = baseUserMove(state, orig, dest);
        if (result) {
            const metadata = { premove: true };
            if (result !== true)
                metadata.captured = result;
            callUserFunction(state.movable.events.after, orig, dest, metadata);
            success = true;
        }
    }
    unsetPremove(state);
    return success;
}
exports.playPremove = playPremove;
function playPredrop(state, validate) {
    let drop = state.predroppable.current, success = false;
    if (!drop)
        return false;
    if (validate(drop)) {
        const piece = {
            role: drop.role,
            color: state.movable.color
        };
        if (baseNewPiece(state, piece, drop.key)) {
            callUserFunction(state.movable.events.afterNewPiece, drop.role, drop.key, {
                predrop: true
            });
            success = true;
        }
    }
    unsetPredrop(state);
    return success;
}
exports.playPredrop = playPredrop;
function cancelMove(state) {
    unsetPremove(state);
    unsetPredrop(state);
    unselect(state);
}
exports.cancelMove = cancelMove;
function stop(state) {
    state.movable.color =
        state.movable.dests =
            state.animation.current = undefined;
    cancelMove(state);
}
exports.stop = stop;
function getKeyAtDomPos(pos, asWhite, bounds) {
    let file = Math.ceil(8 * ((pos[0] - bounds.left) / bounds.width));
    if (!asWhite)
        file = 9 - file;
    let rank = Math.ceil(8 - (8 * ((pos[1] - bounds.top) / bounds.height)));
    if (!asWhite)
        rank = 9 - rank;
    return (file > 0 && file < 9 && rank > 0 && rank < 9) ? util_1.pos2key([file, rank]) : undefined;
}
exports.getKeyAtDomPos = getKeyAtDomPos;
function whitePov(s) {
    return s.orientation === 'white';
}
exports.whitePov = whitePov;

},{"./premove":13,"./util":18}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const api_1 = require("./api");
const config_1 = require("./config");
const state_1 = require("./state");
const wrap_1 = require("./wrap");
const events = require("./events");
const render_1 = require("./render");
const svg = require("./svg");
const util = require("./util");
function Chessground(element, config) {
    const state = state_1.defaults();
    config_1.configure(state, config || {});
    function redrawAll() {
        let prevUnbind = state.dom && state.dom.unbind;
        const relative = state.viewOnly && !state.drawable.visible, elements = wrap_1.default(element, state, relative), bounds = util.memo(() => elements.board.getBoundingClientRect()), redrawNow = (skipSvg) => {
            render_1.default(state);
            if (!skipSvg && elements.svg)
                svg.renderSvg(state, elements.svg);
        };
        state.dom = {
            elements,
            bounds,
            redraw: debounceRedraw(redrawNow),
            redrawNow,
            unbind: prevUnbind,
            relative
        };
        state.drawable.prevSvgHash = '';
        redrawNow(false);
        events.bindBoard(state);
        if (!prevUnbind)
            state.dom.unbind = events.bindDocument(state, redrawAll);
        state.events.insert && state.events.insert(elements);
    }
    redrawAll();
    return api_1.start(state, redrawAll);
}
exports.Chessground = Chessground;
;
function debounceRedraw(redrawNow) {
    let redrawing = false;
    return () => {
        if (redrawing)
            return;
        redrawing = true;
        requestAnimationFrame(() => {
            redrawNow();
            redrawing = false;
        });
    };
}

},{"./api":3,"./config":6,"./events":10,"./render":14,"./state":15,"./svg":16,"./util":18,"./wrap":19}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const board_1 = require("./board");
const fen_1 = require("./fen");
function configure(state, config) {
    if (config.movable && config.movable.dests)
        state.movable.dests = undefined;
    merge(state, config);
    if (config.fen) {
        state.pieces = fen_1.read(config.fen);
        state.drawable.shapes = [];
    }
    if (config.hasOwnProperty('check'))
        board_1.setCheck(state, config.check || false);
    if (config.hasOwnProperty('lastMove') && !config.lastMove)
        state.lastMove = undefined;
    else if (config.lastMove)
        state.lastMove = config.lastMove;
    if (state.selected)
        board_1.setSelected(state, state.selected);
    if (!state.animation.duration || state.animation.duration < 100)
        state.animation.enabled = false;
    if (!state.movable.rookCastle && state.movable.dests) {
        const rank = state.movable.color === 'white' ? 1 : 8, kingStartPos = 'e' + rank, dests = state.movable.dests[kingStartPos], king = state.pieces[kingStartPos];
        if (!dests || !king || king.role !== 'king')
            return;
        state.movable.dests[kingStartPos] = dests.filter(d => !((d === 'a' + rank) && dests.indexOf('c' + rank) !== -1) &&
            !((d === 'h' + rank) && dests.indexOf('g' + rank) !== -1));
    }
}
exports.configure = configure;
;
function merge(base, extend) {
    for (let key in extend) {
        if (isObject(base[key]) && isObject(extend[key]))
            merge(base[key], extend[key]);
        else
            base[key] = extend[key];
    }
}
function isObject(o) {
    return typeof o === 'object';
}

},{"./board":4,"./fen":12}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const board = require("./board");
const util = require("./util");
const draw_1 = require("./draw");
const anim_1 = require("./anim");
function start(s, e) {
    if (e.button !== undefined && e.button !== 0)
        return;
    if (e.touches && e.touches.length > 1)
        return;
    const bounds = s.dom.bounds(), position = util.eventPosition(e), orig = board.getKeyAtDomPos(position, board.whitePov(s), bounds);
    if (!orig)
        return;
    const piece = s.pieces[orig];
    const previouslySelected = s.selected;
    if (!previouslySelected && s.drawable.enabled && (s.drawable.eraseOnClick || (!piece || piece.color !== s.turnColor)))
        draw_1.clear(s);
    if (e.cancelable !== false &&
        (!e.touches || !s.movable.color || piece || previouslySelected || pieceCloseTo(s, position)))
        e.preventDefault();
    const hadPremove = !!s.premovable.current;
    const hadPredrop = !!s.predroppable.current;
    s.stats.ctrlKey = e.ctrlKey;
    if (s.selected && board.canMove(s, s.selected, orig)) {
        anim_1.anim(state => board.selectSquare(state, orig), s);
    }
    else {
        board.selectSquare(s, orig);
    }
    const stillSelected = s.selected === orig;
    const element = pieceElementByKey(s, orig);
    if (piece && element && stillSelected && board.isDraggable(s, orig)) {
        const squareBounds = computeSquareBounds(orig, board.whitePov(s), bounds);
        s.draggable.current = {
            orig,
            origPos: util.key2pos(orig),
            piece,
            rel: position,
            epos: position,
            pos: [0, 0],
            dec: s.draggable.centerPiece ? [
                position[0] - (squareBounds.left + squareBounds.width / 2),
                position[1] - (squareBounds.top + squareBounds.height / 2)
            ] : [0, 0],
            started: s.draggable.autoDistance && s.stats.dragged,
            element,
            previouslySelected,
            originTarget: e.target
        };
        element.cgDragging = true;
        element.classList.add('dragging');
        const ghost = s.dom.elements.ghost;
        if (ghost) {
            ghost.className = `ghost ${piece.color} ${piece.role}`;
            util.translateAbs(ghost, util.posToTranslateAbs(bounds)(util.key2pos(orig), board.whitePov(s)));
            util.setVisible(ghost, true);
        }
        processDrag(s);
    }
    else {
        if (hadPremove)
            board.unsetPremove(s);
        if (hadPredrop)
            board.unsetPredrop(s);
    }
    s.dom.redraw();
}
exports.start = start;
function pieceCloseTo(s, pos) {
    const asWhite = board.whitePov(s), bounds = s.dom.bounds(), radiusSq = Math.pow(bounds.width / 8, 2);
    for (let key in s.pieces) {
        const squareBounds = computeSquareBounds(key, asWhite, bounds), center = [
            squareBounds.left + squareBounds.width / 2,
            squareBounds.top + squareBounds.height / 2
        ];
        if (util.distanceSq(center, pos) <= radiusSq)
            return true;
    }
    return false;
}
exports.pieceCloseTo = pieceCloseTo;
function dragNewPiece(s, piece, e, force) {
    const key = 'a0';
    s.pieces[key] = piece;
    s.dom.redraw();
    const position = util.eventPosition(e), asWhite = board.whitePov(s), bounds = s.dom.bounds(), squareBounds = computeSquareBounds(key, asWhite, bounds);
    const rel = [
        (asWhite ? 0 : 7) * squareBounds.width + bounds.left,
        (asWhite ? 8 : -1) * squareBounds.height + bounds.top
    ];
    s.draggable.current = {
        orig: key,
        origPos: util.key2pos(key),
        piece,
        rel,
        epos: position,
        pos: [position[0] - rel[0], position[1] - rel[1]],
        dec: [-squareBounds.width / 2, -squareBounds.height / 2],
        started: true,
        element: () => pieceElementByKey(s, key),
        originTarget: e.target,
        newPiece: true,
        force: !!force
    };
    processDrag(s);
}
exports.dragNewPiece = dragNewPiece;
function processDrag(s) {
    requestAnimationFrame(() => {
        const cur = s.draggable.current;
        if (!cur)
            return;
        if (s.animation.current && s.animation.current.plan.anims[cur.orig])
            s.animation.current = undefined;
        const origPiece = s.pieces[cur.orig];
        if (!origPiece || !util.samePiece(origPiece, cur.piece))
            cancel(s);
        else {
            if (!cur.started && util.distanceSq(cur.epos, cur.rel) >= Math.pow(s.draggable.distance, 2))
                cur.started = true;
            if (cur.started) {
                if (typeof cur.element === 'function') {
                    const found = cur.element();
                    if (!found)
                        return;
                    found.cgDragging = true;
                    found.classList.add('dragging');
                    cur.element = found;
                }
                cur.pos = [
                    cur.epos[0] - cur.rel[0],
                    cur.epos[1] - cur.rel[1]
                ];
                const translation = util.posToTranslateAbs(s.dom.bounds())(cur.origPos, board.whitePov(s));
                translation[0] += cur.pos[0] + cur.dec[0];
                translation[1] += cur.pos[1] + cur.dec[1];
                util.translateAbs(cur.element, translation);
            }
        }
        processDrag(s);
    });
}
function move(s, e) {
    if (s.draggable.current && (!e.touches || e.touches.length < 2)) {
        s.draggable.current.epos = util.eventPosition(e);
    }
}
exports.move = move;
function end(s, e) {
    const cur = s.draggable.current;
    if (!cur)
        return;
    if (e.type === 'touchend' && e.cancelable !== false)
        e.preventDefault();
    if (e.type === 'touchend' && cur && cur.originTarget !== e.target && !cur.newPiece) {
        s.draggable.current = undefined;
        return;
    }
    board.unsetPremove(s);
    board.unsetPredrop(s);
    const eventPos = util.eventPosition(e) || cur.epos;
    const dest = board.getKeyAtDomPos(eventPos, board.whitePov(s), s.dom.bounds());
    if (dest && cur.started && cur.orig !== dest) {
        if (cur.newPiece)
            board.dropNewPiece(s, cur.orig, dest, cur.force);
        else {
            s.stats.ctrlKey = e.ctrlKey;
            if (board.userMove(s, cur.orig, dest))
                s.stats.dragged = true;
        }
    }
    else if (cur.newPiece) {
        delete s.pieces[cur.orig];
    }
    else if (s.draggable.deleteOnDropOff && !dest) {
        delete s.pieces[cur.orig];
        board.callUserFunction(s.events.change);
    }
    if (cur && cur.orig === cur.previouslySelected && (cur.orig === dest || !dest))
        board.unselect(s);
    else if (!s.selectable.enabled)
        board.unselect(s);
    removeDragElements(s);
    s.draggable.current = undefined;
    s.dom.redraw();
}
exports.end = end;
function cancel(s) {
    const cur = s.draggable.current;
    if (cur) {
        if (cur.newPiece)
            delete s.pieces[cur.orig];
        s.draggable.current = undefined;
        board.unselect(s);
        removeDragElements(s);
        s.dom.redraw();
    }
}
exports.cancel = cancel;
function removeDragElements(s) {
    const e = s.dom.elements;
    if (e.ghost)
        util.setVisible(e.ghost, false);
}
function computeSquareBounds(key, asWhite, bounds) {
    const pos = util.key2pos(key);
    if (!asWhite) {
        pos[0] = 9 - pos[0];
        pos[1] = 9 - pos[1];
    }
    return {
        left: bounds.left + bounds.width * (pos[0] - 1) / 8,
        top: bounds.top + bounds.height * (8 - pos[1]) / 8,
        width: bounds.width / 8,
        height: bounds.height / 8
    };
}
function pieceElementByKey(s, key) {
    let el = s.dom.elements.board.firstChild;
    while (el) {
        if (el.cgKey === key && el.tagName === 'PIECE')
            return el;
        el = el.nextSibling;
    }
    return undefined;
}

},{"./anim":2,"./board":4,"./draw":8,"./util":18}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const board_1 = require("./board");
const util_1 = require("./util");
const brushes = ['green', 'red', 'blue', 'yellow'];
function start(state, e) {
    if (e.touches && e.touches.length > 1)
        return;
    e.stopPropagation();
    e.preventDefault();
    e.ctrlKey ? board_1.unselect(state) : board_1.cancelMove(state);
    const pos = util_1.eventPosition(e), orig = board_1.getKeyAtDomPos(pos, board_1.whitePov(state), state.dom.bounds());
    if (!orig)
        return;
    state.drawable.current = {
        orig,
        pos,
        brush: eventBrush(e)
    };
    processDraw(state);
}
exports.start = start;
function processDraw(state) {
    requestAnimationFrame(() => {
        const cur = state.drawable.current;
        if (cur) {
            const mouseSq = board_1.getKeyAtDomPos(cur.pos, board_1.whitePov(state), state.dom.bounds());
            if (mouseSq !== cur.mouseSq) {
                cur.mouseSq = mouseSq;
                cur.dest = mouseSq !== cur.orig ? mouseSq : undefined;
                state.dom.redrawNow();
            }
            processDraw(state);
        }
    });
}
exports.processDraw = processDraw;
function move(state, e) {
    if (state.drawable.current)
        state.drawable.current.pos = util_1.eventPosition(e);
}
exports.move = move;
function end(state) {
    const cur = state.drawable.current;
    if (cur) {
        if (cur.mouseSq)
            addShape(state.drawable, cur);
        cancel(state);
    }
}
exports.end = end;
function cancel(state) {
    if (state.drawable.current) {
        state.drawable.current = undefined;
        state.dom.redraw();
    }
}
exports.cancel = cancel;
function clear(state) {
    if (state.drawable.shapes.length) {
        state.drawable.shapes = [];
        state.dom.redraw();
        onChange(state.drawable);
    }
}
exports.clear = clear;
function eventBrush(e) {
    return brushes[((e.shiftKey || e.ctrlKey) && util_1.isRightButton(e) ? 1 : 0) + (e.altKey ? 2 : 0)];
}
function addShape(drawable, cur) {
    const sameShape = (s) => s.orig === cur.orig && s.dest === cur.dest;
    const similar = drawable.shapes.filter(sameShape)[0];
    if (similar)
        drawable.shapes = drawable.shapes.filter(s => !sameShape(s));
    if (!similar || similar.brush !== cur.brush)
        drawable.shapes.push(cur);
    onChange(drawable);
}
function onChange(drawable) {
    if (drawable.onChange)
        drawable.onChange(drawable.shapes);
}

},{"./board":4,"./util":18}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const board = require("./board");
const util = require("./util");
const drag_1 = require("./drag");
function setDropMode(s, piece) {
    s.dropmode = {
        active: true,
        piece
    };
    drag_1.cancel(s);
}
exports.setDropMode = setDropMode;
function cancelDropMode(s) {
    s.dropmode = {
        active: false
    };
}
exports.cancelDropMode = cancelDropMode;
function drop(s, e) {
    if (!s.dropmode.active)
        return;
    board.unsetPremove(s);
    board.unsetPredrop(s);
    const piece = s.dropmode.piece;
    if (piece) {
        s.pieces.a0 = piece;
        const position = util.eventPosition(e);
        const dest = position && board.getKeyAtDomPos(position, board.whitePov(s), s.dom.bounds());
        if (dest)
            board.dropNewPiece(s, 'a0', dest);
    }
    s.dom.redraw();
}
exports.drop = drop;

},{"./board":4,"./drag":7,"./util":18}],10:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const drag = require("./drag");
const draw = require("./draw");
const drop_1 = require("./drop");
const util_1 = require("./util");
function bindBoard(s) {
    if (s.viewOnly)
        return;
    const boardEl = s.dom.elements.board, onStart = startDragOrDraw(s);
    boardEl.addEventListener('touchstart', onStart, { passive: false });
    boardEl.addEventListener('mousedown', onStart, { passive: false });
    if (s.disableContextMenu || s.drawable.enabled) {
        boardEl.addEventListener('contextmenu', e => e.preventDefault());
    }
}
exports.bindBoard = bindBoard;
function bindDocument(s, redrawAll) {
    const unbinds = [];
    if (!s.dom.relative && s.resizable) {
        const onResize = () => {
            s.dom.bounds.clear();
            requestAnimationFrame(redrawAll);
        };
        unbinds.push(unbindable(document.body, 'chessground.resize', onResize));
    }
    if (!s.viewOnly) {
        const onmove = dragOrDraw(s, drag.move, draw.move);
        const onend = dragOrDraw(s, drag.end, draw.end);
        ['touchmove', 'mousemove'].forEach(ev => unbinds.push(unbindable(document, ev, onmove)));
        ['touchend', 'mouseup'].forEach(ev => unbinds.push(unbindable(document, ev, onend)));
        const onScroll = () => s.dom.bounds.clear();
        unbinds.push(unbindable(window, 'scroll', onScroll, { passive: true }));
        unbinds.push(unbindable(window, 'resize', onScroll, { passive: true }));
    }
    return () => unbinds.forEach(f => f());
}
exports.bindDocument = bindDocument;
function unbindable(el, eventName, callback, options) {
    el.addEventListener(eventName, callback, options);
    return () => el.removeEventListener(eventName, callback);
}
function startDragOrDraw(s) {
    return e => {
        if (s.draggable.current)
            drag.cancel(s);
        else if (s.drawable.current)
            draw.cancel(s);
        else if (e.shiftKey || util_1.isRightButton(e)) {
            if (s.drawable.enabled)
                draw.start(s, e);
        }
        else if (!s.viewOnly) {
            if (s.dropmode.active)
                drop_1.drop(s, e);
            else
                drag.start(s, e);
        }
    };
}
function dragOrDraw(s, withDrag, withDraw) {
    return e => {
        if (e.shiftKey || util_1.isRightButton(e)) {
            if (s.drawable.enabled)
                withDraw(s, e);
        }
        else if (!s.viewOnly)
            withDrag(s, e);
    };
}

},{"./drag":7,"./draw":8,"./drop":9,"./util":18}],11:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function explosion(state, keys) {
    state.exploding = { stage: 1, keys };
    state.dom.redraw();
    setTimeout(() => {
        setStage(state, 2);
        setTimeout(() => setStage(state, undefined), 120);
    }, 120);
}
exports.default = explosion;
function setStage(state, stage) {
    if (state.exploding) {
        if (stage)
            state.exploding.stage = stage;
        else
            state.exploding = undefined;
        state.dom.redraw();
    }
}

},{}],12:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
const cg = require("./types");
exports.initial = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR';
const roles = { p: 'pawn', r: 'rook', n: 'knight', b: 'bishop', q: 'queen', k: 'king' };
const letters = { pawn: 'p', rook: 'r', knight: 'n', bishop: 'b', queen: 'q', king: 'k' };
function read(fen) {
    if (fen === 'start')
        fen = exports.initial;
    const pieces = {};
    let row = 8, col = 0;
    for (const c of fen) {
        switch (c) {
            case ' ': return pieces;
            case '/':
                --row;
                if (row === 0)
                    return pieces;
                col = 0;
                break;
            case '~':
                const piece = pieces[util_1.pos2key([col, row])];
                if (piece)
                    piece.promoted = true;
                break;
            default:
                const nb = c.charCodeAt(0);
                if (nb < 57)
                    col += nb - 48;
                else {
                    ++col;
                    const role = c.toLowerCase();
                    pieces[util_1.pos2key([col, row])] = {
                        role: roles[role],
                        color: (c === role ? 'black' : 'white')
                    };
                }
        }
    }
    return pieces;
}
exports.read = read;
function write(pieces) {
    return util_1.invRanks.map(y => cg.ranks.map(x => {
        const piece = pieces[util_1.pos2key([x, y])];
        if (piece) {
            const letter = letters[piece.role];
            return piece.color === 'white' ? letter.toUpperCase() : letter;
        }
        else
            return '1';
    }).join('')).join('/').replace(/1{2,}/g, s => s.length.toString());
}
exports.write = write;

},{"./types":17,"./util":18}],13:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util = require("./util");
function diff(a, b) {
    return Math.abs(a - b);
}
function pawn(color) {
    return (x1, y1, x2, y2) => diff(x1, x2) < 2 && (color === 'white' ? (y2 === y1 + 1 || (y1 <= 2 && y2 === (y1 + 2) && x1 === x2)) : (y2 === y1 - 1 || (y1 >= 7 && y2 === (y1 - 2) && x1 === x2)));
}
const knight = (x1, y1, x2, y2) => {
    const xd = diff(x1, x2);
    const yd = diff(y1, y2);
    return (xd === 1 && yd === 2) || (xd === 2 && yd === 1);
};
const bishop = (x1, y1, x2, y2) => {
    return diff(x1, x2) === diff(y1, y2);
};
const rook = (x1, y1, x2, y2) => {
    return x1 === x2 || y1 === y2;
};
const queen = (x1, y1, x2, y2) => {
    return bishop(x1, y1, x2, y2) || rook(x1, y1, x2, y2);
};
function king(color, rookFiles, canCastle) {
    return (x1, y1, x2, y2) => (diff(x1, x2) < 2 && diff(y1, y2) < 2) || (canCastle && y1 === y2 && y1 === (color === 'white' ? 1 : 8) && ((x1 === 5 && ((util.containsX(rookFiles, 1) && x2 === 3) || (util.containsX(rookFiles, 8) && x2 === 7))) ||
        util.containsX(rookFiles, x2)));
}
function rookFilesOf(pieces, color) {
    const backrank = color == 'white' ? '1' : '8';
    return Object.keys(pieces).filter(key => {
        const piece = pieces[key];
        return key[1] === backrank && piece && piece.color === color && piece.role === 'rook';
    }).map((key) => util.key2pos(key)[0]);
}
const allPos = util.allKeys.map(util.key2pos);
function premove(pieces, key, canCastle) {
    const piece = pieces[key], pos = util.key2pos(key), r = piece.role, mobility = r === 'pawn' ? pawn(piece.color) : (r === 'knight' ? knight : (r === 'bishop' ? bishop : (r === 'rook' ? rook : (r === 'queen' ? queen : king(piece.color, rookFilesOf(pieces, piece.color), canCastle)))));
    return allPos.filter(pos2 => (pos[0] !== pos2[0] || pos[1] !== pos2[1]) && mobility(pos[0], pos[1], pos2[0], pos2[1])).map(util.pos2key);
}
exports.default = premove;
;

},{"./util":18}],14:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
const board_1 = require("./board");
const util = require("./util");
function render(s) {
    const asWhite = board_1.whitePov(s), posToTranslate = s.dom.relative ? util.posToTranslateRel : util.posToTranslateAbs(s.dom.bounds()), translate = s.dom.relative ? util.translateRel : util.translateAbs, boardEl = s.dom.elements.board, pieces = s.pieces, curAnim = s.animation.current, anims = curAnim ? curAnim.plan.anims : {}, fadings = curAnim ? curAnim.plan.fadings : {}, curDrag = s.draggable.current, squares = computeSquareClasses(s), samePieces = {}, sameSquares = {}, movedPieces = {}, movedSquares = {}, piecesKeys = Object.keys(pieces);
    let k, p, el, pieceAtKey, elPieceName, anim, fading, pMvdset, pMvd, sMvdset, sMvd;
    el = boardEl.firstChild;
    while (el) {
        k = el.cgKey;
        if (isPieceNode(el)) {
            pieceAtKey = pieces[k];
            anim = anims[k];
            fading = fadings[k];
            elPieceName = el.cgPiece;
            if (el.cgDragging && (!curDrag || curDrag.orig !== k)) {
                el.classList.remove('dragging');
                translate(el, posToTranslate(util_1.key2pos(k), asWhite));
                el.cgDragging = false;
            }
            if (!fading && el.cgFading) {
                el.cgFading = false;
                el.classList.remove('fading');
            }
            if (pieceAtKey) {
                if (anim && el.cgAnimating && elPieceName === pieceNameOf(pieceAtKey)) {
                    const pos = util_1.key2pos(k);
                    pos[0] += anim[2];
                    pos[1] += anim[3];
                    el.classList.add('anim');
                    translate(el, posToTranslate(pos, asWhite));
                }
                else if (el.cgAnimating) {
                    el.cgAnimating = false;
                    el.classList.remove('anim');
                    translate(el, posToTranslate(util_1.key2pos(k), asWhite));
                    if (s.addPieceZIndex)
                        el.style.zIndex = posZIndex(util_1.key2pos(k), asWhite);
                }
                if (elPieceName === pieceNameOf(pieceAtKey) && (!fading || !el.cgFading)) {
                    samePieces[k] = true;
                }
                else {
                    if (fading && elPieceName === pieceNameOf(fading)) {
                        el.classList.add('fading');
                        el.cgFading = true;
                    }
                    else {
                        if (movedPieces[elPieceName])
                            movedPieces[elPieceName].push(el);
                        else
                            movedPieces[elPieceName] = [el];
                    }
                }
            }
            else {
                if (movedPieces[elPieceName])
                    movedPieces[elPieceName].push(el);
                else
                    movedPieces[elPieceName] = [el];
            }
        }
        else if (isSquareNode(el)) {
            const cn = el.className;
            if (squares[k] === cn)
                sameSquares[k] = true;
            else if (movedSquares[cn])
                movedSquares[cn].push(el);
            else
                movedSquares[cn] = [el];
        }
        el = el.nextSibling;
    }
    for (const sk in squares) {
        if (!sameSquares[sk]) {
            sMvdset = movedSquares[squares[sk]];
            sMvd = sMvdset && sMvdset.pop();
            const translation = posToTranslate(util_1.key2pos(sk), asWhite);
            if (sMvd) {
                sMvd.cgKey = sk;
                translate(sMvd, translation);
            }
            else {
                const squareNode = util_1.createEl('square', squares[sk]);
                squareNode.cgKey = sk;
                translate(squareNode, translation);
                boardEl.insertBefore(squareNode, boardEl.firstChild);
            }
        }
    }
    for (const j in piecesKeys) {
        k = piecesKeys[j];
        p = pieces[k];
        anim = anims[k];
        if (!samePieces[k]) {
            pMvdset = movedPieces[pieceNameOf(p)];
            pMvd = pMvdset && pMvdset.pop();
            if (pMvd) {
                pMvd.cgKey = k;
                if (pMvd.cgFading) {
                    pMvd.classList.remove('fading');
                    pMvd.cgFading = false;
                }
                const pos = util_1.key2pos(k);
                if (s.addPieceZIndex)
                    pMvd.style.zIndex = posZIndex(pos, asWhite);
                if (anim) {
                    pMvd.cgAnimating = true;
                    pMvd.classList.add('anim');
                    pos[0] += anim[2];
                    pos[1] += anim[3];
                }
                translate(pMvd, posToTranslate(pos, asWhite));
            }
            else {
                const pieceName = pieceNameOf(p), pieceNode = util_1.createEl('piece', pieceName), pos = util_1.key2pos(k);
                pieceNode.cgPiece = pieceName;
                pieceNode.cgKey = k;
                if (anim) {
                    pieceNode.cgAnimating = true;
                    pos[0] += anim[2];
                    pos[1] += anim[3];
                }
                translate(pieceNode, posToTranslate(pos, asWhite));
                if (s.addPieceZIndex)
                    pieceNode.style.zIndex = posZIndex(pos, asWhite);
                boardEl.appendChild(pieceNode);
            }
        }
    }
    for (const i in movedPieces)
        removeNodes(s, movedPieces[i]);
    for (const i in movedSquares)
        removeNodes(s, movedSquares[i]);
}
exports.default = render;
function isPieceNode(el) {
    return el.tagName === 'PIECE';
}
function isSquareNode(el) {
    return el.tagName === 'SQUARE';
}
function removeNodes(s, nodes) {
    for (const i in nodes)
        s.dom.elements.board.removeChild(nodes[i]);
}
function posZIndex(pos, asWhite) {
    let z = 2 + (pos[1] - 1) * 8 + (8 - pos[0]);
    if (asWhite)
        z = 67 - z;
    return z + '';
}
function pieceNameOf(piece) {
    return `${piece.color} ${piece.role}`;
}
function computeSquareClasses(s) {
    const squares = {};
    let i, k;
    if (s.lastMove && s.highlight.lastMove)
        for (i in s.lastMove) {
            addSquare(squares, s.lastMove[i], 'last-move');
        }
    if (s.check && s.highlight.check)
        addSquare(squares, s.check, 'check');
    if (s.selected) {
        addSquare(squares, s.selected, 'selected');
        if (s.movable.showDests) {
            const dests = s.movable.dests && s.movable.dests[s.selected];
            if (dests)
                for (i in dests) {
                    k = dests[i];
                    addSquare(squares, k, 'move-dest' + (s.pieces[k] ? ' oc' : ''));
                }
            const pDests = s.premovable.dests;
            if (pDests)
                for (i in pDests) {
                    k = pDests[i];
                    addSquare(squares, k, 'premove-dest' + (s.pieces[k] ? ' oc' : ''));
                }
        }
    }
    const premove = s.premovable.current;
    if (premove)
        for (i in premove)
            addSquare(squares, premove[i], 'current-premove');
    else if (s.predroppable.current)
        addSquare(squares, s.predroppable.current.key, 'current-premove');
    const o = s.exploding;
    if (o)
        for (i in o.keys)
            addSquare(squares, o.keys[i], 'exploding' + o.stage);
    return squares;
}
function addSquare(squares, key, klass) {
    if (squares[key])
        squares[key] += ' ' + klass;
    else
        squares[key] = klass;
}

},{"./board":4,"./util":18}],15:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fen = require("./fen");
const util_1 = require("./util");
function defaults() {
    return {
        pieces: fen.read(fen.initial),
        orientation: 'white',
        turnColor: 'white',
        coordinates: true,
        autoCastle: true,
        viewOnly: false,
        disableContextMenu: false,
        resizable: true,
        addPieceZIndex: false,
        pieceKey: false,
        highlight: {
            lastMove: true,
            check: true
        },
        animation: {
            enabled: true,
            duration: 200
        },
        movable: {
            free: true,
            color: 'both',
            showDests: true,
            events: {},
            rookCastle: true
        },
        premovable: {
            enabled: true,
            showDests: true,
            castle: true,
            events: {}
        },
        predroppable: {
            enabled: false,
            events: {}
        },
        draggable: {
            enabled: true,
            distance: 3,
            autoDistance: true,
            centerPiece: true,
            showGhost: true,
            deleteOnDropOff: false
        },
        dropmode: {
            active: false
        },
        selectable: {
            enabled: true
        },
        stats: {
            dragged: !('ontouchstart' in window)
        },
        events: {},
        drawable: {
            enabled: true,
            visible: true,
            eraseOnClick: true,
            shapes: [],
            autoShapes: [],
            brushes: {
                green: { key: 'g', color: '#15781B', opacity: 1, lineWidth: 10 },
                red: { key: 'r', color: '#882020', opacity: 1, lineWidth: 10 },
                blue: { key: 'b', color: '#003088', opacity: 1, lineWidth: 10 },
                yellow: { key: 'y', color: '#e68f00', opacity: 1, lineWidth: 10 },
                paleBlue: { key: 'pb', color: '#003088', opacity: 0.4, lineWidth: 15 },
                paleGreen: { key: 'pg', color: '#15781B', opacity: 0.4, lineWidth: 15 },
                paleRed: { key: 'pr', color: '#882020', opacity: 0.4, lineWidth: 15 },
                paleGrey: { key: 'pgr', color: '#4a4a4a', opacity: 0.35, lineWidth: 15 }
            },
            pieces: {
                baseUrl: 'https://lichess1.org/assets/piece/cburnett/'
            },
            prevSvgHash: ''
        },
        hold: util_1.timer()
    };
}
exports.defaults = defaults;

},{"./fen":12,"./util":18}],16:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
function createElement(tagName) {
    return document.createElementNS('http://www.w3.org/2000/svg', tagName);
}
exports.createElement = createElement;
function renderSvg(state, root) {
    const d = state.drawable, curD = d.current, cur = curD && curD.mouseSq ? curD : undefined, arrowDests = {};
    d.shapes.concat(d.autoShapes).concat(cur ? [cur] : []).forEach(s => {
        if (s.dest)
            arrowDests[s.dest] = (arrowDests[s.dest] || 0) + 1;
    });
    const shapes = d.shapes.concat(d.autoShapes).map((s) => {
        return {
            shape: s,
            current: false,
            hash: shapeHash(s, arrowDests, false)
        };
    });
    if (cur)
        shapes.push({
            shape: cur,
            current: true,
            hash: shapeHash(cur, arrowDests, true)
        });
    const fullHash = shapes.map(sc => sc.hash).join('');
    if (fullHash === state.drawable.prevSvgHash)
        return;
    state.drawable.prevSvgHash = fullHash;
    const defsEl = root.firstChild;
    syncDefs(d, shapes, defsEl);
    syncShapes(state, shapes, d.brushes, arrowDests, root, defsEl);
}
exports.renderSvg = renderSvg;
function syncDefs(d, shapes, defsEl) {
    const brushes = {};
    let brush;
    shapes.forEach(s => {
        if (s.shape.dest) {
            brush = d.brushes[s.shape.brush];
            if (s.shape.modifiers)
                brush = makeCustomBrush(brush, s.shape.modifiers);
            brushes[brush.key] = brush;
        }
    });
    const keysInDom = {};
    let el = defsEl.firstChild;
    while (el) {
        keysInDom[el.getAttribute('cgKey')] = true;
        el = el.nextSibling;
    }
    for (let key in brushes) {
        if (!keysInDom[key])
            defsEl.appendChild(renderMarker(brushes[key]));
    }
}
function syncShapes(state, shapes, brushes, arrowDests, root, defsEl) {
    const bounds = state.dom.bounds(), hashesInDom = {}, toRemove = [];
    shapes.forEach(sc => { hashesInDom[sc.hash] = false; });
    let el = defsEl.nextSibling, elHash;
    while (el) {
        elHash = el.getAttribute('cgHash');
        if (hashesInDom.hasOwnProperty(elHash))
            hashesInDom[elHash] = true;
        else
            toRemove.push(el);
        el = el.nextSibling;
    }
    toRemove.forEach(el => root.removeChild(el));
    shapes.forEach(sc => {
        if (!hashesInDom[sc.hash])
            root.appendChild(renderShape(state, sc, brushes, arrowDests, bounds));
    });
}
function shapeHash({ orig, dest, brush, piece, modifiers }, arrowDests, current) {
    return [current, orig, dest, brush, dest && arrowDests[dest] > 1,
        piece && pieceHash(piece),
        modifiers && modifiersHash(modifiers)
    ].filter(x => x).join('');
}
function pieceHash(piece) {
    return [piece.color, piece.role, piece.scale].filter(x => x).join('');
}
function modifiersHash(m) {
    return '' + (m.lineWidth || '');
}
function renderShape(state, { shape, current, hash }, brushes, arrowDests, bounds) {
    let el;
    if (shape.piece)
        el = renderPiece(state.drawable.pieces.baseUrl, orient(util_1.key2pos(shape.orig), state.orientation), shape.piece, bounds);
    else {
        const orig = orient(util_1.key2pos(shape.orig), state.orientation);
        if (shape.orig && shape.dest) {
            let brush = brushes[shape.brush];
            if (shape.modifiers)
                brush = makeCustomBrush(brush, shape.modifiers);
            el = renderArrow(brush, orig, orient(util_1.key2pos(shape.dest), state.orientation), current, arrowDests[shape.dest] > 1, bounds);
        }
        else
            el = renderCircle(brushes[shape.brush], orig, current, bounds);
    }
    el.setAttribute('cgHash', hash);
    return el;
}
function renderCircle(brush, pos, current, bounds) {
    const o = pos2px(pos, bounds), widths = circleWidth(bounds), radius = (bounds.width + bounds.height) / 32;
    return setAttributes(createElement('circle'), {
        stroke: brush.color,
        'stroke-width': widths[current ? 0 : 1],
        fill: 'none',
        opacity: opacity(brush, current),
        cx: o[0],
        cy: o[1],
        r: radius - widths[1] / 2
    });
}
function renderArrow(brush, orig, dest, current, shorten, bounds) {
    const m = arrowMargin(bounds, shorten && !current), a = pos2px(orig, bounds), b = pos2px(dest, bounds), dx = b[0] - a[0], dy = b[1] - a[1], angle = Math.atan2(dy, dx), xo = Math.cos(angle) * m, yo = Math.sin(angle) * m;
    return setAttributes(createElement('line'), {
        stroke: brush.color,
        'stroke-width': lineWidth(brush, current, bounds),
        'stroke-linecap': 'round',
        'marker-end': 'url(#arrowhead-' + brush.key + ')',
        opacity: opacity(brush, current),
        x1: a[0],
        y1: a[1],
        x2: b[0] - xo,
        y2: b[1] - yo
    });
}
function renderPiece(baseUrl, pos, piece, bounds) {
    const o = pos2px(pos, bounds), size = bounds.width / 8 * (piece.scale || 1), name = piece.color[0] + (piece.role === 'knight' ? 'n' : piece.role[0]).toUpperCase();
    return setAttributes(createElement('image'), {
        className: `${piece.role} ${piece.color}`,
        x: o[0] - size / 2,
        y: o[1] - size / 2,
        width: size,
        height: size,
        href: baseUrl + name + '.svg'
    });
}
function renderMarker(brush) {
    const marker = setAttributes(createElement('marker'), {
        id: 'arrowhead-' + brush.key,
        orient: 'auto',
        markerWidth: 4,
        markerHeight: 8,
        refX: 2.05,
        refY: 2.01
    });
    marker.appendChild(setAttributes(createElement('path'), {
        d: 'M0,0 V4 L3,2 Z',
        fill: brush.color
    }));
    marker.setAttribute('cgKey', brush.key);
    return marker;
}
function setAttributes(el, attrs) {
    for (let key in attrs)
        el.setAttribute(key, attrs[key]);
    return el;
}
function orient(pos, color) {
    return color === 'white' ? pos : [9 - pos[0], 9 - pos[1]];
}
function makeCustomBrush(base, modifiers) {
    const brush = {
        color: base.color,
        opacity: Math.round(base.opacity * 10) / 10,
        lineWidth: Math.round(modifiers.lineWidth || base.lineWidth)
    };
    brush.key = [base.key, modifiers.lineWidth].filter(x => x).join('');
    return brush;
}
function circleWidth(bounds) {
    const base = bounds.width / 512;
    return [3 * base, 4 * base];
}
function lineWidth(brush, current, bounds) {
    return (brush.lineWidth || 10) * (current ? 0.85 : 1) / 512 * bounds.width;
}
function opacity(brush, current) {
    return (brush.opacity || 1) * (current ? 0.9 : 1);
}
function arrowMargin(bounds, shorten) {
    return (shorten ? 20 : 10) / 512 * bounds.width;
}
function pos2px(pos, bounds) {
    return [(pos[0] - 0.5) * bounds.width / 8, (8.5 - pos[1]) * bounds.height / 8];
}

},{"./util":18}],17:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];
exports.ranks = [1, 2, 3, 4, 5, 6, 7, 8];

},{}],18:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cg = require("./types");
exports.colors = ['white', 'black'];
exports.invRanks = [8, 7, 6, 5, 4, 3, 2, 1];
exports.allKeys = Array.prototype.concat(...cg.files.map(c => cg.ranks.map(r => c + r)));
exports.pos2key = (pos) => exports.allKeys[8 * pos[0] + pos[1] - 9];
exports.key2pos = (k) => [k.charCodeAt(0) - 96, k.charCodeAt(1) - 48];
function memo(f) {
    let v;
    const ret = () => {
        if (v === undefined)
            v = f();
        return v;
    };
    ret.clear = () => { v = undefined; };
    return ret;
}
exports.memo = memo;
exports.timer = () => {
    let startAt;
    return {
        start() { startAt = performance.now(); },
        cancel() { startAt = undefined; },
        stop() {
            if (!startAt)
                return 0;
            const time = performance.now() - startAt;
            startAt = undefined;
            return time;
        }
    };
};
exports.opposite = (c) => c === 'white' ? 'black' : 'white';
function containsX(xs, x) {
    return xs !== undefined && xs.indexOf(x) !== -1;
}
exports.containsX = containsX;
exports.distanceSq = (pos1, pos2) => {
    return Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2);
};
exports.samePiece = (p1, p2) => p1.role === p2.role && p1.color === p2.color;
const posToTranslateBase = (pos, asWhite, xFactor, yFactor) => [
    (asWhite ? pos[0] - 1 : 8 - pos[0]) * xFactor,
    (asWhite ? 8 - pos[1] : pos[1] - 1) * yFactor
];
exports.posToTranslateAbs = (bounds) => {
    const xFactor = bounds.width / 8, yFactor = bounds.height / 8;
    return (pos, asWhite) => posToTranslateBase(pos, asWhite, xFactor, yFactor);
};
exports.posToTranslateRel = (pos, asWhite) => posToTranslateBase(pos, asWhite, 100, 100);
exports.translateAbs = (el, pos) => {
    el.style.transform = `translate(${pos[0]}px,${pos[1]}px)`;
};
exports.translateRel = (el, percents) => {
    el.style.transform = `translate(${percents[0]}%,${percents[1]}%)`;
};
exports.setVisible = (el, v) => {
    el.style.visibility = v ? 'visible' : 'hidden';
};
exports.eventPosition = e => {
    if (e.clientX || e.clientX === 0)
        return [e.clientX, e.clientY];
    if (e.touches && e.targetTouches[0])
        return [e.targetTouches[0].clientX, e.targetTouches[0].clientY];
    return undefined;
};
exports.isRightButton = (e) => e.buttons === 2 || e.button === 2;
exports.createEl = (tagName, className) => {
    const el = document.createElement(tagName);
    if (className)
        el.className = className;
    return el;
};

},{"./types":17}],19:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
const types_1 = require("./types");
const svg_1 = require("./svg");
function wrap(element, s, relative) {
    element.innerHTML = '';
    element.classList.add('cg-wrap');
    util_1.colors.forEach(c => element.classList.toggle('orientation-' + c, s.orientation === c));
    element.classList.toggle('manipulable', !s.viewOnly);
    const helper = util_1.createEl('cg-helper');
    element.appendChild(helper);
    const container = util_1.createEl('cg-container');
    helper.appendChild(container);
    const board = util_1.createEl('cg-board');
    container.appendChild(board);
    let svg;
    if (s.drawable.visible && !relative) {
        svg = svg_1.createElement('svg');
        svg.appendChild(svg_1.createElement('defs'));
        container.appendChild(svg);
    }
    if (s.coordinates) {
        const orientClass = s.orientation === 'black' ? ' black' : '';
        container.appendChild(renderCoords(types_1.ranks, 'ranks' + orientClass));
        container.appendChild(renderCoords(types_1.files, 'files' + orientClass));
    }
    let ghost;
    if (s.draggable.showGhost && !relative) {
        ghost = util_1.createEl('piece', 'ghost');
        util_1.setVisible(ghost, false);
        container.appendChild(ghost);
    }
    return {
        board,
        container,
        ghost,
        svg
    };
}
exports.default = wrap;
function renderCoords(elems, className) {
    const el = util_1.createEl('coords', className);
    let f;
    for (let i in elems) {
        f = util_1.createEl('coord');
        f.textContent = elems[i];
        el.appendChild(f);
    }
    return el;
}

},{"./svg":16,"./types":17,"./util":18}],20:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
const squareSet_1 = require("./squareSet");
function computeRange(square, deltas, stepper) {
    let range = squareSet_1.SquareSet.empty();
    for (const delta of deltas) {
        for (let sq = square + delta; 0 <= sq && sq < 64 && util_1.squareDist(sq, sq - delta) <= 2; sq += delta) {
            range = range.with(sq);
            if (stepper)
                break;
        }
    }
    return range;
}
function computeTable(deltas, stepper) {
    const table = [];
    for (let square = 0; square < 64; square++) {
        table[square] = computeRange(square, deltas, stepper);
    }
    return table;
}
const KING_ATTACKS = computeTable([-9, -8, -7, -1, 1, 7, 8, 9], true);
const KNIGHT_ATTACKS = computeTable([-17, -15, -10, -6, 6, 10, 15, 17], true);
const PAWN_ATTACKS = {
    white: computeTable([7, 9], true),
    black: computeTable([-7, -9], true),
};
function kingAttacks(square) {
    return KING_ATTACKS[square];
}
exports.kingAttacks = kingAttacks;
function knightAttacks(square) {
    return KNIGHT_ATTACKS[square];
}
exports.knightAttacks = knightAttacks;
function pawnAttacks(color, square) {
    return PAWN_ATTACKS[color][square];
}
exports.pawnAttacks = pawnAttacks;
const FILE_RANGE = computeTable([-8, 8], false);
const RANK_RANGE = computeTable([-1, 1], false);
const DIAG_RANGE = computeTable([-9, 9], false);
const ANTI_DIAG_RANGE = computeTable([-7, 7], false);
function hyperbola(bit, range, occupied) {
    let forward = occupied.intersect(range);
    let reverse = forward.bswap64(); // Assumes no more than 1 bit per rank
    forward = forward.minus64(bit);
    reverse = reverse.minus64(bit.bswap64());
    forward = forward.xor(reverse.bswap64());
    return forward.intersect(range);
}
function fileAttacks(square, occupied) {
    return hyperbola(squareSet_1.SquareSet.fromSquare(square), FILE_RANGE[square], occupied);
}
function rankAttacks(square, occupied) {
    const range = RANK_RANGE[square];
    let forward = occupied.intersect(range);
    let reverse = forward.rbit64();
    forward = forward.minus64(squareSet_1.SquareSet.fromSquare(square));
    reverse = reverse.minus64(squareSet_1.SquareSet.fromSquare(63 - square));
    forward = forward.xor(reverse.rbit64());
    return forward.intersect(range);
}
function diagAttacks(square, occupied) {
    return hyperbola(squareSet_1.SquareSet.fromSquare(square), DIAG_RANGE[square], occupied);
}
function antiDiagAttacks(square, occupied) {
    return hyperbola(squareSet_1.SquareSet.fromSquare(square), ANTI_DIAG_RANGE[square], occupied);
}
function bishopAttacks(square, occupied) {
    const bit = squareSet_1.SquareSet.fromSquare(square);
    return hyperbola(bit, DIAG_RANGE[square], occupied).xor(hyperbola(bit, ANTI_DIAG_RANGE[square], occupied));
}
exports.bishopAttacks = bishopAttacks;
function rookAttacks(square, occupied) {
    return fileAttacks(square, occupied).xor(rankAttacks(square, occupied));
}
exports.rookAttacks = rookAttacks;
function queenAttacks(square, occupied) {
    return bishopAttacks(square, occupied).xor(rookAttacks(square, occupied));
}
exports.queenAttacks = queenAttacks;
function attacks(piece, square, occupied) {
    switch (piece.role) {
        case 'pawn': return pawnAttacks(piece.color, square);
        case 'knight': return knightAttacks(square);
        case 'bishop': return bishopAttacks(square, occupied);
        case 'rook': return rookAttacks(square, occupied);
        case 'queen': return queenAttacks(square, occupied);
        case 'king': return kingAttacks(square);
    }
}
exports.attacks = attacks;
function rayTables() {
    const ray = [];
    const between = [];
    const zero = squareSet_1.SquareSet.empty();
    for (let a = 0; a < 64; a++) {
        ray[a] = [];
        between[a] = [];
        for (let b = 0; b < 64; b++) {
            ray[a][b] = zero;
            between[a][b] = zero;
        }
        for (const b of DIAG_RANGE[a]) {
            ray[a][b] = DIAG_RANGE[a].with(a);
            between[a][b] = diagAttacks(a, squareSet_1.SquareSet.fromSquare(b)).intersect(diagAttacks(b, squareSet_1.SquareSet.fromSquare(a)));
        }
        for (const b of ANTI_DIAG_RANGE[a]) {
            ray[a][b] = ANTI_DIAG_RANGE[a].with(a);
            between[a][b] = antiDiagAttacks(a, squareSet_1.SquareSet.fromSquare(b)).intersect(antiDiagAttacks(b, squareSet_1.SquareSet.fromSquare(a)));
        }
        for (const b of FILE_RANGE[a]) {
            ray[a][b] = FILE_RANGE[a].with(a);
            between[a][b] = fileAttacks(a, squareSet_1.SquareSet.fromSquare(b)).intersect(fileAttacks(b, squareSet_1.SquareSet.fromSquare(a)));
        }
        for (const b of RANK_RANGE[a]) {
            ray[a][b] = RANK_RANGE[a].with(a);
            between[a][b] = rankAttacks(a, squareSet_1.SquareSet.fromSquare(b)).intersect(rankAttacks(b, squareSet_1.SquareSet.fromSquare(a)));
        }
    }
    return [ray, between];
}
const [RAY, BETWEEN] = rayTables();
function ray(a, b) {
    return RAY[a][b];
}
exports.ray = ray;
function between(a, b) {
    return BETWEEN[a][b];
}
exports.between = between;

},{"./squareSet":26,"./util":28}],21:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("./types");
const squareSet_1 = require("./squareSet");
class Board {
    constructor() { }
    static default() {
        const board = new Board();
        board.reset();
        return board;
    }
    static racingKings() {
        const board = new Board();
        board.occupied = new squareSet_1.SquareSet(0xffff, 0);
        board.promoted = squareSet_1.SquareSet.empty();
        board.white = new squareSet_1.SquareSet(0xf0f0, 0);
        board.black = new squareSet_1.SquareSet(0x0f0f, 0);
        board.pawn = squareSet_1.SquareSet.empty();
        board.knight = new squareSet_1.SquareSet(0x1818, 0);
        board.bishop = new squareSet_1.SquareSet(0x2424, 0);
        board.rook = new squareSet_1.SquareSet(0x4242, 0);
        board.queen = new squareSet_1.SquareSet(0x0081, 0);
        board.king = new squareSet_1.SquareSet(0x8100, 0);
        return board;
    }
    static horde() {
        const board = new Board();
        board.occupied = new squareSet_1.SquareSet(4294967295, 4294901862);
        board.promoted = squareSet_1.SquareSet.empty();
        board.white = new squareSet_1.SquareSet(4294967295, 102);
        board.black = new squareSet_1.SquareSet(0, 4294901760);
        board.pawn = new squareSet_1.SquareSet(4294967295, 16711782);
        board.knight = new squareSet_1.SquareSet(0, 1107296256);
        board.bishop = new squareSet_1.SquareSet(0, 603979776);
        board.rook = new squareSet_1.SquareSet(0, 2164260864);
        board.queen = new squareSet_1.SquareSet(0, 134217728);
        board.king = new squareSet_1.SquareSet(0, 268435456);
        return board;
    }
    reset() {
        this.occupied = new squareSet_1.SquareSet(0xffff, 4294901760);
        this.promoted = squareSet_1.SquareSet.empty();
        this.white = new squareSet_1.SquareSet(0xffff, 0);
        this.black = new squareSet_1.SquareSet(0, 4294901760);
        this.pawn = new squareSet_1.SquareSet(0xff00, 16711680);
        this.knight = new squareSet_1.SquareSet(0x42, 1107296256);
        this.bishop = new squareSet_1.SquareSet(0x24, 603979776);
        this.rook = new squareSet_1.SquareSet(0x81, 2164260864);
        this.queen = new squareSet_1.SquareSet(0x8, 134217728);
        this.king = new squareSet_1.SquareSet(0x10, 268435456);
    }
    static empty() {
        const board = new Board();
        board.clear();
        return board;
    }
    clear() {
        this.occupied = squareSet_1.SquareSet.empty();
        this.promoted = squareSet_1.SquareSet.empty();
        for (const color of types_1.COLORS)
            this[color] = squareSet_1.SquareSet.empty();
        for (const role of types_1.ROLES)
            this[role] = squareSet_1.SquareSet.empty();
    }
    clone() {
        const board = new Board();
        board.occupied = this.occupied;
        board.promoted = this.promoted;
        for (const color of types_1.COLORS)
            board[color] = this[color];
        for (const role of types_1.ROLES)
            board[role] = this[role];
        return board;
    }
    getColor(square) {
        if (this.white.has(square))
            return 'white';
        if (this.black.has(square))
            return 'black';
        return;
    }
    getRole(square) {
        for (const role of types_1.ROLES) {
            if (this[role].has(square))
                return role;
        }
        return;
    }
    get(square) {
        const color = this.getColor(square);
        if (!color)
            return;
        const promoted = this.promoted.has(square);
        const role = this.getRole(square);
        return { color, role, promoted };
    }
    take(square) {
        const piece = this.get(square);
        if (piece) {
            this.occupied = this.occupied.without(square);
            this[piece.color] = this[piece.color].without(square);
            this[piece.role] = this[piece.role].without(square);
            if (piece.promoted)
                this.promoted = this.promoted.without(square);
        }
        return piece;
    }
    set(square, piece) {
        const old = this.take(square);
        this.occupied = this.occupied.with(square);
        this[piece.color] = this[piece.color].with(square);
        this[piece.role] = this[piece.role].with(square);
        if (piece.promoted)
            this.promoted = this.promoted.with(square);
        return old;
    }
    has(square) {
        return this.occupied.has(square);
    }
    [Symbol.iterator]() {
        const keys = this.occupied[Symbol.iterator]();
        const next = () => {
            const entry = keys.next();
            if (entry.done)
                return { done: true };
            return { value: [entry.value, this.get(entry.value)], done: false };
        };
        return { next };
    }
    pieces(color, role) {
        return this[color].intersect(this[role]);
    }
    rooksAndQueens() {
        return this.rook.union(this.queen);
    }
    bishopsAndQueens() {
        return this.bishop.union(this.queen);
    }
    kingOf(color) {
        return this.king.intersect(this[color]).diff(this.promoted).singleSquare();
    }
}
exports.Board = Board;

},{"./squareSet":26,"./types":27}],22:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const result_1 = require("@badrap/result");
const types_1 = require("./types");
const squareSet_1 = require("./squareSet");
const board_1 = require("./board");
const attacks_1 = require("./attacks");
const util_1 = require("./util");
var IllegalSetup;
(function (IllegalSetup) {
    IllegalSetup["Empty"] = "ERR_EMPTY";
    IllegalSetup["OppositeCheck"] = "ERR_OPPOSITE_CHECK";
    IllegalSetup["PawnsOnBackrank"] = "ERR_PAWNS_ON_BACKRANK";
    IllegalSetup["Kings"] = "ERR_KINGS";
    IllegalSetup["Variant"] = "ERR_VARIANT";
})(IllegalSetup = exports.IllegalSetup || (exports.IllegalSetup = {}));
class PositionError extends Error {
}
exports.PositionError = PositionError;
function attacksTo(square, attacker, board, occupied) {
    return board[attacker].intersect(attacks_1.rookAttacks(square, occupied).intersect(board.rooksAndQueens())
        .union(attacks_1.bishopAttacks(square, occupied).intersect(board.bishopsAndQueens()))
        .union(attacks_1.knightAttacks(square).intersect(board.knight))
        .union(attacks_1.kingAttacks(square).intersect(board.king))
        .union(attacks_1.pawnAttacks(util_1.opposite(attacker), square).intersect(board.pawn)));
}
function kingCastlesTo(color, side) {
    return color === 'white' ? (side === 'a' ? 2 : 6) : (side === 'a' ? 58 : 62);
}
function rookCastlesTo(color, side) {
    return color === 'white' ? (side === 'a' ? 3 : 5) : (side === 'a' ? 59 : 61);
}
class Castles {
    constructor() { }
    static default() {
        const castles = new Castles();
        castles.unmovedRooks = squareSet_1.SquareSet.corners();
        castles.rook = {
            white: { a: 0, h: 7 },
            black: { a: 56, h: 63 },
        };
        castles.path = {
            white: { a: new squareSet_1.SquareSet(0x60, 0), h: new squareSet_1.SquareSet(0, 0xe) },
            black: { a: new squareSet_1.SquareSet(0, 0x60000000), h: new squareSet_1.SquareSet(0, 0x0e000000) },
        };
        return castles;
    }
    static empty() {
        const castles = new Castles();
        castles.unmovedRooks = squareSet_1.SquareSet.empty();
        castles.rook = {
            white: { a: undefined, h: undefined },
            black: { a: undefined, h: undefined },
        };
        castles.path = {
            white: { a: squareSet_1.SquareSet.empty(), h: squareSet_1.SquareSet.empty() },
            black: { a: squareSet_1.SquareSet.empty(), h: squareSet_1.SquareSet.empty() },
        };
        return castles;
    }
    clone() {
        const castles = new Castles();
        castles.unmovedRooks = this.unmovedRooks;
        castles.rook = {
            white: { a: this.rook.white.a, h: this.rook.white.h },
            black: { a: this.rook.black.a, h: this.rook.black.h },
        };
        castles.path = {
            white: { a: this.path.white.a, h: this.path.white.h },
            black: { a: this.path.black.a, h: this.path.black.h },
        };
        return castles;
    }
    add(color, side, king, rook) {
        const kingTo = kingCastlesTo(color, side);
        const rookTo = rookCastlesTo(color, side);
        this.unmovedRooks = this.unmovedRooks.with(rook);
        this.rook[color][side] = rook;
        this.path[color][side] = attacks_1.between(rook, rookTo).with(rookTo)
            .union(attacks_1.between(king, kingTo).with(kingTo))
            .without(king).without(rook);
    }
    static fromSetup(setup) {
        const castles = Castles.empty();
        const rooks = setup.unmovedRooks.intersect(setup.board.rook);
        for (const color of types_1.COLORS) {
            const backrank = squareSet_1.SquareSet.backrank(color);
            const king = setup.board.kingOf(color);
            if (!util_1.defined(king) || !backrank.has(king))
                continue;
            const side = rooks.intersect(setup.board[color]).intersect(backrank);
            const aSide = side.first();
            if (util_1.defined(aSide) && aSide < king)
                castles.add(color, 'a', king, aSide);
            const hSide = side.last();
            if (util_1.defined(hSide) && king < hSide)
                castles.add(color, 'h', king, hSide);
        }
        return castles;
    }
    discardRook(square) {
        if (this.unmovedRooks.has(square)) {
            this.unmovedRooks = this.unmovedRooks.without(square);
            for (const color of types_1.COLORS) {
                for (const side of types_1.CASTLING_SIDES) {
                    if (this.rook[color][side] === square)
                        this.rook[color][side] = undefined;
                }
            }
        }
    }
    discardSide(color) {
        this.unmovedRooks = this.unmovedRooks.diff(squareSet_1.SquareSet.backrank(color));
        this.rook[color].a = undefined;
        this.rook[color].h = undefined;
    }
}
exports.Castles = Castles;
class Position {
    constructor(rules) {
        this.rules = rules;
    }
    kingAttackers(square, attacker, occupied) {
        return attacksTo(square, attacker, this.board, occupied);
    }
    dropDests(_ctx) {
        return squareSet_1.SquareSet.empty();
    }
    playCaptureAt(square, captured) {
        this.halfmoves = 0;
        if (captured.role === 'rook')
            this.castles.discardRook(square);
        if (this.pockets)
            this.pockets[util_1.opposite(captured.color)][captured.role]++;
    }
    ctx() {
        const variantEnd = this.isVariantEnd();
        const king = this.board.kingOf(this.turn);
        if (!util_1.defined(king))
            return { king, blockers: squareSet_1.SquareSet.empty(), checkers: squareSet_1.SquareSet.empty(), variantEnd, mustCapture: false };
        const snipers = attacks_1.rookAttacks(king, squareSet_1.SquareSet.empty()).intersect(this.board.rooksAndQueens())
            .union(attacks_1.bishopAttacks(king, squareSet_1.SquareSet.empty()).intersect(this.board.bishopsAndQueens()))
            .intersect(this.board[util_1.opposite(this.turn)]);
        let blockers = squareSet_1.SquareSet.empty();
        for (const sniper of snipers) {
            const b = attacks_1.between(king, sniper).intersect(this.board.occupied);
            if (!b.moreThanOne())
                blockers = blockers.union(b);
        }
        const checkers = this.kingAttackers(king, util_1.opposite(this.turn), this.board.occupied);
        return {
            king,
            blockers,
            checkers,
            variantEnd,
            mustCapture: false,
        };
    }
    // The following should be identical in all subclasses
    clone() {
        const pos = new this.constructor();
        pos.board = this.board.clone();
        pos.pockets = this.pockets && this.pockets.clone();
        pos.turn = this.turn;
        pos.castles = this.castles.clone();
        pos.epSquare = this.epSquare;
        pos.remainingChecks = this.remainingChecks && this.remainingChecks.clone();
        pos.halfmoves = this.halfmoves;
        pos.fullmoves = this.fullmoves;
        return pos;
    }
    toSetup() {
        return {
            board: this.board.clone(),
            pockets: this.pockets && this.pockets.clone(),
            turn: this.turn,
            unmovedRooks: this.castles.unmovedRooks,
            epSquare: this.hasLegalEp() ? this.epSquare : undefined,
            remainingChecks: this.remainingChecks && this.remainingChecks.clone(),
            halfmoves: Math.min(this.halfmoves, 150),
            fullmoves: Math.min(Math.max(this.fullmoves, 1), 9999),
        };
    }
    isInsufficientMaterial() {
        return types_1.COLORS.every(color => this.hasInsufficientMaterial(color));
    }
    hasDests(ctx) {
        for (const square of this.board[this.turn]) {
            if (this.dests(square, ctx).nonEmpty())
                return true;
        }
        return this.dropDests(ctx).nonEmpty();
    }
    isLegal(uci, ctx) {
        if (types_1.isDrop(uci)) {
            if (!this.pockets || this.pockets[this.turn][uci.role] <= 0)
                return false;
            if (uci.role === 'pawn' && squareSet_1.SquareSet.backranks().has(uci.to))
                return false;
            return this.dropDests(ctx).has(uci.to);
        }
        else {
            if (uci.promotion === 'pawn')
                return false;
            if (uci.promotion === 'king' && this.rules !== 'antichess')
                return false;
            if (!uci.promotion && this.board.pawn.has(uci.from) && squareSet_1.SquareSet.backranks().has(uci.to))
                return false;
            return this.dests(uci.from, ctx).has(uci.to);
        }
    }
    isCheck() {
        const king = this.board.kingOf(this.turn);
        return util_1.defined(king) && this.kingAttackers(king, util_1.opposite(this.turn), this.board.occupied).nonEmpty();
    }
    isEnd() {
        return this.isVariantEnd() || this.isInsufficientMaterial() || !this.hasDests(this.ctx());
    }
    isCheckmate() {
        if (this.isVariantEnd())
            return false;
        const ctx = this.ctx();
        return ctx.checkers.nonEmpty() && !this.hasDests(ctx);
    }
    isStalemate() {
        if (this.isVariantEnd())
            return false;
        const ctx = this.ctx();
        return ctx.checkers.isEmpty() && !this.hasDests(ctx);
    }
    outcome() {
        const variantOutcome = this.variantOutcome();
        if (variantOutcome)
            return variantOutcome;
        else if (this.isCheckmate())
            return { winner: util_1.opposite(this.turn) };
        else if (this.isInsufficientMaterial() || this.isStalemate())
            return { winner: undefined };
        else
            return;
    }
    allDests() {
        const ctx = this.ctx();
        const d = new Map();
        if (ctx.variantEnd)
            return d;
        for (const square of this.board[this.turn]) {
            d.set(square, this.dests(square, ctx));
        }
        return d;
    }
    play(uci) {
        const turn = this.turn, epSquare = this.epSquare;
        this.epSquare = undefined;
        this.halfmoves += 1;
        if (turn === 'black')
            this.fullmoves += 1;
        this.turn = util_1.opposite(turn);
        if (types_1.isDrop(uci)) {
            this.board.set(uci.to, { role: uci.role, color: turn });
            if (this.pockets)
                this.pockets[turn][uci.role]--;
            if (uci.role === 'pawn')
                this.halfmoves = 0;
        }
        else {
            const piece = this.board.take(uci.from);
            if (!piece)
                return;
            let epCapture;
            if (piece.role === 'pawn') {
                this.halfmoves = 0;
                if (uci.to === epSquare) {
                    epCapture = this.board.take(uci.to + (turn === 'white' ? -8 : 8));
                }
                const delta = uci.from - uci.to;
                if (Math.abs(delta) === 16 && 8 <= uci.from && uci.from <= 55) {
                    this.epSquare = (uci.from + uci.to) >> 1;
                }
                if (uci.promotion) {
                    piece.role = uci.promotion;
                    piece.promoted = true;
                }
            }
            else if (piece.role === 'rook') {
                this.castles.discardRook(uci.from);
            }
            else if (piece.role === 'king') {
                const delta = uci.to - uci.from;
                const isCastling = Math.abs(delta) === 2 || this.board[turn].has(uci.to);
                if (isCastling) {
                    const side = delta > 0 ? 'h' : 'a';
                    const rookFrom = this.castles.rook[turn][side];
                    if (util_1.defined(rookFrom)) {
                        const rook = this.board.take(rookFrom);
                        this.board.set(kingCastlesTo(turn, side), piece);
                        if (rook)
                            this.board.set(rookCastlesTo(turn, side), rook);
                    }
                }
                this.castles.discardSide(turn);
                if (isCastling)
                    return;
            }
            const capture = this.board.set(uci.to, piece) || epCapture;
            if (capture)
                this.playCaptureAt(uci.to, capture);
        }
    }
    hasLegalEp() {
        if (!this.epSquare)
            return false;
        const ctx = this.ctx();
        const ourPawns = this.board.pieces(this.turn, 'pawn');
        const candidates = ourPawns.intersect(attacks_1.pawnAttacks(util_1.opposite(this.turn), this.epSquare));
        for (const candidate of candidates) {
            if (this.dests(candidate, ctx).has(this.epSquare))
                return true;
        }
        return false;
    }
}
exports.Position = Position;
class Chess extends Position {
    constructor(rules) {
        super(rules || 'chess');
    }
    static default() {
        const pos = new this();
        pos.board = board_1.Board.default();
        pos.pockets = undefined;
        pos.turn = 'white';
        pos.castles = Castles.default();
        pos.epSquare = undefined;
        pos.remainingChecks = undefined;
        pos.halfmoves = 0;
        pos.fullmoves = 1;
        return pos;
    }
    static fromSetup(setup) {
        const pos = new this();
        pos.board = setup.board.clone();
        pos.pockets = undefined;
        pos.turn = setup.turn;
        pos.castles = Castles.fromSetup(setup);
        pos.epSquare = pos.validEpSquare(setup.epSquare);
        pos.remainingChecks = undefined;
        pos.halfmoves = setup.halfmoves;
        pos.fullmoves = setup.fullmoves;
        return pos.validate().map(_ => pos);
    }
    clone() {
        return super.clone();
    }
    validate() {
        if (this.board.occupied.isEmpty())
            return result_1.Result.err(new PositionError(IllegalSetup.Empty));
        if (this.board.king.size() !== 2)
            return result_1.Result.err(new PositionError(IllegalSetup.Kings));
        if (!util_1.defined(this.board.kingOf(this.turn)))
            return result_1.Result.err(new PositionError(IllegalSetup.Kings));
        const otherKing = this.board.kingOf(util_1.opposite(this.turn));
        if (!util_1.defined(otherKing))
            return result_1.Result.err(new PositionError(IllegalSetup.Kings));
        if (this.kingAttackers(otherKing, this.turn, this.board.occupied).nonEmpty()) {
            return result_1.Result.err(new PositionError(IllegalSetup.OppositeCheck));
        }
        if (squareSet_1.SquareSet.backranks().intersects(this.board.pawn)) {
            return result_1.Result.err(new PositionError(IllegalSetup.PawnsOnBackrank));
        }
        return result_1.Result.ok(undefined);
    }
    validEpSquare(square) {
        if (!square)
            return;
        const epRank = this.turn === 'white' ? 5 : 2;
        const forward = this.turn === 'white' ? 8 : -8;
        if ((square >> 3) !== epRank)
            return;
        if (this.board.occupied.has(square + forward))
            return;
        const pawn = square - forward;
        if (!this.board.pawn.has(pawn) || !this.board[util_1.opposite(this.turn)].has(pawn))
            return;
        return square;
    }
    castlingDest(side, ctx) {
        if (!util_1.defined(ctx.king) || ctx.checkers.nonEmpty())
            return squareSet_1.SquareSet.empty();
        const rook = this.castles.rook[this.turn][side];
        if (!util_1.defined(rook))
            return squareSet_1.SquareSet.empty();
        if (this.castles.path[this.turn][side].intersects(this.board.occupied))
            return squareSet_1.SquareSet.empty();
        const kingTo = kingCastlesTo(this.turn, side);
        const kingPath = attacks_1.between(ctx.king, kingTo);
        const occ = this.board.occupied.without(ctx.king);
        for (const sq of kingPath) {
            if (this.kingAttackers(sq, util_1.opposite(this.turn), occ).nonEmpty())
                return squareSet_1.SquareSet.empty();
        }
        const rookTo = rookCastlesTo(this.turn, side);
        const after = this.board.occupied.toggle(ctx.king).toggle(rook).toggle(rookTo);
        if (this.kingAttackers(kingTo, util_1.opposite(this.turn), after).nonEmpty())
            return squareSet_1.SquareSet.empty();
        return squareSet_1.SquareSet.fromSquare(rook);
    }
    canCaptureEp(pawn, ctx) {
        if (!util_1.defined(this.epSquare))
            return false;
        if (!attacks_1.pawnAttacks(this.turn, pawn).has(this.epSquare))
            return false;
        if (!util_1.defined(ctx.king))
            return true;
        const captured = this.epSquare + ((this.turn === 'white') ? -8 : 8);
        const occupied = this.board.occupied.toggle(pawn).toggle(this.epSquare).toggle(captured);
        return !this.kingAttackers(ctx.king, util_1.opposite(this.turn), occupied).intersects(occupied);
    }
    pseudoDests(square, ctx) {
        if (ctx.variantEnd)
            return squareSet_1.SquareSet.empty();
        const piece = this.board.get(square);
        if (!piece || piece.color !== this.turn)
            return squareSet_1.SquareSet.empty();
        let pseudo = attacks_1.attacks(piece, square, this.board.occupied);
        if (piece.role === 'pawn') {
            let captureTargets = this.board[util_1.opposite(this.turn)];
            if (util_1.defined(this.epSquare))
                captureTargets = captureTargets.with(this.epSquare);
            pseudo = pseudo.intersect(captureTargets);
            const delta = this.turn === 'white' ? 8 : -8;
            const step = square + delta;
            if (0 <= step && step < 64 && !this.board.occupied.has(step)) {
                pseudo = pseudo.with(step);
                const canDoubleStep = this.turn === 'white' ? (square < 16) : (square >= 64 - 16);
                const doubleStep = step + delta;
                if (canDoubleStep && !this.board.occupied.has(doubleStep)) {
                    pseudo = pseudo.with(doubleStep);
                }
            }
            return pseudo;
        }
        else {
            pseudo = pseudo.diff(this.board[this.turn]);
        }
        if (square === ctx.king)
            return pseudo.union(this.castlingDest('a', ctx)).union(this.castlingDest('h', ctx));
        else
            return pseudo;
    }
    dests(square, ctx) {
        if (ctx.variantEnd)
            return squareSet_1.SquareSet.empty();
        const piece = this.board.get(square);
        if (!piece || piece.color !== this.turn)
            return squareSet_1.SquareSet.empty();
        let pseudo, legal;
        if (piece.role === 'pawn') {
            pseudo = attacks_1.pawnAttacks(this.turn, square).intersect(this.board[util_1.opposite(this.turn)]);
            const delta = this.turn === 'white' ? 8 : -8;
            const step = square + delta;
            if (0 <= step && step < 64 && !this.board.occupied.has(step)) {
                pseudo = pseudo.with(step);
                const canDoubleStep = this.turn === 'white' ? (square < 16) : (square >= 64 - 16);
                const doubleStep = step + delta;
                if (canDoubleStep && !this.board.occupied.has(doubleStep)) {
                    pseudo = pseudo.with(doubleStep);
                }
            }
            if (util_1.defined(this.epSquare) && this.canCaptureEp(square, ctx)) {
                const pawn = this.epSquare - delta;
                if (ctx.checkers.isEmpty() || ctx.checkers.singleSquare() === pawn) {
                    legal = squareSet_1.SquareSet.fromSquare(this.epSquare);
                }
            }
        }
        else if (piece.role === 'bishop')
            pseudo = attacks_1.bishopAttacks(square, this.board.occupied);
        else if (piece.role === 'knight')
            pseudo = attacks_1.knightAttacks(square);
        else if (piece.role === 'rook')
            pseudo = attacks_1.rookAttacks(square, this.board.occupied);
        else if (piece.role === 'queen')
            pseudo = attacks_1.queenAttacks(square, this.board.occupied);
        else
            pseudo = attacks_1.kingAttacks(square);
        pseudo = pseudo.diff(this.board[this.turn]);
        if (util_1.defined(ctx.king)) {
            if (piece.role === 'king') {
                const occ = this.board.occupied.without(square);
                for (const to of pseudo) {
                    if (this.kingAttackers(to, util_1.opposite(this.turn), occ).nonEmpty())
                        pseudo = pseudo.without(to);
                }
                return pseudo.union(this.castlingDest('a', ctx)).union(this.castlingDest('h', ctx));
            }
            if (ctx.checkers.nonEmpty()) {
                const checker = ctx.checkers.singleSquare();
                if (!util_1.defined(checker))
                    return squareSet_1.SquareSet.empty();
                pseudo = pseudo.intersect(attacks_1.between(checker, ctx.king).with(checker));
            }
            if (ctx.blockers.has(square))
                pseudo = pseudo.intersect(attacks_1.ray(square, ctx.king));
        }
        if (legal)
            pseudo = pseudo.union(legal);
        return pseudo;
    }
    isVariantEnd() {
        return false;
    }
    variantOutcome() {
        return;
    }
    hasInsufficientMaterial(color) {
        if (this.board[color].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty())
            return false;
        if (this.board[color].intersects(this.board.knight)) {
            return this.board[color].size() <= 2 &&
                this.board[util_1.opposite(color)].diff(this.board.king).diff(this.board.queen).isEmpty();
        }
        if (this.board[color].intersects(this.board.bishop)) {
            const sameColor = !this.board.bishop.intersects(squareSet_1.SquareSet.darkSquares()) ||
                !this.board.bishop.intersects(squareSet_1.SquareSet.lightSquares());
            return sameColor && this.board[util_1.opposite(color)].diff(this.board.king).diff(this.board.rook).diff(this.board.queen).isEmpty();
        }
        return true;
    }
}
exports.Chess = Chess;

},{"./attacks":20,"./board":21,"./squareSet":26,"./types":27,"./util":28,"@badrap/result":1}],23:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const result_1 = require("@badrap/result");
const types_1 = require("./types");
const squareSet_1 = require("./squareSet");
const board_1 = require("./board");
const setup_1 = require("./setup");
const util_1 = require("./util");
exports.INITIAL_BOARD_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR';
exports.INITIAL_EPD = exports.INITIAL_BOARD_FEN + ' w KQkq -';
exports.INITIAL_FEN = exports.INITIAL_EPD + ' 0 1';
exports.EMPTY_BOARD_FEN = '8/8/8/8/8/8/8/8';
exports.EMPTY_EPD = exports.EMPTY_BOARD_FEN + ' w - -';
exports.EMPTY_FEN = exports.EMPTY_EPD + ' 0 1';
var InvalidFen;
(function (InvalidFen) {
    InvalidFen["Fen"] = "ERR_FEN";
    InvalidFen["Board"] = "ERR_BOARD";
    InvalidFen["Pockets"] = "ERR_POCKETS";
    InvalidFen["Turn"] = "ERR_TURN";
    InvalidFen["Castling"] = "ERR_CASTLING";
    InvalidFen["EpSquare"] = "ERR_EP_SQUARE";
    InvalidFen["RemainingChecks"] = "ERR_REMAINING_CHECKS";
    InvalidFen["Halfmoves"] = "ERR_HALFMOVES";
    InvalidFen["Fullmoves"] = "ERR_FULLMOVES";
})(InvalidFen = exports.InvalidFen || (exports.InvalidFen = {}));
class FenError extends Error {
}
exports.FenError = FenError;
function nthIndexOf(haystack, needle, n) {
    let index = haystack.indexOf(needle);
    while (n-- > 0) {
        if (index === -1)
            break;
        index = haystack.indexOf(needle, index + needle.length);
    }
    return index;
}
function parseSmallUint(str) {
    return /^\d{1,4}$/.test(str) ? parseInt(str, 10) : undefined;
}
function charToPiece(ch) {
    const role = util_1.charToRole(ch);
    return role && { role, color: ch.toLowerCase() === ch ? 'black' : 'white' };
}
function parseBoardFen(boardPart) {
    const board = board_1.Board.empty();
    let rank = 7;
    let file = 0;
    for (let i = 0; i < boardPart.length; i++) {
        const c = boardPart[i];
        if (c === '/' && file === 8) {
            file = 0;
            rank--;
        }
        else {
            const step = parseInt(c, 10);
            if (step)
                file += step;
            else {
                if (file >= 8 || rank < 0)
                    return result_1.Result.err(new FenError(InvalidFen.Board));
                const square = file + rank * 8;
                const piece = charToPiece(c);
                if (!piece)
                    return result_1.Result.err(new FenError(InvalidFen.Board));
                if (boardPart[i + 1] === '~') {
                    piece.promoted = true;
                    i++;
                }
                board.set(square, piece);
                file++;
            }
        }
    }
    if (rank !== 0 || file !== 8)
        return result_1.Result.err(new FenError(InvalidFen.Board));
    return result_1.Result.ok(board);
}
exports.parseBoardFen = parseBoardFen;
function parsePockets(pocketPart) {
    if (pocketPart.length > 64)
        return result_1.Result.err(new FenError(InvalidFen.Pockets));
    const pockets = setup_1.Material.empty();
    for (const c of pocketPart) {
        const piece = charToPiece(c);
        if (!piece)
            return result_1.Result.err(new FenError(InvalidFen.Pockets));
        pockets[piece.color][piece.role]++;
    }
    return result_1.Result.ok(pockets);
}
exports.parsePockets = parsePockets;
function parseCastlingFen(board, castlingPart) {
    let unmovedRooks = squareSet_1.SquareSet.empty();
    if (castlingPart === '-')
        return result_1.Result.ok(unmovedRooks);
    if (!/^[KQABCDEFGH]{0,2}[kqabcdefgh]{0,2}$/.test(castlingPart)) {
        return result_1.Result.err(new FenError(InvalidFen.Castling));
    }
    for (const c of castlingPart) {
        const lower = c.toLowerCase();
        const color = c === lower ? 'black' : 'white';
        const backrank = squareSet_1.SquareSet.backrank(color).intersect(board[color]);
        let candidates;
        if (lower === 'q')
            candidates = backrank;
        else if (lower === 'k')
            candidates = backrank.reversed();
        else
            candidates = squareSet_1.SquareSet.fromSquare(lower.charCodeAt(0) - 'a'.charCodeAt(0)).intersect(backrank);
        for (const square of candidates) {
            if (board.king.has(square) && !board.promoted.has(square))
                break;
            if (board.rook.has(square)) {
                unmovedRooks = unmovedRooks.with(square);
                break;
            }
        }
    }
    return result_1.Result.ok(unmovedRooks);
}
exports.parseCastlingFen = parseCastlingFen;
function parseRemainingChecks(part) {
    const parts = part.split('+');
    if (parts.length === 3 && parts[0] === '') {
        const white = parseSmallUint(parts[1]);
        const black = parseSmallUint(parts[2]);
        if (!util_1.defined(white) || white > 3 || !util_1.defined(black) || black > 3)
            return result_1.Result.err(new FenError(InvalidFen.RemainingChecks));
        return result_1.Result.ok(new setup_1.RemainingChecks(3 - white, 3 - black));
    }
    else if (parts.length === 2) {
        const white = parseSmallUint(parts[0]);
        const black = parseSmallUint(parts[1]);
        if (!util_1.defined(white) || white > 3 || !util_1.defined(black) || black > 3)
            return result_1.Result.err(new FenError(InvalidFen.RemainingChecks));
        return result_1.Result.ok(new setup_1.RemainingChecks(white, black));
    }
    else
        return result_1.Result.err(new FenError(InvalidFen.RemainingChecks));
}
exports.parseRemainingChecks = parseRemainingChecks;
function parseFen(fen) {
    const parts = fen.split(' ');
    const boardPart = parts.shift();
    // Board and pockets
    let board, pockets = result_1.Result.ok(undefined);
    if (boardPart.endsWith(']')) {
        const pocketStart = boardPart.indexOf('[');
        if (pocketStart === -1)
            return result_1.Result.err(new FenError(InvalidFen.Fen));
        board = parseBoardFen(boardPart.substr(0, pocketStart));
        pockets = parsePockets(boardPart.substr(pocketStart + 1, boardPart.length - 1 - pocketStart - 1));
    }
    else {
        const pocketStart = nthIndexOf(boardPart, '/', 7);
        if (pocketStart === -1)
            board = parseBoardFen(boardPart);
        else {
            board = parseBoardFen(boardPart.substr(0, pocketStart));
            pockets = parsePockets(boardPart.substr(pocketStart + 1));
        }
    }
    // Turn
    let turn;
    const turnPart = parts.shift();
    if (!util_1.defined(turnPart) || turnPart === 'w')
        turn = 'white';
    else if (turnPart === 'b')
        turn = 'black';
    else
        return result_1.Result.err(new FenError(InvalidFen.Turn));
    return board.chain(board => {
        // Castling
        const castlingPart = parts.shift();
        const unmovedRooks = util_1.defined(castlingPart) ? parseCastlingFen(board, castlingPart) : result_1.Result.ok(squareSet_1.SquareSet.empty());
        // En passant square
        const epPart = parts.shift();
        let epSquare;
        if (util_1.defined(epPart) && epPart !== '-') {
            epSquare = util_1.parseSquare(epPart);
            if (!util_1.defined(epSquare))
                return result_1.Result.err(new FenError(InvalidFen.EpSquare));
        }
        // Halfmoves or remaining checks
        let halfmovePart = parts.shift();
        let earlyRemainingChecks;
        if (util_1.defined(halfmovePart) && halfmovePart.includes('+')) {
            earlyRemainingChecks = parseRemainingChecks(halfmovePart);
            halfmovePart = parts.shift();
        }
        const halfmoves = util_1.defined(halfmovePart) ? parseSmallUint(halfmovePart) : 0;
        if (!util_1.defined(halfmoves))
            return result_1.Result.err(new FenError(InvalidFen.Halfmoves));
        const fullmovesPart = parts.shift();
        const fullmoves = util_1.defined(fullmovesPart) ? parseSmallUint(fullmovesPart) : 1;
        if (!util_1.defined(fullmoves))
            return result_1.Result.err(new FenError(InvalidFen.Fullmoves));
        const remainingChecksPart = parts.shift();
        let remainingChecks = result_1.Result.ok(undefined);
        if (util_1.defined(remainingChecksPart)) {
            if (util_1.defined(earlyRemainingChecks))
                return result_1.Result.err(new FenError(InvalidFen.RemainingChecks));
            remainingChecks = parseRemainingChecks(remainingChecksPart);
        }
        else if (util_1.defined(earlyRemainingChecks)) {
            remainingChecks = earlyRemainingChecks;
        }
        ;
        if (parts.length)
            return result_1.Result.err(new FenError(InvalidFen.Fen));
        return pockets.chain(pockets => unmovedRooks.chain(unmovedRooks => remainingChecks.map(remainingChecks => {
            return {
                board,
                pockets,
                turn,
                unmovedRooks,
                remainingChecks,
                epSquare,
                halfmoves,
                fullmoves: Math.max(1, fullmoves)
            };
        })));
    });
}
exports.parseFen = parseFen;
function parsePiece(str) {
    if (!str)
        return;
    const piece = charToPiece(str[0]);
    if (!piece)
        return;
    if (str.length === 2 && str[1] === '~')
        piece.promoted = true;
    else if (str.length > 1)
        return;
    return piece;
}
exports.parsePiece = parsePiece;
function makePiece(piece, opts) {
    let r = util_1.roleToChar(piece.role);
    if (piece.color === 'white')
        r = r.toUpperCase();
    if (opts && opts.promoted && piece.promoted)
        r += '~';
    return r;
}
exports.makePiece = makePiece;
function makeBoardFen(board, opts) {
    let fen = '';
    let empty = 0;
    for (let rank = 7; rank >= 0; rank--) {
        for (let file = 0; file < 8; file++) {
            const square = file + rank * 8;
            const piece = board.get(square);
            if (!piece)
                empty++;
            else {
                if (empty) {
                    fen += empty;
                    empty = 0;
                }
                fen += makePiece(piece, opts);
            }
            if (file === 7) {
                if (empty) {
                    fen += empty;
                    empty = 0;
                }
                if (rank !== 0)
                    fen += '/';
            }
        }
    }
    return fen;
}
exports.makeBoardFen = makeBoardFen;
function makePocket(material) {
    return types_1.ROLES.map(role => util_1.roleToChar(role).repeat(material[role])).join('');
}
function makePockets(pocket) {
    return makePocket(pocket.white).toUpperCase() + makePocket(pocket.black);
}
exports.makePockets = makePockets;
function makeCastlingFen(board, unmovedRooks, opts) {
    const shredder = opts && opts.shredder;
    let fen = '';
    for (const color of types_1.COLORS) {
        const backrank = squareSet_1.SquareSet.backrank(color);
        const king = board.kingOf(color);
        if (!util_1.defined(king) || !backrank.has(king))
            continue;
        const candidates = board.pieces(color, 'rook').intersect(backrank);
        for (const rook of unmovedRooks.intersect(candidates).reversed()) {
            if (!shredder && rook === candidates.first() && rook < king) {
                fen += color === 'white' ? 'Q' : 'q';
            }
            else if (!shredder && rook === candidates.last() && king < rook) {
                fen += color === 'white' ? 'K' : 'k';
            }
            else {
                fen += (color === 'white' ? 'ABCDEFGH' : 'abcdefgh')[rook & 0x7];
            }
        }
    }
    return fen || '-';
}
exports.makeCastlingFen = makeCastlingFen;
function makeRemainingChecks(checks) {
    return `${checks.white}+${checks.black}`;
}
exports.makeRemainingChecks = makeRemainingChecks;
function makeFen(setup, opts) {
    return [
        makeBoardFen(setup.board, opts) + (setup.pockets ? `[${makePockets(setup.pockets)}]` : ''),
        setup.turn[0],
        makeCastlingFen(setup.board, setup.unmovedRooks, opts),
        util_1.defined(setup.epSquare) ? util_1.makeSquare(setup.epSquare) : '-',
        ...(setup.remainingChecks ? [makeRemainingChecks(setup.remainingChecks)] : []),
        ...(opts && opts.epd ? [] : [setup.halfmoves, setup.fullmoves])
    ].join(' ');
}
exports.makeFen = makeFen;

},{"./board":21,"./setup":25,"./squareSet":26,"./types":27,"./util":28,"@badrap/result":1}],24:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("./types");
const util_1 = require("./util");
const squareSet_1 = require("./squareSet");
const attacks_1 = require("./attacks");
function makeSanWithoutSuffix(pos, uci) {
    let san = '';
    if (types_1.isDrop(uci)) {
        if (uci.role !== 'pawn')
            san = util_1.roleToChar(uci.role).toUpperCase();
        san += '@' + util_1.makeSquare(uci.to);
    }
    else {
        const role = pos.board.getRole(uci.from);
        if (!role)
            return '--';
        if (role === 'king' && (pos.board[pos.turn].has(uci.to) || Math.abs(uci.to - uci.from) === 2)) {
            san = uci.to > uci.from ? 'O-O' : 'O-O-O';
        }
        else {
            const capture = pos.board.occupied.has(uci.to) || (role === 'pawn' && (uci.from & 0x7) !== (uci.to & 0x7));
            if (role !== 'pawn') {
                san = util_1.roleToChar(role).toUpperCase();
                // Disambiguation
                let others;
                if (role === 'king')
                    others = attacks_1.kingAttacks(uci.to).intersect(pos.board.king);
                else if (role === 'queen')
                    others = attacks_1.queenAttacks(uci.to, pos.board.occupied).intersect(pos.board.queen);
                else if (role === 'rook')
                    others = attacks_1.rookAttacks(uci.to, pos.board.occupied).intersect(pos.board.rook);
                else if (role === 'bishop')
                    others = attacks_1.bishopAttacks(uci.to, pos.board.occupied).intersect(pos.board.bishop);
                else
                    others = attacks_1.knightAttacks(uci.to).intersect(pos.board.knight);
                others = others.intersect(pos.board[pos.turn]).without(uci.from);
                if (others.nonEmpty()) {
                    const ctx = pos.ctx();
                    for (const from of others) {
                        if (!pos.dests(from, ctx).has(uci.to))
                            others = others.without(from);
                    }
                    if (others.nonEmpty()) {
                        let row = false;
                        let column = others.intersects(squareSet_1.SquareSet.fromRank(uci.from >> 3));
                        if (others.intersects(squareSet_1.SquareSet.fromFile(uci.from & 0x7)))
                            row = true;
                        else
                            column = true;
                        if (column)
                            san += 'abcdefgh'[uci.from & 0x7];
                        if (row)
                            san += '12345678'[uci.from >> 3];
                    }
                }
            }
            else if (capture)
                san = 'abcdefgh'[uci.from & 0x7];
            if (capture)
                san += 'x';
            san += util_1.makeSquare(uci.to);
            if (uci.promotion)
                san += '=' + util_1.roleToChar(uci.promotion).toUpperCase();
        }
    }
    return san;
}
function makeSanAndPlay(pos, uci) {
    const san = makeSanWithoutSuffix(pos, uci);
    pos.play(uci);
    const outcome = pos.outcome();
    if (outcome && outcome.winner)
        return san + '#';
    else if (pos.isCheck())
        return san + '+';
    else
        return san;
}
exports.makeSanAndPlay = makeSanAndPlay;
function makeSanVariation(pos, variation) {
    pos = pos.clone();
    let line = '';
    for (let i = 0; i < variation.length; i++) {
        if (i !== 0)
            line += ' ';
        if (pos.turn === 'white')
            line += pos.fullmoves + '. ';
        else if (i === 0)
            line = pos.fullmoves + '... ';
        const san = makeSanWithoutSuffix(pos, variation[i]);
        pos.play(variation[i]);
        line += san;
        if (san === '--')
            return line;
        let over = false;
        if (i === variation.length - 1) {
            const outcome = pos.outcome();
            over = !!(outcome && outcome.winner);
        }
        if (over)
            line += '#';
        else if (pos.isCheck())
            line += '+';
    }
    return line;
}
exports.makeSanVariation = makeSanVariation;
function makeSan(pos, uci) {
    return makeSanAndPlay(pos.clone(), uci);
}
exports.makeSan = makeSan;

},{"./attacks":20,"./squareSet":26,"./types":27,"./util":28}],25:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("./types");
const squareSet_1 = require("./squareSet");
const board_1 = require("./board");
class MaterialSide {
    constructor() { }
    static empty() {
        const m = new MaterialSide();
        for (const role of types_1.ROLES)
            m[role] = 0;
        return m;
    }
    clone() {
        const m = new MaterialSide();
        for (const role of types_1.ROLES)
            m[role] = this[role];
        return m;
    }
    nonEmpty() {
        return types_1.ROLES.some(role => this[role] > 0);
    }
    isEmpty() {
        return !this.nonEmpty();
    }
    hasPawns() {
        return this.pawn > 0;
    }
    hasNonPawns() {
        return this.knight > 0 || this.bishop > 0 || this.rook > 0 || this.queen > 0 || this.king > 0;
    }
    count() {
        return this.pawn + this.knight + this.bishop + this.rook + this.queen + this.king;
    }
}
exports.MaterialSide = MaterialSide;
class Material {
    constructor(white, black) {
        this.white = white;
        this.black = black;
    }
    static empty() {
        return new Material(MaterialSide.empty(), MaterialSide.empty());
    }
    clone() {
        return new Material(this.white.clone(), this.black.clone());
    }
    count() {
        return this.white.count() + this.black.count();
    }
    isEmpty() {
        return this.white.isEmpty() && this.black.isEmpty();
    }
    nonEmpty() {
        return !this.isEmpty();
    }
    hasPawns() {
        return this.white.hasPawns() || this.black.hasPawns();
    }
    hasNonPawns() {
        return this.white.hasNonPawns() || this.black.hasNonPawns();
    }
}
exports.Material = Material;
class RemainingChecks {
    constructor(white, black) {
        this.white = white;
        this.black = black;
    }
    static default() {
        return new RemainingChecks(3, 3);
    }
    clone() {
        return new RemainingChecks(this.white, this.black);
    }
}
exports.RemainingChecks = RemainingChecks;
function defaultSetup() {
    return {
        board: board_1.Board.default(),
        pockets: undefined,
        turn: 'white',
        unmovedRooks: squareSet_1.SquareSet.corners(),
        epSquare: undefined,
        remainingChecks: undefined,
        halfmoves: 0,
        fullmoves: 1,
    };
}
exports.defaultSetup = defaultSetup;

},{"./board":21,"./squareSet":26,"./types":27}],26:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function popcnt32(n) {
    n = n - ((n >>> 1) & 1431655765);
    n = (n & 858993459) + ((n >>> 2) & 858993459);
    return ((n + (n >>> 4) & 252645135) * 16843009) >> 24;
}
function bswap32(n) {
    n = (n >>> 8) & 16711935 | ((n & 16711935) << 8);
    return (n >>> 16) & 0xffff | ((n & 0xffff) << 16);
}
function rbit32(n) {
    n = ((n >>> 1) & 1431655765) | ((n & 1431655765) << 1);
    n = ((n >>> 2) & 858993459) | ((n & 858993459) << 2);
    n = ((n >>> 4) & 252645135) | ((n & 252645135) << 4);
    n = ((n >>> 8) & 16711935) | ((n & 16711935) << 8);
    n = ((n >>> 16) & 65535) | ((n & 65535) << 16);
    return n;
}
class SquareSet {
    constructor(lo, hi) {
        this.lo = lo;
        this.hi = hi;
        this.lo = lo | 0;
        this.hi = hi | 0;
    }
    static fromSquare(square) {
        return square >= 32 ?
            new SquareSet(0, 1 << (square - 32)) :
            new SquareSet(1 << square, 0);
    }
    static fromRank(rank) {
        return new SquareSet(0xff, 0).shl64(8 * rank);
    }
    static fromFile(file) {
        return new SquareSet(16843009 << file, 16843009 << file);
    }
    static empty() {
        return new SquareSet(0, 0);
    }
    static full() {
        return new SquareSet(4294967295, 4294967295);
    }
    static corners() {
        return new SquareSet(0x81, 2164260864);
    }
    static center() {
        return new SquareSet(402653184, 0x18);
    }
    static backranks() {
        return new SquareSet(0xff, 4278190080);
    }
    static backrank(color) {
        return color === 'white' ? new SquareSet(0xff, 0) : new SquareSet(0, 4278190080);
    }
    static lightSquares() {
        return new SquareSet(1437226410, 1437226410);
    }
    static darkSquares() {
        return new SquareSet(2857740885, 2857740885);
    }
    complement() {
        return new SquareSet(~this.lo, ~this.hi);
    }
    xor(other) {
        return new SquareSet(this.lo ^ other.lo, this.hi ^ other.hi);
    }
    union(other) {
        return new SquareSet(this.lo | other.lo, this.hi | other.hi);
    }
    intersect(other) {
        return new SquareSet(this.lo & other.lo, this.hi & other.hi);
    }
    diff(other) {
        return new SquareSet(this.lo & ~other.lo, this.hi & ~other.hi);
    }
    intersects(other) {
        return this.intersect(other).nonEmpty();
    }
    isDisjoint(other) {
        return this.intersect(other).isEmpty();
    }
    supersetOf(other) {
        return other.diff(this).isEmpty();
    }
    subsetOf(other) {
        return this.diff(other).isEmpty();
    }
    shr64(shift) {
        if (shift >= 64)
            return SquareSet.empty();
        if (shift >= 32)
            return new SquareSet(this.hi >>> (shift - 32), 0);
        if (shift > 0)
            return new SquareSet((this.lo >>> shift) ^ (this.hi << (32 - shift)), this.hi >>> shift);
        return this;
    }
    shl64(shift) {
        if (shift >= 64)
            return SquareSet.empty();
        if (shift >= 32)
            return new SquareSet(0, this.lo << (shift - 32));
        if (shift > 0)
            return new SquareSet(this.lo << shift, (this.hi << shift) ^ (this.lo >>> (32 - shift)));
        return this;
    }
    bswap64() {
        return new SquareSet(bswap32(this.hi), bswap32(this.lo));
    }
    rbit64() {
        return new SquareSet(rbit32(this.hi), rbit32(this.lo));
    }
    equals(other) {
        return this.lo === other.lo && this.hi === other.hi;
    }
    size() {
        return popcnt32(this.lo) + popcnt32(this.hi);
    }
    isEmpty() {
        return this.lo === 0 && this.hi === 0;
    }
    nonEmpty() {
        return this.lo !== 0 || this.hi !== 0;
    }
    has(square) {
        return !!(square >= 32 ? this.hi & (1 << (square - 32)) : this.lo & (1 << square));
    }
    set(square, on) {
        return on ? this.with(square) : this.without(square);
    }
    with(square) {
        return square >= 32 ?
            new SquareSet(this.lo, this.hi | (1 << (square - 32))) :
            new SquareSet(this.lo | (1 << square), this.hi);
    }
    without(square) {
        return square >= 32 ?
            new SquareSet(this.lo, this.hi & ~(1 << (square - 32))) :
            new SquareSet(this.lo & ~(1 << square), this.hi);
    }
    toggle(square) {
        return square >= 32 ?
            new SquareSet(this.lo, this.hi ^ (1 << (square - 32))) :
            new SquareSet(this.lo ^ (1 << square), this.hi);
    }
    last() {
        if (this.hi !== 0)
            return 63 - Math.clz32(this.hi);
        if (this.lo !== 0)
            return 31 - Math.clz32(this.lo);
        return;
    }
    first() {
        if (this.lo !== 0)
            return 31 - Math.clz32(this.lo & -this.lo);
        if (this.hi !== 0)
            return 63 - Math.clz32(this.hi & -this.hi);
        return;
    }
    moreThanOne() {
        return !!((this.hi && this.lo) || this.lo & (this.lo - 1) || this.hi & (this.hi - 1));
    }
    singleSquare() {
        return this.moreThanOne() ? undefined : this.last();
    }
    isSingleSquare() {
        return this.nonEmpty() && !this.moreThanOne();
    }
    [Symbol.iterator]() {
        let lo = this.lo;
        let hi = this.hi;
        return {
            next() {
                if (lo) {
                    const idx = 31 - Math.clz32(lo & -lo);
                    lo ^= 1 << idx;
                    return { value: idx, done: false };
                }
                if (hi) {
                    const idx = 31 - Math.clz32(hi & -hi);
                    hi ^= 1 << idx;
                    return { value: 32 + idx, done: false };
                }
                return { done: true };
            }
        };
    }
    reversed() {
        let lo = this.lo;
        let hi = this.hi;
        return {
            [Symbol.iterator]() {
                return {
                    next() {
                        if (hi) {
                            const idx = 31 - Math.clz32(hi);
                            hi ^= 1 << idx;
                            return { value: 32 + idx, done: false };
                        }
                        if (lo) {
                            const idx = 31 - Math.clz32(lo);
                            lo ^= 1 << idx;
                            return { value: idx, done: false };
                        }
                        return { done: true };
                    }
                };
            }
        };
    }
    minus64(other) {
        const lo = this.lo - other.lo;
        const c = ((lo & other.lo & 1) + (other.lo >>> 1) + (lo >>> 1)) >>> 31;
        return new SquareSet(lo, this.hi - (other.hi + c));
    }
}
exports.SquareSet = SquareSet;

},{}],27:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.COLORS = ['white', 'black'];
exports.ROLES = ['pawn', 'knight', 'bishop', 'rook', 'queen', 'king'];
exports.CASTLING_SIDES = ['a', 'h'];
function isDrop(v) {
    return 'role' in v;
}
exports.isDrop = isDrop;
function isMove(v) {
    return 'from' in v;
}
exports.isMove = isMove;
exports.RULES = ['chess', 'antichess', 'kingofthehill', '3check', 'atomic', 'horde', 'racingkings', 'crazyhouse'];

},{}],28:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("./types");
function defined(v) {
    return typeof v !== 'undefined';
}
exports.defined = defined;
function opposite(color) {
    return color === 'white' ? 'black' : 'white';
}
exports.opposite = opposite;
function squareDist(a, b) {
    const x1 = a & 0x7, x2 = b & 0x7;
    const y1 = a >> 3, y2 = b >> 3;
    return Math.max(Math.abs(x1 - x2), Math.abs(y1 - y2));
}
exports.squareDist = squareDist;
function squareRank(square) {
    return square >> 3;
}
exports.squareRank = squareRank;
function squareFile(square) {
    return square & 0x7;
}
exports.squareFile = squareFile;
function roleToChar(role) {
    switch (role) {
        case 'pawn': return 'p';
        case 'knight': return 'n';
        case 'bishop': return 'b';
        case 'rook': return 'r';
        case 'queen': return 'q';
        case 'king': return 'k';
    }
}
exports.roleToChar = roleToChar;
function charToRole(ch) {
    switch (ch) {
        case 'P':
        case 'p': return 'pawn';
        case 'N':
        case 'n': return 'knight';
        case 'B':
        case 'b': return 'bishop';
        case 'R':
        case 'r': return 'rook';
        case 'Q':
        case 'q': return 'queen';
        case 'K':
        case 'k': return 'king';
        default: return;
    }
}
exports.charToRole = charToRole;
function parseSquare(str) {
    if (!/^[a-h][1-8]$/.test(str))
        return;
    return str.charCodeAt(0) - 'a'.charCodeAt(0) + 8 * (str.charCodeAt(1) - '1'.charCodeAt(0));
}
exports.parseSquare = parseSquare;
function makeSquare(square) {
    return 'abcdefgh'[square & 0x7] + '12345678'[square >> 3];
}
exports.makeSquare = makeSquare;
function parseUci(str) {
    if (str[1] === '@' && str.length === 4) {
        const role = charToRole(str[0]);
        const to = parseSquare(str.slice(2));
        if (role && defined(to))
            return { role, to };
    }
    else if (str.length === 4 || str.length === 5) {
        const from = parseSquare(str.slice(0, 2));
        const to = parseSquare(str.slice(2, 4));
        let promotion;
        if (str.length === 5) {
            promotion = charToRole(str[4]);
            if (!promotion)
                return;
        }
        if (defined(from) && defined(to))
            return { from, to, promotion };
    }
    return;
}
exports.parseUci = parseUci;
function makeUci(uci) {
    if (types_1.isDrop(uci))
        return `${roleToChar(uci.role).toUpperCase()}@${makeSquare(uci.to)}`;
    return makeSquare(uci.from) + makeSquare(uci.to) + (uci.promotion ? roleToChar(uci.promotion) : '');
}
exports.makeUci = makeUci;

},{"./types":27}],29:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const result_1 = require("@badrap/result");
const types_1 = require("./types");
const util_1 = require("./util");
const attacks_1 = require("./attacks");
const squareSet_1 = require("./squareSet");
const board_1 = require("./board");
const setup_1 = require("./setup");
const chess_1 = require("./chess");
exports.PositionError = chess_1.PositionError;
exports.Position = chess_1.Position;
exports.IllegalSetup = chess_1.IllegalSetup;
exports.Castles = chess_1.Castles;
exports.Chess = chess_1.Chess;
class Crazyhouse extends chess_1.Chess {
    constructor() {
        super('crazyhouse');
    }
    static default() {
        const pos = super.default();
        pos.pockets = setup_1.Material.empty();
        return pos;
    }
    static fromSetup(setup) {
        return super.fromSetup(setup).map(pos => {
            pos.pockets = setup.pockets ? setup.pockets.clone() : setup_1.Material.empty();
            return pos;
        });
    }
    validate() {
        return super.validate().chain(_ => {
            if (this.pockets && (this.pockets.white.king > 0 || this.pockets.black.king > 0)) {
                return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Kings));
            }
            if ((this.pockets ? this.pockets.count() : 0) + this.board.occupied.size() > 64) {
                return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Variant));
            }
            return result_1.Result.ok(undefined);
        });
    }
    clone() {
        return super.clone();
    }
    hasInsufficientMaterial(color) {
        // No material can leave the game, but we can easily check this for
        // custom positions.
        if (!this.pockets)
            return super.hasInsufficientMaterial(color);
        return this.board.occupied.size() + this.pockets.count() <= 3 &&
            this.board.pawn.isEmpty() &&
            this.board.promoted.isEmpty() &&
            this.board.rooksAndQueens().isEmpty() &&
            this.pockets.white.pawn <= 0 &&
            this.pockets.black.pawn <= 0 &&
            this.pockets.white.rook <= 0 &&
            this.pockets.black.rook <= 0 &&
            this.pockets.white.queen <= 0 &&
            this.pockets.black.queen <= 0;
    }
    dropDests(ctx) {
        const mask = this.board.occupied.complement().intersect((this.pockets && this.pockets[this.turn].hasNonPawns()) ? squareSet_1.SquareSet.full() :
            (this.pockets && this.pockets[this.turn].pawn) ? squareSet_1.SquareSet.backranks().complement() :
                squareSet_1.SquareSet.empty());
        if (util_1.defined(ctx.king) && ctx.checkers.nonEmpty()) {
            const checker = ctx.checkers.singleSquare();
            if (!util_1.defined(checker))
                return squareSet_1.SquareSet.empty();
            return mask.intersect(attacks_1.between(checker, ctx.king));
        }
        else
            return mask;
    }
}
exports.Crazyhouse = Crazyhouse;
class Atomic extends chess_1.Chess {
    constructor() {
        super('atomic');
    }
    static default() {
        return super.default();
    }
    static fromSetup(setup) {
        return super.fromSetup(setup);
    }
    clone() {
        return super.clone();
    }
    validate() {
        // Like chess, but allow our king to be missing.
        if (this.board.occupied.isEmpty())
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Empty));
        if (this.board.king.size() > 2)
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Kings));
        const otherKing = this.board.kingOf(util_1.opposite(this.turn));
        if (!util_1.defined(otherKing))
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Kings));
        if (this.kingAttackers(otherKing, this.turn, this.board.occupied).nonEmpty()) {
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.OppositeCheck));
        }
        if (squareSet_1.SquareSet.backranks().intersects(this.board.pawn)) {
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.PawnsOnBackrank));
        }
        return result_1.Result.ok(undefined);
    }
    kingAttackers(square, attacker, occupied) {
        if (attacks_1.kingAttacks(square).intersects(this.board.pieces(attacker, 'king'))) {
            return squareSet_1.SquareSet.empty();
        }
        return super.kingAttackers(square, attacker, occupied);
    }
    playCaptureAt(square, captured) {
        super.playCaptureAt(square, captured);
        this.board.take(square);
        for (const explode of attacks_1.kingAttacks(square).intersect(this.board.occupied).diff(this.board.pawn)) {
            const piece = this.board.take(explode);
            if (piece && piece.role === 'rook')
                this.castles.discardRook(explode);
            if (piece && piece.role === 'king')
                this.castles.discardSide(piece.color);
        }
    }
    hasInsufficientMaterial(color) {
        // Remaining material does not matter if the enemy king is already
        // exploded.
        if (this.board.pieces(util_1.opposite(color), 'king').isEmpty())
            return false;
        // Bare king cannot mate.
        if (this.board[color].diff(this.board.king).isEmpty())
            return true;
        // As long as the enemy king is not alone, there is always a chance their
        // own pieces explode next to it.
        if (this.board[util_1.opposite(color)].diff(this.board.king).nonEmpty()) {
            // Unless there are only bishops that cannot explode each other.
            if (this.board.occupied.equals(this.board.bishop.union(this.board.king))) {
                if (!this.board.bishop.intersect(this.board.white).intersects(squareSet_1.SquareSet.darkSquares())) {
                    return !this.board.bishop.intersect(this.board.black).intersects(squareSet_1.SquareSet.lightSquares());
                }
                if (!this.board.bishop.intersect(this.board.white).intersects(squareSet_1.SquareSet.lightSquares())) {
                    return !this.board.bishop.intersect(this.board.black).intersects(squareSet_1.SquareSet.darkSquares());
                }
            }
            return false;
        }
        // Queen or pawn (future queen) can give mate against bare king.
        if (this.board.queen.nonEmpty() || this.board.pawn.nonEmpty())
            return false;
        // Single knight, bishop or rook cannot mate against bare king.
        if (this.board.knight.union(this.board.bishop).union(this.board.rook).isSingleSquare())
            return true;
        // If only knights, more than two are required to mate bare king.
        if (this.board.occupied.equals(this.board.knight.union(this.board.king))) {
            return this.board.knight.size() <= 2;
        }
        return false;
    }
    dests(square, ctx) {
        let dests = squareSet_1.SquareSet.empty();
        for (const to of this.pseudoDests(square, ctx)) {
            const after = this.clone();
            after.play({ from: square, to });
            const ourKing = after.board.kingOf(this.turn);
            if (util_1.defined(ourKing) && (!util_1.defined(after.board.kingOf(after.turn)) || after.kingAttackers(ourKing, after.turn, after.board.occupied).isEmpty())) {
                dests = dests.with(to);
            }
        }
        return dests;
    }
    isVariantEnd() {
        return !!this.variantOutcome();
    }
    variantOutcome() {
        for (const color of types_1.COLORS) {
            if (this.board.pieces(color, 'king').isEmpty())
                return { winner: util_1.opposite(color) };
        }
        return;
    }
}
exports.Atomic = Atomic;
class Antichess extends chess_1.Chess {
    constructor() {
        super('antichess');
    }
    static default() {
        const pos = new this();
        pos.board = board_1.Board.default();
        pos.turn = 'white';
        pos.castles = chess_1.Castles.empty();
        pos.epSquare = undefined;
        pos.remainingChecks = undefined;
        pos.halfmoves = 0;
        pos.fullmoves = 1;
        return pos;
    }
    static fromSetup(setup) {
        return super.fromSetup(setup).map(pos => {
            pos.castles = chess_1.Castles.empty();
            return pos;
        });
    }
    clone() {
        return super.clone();
    }
    validate() {
        if (this.board.occupied.isEmpty())
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Empty));
        if (squareSet_1.SquareSet.backranks().intersects(this.board.pawn))
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.PawnsOnBackrank));
        return result_1.Result.ok(undefined);
    }
    kingAttackers(_square, _attacker, _occupied) {
        return squareSet_1.SquareSet.empty();
    }
    ctx() {
        const ctx = super.ctx();
        const enemy = this.board[util_1.opposite(this.turn)];
        for (const from of this.board[this.turn]) {
            if (this.pseudoDests(from, ctx).intersects(enemy)) {
                ctx.mustCapture = true;
                break;
            }
        }
        return ctx;
    }
    dests(square, ctx) {
        const dests = this.pseudoDests(square, ctx);
        if (!ctx.mustCapture)
            return dests;
        else
            return dests.intersect(this.board[util_1.opposite(this.turn)]);
    }
    hasInsufficientMaterial(color) {
        if (this.board.occupied.equals(this.board.bishop)) {
            const weSomeOnLight = this.board[color].intersects(squareSet_1.SquareSet.lightSquares());
            const weSomeOnDark = this.board[color].intersects(squareSet_1.SquareSet.darkSquares());
            const theyAllOnDark = this.board[util_1.opposite(color)].isDisjoint(squareSet_1.SquareSet.lightSquares());
            const theyAllOnLight = this.board[util_1.opposite(color)].isDisjoint(squareSet_1.SquareSet.darkSquares());
            return (weSomeOnLight && theyAllOnDark) || (weSomeOnDark && theyAllOnLight);
        }
        return false;
    }
    isVariantEnd() {
        return this.board[this.turn].isEmpty();
    }
    variantOutcome() {
        if (this.isVariantEnd() || this.isStalemate()) {
            return { winner: this.turn };
        }
        return;
    }
}
exports.Antichess = Antichess;
class KingOfTheHill extends chess_1.Chess {
    constructor() {
        super('kingofthehill');
    }
    static default() {
        return super.default();
    }
    static fromSetup(setup) {
        return super.fromSetup(setup);
    }
    clone() {
        return super.clone();
    }
    hasInsufficientMaterial(_color) {
        return false;
    }
    isVariantEnd() {
        return this.board.king.intersects(squareSet_1.SquareSet.center());
    }
    variantOutcome() {
        for (const color of types_1.COLORS) {
            if (this.board.pieces(color, 'king').intersects(squareSet_1.SquareSet.center()))
                return { winner: color };
        }
        return;
    }
}
exports.KingOfTheHill = KingOfTheHill;
class ThreeCheck extends chess_1.Chess {
    constructor() {
        super('3check');
    }
    static default() {
        const pos = super.default();
        pos.remainingChecks = setup_1.RemainingChecks.default();
        return pos;
    }
    static fromSetup(setup) {
        return super.fromSetup(setup).map(pos => {
            pos.remainingChecks = setup.remainingChecks ? setup.remainingChecks.clone() : setup_1.RemainingChecks.default();
            return pos;
        });
    }
    clone() {
        return super.clone();
    }
    hasInsufficientMaterial(color) {
        return this.board.pieces(color, 'king').equals(this.board[color]);
    }
    isVariantEnd() {
        return !!this.remainingChecks && (this.remainingChecks.white <= 0 || this.remainingChecks.black <= 0);
    }
    variantOutcome() {
        if (this.remainingChecks) {
            for (const color of types_1.COLORS) {
                if (this.remainingChecks[color] <= 0)
                    return { winner: color };
            }
        }
        return;
    }
}
exports.ThreeCheck = ThreeCheck;
class RacingKings extends chess_1.Chess {
    constructor() {
        super('racingkings');
    }
    static default() {
        const pos = new this();
        pos.board = board_1.Board.racingKings();
        pos.turn = 'white';
        pos.castles = chess_1.Castles.empty();
        pos.epSquare = undefined;
        pos.remainingChecks = undefined;
        pos.halfmoves = 0;
        pos.fullmoves = 1;
        return pos;
    }
    static fromSetup(setup) {
        return super.fromSetup(setup).map(pos => {
            pos.castles = chess_1.Castles.empty();
            return pos;
        });
    }
    validate() {
        if (this.board.pawn.nonEmpty() || this.isCheck()) {
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Variant));
        }
        return super.validate();
    }
    clone() {
        return super.clone();
    }
    dests(square, ctx) {
        // Kings cannot give check.
        if (square === ctx.king)
            return super.dests(square, ctx);
        // TODO: This could be optimized considerably.
        let dests = squareSet_1.SquareSet.empty();
        for (const to of super.dests(square, ctx)) {
            // Valid, because there are no promotions (or even pawns).
            const uci = { from: square, to };
            const after = this.clone();
            after.play(uci);
            if (!after.isCheck())
                dests = dests.with(to);
        }
        return dests;
    }
    hasInsufficientMaterial(_color) {
        return false;
    }
    isVariantEnd() {
        const goal = squareSet_1.SquareSet.fromRank(7);
        const inGoal = this.board.king.intersect(goal);
        if (inGoal.isEmpty())
            return false;
        if (this.turn === 'white' || inGoal.intersects(this.board.black))
            return true;
        // White has reached the backrank. Check if black can catch up.
        const blackKing = this.board.kingOf('black');
        if (util_1.defined(blackKing)) {
            const occ = this.board.occupied.without(blackKing);
            for (const target of attacks_1.kingAttacks(blackKing).intersect(goal).diff(this.board.black)) {
                if (this.kingAttackers(target, util_1.opposite(this.turn), occ).isEmpty())
                    return false;
            }
        }
        return true;
    }
    variantOutcome() {
        if (!this.isVariantEnd())
            return;
        const goal = squareSet_1.SquareSet.fromRank(7);
        const blackInGoal = this.board.pieces('black', 'king').intersects(goal);
        const whiteInGoal = this.board.pieces('white', 'king').intersects(goal);
        if (blackInGoal && !whiteInGoal)
            return { winner: 'black' };
        if (whiteInGoal && !blackInGoal)
            return { winner: 'white' };
        return { winner: undefined };
    }
}
class Horde extends chess_1.Chess {
    constructor() {
        super('horde');
    }
    static default() {
        const pos = new this();
        pos.board = board_1.Board.horde();
        pos.pockets = undefined;
        pos.turn = 'white';
        pos.castles = chess_1.Castles.default();
        pos.castles.discardSide('white');
        pos.epSquare = undefined;
        pos.remainingChecks = undefined;
        pos.halfmoves = 0;
        pos.fullmoves = 1;
        return pos;
    }
    static fromSetup(setup) {
        return super.fromSetup(setup);
    }
    validate() {
        if (this.board.occupied.isEmpty())
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Empty));
        if (!this.board.king.isSingleSquare())
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Kings));
        if (!this.board.king.diff(this.board.promoted).isSingleSquare())
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.Kings));
        const otherKing = this.board.kingOf(util_1.opposite(this.turn));
        if (util_1.defined(otherKing) && this.kingAttackers(otherKing, this.turn, this.board.occupied).nonEmpty())
            return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.OppositeCheck));
        for (const color of types_1.COLORS) {
            if (this.board.pieces(color, 'pawn').intersects(squareSet_1.SquareSet.backrank(util_1.opposite(color)))) {
                return result_1.Result.err(new chess_1.PositionError(chess_1.IllegalSetup.PawnsOnBackrank));
            }
        }
        return result_1.Result.ok(undefined);
    }
    clone() {
        return super.clone();
    }
    hasInsufficientMaterial(_color) {
        // TODO: Could detect cases where the horde cannot mate.
        return false;
    }
    isVariantEnd() {
        return this.board.white.isEmpty() || this.board.black.isEmpty();
    }
    variantOutcome() {
        if (this.board.white.isEmpty())
            return { winner: 'black' };
        if (this.board.black.isEmpty())
            return { winner: 'white' };
        return;
    }
}
exports.Horde = Horde;
function defaultPosition(rules) {
    switch (rules) {
        case 'chess': return chess_1.Chess.default();
        case 'antichess': return Antichess.default();
        case 'atomic': return Atomic.default();
        case 'horde': return Horde.default();
        case 'racingkings': return RacingKings.default();
        case 'kingofthehill': return KingOfTheHill.default();
        case '3check': return ThreeCheck.default();
        case 'crazyhouse': return Crazyhouse.default();
    }
}
exports.defaultPosition = defaultPosition;
function setupPosition(rules, setup) {
    switch (rules) {
        case 'chess': return chess_1.Chess.fromSetup(setup);
        case 'antichess': return Antichess.fromSetup(setup);
        case 'atomic': return Atomic.fromSetup(setup);
        case 'horde': return Horde.fromSetup(setup);
        case 'racingkings': return RacingKings.fromSetup(setup);
        case 'kingofthehill': return KingOfTheHill.fromSetup(setup);
        case '3check': return ThreeCheck.fromSetup(setup);
        case 'crazyhouse': return Crazyhouse.fromSetup(setup);
    }
}
exports.setupPosition = setupPosition;

},{"./attacks":20,"./board":21,"./chess":22,"./setup":25,"./squareSet":26,"./types":27,"./util":28,"@badrap/result":1}],30:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var vnode_1 = require("./vnode");
var is = require("./is");
function addNS(data, children, sel) {
    data.ns = 'http://www.w3.org/2000/svg';
    if (sel !== 'foreignObject' && children !== undefined) {
        for (var i = 0; i < children.length; ++i) {
            var childData = children[i].data;
            if (childData !== undefined) {
                addNS(childData, children[i].children, children[i].sel);
            }
        }
    }
}
function h(sel, b, c) {
    var data = {}, children, text, i;
    if (c !== undefined) {
        data = b;
        if (is.array(c)) {
            children = c;
        }
        else if (is.primitive(c)) {
            text = c;
        }
        else if (c && c.sel) {
            children = [c];
        }
    }
    else if (b !== undefined) {
        if (is.array(b)) {
            children = b;
        }
        else if (is.primitive(b)) {
            text = b;
        }
        else if (b && b.sel) {
            children = [b];
        }
        else {
            data = b;
        }
    }
    if (is.array(children)) {
        for (i = 0; i < children.length; ++i) {
            if (is.primitive(children[i]))
                children[i] = vnode_1.vnode(undefined, undefined, undefined, children[i]);
        }
    }
    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&
        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {
        addNS(data, children, sel);
    }
    return vnode_1.vnode(sel, data, children, text, undefined);
}
exports.h = h;
;
exports.default = h;

},{"./is":32,"./vnode":37}],31:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function createElement(tagName) {
    return document.createElement(tagName);
}
function createElementNS(namespaceURI, qualifiedName) {
    return document.createElementNS(namespaceURI, qualifiedName);
}
function createTextNode(text) {
    return document.createTextNode(text);
}
function insertBefore(parentNode, newNode, referenceNode) {
    parentNode.insertBefore(newNode, referenceNode);
}
function removeChild(node, child) {
    node.removeChild(child);
}
function appendChild(node, child) {
    node.appendChild(child);
}
function parentNode(node) {
    return node.parentNode;
}
function nextSibling(node) {
    return node.nextSibling;
}
function tagName(elm) {
    return elm.tagName;
}
function setTextContent(node, text) {
    node.textContent = text;
}
function getTextContent(node) {
    return node.textContent;
}
function isElement(node) {
    return node.nodeType === 1;
}
function isText(node) {
    return node.nodeType === 3;
}
exports.htmlDomApi = {
    createElement: createElement,
    createElementNS: createElementNS,
    createTextNode: createTextNode,
    insertBefore: insertBefore,
    removeChild: removeChild,
    appendChild: appendChild,
    parentNode: parentNode,
    nextSibling: nextSibling,
    tagName: tagName,
    setTextContent: setTextContent,
    getTextContent: getTextContent,
    isElement: isElement,
    isText: isText,
};
exports.default = exports.htmlDomApi;

},{}],32:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.array = Array.isArray;
function primitive(s) {
    return typeof s === 'string' || typeof s === 'number';
}
exports.primitive = primitive;

},{}],33:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function updateAttrs(oldVnode, vnode) {
    var key, elm = vnode.elm, oldAttrs = oldVnode.data.attrs, attrs = vnode.data.attrs;
    if (!oldAttrs && !attrs)
        return;
    if (oldAttrs === attrs)
        return;
    oldAttrs = oldAttrs || {};
    attrs = attrs || {};
    // update modified attributes, add new attributes
    for (key in attrs) {
        var cur = attrs[key];
        var old = oldAttrs[key];
        if (old !== cur) {
            if (cur === true) {
                elm.setAttribute(key, "");
            }
            else if (cur === false) {
                elm.removeAttribute(key);
            }
            else {
                elm.setAttribute(key, cur);
            }
        }
    }
    // remove removed attributes
    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)
    // the other option is to remove all attributes with value == undefined
    for (key in oldAttrs) {
        if (!(key in attrs)) {
            elm.removeAttribute(key);
        }
    }
}
exports.attributesModule = { create: updateAttrs, update: updateAttrs };
exports.default = exports.attributesModule;

},{}],34:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function updateClass(oldVnode, vnode) {
    var cur, name, elm = vnode.elm, oldClass = oldVnode.data.class, klass = vnode.data.class;
    if (!oldClass && !klass)
        return;
    if (oldClass === klass)
        return;
    oldClass = oldClass || {};
    klass = klass || {};
    for (name in oldClass) {
        if (!klass[name]) {
            elm.classList.remove(name);
        }
    }
    for (name in klass) {
        cur = klass[name];
        if (cur !== oldClass[name]) {
            elm.classList[cur ? 'add' : 'remove'](name);
        }
    }
}
exports.classModule = { create: updateClass, update: updateClass };
exports.default = exports.classModule;

},{}],35:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var vnode_1 = require("./vnode");
var is = require("./is");
var htmldomapi_1 = require("./htmldomapi");
function isUndef(s) { return s === undefined; }
function isDef(s) { return s !== undefined; }
var emptyNode = vnode_1.default('', {}, [], undefined, undefined);
function sameVnode(vnode1, vnode2) {
    return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;
}
function isVnode(vnode) {
    return vnode.sel !== undefined;
}
function createKeyToOldIdx(children, beginIdx, endIdx) {
    var i, map = {}, key, ch;
    for (i = beginIdx; i <= endIdx; ++i) {
        ch = children[i];
        if (ch != null) {
            key = ch.key;
            if (key !== undefined)
                map[key] = i;
        }
    }
    return map;
}
var hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];
var h_1 = require("./h");
exports.h = h_1.h;
var thunk_1 = require("./thunk");
exports.thunk = thunk_1.thunk;
function init(modules, domApi) {
    var i, j, cbs = {};
    var api = domApi !== undefined ? domApi : htmldomapi_1.default;
    for (i = 0; i < hooks.length; ++i) {
        cbs[hooks[i]] = [];
        for (j = 0; j < modules.length; ++j) {
            var hook = modules[j][hooks[i]];
            if (hook !== undefined) {
                cbs[hooks[i]].push(hook);
            }
        }
    }
    function emptyNodeAt(elm) {
        var id = elm.id ? '#' + elm.id : '';
        var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';
        return vnode_1.default(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);
    }
    function createRmCb(childElm, listeners) {
        return function rmCb() {
            if (--listeners === 0) {
                var parent_1 = api.parentNode(childElm);
                api.removeChild(parent_1, childElm);
            }
        };
    }
    function createElm(vnode, insertedVnodeQueue) {
        var i, data = vnode.data;
        if (data !== undefined) {
            if (isDef(i = data.hook) && isDef(i = i.init)) {
                i(vnode);
                data = vnode.data;
            }
        }
        var children = vnode.children, sel = vnode.sel;
        if (sel !== undefined) {
            // Parse selector
            var hashIdx = sel.indexOf('#');
            var dotIdx = sel.indexOf('.', hashIdx);
            var hash = hashIdx > 0 ? hashIdx : sel.length;
            var dot = dotIdx > 0 ? dotIdx : sel.length;
            var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;
            var elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? api.createElementNS(i, tag)
                : api.createElement(tag);
            if (hash < dot)
                elm.setAttribute('id', sel.slice(hash + 1, dot));
            if (dotIdx > 0)
                elm.setAttribute('class', sel.slice(dot + 1).replace(/\./g, ' '));
            for (i = 0; i < cbs.create.length; ++i)
                cbs.create[i](emptyNode, vnode);
            if (is.array(children)) {
                for (i = 0; i < children.length; ++i) {
                    var ch = children[i];
                    if (ch != null) {
                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));
                    }
                }
            }
            else if (is.primitive(vnode.text)) {
                api.appendChild(elm, api.createTextNode(vnode.text));
            }
            i = vnode.data.hook; // Reuse variable
            if (isDef(i)) {
                if (i.create)
                    i.create(emptyNode, vnode);
                if (i.insert)
                    insertedVnodeQueue.push(vnode);
            }
        }
        else {
            vnode.elm = api.createTextNode(vnode.text);
        }
        return vnode.elm;
    }
    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {
        for (; startIdx <= endIdx; ++startIdx) {
            var ch = vnodes[startIdx];
            if (ch != null) {
                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);
            }
        }
    }
    function invokeDestroyHook(vnode) {
        var i, j, data = vnode.data;
        if (data !== undefined) {
            if (isDef(i = data.hook) && isDef(i = i.destroy))
                i(vnode);
            for (i = 0; i < cbs.destroy.length; ++i)
                cbs.destroy[i](vnode);
            if (vnode.children !== undefined) {
                for (j = 0; j < vnode.children.length; ++j) {
                    i = vnode.children[j];
                    if (i != null && typeof i !== "string") {
                        invokeDestroyHook(i);
                    }
                }
            }
        }
    }
    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {
        for (; startIdx <= endIdx; ++startIdx) {
            var i_1 = void 0, listeners = void 0, rm = void 0, ch = vnodes[startIdx];
            if (ch != null) {
                if (isDef(ch.sel)) {
                    invokeDestroyHook(ch);
                    listeners = cbs.remove.length + 1;
                    rm = createRmCb(ch.elm, listeners);
                    for (i_1 = 0; i_1 < cbs.remove.length; ++i_1)
                        cbs.remove[i_1](ch, rm);
                    if (isDef(i_1 = ch.data) && isDef(i_1 = i_1.hook) && isDef(i_1 = i_1.remove)) {
                        i_1(ch, rm);
                    }
                    else {
                        rm();
                    }
                }
                else {
                    api.removeChild(parentElm, ch.elm);
                }
            }
        }
    }
    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {
        var oldStartIdx = 0, newStartIdx = 0;
        var oldEndIdx = oldCh.length - 1;
        var oldStartVnode = oldCh[0];
        var oldEndVnode = oldCh[oldEndIdx];
        var newEndIdx = newCh.length - 1;
        var newStartVnode = newCh[0];
        var newEndVnode = newCh[newEndIdx];
        var oldKeyToIdx;
        var idxInOld;
        var elmToMove;
        var before;
        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {
            if (oldStartVnode == null) {
                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left
            }
            else if (oldEndVnode == null) {
                oldEndVnode = oldCh[--oldEndIdx];
            }
            else if (newStartVnode == null) {
                newStartVnode = newCh[++newStartIdx];
            }
            else if (newEndVnode == null) {
                newEndVnode = newCh[--newEndIdx];
            }
            else if (sameVnode(oldStartVnode, newStartVnode)) {
                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);
                oldStartVnode = oldCh[++oldStartIdx];
                newStartVnode = newCh[++newStartIdx];
            }
            else if (sameVnode(oldEndVnode, newEndVnode)) {
                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);
                oldEndVnode = oldCh[--oldEndIdx];
                newEndVnode = newCh[--newEndIdx];
            }
            else if (sameVnode(oldStartVnode, newEndVnode)) {
                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);
                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));
                oldStartVnode = oldCh[++oldStartIdx];
                newEndVnode = newCh[--newEndIdx];
            }
            else if (sameVnode(oldEndVnode, newStartVnode)) {
                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);
                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);
                oldEndVnode = oldCh[--oldEndIdx];
                newStartVnode = newCh[++newStartIdx];
            }
            else {
                if (oldKeyToIdx === undefined) {
                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);
                }
                idxInOld = oldKeyToIdx[newStartVnode.key];
                if (isUndef(idxInOld)) {
                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);
                    newStartVnode = newCh[++newStartIdx];
                }
                else {
                    elmToMove = oldCh[idxInOld];
                    if (elmToMove.sel !== newStartVnode.sel) {
                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);
                    }
                    else {
                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);
                        oldCh[idxInOld] = undefined;
                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);
                    }
                    newStartVnode = newCh[++newStartIdx];
                }
            }
        }
        if (oldStartIdx > oldEndIdx) {
            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;
            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);
        }
        else if (newStartIdx > newEndIdx) {
            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);
        }
    }
    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {
        var i, hook;
        if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {
            i(oldVnode, vnode);
        }
        var elm = vnode.elm = oldVnode.elm;
        var oldCh = oldVnode.children;
        var ch = vnode.children;
        if (oldVnode === vnode)
            return;
        if (vnode.data !== undefined) {
            for (i = 0; i < cbs.update.length; ++i)
                cbs.update[i](oldVnode, vnode);
            i = vnode.data.hook;
            if (isDef(i) && isDef(i = i.update))
                i(oldVnode, vnode);
        }
        if (isUndef(vnode.text)) {
            if (isDef(oldCh) && isDef(ch)) {
                if (oldCh !== ch)
                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);
            }
            else if (isDef(ch)) {
                if (isDef(oldVnode.text))
                    api.setTextContent(elm, '');
                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);
            }
            else if (isDef(oldCh)) {
                removeVnodes(elm, oldCh, 0, oldCh.length - 1);
            }
            else if (isDef(oldVnode.text)) {
                api.setTextContent(elm, '');
            }
        }
        else if (oldVnode.text !== vnode.text) {
            api.setTextContent(elm, vnode.text);
        }
        if (isDef(hook) && isDef(i = hook.postpatch)) {
            i(oldVnode, vnode);
        }
    }
    return function patch(oldVnode, vnode) {
        var i, elm, parent;
        var insertedVnodeQueue = [];
        for (i = 0; i < cbs.pre.length; ++i)
            cbs.pre[i]();
        if (!isVnode(oldVnode)) {
            oldVnode = emptyNodeAt(oldVnode);
        }
        if (sameVnode(oldVnode, vnode)) {
            patchVnode(oldVnode, vnode, insertedVnodeQueue);
        }
        else {
            elm = oldVnode.elm;
            parent = api.parentNode(elm);
            createElm(vnode, insertedVnodeQueue);
            if (parent !== null) {
                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));
                removeVnodes(parent, [oldVnode], 0, 0);
            }
        }
        for (i = 0; i < insertedVnodeQueue.length; ++i) {
            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);
        }
        for (i = 0; i < cbs.post.length; ++i)
            cbs.post[i]();
        return vnode;
    };
}
exports.init = init;

},{"./h":30,"./htmldomapi":31,"./is":32,"./thunk":36,"./vnode":37}],36:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var h_1 = require("./h");
function copyToThunk(vnode, thunk) {
    thunk.elm = vnode.elm;
    vnode.data.fn = thunk.data.fn;
    vnode.data.args = thunk.data.args;
    thunk.data = vnode.data;
    thunk.children = vnode.children;
    thunk.text = vnode.text;
    thunk.elm = vnode.elm;
}
function init(thunk) {
    var cur = thunk.data;
    var vnode = cur.fn.apply(undefined, cur.args);
    copyToThunk(vnode, thunk);
}
function prepatch(oldVnode, thunk) {
    var i, old = oldVnode.data, cur = thunk.data;
    var oldArgs = old.args, args = cur.args;
    if (old.fn !== cur.fn || oldArgs.length !== args.length) {
        copyToThunk(cur.fn.apply(undefined, args), thunk);
        return;
    }
    for (i = 0; i < args.length; ++i) {
        if (oldArgs[i] !== args[i]) {
            copyToThunk(cur.fn.apply(undefined, args), thunk);
            return;
        }
    }
    copyToThunk(oldVnode, thunk);
}
exports.thunk = function thunk(sel, key, fn, args) {
    if (args === undefined) {
        args = fn;
        fn = key;
        key = undefined;
    }
    return h_1.h(sel, {
        key: key,
        hook: { init: init, prepatch: prepatch },
        fn: fn,
        args: args
    });
};
exports.default = exports.thunk;

},{"./h":30}],37:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function vnode(sel, data, children, text, elm) {
    var key = data === undefined ? undefined : data.key;
    return { sel: sel, data: data, children: children,
        text: text, elm: elm, key: key };
}
exports.vnode = vnode;
exports.default = vnode;

},{}],38:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const studyChapters_1 = require("./study/studyChapters");
const game = require("game");
const common_1 = require("common");
const util_1 = require("./util");
function renderRatingDiff(rd) {
    if (rd === 0)
        return snabbdom_1.h('span', '0');
    if (rd && rd > 0)
        return snabbdom_1.h('good', '+' + rd);
    if (rd && rd < 0)
        return snabbdom_1.h('bad', '' + (-rd));
    return;
}
function renderPlayer(ctrl, color) {
    const p = game.getPlayer(ctrl.data, color);
    if (p.user)
        return snabbdom_1.h('a.user-link.ulpt', {
            attrs: { href: '/@/' + p.user.username }
        }, [
            p.user.username, ' ',
            renderRatingDiff(p.ratingDiff)
        ]);
    return snabbdom_1.h('span', p.name ||
        (p.ai && 'Stockfish level ' + p.ai) ||
        (ctrl.study && studyChapters_1.findTag(ctrl.study.data.chapter.tags, color)) ||
        'Anonymous');
}
const advices = [
    ['inaccuracy', 'inaccuracies', '?!'],
    ['mistake', 'mistakes', '?'],
    ['blunder', 'blunders', '??']
];
function playerTable(ctrl, color) {
    const d = ctrl.data, trans = ctrl.trans.noarg;
    const acpl = d.analysis[color].acpl;
    return snabbdom_1.h('table', {
        hook: {
            insert(vnode) {
                window.lichess.powertip.manualUserIn(vnode.elm);
            }
        }
    }, [
        snabbdom_1.h('thead', snabbdom_1.h('tr', [
            snabbdom_1.h('td', snabbdom_1.h('i.is.color-icon.' + color)),
            snabbdom_1.h('th', renderPlayer(ctrl, color))
        ])),
        snabbdom_1.h('tbody', advices.map(a => {
            const nb = d.analysis[color][a[0]];
            const attrs = nb ? {
                'data-color': color,
                'data-symbol': a[2]
            } : {};
            return snabbdom_1.h('tr' + (nb ? '.symbol' : ''), { attrs }, [
                snabbdom_1.h('td', '' + nb),
                snabbdom_1.h('th', trans(a[1]))
            ]);
        }).concat(snabbdom_1.h('tr', [
            snabbdom_1.h('td', '' + (common_1.defined(acpl) ? acpl : '?')),
            snabbdom_1.h('th', trans('averageCentipawnLoss'))
        ])))
    ]);
}
function doRender(ctrl) {
    return snabbdom_1.h('div.advice-summary', {
        hook: {
            insert: vnode => {
                $(vnode.elm).on('click', 'tr.symbol', function () {
                    ctrl.jumpToGlyphSymbol($(this).data('color'), $(this).data('symbol'));
                });
            }
        }
    }, [
        playerTable(ctrl, 'white'),
        ctrl.study ? null : snabbdom_1.h('a.button.text', {
            class: { active: !!ctrl.retro },
            attrs: util_1.dataIcon('G'),
            hook: util_1.bind('click', ctrl.toggleRetro, ctrl.redraw)
        }, ctrl.trans.noarg('learnFromYourMistakes')),
        playerTable(ctrl, 'black')
    ]);
}
function render(ctrl) {
    if (ctrl.studyPractice || ctrl.embed)
        return;
    if (!ctrl.data.analysis || !ctrl.showComputer() || (ctrl.study && ctrl.study.vm.toolTab() !== 'serverEval'))
        return snabbdom_1.h('div.analyse__acpl');
    // don't cache until the analysis is complete!
    const buster = ctrl.data.analysis.partial ? Math.random() : '';
    let cacheKey = '' + buster + !!ctrl.retro;
    if (ctrl.study)
        cacheKey += ctrl.study.data.chapter.id;
    return snabbdom_1.h('div.analyse__acpl', snabbdom_1.thunk('div.advice-summary', doRender, [ctrl, cacheKey]));
}
exports.render = render;

},{"./study/studyChapters":95,"./util":110,"common":131,"game":138,"snabbdom":35}],39:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("common");
const snabbdom_1 = require("snabbdom");
const boolSetting_1 = require("./boolSetting");
const router_1 = require("game/router");
const util_1 = require("./util");
const pgnExport = require("./pgnExport");
const baseSpeeds = [{
        name: 'fast',
        delay: 1000
    }, {
        name: 'slow',
        delay: 5000
    }];
const realtimeSpeed = {
    name: 'realtimeReplay',
    delay: 'realtime'
};
const cplSpeed = {
    name: 'byCPL',
    delay: 'cpl'
};
function deleteButton(ctrl, userId) {
    const g = ctrl.data.game;
    if (g.source === 'import' &&
        g.importedBy && g.importedBy === userId)
        return snabbdom_1.h('form.delete', {
            attrs: {
                method: 'post',
                action: '/' + g.id + '/delete'
            },
            hook: util_1.bind('submit', _ => confirm(ctrl.trans.noarg('deleteThisImportedGame')))
        }, [
            snabbdom_1.h('button.button.text.thin', {
                attrs: {
                    type: 'submit',
                    'data-icon': 'q'
                }
            }, ctrl.trans.noarg('delete'))
        ]);
    return;
}
function autoplayButtons(ctrl) {
    const d = ctrl.data;
    const speeds = [
        ...baseSpeeds,
        ...(d.game.speed !== 'correspondence' && !common_1.empty(d.game.moveCentis) ? [realtimeSpeed] : []),
        ...(d.analysis ? [cplSpeed] : [])
    ];
    return snabbdom_1.h('div.autoplay', speeds.map(speed => {
        return snabbdom_1.h('a.button.button-empty', {
            hook: util_1.bind('click', () => ctrl.togglePlay(speed.delay), ctrl.redraw)
        }, ctrl.trans.noarg(speed.name));
    }));
}
function rangeConfig(read, write) {
    return {
        insert: vnode => {
            const el = vnode.elm;
            el.value = '' + read();
            el.addEventListener('input', _ => write(parseInt(el.value)));
            el.addEventListener('mouseout', _ => el.blur());
        }
    };
}
function formatHashSize(v) {
    if (v < 1000)
        return v + 'MB';
    else
        return Math.round(v / 1024) + 'GB';
}
function hiddenInput(name, value) {
    return snabbdom_1.h('input', {
        attrs: { 'type': 'hidden', name, value }
    });
}
function studyButton(ctrl) {
    if (ctrl.study && ctrl.embed && !ctrl.ongoing)
        return snabbdom_1.h('a.button.button-empty', {
            attrs: {
                href: '/study/' + ctrl.study.data.id + '#' + ctrl.study.currentChapter().id,
                target: '_blank',
                'data-icon': '4'
            }
        }, ctrl.trans.noarg('openStudy'));
    if (ctrl.study || ctrl.ongoing || ctrl.embed)
        return;
    return snabbdom_1.h('form', {
        attrs: {
            method: 'post',
            action: '/study/as'
        },
        hook: util_1.bind('submit', e => {
            const pgnInput = e.target.querySelector('input[name=pgn]');
            if (pgnInput)
                pgnInput.value = pgnExport.renderFullTxt(ctrl);
        })
    }, [
        !ctrl.synthetic ? hiddenInput('gameId', ctrl.data.game.id) : hiddenInput('pgn', ''),
        hiddenInput('orientation', ctrl.chessground.state.orientation),
        hiddenInput('variant', ctrl.data.game.variant.key),
        hiddenInput('fen', ctrl.tree.root.fen),
        snabbdom_1.h('button.button.button-empty', {
            attrs: {
                type: 'submit',
                'data-icon': '4'
            }
        }, ctrl.trans.noarg('toStudy'))
    ]);
}
class Ctrl {
    constructor() {
        this.open = false;
        this.toggle = () => this.open = !this.open;
    }
}
exports.Ctrl = Ctrl;
function view(ctrl) {
    const d = ctrl.data, noarg = ctrl.trans.noarg, canContinue = !ctrl.ongoing && !ctrl.embed && d.game.variant.key === 'standard', ceval = ctrl.getCeval(), mandatoryCeval = ctrl.mandatoryCeval();
    const tools = [
        snabbdom_1.h('div.action-menu__tools', [
            snabbdom_1.h('a.button.button-empty', {
                hook: util_1.bind('click', ctrl.flip),
                attrs: util_1.dataIcon('B')
            }, noarg('flipBoard')),
            ctrl.ongoing ? null : snabbdom_1.h('a.button.button-empty', {
                attrs: {
                    href: d.userAnalysis ? '/editor?fen=' + ctrl.node.fen : '/' + d.game.id + '/edit?fen=' + ctrl.node.fen,
                    rel: 'nofollow',
                    target: ctrl.embed ? '_blank' : '',
                    'data-icon': 'm'
                }
            }, noarg('boardEditor')),
            canContinue ? snabbdom_1.h('a.button.button-empty', {
                hook: util_1.bind('click', _ => $.modal($('.continue-with.g_' + d.game.id))),
                attrs: util_1.dataIcon('U')
            }, noarg('continueFromHere')) : null,
            studyButton(ctrl)
        ])
    ];
    const cevalConfig = (ceval && ceval.possible && ceval.allowed()) ? [
        snabbdom_1.h('h2', noarg('computerAnalysis'))
    ].concat([
        ctrlBoolSetting({
            name: 'enable',
            title: (mandatoryCeval ? "Required by practice mode" : window.lichess.engineName) + ' (Hotkey: z)',
            id: 'all',
            checked: ctrl.showComputer(),
            disabled: mandatoryCeval,
            change: ctrl.toggleComputer
        }, ctrl)
    ]).concat(ctrl.showComputer() ? [
        ctrlBoolSetting({
            name: 'bestMoveArrow',
            title: 'Hotkey: a',
            id: 'shapes',
            checked: ctrl.showAutoShapes(),
            change: ctrl.toggleAutoShapes
        }, ctrl),
        ctrlBoolSetting({
            name: 'evaluationGauge',
            id: 'gauge',
            checked: ctrl.showGauge(),
            change: ctrl.toggleGauge
        }, ctrl),
        ctrlBoolSetting({
            name: 'infiniteAnalysis',
            title: 'removesTheDepthLimit',
            id: 'infinite',
            checked: ceval.infinite(),
            change: ctrl.cevalSetInfinite
        }, ctrl),
        (id => {
            const max = 5;
            return snabbdom_1.h('div.setting', [
                snabbdom_1.h('label', { attrs: { 'for': id } }, noarg('multipleLines')),
                snabbdom_1.h('input#' + id, {
                    attrs: {
                        type: 'range',
                        min: 1,
                        max,
                        step: 1
                    },
                    hook: rangeConfig(() => parseInt(ceval.multiPv()), ctrl.cevalSetMultiPv)
                }),
                snabbdom_1.h('div.range_value', ceval.multiPv() + ' / ' + max)
            ]);
        })('analyse-multipv'),
        ceval.threads ? (id => {
            return snabbdom_1.h('div.setting', [
                snabbdom_1.h('label', { attrs: { 'for': id } }, noarg('cpus')),
                snabbdom_1.h('input#' + id, {
                    attrs: {
                        type: 'range',
                        min: 1,
                        max: ceval.maxThreads,
                        step: 1
                    },
                    hook: rangeConfig(() => parseInt(ceval.threads()), ctrl.cevalSetThreads)
                }),
                snabbdom_1.h('div.range_value', `${ceval.threads()} / ${ceval.maxThreads}`)
            ]);
        })('analyse-threads') : null,
        ceval.hashSize ? (id => snabbdom_1.h('div.setting', [
            snabbdom_1.h('label', { attrs: { 'for': id } }, noarg('memory')),
            snabbdom_1.h('input#' + id, {
                attrs: {
                    type: 'range',
                    min: 4,
                    max: Math.floor(Math.log2(ceval.maxHashSize)),
                    step: 1
                },
                hook: rangeConfig(() => Math.floor(Math.log2(parseInt(ceval.hashSize()))), v => ctrl.cevalSetHashSize(Math.pow(2, v)))
            }),
            snabbdom_1.h('div.range_value', formatHashSize(parseInt(ceval.hashSize())))
        ]))('analyse-memory') : null
    ] : []) : [];
    const notationConfig = [
        ctrlBoolSetting({
            name: noarg('inlineNotation'),
            title: 'Shift+I',
            id: 'inline',
            checked: ctrl.treeView.inline(),
            change(v) {
                ctrl.treeView.set(v);
                ctrl.actionMenu.toggle();
            }
        }, ctrl)
    ];
    return snabbdom_1.h('div.action-menu', tools
        .concat(notationConfig)
        .concat(cevalConfig)
        .concat(ctrl.mainline.length > 4 ? [snabbdom_1.h('h2', noarg('replayMode')), autoplayButtons(ctrl)] : [])
        .concat([
        deleteButton(ctrl, ctrl.opts.userId),
        canContinue ? snabbdom_1.h('div.continue-with.none.g_' + d.game.id, [
            snabbdom_1.h('a.button', {
                attrs: {
                    href: d.userAnalysis ? '/?fen=' + ctrl.encodeNodeFen() + '#ai' : router_1.cont(d, 'ai') + '?fen=' + ctrl.node.fen,
                    rel: 'nofollow'
                }
            }, noarg('playWithTheMachine')),
            snabbdom_1.h('a.button', {
                attrs: {
                    href: d.userAnalysis ? '/?fen=' + ctrl.encodeNodeFen() + '#friend' : router_1.cont(d, 'friend') + '?fen=' + ctrl.node.fen,
                    rel: 'nofollow'
                }
            }, noarg('playWithAFriend'))
        ]) : null
    ]));
}
exports.view = view;
function ctrlBoolSetting(o, ctrl) {
    return boolSetting_1.boolSetting(o, ctrl.trans, ctrl.redraw);
}

},{"./boolSetting":42,"./pgnExport":66,"./util":110,"common":131,"game/router":139,"snabbdom":35}],40:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ceval_1 = require("ceval");
const chess_1 = require("chess");
const util_1 = require("chessground/util");
function pieceDrop(key, role, color) {
    return {
        orig: key,
        piece: {
            color,
            role,
            scale: 0.8
        },
        brush: 'green'
    };
}
function makeShapesFromUci(color, uci, brush, modifiers) {
    const move = chess_1.decomposeUci(uci);
    if (uci[1] === '@')
        return [
            {
                orig: move[1],
                brush
            },
            pieceDrop(move[1], chess_1.sanToRole[uci[0].toUpperCase()], color)
        ];
    const shapes = [{
            orig: move[0],
            dest: move[1],
            brush,
            modifiers
        }];
    if (move[2])
        shapes.push(pieceDrop(move[1], move[2], color));
    return shapes;
}
exports.makeShapesFromUci = makeShapesFromUci;
function compute(ctrl) {
    const color = ctrl.chessground.state.movable.color;
    const rcolor = util_1.opposite(color);
    if (ctrl.practice) {
        if (ctrl.practice.hovering())
            return makeShapesFromUci(color, ctrl.practice.hovering().uci, 'green');
        const hint = ctrl.practice.hinting();
        if (hint) {
            if (hint.mode === 'move')
                return makeShapesFromUci(color, hint.uci, 'paleBlue');
            else
                return [{
                        orig: hint.uci[1] === '@' ? hint.uci.slice(2, 4) : hint.uci.slice(0, 2),
                        brush: 'paleBlue'
                    }];
        }
        return [];
    }
    const instance = ctrl.getCeval();
    const hovering = ctrl.explorer.hovering() || instance.hovering();
    const { eval: nEval = {}, fen: nFen, ceval: nCeval, threat: nThreat } = ctrl.node;
    let shapes = [];
    if (ctrl.retro && ctrl.retro.showBadNode()) {
        return makeShapesFromUci(color, ctrl.retro.showBadNode().uci, 'paleRed', {
            lineWidth: 8
        });
    }
    if (hovering && hovering.fen === nFen)
        shapes = shapes.concat(makeShapesFromUci(color, hovering.uci, 'paleBlue'));
    if (ctrl.showAutoShapes() && ctrl.showComputer()) {
        if (nEval.best)
            shapes = shapes.concat(makeShapesFromUci(rcolor, nEval.best, 'paleGreen'));
        if (!hovering) {
            let nextBest = ctrl.nextNodeBest();
            if (!nextBest && instance.enabled() && nCeval)
                nextBest = nCeval.pvs[0].moves[0];
            if (nextBest)
                shapes = shapes.concat(makeShapesFromUci(color, nextBest, 'paleBlue'));
            if (instance.enabled() && nCeval && nCeval.pvs[1] && !(ctrl.threatMode() && nThreat && nThreat.pvs.length > 2)) {
                nCeval.pvs.forEach(function (pv) {
                    if (pv.moves[0] === nextBest)
                        return;
                    const shift = ceval_1.winningChances.povDiff(color, nCeval.pvs[0], pv);
                    if (shift >= 0 && shift < 0.2) {
                        shapes = shapes.concat(makeShapesFromUci(color, pv.moves[0], 'paleGrey', {
                            lineWidth: Math.round(12 - shift * 50) // 12 to 2
                        }));
                    }
                });
            }
        }
    }
    if (instance.enabled() && ctrl.threatMode() && nThreat) {
        const [pv0, ...pv1s] = nThreat.pvs;
        shapes = shapes.concat(makeShapesFromUci(rcolor, pv0.moves[0], pv1s.length > 0 ? 'paleRed' : 'red'));
        pv1s.forEach(function (pv) {
            const shift = ceval_1.winningChances.povDiff(rcolor, pv, pv0);
            if (shift >= 0 && shift < 0.2) {
                shapes = shapes.concat(makeShapesFromUci(rcolor, pv.moves[0], 'paleRed', {
                    lineWidth: Math.round(11 - shift * 45) // 11 to 2
                }));
            }
        });
    }
    return shapes;
}
exports.compute = compute;

},{"ceval":113,"chess":129,"chessground/util":18}],41:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const control = require("./control");
class Autoplay {
    constructor(ctrl) {
        this.ctrl = ctrl;
    }
    move() {
        if (control.canGoForward(this.ctrl)) {
            control.next(this.ctrl);
            this.ctrl.redraw();
            return true;
        }
        this.stop();
        this.ctrl.redraw();
        return false;
    }
    evalToCp(node) {
        if (!node.eval)
            return node.ply % 2 ? 990 : -990; // game over
        if (node.eval.mate)
            return (node.eval.mate > 0) ? 990 : -990;
        return node.eval.cp;
    }
    nextDelay() {
        if (typeof this.delay === 'string' && !this.ctrl.onMainline)
            return 1500;
        else if (this.delay === 'realtime') {
            if (this.ctrl.node.ply < 2)
                return 1000;
            const centis = this.ctrl.data.game.moveCentis;
            if (!centis)
                return 1500;
            const time = centis[this.ctrl.node.ply - this.ctrl.tree.root.ply];
            // estimate 130ms of lag to improve playback.
            return time * 10 + 130 || 2000;
        }
        else if (this.delay === 'cpl') {
            const slowDown = 30;
            if (this.ctrl.node.ply >= this.ctrl.mainline.length - 1)
                return 0;
            const currPlyCp = this.evalToCp(this.ctrl.node);
            const nextPlyCp = this.evalToCp(this.ctrl.node.children[0]);
            return Math.max(500, Math.min(10000, Math.abs(currPlyCp - nextPlyCp) * slowDown));
        }
        else
            return this.delay;
    }
    schedule() {
        this.timeout = setTimeout(() => {
            if (this.move())
                this.schedule();
        }, this.nextDelay());
    }
    start(delay) {
        this.delay = delay;
        this.stop();
        this.schedule();
    }
    stop() {
        if (this.timeout) {
            clearTimeout(this.timeout);
            this.timeout = undefined;
        }
    }
    toggle(delay) {
        if (this.active(delay))
            this.stop();
        else {
            if (!this.active() && !this.move())
                this.ctrl.jump('');
            this.start(delay);
        }
    }
    active(delay) {
        return (!delay || delay === this.delay) && !!this.timeout;
    }
}
exports.Autoplay = Autoplay;

},{"./control":45}],42:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("./util");
function boolSetting(o, trans, redraw) {
    const fullId = 'abset-' + o.id;
    return snabbdom_1.h('div.setting.' + fullId, o.title ? {
        attrs: { title: trans.noarg(o.title) }
    } : {}, [
        snabbdom_1.h('label', { attrs: { 'for': fullId } }, trans.noarg(o.name)),
        snabbdom_1.h('div.switch', [
            snabbdom_1.h('input#' + fullId + '.cmn-toggle', {
                attrs: {
                    type: 'checkbox',
                    checked: o.checked
                },
                hook: util_1.bind('change', e => o.change(e.target.checked), redraw)
            }),
            snabbdom_1.h('label', { attrs: { 'for': fullId } })
        ])
    ]);
}
exports.boolSetting = boolSetting;

},{"./util":110,"snabbdom":35}],43:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const main_1 = require("./main");
function default_1(cfg) {
    const li = window.lichess, data = cfg.data;
    let analyse;
    li.socket = li.StrongSocket(data.url.socket, data.player.version, {
        options: {
            name: 'analyse'
        },
        params: {
            userTv: data.userTv && data.userTv.id
        },
        receive: function (t, d) {
            analyse.socketReceive(t, d);
        },
        events: {}
    });
    cfg.$side = $('.analyse__side').clone();
    cfg.$underboard = $('.analyse__underboard').clone();
    cfg.trans = li.trans(cfg.i18n);
    cfg.initialPly = 'url';
    cfg.socketSend = li.socket.send;
    analyse = main_1.start(cfg);
}
exports.default = default_1;
;

},{"./main":62}],44:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const studyChapters_1 = require("./study/studyChapters");
function renderClocks(ctrl) {
    if (ctrl.embed)
        return;
    const node = ctrl.node, clock = node.clock;
    if (!clock && clock !== 0)
        return;
    const whitePov = ctrl.bottomIsWhite(), parentClock = ctrl.tree.getParentClock(node, ctrl.path), isWhiteTurn = node.ply % 2 === 0, centis = [parentClock, clock];
    if (!isWhiteTurn)
        centis.reverse();
    const study = ctrl.study, relay = study && study.data.chapter.relay;
    if (relay && relay.lastMoveAt && relay.path === ctrl.path && ctrl.path !== '' && !studyChapters_1.isFinished(study.data.chapter)) {
        const spent = (Date.now() - relay.lastMoveAt) / 10;
        const i = isWhiteTurn ? 0 : 1;
        if (centis[i])
            centis[i] = Math.max(0, centis[i] - spent);
    }
    const showTenths = !ctrl.study || !ctrl.study.relay;
    return [
        renderClock(centis[0], isWhiteTurn, whitePov ? 'bottom' : 'top', showTenths),
        renderClock(centis[1], !isWhiteTurn, whitePov ? 'top' : 'bottom', showTenths)
    ];
}
exports.default = renderClocks;
function renderClock(centis, active, cls, showTenths) {
    return snabbdom_1.h('div.analyse__clock.' + cls, {
        class: { active },
    }, clockContent(centis, showTenths));
}
function clockContent(centis, showTenths) {
    if (!centis && centis !== 0)
        return ['-'];
    const date = new Date(centis * 10), millis = date.getUTCMilliseconds(), sep = ':', baseStr = pad2(date.getUTCMinutes()) + sep + pad2(date.getUTCSeconds());
    if (!showTenths || centis >= 360000)
        return [Math.floor(centis / 360000) + sep + baseStr];
    return centis >= 6000 ? [baseStr] : [
        baseStr,
        snabbdom_1.h('tenths', '.' + Math.floor(millis / 100).toString())
    ];
}
function pad2(num) {
    return (num < 10 ? '0' : '') + num;
}

},{"./study/studyChapters":95,"snabbdom":35}],45:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tree_1 = require("tree");
function canGoForward(ctrl) {
    return ctrl.node.children.length > 0;
}
exports.canGoForward = canGoForward;
function next(ctrl) {
    const child = ctrl.node.children[0];
    if (child)
        ctrl.userJumpIfCan(ctrl.path + child.id);
}
exports.next = next;
function prev(ctrl) {
    ctrl.userJumpIfCan(tree_1.path.init(ctrl.path));
}
exports.prev = prev;
function last(ctrl) {
    ctrl.userJumpIfCan(tree_1.path.fromNodeList(ctrl.mainline));
}
exports.last = last;
function first(ctrl) {
    ctrl.userJump(tree_1.path.root);
}
exports.first = first;
function enterVariation(ctrl) {
    let child = ctrl.node.children[1];
    if (child)
        ctrl.userJump(ctrl.path + child.id);
}
exports.enterVariation = enterVariation;
function exitVariation(ctrl) {
    if (ctrl.onMainline)
        return;
    let found, path = tree_1.path.root;
    ctrl.nodeList.slice(1, -1).forEach(function (n) {
        path += n.id;
        if (n.children[1])
            found = path;
    });
    if (found)
        ctrl.userJump(found);
}
exports.exitVariation = exitVariation;

},{"tree":142}],46:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const drag_1 = require("chessground/drag");
const chess_1 = require("chess");
function drag(ctrl, color, e) {
    if (e.button !== undefined && e.button !== 0)
        return; // only touch or left click
    if (ctrl.chessground.state.movable.color !== color)
        return;
    const el = e.target;
    const role = el.getAttribute('data-role'), number = el.getAttribute('data-nb');
    if (!role || !color || number === '0')
        return;
    e.stopPropagation();
    e.preventDefault();
    drag_1.dragNewPiece(ctrl.chessground.state, { color, role }, e);
}
exports.drag = drag;
function valid(chessground, possibleDrops, piece, pos) {
    if (piece.color !== chessground.state.movable.color)
        return false;
    if (piece.role === 'pawn' && (pos[1] === '1' || pos[1] === '8'))
        return false;
    const drops = chess_1.readDrops(possibleDrops);
    if (drops === null)
        return true;
    return drops.includes(pos);
}
exports.valid = valid;

},{"chess":129,"chessground/drag":7}],47:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const crazyCtrl_1 = require("./crazyCtrl");
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
const eventNames = ['mousedown', 'touchstart'];
const oKeys = ['pawn', 'knight', 'bishop', 'rook', 'queen'];
function default_1(ctrl, color, position) {
    if (!ctrl.node.crazy)
        return;
    const pocket = ctrl.node.crazy.pockets[color === 'white' ? 0 : 1];
    const dropped = ctrl.justDropped;
    let captured = ctrl.justCaptured;
    if (captured)
        captured.role = captured.promoted ? 'pawn' : captured.role;
    const activeColor = color === ctrl.turnColor();
    const usable = !ctrl.embed && activeColor;
    return snabbdom_1.h(`div.pocket.is2d.pocket-${position}.pos-${ctrl.bottomColor()}`, {
        class: { usable },
        hook: util_1.onInsert(el => {
            if (ctrl.embed)
                return;
            eventNames.forEach(name => {
                el.addEventListener(name, e => crazyCtrl_1.drag(ctrl, color, e));
            });
        })
    }, oKeys.map(role => {
        let nb = pocket[role] || 0;
        if (activeColor) {
            if (dropped === role)
                nb--;
            if (captured && captured.role === role)
                nb++;
        }
        return snabbdom_1.h('div.pocket-c1', snabbdom_1.h('div.pocket-c2', snabbdom_1.h('piece.' + role + '.' + color, {
            attrs: {
                'data-role': role,
                'data-color': color,
                'data-nb': nb
            }
        })));
    }));
}
exports.default = default_1;

},{"../util":110,"./crazyCtrl":46,"snabbdom":35}],48:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("chessground/util");
const chess_1 = require("chess");
const fen_1 = require("chessops/fen");
const variant_1 = require("chessops/variant");
const tree_1 = require("tree");
const keyboard = require("./keyboard");
const actionMenu_1 = require("./actionMenu");
const autoplay_1 = require("./autoplay");
const promotion = require("./promotion");
const util = require("./util");
const chessUtil = require("chess");
const common_1 = require("common");
const throttle_1 = require("common/throttle");
const storage_1 = require("common/storage");
const socket_1 = require("./socket");
const forecastCtrl_1 = require("./forecast/forecastCtrl");
const ceval_1 = require("ceval");
const explorerCtrl_1 = require("./explorer/explorerCtrl");
const game = require("game");
const crazyCtrl_1 = require("./crazy/crazyCtrl");
const studyCtrl_1 = require("./study/studyCtrl");
const fork_1 = require("./fork");
const retroCtrl_1 = require("./retrospect/retroCtrl");
const practiceCtrl_1 = require("./practice/practiceCtrl");
const evalCache_1 = require("./evalCache");
const autoShape_1 = require("./autoShape");
const nodeFinder_1 = require("./nodeFinder");
const speech = require("./speech");
const treeView_1 = require("./treeView/treeView");
const li = window.lichess;
class AnalyseCtrl {
    constructor(opts, redraw) {
        this.opts = opts;
        this.redraw = redraw;
        this.autoScrollRequested = false;
        this.redirecting = false;
        this.onMainline = true;
        // display flags
        this.flipped = false;
        this.showComments = true; // whether to display comments in the move tree
        this.showAutoShapes = storage_1.storedProp('show-auto-shapes', true);
        this.showGauge = storage_1.storedProp('show-gauge', true);
        this.showComputer = storage_1.storedProp('show-computer', true);
        this.keyboardHelp = location.hash === '#keyboard';
        this.threatMode = common_1.prop(false);
        this.cgVersion = {
            js: 1,
            dom: 1
        };
        this.setPath = (path) => {
            this.path = path;
            this.nodeList = this.tree.getNodeList(path);
            this.node = tree_1.ops.last(this.nodeList);
            this.mainline = tree_1.ops.mainlineNodeList(this.tree.root);
            this.onMainline = this.tree.pathIsMainline(path);
        };
        this.flip = () => {
            this.flipped = !this.flipped;
            this.chessground.set({
                orientation: this.bottomColor()
            });
            if (this.retro) {
                this.retro = undefined;
                this.toggleRetro();
            }
            if (this.practice)
                this.restartPractice();
            this.redraw();
        };
        this.bottomIsWhite = () => this.bottomColor() === 'white';
        this.getDests = throttle_1.default(800, () => {
            if (!this.embed && !common_1.defined(this.node.dests))
                this.socket.sendAnaDests({
                    variant: this.data.game.variant.key,
                    fen: this.node.fen,
                    path: this.path
                });
        });
        this.sound = li.sound ? {
            move: throttle_1.default(50, li.sound.move),
            capture: throttle_1.default(50, li.sound.capture),
            check: throttle_1.default(50, li.sound.check)
        } : {
            move: $.noop,
            capture: $.noop,
            check: $.noop
        };
        this.onChange = throttle_1.default(300, () => {
            li.pubsub.emit('analysis.change', this.node.fen, this.path, this.onMainline ? this.node.ply : false);
        });
        this.updateHref = li.debounce(() => {
            if (!this.opts.study)
                window.history.replaceState(null, '', '#' + this.node.ply);
        }, 750);
        this.playedLastMoveMyself = () => !!this.justPlayed && !!this.node.uci && this.node.uci.startsWith(this.justPlayed);
        this.userJump = (path) => {
            this.autoplay.stop();
            this.withCg(cg => cg.selectSquare(null));
            if (this.practice) {
                const prev = this.path;
                this.practice.preUserJump(prev, path);
                this.jump(path);
                this.practice.postUserJump(prev, this.path);
            }
            else
                this.jump(path);
        };
        this.jumpToMain = (ply) => {
            this.userJump(this.mainlinePathToPly(ply));
        };
        this.jumpToIndex = (index) => {
            this.jumpToMain(index + 1 + this.tree.root.ply);
        };
        this.userNewPiece = (piece, pos) => {
            if (crazyCtrl_1.valid(this.chessground, this.node.drops, piece, pos)) {
                this.justPlayed = chessUtil.roleToSan[piece.role] + '@' + pos;
                this.justDropped = piece.role;
                this.justCaptured = undefined;
                this.sound.move();
                const drop = {
                    role: piece.role,
                    pos,
                    variant: this.data.game.variant.key,
                    fen: this.node.fen,
                    path: this.path
                };
                this.socket.sendAnaDrop(drop);
                this.preparePremoving();
                this.redraw();
            }
            else
                this.jump(this.path);
        };
        this.userMove = (orig, dest, capture) => {
            this.justPlayed = orig;
            this.justDropped = undefined;
            const piece = this.chessground.state.pieces[dest];
            const isCapture = capture || (piece && piece.role == 'pawn' && orig[0] != dest[0]);
            this.sound[isCapture ? 'capture' : 'move']();
            if (!promotion.start(this, orig, dest, capture, this.sendMove))
                this.sendMove(orig, dest, capture);
        };
        this.sendMove = (orig, dest, capture, prom) => {
            const move = {
                orig,
                dest,
                variant: this.data.game.variant.key,
                fen: this.node.fen,
                path: this.path
            };
            if (capture)
                this.justCaptured = capture;
            if (prom)
                move.promotion = prom;
            if (this.practice)
                this.practice.onUserMove();
            this.socket.sendAnaMove(move);
            this.preparePremoving();
            this.redraw();
        };
        this.onPremoveSet = () => {
            if (this.study)
                this.study.onPremoveSet();
        };
        this.setAutoShapes = () => {
            this.withCg(cg => cg.setAutoShapes(autoShape_1.compute(this)));
        };
        this.onNewCeval = (ev, path, isThreat) => {
            this.tree.updateAt(path, (node) => {
                if (node.fen !== ev.fen && !isThreat)
                    return;
                if (isThreat) {
                    if (!node.threat || ceval_1.isEvalBetter(ev, node.threat) || node.threat.maxDepth < ev.maxDepth)
                        node.threat = ev;
                }
                else if (ceval_1.isEvalBetter(ev, node.ceval))
                    node.ceval = ev;
                else if (node.ceval && ev.maxDepth > node.ceval.maxDepth)
                    node.ceval.maxDepth = ev.maxDepth;
                if (path === this.path) {
                    this.setAutoShapes();
                    if (!isThreat) {
                        if (this.retro)
                            this.retro.onCeval();
                        if (this.practice)
                            this.practice.onCeval();
                        if (this.studyPractice)
                            this.studyPractice.onCeval();
                        this.evalCache.onCeval();
                        if (ev.cloud && ev.depth >= this.ceval.effectiveMaxDepth())
                            this.ceval.stop();
                    }
                    this.redraw();
                }
            });
        };
        this.startCeval = throttle_1.default(800, () => {
            if (this.ceval.enabled()) {
                if (this.canUseCeval()) {
                    this.ceval.start(this.path, this.nodeList, this.threatMode(), false);
                    this.evalCache.fetch(this.path, parseInt(this.ceval.multiPv()));
                }
                else
                    this.ceval.stop();
            }
        });
        this.toggleCeval = () => {
            if (!this.showComputer())
                return;
            this.ceval.toggle();
            this.setAutoShapes();
            this.startCeval();
            if (!this.ceval.enabled()) {
                this.threatMode(false);
                if (this.practice)
                    this.togglePractice();
            }
            this.redraw();
        };
        this.toggleThreatMode = () => {
            if (this.node.check)
                return;
            if (!this.ceval.enabled())
                this.ceval.toggle();
            if (!this.ceval.enabled())
                return;
            this.threatMode(!this.threatMode());
            if (this.threatMode() && this.practice)
                this.togglePractice();
            this.setAutoShapes();
            this.startCeval();
            this.redraw();
        };
        this.disableThreatMode = () => {
            return !!this.practice;
        };
        this.mandatoryCeval = () => {
            return !!this.studyPractice;
        };
        this.cevalSetMultiPv = (v) => {
            this.ceval.multiPv(v);
            this.tree.removeCeval();
            this.cevalReset();
        };
        this.cevalSetThreads = (v) => {
            if (!this.ceval.threads)
                return;
            this.ceval.threads(v);
            this.cevalReset();
        };
        this.cevalSetHashSize = (v) => {
            if (!this.ceval.hashSize)
                return;
            this.ceval.hashSize(v);
            this.cevalReset();
        };
        this.cevalSetInfinite = (v) => {
            this.ceval.infinite(v);
            this.cevalReset();
        };
        this.hasFullComputerAnalysis = () => {
            return Object.keys(this.mainline[0].eval || {}).length > 0;
        };
        this.toggleAutoShapes = (v) => {
            this.showAutoShapes(v);
            this.resetAutoShapes();
        };
        this.toggleGauge = () => {
            this.showGauge(!this.showGauge());
        };
        this.toggleComputer = () => {
            if (this.ceval.enabled())
                this.toggleCeval();
            const value = !this.showComputer();
            this.showComputer(value);
            if (!value && this.practice)
                this.togglePractice();
            this.onToggleComputer();
            li.pubsub.emit('analysis.comp.toggle', value);
        };
        this.canEvalGet = (node) => this.opts.study || node.ply < 15;
        this.toggleRetro = () => {
            if (this.retro)
                this.retro = undefined;
            else {
                this.retro = retroCtrl_1.make(this);
                if (this.practice)
                    this.togglePractice();
                if (this.explorer.enabled())
                    this.toggleExplorer();
            }
            this.setAutoShapes();
        };
        this.toggleExplorer = () => {
            if (this.practice)
                this.togglePractice();
            this.explorer.toggle();
        };
        this.togglePractice = () => {
            if (this.practice || !this.ceval.possible)
                this.practice = undefined;
            else {
                if (this.retro)
                    this.toggleRetro();
                if (this.explorer.enabled())
                    this.toggleExplorer();
                this.practice = practiceCtrl_1.make(this, () => {
                    // push to 20 to store AI moves in the cloud
                    // lower to 18 after task completion (or failure)
                    return this.studyPractice && this.studyPractice.success() === null ? 20 : 18;
                });
            }
            this.setAutoShapes();
        };
        this.gamebookPlay = () => {
            return this.study && this.study.gamebookPlay();
        };
        this.isGamebook = () => !!(this.study && this.study.data.chapter.gamebook);
        this.data = opts.data;
        this.element = opts.element;
        this.embed = opts.embed;
        this.trans = opts.trans;
        this.treeView = treeView_1.ctrl(opts.embed ? 'inline' : 'column');
        if (this.data.forecast)
            this.forecast = forecastCtrl_1.make(this.data.forecast, this.data, redraw);
        if (li.AnalyseNVUI)
            this.nvui = li.AnalyseNVUI(redraw);
        this.instanciateEvalCache();
        this.initialize(this.data, false);
        this.instanciateCeval();
        this.initialPath = tree_1.path.root;
        if (opts.initialPly) {
            const loc = window.location, intHash = loc.hash === '#last' ? this.tree.lastPly() : parseInt(loc.hash.substr(1)), plyStr = opts.initialPly === 'url' ? (intHash || '') : opts.initialPly;
            // remove location hash - http://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-with-javascript-without-page-refresh/5298684#5298684
            if (intHash)
                window.history.pushState("", document.title, loc.pathname + loc.search);
            const mainline = tree_1.ops.mainlineNodeList(this.tree.root);
            if (plyStr === 'last')
                this.initialPath = tree_1.path.fromNodeList(mainline);
            else {
                const ply = parseInt(plyStr);
                if (ply)
                    this.initialPath = tree_1.ops.takePathWhile(mainline, n => n.ply <= ply);
            }
        }
        this.setPath(this.initialPath);
        this.showGround();
        this.onToggleComputer();
        this.startCeval();
        this.explorer.setNode();
        this.study = opts.study ? studyCtrl_1.default(opts.study, this, (opts.tagTypes || '').split(','), opts.practice, opts.relay) : undefined;
        this.studyPractice = this.study ? this.study.practice : undefined;
        if (location.hash === '#practice' || (this.study && this.study.data.chapter.practice))
            this.togglePractice();
        else if (location.hash === '#menu')
            li.requestIdleCallback(this.actionMenu.toggle);
        keyboard.bind(this);
        li.pubsub.on('jump', (ply) => {
            this.jumpToMain(parseInt(ply));
            this.redraw();
        });
        li.pubsub.on('sound_set', (set) => {
            if (!this.music && set === 'music')
                li.loadScript('javascripts/music/replay.js').then(() => {
                    this.music = window.lichessReplayMusic();
                });
            if (this.music && set !== 'music')
                this.music = null;
        });
        li.pubsub.on('analysis.change.trigger', this.onChange);
        li.pubsub.on('analysis.chart.click', index => {
            this.jumpToIndex(index);
            this.redraw();
        });
        li.sound && speech.setup();
    }
    initialize(data, merge) {
        this.data = data;
        this.synthetic = data.game.id === 'synthetic';
        this.ongoing = !this.synthetic && game.playable(data);
        const prevTree = merge && this.tree.root;
        this.tree = tree_1.build(tree_1.ops.reconstruct(this.data.treeParts));
        if (prevTree)
            this.tree.merge(prevTree);
        this.actionMenu = new actionMenu_1.Ctrl();
        this.autoplay = new autoplay_1.Autoplay(this);
        if (this.socket)
            this.socket.clearCache();
        else
            this.socket = socket_1.make(this.opts.socketSend, this);
        this.explorer = explorerCtrl_1.default(this, this.opts.explorer, this.explorer ? this.explorer.allowed() : !this.embed);
        this.gamePath = this.synthetic || this.ongoing ? undefined :
            tree_1.path.fromNodeList(tree_1.ops.mainlineNodeList(this.tree.root));
        this.fork = fork_1.make(this);
    }
    topColor() {
        return util_1.opposite(this.bottomColor());
    }
    bottomColor() {
        return this.flipped ? util_1.opposite(this.data.orientation) : this.data.orientation;
    }
    getOrientation() {
        return this.bottomColor();
    }
    getNode() {
        return this.node;
    }
    turnColor() {
        return util.plyColor(this.node.ply);
    }
    togglePlay(delay) {
        this.autoplay.toggle(delay);
        this.actionMenu.open = false;
    }
    uciToLastMove(uci) {
        if (!uci)
            return;
        if (uci[1] === '@')
            return [uci.substr(2, 2), uci.substr(2, 2)];
        return [uci.substr(0, 2), uci.substr(2, 2)];
    }
    ;
    showGround() {
        this.onChange();
        if (!common_1.defined(this.node.dests))
            this.getDests();
        this.withCg(cg => {
            cg.set(this.makeCgOpts());
            this.setAutoShapes();
            if (this.node.shapes)
                cg.setShapes(this.node.shapes);
        });
    }
    makeCgOpts() {
        const node = this.node, color = this.turnColor(), dests = chessUtil.readDests(this.node.dests), drops = chessUtil.readDrops(this.node.drops), movableColor = (this.practice || this.gamebookPlay()) ? this.bottomColor() : (!this.embed && ((dests && Object.keys(dests).length > 0) ||
            drops === null || drops.length) ? color : undefined), config = {
            fen: node.fen,
            turnColor: color,
            movable: this.embed ? {
                color: undefined,
                dests: {}
            } : {
                color: movableColor,
                dests: (movableColor === color ? (dests || {}) : {})
            },
            check: !!node.check,
            lastMove: this.uciToLastMove(node.uci)
        };
        if (!dests && !node.check) {
            // premove while dests are loading from server
            // can't use when in check because it highlights the wrong king
            config.turnColor = util_1.opposite(color);
            config.movable.color = color;
        }
        config.premovable = {
            enabled: config.movable.color && config.turnColor !== config.movable.color
        };
        this.cgConfig = config;
        return config;
    }
    autoScroll() {
        this.autoScrollRequested = true;
    }
    jump(path) {
        const pathChanged = path !== this.path, isForwardStep = pathChanged && path.length == this.path.length + 2;
        this.setPath(path);
        this.showGround();
        if (pathChanged) {
            const playedMyself = this.playedLastMoveMyself();
            if (this.study)
                this.study.setPath(path, this.node, playedMyself);
            if (isForwardStep) {
                if (!this.node.uci)
                    this.sound.move(); // initial position
                else if (!playedMyself) {
                    if (this.node.san.includes('x'))
                        this.sound.capture();
                    else
                        this.sound.move();
                }
                if (/\+|\#/.test(this.node.san))
                    this.sound.check();
            }
            this.threatMode(false);
            this.ceval.stop();
            this.startCeval();
            speech.node(this.node);
        }
        this.justPlayed = this.justDropped = this.justCaptured = undefined;
        this.explorer.setNode();
        this.updateHref();
        this.autoScroll();
        promotion.cancel(this);
        if (pathChanged) {
            if (this.retro)
                this.retro.onJump();
            if (this.practice)
                this.practice.onJump();
            if (this.study)
                this.study.onJump();
        }
        if (this.music)
            this.music.jump(this.node);
        li.pubsub.emit('ply', this.node.ply);
    }
    canJumpTo(path) {
        return !this.study || this.study.canJumpTo(path);
    }
    userJumpIfCan(path) {
        if (this.canJumpTo(path))
            this.userJump(path);
    }
    mainlinePathToPly(ply) {
        return tree_1.ops.takePathWhile(this.mainline, n => n.ply <= ply);
    }
    jumpToGlyphSymbol(color, symbol) {
        const node = nodeFinder_1.nextGlyphSymbol(color, symbol, this.mainline, this.node.ply);
        if (node)
            this.jumpToMain(node.ply);
        this.redraw();
    }
    reloadData(data, merge) {
        this.initialize(data, merge);
        this.redirecting = false;
        this.setPath(tree_1.path.root);
        this.instanciateCeval();
        this.instanciateEvalCache();
        this.cgVersion.js++;
    }
    changePgn(pgn) {
        this.redirecting = true;
        $.ajax({
            url: '/analysis/pgn',
            method: 'post',
            data: { pgn },
            success: (data) => {
                this.reloadData(data, false);
                this.userJump(this.mainlinePathToPly(this.tree.lastPly()));
                this.redraw();
            },
            error: error => {
                console.log(error);
                this.redirecting = false;
                this.redraw();
            }
        });
    }
    changeFen(fen) {
        this.redirecting = true;
        window.location.href = '/analysis/' + this.data.game.variant.key + '/' + encodeURIComponent(fen).replace(/%20/g, '_').replace(/%2F/g, '/');
    }
    preparePremoving() {
        this.chessground.set({
            turnColor: this.chessground.state.movable.color,
            movable: {
                color: util_1.opposite(this.chessground.state.movable.color)
            },
            premovable: {
                enabled: true
            }
        });
    }
    addNode(node, path) {
        const newPath = this.tree.addNode(node, path);
        if (!newPath) {
            console.log("Can't addNode", node, path);
            return this.redraw();
        }
        this.jump(newPath);
        this.redraw();
        this.chessground.playPremove();
    }
    addDests(dests, path, opening) {
        this.tree.addDests(dests, path, opening);
        if (path === this.path) {
            this.showGround();
            // this.redraw();
            if (this.gameOver())
                this.ceval.stop();
        }
        this.withCg(cg => cg.playPremove());
    }
    deleteNode(path) {
        const node = this.tree.nodeAtPath(path);
        if (!node)
            return;
        const count = tree_1.ops.countChildrenAndComments(node);
        if ((count.nodes >= 10 || count.comments > 0) && !confirm('Delete ' + util.plural('move', count.nodes) + (count.comments ? ' and ' + util.plural('comment', count.comments) : '') + '?'))
            return;
        this.tree.deleteNodeAt(path);
        if (tree_1.path.contains(this.path, path))
            this.userJump(tree_1.path.init(path));
        else
            this.jump(this.path);
        if (this.study)
            this.study.deleteNode(path);
    }
    promote(path, toMainline) {
        this.tree.promoteAt(path, toMainline);
        this.jump(path);
        if (this.study)
            this.study.promote(path, toMainline);
    }
    forceVariation(path, force) {
        this.tree.forceVariationAt(path, force);
        this.jump(path);
        if (this.study)
            this.study.forceVariation(path, force);
    }
    reset() {
        this.showGround();
        this.redraw();
    }
    encodeNodeFen() {
        return this.node.fen.replace(/\s/g, '_');
    }
    currentEvals() {
        return {
            server: this.node.eval,
            client: this.node.ceval
        };
    }
    nextNodeBest() {
        return tree_1.ops.withMainlineChild(this.node, (n) => n.eval ? n.eval.best : undefined);
    }
    instanciateCeval() {
        if (this.ceval)
            this.ceval.destroy();
        const cfg = {
            variant: this.data.game.variant,
            possible: !this.embed && (this.synthetic || !game.playable(this.data)),
            emit: (ev, work) => {
                this.onNewCeval(ev, work.path, work.threatMode);
            },
            setAutoShapes: this.setAutoShapes,
            redraw: this.redraw
        };
        if (this.opts.study && this.opts.practice) {
            cfg.storageKeyPrefix = 'practice';
            cfg.multiPvDefault = 1;
        }
        this.ceval = ceval_1.ctrl(cfg);
    }
    getCeval() {
        return this.ceval;
    }
    gameOver(node) {
        const n = node || this.node;
        if (n.dests !== '' || n.drops)
            return false;
        if (n.check)
            return 'checkmate';
        return 'draw';
    }
    position(node) {
        const setup = fen_1.parseFen(node.fen).unwrap();
        return variant_1.setupPosition(chess_1.variantToRules(this.data.game.variant.key), setup);
    }
    canUseCeval() {
        return !this.gameOver() && !this.node.threefold;
    }
    cevalReset() {
        this.ceval.stop();
        if (!this.ceval.enabled())
            this.ceval.toggle();
        this.startCeval();
        this.redraw();
    }
    showEvalGauge() {
        return this.hasAnyComputerAnalysis() && this.showGauge() && !this.gameOver() && this.showComputer();
    }
    hasAnyComputerAnalysis() {
        return this.data.analysis ? true : this.ceval.enabled();
    }
    resetAutoShapes() {
        if (this.showAutoShapes())
            this.setAutoShapes();
        else
            this.chessground && this.chessground.setAutoShapes([]);
    }
    onToggleComputer() {
        if (!this.showComputer()) {
            this.tree.removeComputerVariations();
            if (this.ceval.enabled())
                this.toggleCeval();
            this.chessground && this.chessground.setAutoShapes([]);
        }
        else
            this.resetAutoShapes();
    }
    mergeAnalysisData(data) {
        if (this.study && this.study.data.chapter.id !== data.ch)
            return;
        this.tree.merge(data.tree);
        if (!this.showComputer())
            this.tree.removeComputerVariations();
        this.data.analysis = data.analysis;
        if (data.analysis)
            data.analysis.partial = !!tree_1.ops.findInMainline(data.tree, n => !n.eval && !!n.children.length);
        if (data.division)
            this.data.game.division = data.division;
        if (this.retro)
            this.retro.onMergeAnalysisData();
        if (this.study)
            this.study.serverEval.onMergeAnalysisData();
        li.pubsub.emit('analysis.server.progress', this.data);
        this.redraw();
    }
    playUci(uci) {
        const move = chessUtil.decomposeUci(uci);
        if (uci[1] === '@')
            this.chessground.newPiece({
                color: this.chessground.state.movable.color,
                role: chessUtil.sanToRole[uci[0]]
            }, move[1]);
        else {
            const capture = this.chessground.state.pieces[move[1]];
            const promotion = move[2] && chessUtil.sanToRole[move[2].toUpperCase()];
            this.sendMove(move[0], move[1], capture, promotion);
        }
    }
    explorerMove(uci) {
        this.playUci(uci);
        this.explorer.loading(true);
    }
    playBestMove() {
        const uci = this.nextNodeBest() || (this.node.ceval && this.node.ceval.pvs[0].moves[0]);
        if (uci)
            this.playUci(uci);
    }
    instanciateEvalCache() {
        this.evalCache = evalCache_1.make({
            variant: this.data.game.variant.key,
            canGet: this.canEvalGet,
            canPut: (node) => {
                return this.data.evalPut && this.canEvalGet(node) && (
                // if not in study, only put decent opening moves
                this.opts.study || (!node.ceval.mate && Math.abs(node.ceval.cp) < 99));
            },
            getNode: () => this.node,
            send: this.opts.socketSend,
            receive: this.onNewCeval
        });
    }
    restartPractice() {
        this.practice = undefined;
        this.togglePractice();
    }
    withCg(f) {
        if (this.chessground && this.cgVersion.js === this.cgVersion.dom)
            return f(this.chessground);
    }
}
exports.default = AnalyseCtrl;
;

},{"./actionMenu":39,"./autoShape":40,"./autoplay":41,"./crazy/crazyCtrl":46,"./evalCache":49,"./explorer/explorerCtrl":51,"./forecast/forecastCtrl":56,"./fork":58,"./keyboard":61,"./nodeFinder":65,"./practice/practiceCtrl":67,"./promotion":69,"./retrospect/retroCtrl":70,"./socket":73,"./speech":74,"./study/studyCtrl":97,"./treeView/treeView":109,"./util":110,"ceval":113,"chess":129,"chessground/util":18,"chessops/fen":23,"chessops/variant":29,"common":131,"common/storage":135,"common/throttle":137,"game":138,"tree":142}],49:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("common");
const throttle_1 = require("common/throttle");
const evalPutMinDepth = 20;
const evalPutMinNodes = 3e6;
const evalPutMaxMoves = 10;
function qualityCheck(ev) {
    // below 500k nodes, the eval might come from an imminent threefold repetition
    // and should therefore be ignored
    return ev.nodes > 500000 && (ev.depth >= evalPutMinDepth || ev.nodes > evalPutMinNodes);
}
// from client eval to server eval
function toPutData(variant, ev) {
    const data = {
        fen: ev.fen,
        knodes: Math.round(ev.nodes / 1000),
        depth: ev.depth,
        pvs: ev.pvs.map(pv => {
            return {
                cp: pv.cp,
                mate: pv.mate,
                moves: pv.moves.slice(0, evalPutMaxMoves).join(' ')
            };
        })
    };
    if (variant !== 'standard')
        data.variant = variant;
    return data;
}
// from server eval to client eval
function toCeval(e) {
    const res = {
        fen: e.fen,
        nodes: e.knodes * 1000,
        depth: e.depth,
        pvs: e.pvs.map(function (from) {
            const to = {
                moves: from.moves.split(' ')
            };
            if (common_1.defined(from.cp))
                to.cp = from.cp;
            else
                to.mate = from.mate;
            return to;
        }),
        cloud: true
    };
    if (common_1.defined(res.pvs[0].cp))
        res.cp = res.pvs[0].cp;
    else
        res.mate = res.pvs[0].mate;
    res.cloud = true;
    return res;
}
function make(opts) {
    const fenFetched = [];
    function hasFetched(node) {
        return fenFetched.includes(node.fen);
    }
    ;
    let upgradable = common_1.prop(false);
    return {
        onCeval: throttle_1.default(500, function () {
            const node = opts.getNode(), ev = node.ceval;
            if (ev && !ev.cloud && hasFetched(node) && qualityCheck(ev) && opts.canPut(node)) {
                opts.send("evalPut", toPutData(opts.variant, ev));
            }
        }),
        fetch(path, multiPv) {
            const node = opts.getNode();
            if ((node.ceval && node.ceval.cloud) || !opts.canGet(node))
                return;
            if (hasFetched(node))
                return;
            fenFetched.push(node.fen);
            const obj = {
                fen: node.fen,
                path
            };
            if (opts.variant !== 'standard')
                obj.variant = opts.variant;
            if (multiPv > 1)
                obj.mpv = multiPv;
            if (upgradable())
                obj.up = true;
            opts.send("evalGet", obj);
        },
        onCloudEval(serverEval) {
            opts.receive(toCeval(serverEval), serverEval.path);
        },
        upgradable
    };
}
exports.make = make;
;

},{"common":131,"common/throttle":137}],50:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const common_1 = require("common");
const storage_1 = require("common/storage");
const util_1 = require("../util");
const allSpeeds = ['bullet', 'blitz', 'rapid', 'classical'];
const allRatings = [1600, 1800, 2000, 2200, 2500];
function controller(game, onClose, trans, redraw) {
    const variant = (game.variant.key === 'fromPosition') ? 'standard' : game.variant.key;
    const available = ['lichess'];
    if (variant === 'standard')
        available.unshift('masters');
    const data = {
        open: common_1.prop(false),
        db: {
            available,
            selected: available.length > 1 ? storage_1.storedProp('explorer.db.' + variant, available[0]) : function () {
                return available[0];
            }
        },
        rating: {
            available: allRatings,
            selected: storage_1.storedJsonProp('explorer.rating', allRatings)
        },
        speed: {
            available: allSpeeds,
            selected: storage_1.storedJsonProp('explorer.speed', allSpeeds)
        }
    };
    const toggleMany = function (c, value) {
        if (!c().includes(value))
            c(c().concat([value]));
        else if (c().length > 1)
            c(c().filter(v => v !== value));
    };
    return {
        trans,
        redraw,
        data,
        toggleOpen() {
            data.open(!data.open());
            if (!data.open())
                onClose();
        },
        toggleDb(db) {
            data.db.selected(db);
        },
        toggleRating(v) { toggleMany(data.rating.selected, v); },
        toggleSpeed(v) { toggleMany(data.speed.selected, v); },
        fullHouse() {
            return data.db.selected() === 'masters' || (data.rating.selected().length === data.rating.available.length &&
                data.speed.selected().length === data.speed.available.length);
        }
    };
}
exports.controller = controller;
function view(ctrl) {
    const d = ctrl.data;
    return [
        snabbdom_1.h('section.db', [
            snabbdom_1.h('label', ctrl.trans.noarg('database')),
            snabbdom_1.h('div.choices', d.db.available.map(function (s) {
                return snabbdom_1.h('span', {
                    class: { selected: d.db.selected() === s },
                    hook: util_1.bind('click', _ => ctrl.toggleDb(s), ctrl.redraw)
                }, s);
            }))
        ]),
        d.db.selected() === 'masters' ? snabbdom_1.h('div.masters.message', [
            snabbdom_1.h('i', { attrs: util_1.dataIcon('C') }),
            snabbdom_1.h('p', ctrl.trans('masterDbExplanation', 2200, '1952', '2019'))
        ]) : snabbdom_1.h('div', [
            snabbdom_1.h('section.rating', [
                snabbdom_1.h('label', ctrl.trans.noarg('averageElo')),
                snabbdom_1.h('div.choices', d.rating.available.map(function (r) {
                    return snabbdom_1.h('span', {
                        class: { selected: d.rating.selected().includes(r) },
                        hook: util_1.bind('click', _ => ctrl.toggleRating(r), ctrl.redraw)
                    }, r.toString());
                }))
            ]),
            snabbdom_1.h('section.speed', [
                snabbdom_1.h('label', ctrl.trans.noarg('timeControl')),
                snabbdom_1.h('div.choices', d.speed.available.map(function (s) {
                    return snabbdom_1.h('span', {
                        class: { selected: d.speed.selected().includes(s) },
                        hook: util_1.bind('click', _ => ctrl.toggleSpeed(s), ctrl.redraw)
                    }, s);
                }))
            ])
        ]),
        snabbdom_1.h('section.save', snabbdom_1.h('button.button.button-green.text', {
            attrs: util_1.dataIcon('E'),
            hook: util_1.bind('click', ctrl.toggleOpen)
        }, ctrl.trans.noarg('allSet')))
    ];
}
exports.view = view;

},{"../util":110,"common":131,"common/storage":135,"snabbdom":35}],51:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("common");
const storage_1 = require("common/storage");
const util_1 = require("chessground/util");
const explorerConfig_1 = require("./explorerConfig");
const xhr = require("./explorerXhr");
const explorerUtil_1 = require("./explorerUtil");
const gameUtil = require("game");
function pieceCount(fen) {
    const parts = fen.split(/\s/);
    return parts[0].split(/[nbrqkp]/i).length - 1;
}
function tablebasePieces(variant) {
    switch (variant) {
        case 'standard':
        case 'fromPosition':
        case 'chess960':
            return 7;
        case 'atomic':
        case 'antichess':
            return 6;
        default:
            return 0;
    }
}
function tablebaseGuaranteed(variant, fen) {
    return pieceCount(fen) <= tablebasePieces(variant);
}
exports.tablebaseGuaranteed = tablebaseGuaranteed;
function tablebaseRelevant(variant, fen) {
    return pieceCount(fen) - 1 <= tablebasePieces(variant);
}
function default_1(root, opts, allow) {
    const allowed = common_1.prop(allow), enabled = root.embed ? common_1.prop(false) : storage_1.storedProp('explorer.enabled', false), loading = common_1.prop(true), failing = common_1.prop(false), hovering = common_1.prop(null), movesAway = common_1.prop(0), gameMenu = common_1.prop(null);
    if ((location.hash === '#explorer' || location.hash === '#opening') && !root.embed)
        enabled(true);
    let cache = {};
    function onConfigClose() {
        root.redraw();
        cache = {};
        setNode();
    }
    const data = root.data, withGames = root.synthetic || gameUtil.replayable(data) || !!data.opponent.ai, effectiveVariant = data.game.variant.key === 'fromPosition' ? 'standard' : data.game.variant.key, config = explorerConfig_1.controller(data.game, onConfigClose, root.trans, root.redraw);
    const fetch = window.lichess.debounce(function () {
        const fen = root.node.fen;
        const request = (withGames && tablebaseRelevant(effectiveVariant, fen)) ?
            xhr.tablebase(opts.tablebaseEndpoint, effectiveVariant, fen) :
            xhr.opening(opts.endpoint, effectiveVariant, fen, config.data, withGames);
        request.then((res) => {
            cache[fen] = res;
            movesAway(res.moves.length ? 0 : movesAway() + 1);
            loading(false);
            failing(false);
            root.redraw();
        }, () => {
            loading(false);
            failing(true);
            root.redraw();
        });
    }, 250, true);
    const empty = {
        opening: true,
        moves: {}
    };
    function setNode() {
        if (!enabled())
            return;
        gameMenu(null);
        const node = root.node;
        if (node.ply > 50 && !tablebaseRelevant(effectiveVariant, node.fen)) {
            cache[node.fen] = empty;
        }
        const cached = cache[root.node.fen];
        if (cached) {
            movesAway(cached.moves.length ? 0 : movesAway() + 1);
            loading(false);
            failing(false);
        }
        else {
            loading(true);
            fetch();
        }
    }
    ;
    return {
        allowed,
        enabled,
        setNode,
        loading,
        failing,
        hovering,
        movesAway,
        config,
        withGames,
        gameMenu,
        current: () => cache[root.node.fen],
        toggle() {
            movesAway(0);
            enabled(!enabled());
            setNode();
            root.autoScroll();
        },
        disable() {
            if (enabled()) {
                enabled(false);
                gameMenu(null);
                root.autoScroll();
            }
        },
        setHovering(fen, uci) {
            hovering(uci ? {
                fen,
                uci,
            } : null);
            root.setAutoShapes();
        },
        fetchMasterOpening: (function () {
            const masterCache = {};
            return (fen) => {
                if (masterCache[fen])
                    return $.Deferred().resolve(masterCache[fen]).promise();
                return xhr.opening(opts.endpoint, 'standard', fen, {
                    db: {
                        selected: common_1.prop('masters')
                    }
                }, false).then((res) => {
                    masterCache[fen] = res;
                    return res;
                });
            };
        })(),
        fetchTablebaseHit(fen) {
            return xhr.tablebase(opts.tablebaseEndpoint, effectiveVariant, fen).then((res) => {
                const move = res.moves[0];
                if (move && move.dtz == null)
                    throw 'unknown tablebase position';
                return {
                    fen: fen,
                    best: move && move.uci,
                    winner: res.checkmate ? util_1.opposite(explorerUtil_1.colorOf(fen)) : (res.stalemate ? undefined : explorerUtil_1.winnerOf(fen, move))
                };
            });
        }
    };
}
exports.default = default_1;
;

},{"./explorerConfig":50,"./explorerUtil":52,"./explorerXhr":54,"chessground/util":18,"common":131,"common/storage":135,"game":138}],52:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function colorOf(fen) {
    return fen.split(' ')[1] === 'w' ? 'white' : 'black';
}
exports.colorOf = colorOf;
function winnerOf(fen, move) {
    const stm = fen.split(' ')[1];
    if ((stm[0] == 'w' && move.wdl < 0) || (stm[0] == 'b' && move.wdl > 0))
        return 'white';
    if ((stm[0] == 'b' && move.wdl < 0) || (stm[0] == 'w' && move.wdl > 0))
        return 'black';
}
exports.winnerOf = winnerOf;

},{}],53:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const explorerConfig_1 = require("./explorerConfig");
const util_1 = require("../util");
const explorerUtil_1 = require("./explorerUtil");
const interfaces_1 = require("./interfaces");
function resultBar(move) {
    const sum = move.white + move.draws + move.black;
    function section(key) {
        const percent = move[key] * 100 / sum;
        return percent === 0 ? null : snabbdom_1.h('span.' + key, {
            attrs: { style: 'width: ' + (Math.round(move[key] * 1000 / sum) / 10) + '%' },
        }, percent > 12 ? Math.round(percent) + (percent > 20 ? '%' : '') : '');
    }
    return snabbdom_1.h('div.bar', ['white', 'draws', 'black'].map(section));
}
let lastShow;
function moveTableAttributes(ctrl, fen) {
    return {
        attrs: { 'data-fen': fen },
        hook: {
            insert: vnode => {
                const el = vnode.elm;
                el.addEventListener('mouseover', e => {
                    ctrl.explorer.setHovering($(el).attr('data-fen'), $(e.target).parents('tr').attr('data-uci'));
                });
                el.addEventListener('mouseout', _ => {
                    ctrl.explorer.setHovering($(el).attr('data-fen'), null);
                });
                el.addEventListener('mousedown', e => {
                    const uci = $(e.target).parents('tr').attr('data-uci');
                    if (uci)
                        ctrl.explorerMove(uci);
                });
            },
            postpatch: (_, vnode) => {
                setTimeout(() => {
                    const el = vnode.elm;
                    ctrl.explorer.setHovering($(el).attr('data-fen'), $(el).find('tr:hover').attr('data-uci'));
                }, 100);
            }
        }
    };
}
function showMoveTable(ctrl, moves, fen) {
    if (!moves.length)
        return null;
    const trans = ctrl.trans.noarg;
    return snabbdom_1.h('table.moves', [
        snabbdom_1.h('thead', [
            snabbdom_1.h('tr', [
                snabbdom_1.h('th.title', trans('move')),
                snabbdom_1.h('th.title', trans('games')),
                snabbdom_1.h('th.title', trans('whiteDrawBlack'))
            ])
        ]),
        snabbdom_1.h('tbody', moveTableAttributes(ctrl, fen), moves.map(move => {
            return snabbdom_1.h('tr', {
                key: move.uci,
                attrs: {
                    'data-uci': move.uci,
                    title: ctrl.trans('averageRatingX', move.averageRating)
                }
            }, [
                snabbdom_1.h('td', move.san[0] === 'P' ? move.san.slice(1) : move.san),
                snabbdom_1.h('td', window.lichess.numberFormat(move.white + move.draws + move.black)),
                snabbdom_1.h('td', resultBar(move))
            ]);
        }))
    ]);
}
function showResult(winner) {
    if (winner === 'white')
        return snabbdom_1.h('result.white', '1-0');
    if (winner === 'black')
        return snabbdom_1.h('result.black', '0-1');
    return snabbdom_1.h('result.draws', '-');
}
function showGameTable(ctrl, title, games) {
    if (!ctrl.explorer.withGames || !games.length)
        return null;
    const openedId = ctrl.explorer.gameMenu();
    return snabbdom_1.h('table.games', [
        snabbdom_1.h('thead', [
            snabbdom_1.h('tr', [
                snabbdom_1.h('th.title', { attrs: { colspan: 4 } }, title)
            ])
        ]),
        snabbdom_1.h('tbody', {
            hook: util_1.bind('click', e => {
                const $tr = $(e.target).parents('tr');
                if (!$tr.length)
                    return;
                const id = $tr.data('id');
                if (ctrl.study && ctrl.study.members.canContribute()) {
                    ctrl.explorer.gameMenu(id);
                    ctrl.redraw();
                }
                else
                    openGame(ctrl, id);
            })
        }, games.map(game => {
            return openedId === game.id ? gameActions(ctrl, game) : snabbdom_1.h('tr', {
                key: game.id,
                attrs: { 'data-id': game.id }
            }, [
                snabbdom_1.h('td', [game.white, game.black].map(p => snabbdom_1.h('span', '' + p.rating))),
                snabbdom_1.h('td', [game.white, game.black].map(p => snabbdom_1.h('span', p.name))),
                snabbdom_1.h('td', showResult(game.winner)),
                snabbdom_1.h('td', [game.year])
            ]);
        }))
    ]);
}
function openGame(ctrl, gameId) {
    const orientation = ctrl.chessground.state.orientation, fenParam = ctrl.node.ply > 0 ? ('?fen=' + ctrl.node.fen) : '';
    let url = '/' + gameId + '/' + orientation + fenParam;
    if (ctrl.explorer.config.data.db.selected() === 'masters')
        url = '/import/master' + url;
    window.open(url, '_blank');
}
function gameActions(ctrl, game) {
    function send(insert) {
        ctrl.study.explorerGame(game.id, insert);
        ctrl.explorer.gameMenu(null);
        ctrl.redraw();
    }
    return snabbdom_1.h('tr', {
        key: game.id + '-m',
    }, [
        snabbdom_1.h('td.game_menu', {
            attrs: { colspan: 4 },
        }, [
            snabbdom_1.h('div.game_title', `${game.white.name} - ${game.black.name}, ${showResult(game.winner).text}, ${game.year}`),
            snabbdom_1.h('div.menu', [
                snabbdom_1.h('a.text', {
                    attrs: util_1.dataIcon('v'),
                    hook: util_1.bind('click', _ => openGame(ctrl, game.id))
                }, 'View'),
                ...(ctrl.study ? [
                    snabbdom_1.h('a.text', {
                        attrs: util_1.dataIcon('c'),
                        hook: util_1.bind('click', _ => send(false), ctrl.redraw)
                    }, 'Cite'),
                    snabbdom_1.h('a.text', {
                        attrs: util_1.dataIcon('O'),
                        hook: util_1.bind('click', _ => send(true), ctrl.redraw)
                    }, 'Insert')
                ] : []),
                snabbdom_1.h('a.text', {
                    attrs: util_1.dataIcon('L'),
                    hook: util_1.bind('click', _ => ctrl.explorer.gameMenu(null), ctrl.redraw)
                }, 'Close')
            ])
        ])
    ]);
}
function showTablebase(ctrl, title, moves, fen) {
    if (!moves.length)
        return [];
    return [
        snabbdom_1.h('div.title', title),
        snabbdom_1.h('table.tablebase', [
            snabbdom_1.h('tbody', moveTableAttributes(ctrl, fen), moves.map(move => {
                return snabbdom_1.h('tr', {
                    key: move.uci,
                    attrs: { 'data-uci': move.uci }
                }, [
                    snabbdom_1.h('td', move.san),
                    snabbdom_1.h('td', [showDtz(ctrl, fen, move), showDtm(ctrl, fen, move)])
                ]);
            }))
        ])
    ];
}
function showDtm(ctrl, fen, move) {
    if (move.dtm)
        return snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), {
            attrs: {
                title: ctrl.trans.plural('mateInXHalfMoves', Math.abs(move.dtm)) + ' (Depth To Mate)'
            }
        }, 'DTM ' + Math.abs(move.dtm));
}
function showDtz(ctrl, fen, move) {
    const trans = ctrl.trans.noarg;
    if (move.checkmate)
        return snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), trans('checkmate'));
    else if (move.stalemate)
        return snabbdom_1.h('result.draws', trans('stalemate'));
    else if (move.variant_win)
        return snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), trans('variantLoss'));
    else if (move.variant_loss)
        return snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), trans('variantWin'));
    else if (move.insufficient_material)
        return snabbdom_1.h('result.draws', trans('insufficientMaterial'));
    else if (move.dtz === null)
        return null;
    else if (move.dtz === 0)
        return snabbdom_1.h('result.draws', trans('draw'));
    else if (move.zeroing)
        return move.san.includes('x') ?
            snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), trans('capture')) :
            snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), trans('pawnMove'));
    return snabbdom_1.h('result.' + explorerUtil_1.winnerOf(fen, move), {
        attrs: {
            title: ctrl.trans.plural('nextCaptureOrPawnMoveInXHalfMoves', Math.abs(move.dtz))
        }
    }, 'DTZ ' + Math.abs(move.dtz));
}
function closeButton(ctrl) {
    return snabbdom_1.h('button.button.button-empty.text', {
        attrs: util_1.dataIcon('L'),
        hook: util_1.bind('click', ctrl.toggleExplorer, ctrl.redraw)
    }, ctrl.trans.noarg('close'));
}
function showEmpty(ctrl) {
    return snabbdom_1.h('div.data.empty', [
        snabbdom_1.h('div.title', showTitle(ctrl, ctrl.data.game.variant)),
        snabbdom_1.h('div.message', [
            snabbdom_1.h('strong', ctrl.trans.noarg('noGameFound')),
            ctrl.explorer.config.fullHouse() ?
                null :
                snabbdom_1.h('p.explanation', ctrl.trans.noarg('maybeIncludeMoreGamesFromThePreferencesMenu')),
            closeButton(ctrl)
        ])
    ]);
}
function showGameEnd(ctrl, title) {
    return snabbdom_1.h('div.data.empty', [
        snabbdom_1.h('div.title', ctrl.trans.noarg('gameOver')),
        snabbdom_1.h('div.message', [
            snabbdom_1.h('i', { attrs: util_1.dataIcon('') }),
            snabbdom_1.h('h3', title),
            closeButton(ctrl)
        ])
    ]);
}
function show(ctrl) {
    const trans = ctrl.trans.noarg, data = ctrl.explorer.current();
    if (data && interfaces_1.isOpening(data)) {
        const moveTable = showMoveTable(ctrl, data.moves, data.fen), recentTable = showGameTable(ctrl, trans('recentGames'), data.recentGames || []), topTable = showGameTable(ctrl, trans('topGames'), data.topGames || []);
        if (moveTable || recentTable || topTable)
            lastShow = snabbdom_1.h('div.data', [moveTable, topTable, recentTable]);
        else
            lastShow = showEmpty(ctrl);
    }
    else if (data && interfaces_1.isTablebase(data)) {
        const moves = data.moves;
        if (moves.length)
            lastShow = snabbdom_1.h('div.data', [
                [trans('winning'), m => m.wdl === -2],
                [trans('unknown'), m => m.wdl === null],
                [trans('winPreventedBy50MoveRule'), m => m.wdl === -1],
                [trans('drawn'), m => m.wdl === 0],
                [trans('lossSavedBy50MoveRule'), m => m.wdl === 1],
                [trans('losing'), m => m.wdl === 2],
            ]
                .map(a => showTablebase(ctrl, a[0], moves.filter(a[1]), data.fen))
                .reduce(function (a, b) { return a.concat(b); }, []));
        else if (data.checkmate)
            lastShow = showGameEnd(ctrl, trans('checkmate'));
        else if (data.stalemate)
            lastShow = showGameEnd(ctrl, trans('stalemate'));
        else if (data.variant_win || data.variant_loss)
            lastShow = showGameEnd(ctrl, trans('variantEnding'));
        else
            lastShow = showEmpty(ctrl);
    }
    return lastShow;
}
function showTitle(ctrl, variant) {
    if (variant.key === 'standard' || variant.key === 'fromPosition')
        return ctrl.trans.noarg('openingExplorer');
    return ctrl.trans('xOpeningExplorer', variant.name);
}
function showConfig(ctrl) {
    return snabbdom_1.h('div.config', [
        snabbdom_1.h('div.title', showTitle(ctrl, ctrl.data.game.variant))
    ].concat(explorerConfig_1.view(ctrl.explorer.config)));
}
function showFailing(ctrl) {
    return snabbdom_1.h('div.data.empty', [
        snabbdom_1.h('div.title', showTitle(ctrl, ctrl.data.game.variant)),
        snabbdom_1.h('div.failing.message', [
            snabbdom_1.h('h3', "Oops, sorry!"),
            snabbdom_1.h('p.explanation', "The explorer is temporarily out of service. Try again soon!"),
            closeButton(ctrl)
        ])
    ]);
}
let lastFen = '';
function default_1(ctrl) {
    const explorer = ctrl.explorer;
    if (!explorer.enabled())
        return;
    const data = explorer.current(), config = explorer.config, configOpened = config.data.open(), loading = !configOpened && (explorer.loading() || (!data && !explorer.failing())), content = configOpened ? showConfig(ctrl) : (explorer.failing() ? showFailing(ctrl) : show(ctrl));
    return snabbdom_1.h('section.explorer-box.sub-box', {
        class: {
            loading,
            config: configOpened,
            reduced: !configOpened && (explorer.failing() || explorer.movesAway() > 2)
        },
        hook: {
            insert: vnode => vnode.elm.scrollTop = 0,
            postpatch(_, vnode) {
                if (!data || lastFen === data.fen)
                    return;
                vnode.elm.scrollTop = 0;
                lastFen = data.fen;
            }
        }
    }, [
        snabbdom_1.h('div.overlay'),
        content, (!content || explorer.failing()) ? null : snabbdom_1.h('span.toconf', {
            attrs: util_1.dataIcon(configOpened ? 'L' : '%'),
            hook: util_1.bind('click', () => ctrl.explorer.config.toggleOpen(), ctrl.redraw)
        })
    ]);
}
exports.default = default_1;
;

},{"../util":110,"./explorerConfig":50,"./explorerUtil":52,"./interfaces":55,"snabbdom":35}],54:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function opening(endpoint, variant, fen, config, withGames) {
    let url;
    const params = {
        fen,
        moves: 12
    };
    if (!withGames)
        params.topGames = params.recentGames = 0;
    if (config.db.selected() === 'masters')
        url = '/master';
    else {
        url = '/lichess';
        params['variant'] = variant;
        params['speeds[]'] = config.speed.selected();
        params['ratings[]'] = config.rating.selected();
    }
    return $.ajax({
        url: endpoint + url,
        data: params,
        cache: true
    }).then((data) => {
        data.opening = true;
        data.fen = fen;
        return data;
    });
}
exports.opening = opening;
function tablebase(endpoint, variant, fen) {
    const effectiveVariant = (variant === 'fromPosition' || variant === 'chess960') ? 'standard' : variant;
    return $.ajax({
        url: endpoint + '/' + effectiveVariant,
        data: { fen },
        cache: true
    }).then((data) => {
        data.tablebase = true;
        data.fen = fen;
        return data;
    });
}
exports.tablebase = tablebase;

},{}],55:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function isOpening(m) {
    return !!m.opening;
}
exports.isOpening = isOpening;
function isTablebase(m) {
    return !!m.tablebase;
}
exports.isTablebase = isTablebase;

},{}],56:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("common");
function make(cfg, data, redraw) {
    const saveUrl = `/${data.game.id}${data.player.id}/forecasts`;
    let forecasts = cfg.steps || [];
    const loading = common_1.prop(false);
    function keyOf(fc) {
        return fc.map(node => node.ply + ':' + node.uci).join(',');
    }
    function contains(fc1, fc2) {
        return fc1.length >= fc2.length && keyOf(fc1).startsWith(keyOf(fc2));
    }
    function findStartingWithNode(node) {
        return forecasts.filter(function (fc) {
            return contains(fc, [node]);
        });
    }
    function collides(fc1, fc2) {
        for (var i = 0, max = Math.min(fc1.length, fc2.length); i < max; i++) {
            if (fc1[i].uci !== fc2[i].uci) {
                if (cfg.onMyTurn)
                    return i !== 0 && i % 2 === 0;
                return i % 2 === 1;
            }
        }
        return true;
    }
    function truncate(fc) {
        if (cfg.onMyTurn)
            return (fc.length % 2 !== 1 ? fc.slice(0, -1) : fc).slice(0, 30);
        // must end with player move
        return (fc.length % 2 !== 0 ? fc.slice(0, -1) : fc).slice(0, 30);
    }
    function isLongEnough(fc) {
        return fc.length >= (cfg.onMyTurn ? 1 : 2);
    }
    function fixAll() {
        // remove contained forecasts
        forecasts = forecasts.filter(function (fc, i) {
            return forecasts.filter(function (f, j) {
                return i !== j && contains(f, fc);
            }).length === 0;
        });
        // remove colliding forecasts
        forecasts = forecasts.filter(function (fc, i) {
            return forecasts.filter(function (f, j) {
                return i < j && collides(f, fc);
            }).length === 0;
        });
    }
    fixAll();
    function reloadToLastPly() {
        loading(true);
        redraw();
        history.replaceState(null, '', '#last');
        window.lichess.reload();
    }
    ;
    function isCandidate(fc) {
        fc = truncate(fc);
        if (!isLongEnough(fc))
            return false;
        var collisions = forecasts.filter(function (f) {
            return contains(f, fc);
        });
        if (collisions.length)
            return false;
        return true;
    }
    ;
    function save() {
        if (cfg.onMyTurn)
            return;
        loading(true);
        redraw();
        $.ajax({
            method: 'POST',
            url: saveUrl,
            data: JSON.stringify(forecasts),
            contentType: 'application/json'
        }).then(function (data) {
            if (data.reload)
                reloadToLastPly();
            else {
                loading(false);
                forecasts = data.steps || [];
            }
            redraw();
        });
    }
    ;
    function playAndSave(node) {
        if (!cfg.onMyTurn)
            return;
        loading(true);
        redraw();
        $.ajax({
            method: 'POST',
            url: saveUrl + '/' + node.uci,
            data: JSON.stringify(findStartingWithNode(node).filter(function (fc) {
                return fc.length > 1;
            }).map(function (fc) {
                return fc.slice(1);
            })),
            contentType: 'application/json'
        }).then(function (data) {
            if (data.reload)
                reloadToLastPly();
            else {
                loading(false);
                forecasts = data.steps || [];
            }
            redraw();
        });
    }
    return {
        addNodes(fc) {
            fc = truncate(fc);
            if (!isCandidate(fc))
                return;
            forecasts.push(fc);
            fixAll();
            save();
        },
        isCandidate,
        removeIndex(index) {
            forecasts = forecasts.filter((_, i) => i !== index);
            save();
        },
        list: () => forecasts,
        truncate,
        loading,
        onMyTurn: !!cfg.onMyTurn,
        findStartingWithNode,
        playAndSave,
        reloadToLastPly
    };
}
exports.make = make;

},{"common":131}],57:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const pgnExport_1 = require("../pgnExport");
const util_1 = require("../util");
const chess_1 = require("chess");
function onMyTurn(ctrl, fctrl, cNodes) {
    var firstNode = cNodes[0];
    if (!firstNode)
        return;
    var fcs = fctrl.findStartingWithNode(firstNode);
    if (!fcs.length)
        return;
    var lines = fcs.filter(function (fc) {
        return fc.length > 1;
    });
    return snabbdom_1.h('button.on-my-turn.button.text', {
        attrs: util_1.dataIcon('E'),
        hook: util_1.bind('click', _ => fctrl.playAndSave(firstNode))
    }, [
        snabbdom_1.h('span', [
            snabbdom_1.h('strong', ctrl.trans('playX', chess_1.fixCrazySan(cNodes[0].san))),
            lines.length ?
                snabbdom_1.h('span', ctrl.trans.plural('andSaveNbPremoveLines', lines.length)) :
                snabbdom_1.h('span', ctrl.trans.noarg('noConditionalPremoves'))
        ])
    ]);
}
function makeCnodes(ctrl, fctrl) {
    const afterPly = ctrl.tree.getCurrentNodesAfterPly(ctrl.nodeList, ctrl.mainline, ctrl.data.game.turns);
    return fctrl.truncate(afterPly.map(node => ({
        ply: node.ply,
        fen: node.fen,
        uci: node.uci,
        san: node.san,
        check: node.check
    })));
}
function default_1(ctrl, fctrl) {
    const cNodes = makeCnodes(ctrl, fctrl);
    const isCandidate = fctrl.isCandidate(cNodes);
    return snabbdom_1.h('div.forecast', {
        class: { loading: fctrl.loading() }
    }, [
        fctrl.loading() ? snabbdom_1.h('div.overlay', util_1.spinner()) : null,
        snabbdom_1.h('div.box', [
            snabbdom_1.h('div.top', ctrl.trans.noarg('conditionalPremoves')),
            snabbdom_1.h('div.list', fctrl.list().map(function (nodes, i) {
                return snabbdom_1.h('div.entry.text', {
                    attrs: util_1.dataIcon('G')
                }, [
                    snabbdom_1.h('a.del', {
                        hook: util_1.bind('click', e => {
                            fctrl.removeIndex(i);
                            e.stopPropagation();
                        }, ctrl.redraw)
                    }, 'x'),
                    snabbdom_1.h('sans', pgnExport_1.renderNodesHtml(nodes))
                ]);
            })),
            snabbdom_1.h('button.add.text', {
                class: { enabled: isCandidate },
                attrs: util_1.dataIcon(isCandidate ? 'O' : ""),
                hook: util_1.bind('click', _ => fctrl.addNodes(makeCnodes(ctrl, fctrl)), ctrl.redraw)
            }, [
                isCandidate ? snabbdom_1.h('span', [
                    snabbdom_1.h('span', ctrl.trans.noarg('addCurrentVariation')),
                    snabbdom_1.h('sans', pgnExport_1.renderNodesHtml(cNodes))
                ]) :
                    snabbdom_1.h('span', ctrl.trans.noarg('playVariationToCreateConditionalPremoves'))
            ])
        ]),
        fctrl.onMyTurn ? onMyTurn(ctrl, fctrl, cNodes) : null
    ]);
}
exports.default = default_1;

},{"../pgnExport":66,"../util":110,"chess":129,"snabbdom":35}],58:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const moveView_1 = require("./moveView");
const common_1 = require("common");
const util_1 = require("./util");
function make(root) {
    let prev;
    let selected = 0;
    function displayed() {
        return root.node.children.length > 1;
    }
    ;
    return {
        state() {
            const node = root.node;
            if (!prev || prev.id !== node.id) {
                prev = node;
                selected = 0;
            }
            return {
                node,
                selected,
                displayed: displayed()
            };
        },
        next() {
            if (displayed()) {
                selected = Math.min(root.node.children.length - 1, selected + 1);
                return true;
            }
        },
        prev() {
            if (displayed()) {
                selected = Math.max(0, selected - 1);
                return true;
            }
        },
        proceed(it) {
            if (displayed()) {
                it = common_1.defined(it) ? it : selected;
                root.userJumpIfCan(root.path + root.node.children[it].id);
                return true;
            }
        }
    };
}
exports.make = make;
function view(root, concealOf) {
    if (root.embed || root.retro)
        return;
    const state = root.fork.state();
    if (!state.displayed)
        return;
    const isMainline = concealOf && root.onMainline;
    return snabbdom_1.h('div.analyse__fork', {
        hook: util_1.onInsert(el => {
            el.addEventListener('click', e => {
                const target = e.target, it = parseInt(target.parentNode.getAttribute('data-it') ||
                    target.getAttribute('data-it') || '');
                root.fork.proceed(it);
                root.redraw();
            });
        })
    }, state.node.children.map((node, it) => {
        const conceal = isMainline && concealOf(true)(root.path + node.id, node);
        if (!conceal)
            return snabbdom_1.h('move', {
                class: { selected: it === state.selected },
                attrs: { 'data-it': it }
            }, moveView_1.renderIndexAndMove({
                withDots: true,
                showEval: root.showComputer(),
                showGlyphs: root.showComputer()
            }, node));
    }));
}
exports.view = view;

},{"./moveView":64,"./util":110,"common":131,"snabbdom":35}],59:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const gridHacks = require("common/gridHacks");
let booted = false;
function start(container) {
    // Chrome, Chromium, Brave, Opera, Safari 12+ are OK
    if (window.chrome)
        return;
    const runHacks = () => {
        if (gridHacks.needsBoardHeightFix())
            gridHacks.fixMainBoardHeight(container);
        fixChatHeight(container);
    };
    gridHacks.runner(runHacks);
    gridHacks.bindChessgroundResizeOnce(runHacks);
    if (!booted) {
        window.lichess.pubsub.on('chat.resize', runHacks);
        booted = true;
    }
}
exports.start = start;
function fixChatHeight(container) {
    const chat = container.querySelector('.mchat'), board = container.querySelector('.analyse__board .cg-wrap'), side = container.querySelector('.analyse__side');
    if (chat && board && side) {
        const height = board.offsetHeight - side.offsetHeight;
        if (height)
            chat.style.height = `calc(${height}px - 2vmin)`;
    }
}

},{"common/gridHacks":132}],60:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chessground_1 = require("chessground");
const resize_1 = require("common/resize");
function render(ctrl) {
    return snabbdom_1.h('div.cg-wrap.cgv' + ctrl.cgVersion.js, {
        hook: {
            insert: vnode => {
                ctrl.chessground = chessground_1.Chessground(vnode.elm, makeConfig(ctrl));
                ctrl.setAutoShapes();
                if (ctrl.node.shapes)
                    ctrl.chessground.setShapes(ctrl.node.shapes);
                ctrl.cgVersion.dom = ctrl.cgVersion.js;
            },
            destroy: _ => ctrl.chessground.destroy()
        }
    });
}
exports.render = render;
function promote(ground, key, role) {
    const pieces = {};
    const piece = ground.state.pieces[key];
    if (piece && piece.role == 'pawn') {
        pieces[key] = {
            color: piece.color,
            role,
            promoted: true
        };
        ground.setPieces(pieces);
    }
}
exports.promote = promote;
function makeConfig(ctrl) {
    const d = ctrl.data, pref = d.pref, opts = ctrl.makeCgOpts();
    const config = {
        turnColor: opts.turnColor,
        fen: opts.fen,
        check: opts.check,
        lastMove: opts.lastMove,
        orientation: ctrl.bottomColor(),
        coordinates: pref.coords !== 0 && !ctrl.embed,
        addPieceZIndex: pref.is3d,
        viewOnly: !!ctrl.embed,
        movable: {
            free: false,
            color: opts.movable.color,
            dests: opts.movable.dests,
            showDests: pref.destination,
            rookCastle: pref.rookCastle
        },
        events: {
            move: ctrl.userMove,
            dropNewPiece: ctrl.userNewPiece,
            insert(elements) {
                if (!ctrl.embed)
                    resize_1.default(elements, ctrl.data.pref.resizeHandle, ctrl.node.ply);
            }
        },
        premovable: {
            enabled: opts.premovable.enabled,
            showDests: pref.destination,
            events: {
                set: ctrl.onPremoveSet
            }
        },
        drawable: {
            enabled: !ctrl.embed,
            eraseOnClick: !ctrl.opts.study || !!ctrl.opts.practice
        },
        highlight: {
            lastMove: pref.highlight,
            check: pref.highlight
        },
        animation: {
            duration: pref.animationDuration
        },
        disableContextMenu: true
    };
    ctrl.study && ctrl.study.mutateCgConfig(config);
    return config;
}
exports.makeConfig = makeConfig;

},{"chessground":5,"common/resize":134,"snabbdom":35}],61:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const control = require("./control");
const util_1 = require("./util");
const modal_1 = require("./modal");
const snabbdom_1 = require("snabbdom");
const preventing = (f) => (e) => {
    e.preventDefault();
    f();
};
function bind(ctrl) {
    if (!window.Mousetrap)
        return;
    const kbd = window.Mousetrap;
    kbd.bind(['left', 'k'], preventing(function () {
        control.prev(ctrl);
        ctrl.redraw();
    }));
    kbd.bind(['shift+left', 'shift+k'], preventing(function () {
        control.exitVariation(ctrl);
        ctrl.redraw();
    }));
    kbd.bind(['right', 'j'], preventing(function () {
        if (!ctrl.fork.proceed())
            control.next(ctrl);
        ctrl.redraw();
    }));
    kbd.bind(['shift+right', 'shift+j'], preventing(function () {
        control.enterVariation(ctrl);
        ctrl.redraw();
    }));
    kbd.bind(['up', '0'], preventing(function () {
        if (!ctrl.fork.prev())
            control.first(ctrl);
        ctrl.redraw();
    }));
    kbd.bind(['down', '$'], preventing(function () {
        if (!ctrl.fork.next())
            control.last(ctrl);
        ctrl.redraw();
    }));
    kbd.bind('shift+c', preventing(function () {
        ctrl.showComments = !ctrl.showComments;
        ctrl.autoScroll();
        ctrl.redraw();
    }));
    kbd.bind('shift+i', preventing(function () {
        ctrl.treeView.toggle();
        ctrl.redraw();
    }));
    kbd.bind('z', preventing(function () {
        ctrl.toggleComputer();
        ctrl.redraw();
    }));
    if (ctrl.embed)
        return;
    kbd.bind('space', preventing(function () {
        const gb = ctrl.gamebookPlay();
        if (gb)
            gb.onSpace();
        else if (ctrl.studyPractice)
            return;
        else if (ctrl.ceval.enabled())
            ctrl.playBestMove();
        else
            ctrl.toggleCeval();
    }));
    if (ctrl.studyPractice)
        return;
    kbd.bind('f', preventing(ctrl.flip));
    kbd.bind('?', preventing(function () {
        ctrl.keyboardHelp = !ctrl.keyboardHelp;
        ctrl.redraw();
    }));
    kbd.bind('l', preventing(ctrl.toggleCeval));
    kbd.bind('a', preventing(function () {
        ctrl.toggleAutoShapes(!ctrl.showAutoShapes());
        ctrl.redraw();
    }));
    kbd.bind('x', preventing(ctrl.toggleThreatMode));
    kbd.bind('e', preventing(function () {
        ctrl.toggleExplorer();
        ctrl.redraw();
    }));
    if (ctrl.study) {
        const keyToMousedown = (key, selector) => {
            kbd.bind(key, preventing(function () {
                $(selector).each(function () {
                    window.lichess.dispatchEvent(this, 'mousedown');
                });
            }));
        };
        keyToMousedown('d', '.study__buttons .comments');
        keyToMousedown('g', '.study__buttons .glyphs');
    }
}
exports.bind = bind;
function view(ctrl) {
    return modal_1.modal({
        class: 'keyboard-help',
        onInsert(el) {
            window.lichess.loadCssPath('analyse.keyboard');
            $(el).find('.scrollable').load('/analysis/help?study=' + (ctrl.study ? 1 : 0));
        },
        onClose() {
            ctrl.keyboardHelp = false;
            ctrl.redraw();
        },
        content: [
            snabbdom_1.h('div.scrollable', util_1.spinner())
        ]
    });
}
exports.view = view;

},{"./control":45,"./modal":63,"./util":110,"snabbdom":35}],62:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ctrl_1 = require("./ctrl");
const view_1 = require("./view");
const boot_1 = require("./boot");
exports.boot = boot_1.default;
const chessground_1 = require("chessground");
const chat = require("chat");
const snabbdom_1 = require("snabbdom");
const class_1 = require("snabbdom/modules/class");
const attributes_1 = require("snabbdom/modules/attributes");
const menuHover_1 = require("common/menuHover");
menuHover_1.menuHover();
exports.patch = snabbdom_1.init([class_1.default, attributes_1.default]);
function start(opts) {
    opts.element = document.querySelector('main.analyse');
    let vnode, ctrl;
    function redraw() {
        vnode = exports.patch(vnode, view_1.default(ctrl));
    }
    ctrl = new ctrl_1.default(opts, redraw);
    const blueprint = view_1.default(ctrl);
    opts.element.innerHTML = '';
    vnode = exports.patch(opts.element, blueprint);
    return {
        socketReceive: ctrl.socket.receive,
        path: () => ctrl.path,
        setChapter(id) {
            if (ctrl.study)
                ctrl.study.setChapter(id);
        }
    };
}
exports.start = start;
// that's for the rest of lichess to access chessground
// without having to include it a second time
window.Chessground = chessground_1.Chessground;
window.LichessChat = chat;

},{"./boot":43,"./ctrl":48,"./view":111,"chat":121,"chessground":5,"common/menuHover":133,"snabbdom":35,"snabbdom/modules/attributes":33,"snabbdom/modules/class":34}],63:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("./util");
function modal(d) {
    return snabbdom_1.h('div#modal-overlay', {
        hook: util_1.bind('click', d.onClose)
    }, [
        snabbdom_1.h('div#modal-wrap.study__modal.' + d.class, {
            hook: util_1.onInsert(el => {
                el.addEventListener('click', e => e.stopPropagation());
                d.onInsert && d.onInsert(el);
            })
        }, [
            snabbdom_1.h('span.close', {
                attrs: { 'data-icon': 'L' },
                hook: util_1.bind('click', d.onClose)
            }),
            snabbdom_1.h('div', d.content)
        ])
    ]);
}
exports.modal = modal;
function button(name) {
    return snabbdom_1.h('div.form-actions.single', snabbdom_1.h('button.button', {
        attrs: { type: 'submit' },
    }, name));
}
exports.button = button;

},{"./util":110,"snabbdom":35}],64:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chess_1 = require("chess");
const common_1 = require("common");
const ceval_1 = require("ceval");
function plyToTurn(ply) {
    return Math.floor((ply - 1) / 2) + 1;
}
exports.plyToTurn = plyToTurn;
function renderGlyphs(glyphs) {
    return glyphs.map(glyph => snabbdom_1.h('glyph', {
        attrs: { title: glyph.name }
    }, glyph.symbol));
}
exports.renderGlyphs = renderGlyphs;
function renderEval(e) {
    return snabbdom_1.h('eval', e);
}
function renderIndexText(ply, withDots) {
    return plyToTurn(ply) + (withDots ? (ply % 2 === 1 ? '.' : '...') : '');
}
exports.renderIndexText = renderIndexText;
function renderIndex(ply, withDots) {
    return snabbdom_1.h('index', renderIndexText(ply, withDots));
}
exports.renderIndex = renderIndex;
function renderMove(ctx, node) {
    const ev = ceval_1.view.getBestEval({ client: node.ceval, server: node.eval }) || {};
    return [snabbdom_1.h('san', chess_1.fixCrazySan(node.san))]
        .concat((node.glyphs && ctx.showGlyphs) ? renderGlyphs(node.glyphs) : [])
        .concat(ctx.showEval ? (common_1.defined(ev.cp) ? [renderEval(chess_1.renderEval(ev.cp))] : (common_1.defined(ev.mate) ? [renderEval('#' + ev.mate)] : [])) : []);
}
exports.renderMove = renderMove;
function renderIndexAndMove(ctx, node) {
    if (!node.san)
        return; // initial position
    return [renderIndex(node.ply, ctx.withDots), ...renderMove(ctx, node)];
}
exports.renderIndexAndMove = renderIndexAndMove;

},{"ceval":113,"chess":129,"common":131,"snabbdom":35}],65:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ceval_1 = require("ceval");
const common_1 = require("common");
function hasCompChild(node) {
    return !!node.children.find(function (c) {
        return !!c.comp;
    });
}
function nextGlyphSymbol(color, symbol, mainline, fromPly) {
    const len = mainline.length;
    if (!len)
        return;
    const fromIndex = fromPly - mainline[0].ply;
    for (var i = 1; i < len; i++) {
        const node = mainline[(fromIndex + i) % len];
        const found = (node.ply % 2 === (color === 'white' ? 1 : 0)) && node.glyphs && node.glyphs.find(function (g) {
            return g.symbol === symbol;
        });
        if (found)
            return node;
    }
    return;
}
exports.nextGlyphSymbol = nextGlyphSymbol;
function evalSwings(mainline, nodeFilter) {
    const found = [];
    const threshold = 0.1;
    for (var i = 1; i < mainline.length; i++) {
        var node = mainline[i];
        var prev = mainline[i - 1];
        if (nodeFilter(node) && node.eval && prev.eval) {
            var diff = Math.abs(ceval_1.winningChances.povDiff('white', prev.eval, node.eval));
            if (diff > threshold && hasCompChild(prev))
                found.push(node);
        }
    }
    return found;
}
exports.evalSwings = evalSwings;
function threefoldFen(fen) {
    return fen.split(' ').slice(0, 4).join(' ');
}
function detectThreefold(nodeList, node) {
    if (common_1.defined(node.threefold))
        return;
    const currentFen = threefoldFen(node.fen);
    let nbSimilarPositions = 0, i;
    for (i in nodeList)
        if (threefoldFen(nodeList[i].fen) === currentFen)
            nbSimilarPositions++;
    node.threefold = nbSimilarPositions > 2;
}
exports.detectThreefold = detectThreefold;
;

},{"ceval":113,"common":131}],66:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chess_1 = require("chess");
function renderNodesTxt(nodes) {
    if (!nodes[0])
        return '';
    if (!nodes[0].san)
        nodes = nodes.slice(1);
    if (!nodes[0])
        return '';
    var s = nodes[0].ply % 2 === 1 ? '' : Math.floor((nodes[0].ply + 1) / 2) + '... ';
    nodes.forEach(function (node, i) {
        if (node.ply === 0)
            return;
        if (node.ply % 2 === 1)
            s += ((node.ply + 1) / 2) + '. ';
        else
            s += '';
        s += chess_1.fixCrazySan(node.san) + ((i + 9) % 8 === 0 ? '\n' : ' ');
    });
    return s.trim();
}
function renderFullTxt(ctrl) {
    var g = ctrl.data.game;
    var txt = renderNodesTxt(ctrl.tree.getNodeList(ctrl.path));
    var tags = [];
    if (g.variant.key !== 'standard')
        tags.push(['Variant', g.variant.name]);
    if (g.initialFen && g.initialFen !== chess_1.initialFen)
        tags.push(['FEN', g.initialFen]);
    if (tags.length)
        txt = tags.map(function (t) {
            return '[' + t[0] + ' "' + t[1] + '"]';
        }).join('\n') + '\n\n' + txt;
    return txt;
}
exports.renderFullTxt = renderFullTxt;
function renderNodesHtml(nodes) {
    if (!nodes[0])
        return [];
    if (!nodes[0].san)
        nodes = nodes.slice(1);
    if (!nodes[0])
        return [];
    const tags = [];
    if (nodes[0].ply % 2 === 0)
        tags.push(snabbdom_1.h('index', Math.floor((nodes[0].ply + 1) / 2) + '...'));
    nodes.forEach(node => {
        if (node.ply === 0)
            return;
        if (node.ply % 2 === 1)
            tags.push(snabbdom_1.h('index', ((node.ply + 1) / 2) + '.'));
        tags.push(snabbdom_1.h('san', chess_1.fixCrazySan(node.san)));
    });
    return tags;
}
exports.renderNodesHtml = renderNodesHtml;

},{"chess":129,"snabbdom":35}],67:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ceval_1 = require("ceval");
const tree_1 = require("tree");
const nodeFinder_1 = require("../nodeFinder");
const explorerCtrl_1 = require("../explorer/explorerCtrl");
const common_1 = require("common");
const util_1 = require("chessops/util");
const san_1 = require("chessops/san");
function make(root, playableDepth) {
    const variant = root.data.game.variant.key, running = common_1.prop(true), comment = common_1.prop(null), hovering = common_1.prop(null), hinting = common_1.prop(null), played = common_1.prop(false);
    function ensureCevalRunning() {
        if (!root.showComputer())
            root.toggleComputer();
        if (!root.ceval.enabled())
            root.toggleCeval();
        if (root.threatMode())
            root.toggleThreatMode();
    }
    function commentable(node, bonus = 0) {
        if (root.gameOver(node) || node.tbhit)
            return true;
        const ceval = node.ceval;
        return ceval ? ((ceval.depth + bonus) >= 15 || (ceval.depth >= 13 && ceval.millis > 3000)) : false;
    }
    function playable(node) {
        const ceval = node.ceval;
        return ceval ? (ceval.depth >= Math.min(ceval.maxDepth || 99, playableDepth()) ||
            (ceval.depth >= 15 && (ceval.cloud || ceval.millis > 5000))) : false;
    }
    ;
    const altCastles = {
        e1a1: 'e1c1',
        e1h1: 'e1g1',
        e8a8: 'e8c8',
        e8h8: 'e8g8'
    };
    function tbhitToEval(hit) {
        return hit && (hit.winner ? {
            mate: hit.winner === 'white' ? 10 : -10
        } : { cp: 0 });
    }
    function nodeBestUci(node) {
        return (node.tbhit && node.tbhit.best) || (node.ceval && node.ceval.pvs[0].moves[0]);
    }
    function makeComment(prev, node, path) {
        let verdict, best;
        const over = root.gameOver(node);
        if (over === 'checkmate')
            verdict = 'goodMove';
        else {
            const nodeEval = tbhitToEval(node.tbhit) || ((node.threefold || over === 'draw') ? { cp: 0 } : node.ceval);
            const prevEval = tbhitToEval(prev.tbhit) || prev.ceval;
            const shift = -ceval_1.winningChances.povDiff(root.bottomColor(), nodeEval, prevEval);
            best = nodeBestUci(prev);
            if (best === node.uci || best === altCastles[node.uci])
                best = null;
            if (!best)
                verdict = 'goodMove';
            else if (shift < 0.025)
                verdict = 'goodMove';
            else if (shift < 0.06)
                verdict = 'inaccuracy';
            else if (shift < 0.14)
                verdict = 'mistake';
            else
                verdict = 'blunder';
        }
        return {
            prev,
            node,
            path,
            verdict,
            best: best ? {
                uci: best,
                san: root.position(prev).unwrap(pos => san_1.makeSan(pos, util_1.parseUci(best)), _ => '--'),
            } : undefined
        };
    }
    function isMyTurn() {
        return root.turnColor() === root.bottomColor();
    }
    ;
    function checkCeval() {
        const node = root.node;
        if (!running()) {
            comment(null);
            return root.redraw();
        }
        if (explorerCtrl_1.tablebaseGuaranteed(variant, node.fen) && !common_1.defined(node.tbhit))
            return;
        ensureCevalRunning();
        if (isMyTurn()) {
            const h = hinting();
            if (h) {
                h.uci = nodeBestUci(node) || h.uci;
                root.setAutoShapes();
            }
        }
        else {
            comment(null);
            if (node.san && commentable(node)) {
                const parentNode = root.tree.parentNode(root.path);
                if (commentable(parentNode, +1))
                    comment(makeComment(parentNode, node, root.path));
                else {
                    /*
                     * Looks like the parent node didn't get enough analysis time
                     * to be commentable :-/ it can happen if the player premoves
                     * or just makes a move before the position is sufficiently analysed.
                     * In this case, fall back to comparing to the position before,
                     * Since computer moves are supposed to preserve eval anyway.
                     */
                    const olderNode = root.tree.parentNode(tree_1.path.init(root.path));
                    if (commentable(olderNode, +1))
                        comment(makeComment(olderNode, node, root.path));
                }
            }
            if (!played() && playable(node)) {
                root.playUci(nodeBestUci(node));
                played(true);
            }
            else
                root.redraw();
        }
    }
    ;
    function checkCevalOrTablebase() {
        if (explorerCtrl_1.tablebaseGuaranteed(variant, root.node.fen))
            root.explorer.fetchTablebaseHit(root.node.fen).then(hit => {
                if (hit && root.node.fen === hit.fen)
                    root.node.tbhit = hit;
                checkCeval();
            }, () => {
                if (!common_1.defined(root.node.tbhit))
                    root.node.tbhit = null;
                checkCeval();
            });
        else
            checkCeval();
    }
    function resume() {
        running(true);
        checkCevalOrTablebase();
    }
    window.lichess.requestIdleCallback(checkCevalOrTablebase);
    return {
        onCeval: checkCeval,
        onJump() {
            played(false);
            hinting(null);
            nodeFinder_1.detectThreefold(root.nodeList, root.node);
            checkCevalOrTablebase();
        },
        isMyTurn,
        comment,
        running,
        hovering,
        hinting,
        resume,
        playableDepth,
        reset() {
            comment(null);
            hinting(null);
        },
        preUserJump(from, to) {
            if (from !== to) {
                running(false);
                comment(null);
            }
        },
        postUserJump(from, to) {
            if (from !== to && isMyTurn())
                resume();
        },
        onUserMove() {
            running(true);
        },
        playCommentBest() {
            const c = comment();
            if (!c)
                return;
            root.jump(tree_1.path.init(c.path));
            if (c.best)
                root.playUci(c.best.uci);
        },
        commentShape(enable) {
            const c = comment();
            if (!enable || !c || !c.best)
                hovering(null);
            else
                hovering({
                    uci: c.best.uci
                });
            root.setAutoShapes();
        },
        hint() {
            const best = root.node.ceval ? root.node.ceval.pvs[0].moves[0] : null, prev = hinting();
            if (!best || (prev && prev.mode === 'move'))
                hinting(null);
            else
                hinting({
                    mode: prev ? 'move' : 'piece',
                    uci: best
                });
            root.setAutoShapes();
        },
        currentNode: () => root.node,
        bottomColor: root.bottomColor,
        redraw: root.redraw
    };
}
exports.make = make;
;

},{"../explorer/explorerCtrl":51,"../nodeFinder":65,"ceval":113,"chessops/san":24,"chessops/util":28,"common":131,"tree":142}],68:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("chessground/util");
const util_2 = require("../util");
const snabbdom_1 = require("snabbdom");
function commentBest(c, root, ctrl) {
    return c.best ? root.trans.vdom(c.verdict === 'goodMove' ? 'anotherWasX' : 'bestWasX', snabbdom_1.h('move', {
        hook: {
            insert: vnode => {
                const el = vnode.elm;
                el.addEventListener('click', ctrl.playCommentBest);
                el.addEventListener('mouseover', () => ctrl.commentShape(true));
                el.addEventListener('mouseout', () => ctrl.commentShape(false));
            },
            destroy: () => ctrl.commentShape(false)
        }
    }, c.best.san)) : [];
}
function renderOffTrack(root, ctrl) {
    return snabbdom_1.h('div.player.off', [
        snabbdom_1.h('div.icon.off', '!'),
        snabbdom_1.h('div.instruction', [
            snabbdom_1.h('strong', root.trans.noarg('youBrowsedAway')),
            snabbdom_1.h('div.choices', [
                snabbdom_1.h('a', { hook: util_2.bind('click', ctrl.resume, ctrl.redraw) }, root.trans.noarg('resumePractice'))
            ])
        ])
    ]);
}
function renderEnd(root, end) {
    const isMate = end === 'checkmate';
    const color = isMate ? util_1.opposite(root.turnColor()) : root.turnColor();
    return snabbdom_1.h('div.player', [
        color ? snabbdom_1.h('div.no-square', snabbdom_1.h('piece.king.' + color)) : snabbdom_1.h('div.icon.off', '!'),
        snabbdom_1.h('div.instruction', [
            snabbdom_1.h('strong', root.trans.noarg(end)),
            isMate ?
                snabbdom_1.h('em', snabbdom_1.h('color', root.trans.noarg(color === 'white' ? 'whiteWinsGame' : 'blackWinsGame'))) :
                snabbdom_1.h('em', root.trans.noarg('theGameIsADraw'))
        ])
    ]);
}
const minDepth = 8;
function renderEvalProgress(node, maxDepth) {
    return snabbdom_1.h('div.progress', snabbdom_1.h('div', {
        attrs: {
            style: `width: ${node.ceval ? (100 * Math.max(0, node.ceval.depth - minDepth) / (maxDepth - minDepth)) + '%' : 0}`
        }
    }));
}
function renderRunning(root, ctrl) {
    const hint = ctrl.hinting();
    return snabbdom_1.h('div.player.running', [
        snabbdom_1.h('div.no-square', snabbdom_1.h('piece.king.' + root.turnColor())),
        snabbdom_1.h('div.instruction', (ctrl.isMyTurn() ? [snabbdom_1.h('strong', root.trans.noarg('yourTurn'))] : [
            snabbdom_1.h('strong', root.trans.noarg('computerThinking')),
            renderEvalProgress(ctrl.currentNode(), ctrl.playableDepth())
        ]).concat(snabbdom_1.h('div.choices', [
            ctrl.isMyTurn() ? snabbdom_1.h('a', {
                hook: util_2.bind('click', () => root.practice.hint(), ctrl.redraw)
            }, root.trans.noarg(hint ? (hint.mode === 'piece' ? 'seeBestMove' : 'hideBestMove') : 'getAHint')) : ''
        ])))
    ]);
}
function default_1(root) {
    const ctrl = root.practice;
    if (!ctrl)
        return;
    const comment = ctrl.comment();
    const running = ctrl.running();
    const end = ctrl.currentNode().threefold ? 'threefoldRepetition' : root.gameOver();
    return snabbdom_1.h('div.practice-box.training-box.sub-box.' + (comment ? comment.verdict : 'no-verdict'), [
        snabbdom_1.h('div.title', root.trans.noarg('practiceWithComputer')),
        snabbdom_1.h('div.feedback', !running ? renderOffTrack(root, ctrl) : (end ? renderEnd(root, end) : renderRunning(root, ctrl))),
        running ? snabbdom_1.h('div.comment', comment ? [
            snabbdom_1.h('span.verdict', root.trans.noarg(comment.verdict)),
            ' '
        ].concat(commentBest(comment, root, ctrl)) : [ctrl.isMyTurn() || end ? '' : snabbdom_1.h('span.wait', root.trans.noarg('evaluatingYourMove'))]) : (running ? snabbdom_1.h('div.comment') : null)
    ]);
}
exports.default = default_1;
;

},{"../util":110,"chessground/util":18,"snabbdom":35}],69:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const ground = require("./ground");
const util_1 = require("./util");
const util = require("chessground/util");
let promoting;
function start(ctrl, orig, dest, capture, callback) {
    var s = ctrl.chessground.state;
    var piece = s.pieces[dest];
    if (piece && piece.role == 'pawn' && ((dest[1] == '8' && s.turnColor == 'black') ||
        (dest[1] == '1' && s.turnColor == 'white'))) {
        promoting = {
            orig,
            dest,
            capture,
            callback
        };
        ctrl.redraw();
        return true;
    }
    return false;
}
exports.start = start;
function finish(ctrl, role) {
    if (promoting) {
        ground.promote(ctrl.chessground, promoting.dest, role);
        if (promoting.callback)
            promoting.callback(promoting.orig, promoting.dest, promoting.capture, role);
    }
    promoting = undefined;
}
function cancel(ctrl) {
    if (promoting) {
        promoting = undefined;
        ctrl.chessground.set(ctrl.cgConfig);
        ctrl.redraw();
    }
}
exports.cancel = cancel;
function renderPromotion(ctrl, dest, pieces, color, orientation) {
    if (!promoting)
        return;
    let left = (8 - util.key2pos(dest)[0]) * 12.5;
    if (orientation === 'white')
        left = 87.5 - left;
    const vertical = color === orientation ? 'top' : 'bottom';
    return snabbdom_1.h('div#promotion-choice.' + vertical, {
        hook: util_1.onInsert(el => {
            el.addEventListener('click', _ => cancel(ctrl));
            el.oncontextmenu = () => false;
        })
    }, pieces.map(function (serverRole, i) {
        const top = (color === orientation ? i : 7 - i) * 12.5;
        return snabbdom_1.h('square', {
            attrs: {
                style: 'top:' + top + '%;left:' + left + '%'
            },
            hook: util_1.bind('click', e => {
                e.stopPropagation();
                finish(ctrl, serverRole);
            })
        }, [snabbdom_1.h('piece.' + serverRole + '.' + color)]);
    }));
}
function view(ctrl) {
    if (!promoting)
        return;
    var pieces = ['queen', 'knight', 'rook', 'bishop'];
    if (ctrl.data.game.variant.key === "antichess")
        pieces.push('king');
    return renderPromotion(ctrl, promoting.dest, pieces, util.opposite(ctrl.chessground.state.turnColor), ctrl.chessground.state.orientation);
}
exports.view = view;

},{"./ground":60,"./util":110,"chessground/util":18,"snabbdom":35}],70:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const nodeFinder_1 = require("../nodeFinder");
const ceval_1 = require("ceval");
const tree_1 = require("tree");
const common_1 = require("common");
function make(root) {
    const game = root.data.game;
    const color = root.bottomColor();
    let candidateNodes = [];
    const explorerCancelPlies = [];
    let solvedPlies = [];
    const current = common_1.prop(null);
    const feedback = common_1.prop('find');
    const redraw = root.redraw;
    function isPlySolved(ply) {
        return solvedPlies.includes(ply);
    }
    ;
    function findNextNode() {
        const colorModulo = root.bottomIsWhite() ? 1 : 0;
        candidateNodes = nodeFinder_1.evalSwings(root.mainline, n => n.ply % 2 === colorModulo && !explorerCancelPlies.includes(n.ply));
        return candidateNodes.find(n => !isPlySolved(n.ply));
    }
    ;
    function jumpToNext() {
        feedback('find');
        const node = findNextNode();
        if (!node) {
            current(null);
            return redraw();
        }
        const fault = {
            node,
            path: root.mainlinePathToPly(node.ply)
        };
        const prevPath = tree_1.path.init(fault.path);
        const prev = {
            node: root.tree.nodeAtPath(prevPath),
            path: prevPath
        };
        const solutionNode = prev.node.children.find(n => !!n.comp);
        current({
            fault,
            prev,
            solution: {
                node: solutionNode,
                path: prevPath + solutionNode.id
            },
            openingUcis: []
        });
        // fetch opening explorer moves
        if (game.variant.key === 'standard' && game.division && (!game.division.middle || fault.node.ply < game.division.middle)) {
            root.explorer.fetchMasterOpening(prev.node.fen).then((res) => {
                const cur = current();
                const ucis = [];
                res.moves.forEach(m => {
                    if (m.white + m.draws + m.black > 1)
                        ucis.push(m.uci);
                });
                if (ucis.includes(fault.node.uci)) {
                    explorerCancelPlies.push(fault.node.ply);
                    setTimeout(jumpToNext, 100);
                }
                else {
                    cur.openingUcis = ucis;
                    current(cur);
                }
            });
        }
        root.userJump(prev.path);
        redraw();
    }
    ;
    function onJump() {
        const node = root.node, fb = feedback(), cur = current();
        if (!cur)
            return;
        if (fb === 'eval' && cur.fault.node.ply !== node.ply) {
            feedback('find');
            root.setAutoShapes();
            return;
        }
        if (isSolving() && cur.fault.node.ply === node.ply) {
            if (cur.openingUcis.includes(node.uci))
                onWin(); // found in opening explorer
            else if (node.comp)
                onWin(); // the computer solution line
            else if (node.eval)
                onFail(); // the move that was played in the game
            else {
                feedback('eval');
                if (!root.ceval.enabled())
                    root.toggleCeval();
                checkCeval();
            }
        }
        root.setAutoShapes();
    }
    ;
    function isCevalReady(node) {
        return node.ceval ? (node.ceval.depth >= 18 ||
            (node.ceval.depth >= 14 && node.ceval.millis > 7000)) : false;
    }
    ;
    function checkCeval() {
        var node = root.node, cur = current();
        if (!cur || feedback() !== 'eval' || cur.fault.node.ply !== node.ply)
            return;
        if (isCevalReady(node)) {
            var diff = ceval_1.winningChances.povDiff(color, node.ceval, cur.prev.node.eval);
            if (diff > -0.035)
                onWin();
            else
                onFail();
        }
    }
    function onWin() {
        solveCurrent();
        feedback('win');
        redraw();
    }
    function onFail() {
        feedback('fail');
        const bad = {
            node: root.node,
            path: root.path
        };
        root.userJump(current().prev.path);
        if (!root.tree.pathIsMainline(bad.path) && common_1.empty(bad.node.children))
            root.tree.deleteNodeAt(bad.path);
        redraw();
    }
    function viewSolution() {
        feedback('view');
        root.userJump(current().solution.path);
        solveCurrent();
    }
    function skip() {
        solveCurrent();
        jumpToNext();
    }
    function solveCurrent() {
        solvedPlies.push(current().fault.node.ply);
    }
    function hideComputerLine(node) {
        return (node.ply % 2 === 0) !== (color === 'white') && !isPlySolved(node.ply);
    }
    ;
    function showBadNode() {
        const cur = current();
        if (cur && isSolving() && cur.prev.path === root.path)
            return cur.fault.node;
    }
    function isSolving() {
        const fb = feedback();
        return fb === 'find' || fb === 'fail';
    }
    jumpToNext();
    function onMergeAnalysisData() {
        if (isSolving() && !current())
            jumpToNext();
    }
    return {
        current,
        color,
        isPlySolved,
        onJump,
        jumpToNext,
        skip,
        viewSolution,
        hideComputerLine,
        showBadNode,
        onCeval: checkCeval,
        onMergeAnalysisData,
        feedback,
        isSolving,
        completion: () => [solvedPlies.length, candidateNodes.length],
        reset() {
            solvedPlies = [];
            jumpToNext();
        },
        close: root.toggleRetro,
        trans: root.trans,
        noarg: root.trans.noarg,
        node: () => root.node,
        redraw
    };
}
exports.make = make;
;

},{"../nodeFinder":65,"ceval":113,"common":131,"tree":142}],71:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const moveView_1 = require("../moveView");
const util_1 = require("../util");
const snabbdom_1 = require("snabbdom");
function skipOrViewSolution(ctrl) {
    return snabbdom_1.h('div.choices', [
        snabbdom_1.h('a', {
            hook: util_1.bind('click', ctrl.viewSolution, ctrl.redraw)
        }, ctrl.noarg('viewTheSolution')),
        snabbdom_1.h('a', {
            hook: util_1.bind('click', ctrl.skip)
        }, ctrl.noarg('skipThisMove'))
    ]);
}
function jumpToNext(ctrl) {
    return snabbdom_1.h('a.half.continue', {
        hook: util_1.bind('click', ctrl.jumpToNext)
    }, [
        snabbdom_1.h('i', { attrs: util_1.dataIcon('G') }),
        ctrl.noarg('next')
    ]);
}
const minDepth = 8;
const maxDepth = 18;
function renderEvalProgress(node) {
    return snabbdom_1.h('div.progress', snabbdom_1.h('div', {
        attrs: {
            style: `width: ${node.ceval ? (100 * Math.max(0, node.ceval.depth - minDepth) / (maxDepth - minDepth)) + '%' : 0}`
        }
    }));
}
const feedback = {
    find(ctrl) {
        return [
            snabbdom_1.h('div.player', [
                snabbdom_1.h('div.no-square', snabbdom_1.h('piece.king.' + ctrl.color)),
                snabbdom_1.h('div.instruction', [
                    snabbdom_1.h('strong', ctrl.trans.vdom('xWasPlayed', snabbdom_1.h('move', moveView_1.renderIndexAndMove({
                        withDots: true,
                        showGlyphs: true,
                        showEval: false
                    }, ctrl.current().fault.node)))),
                    snabbdom_1.h('em', ctrl.noarg(ctrl.color === 'white' ? 'findBetterMoveForWhite' : 'findBetterMoveForBlack')),
                    skipOrViewSolution(ctrl)
                ])
            ])
        ];
    },
    // user has browsed away from the move to solve
    offTrack(ctrl) {
        return [
            snabbdom_1.h('div.player', [
                snabbdom_1.h('div.icon.off', '!'),
                snabbdom_1.h('div.instruction', [
                    snabbdom_1.h('strong', ctrl.noarg('youBrowsedAway')),
                    snabbdom_1.h('div.choices.off', [
                        snabbdom_1.h('a', {
                            hook: util_1.bind('click', ctrl.jumpToNext)
                        }, ctrl.noarg('resumeLearning'))
                    ])
                ])
            ])
        ];
    },
    fail(ctrl) {
        return [
            snabbdom_1.h('div.player', [
                snabbdom_1.h('div.icon', ''),
                snabbdom_1.h('div.instruction', [
                    snabbdom_1.h('strong', ctrl.noarg('youCanDoBetter')),
                    snabbdom_1.h('em', ctrl.noarg(ctrl.color === 'white' ? 'tryAnotherMoveForWhite' : 'tryAnotherMoveForBlack')),
                    skipOrViewSolution(ctrl)
                ])
            ])
        ];
    },
    win(ctrl) {
        return [
            snabbdom_1.h('div.half.top', snabbdom_1.h('div.player', [
                snabbdom_1.h('div.icon', ''),
                snabbdom_1.h('div.instruction', snabbdom_1.h('strong', ctrl.noarg('goodMove')))
            ])),
            jumpToNext(ctrl)
        ];
    },
    view(ctrl) {
        return [
            snabbdom_1.h('div.half.top', snabbdom_1.h('div.player', [
                snabbdom_1.h('div.icon', ''),
                snabbdom_1.h('div.instruction', [
                    snabbdom_1.h('strong', ctrl.noarg('solution')),
                    snabbdom_1.h('em', ctrl.trans.vdom('bestWasX', snabbdom_1.h('strong', moveView_1.renderIndexAndMove({
                        withDots: true,
                        showEval: false
                    }, ctrl.current().solution.node))))
                ])
            ])),
            jumpToNext(ctrl)
        ];
    },
    eval(ctrl) {
        return [
            snabbdom_1.h('div.half.top', snabbdom_1.h('div.player.center', [
                snabbdom_1.h('div.instruction', [
                    snabbdom_1.h('strong', ctrl.noarg('evaluatingYourMove')),
                    renderEvalProgress(ctrl.node())
                ])
            ]))
        ];
    },
    end(ctrl, flip, hasFullComputerAnalysis) {
        if (!hasFullComputerAnalysis())
            return [
                snabbdom_1.h('div.half.top', snabbdom_1.h('div.player', [
                    snabbdom_1.h('div.icon', util_1.spinner()),
                    snabbdom_1.h('div.instruction', ctrl.noarg('waitingForAnalysis'))
                ]))
            ];
        const nothing = !ctrl.completion()[1];
        return [
            snabbdom_1.h('div.player', [
                snabbdom_1.h('div.no-square', snabbdom_1.h('piece.king.' + ctrl.color)),
                snabbdom_1.h('div.instruction', [
                    snabbdom_1.h('em', nothing ?
                        ctrl.noarg(ctrl.color === 'white' ? 'noMistakesFoundForWhite' : 'noMistakesFoundForBlack') :
                        ctrl.noarg(ctrl.color === 'white' ? 'doneReviewingWhiteMistakes' : 'doneReviewingBlackMistakes')),
                    snabbdom_1.h('div.choices.end', [
                        nothing ? null : snabbdom_1.h('a', {
                            hook: util_1.bind('click', ctrl.reset)
                        }, ctrl.noarg('doItAgain')),
                        snabbdom_1.h('a', {
                            hook: util_1.bind('click', flip)
                        }, ctrl.noarg(ctrl.color === 'white' ? 'reviewBlackMistakes' : 'reviewWhiteMistakes'))
                    ])
                ])
            ])
        ];
    },
};
function renderFeedback(root, fb) {
    const ctrl = root.retro;
    const current = ctrl.current();
    if (ctrl.isSolving() && current && root.path !== current.prev.path)
        return feedback.offTrack(ctrl);
    if (fb === 'find')
        return current ? feedback.find(ctrl) :
            feedback.end(ctrl, root.flip, root.hasFullComputerAnalysis);
    return feedback[fb](ctrl);
}
function default_1(root) {
    const ctrl = root.retro;
    if (!ctrl)
        return;
    const fb = ctrl.feedback(), completion = ctrl.completion();
    return snabbdom_1.h('div.retro-box.training-box.sub-box', [
        snabbdom_1.h('div.title', [
            snabbdom_1.h('span', ctrl.noarg('learnFromYourMistakes')),
            snabbdom_1.h('span', Math.min(completion[0] + 1, completion[1]) + ' / ' + completion[1])
        ]),
        snabbdom_1.h('div.feedback.' + fb, renderFeedback(root, fb))
    ]);
}
exports.default = default_1;
;

},{"../moveView":64,"../util":110,"snabbdom":35}],72:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("common");
const util_1 = require("./util");
function default_1(element, ctrl) {
    const li = window.lichess;
    $(element).replaceWith(ctrl.opts.$underboard);
    $('#adv-chart').attr('id', 'acpl-chart');
    const data = ctrl.data, $panels = $('.analyse__underboard__panels > div'), $menu = $('.analyse__underboard__menu'), $timeChart = $("#movetimes-chart"), inputFen = document.querySelector('.analyse__underboard__fen'), unselect = chart => {
        chart.getSelectedPoints().forEach(function (point) {
            point.select(false);
        });
    };
    let lastFen;
    if (!li.AnalyseNVUI) {
        li.pubsub.on('analysis.comp.toggle', (v) => {
            setTimeout(function () {
                (v ? $menu.find('[data-panel="computer-analysis"]') : $menu.find('span:eq(1)')).trigger('mousedown');
            }, 50);
        });
        li.pubsub.on('analysis.change', (fen, _, mainlinePly) => {
            let chart, point, $chart = $("#acpl-chart");
            if (fen && fen !== lastFen) {
                inputFen.value = fen;
                lastFen = fen;
            }
            if ($chart.length) {
                chart = window.Highcharts && $chart.highcharts();
                if (chart) {
                    if (mainlinePly != chart.lastPly) {
                        if (mainlinePly === false)
                            unselect(chart);
                        else {
                            point = chart.series[0].data[mainlinePly - 1 - data.game.startedAtTurn];
                            if (common_1.defined(point))
                                point.select();
                            else
                                unselect(chart);
                        }
                    }
                    chart.lastPly = mainlinePly;
                }
            }
            if ($timeChart.length) {
                chart = window.Highcharts && $timeChart.highcharts();
                if (chart) {
                    if (mainlinePly != chart.lastPly) {
                        if (mainlinePly === false)
                            unselect(chart);
                        else {
                            const white = mainlinePly % 2 !== 0;
                            const serie = white ? 0 : 1;
                            const turn = Math.floor((mainlinePly - 1 - data.game.startedAtTurn) / 2);
                            point = chart.series[serie].data[turn];
                            if (common_1.defined(point))
                                point.select();
                            else
                                unselect(chart);
                        }
                    }
                    chart.lastPly = mainlinePly;
                }
            }
        });
        li.pubsub.on('analysis.server.progress', (d) => {
            if (!li.advantageChart)
                startAdvantageChart();
            else if (li.advantageChart.update)
                li.advantageChart.update(d);
            if (d.analysis && !d.analysis.partial)
                $("#acpl-chart-loader").remove();
        });
    }
    function chartLoader() {
        return '<div id="acpl-chart-loader">' +
            '<span>' + li.engineName + '<br>server analysis</span>' +
            li.spinnerHtml +
            '</div>';
    }
    ;
    function startAdvantageChart() {
        if (li.advantageChart || li.AnalyseNVUI)
            return;
        const loading = !data.treeParts[0].eval || !Object.keys(data.treeParts[0].eval).length;
        const $panel = $panels.filter('.computer-analysis');
        if (!$("#acpl-chart").length)
            $panel.html('<div id="acpl-chart"></div>' + (loading ? chartLoader() : ''));
        else if (loading && !$("#acpl-chart-loader").length)
            $panel.append(chartLoader());
        li.loadScript('javascripts/chart/acpl.js').then(function () {
            li.advantageChart(data, ctrl.trans, $("#acpl-chart")[0]);
        });
    }
    ;
    const storage = li.storage.make('analysis.panel');
    const setPanel = function (panel) {
        $menu.children('.active').removeClass('active').end().find(`[data-panel="${panel}"]`).addClass('active');
        $panels.removeClass('active').filter('.' + panel).addClass('active');
        if (panel == 'move-times' && !li.movetimeChart)
            try {
                li.loadScript('javascripts/chart/movetime.js').then(function () {
                    li.movetimeChart(data, ctrl.trans);
                });
            }
            catch (e) { }
        if (panel == 'computer-analysis' && $("#acpl-chart").length)
            setTimeout(startAdvantageChart, 200);
    };
    $menu.on('mousedown', 'span', function () {
        const panel = $(this).data('panel');
        storage.set(panel);
        setPanel(panel);
    });
    const stored = storage.get();
    if (stored && $menu.children(`[data-panel="${stored}"]:visible`).length)
        setPanel(stored);
    else {
        const $menuCt = $menu.children('[data-panel="ctable"]');
        ($menuCt.length ? $menuCt : $menu.children(':first-child')).trigger('mousedown');
    }
    if (!data.analysis) {
        $panels.find('form.future-game-analysis').submit(function () {
            if ($(this).hasClass('must-login')) {
                if (confirm(ctrl.trans('youNeedAnAccountToDoThat')))
                    location.href = '/signup';
                return false;
            }
            $.ajax(Object.assign(Object.assign({}, li.formAjax($(this))), { success: startAdvantageChart, error: li.reload }));
            return false;
        });
    }
    $panels.on('click', '.pgn', function () {
        const selection = window.getSelection(), range = document.createRange();
        range.selectNodeContents(this);
        selection.removeAllRanges();
        selection.addRange(range);
    });
    $panels.on('click', '.embed-howto', function () {
        const url = `${util_1.baseUrl()}/embed/${data.game.id}${location.hash}`;
        const iframe = '<iframe src="' + url + '?theme=auto&bg=auto"\nwidth=600 height=397 frameborder=0></iframe>';
        $.modal($('<strong style="font-size:1.5em">' + $(this).html() + '</strong><br /><br />' +
            '<pre>' + li.escapeHtml(iframe) + '</pre><br />' +
            iframe + '<br /><br />' +
            '<a class="text" data-icon="" href="/developers#embed-game">Read more about embedding games</a>'));
    });
}
exports.default = default_1;

},{"./util":110,"common":131}],73:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fen_1 = require("chessground/fen");
const tree_1 = require("tree");
function make(send, ctrl) {
    let anaMoveTimeout;
    let anaDestsTimeout;
    let anaDestsCache = {};
    function clearCache() {
        anaDestsCache = (ctrl.data.game.variant.key === 'standard' &&
            ctrl.tree.root.fen.split(' ', 1)[0] === fen_1.initial) ? {
            '': {
                path: '',
                dests: 'iqy muC gvx ltB bqs pxF jrz nvD ksA owE'
            }
        } : {};
    }
    clearCache();
    // forecast mode: reload when opponent moves
    if (!ctrl.synthetic)
        setTimeout(function () {
            send("startWatching", ctrl.data.game.id);
        }, 1000);
    function currentChapterId() {
        if (ctrl.study)
            return ctrl.study.vm.chapterId;
    }
    ;
    function addStudyData(req, isWrite = false) {
        var c = currentChapterId();
        if (c) {
            req.ch = c;
            if (isWrite) {
                if (ctrl.study.isWriting()) {
                    if (!ctrl.study.vm.mode.sticky)
                        req.sticky = false;
                }
                else
                    req.write = false;
            }
        }
    }
    ;
    const handlers = {
        node(data) {
            clearTimeout(anaMoveTimeout);
            // no strict equality here!
            if (data.ch == currentChapterId())
                ctrl.addNode(data.node, data.path);
            else
                console.log('socket handler node got wrong chapter id', data);
        },
        stepFailure() {
            clearTimeout(anaMoveTimeout);
            ctrl.reset();
        },
        dests(data) {
            clearTimeout(anaDestsTimeout);
            if (!data.ch || data.ch === currentChapterId()) {
                anaDestsCache[data.path] = data;
                ctrl.addDests(data.dests, data.path, data.opening);
            }
            else
                console.log('socket handler node got wrong chapter id', data);
        },
        destsFailure(data) {
            console.log(data);
            clearTimeout(anaDestsTimeout);
        },
        fen(e) {
            if (ctrl.forecast &&
                e.id === ctrl.data.game.id &&
                tree_1.ops.last(ctrl.mainline).fen.indexOf(e.fen) !== 0) {
                ctrl.forecast.reloadToLastPly();
            }
        },
        analysisProgress(data) {
            ctrl.mergeAnalysisData(data);
        },
        evalHit(e) {
            ctrl.evalCache.onCloudEval(e);
        },
        crowd(d) {
            ctrl.evalCache.upgradable(d.nb > 2);
        }
    };
    function withoutStandardVariant(obj) {
        if (obj.variant === 'standard')
            delete obj.variant;
    }
    function sendAnaDests(req) {
        clearTimeout(anaDestsTimeout);
        if (anaDestsCache[req.path])
            setTimeout(function () {
                handlers.dests(anaDestsCache[req.path]);
            }, 300);
        else {
            withoutStandardVariant(req);
            addStudyData(req);
            send('anaDests', req);
            anaDestsTimeout = setTimeout(function () {
                console.log(req, 'resendAnaDests');
                sendAnaDests(req);
            }, 3000);
        }
    }
    function sendAnaMove(req) {
        clearTimeout(anaMoveTimeout);
        withoutStandardVariant(req);
        addStudyData(req, true);
        send('anaMove', req);
        anaMoveTimeout = setTimeout(() => sendAnaMove(req), 3000);
    }
    function sendAnaDrop(req) {
        clearTimeout(anaMoveTimeout);
        withoutStandardVariant(req);
        addStudyData(req, true);
        send('anaDrop', req);
        anaMoveTimeout = setTimeout(() => sendAnaDrop(req), 3000);
    }
    return {
        receive(type, data) {
            const handler = handlers[type];
            if (handler)
                handler(data);
            return !!ctrl.study && ctrl.study.socketHandler(type, data);
        },
        sendAnaMove,
        sendAnaDrop,
        sendAnaDests,
        sendForecasts(req) { send('forecasts', req); },
        clearCache,
        send
    };
}
exports.make = make;

},{"chessground/fen":12,"tree":142}],74:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function setup() {
    window.lichess.pubsub.on('speech.enabled', onSpeechChange);
    onSpeechChange(window.lichess.sound.speech());
}
exports.setup = setup;
function onSpeechChange(enabled) {
    if (!window.LichessSpeech && enabled)
        window.lichess.loadScript(window.lichess.compiledScript('speech'));
    else if (window.LichessSpeech && !enabled)
        window.LichessSpeech = undefined;
}
function node(n) {
    withSpeech(s => s.step(n, true));
}
exports.node = node;
function withSpeech(f) {
    if (window.LichessSpeech)
        f(window.LichessSpeech);
}

},{}],75:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const common_1 = require("common");
const util_1 = require("../util");
const modal = require("../modal");
const chapterForm = require("./chapterNewForm");
function ctrl(send, chapterConfig, trans, redraw) {
    const current = common_1.prop(null);
    function open(data) {
        current({
            id: data.id,
            name: data.name
        });
        chapterConfig(data.id).then(d => {
            current(d);
            redraw();
        });
    }
    ;
    function isEditing(id) {
        const c = current();
        return c ? c.id === id : false;
    }
    ;
    return {
        open,
        toggle(data) {
            if (isEditing(data.id))
                current(null);
            else
                open(data);
        },
        current,
        submit(data) {
            const c = current();
            if (c) {
                data.id = c.id;
                send("editChapter", data);
                current(null);
            }
            redraw();
        },
        delete(id) {
            send("deleteChapter", id);
            current(null);
        },
        clearAnnotations(id) {
            send("clearAnnotations", id);
            current(null);
        },
        isEditing,
        trans,
        redraw
    };
}
exports.ctrl = ctrl;
function view(ctrl) {
    const data = ctrl.current();
    return data ? modal.modal({
        class: 'edit-' + data.id,
        onClose() {
            ctrl.current(null);
            ctrl.redraw();
        },
        content: [
            snabbdom_1.h('h2', ctrl.trans.noarg('editChapter')),
            snabbdom_1.h('form.form3', {
                hook: util_1.bindSubmit(e => {
                    const o = {};
                    'name mode orientation description'.split(' ').forEach(field => {
                        o[field] = chapterForm.fieldValue(e, field);
                    });
                    ctrl.submit(o);
                })
            }, [
                snabbdom_1.h('div.form-group', [
                    snabbdom_1.h('label.form-label', {
                        attrs: { for: 'chapter-name' }
                    }, ctrl.trans.noarg('name')),
                    snabbdom_1.h('input#chapter-name.form-control', {
                        attrs: {
                            minlength: 2,
                            maxlength: 80
                        },
                        hook: util_1.onInsert(el => {
                            if (!el.value) {
                                el.value = data.name;
                                el.select();
                                el.focus();
                            }
                        })
                    })
                ]),
                ...(isLoaded(data) ? viewLoaded(ctrl, data) : [util_1.spinner()])
            ]),
            snabbdom_1.h('div.destructive', [
                snabbdom_1.h(util_1.emptyRedButton, {
                    hook: util_1.bind('click', _ => {
                        if (confirm(ctrl.trans.noarg('clearAllCommentsInThisChapter')))
                            ctrl.clearAnnotations(data.id);
                    })
                }, ctrl.trans.noarg('clearAnnotations')),
                snabbdom_1.h(util_1.emptyRedButton, {
                    hook: util_1.bind('click', _ => {
                        if (confirm(ctrl.trans.noarg('deleteThisChapter')))
                            ctrl.delete(data.id);
                    })
                }, ctrl.trans.noarg('deleteChapter'))
            ])
        ]
    }) : undefined;
}
exports.view = view;
function isLoaded(data) {
    return !!data['orientation'];
}
function viewLoaded(ctrl, data) {
    const mode = data.practice ? 'practice' : (common_1.defined(data.conceal) ? 'conceal' : (data.gamebook ? 'gamebook' : 'normal'));
    return [
        snabbdom_1.h('div.form-split', [
            snabbdom_1.h('div.form-group.form-half', [
                snabbdom_1.h('label.form-label', {
                    attrs: { for: 'chapter-orientation' }
                }, ctrl.trans.noarg('orientation')),
                snabbdom_1.h('select#chapter-orientation.form-control', ['white', 'black'].map(function (color) {
                    return util_1.option(color, data.orientation, ctrl.trans.noarg(color));
                }))
            ]),
            snabbdom_1.h('div.form-group.form-half', [
                snabbdom_1.h('label.form-label', {
                    attrs: { for: 'chapter-mode' }
                }, ctrl.trans.noarg('analysisMode')),
                snabbdom_1.h('select#chapter-mode.form-control', chapterForm.modeChoices.map(c => {
                    return util_1.option(c[0], mode, ctrl.trans.noarg(c[1]));
                }))
            ])
        ]),
        snabbdom_1.h('div.form-group', [
            snabbdom_1.h('label.form-label', {
                attrs: { for: 'chapter-description' }
            }, ctrl.trans.noarg('pinnedChapterComment')),
            snabbdom_1.h('select#chapter-description.form-control', [
                ['', ctrl.trans.noarg('noPinnedComment')],
                ['1', ctrl.trans.noarg('rightUnderTheBoard')]
            ].map(v => util_1.option(v[0], data.description ? '1' : '', v[1])))
        ]),
        modal.button(ctrl.trans.noarg('saveChapter'))
    ];
}

},{"../modal":63,"../util":110,"./chapterNewForm":76,"common":131,"snabbdom":35}],76:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const common_1 = require("common");
const storage_1 = require("common/storage");
const util_1 = require("../util");
const studyXhr_1 = require("./studyXhr");
const modal = require("../modal");
const studyTour_1 = require("./studyTour");
exports.modeChoices = [
    ['normal', 'normalAnalysis'],
    ['practice', 'practiceWithComputer'],
    ['conceal', 'hideNextMoves'],
    ['gamebook', 'interactiveLesson']
];
function fieldValue(e, id) {
    const el = e.target.querySelector('#chapter-' + id);
    return el ? el.value : null;
}
exports.fieldValue = fieldValue;
;
function ctrl(send, chapters, setTab, root) {
    const multiPgnMax = 20;
    const vm = {
        variants: [],
        open: false,
        initial: common_1.prop(false),
        tab: storage_1.storedProp('study.form.tab', 'init'),
        editor: null,
        editorFen: common_1.prop(null)
    };
    function loadVariants() {
        if (!vm.variants.length)
            studyXhr_1.variants().then(function (vs) {
                vm.variants = vs;
                root.redraw();
            });
    }
    ;
    function open() {
        vm.open = true;
        loadVariants();
        vm.initial(false);
    }
    function close() {
        vm.open = false;
    }
    return {
        vm,
        open,
        root,
        openInitial() {
            open();
            vm.initial(true);
        },
        close,
        toggle() {
            if (vm.open)
                close();
            else
                open();
        },
        submit(d) {
            const study = root.study;
            d.initial = vm.initial();
            d.sticky = study.vm.mode.sticky;
            if (!d.pgn)
                send("addChapter", d);
            else
                studyXhr_1.importPgn(study.data.id, d);
            close();
            setTab();
        },
        chapters,
        startTour: () => studyTour_1.chapter(tab => {
            vm.tab(tab);
            root.redraw();
        }),
        multiPgnMax,
        redraw: root.redraw
    };
}
exports.ctrl = ctrl;
function view(ctrl) {
    const trans = ctrl.root.trans;
    const activeTab = ctrl.vm.tab();
    const makeTab = function (key, name, title) {
        return snabbdom_1.h('span.' + key, {
            class: { active: activeTab === key },
            attrs: { title },
            hook: util_1.bind('click', () => ctrl.vm.tab(key), ctrl.root.redraw)
        }, name);
    };
    const gameOrPgn = activeTab === 'game' || activeTab === 'pgn';
    const currentChapter = ctrl.root.study.data.chapter;
    const mode = currentChapter.practice ? 'practice' : (common_1.defined(currentChapter.conceal) ? 'conceal' : (currentChapter.gamebook ? 'gamebook' : 'normal'));
    return modal.modal({
        class: 'chapter-new',
        onClose() {
            ctrl.close();
            ctrl.redraw();
        },
        content: [
            activeTab === 'edit' ? null : snabbdom_1.h('h2', [
                trans.noarg('newChapter'),
                snabbdom_1.h('i.help', {
                    attrs: { 'data-icon': '' },
                    hook: util_1.bind('click', ctrl.startTour)
                })
            ]),
            snabbdom_1.h('form.form3', {
                hook: util_1.bindSubmit(e => {
                    const o = {
                        fen: fieldValue(e, 'fen') || (ctrl.vm.tab() === 'edit' ? ctrl.vm.editorFen() : null)
                    };
                    'name game variant pgn orientation mode'.split(' ').forEach(field => {
                        o[field] = fieldValue(e, field);
                    });
                    ctrl.submit(o);
                }, ctrl.redraw)
            }, [
                snabbdom_1.h('div.form-group', [
                    snabbdom_1.h('label.form-label', {
                        attrs: { for: 'chapter-name' }
                    }, trans.noarg('name')),
                    snabbdom_1.h('input#chapter-name.form-control', {
                        attrs: {
                            minlength: 2,
                            maxlength: 80
                        },
                        hook: util_1.onInsert(el => {
                            if (!el.value) {
                                el.value = trans('chapterX', (ctrl.vm.initial() ? 1 : (ctrl.chapters().length + 1)));
                                el.select();
                                el.focus();
                            }
                        })
                    })
                ]),
                snabbdom_1.h('div.tabs-horiz', [
                    makeTab('init', trans.noarg('empty'), trans.noarg('startFromInitialPosition')),
                    makeTab('edit', trans.noarg('editor'), trans.noarg('startFromCustomPosition')),
                    makeTab('game', 'URL', trans.noarg('loadAGameByUrl')),
                    makeTab('fen', 'FEN', trans.noarg('loadAPositionFromFen')),
                    makeTab('pgn', 'PGN', trans.noarg('loadAGameFromPgn'))
                ]),
                activeTab === 'edit' ? snabbdom_1.h('div.board-editor-wrap', {
                    hook: {
                        insert: vnode => {
                            $.when(window.lichess.loadScript('compiled/lichess.editor.min.js'), $.get('/editor.json', {
                                fen: ctrl.root.node.fen
                            })).then(function (_, b) {
                                const data = b[0];
                                data.embed = true;
                                data.options = {
                                    inlineCastling: true,
                                    onChange: ctrl.vm.editorFen
                                };
                                ctrl.vm.editor = window['LichessEditor'](vnode.elm, data);
                                ctrl.vm.editorFen(ctrl.vm.editor.getFen());
                            });
                        },
                        destroy: _ => {
                            ctrl.vm.editor = null;
                        }
                    }
                }, [util_1.spinner()]) : null,
                activeTab === 'game' ? snabbdom_1.h('div.form-group', [
                    snabbdom_1.h('label.form-label', {
                        attrs: { 'for': 'chapter-game' }
                    }, trans('loadAGameFromXOrY', 'lichess.org', 'chessgames.com')),
                    snabbdom_1.h('input#chapter-game.form-control', {
                        attrs: { placeholder: trans.noarg('urlOfTheGame') }
                    })
                ]) : null,
                activeTab === 'fen' ? snabbdom_1.h('div.form-group', [
                    snabbdom_1.h('input#chapter-fen.form-control', {
                        attrs: {
                            value: ctrl.root.node.fen,
                            placeholder: trans.noarg('loadAPositionFromFen')
                        }
                    })
                ]) : null,
                activeTab === 'pgn' ? snabbdom_1.h('div.form-groupabel', [
                    snabbdom_1.h('textarea#chapter-pgn.form-control', {
                        attrs: { placeholder: trans.plural('pasteYourPgnTextHereUpToNbGames', ctrl.multiPgnMax) }
                    }),
                    window.FileReader ? snabbdom_1.h('input#chapter-pgn-file.form-control', {
                        attrs: {
                            type: 'file',
                            accept: '.pgn'
                        },
                        hook: util_1.bind('change', e => {
                            const file = e.target.files[0];
                            if (!file)
                                return;
                            const reader = new FileReader();
                            reader.onload = function () {
                                document.getElementById('chapter-pgn').value = reader.result;
                            };
                            reader.readAsText(file);
                        })
                    }) : null
                ]) : null,
                snabbdom_1.h('div.form-split', [
                    snabbdom_1.h('div.form-group.form-half', [
                        snabbdom_1.h('label.form-label', {
                            attrs: { 'for': 'chapter-variant' }
                        }, trans.noarg('Variant')),
                        snabbdom_1.h('select#chapter-variant.form-control', {
                            attrs: { disabled: gameOrPgn }
                        }, gameOrPgn ? [
                            snabbdom_1.h('option', trans.noarg('automatic'))
                        ] :
                            ctrl.vm.variants.map(v => util_1.option(v.key, currentChapter.setup.variant.key, v.name)))
                    ]),
                    snabbdom_1.h('div.form-group.form-half', [
                        snabbdom_1.h('label.form-label', {
                            attrs: { 'for': 'chapter-orientation' }
                        }, trans.noarg('orientation')),
                        snabbdom_1.h('select#chapter-orientation.form-control', {
                            hook: util_1.bind('change', e => {
                                ctrl.vm.editor && ctrl.vm.editor.setOrientation(e.target.value);
                            })
                        }, ['white', 'black'].map(function (color) {
                            return util_1.option(color, currentChapter.setup.orientation, trans.noarg(color));
                        }))
                    ])
                ]),
                snabbdom_1.h('div.form-group', [
                    snabbdom_1.h('label.form-label', {
                        attrs: { 'for': 'chapter-mode' }
                    }, trans.noarg('analysisMode')),
                    snabbdom_1.h('select#chapter-mode.form-control', exports.modeChoices.map(c => util_1.option(c[0], mode, trans.noarg(c[1]))))
                ]),
                modal.button(trans.noarg('createChapter'))
            ])
        ]
    });
}
exports.view = view;

},{"../modal":63,"../util":110,"./studyTour":103,"./studyXhr":105,"common":131,"common/storage":135,"snabbdom":35}],77:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const studyComments_1 = require("./studyComments");
const util_1 = require("../util");
const common_1 = require("common");
const throttle_1 = require("common/throttle");
function ctrl(root) {
    const current = common_1.prop(null), focus = common_1.prop(false), opening = common_1.prop(false);
    function submit(text) {
        if (!current())
            return;
        doSubmit(text);
    }
    ;
    const doSubmit = throttle_1.default(500, (text) => {
        const cur = current();
        if (cur)
            root.study.makeChange('setComment', {
                ch: cur.chapterId,
                path: cur.path,
                text
            });
    });
    function start(chapterId, path, node) {
        opening(true);
        current({
            chapterId,
            path,
            node
        });
        root.userJump(path);
    }
    ;
    return {
        root,
        current,
        focus,
        opening,
        submit,
        start,
        onSetPath(chapterId, path, node, playedMyself) {
            setTimeout(() => {
                const cur = current();
                if (cur && (path !== cur.path || chapterId !== cur.chapterId) && (!focus() || playedMyself)) {
                    cur.chapterId = chapterId;
                    cur.path = path;
                    cur.node = node;
                    root.redraw();
                }
            }, 100);
        },
        redraw: root.redraw,
        delete(chapterId, path, id) {
            root.study.makeChange('deleteComment', {
                ch: chapterId,
                path,
                id
            });
        }
    };
}
exports.ctrl = ctrl;
function viewDisabled(root, why) {
    return snabbdom_1.h('div.study__comments', [
        studyComments_1.currentComments(root, true),
        snabbdom_1.h('div.study__message', why)
    ]);
}
exports.viewDisabled = viewDisabled;
function view(root) {
    const study = root.study, ctrl = study.commentForm, current = ctrl.current();
    if (!current)
        return viewDisabled(root, 'Select a move to comment');
    function setupTextarea(vnode) {
        const el = vnode.elm, mine = (current.node.comments || []).find(function (c) {
            return c.by && c.by.id && c.by.id === ctrl.root.opts.userId;
        });
        el.value = mine ? mine.text : '';
        if (ctrl.opening() || ctrl.focus())
            window.lichess.raf(() => el.focus());
        ctrl.opening(false);
    }
    return snabbdom_1.h('div.study__comments', [
        studyComments_1.currentComments(root, !study.members.canContribute()),
        snabbdom_1.h('form.form3', [
            ctrl.focus() && ctrl.root.path !== current.path ? snabbdom_1.h('p', [
                'Commenting position after ',
                snabbdom_1.h('a', {
                    hook: util_1.bind('mousedown', () => ctrl.root.userJump(current.path), ctrl.redraw)
                }, util_1.nodeFullName(current.node))
            ]) : null,
            snabbdom_1.h('div.form-group', [
                snabbdom_1.h('textarea#comment-text.form-control', {
                    hook: {
                        insert(vnode) {
                            setupTextarea(vnode);
                            const el = vnode.elm;
                            function onChange() {
                                setTimeout(function () {
                                    ctrl.submit(el.value);
                                }, 50);
                            }
                            el.onkeyup = el.onpaste = onChange;
                            el.onfocus = function () {
                                ctrl.focus(true);
                                ctrl.redraw();
                            };
                            el.onblur = function () {
                                ctrl.focus(false);
                            };
                            vnode.data.hash = current.chapterId + current.path;
                        },
                        postpatch(old, vnode) {
                            const newKey = current.chapterId + current.path;
                            if (old.data.path !== newKey)
                                setupTextarea(vnode);
                            vnode.data.path = newKey;
                        }
                    }
                })
            ])
        ])
    ]);
}
exports.view = view;

},{"../util":110,"./studyComments":96,"common":131,"common/throttle":137,"snabbdom":35}],78:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
class DescriptionCtrl {
    constructor(text, doSave, redraw) {
        this.text = text;
        this.doSave = doSave;
        this.redraw = redraw;
        this.edit = false;
    }
    save(t) {
        this.text = t;
        this.doSave(t);
        this.redraw();
    }
    set(t) {
        this.text = t ? t : undefined;
    }
}
exports.DescriptionCtrl = DescriptionCtrl;
function descTitle(chapter) {
    return `${chapter ? 'Chapter' : 'Study'} pinned comment`;
}
exports.descTitle = descTitle;
function view(study, chapter) {
    const desc = chapter ? study.chapterDesc : study.studyDesc, contrib = study.members.canContribute() && !study.gamebookPlay();
    if (desc.edit)
        return edit(desc, chapter ? study.data.chapter.id : study.data.id, chapter);
    const isEmpty = desc.text === '-';
    if (!desc.text || (isEmpty && !contrib))
        return;
    return snabbdom_1.h(`div.study-desc${chapter ? '.chapter-desc' : ''}${isEmpty ? '.empty' : ''}`, [
        contrib && !isEmpty ? snabbdom_1.h('div.contrib', [
            snabbdom_1.h('span', descTitle(chapter)),
            isEmpty ? null : snabbdom_1.h('a', {
                attrs: {
                    'data-icon': 'm',
                    title: 'Edit'
                },
                hook: util_1.bind('click', _ => { desc.edit = true; }, desc.redraw)
            }),
            snabbdom_1.h('a', {
                attrs: {
                    'data-icon': 'q',
                    title: 'Delete'
                },
                hook: util_1.bind('click', () => {
                    if (confirm('Delete permanent description?'))
                        desc.save('');
                })
            })
        ]) : null,
        isEmpty ? snabbdom_1.h('a.text.button', {
            hook: util_1.bind('click', _ => { desc.edit = true; }, desc.redraw)
        }, descTitle(chapter)) : snabbdom_1.h('div.text', { hook: util_1.richHTML(desc.text) })
    ]);
}
exports.view = view;
function edit(ctrl, id, chapter) {
    return snabbdom_1.h('div.study-desc-form', [
        snabbdom_1.h('div.title', [
            descTitle(chapter),
            snabbdom_1.h('button.button.button-empty.button-red', {
                attrs: {
                    'data-icon': 'L',
                    title: 'Close'
                },
                hook: util_1.bind('click', () => ctrl.edit = false, ctrl.redraw)
            })
        ]),
        snabbdom_1.h('form.form3', [
            snabbdom_1.h('div.form-group', [
                snabbdom_1.h('textarea#form-control.desc-text.' + id, {
                    hook: util_1.onInsert(el => {
                        el.value = ctrl.text === '-' ? '' : (ctrl.text || '');
                        el.onkeyup = el.onpaste = () => {
                            ctrl.save(el.value.trim());
                        };
                        el.focus();
                    })
                })
            ])
        ])
    ]);
}

},{"../util":110,"snabbdom":35}],79:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../../util");
function playButtons(root) {
    const study = root.study, ctrl = study.gamebookPlay();
    if (!ctrl)
        return;
    const state = ctrl.state, fb = state.feedback, myTurn = fb === 'play';
    return snabbdom_1.h('div.gamebook-buttons', [
        root.path ? snabbdom_1.h('a.fbt.text.back', {
            attrs: util_1.dataIcon('I'),
            hook: util_1.bind('click', () => root.userJump(''), ctrl.redraw)
        }, 'Back') : null,
        myTurn ? snabbdom_1.h('a.fbt.text.solution', {
            attrs: util_1.dataIcon('G'),
            hook: util_1.bind('click', ctrl.solution, ctrl.redraw)
        }, 'View the solution') : undefined,
        overrideButton(study)
    ]);
}
exports.playButtons = playButtons;
function overrideButton(study) {
    if (study.data.chapter.gamebook) {
        const o = study.vm.gamebookOverride;
        if (study.members.canContribute())
            return snabbdom_1.h('a.fbt.text.preview', {
                class: { active: o === 'play' },
                attrs: util_1.dataIcon('v'),
                hook: util_1.bind('click', () => {
                    study.setGamebookOverride(o === 'play' ? undefined : 'play');
                }, study.redraw)
            }, 'Preview');
        else {
            const isAnalyse = o === 'analyse', ctrl = study.gamebookPlay();
            if (isAnalyse || (ctrl && ctrl.state.feedback === 'end'))
                return snabbdom_1.h('a.fbt.text.preview', {
                    class: { active: isAnalyse },
                    attrs: util_1.dataIcon('A'),
                    hook: util_1.bind('click', () => {
                        study.setGamebookOverride(isAnalyse ? undefined : 'analyse');
                    }, study.redraw)
                }, 'Analyse');
        }
    }
}
exports.overrideButton = overrideButton;

},{"../../util":110,"snabbdom":35}],80:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../../util");
const throttle_1 = require("common/throttle");
const control = require("../../control");
function running(ctrl) {
    return !!ctrl.study && ctrl.study.data.chapter.gamebook &&
        !ctrl.gamebookPlay() && ctrl.study.vm.gamebookOverride !== 'analyse';
}
exports.running = running;
function render(ctrl) {
    const study = ctrl.study, isMyMove = ctrl.turnColor() === ctrl.data.orientation, isCommented = !!(ctrl.node.comments || []).find(c => c.text.length > 2), hasVariation = ctrl.tree.parentNode(ctrl.path).children.length > 1;
    let content;
    const commentHook = util_1.bind('click', () => {
        study.commentForm.start(study.vm.chapterId, ctrl.path, ctrl.node);
        study.vm.toolTab('comments');
        window.lichess.requestIdleCallback(() => $('#comment-text').focus());
    }, ctrl.redraw);
    if (!ctrl.path) {
        if (isMyMove)
            content = [
                snabbdom_1.h('div.legend.todo.clickable', {
                    hook: commentHook,
                    class: { done: isCommented }
                }, [
                    util_1.iconTag('c'),
                    snabbdom_1.h('p', 'Help the player find the initial move, with a comment.')
                ]),
                renderHint(ctrl)
            ];
        else
            content = [
                snabbdom_1.h('div.legend.clickable', {
                    hook: commentHook
                }, [
                    util_1.iconTag('c'),
                    snabbdom_1.h('p', 'Introduce the gamebook with a comment')
                ]),
                snabbdom_1.h('div.legend.todo', { class: { done: !!ctrl.node.children[0] } }, [
                    util_1.iconTag('G'),
                    snabbdom_1.h('p', 'Put the opponent\'s first move on the board.')
                ])
            ];
    }
    else if (ctrl.onMainline) {
        if (isMyMove)
            content = [
                snabbdom_1.h('div.legend.todo.clickable', {
                    hook: commentHook,
                    class: { done: isCommented }
                }, [
                    util_1.iconTag('c'),
                    snabbdom_1.h('p', 'Explain the opponent move, and help the player find the next move, with a comment.')
                ]),
                renderHint(ctrl)
            ];
        else
            content = [
                snabbdom_1.h('div.legend.clickable', {
                    hook: commentHook,
                }, [
                    util_1.iconTag('c'),
                    snabbdom_1.h('p', 'You may reflect on the player\'s correct move, with a comment; or leave empty to jump immediately to the next move.')
                ]),
                hasVariation ? null : snabbdom_1.h('div.legend.clickable', {
                    hook: util_1.bind('click', () => control.prev(ctrl), ctrl.redraw)
                }, [
                    util_1.iconTag('G'),
                    snabbdom_1.h('p', 'Add variation moves to explain why specific other moves are wrong.')
                ]),
                renderDeviation(ctrl)
            ];
    }
    else
        content = [
            snabbdom_1.h('div.legend.todo.clickable', {
                hook: commentHook,
                class: { done: isCommented }
            }, [
                util_1.iconTag('c'),
                snabbdom_1.h('p', 'Explain why this move is wrong in a comment')
            ]),
            snabbdom_1.h('div.legend', [
                snabbdom_1.h('p', 'Or promote it as the mainline if it is the right move.')
            ])
        ];
    return snabbdom_1.h('div.gamebook-edit', {
        hook: { insert: _ => window.lichess.loadCssPath('analyse.gamebook.edit') }
    }, content);
}
exports.render = render;
function renderDeviation(ctrl) {
    const field = 'deviation';
    return snabbdom_1.h('div.deviation', [
        snabbdom_1.h('div.legend.todo', { class: { done: nodeGamebookValue(ctrl.node, field).length > 2 } }, [
            util_1.iconTag('c'),
            snabbdom_1.h('p', 'When any other wrong move is played:')
        ]),
        snabbdom_1.h('textarea', {
            attrs: { placeholder: 'Explain why all other moves are wrong' },
            hook: textareaHook(ctrl, field)
        })
    ]);
}
function renderHint(ctrl) {
    const field = 'hint';
    return snabbdom_1.h('div.hint', [
        snabbdom_1.h('div.legend', [
            util_1.iconTag(''),
            snabbdom_1.h('p', 'Optional, on-demand hint for the player:')
        ]),
        snabbdom_1.h('textarea', {
            attrs: { placeholder: 'Give the player a tip so they can find the right move' },
            hook: textareaHook(ctrl, field)
        })
    ]);
}
const saveNode = throttle_1.default(500, (ctrl, gamebook) => {
    ctrl.socket.send('setGamebook', {
        path: ctrl.path,
        ch: ctrl.study.vm.chapterId,
        gamebook: gamebook
    });
    ctrl.redraw();
});
function nodeGamebookValue(node, field) {
    return (node.gamebook && node.gamebook[field]) || '';
}
function textareaHook(ctrl, field) {
    const value = nodeGamebookValue(ctrl.node, field);
    return {
        insert(vnode) {
            const el = vnode.elm;
            el.value = value;
            el.onkeyup = el.onpaste = () => {
                const node = ctrl.node;
                node.gamebook = node.gamebook || {};
                node.gamebook[field] = el.value.trim();
                saveNode(ctrl, node.gamebook, 50);
            };
            vnode.data.path = ctrl.path;
        },
        postpatch(old, vnode) {
            if (old.data.path !== ctrl.path)
                vnode.elm.value = value;
            vnode.data.path = ctrl.path;
        }
    };
}

},{"../../control":45,"../../util":110,"common/throttle":137,"snabbdom":35}],81:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tree_1 = require("tree");
const autoShape_1 = require("../../autoShape");
class GamebookPlayCtrl {
    constructor(root, chapterId, trans, redraw) {
        this.root = root;
        this.chapterId = chapterId;
        this.trans = trans;
        this.redraw = redraw;
        this.makeState = () => {
            const node = this.root.node, nodeComment = (node.comments || [])[0], state = {
                init: this.root.path === '',
                comment: nodeComment ? nodeComment.text : undefined,
                showHint: false,
            }, parPath = tree_1.path.init(this.root.path), parNode = this.root.tree.nodeAtPath(parPath);
            if (!this.root.onMainline && !this.root.tree.pathIsMainline(parPath))
                return;
            if (this.root.onMainline && !node.children[0]) {
                state.feedback = 'end';
            }
            else if (this.isMyMove()) {
                state.feedback = 'play';
                state.hint = (node.gamebook || {}).hint;
            }
            else if (this.root.onMainline) {
                state.feedback = 'good';
            }
            else {
                state.feedback = 'bad';
                if (!state.comment) {
                    state.comment = parNode.children[0].gamebook.deviation;
                }
            }
            this.state = state;
            if (!state.comment) {
                if (state.feedback === 'good')
                    setTimeout(this.next, this.root.path ? 1000 : 300);
                else if (state.feedback === 'bad')
                    setTimeout(this.retry, 800);
            }
        };
        this.isMyMove = () => this.root.turnColor() === this.root.data.orientation;
        this.retry = () => {
            let path = this.root.path;
            while (path && !this.root.tree.pathIsMainline(path))
                path = tree_1.path.init(path);
            this.root.userJump(path);
            this.redraw();
        };
        this.next = () => {
            if (!this.isMyMove()) {
                const child = this.root.node.children[0];
                if (child)
                    this.root.userJump(this.root.path + child.id);
            }
            this.redraw();
        };
        this.onSpace = () => {
            switch (this.state.feedback) {
                case 'bad':
                    this.retry();
                    break;
                case 'end':
                    const s = this.root.study, c = s.nextChapter();
                    if (c)
                        s.setChapter(c.id);
                    break;
                default:
                    this.next();
            }
        };
        this.onPremoveSet = () => {
            this.next();
        };
        this.hint = () => {
            if (this.state.hint)
                this.state.showHint = !this.state.showHint;
        };
        this.solution = () => {
            this.root.chessground.setShapes(autoShape_1.makeShapesFromUci(this.root.turnColor(), this.root.node.children[0].uci, 'green'));
        };
        this.canJumpTo = (path) => tree_1.path.contains(this.root.path, path);
        this.onJump = () => {
            this.makeState();
            // wait for the root ctrl to make the move
            setTimeout(() => this.root.withCg(cg => cg.playPremove()), 100);
        };
        this.onShapeChange = shapes => {
            const node = this.root.node;
            if (node.gamebook && node.gamebook.shapes && !shapes.length) {
                node.shapes = node.gamebook.shapes.slice(0);
                this.root.jump(this.root.path);
            }
        };
        // ensure all original nodes have a gamebook entry,
        // so we can differentiate original nodes from user-made ones
        tree_1.ops.updateAll(root.tree.root, n => {
            n.gamebook = n.gamebook || {};
            if (n.shapes)
                n.gamebook.shapes = n.shapes.slice(0);
        });
        this.makeState();
    }
}
exports.default = GamebookPlayCtrl;

},{"../../autoShape":40,"tree":142}],82:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../../util");
const defaultComments = {
    play: 'What would you play in this position?',
    end: 'Congratulations! You completed this lesson.'
};
function render(ctrl) {
    const state = ctrl.state, comment = state.comment || defaultComments[state.feedback];
    return snabbdom_1.h('div.gamebook', {
        hook: { insert: _ => window.lichess.loadCssPath('analyse.gamebook.play') }
    }, [
        comment ? snabbdom_1.h('div.comment', {
            class: { hinted: state.showHint }
        }, [
            snabbdom_1.h('div.content', { hook: util_1.richHTML(comment) }),
            hintZone(ctrl)
        ]) : undefined,
        snabbdom_1.h('div.floor', [
            renderFeedback(ctrl, state),
            snabbdom_1.h('img.mascot', {
                attrs: {
                    width: 120,
                    height: 120,
                    src: window.lichess.assetUrl('images/mascot/octopus.svg')
                }
            })
        ])
    ]);
}
exports.render = render;
function hintZone(ctrl) {
    const state = ctrl.state, clickHook = () => ({
        hook: util_1.bind('click', ctrl.hint, ctrl.redraw)
    });
    if (state.showHint)
        return snabbdom_1.h('div', clickHook(), [
            snabbdom_1.h('div.hint', { hook: util_1.richHTML(state.hint) })
        ]);
    if (state.hint)
        return snabbdom_1.h('a.hint', clickHook(), 'Get a hint');
}
function renderFeedback(ctrl, state) {
    const fb = state.feedback, color = ctrl.root.turnColor();
    if (fb === 'bad')
        return snabbdom_1.h('div.feedback.act.bad' + (state.comment ? '.com' : ''), {
            hook: util_1.bind('click', ctrl.retry)
        }, [
            util_1.iconTag('P'),
            snabbdom_1.h('span', 'Retry')
        ]);
    if (fb === 'good' && state.comment)
        return snabbdom_1.h('div.feedback.act.good.com', {
            hook: util_1.bind('click', ctrl.next)
        }, [
            snabbdom_1.h('span.text', { attrs: util_1.dataIcon('G') }, 'Next'),
            snabbdom_1.h('kbd', '<space>')
        ]);
    if (fb === 'end')
        return renderEnd(ctrl);
    return snabbdom_1.h('div.feedback.info.' + fb + (state.init ? '.init' : ''), snabbdom_1.h('div', fb === 'play' ? [
        snabbdom_1.h('div.no-square', snabbdom_1.h('piece.king.' + color)),
        snabbdom_1.h('div.instruction', [
            snabbdom_1.h('strong', ctrl.trans.noarg('yourTurn')),
            snabbdom_1.h('em', ctrl.trans.noarg(color === 'white' ? 'findTheBestMoveForWhite' : 'findTheBestMoveForBlack'))
        ])
    ] : ['Good move!']));
}
function renderEnd(ctrl) {
    const study = ctrl.root.study, nextChapter = study.nextChapter();
    return snabbdom_1.h('div.feedback.end', [
        nextChapter ? snabbdom_1.h('a.next.text', {
            attrs: util_1.dataIcon('G'),
            hook: util_1.bind('click', () => study.setChapter(nextChapter.id))
        }, 'Next chapter') : undefined,
        snabbdom_1.h('a.retry', {
            attrs: util_1.dataIcon('P'),
            hook: util_1.bind('click', () => ctrl.root.userJump(''), ctrl.redraw)
        }, 'Play again'),
        snabbdom_1.h('a.analyse', {
            attrs: util_1.dataIcon('A'),
            hook: util_1.bind('click', () => study.setGamebookOverride('analyse'), ctrl.redraw)
        }, 'Analyse')
    ]);
}

},{"../../util":110,"snabbdom":35}],83:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
const common_1 = require("common");
const modal_1 = require("../modal");
function ctrl(send, members, setTab, redraw, trans) {
    const open = common_1.prop(false);
    let followings = [];
    let spectators = [];
    function updateFollowings(f) {
        followings = f(followings);
        if (open())
            redraw();
    }
    ;
    return {
        open,
        candidates() {
            const existing = members();
            return followings.concat(spectators).filter(function (elem, idx, arr) {
                return arr.indexOf(elem) >= idx && // remove duplicates
                    !existing.hasOwnProperty(util_1.titleNameToId(elem)); // remove existing members
            }).sort();
        },
        members,
        setSpectators(usernames) {
            spectators = usernames;
        },
        setFollowings(usernames) {
            updateFollowings(_ => usernames);
        },
        delFollowing(username) {
            updateFollowings(function (prevs) {
                return prevs.filter(function (u) {
                    return username !== u;
                });
            });
        },
        addFollowing(username) {
            updateFollowings(function (prevs) {
                return prevs.concat([username]);
            });
        },
        toggle() {
            open(!open());
            if (open())
                send('following_onlines');
        },
        invite(titleName) {
            send("invite", util_1.titleNameToId(titleName));
            setTab();
        },
        redraw,
        trans
    };
}
exports.ctrl = ctrl;
;
function view(ctrl) {
    const candidates = ctrl.candidates();
    return modal_1.modal({
        class: 'study__invite',
        onClose() {
            ctrl.open(false);
            ctrl.redraw();
        },
        content: [
            snabbdom_1.h('h2', ctrl.trans.noarg('inviteToTheStudy')),
            snabbdom_1.h('p.info', { attrs: { 'data-icon': '' } }, ctrl.trans.noarg('pleaseOnlyInvitePeopleYouKnow')),
            snabbdom_1.h('div.input-wrapper', [
                snabbdom_1.h('input', {
                    attrs: { placeholder: ctrl.trans.noarg('searchByUsername') },
                    hook: util_1.onInsert(el => {
                        window.lichess.userAutocomplete($(el), {
                            tag: 'span',
                            onSelect(v) {
                                ctrl.invite(v.name);
                                $(el).typeahead('close');
                                el.value = '';
                                ctrl.redraw();
                            }
                        });
                    })
                })
            ]),
            candidates.length ? snabbdom_1.h('div.users', candidates.map(function (username) {
                return snabbdom_1.h('span.button.button-metal', {
                    key: username,
                    hook: util_1.bind('click', _ => ctrl.invite(username))
                }, username);
            })) : undefined
        ]
    });
}
exports.view = view;

},{"../modal":63,"../util":110,"common":131,"snabbdom":35}],84:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chessground_1 = require("chessground");
const util_1 = require("chessground/util");
const studyXhr_1 = require("./studyXhr");
const util_2 = require("../util");
class MultiBoardCtrl {
    constructor(studyId, redraw, trans) {
        this.studyId = studyId;
        this.redraw = redraw;
        this.trans = trans;
        this.loading = false;
        this.page = 1;
        this.playing = false;
        this.setPage = (page) => {
            if (this.page != page) {
                this.page = page;
                this.reload();
            }
        };
        this.nextPage = () => this.setPage(this.page + 1);
        this.prevPage = () => this.setPage(this.page - 1);
        this.lastPage = () => { if (this.pager)
            this.setPage(this.pager.nbPages); };
        this.setPlaying = (v) => {
            this.playing = v;
            this.reload();
        };
    }
    addNode(pos, node) {
        const cp = this.pager && this.pager.currentPageResults.find(cp => cp.id == pos.chapterId);
        if (cp && cp.playing) {
            cp.fen = node.fen;
            cp.lastMove = node.uci;
            this.redraw();
        }
    }
    reload(onInsert) {
        if (this.pager && !onInsert) {
            this.loading = true;
            this.redraw();
        }
        studyXhr_1.multiBoard(this.studyId, this.page, this.playing).then(p => {
            this.pager = p;
            if (p.nbPages < this.page) {
                if (!p.nbPages)
                    this.page = 1;
                else
                    this.setPage(p.nbPages);
            }
            this.loading = false;
            this.redraw();
        });
    }
}
exports.MultiBoardCtrl = MultiBoardCtrl;
function view(ctrl, study) {
    return snabbdom_1.h('div.study__multiboard', {
        class: { loading: ctrl.loading, nopager: !ctrl.pager },
        hook: {
            insert() { ctrl.reload(true); }
        }
    }, ctrl.pager ? renderPager(ctrl.pager, study) : [util_2.spinner()]);
}
exports.view = view;
function renderPager(pager, study) {
    const ctrl = study.multiBoard;
    return [
        snabbdom_1.h('div.top', [
            renderPagerNav(pager, ctrl),
            renderPlayingToggle(ctrl)
        ]),
        snabbdom_1.h('div.now-playing', pager.currentPageResults.map(makePreview(study)))
    ];
}
function renderPlayingToggle(ctrl) {
    return snabbdom_1.h('label.playing', [
        snabbdom_1.h('input', {
            attrs: { type: 'checkbox' },
            hook: util_2.bind('change', e => {
                ctrl.setPlaying(e.target.checked);
            })
        }),
        ctrl.trans.noarg('playing')
    ]);
}
function renderPagerNav(pager, ctrl) {
    const page = ctrl.page, from = Math.min(pager.nbResults, (page - 1) * pager.maxPerPage + 1), to = Math.min(pager.nbResults, page * pager.maxPerPage);
    return snabbdom_1.h('div.pager', [
        pagerButton(ctrl.trans.noarg('first'), 'W', () => ctrl.setPage(1), page > 1, ctrl),
        pagerButton(ctrl.trans.noarg('previous'), 'Y', ctrl.prevPage, page > 1, ctrl),
        snabbdom_1.h('span.page', `${from}-${to} / ${pager.nbResults}`),
        pagerButton(ctrl.trans.noarg('next'), 'X', ctrl.nextPage, page < pager.nbPages, ctrl),
        pagerButton(ctrl.trans.noarg('last'), 'V', ctrl.lastPage, page < pager.nbPages, ctrl)
    ]);
}
function pagerButton(text, icon, click, enable, ctrl) {
    return snabbdom_1.h('button.fbt', {
        attrs: {
            'data-icon': icon,
            disabled: !enable,
            title: text
        },
        hook: util_2.bind('mousedown', click, ctrl.redraw)
    });
}
function makePreview(study) {
    return (preview) => {
        const contents = preview.players ? [
            makePlayer(preview.players[util_1.opposite(preview.orientation)]),
            makeCg(preview),
            makePlayer(preview.players[preview.orientation])
        ] : [
            snabbdom_1.h('div.name', preview.name),
            makeCg(preview)
        ];
        return snabbdom_1.h('a.' + preview.id, {
            attrs: { title: preview.name },
            class: { active: !study.multiBoard.loading && study.vm.chapterId == preview.id && (!study.relay || !study.relay.intro.active) },
            hook: util_2.bind('mousedown', _ => study.setChapter(preview.id))
        }, contents);
    };
}
function makePlayer(player) {
    return snabbdom_1.h('div.player', [
        player.title ? `${player.title} ${player.name}` : player.name,
        player.rating && snabbdom_1.h('span', '' + player.rating)
    ]);
}
function uciToLastMove(lm) {
    return lm ? [lm[0] + lm[1], lm[2] + lm[3]] : undefined;
}
function makeCg(preview) {
    return snabbdom_1.h('div.mini-board.cg-wrap.is2d', {
        hook: {
            insert(vnode) {
                const cg = chessground_1.Chessground(vnode.elm, {
                    coordinates: false,
                    drawable: { enabled: false, visible: false },
                    resizable: false,
                    viewOnly: true,
                    orientation: preview.orientation,
                    fen: preview.fen,
                    lastMove: uciToLastMove(preview.lastMove)
                });
                vnode.data.cp = { cg, fen: preview.fen };
            },
            postpatch(old, vnode) {
                if (old.data.cp.fen !== preview.fen) {
                    old.data.cp.cg.set({
                        fen: preview.fen,
                        lastMove: uciToLastMove(preview.lastMove)
                    });
                    old.data.cp.fen = preview.fen;
                }
                vnode.data.cp = old.data.cp;
            }
        }
    });
}

},{"../util":110,"./studyXhr":105,"chessground":5,"chessground/util":18,"snabbdom":35}],85:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
function ctrl(redraw) {
    let current;
    let timeout;
    return {
        set(n) {
            clearTimeout(timeout);
            current = n;
            timeout = setTimeout(function () {
                current = undefined;
                redraw();
            }, n.duration);
        },
        get: () => current
    };
}
exports.ctrl = ctrl;
;
function view(ctrl) {
    const c = ctrl.get();
    return c ? snabbdom_1.h('div.notif.' + c.class, c.text) : undefined;
}
exports.view = view;
;

},{"snabbdom":35}],86:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const tree_1 = require("tree");
const clocks_1 = require("../clocks");
const studyChapters_1 = require("./studyChapters");
function default_1(ctrl) {
    const study = ctrl.study;
    if (!study || ctrl.embed)
        return;
    const tags = study.data.chapter.tags, playerNames = {
        white: studyChapters_1.findTag(tags, 'white'),
        black: studyChapters_1.findTag(tags, 'black')
    };
    if (!playerNames.white && !playerNames.black && !tree_1.ops.findInMainline(ctrl.tree.root, n => !!n.clock))
        return;
    const clocks = clocks_1.default(ctrl), ticking = !studyChapters_1.isFinished(study.data.chapter) && ctrl.turnColor();
    return ['white', 'black'].map(color => renderPlayer(tags, clocks, playerNames, color, ticking === color, ctrl.bottomColor() !== color));
}
exports.default = default_1;
function renderPlayer(tags, clocks, playerNames, color, ticking, top) {
    const title = studyChapters_1.findTag(tags, `${color}title`), elo = studyChapters_1.findTag(tags, `${color}elo`), result = studyChapters_1.resultOf(tags, color === 'white');
    return snabbdom_1.h(`div.study__player.study__player-${top ? 'top' : 'bot'}`, {
        class: { ticking }
    }, [
        snabbdom_1.h('div.left', [
            result && snabbdom_1.h('span.result', result),
            snabbdom_1.h('span.info', [
                title && snabbdom_1.h('span.title', title + ' '),
                snabbdom_1.h('span.name', playerNames[color]),
                elo && snabbdom_1.h('span.elo', elo)
            ])
        ]),
        clocks && clocks[color === 'white' ? 0 : 1]
    ]);
}

},{"../clocks":44,"./studyChapters":95,"snabbdom":35,"tree":142}],87:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
let baseUrl;
function make(file) {
    baseUrl = baseUrl || $('body').data('asset-url') + '/assets/sound/';
    const sound = new window.Howl({
        src: [
            baseUrl + file + '.ogg',
            baseUrl + file + '.mp3'
        ]
    });
    return function () {
        if (window.lichess.sound.set() !== 'silent')
            sound.play();
    };
}
;
function default_1() {
    return {
        success: make('other/energy3'),
        failure: make('other/failure2')
    };
}
exports.default = default_1;

},{}],88:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const xhr = require("../studyXhr");
const common_1 = require("common");
const storage_1 = require("common/storage");
const studyPracticeSuccess_1 = require("./studyPracticeSuccess");
const sound_1 = require("./sound");
const util_1 = require("../../util");
function default_1(root, studyData, data) {
    const goal = common_1.prop(root.data.practiceGoal), nbMoves = common_1.prop(0), 
    // null = ongoing, true = win, false = fail
    success = common_1.prop(null), sound = sound_1.default(), analysisUrl = common_1.prop(''), autoNext = storage_1.storedProp('practice-auto-next', true);
    function onLoad() {
        root.showAutoShapes = util_1.readOnlyProp(true);
        root.showGauge = util_1.readOnlyProp(true);
        root.showComputer = util_1.readOnlyProp(true);
        goal(root.data.practiceGoal);
        nbMoves(0);
        success(null);
        const chapter = studyData.chapter;
        history.replaceState(null, chapter.name, data.url + '/' + chapter.id);
        analysisUrl('/analysis/standard/' + root.node.fen.replace(/ /g, '_') + '?color=' + root.bottomColor());
    }
    onLoad();
    function computeNbMoves() {
        let plies = root.node.ply - root.tree.root.ply;
        if (root.bottomColor() !== root.data.player.color)
            plies--;
        return Math.ceil(plies / 2);
    }
    function getStudy() {
        return root.study;
    }
    function checkSuccess() {
        const gamebook = getStudy().gamebookPlay();
        if (gamebook) {
            if (gamebook.state.feedback === 'end')
                onVictory();
            return;
        }
        if (!getStudy().data.chapter.practice) {
            return saveNbMoves();
        }
        if (success() !== null)
            return;
        nbMoves(computeNbMoves());
        const res = success(studyPracticeSuccess_1.default(root, goal(), nbMoves()));
        if (res)
            onVictory();
        else if (res === false)
            onFailure();
    }
    function onVictory() {
        saveNbMoves();
        sound.success();
        if (autoNext())
            setTimeout(goToNext, 1000);
    }
    function saveNbMoves() {
        const chapterId = getStudy().currentChapter().id, former = data.completion[chapterId];
        if (typeof former === 'undefined' || nbMoves() < former) {
            data.completion[chapterId] = nbMoves();
            xhr.practiceComplete(chapterId, nbMoves());
        }
    }
    function goToNext() {
        const next = getStudy().nextChapter();
        if (next)
            getStudy().setChapter(next.id);
    }
    function onFailure() {
        root.node.fail = true;
        sound.failure();
    }
    return {
        onLoad,
        onJump() {
            // reset failure state if no failed move found in mainline history
            if (success() === false && !root.nodeList.find(n => !!n.fail))
                success(null);
            checkSuccess();
        },
        onCeval: checkSuccess,
        data,
        goal,
        success,
        nbMoves,
        reset() {
            root.tree.root.children = [];
            root.userJump('');
            root.practice.reset();
            onLoad();
            root.practice.resume();
        },
        isWhite: root.bottomIsWhite,
        analysisUrl,
        autoNext,
        goToNext
    };
}
exports.default = default_1;

},{"../../util":110,"../studyXhr":105,"./sound":87,"./studyPracticeSuccess":89,"common":131,"common/storage":135}],89:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// returns null if not deep enough to know
function isDrawish(node) {
    if (!hasSolidEval(node))
        return null;
    return !node.ceval.mate && Math.abs(node.ceval.cp) < 150;
}
// returns null if not deep enough to know
function isWinning(node, goalCp, color) {
    if (!hasSolidEval(node))
        return null;
    const cp = node.ceval.mate > 0 ? 99999 : (node.ceval.mate < 0 ? -99999 : node.ceval.cp);
    return color === 'white' ? cp >= goalCp : cp <= goalCp;
}
// returns null if not deep enough to know
function myMateIn(node, color) {
    if (!hasSolidEval(node))
        return null;
    if (!node.ceval.mate)
        return false;
    var mateIn = node.ceval.mate * (color === 'white' ? 1 : -1);
    return mateIn > 0 ? mateIn : false;
}
function hasSolidEval(node) {
    return node.ceval && node.ceval.depth >= 16;
}
function isMate(root) {
    return root.gameOver() === 'checkmate';
}
function isMyMate(root) {
    return isMate(root) && root.turnColor() !== root.bottomColor();
}
function isTheirMate(root) {
    return isMate(root) && root.turnColor() === root.bottomColor();
}
function hasBlundered(comment) {
    return comment && (comment.verdict === 'mistake' || comment.verdict === 'blunder');
}
// returns null = ongoing, true = win, false = fail
function default_1(root, goal, nbMoves) {
    const node = root.node;
    if (!node.uci)
        return null;
    if (isTheirMate(root))
        return false;
    if (isMyMate(root))
        return true;
    if (hasBlundered(root.practice.comment()))
        return false;
    switch (goal.result) {
        case 'drawIn':
        case 'equalIn':
            if (node.threefold)
                return true;
            if (isDrawish(node) === false)
                return false;
            if (nbMoves > goal.moves)
                return false;
            if (root.gameOver() === 'draw')
                return true;
            if (nbMoves >= goal.moves)
                return isDrawish(node);
            break;
        case 'evalIn':
            if (nbMoves >= goal.moves)
                return isWinning(node, goal.cp, root.bottomColor());
            break;
        case 'mateIn':
            if (nbMoves > goal.moves)
                return false;
            const mateIn = myMateIn(node, root.bottomColor());
            if (mateIn === null)
                return null;
            if (!mateIn || mateIn + nbMoves > goal.moves)
                return false;
            break;
        case 'promotion':
            if (!node.uci[4])
                return null;
            return isWinning(node, goal.cp, root.bottomColor());
        case 'mate':
    }
    return null;
}
exports.default = default_1;
;

},{}],90:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../../util");
const boolSetting_1 = require("../../boolSetting");
const description_1 = require("../description");
function selector(data) {
    return snabbdom_1.h('select.selector', {
        hook: util_1.bind('change', e => {
            location.href = '/practice/' + e.target.value;
        })
    }, [
        snabbdom_1.h('option', {
            attrs: { disabled: true, selected: true }
        }, 'Practice list'),
        ...data.structure.map(function (section) {
            return snabbdom_1.h('optgroup', {
                attrs: { label: section.name }
            }, section.studies.map(function (study) {
                return util_1.option(section.id + '/' + study.slug + '/' + study.id, '', study.name);
            }));
        })
    ]);
}
function renderGoal(practice, inMoves) {
    const goal = practice.goal();
    switch (goal.result) {
        case 'mate':
            return 'Checkmate the opponent';
        case 'mateIn':
            return 'Checkmate the opponent in ' + util_1.plural('move', inMoves);
        case 'drawIn':
            return 'Hold the draw for ' + util_1.plural('more move', inMoves);
        case 'equalIn':
            return 'Equalize in ' + util_1.plural('move', inMoves);
        case 'evalIn':
            if (practice.isWhite() === (goal.cp >= 0))
                return 'Get a winning position in ' + util_1.plural('move', inMoves);
            return 'Defend for ' + util_1.plural('move', inMoves);
        case 'promotion':
            return 'Safely promote your pawn';
    }
}
function underboard(ctrl) {
    if (ctrl.vm.loading)
        return [snabbdom_1.h('div.feedback', util_1.spinner())];
    const p = ctrl.practice, gb = ctrl.gamebookPlay(), pinned = ctrl.data.chapter.description;
    if (gb)
        return pinned ? [snabbdom_1.h('div.feedback.ongoing', [
                snabbdom_1.h('div.comment', { hook: util_1.richHTML(pinned) })
            ])] : [];
    else if (!ctrl.data.chapter.practice)
        return [description_1.view(ctrl, true)];
    switch (p.success()) {
        case true:
            const next = ctrl.nextChapter();
            return [
                snabbdom_1.h('a.feedback.win', next ? {
                    hook: util_1.bind('click', p.goToNext)
                } : {
                    attrs: { href: '/practice' }
                }, [
                    snabbdom_1.h('span', 'Success!'),
                    ctrl.nextChapter() ? 'Go to next exercise' : 'Back to practice menu'
                ])
            ];
        case false:
            return [
                snabbdom_1.h('a.feedback.fail', {
                    hook: util_1.bind('click', p.reset, ctrl.redraw)
                }, [
                    snabbdom_1.h('span', [renderGoal(p, p.goal().moves)]),
                    snabbdom_1.h('strong', 'Click to retry')
                ])
            ];
        default:
            return [
                snabbdom_1.h('div.feedback.ongoing', [
                    snabbdom_1.h('div.goal', [renderGoal(p, p.goal().moves - p.nbMoves())]),
                    pinned ? snabbdom_1.h('div.comment', { hook: util_1.richHTML(pinned) }) : null
                ]),
                boolSetting_1.boolSetting({
                    name: 'Load next exercise immediately',
                    id: 'autoNext',
                    checked: p.autoNext(),
                    change: p.autoNext
                }, ctrl.trans, ctrl.redraw)
            ];
    }
}
exports.underboard = underboard;
function side(ctrl) {
    const current = ctrl.currentChapter(), data = ctrl.practice.data;
    return snabbdom_1.h('div.practice__side', [
        snabbdom_1.h('div.practice__side__title', [
            snabbdom_1.h('i.' + data.study.id),
            snabbdom_1.h('div.text', [
                snabbdom_1.h('h1', data.study.name),
                snabbdom_1.h('em', data.study.desc)
            ])
        ]),
        snabbdom_1.h('div.practice__side__chapters', {
            hook: util_1.bind('click', e => {
                e.preventDefault();
                const target = e.target, id = target.parentNode.getAttribute('data-id') || target.getAttribute('data-id');
                if (id)
                    ctrl.setChapter(id, true);
                return false;
            })
        }, ctrl.chapters.list().map(function (chapter) {
            const loading = ctrl.vm.loading && chapter.id === ctrl.vm.nextChapterId, active = !ctrl.vm.loading && current && current.id === chapter.id, completion = data.completion[chapter.id] >= 0 ? 'done' : 'ongoing';
            return [
                snabbdom_1.h('a.ps__chapter', {
                    key: chapter.id,
                    attrs: {
                        href: data.url + '/' + chapter.id,
                        'data-id': chapter.id
                    },
                    class: { active, loading }
                }, [
                    snabbdom_1.h('span.status.' + completion, {
                        attrs: {
                            'data-icon': ((loading || active) && completion === 'ongoing') ? 'G' : 'E'
                        }
                    }),
                    snabbdom_1.h('h3', chapter.name)
                ])
            ];
        }).reduce((a, b) => a.concat(b), [])),
        snabbdom_1.h('div.finally', [
            snabbdom_1.h('a.back', {
                attrs: {
                    'data-icon': 'I',
                    href: '/practice',
                    title: 'More practice'
                }
            }),
            snabbdom_1.thunk('select.selector', selector, [data])
        ])
    ]);
}
exports.side = side;

},{"../../boolSetting":42,"../../util":110,"../description":78,"snabbdom":35}],91:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const studyChapters_1 = require("../studyChapters");
class RelayCtrl {
    constructor(data, send, redraw, members, chapter) {
        this.data = data;
        this.send = send;
        this.redraw = redraw;
        this.members = members;
        this.log = [];
        this.cooldown = false;
        this.setSync = (v) => {
            this.send('relaySync', v);
            this.redraw();
        };
        this.loading = () => !this.cooldown && this.data.sync.ongoing;
        this.applyChapterRelay = (c, r) => {
            if (this.clockInterval)
                clearInterval(this.clockInterval);
            if (r) {
                c.relay = this.convertDate(r);
                if (!studyChapters_1.isFinished(c))
                    this.clockInterval = setInterval(this.redraw, 1000);
            }
        };
        this.convertDate = (r) => {
            if (typeof r.secondsSinceLastMove !== 'undefined' && !r.lastMoveAt) {
                r.lastMoveAt = Date.now() - r.secondsSinceLastMove * 1000;
            }
            return r;
        };
        this.socketHandlers = {
            relayData: (d) => {
                d.sync.log = this.data.sync.log;
                this.data = d;
                this.redraw();
            },
            relayLog: (event) => {
                if (event.id !== this.data.id)
                    return;
                this.data.sync.log.push(event);
                this.data.sync.log = this.data.sync.log.slice(-20);
                this.cooldown = true;
                setTimeout(() => { this.cooldown = false; this.redraw(); }, 4500);
                this.redraw();
                if (event.error)
                    console.warn(`relay synchronisation error: ${event.error}`);
            }
        };
        this.socketHandler = (t, d) => {
            const handler = this.socketHandlers[t];
            if (handler && d.id === this.data.id) {
                handler(d);
                return true;
            }
            return false;
        };
        this.applyChapterRelay(chapter, chapter.relay);
        this.intro = {
            exists: !!data.markup,
            active: !!data.markup && (location.pathname.match(/\//g) || []).length < 4,
            disable: () => { this.intro.active = false; }
        };
    }
}
exports.default = RelayCtrl;

},{"../studyChapters":95}],92:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../../util");
const multiBoard_1 = require("../multiBoard");
function default_1(ctrl) {
    const study = ctrl.study;
    const relay = study && study.relay;
    if (study && relay && relay.intro.active)
        return snabbdom_1.h('div.intro', [
            snabbdom_1.h('div.intro__text', [
                snabbdom_1.h('h1', study.data.name),
                snabbdom_1.h('div', {
                    hook: util_1.innerHTML(relay.data.markup, () => relay.data.markup)
                })
            ]),
            multiBoard_1.view(study.multiBoard, study)
        ]);
}
exports.default = default_1;

},{"../../util":110,"../multiBoard":84,"snabbdom":35}],93:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../../util");
function default_1(ctrl) {
    if (ctrl.members.canContribute())
        return snabbdom_1.h('div.relay-admin', {
            hook: util_1.onInsert(_ => window.lichess.loadCssPath('analyse.relay-admin'))
        }, [
            snabbdom_1.h('h2', [
                snabbdom_1.h('span.text', { attrs: util_1.dataIcon('') }, 'Broadcast manager'),
                snabbdom_1.h('a', {
                    attrs: {
                        href: `/broadcast/${ctrl.data.slug}/${ctrl.data.id}/edit`,
                        'data-icon': '%'
                    }
                })
            ]),
            ctrl.data.sync.url ? (ctrl.data.sync.ongoing ? stateOn : stateOff)(ctrl) : null,
            renderLog(ctrl)
        ]);
}
exports.default = default_1;
function logSuccess(e) {
    return [
        e.moves ? snabbdom_1.h('strong', '' + e.moves) : e.moves,
        ` new move${e.moves > 1 ? 's' : ''}`
    ];
}
function renderLog(ctrl) {
    const dateFormatter = getDateFormatter();
    const logLines = ctrl.data.sync.log.slice(0).reverse().map(e => {
        const err = e.error && snabbdom_1.h('a', {
            attrs: {
                href: ctrl.data.sync.url,
                target: '_blank'
            }
        }, e.error);
        return snabbdom_1.h('div' + (err ? '.err' : ''), {
            key: e.at,
            attrs: util_1.dataIcon(err ? 'j' : 'E')
        }, [
            snabbdom_1.h('div', [
                ...(err ? [err] : logSuccess(e)),
                snabbdom_1.h('time', dateFormatter(new Date(e.at)))
            ])
        ]);
    });
    if (ctrl.loading())
        logLines.unshift(snabbdom_1.h('div.load', [
            snabbdom_1.h('i.ddloader'),
            'Polling source...'
        ]));
    return snabbdom_1.h('div.log', logLines);
}
function stateOn(ctrl) {
    return snabbdom_1.h('div.state.on.clickable', {
        hook: util_1.bind('click', _ => ctrl.setSync(false)),
        attrs: util_1.dataIcon('B')
    }, [
        snabbdom_1.h('div', [
            'Connected to source',
            snabbdom_1.h('br'),
            ctrl.data.sync.url.replace(/https?:\/\//, '')
        ])
    ]);
}
function stateOff(ctrl) {
    return snabbdom_1.h('div.state.off.clickable', {
        hook: util_1.bind('click', _ => ctrl.setSync(true)),
        attrs: util_1.dataIcon('G')
    }, [
        snabbdom_1.h('div.fat', 'Click to connect')
    ]);
}
let cachedDateFormatter;
function getDateFormatter() {
    if (!cachedDateFormatter)
        cachedDateFormatter = (window.Intl && Intl.DateTimeFormat) ?
            new Intl.DateTimeFormat(document.documentElement.lang, {
                month: 'short',
                day: 'numeric',
                hour: 'numeric',
                minute: 'numeric',
                second: 'numeric'
            }).format : function (d) { return d.toLocaleString(); };
    return cachedDateFormatter;
}

},{"../../util":110,"snabbdom":35}],94:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
const common_1 = require("common");
const li = window.lichess;
function ctrl(root, chapterId) {
    const requested = common_1.prop(false), lastPly = common_1.prop(false), chartEl = common_1.prop(null);
    function unselect(chart) {
        chart.getSelectedPoints().forEach(p => p.select(false));
    }
    li.pubsub.on('analysis.change', (_fen, _path, mainlinePly) => {
        if (!li.advantageChart || lastPly() === mainlinePly)
            return;
        const lp = lastPly(typeof mainlinePly === 'undefined' ? lastPly() : mainlinePly), el = chartEl();
        if (el && window.Highcharts) {
            const $chart = $(el);
            if ($chart.length) {
                const chart = $chart.highcharts();
                if (chart) {
                    if (lp === false)
                        unselect(chart);
                    else {
                        const point = chart.series[0].data[lp - 1 - root.tree.root.ply];
                        if (common_1.defined(point))
                            point.select();
                        else
                            unselect(chart);
                    }
                }
                else
                    lastPly(false);
            }
        }
        else
            lastPly(false);
    });
    return {
        root,
        reset() {
            requested(false);
            lastPly(false);
        },
        chapterId,
        onMergeAnalysisData() {
            if (li.advantageChart)
                li.advantageChart.update(root.data);
        },
        request() {
            root.socket.send('requestAnalysis', chapterId());
            requested(true);
        },
        requested,
        lastPly,
        chartEl
    };
}
exports.ctrl = ctrl;
function view(ctrl) {
    const analysis = ctrl.root.data.analysis;
    if (!ctrl.root.showComputer())
        return disabled();
    if (!analysis)
        return ctrl.requested() ? requested() : requestButton(ctrl);
    return snabbdom_1.h('div.study__server-eval.ready.' + analysis.id, {
        hook: util_1.onInsert(el => {
            ctrl.lastPly(false);
            li.requestIdleCallback(() => {
                li.loadScript('javascripts/chart/acpl.js').then(() => {
                    li.advantageChart(ctrl.root.data, ctrl.root.trans, el);
                    ctrl.chartEl(el);
                });
            });
        })
    }, [snabbdom_1.h('div.study__message', util_1.spinner())]);
}
exports.view = view;
function disabled() {
    return snabbdom_1.h('div.study__server-eval.disabled.padded', 'You disabled computer analysis.');
}
function requested() {
    return snabbdom_1.h('div.study__server-eval.requested.padded', util_1.spinner());
}
function requestButton(ctrl) {
    const root = ctrl.root;
    return snabbdom_1.h('div.study__message', root.mainline.length < 5 ? snabbdom_1.h('p', root.trans.noarg('theChapterIsTooShortToBeAnalysed')) : (!root.study.members.canContribute() ? [root.trans.noarg('onlyContributorsCanRequestAnalysis')] : [
        snabbdom_1.h('p', [
            root.trans.noarg('getAFullComputerAnalysis'),
            snabbdom_1.h('br'),
            root.trans.noarg('makeSureTheChapterIsComplete')
        ]),
        snabbdom_1.h('a.button.text', {
            attrs: {
                'data-icon': '',
                disabled: root.mainline.length < 5
            },
            hook: util_1.bind('click', ctrl.request, root.redraw)
        }, root.trans.noarg('requestAComputerAnalysis'))
    ]));
}

},{"../util":110,"common":131,"snabbdom":35}],95:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const common_1 = require("common");
const util_1 = require("../util");
const chapterNewForm_1 = require("./chapterNewForm");
const chapterEditForm_1 = require("./chapterEditForm");
function ctrl(initChapters, send, setTab, chapterConfig, root) {
    const list = common_1.prop(initChapters);
    const newForm = chapterNewForm_1.ctrl(send, list, setTab, root);
    const editForm = chapterEditForm_1.ctrl(send, chapterConfig, root.trans, root.redraw);
    const localPaths = {};
    return {
        newForm,
        editForm,
        list,
        get(id) {
            return list().find(c => c.id === id);
        },
        size() {
            return list().length;
        },
        sort(ids) {
            send("sortChapters", ids);
        },
        firstChapterId() {
            return list()[0].id;
        },
        toggleNewForm() {
            if (newForm.vm.open || list().length < 64)
                newForm.toggle();
            else
                alert("You have reached the limit of 64 chapters per study. Please create a new study.");
        },
        localPaths
    };
}
exports.ctrl = ctrl;
function isFinished(c) {
    const result = findTag(c.tags, 'result');
    return result && result !== '*';
}
exports.isFinished = isFinished;
function findTag(tags, name) {
    const t = tags.find(t => t[0].toLowerCase() === name);
    return t && t[1];
}
exports.findTag = findTag;
function resultOf(tags, isWhite) {
    switch (findTag(tags, 'result')) {
        case '1-0': return isWhite ? '1' : '0';
        case '0-1': return isWhite ? '0' : '1';
        case '1/2-1/2': return '1/2';
        default: return;
    }
}
exports.resultOf = resultOf;
function view(ctrl) {
    const canContribute = ctrl.members.canContribute(), configButton = canContribute ? snabbdom_1.h('act', { attrs: util_1.dataIcon('%') }) : null, current = ctrl.currentChapter();
    function update(vnode) {
        const newCount = ctrl.chapters.list().length, vData = vnode.data.li, el = vnode.elm;
        if (vData.count !== newCount) {
            if (current.id !== ctrl.chapters.firstChapterId()) {
                util_1.scrollTo(el, el.querySelector('.active'));
            }
        }
        else if (ctrl.vm.loading && vData.loadingId !== ctrl.vm.nextChapterId) {
            vData.loadingId = ctrl.vm.nextChapterId;
            util_1.scrollTo(el, el.querySelector('.loading'));
        }
        vData.count = newCount;
        if (canContribute && newCount > 1 && !vData.sortable) {
            const makeSortable = function () {
                vData.sortable = window['Sortable'].create(el, {
                    draggable: '.draggable',
                    handle: window.lichess.hasTouchEvents ? 'span' : undefined,
                    onSort() {
                        ctrl.chapters.sort(vData.sortable.toArray());
                    }
                });
            };
            if (window['Sortable'])
                makeSortable();
            else
                window.lichess.loadScript('javascripts/vendor/Sortable.min.js').then(makeSortable);
        }
    }
    const introActive = ctrl.relay && ctrl.relay.intro.active;
    return snabbdom_1.h('div.study__chapters', {
        hook: {
            insert(vnode) {
                vnode.elm.addEventListener('click', e => {
                    const target = e.target;
                    const id = target.parentNode.getAttribute('data-id') || target.getAttribute('data-id');
                    if (!id)
                        return;
                    if (target.tagName === 'ACT')
                        ctrl.chapters.editForm.toggle(ctrl.chapters.get(id));
                    else
                        ctrl.setChapter(id);
                });
                vnode.data.li = {};
                update(vnode);
                window.lichess.pubsub.emit('chat.resize');
            },
            postpatch(old, vnode) {
                vnode.data.li = old.data.li;
                update(vnode);
            },
            destroy: vnode => {
                const sortable = vnode.data.li.sortable;
                if (sortable)
                    sortable.destroy();
            }
        }
    }, ctrl.chapters.list().map((chapter, i) => {
        const editing = ctrl.chapters.editForm.isEditing(chapter.id), loading = ctrl.vm.loading && chapter.id === ctrl.vm.nextChapterId, active = !ctrl.vm.loading && current && !introActive && current.id === chapter.id;
        return snabbdom_1.h('div', {
            key: chapter.id,
            attrs: { 'data-id': chapter.id },
            class: { active, editing, loading, draggable: canContribute }
        }, [
            snabbdom_1.h('span', loading ? snabbdom_1.h('span.ddloader') : ['' + (i + 1)]),
            snabbdom_1.h('h3', chapter.name),
            configButton
        ]);
    }).concat(ctrl.members.canContribute() ? [
        snabbdom_1.h('div.add', {
            hook: util_1.bind('click', ctrl.chapters.toggleNewForm, ctrl.redraw)
        }, [
            snabbdom_1.h('span', util_1.iconTag('O')),
            snabbdom_1.h('h3', ctrl.trans.noarg('addNewChapter'))
        ])
    ] : []));
}
exports.view = view;

},{"../util":110,"./chapterEditForm":75,"./chapterNewForm":76,"common":131,"snabbdom":35}],96:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
function authorDom(author) {
    if (!author)
        return 'Unknown';
    if (!author.name)
        return author;
    return snabbdom_1.h('span.user-link.ulpt', {
        attrs: { 'data-href': '/@/' + author.id }
    }, author.name);
}
function authorText(author) {
    if (!author)
        return 'Unknown';
    if (!author.name)
        return author;
    return author.name;
}
exports.authorText = authorText;
function currentComments(ctrl, includingMine) {
    if (!ctrl.node.comments)
        return;
    const node = ctrl.node, study = ctrl.study, chapter = study.currentChapter(), comments = node.comments;
    if (!comments.length)
        return;
    return snabbdom_1.h('div', comments.map((comment) => {
        const by = comment.by;
        const isMine = by.id && ctrl.opts.userId === by.id;
        if (!includingMine && isMine)
            return;
        const canDelete = isMine || study.members.isOwner();
        return snabbdom_1.h('div.study__comment.' + comment.id, [
            canDelete && study.vm.mode.write ? snabbdom_1.h('a.edit', {
                attrs: {
                    'data-icon': 'q',
                    title: 'Delete'
                },
                hook: util_1.bind('click', _ => {
                    if (confirm('Delete ' + authorText(by) + '\'s comment?'))
                        study.commentForm.delete(chapter.id, ctrl.path, comment.id);
                }, ctrl.redraw)
            }) : null,
            isMine && study.vm.mode.write ? snabbdom_1.h('a.edit', {
                attrs: {
                    'data-icon': 'm',
                    title: 'Edit'
                },
                hook: util_1.bind('click', _ => {
                    study.commentForm.start(chapter.id, ctrl.path, node);
                }, ctrl.redraw)
            }) : null,
            authorDom(by),
            ...(node.san ? [
                ' on ',
                snabbdom_1.h('span.node', util_1.nodeFullName(node))
            ] : []),
            ': ',
            snabbdom_1.h('div.text', { hook: util_1.richHTML(comment.text) })
        ]);
    }));
}
exports.currentComments = currentComments;

},{"../util":110,"snabbdom":35}],97:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("common");
const throttle_1 = require("common/throttle");
const studyMembers_1 = require("./studyMembers");
const studyChapters_1 = require("./studyChapters");
const studyPracticeCtrl_1 = require("./practice/studyPracticeCtrl");
const commentForm_1 = require("./commentForm");
const studyGlyph_1 = require("./studyGlyph");
const studyForm_1 = require("./studyForm");
const notif_1 = require("./notif");
const studyShare_1 = require("./studyShare");
const studyTags_1 = require("./studyTags");
const serverEval_1 = require("./serverEval");
const tours = require("./studyTour");
const xhr = require("./studyXhr");
const tree_1 = require("tree");
const gamebookPlayCtrl_1 = require("./gamebook/gamebookPlayCtrl");
const description_1 = require("./description");
const relayCtrl_1 = require("./relay/relayCtrl");
const multiBoard_1 = require("./multiBoard");
const li = window.lichess;
// data.position.path represents the server state
// ctrl.path is the client state
function default_1(data, ctrl, tagTypes, practiceData, relayData) {
    const send = ctrl.socket.send;
    const redraw = ctrl.redraw;
    const vm = (() => {
        const isManualChapter = data.chapter.id !== data.position.chapterId;
        const sticked = data.features.sticky && !ctrl.initialPath && !isManualChapter && !practiceData;
        return {
            loading: false,
            tab: common_1.prop(relayData || data.chapters.length > 1 ? 'chapters' : 'members'),
            toolTab: common_1.prop('tags'),
            chapterId: sticked ? data.position.chapterId : data.chapter.id,
            // path is at ctrl.path
            mode: {
                sticky: sticked,
                write: true
            },
            // how many events missed because sync=off
            behind: 0,
            // how stale is the study
            updatedAt: Date.now() - data.secondsSinceUpdate * 1000,
            gamebookOverride: undefined
        };
    })();
    const notif = notif_1.ctrl(redraw);
    function startTour() {
        tours.study(ctrl);
    }
    ;
    const members = studyMembers_1.ctrl({
        initDict: data.members,
        myId: practiceData ? null : ctrl.opts.userId,
        ownerId: data.ownerId,
        send,
        tab: vm.tab,
        startTour,
        notif,
        onBecomingContributor() {
            vm.mode.write = true;
        },
        redraw,
        trans: ctrl.trans
    });
    const chapters = studyChapters_1.ctrl(data.chapters, send, () => vm.tab('chapters'), chapterId => xhr.chapterConfig(data.id, chapterId), ctrl);
    function currentChapter() {
        return chapters.get(vm.chapterId);
    }
    ;
    function isChapterOwner() {
        return ctrl.opts.userId === data.chapter.ownerId;
    }
    ;
    const multiBoard = new multiBoard_1.MultiBoardCtrl(data.id, redraw, ctrl.trans);
    const relay = relayData ? new relayCtrl_1.default(relayData, send, redraw, members, data.chapter) : undefined;
    const form = studyForm_1.ctrl((d, isNew) => {
        send("editStudy", d);
        if (isNew && data.chapter.setup.variant.key === 'standard' && ctrl.mainline.length === 1 && !data.chapter.setup.fromFen && !relay)
            chapters.newForm.openInitial();
    }, () => data, ctrl.trans, redraw, relay);
    function isWriting() {
        return vm.mode.write && !isGamebookPlay();
    }
    function makeChange(t, d) {
        if (isWriting()) {
            send(t, d);
            return true;
        }
        return vm.mode.sticky = false;
    }
    ;
    const commentForm = commentForm_1.ctrl(ctrl);
    const glyphForm = studyGlyph_1.ctrl(ctrl);
    const tags = studyTags_1.ctrl(ctrl, () => data.chapter, tagTypes);
    const studyDesc = new description_1.DescriptionCtrl(data.description, t => {
        data.description = t;
        send("descStudy", t);
    }, redraw);
    const chapterDesc = new description_1.DescriptionCtrl(data.chapter.description, t => {
        data.chapter.description = t;
        send("descChapter", { id: vm.chapterId, desc: t });
    }, redraw);
    const serverEval = serverEval_1.ctrl(ctrl, () => vm.chapterId);
    function addChapterId(req) {
        req.ch = vm.chapterId;
        return req;
    }
    function isGamebookPlay() {
        return data.chapter.gamebook && vm.gamebookOverride !== 'analyse' &&
            (vm.gamebookOverride === 'play' || !members.canContribute());
    }
    if (vm.mode.sticky && !isGamebookPlay())
        ctrl.userJump(data.position.path);
    else if (data.chapter.relay && !ctrl.initialPath)
        ctrl.userJump(data.chapter.relay.path);
    function configureAnalysis() {
        if (ctrl.embed)
            return;
        const canContribute = members.canContribute();
        // unwrite if member lost privileges
        vm.mode.write = vm.mode.write && canContribute;
        li.pubsub.emit('chat.writeable', data.features.chat);
        li.pubsub.emit('chat.permissions', { local: canContribute });
        li.pubsub.emit('palantir.toggle', data.features.chat && !!members.myMember());
        const computer = !isGamebookPlay() && !!(data.chapter.features.computer || data.chapter.practice);
        if (!computer)
            ctrl.getCeval().enabled(false);
        ctrl.getCeval().allowed(computer);
        if (!data.chapter.features.explorer)
            ctrl.explorer.disable();
        ctrl.explorer.allowed(data.chapter.features.explorer);
    }
    ;
    configureAnalysis();
    function configurePractice() {
        if (!data.chapter.practice && ctrl.practice)
            ctrl.togglePractice();
        if (data.chapter.practice)
            ctrl.restartPractice();
        if (practice)
            practice.onLoad();
    }
    ;
    function onReload(d) {
        const s = d.study;
        const prevPath = ctrl.path;
        const sameChapter = data.chapter.id === s.chapter.id;
        vm.mode.sticky = (vm.mode.sticky && s.features.sticky) || (!data.features.sticky && s.features.sticky);
        if (vm.mode.sticky)
            vm.behind = 0;
        'position name visibility features settings chapter likes liked description'.split(' ').forEach(key => {
            data[key] = s[key];
        });
        chapterDesc.set(data.chapter.description);
        studyDesc.set(data.description);
        document.title = data.name;
        members.dict(s.members);
        chapters.list(s.chapters);
        ctrl.flipped = false;
        const merge = !vm.mode.write && sameChapter;
        ctrl.reloadData(d.analysis, merge);
        vm.gamebookOverride = undefined;
        configureAnalysis();
        vm.loading = false;
        instanciateGamebookPlay();
        if (relay)
            relay.applyChapterRelay(data.chapter, s.chapter.relay);
        let nextPath;
        if (vm.mode.sticky) {
            vm.chapterId = data.position.chapterId;
            nextPath = ((vm.justSetChapterId === vm.chapterId) && chapters.localPaths[vm.chapterId]) || data.position.path;
        }
        else {
            nextPath = sameChapter ? prevPath : (data.chapter.relay ? data.chapter.relay.path : (chapters.localPaths[vm.chapterId] || tree_1.path.root));
        }
        // path could be gone (because of subtree deletion), go as far as possible
        ctrl.userJump(ctrl.tree.longestValidPath(nextPath));
        vm.justSetChapterId = undefined;
        configurePractice();
        serverEval.reset();
        commentForm.onSetPath(data.chapter.id, ctrl.path, ctrl.node, false);
        redraw();
        ctrl.startCeval();
    }
    ;
    const xhrReload = throttle_1.default(700, () => {
        vm.loading = true;
        return xhr.reload(practice ? 'practice/load' : 'study', data.id, vm.mode.sticky ? undefined : vm.chapterId).then(onReload, li.reload);
    });
    const onSetPath = throttle_1.default(300, (path) => {
        if (vm.mode.sticky && path !== data.position.path)
            makeChange("setPath", addChapterId({
                path
            }));
    });
    if (members.canContribute())
        form.openIfNew();
    function currentNode() {
        return ctrl.node;
    }
    ;
    const share = studyShare_1.ctrl(data, currentChapter, currentNode, redraw, ctrl.trans);
    const practice = practiceData && studyPracticeCtrl_1.default(ctrl, data, practiceData);
    let gamebookPlay;
    function instanciateGamebookPlay() {
        if (!isGamebookPlay())
            return gamebookPlay = undefined;
        if (gamebookPlay && gamebookPlay.chapterId === vm.chapterId)
            return;
        gamebookPlay = new gamebookPlayCtrl_1.default(ctrl, vm.chapterId, ctrl.trans, redraw);
        vm.mode.sticky = false;
    }
    instanciateGamebookPlay();
    function mutateCgConfig(config) {
        config.drawable.onChange = shapes => {
            if (vm.mode.write) {
                ctrl.tree.setShapes(shapes, ctrl.path);
                makeChange("shapes", addChapterId({
                    path: ctrl.path,
                    shapes
                }));
            }
            gamebookPlay && gamebookPlay.onShapeChange(shapes);
        };
    }
    function wrongChapter(serverData) {
        if (serverData.p.chapterId !== vm.chapterId) {
            // sticky should really be on the same chapter
            if (vm.mode.sticky && serverData.sticky)
                xhrReload();
            return true;
        }
    }
    function setMemberActive(who) {
        who && members.setActive(who.u);
        vm.updatedAt = Date.now();
    }
    function withPosition(obj) {
        obj.ch = vm.chapterId;
        obj.path = ctrl.path;
        return obj;
    }
    const likeToggler = li.debounce(() => send("like", { liked: data.liked }), 1000);
    const socketHandlers = {
        path(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (!vm.mode.sticky) {
                vm.behind++;
                return redraw();
            }
            if (position.chapterId !== data.position.chapterId ||
                !ctrl.tree.pathExists(position.path)) {
                return xhrReload();
            }
            data.position.path = position.path;
            if (who && who.s === li.sri)
                return;
            ctrl.userJump(position.path);
            redraw();
        },
        addNode(d) {
            const position = d.p, node = d.n, who = d.w, sticky = d.s;
            setMemberActive(who);
            if (vm.toolTab() == 'multiBoard' || relay && relay.intro.active)
                multiBoard.addNode(d.p, d.n);
            if (sticky && !vm.mode.sticky)
                vm.behind++;
            if (wrongChapter(d)) {
                if (sticky && !vm.mode.sticky)
                    redraw();
                return;
            }
            if (sticky && who && who.s === li.sri) {
                data.position.path = position.path + node.id;
                return;
            }
            if (relay)
                relay.applyChapterRelay(data.chapter, d.relay);
            const newPath = ctrl.tree.addNode(node, position.path);
            if (!newPath)
                return xhrReload();
            ctrl.tree.addDests(d.d, newPath, d.o);
            if (sticky)
                data.position.path = newPath;
            if ((sticky && vm.mode.sticky) || (position.path === ctrl.path &&
                position.path === tree_1.path.fromNodeList(ctrl.mainline)))
                ctrl.jump(newPath);
            redraw();
        },
        deleteNode(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            // deleter already has it done
            if (who && who.s === li.sri)
                return;
            if (!ctrl.tree.pathExists(d.p.path))
                return xhrReload();
            ctrl.tree.deleteNodeAt(position.path);
            if (vm.mode.sticky)
                ctrl.jump(ctrl.path);
            redraw();
        },
        promote(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            if (who && who.s === li.sri)
                return;
            if (!ctrl.tree.pathExists(d.p.path))
                return xhrReload();
            ctrl.tree.promoteAt(position.path, d.toMainline);
            if (vm.mode.sticky)
                ctrl.jump(ctrl.path);
            redraw();
        },
        reload: xhrReload,
        changeChapter(d) {
            setMemberActive(d.w);
            if (!vm.mode.sticky)
                vm.behind++;
            data.position = d.p;
            if (vm.mode.sticky)
                xhrReload();
            else
                redraw();
        },
        updateChapter(d) {
            setMemberActive(d.w);
            xhrReload();
        },
        descChapter(d) {
            setMemberActive(d.w);
            if (d.w && d.w.s === li.sri)
                return;
            if (data.chapter.id === d.chapterId) {
                data.chapter.description = d.desc;
                chapterDesc.set(d.desc);
            }
            redraw();
        },
        descStudy(d) {
            setMemberActive(d.w);
            if (d.w && d.w.s === li.sri)
                return;
            data.description = d.desc;
            studyDesc.set(d.desc);
            redraw();
        },
        addChapter(d) {
            setMemberActive(d.w);
            if (d.s && !vm.mode.sticky)
                vm.behind++;
            if (d.s)
                data.position = d.p;
            else if (d.w && d.w.s === li.sri) {
                vm.mode.write = true;
                vm.chapterId = d.p.chapterId;
            }
            xhrReload();
        },
        members(d) {
            members.update(d);
            configureAnalysis();
            redraw();
        },
        chapters(d) {
            chapters.list(d);
            if (!currentChapter()) {
                vm.chapterId = d[0].id;
                if (!vm.mode.sticky)
                    xhrReload();
            }
            redraw();
        },
        shapes(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            if (who && who.s === li.sri)
                return;
            ctrl.tree.setShapes(d.s, ctrl.path);
            if (ctrl.path === position.path)
                ctrl.withCg(cg => cg.setShapes(d.s));
            redraw();
        },
        validationError(d) {
            alert(d.error);
        },
        setComment(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            ctrl.tree.setCommentAt(d.c, position.path);
            redraw();
        },
        setTags(d) {
            setMemberActive(d.w);
            if (d.chapterId !== vm.chapterId)
                return;
            data.chapter.tags = d.tags;
            redraw();
        },
        deleteComment(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            ctrl.tree.deleteCommentAt(d.id, position.path);
            redraw();
        },
        glyphs(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            ctrl.tree.setGlyphsAt(d.g, position.path);
            redraw();
        },
        clock(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            ctrl.tree.setClockAt(d.c, position.path);
            redraw();
        },
        forceVariation(d) {
            const position = d.p, who = d.w;
            setMemberActive(who);
            if (wrongChapter(d))
                return;
            ctrl.tree.forceVariationAt(position.path, d.force);
            redraw();
        },
        conceal(d) {
            if (wrongChapter(d))
                return;
            data.chapter.conceal = d.ply;
            redraw();
        },
        liking(d) {
            data.likes = d.l.likes;
            if (d.w && d.w.s === li.sri)
                data.liked = d.l.me;
            redraw();
        },
        following_onlines: members.inviteForm.setFollowings,
        following_leaves: members.inviteForm.delFollowing,
        following_enters: members.inviteForm.addFollowing,
        crowd(d) {
            members.setSpectators(d.users);
        },
        error(msg) {
            alert(msg);
        }
    };
    return {
        data,
        form,
        members,
        chapters,
        notif,
        commentForm,
        glyphForm,
        serverEval,
        share,
        tags,
        studyDesc,
        chapterDesc,
        vm,
        relay,
        multiBoard,
        isUpdatedRecently() {
            return Date.now() - vm.updatedAt < 300 * 1000;
        },
        toggleLike() {
            data.liked = !data.liked;
            redraw();
            likeToggler();
        },
        position() {
            return data.position;
        },
        currentChapter,
        isChapterOwner,
        canJumpTo(path) {
            if (gamebookPlay)
                return gamebookPlay.canJumpTo(path);
            return data.chapter.conceal === undefined ||
                isChapterOwner() ||
                tree_1.path.contains(ctrl.path, path) || // can always go back
                ctrl.tree.lastMainlineNode(path).ply <= data.chapter.conceal;
        },
        onJump() {
            if (gamebookPlay)
                gamebookPlay.onJump();
            else
                chapters.localPaths[vm.chapterId] = ctrl.path; // don't remember position on gamebook
            if (practice)
                practice.onJump();
        },
        withPosition,
        setPath(path, node, playedMyself) {
            onSetPath(path);
            commentForm.onSetPath(vm.chapterId, path, node, playedMyself);
        },
        deleteNode(path) {
            makeChange("deleteNode", addChapterId({
                path,
                jumpTo: ctrl.path
            }));
        },
        promote(path, toMainline) {
            makeChange("promote", addChapterId({
                toMainline,
                path
            }));
        },
        forceVariation(path, force) {
            makeChange("forceVariation", addChapterId({
                force,
                path
            }));
        },
        setChapter(id, force) {
            const alreadySet = id === vm.chapterId && !force;
            if (relay && relay.intro.active) {
                relay.intro.disable();
                if (alreadySet)
                    redraw();
            }
            if (alreadySet)
                return;
            if (!vm.mode.sticky || !makeChange("setChapter", id)) {
                vm.mode.sticky = false;
                if (!vm.behind)
                    vm.behind = 1;
                vm.chapterId = id;
                xhrReload();
            }
            vm.loading = true;
            vm.nextChapterId = id;
            vm.justSetChapterId = id;
            redraw();
        },
        toggleSticky() {
            vm.mode.sticky = !vm.mode.sticky && data.features.sticky;
            xhrReload();
        },
        toggleWrite() {
            vm.mode.write = !vm.mode.write && members.canContribute();
            xhrReload();
        },
        isWriting,
        makeChange,
        startTour,
        userJump: ctrl.userJump,
        currentNode,
        practice,
        gamebookPlay: () => gamebookPlay,
        nextChapter() {
            const chapters = data.chapters, currentId = currentChapter().id;
            for (let i in chapters)
                if (chapters[i].id === currentId)
                    return chapters[parseInt(i) + 1];
        },
        setGamebookOverride(o) {
            vm.gamebookOverride = o;
            instanciateGamebookPlay();
            configureAnalysis();
            ctrl.userJump(ctrl.path);
            if (!o)
                xhrReload();
        },
        mutateCgConfig,
        explorerGame(gameId, insert) {
            makeChange('explorerGame', withPosition({ gameId, insert }));
        },
        onPremoveSet() {
            if (gamebookPlay)
                gamebookPlay.onPremoveSet();
        },
        redraw,
        trans: ctrl.trans,
        socketHandler: (t, d) => {
            const handler = socketHandlers[t];
            if (handler) {
                handler(d);
                return true;
            }
            return !!relay && relay.socketHandler(t, d);
        },
    };
}
exports.default = default_1;
;

},{"./commentForm":77,"./description":78,"./gamebook/gamebookPlayCtrl":81,"./multiBoard":84,"./notif":85,"./practice/studyPracticeCtrl":88,"./relay/relayCtrl":91,"./serverEval":94,"./studyChapters":95,"./studyForm":98,"./studyGlyph":99,"./studyMembers":100,"./studyShare":101,"./studyTags":102,"./studyTour":103,"./studyXhr":105,"common":131,"common/throttle":137,"tree":142}],98:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const modal = require("../modal");
const common_1 = require("common");
const util_1 = require("../util");
function select(s) {
    return [
        snabbdom_1.h('label.form-label', {
            attrs: { for: 'study-' + s.key }
        }, s.name),
        snabbdom_1.h(`select#study-${s.key}.form-control`, s.choices.map(function (o) {
            return snabbdom_1.h('option', {
                attrs: {
                    value: o[0],
                    selected: s.selected === o[0]
                }
            }, o[1]);
        }))
    ];
}
;
function ctrl(save, getData, trans, redraw, relay) {
    const initAt = Date.now();
    function isNew() {
        const d = getData();
        return d.from === 'scratch' && !!d.isNew && Date.now() - initAt < 9000;
    }
    const open = common_1.prop(false);
    return {
        open,
        openIfNew() {
            if (isNew())
                open(true);
        },
        save(data, isNew) {
            save(data, isNew);
            open(false);
        },
        getData,
        isNew,
        trans,
        redraw,
        relay
    };
}
exports.ctrl = ctrl;
function view(ctrl) {
    const data = ctrl.getData();
    const isNew = ctrl.isNew();
    const updateName = function (vnode, isUpdate) {
        const el = vnode.elm;
        if (!isUpdate && !el.value) {
            el.value = data.name;
            if (isNew)
                el.select();
            el.focus();
        }
    };
    const userSelectionChoices = [
        ['nobody', ctrl.trans.noarg('nobody')],
        ['owner', ctrl.trans.noarg('onlyMe')],
        ['contributor', ctrl.trans.noarg('contributors')],
        ['member', ctrl.trans.noarg('members')],
        ['everyone', ctrl.trans.noarg('everyone')]
    ];
    return modal.modal({
        class: 'study-edit',
        onClose: function () {
            ctrl.open(false);
            ctrl.redraw();
        },
        content: [
            snabbdom_1.h('h2', ctrl.trans.noarg(ctrl.relay ? 'configureLiveBroadcast' : (isNew ? 'createStudy' : 'editStudy'))),
            snabbdom_1.h('form.form3', {
                hook: util_1.bindSubmit(e => {
                    const obj = {};
                    'name visibility computer explorer cloneable chat sticky description'.split(' ').forEach(n => {
                        const el = e.target.querySelector('#study-' + n);
                        if (el)
                            obj[n] = el.value;
                    });
                    ctrl.save(obj, isNew);
                }, ctrl.redraw)
            }, [
                snabbdom_1.h('div.form-group' + (ctrl.relay ? '.none' : ''), [
                    snabbdom_1.h('label.form-label', { attrs: { 'for': 'study-name' } }, ctrl.trans.noarg('name')),
                    snabbdom_1.h('input#study-name.form-control', {
                        attrs: {
                            minlength: 3,
                            maxlength: 100
                        },
                        hook: {
                            insert: vnode => updateName(vnode, false),
                            postpatch: (_, vnode) => updateName(vnode, true)
                        }
                    })
                ]),
                snabbdom_1.h('div.form-split', [
                    snabbdom_1.h('div.form-group.form-half', select({
                        key: 'visibility',
                        name: ctrl.trans.noarg('visibility'),
                        choices: [
                            ['public', ctrl.trans.noarg('public')],
                            ['unlisted', ctrl.trans.noarg('unlisted')],
                            ['private', ctrl.trans.noarg('inviteOnly')]
                        ],
                        selected: data.visibility
                    })),
                    snabbdom_1.h('div.form-group.form-half', select({
                        key: 'cloneable',
                        name: ctrl.trans.noarg('allowCloning'),
                        choices: userSelectionChoices,
                        selected: data.settings.cloneable
                    }))
                ]),
                snabbdom_1.h('div.form-split', [
                    snabbdom_1.h('div.form-group.form-half', select({
                        key: 'computer',
                        name: ctrl.trans.noarg('computerAnalysis'),
                        choices: userSelectionChoices.map(c => [c[0], ctrl.trans.noarg(c[1])]),
                        selected: data.settings.computer
                    })),
                    snabbdom_1.h('div.form-group.form-half', select({
                        key: 'explorer',
                        name: ctrl.trans.noarg('openingExplorer'),
                        choices: userSelectionChoices,
                        selected: data.settings.explorer
                    }))
                ]),
                snabbdom_1.h('div.form-split', [
                    snabbdom_1.h('div.form-group.form-half', select({
                        key: 'chat',
                        name: ctrl.trans.noarg('chat'),
                        choices: userSelectionChoices,
                        selected: data.settings.chat
                    })),
                    snabbdom_1.h('div.form-group.form-half', select({
                        key: 'sticky',
                        name: ctrl.trans.noarg('enableSync'),
                        choices: [
                            ['true', ctrl.trans.noarg('yesKeepEveryoneOnTheSamePosition')],
                            ['false', ctrl.trans.noarg('noLetPeopleBrowseFreely')]
                        ],
                        selected: '' + data.settings.sticky
                    }))
                ]),
                snabbdom_1.h('div.form-group.form-half', select({
                    key: 'description',
                    name: ctrl.trans.noarg('pinnedStudyComment'),
                    choices: [
                        ['false', ctrl.trans.noarg('noPinnedComment')],
                        ['true', ctrl.trans.noarg('rightUnderTheBoard')]
                    ],
                    selected: '' + data.settings.description
                })),
                modal.button(ctrl.trans.noarg(isNew ? 'start' : 'save'))
            ]),
            snabbdom_1.h('div.destructive', [
                isNew ? null : snabbdom_1.h('form', {
                    attrs: {
                        action: '/study/' + data.id + '/clear-chat',
                        method: 'post'
                    },
                    hook: util_1.bind('submit', _ => {
                        return confirm(ctrl.trans.noarg('deleteTheStudyChatHistory'));
                    })
                }, [
                    snabbdom_1.h(util_1.emptyRedButton, ctrl.trans.noarg('clearChat'))
                ]),
                snabbdom_1.h('form', {
                    attrs: {
                        action: '/study/' + data.id + '/delete',
                        method: 'post'
                    },
                    hook: util_1.bind('submit', _ => {
                        return isNew || confirm(ctrl.trans.noarg('deleteTheEntireStudy'));
                    })
                }, [
                    snabbdom_1.h(util_1.emptyRedButton, ctrl.trans.noarg(isNew ? 'cancel' : 'deleteStudy'))
                ])
            ])
        ]
    });
}
exports.view = view;

},{"../modal":63,"../util":110,"common":131,"snabbdom":35}],99:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const xhr = require("./studyXhr");
const common_1 = require("common");
const throttle_1 = require("common/throttle");
const util_1 = require("../util");
function renderGlyph(ctrl, node) {
    return function (glyph) {
        return snabbdom_1.h('a', {
            hook: util_1.bind('click', _ => {
                ctrl.toggleGlyph(glyph.id);
                return false;
            }, ctrl.redraw),
            attrs: { 'data-symbol': glyph.symbol },
            class: {
                active: !!node.glyphs && !!node.glyphs.find(g => g.id === glyph.id)
            }
        }, [
            glyph.name
        ]);
    };
}
function ctrl(root) {
    const all = common_1.prop(null);
    function loadGlyphs() {
        if (!all())
            xhr.glyphs().then(gs => {
                all(gs);
                root.redraw();
            });
    }
    ;
    const toggleGlyph = throttle_1.default(500, (id) => {
        root.study.makeChange('toggleGlyph', root.study.withPosition({
            id
        }));
    });
    return {
        root,
        all,
        loadGlyphs,
        toggleGlyph,
        redraw: root.redraw
    };
}
exports.ctrl = ctrl;
function viewDisabled(why) {
    return snabbdom_1.h('div.study__glyphs', [
        snabbdom_1.h('div.study__message', why)
    ]);
}
exports.viewDisabled = viewDisabled;
function view(ctrl) {
    const all = ctrl.all(), node = ctrl.root.node;
    return snabbdom_1.h('div.study__glyphs' + (all ? '' : '.empty'), {
        hook: { insert: ctrl.loadGlyphs }
    }, all ? [
        snabbdom_1.h('div.move', all.move.map(renderGlyph(ctrl, node))),
        snabbdom_1.h('div.position', all.position.map(renderGlyph(ctrl, node))),
        snabbdom_1.h('div.observation', all.observation.map(renderGlyph(ctrl, node)))
    ] : [snabbdom_1.h('div.study__message', util_1.spinner())]);
}
exports.view = view;

},{"../util":110,"./studyXhr":105,"common":131,"common/throttle":137,"snabbdom":35}],100:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
const common_1 = require("common");
const inviteForm_1 = require("./inviteForm");
function memberActivity(onIdle) {
    let timeout;
    let schedule = function () {
        if (timeout)
            clearTimeout(timeout);
        timeout = setTimeout(onIdle, 100);
    };
    schedule();
    return schedule;
}
function ctrl(opts) {
    const dict = common_1.prop(opts.initDict);
    const confing = common_1.prop(undefined);
    let active = {};
    let online = {};
    let spectatorIds = [];
    const max = 30;
    function owner() {
        return dict()[opts.ownerId];
    }
    ;
    function isOwner() {
        return opts.myId === opts.ownerId;
    }
    ;
    function myMember() {
        return opts.myId ? dict()[opts.myId] : null;
    }
    ;
    function canContribute() {
        var m = myMember();
        return m && m.role === 'w';
    }
    ;
    const inviteForm = inviteForm_1.ctrl(opts.send, dict, () => opts.tab('members'), opts.redraw, opts.trans);
    function setActive(id) {
        if (opts.tab() !== 'members')
            return;
        if (active[id])
            active[id]();
        else
            active[id] = memberActivity(function () {
                delete (active[id]);
                opts.redraw();
            });
        opts.redraw();
    }
    ;
    function updateOnline() {
        online = {};
        const members = dict();
        spectatorIds.forEach(function (id) {
            if (members[id])
                online[id] = true;
        });
        if (opts.tab() === 'members')
            opts.redraw();
    }
    return {
        dict,
        confing,
        myId: opts.myId,
        inviteForm,
        update(members) {
            if (isOwner())
                confing(Object.keys(members).find(function (sri) {
                    return !dict()[sri];
                }));
            const wasViewer = myMember() && !canContribute();
            const wasContrib = myMember() && canContribute();
            dict(members);
            if (wasViewer && canContribute()) {
                if (window.lichess.once('study-tour'))
                    opts.startTour();
                opts.onBecomingContributor();
                opts.notif.set({
                    text: opts.trans.noarg('youAreNowAContributor'),
                    duration: 3000
                });
            }
            else if (wasContrib && !canContribute())
                opts.notif.set({
                    text: opts.trans.noarg('youAreNowASpectator'),
                    duration: 3000
                });
            updateOnline();
        },
        setActive,
        isActive(id) {
            return !!active[id];
        },
        owner,
        myMember,
        isOwner,
        canContribute,
        max,
        setRole(id, role) {
            setActive(id);
            opts.send("setRole", {
                userId: id,
                role
            });
            confing(undefined);
        },
        kick(id) {
            opts.send("kick", id);
            confing(undefined);
        },
        leave() {
            opts.send("leave");
        },
        ordered() {
            const d = dict();
            return Object.keys(d).map(id => d[id]).sort((a, b) => a.role === 'r' && b.role === 'w' ? 1 : (a.role === 'w' && b.role === 'r' ? -1 : 0));
        },
        size() {
            return Object.keys(dict()).length;
        },
        setSpectators(usernames) {
            const names = usernames || [];
            this.inviteForm.setSpectators(names);
            spectatorIds = names.map(util_1.titleNameToId);
            updateOnline();
        },
        isOnline(userId) {
            return online[userId];
        },
        hasOnlineContributor() {
            const members = dict();
            for (let i in members)
                if (online[i] && members[i].role === 'w')
                    return true;
            return false;
        }
    };
}
exports.ctrl = ctrl;
function view(ctrl) {
    const isOwner = ctrl.members.isOwner();
    function username(member) {
        var u = member.user;
        return snabbdom_1.h('span.user-link.ulpt', {
            attrs: { 'data-href': '/@/' + u.name }
        }, (u.title ? u.title + ' ' : '') + u.name);
    }
    ;
    function statusIcon(member) {
        const contrib = member.role === 'w';
        return snabbdom_1.h('span.status', {
            class: {
                contrib,
                active: ctrl.members.isActive(member.user.id),
                online: ctrl.members.isOnline(member.user.id)
            },
            attrs: { title: ctrl.trans.noarg(contrib ? 'contributor' : 'spectator') },
        }, [
            util_1.iconTag(contrib ? 'r' : 'v')
        ]);
    }
    ;
    function configButton(ctrl, member) {
        if (isOwner && member.user.id !== ctrl.members.myId)
            return snabbdom_1.h('act', {
                key: 'cfg-' + member.user.id,
                attrs: util_1.dataIcon('%'),
                hook: util_1.bind('click', _ => {
                    ctrl.members.confing(ctrl.members.confing() === member.user.id ? null : member.user.id);
                }, ctrl.redraw)
            });
        if (!isOwner && member.user.id === ctrl.members.myId)
            return snabbdom_1.h('act.leave', {
                key: 'leave',
                attrs: {
                    'data-icon': 'F',
                    title: ctrl.trans.noarg('leaveTheStudy')
                },
                hook: util_1.bind('click', ctrl.members.leave, ctrl.redraw)
            });
    }
    ;
    function memberConfig(member) {
        const roleId = 'member-role';
        return snabbdom_1.h('m-config', {
            key: member.user.id + '-config',
            hook: util_1.onInsert(el => util_1.scrollTo($(el).parent('.members')[0], el))
        }, [
            snabbdom_1.h('div.role', [
                snabbdom_1.h('div.switch', [
                    snabbdom_1.h('input.cmn-toggle', {
                        attrs: {
                            id: roleId,
                            type: 'checkbox',
                            checked: member.role === 'w'
                        },
                        hook: util_1.bind('change', e => {
                            ctrl.members.setRole(member.user.id, e.target.checked ? 'w' : 'r');
                        }, ctrl.redraw)
                    }),
                    snabbdom_1.h('label', { attrs: { 'for': roleId } })
                ]),
                snabbdom_1.h('label', { attrs: { 'for': roleId } }, ctrl.trans.noarg('contributor'))
            ]),
            snabbdom_1.h('div.kick', snabbdom_1.h('a.button.button-red.button-empty.text', {
                attrs: util_1.dataIcon('L'),
                hook: util_1.bind('click', _ => ctrl.members.kick(member.user.id), ctrl.redraw)
            }, ctrl.trans.noarg('kick')))
        ]);
    }
    ;
    var ordered = ctrl.members.ordered();
    return snabbdom_1.h('div.study__members', {
        hook: {
            insert: _ => {
                window.lichess.pubsub.emit('content_loaded');
                window.lichess.pubsub.emit('chat.resize');
            }
        }
    }, [
        ...ordered.map(function (member) {
            const confing = ctrl.members.confing() === member.user.id;
            return [
                snabbdom_1.h('div', {
                    key: member.user.id,
                    class: { editing: !!confing }
                }, [
                    snabbdom_1.h('div.left', [
                        statusIcon(member),
                        username(member)
                    ]),
                    configButton(ctrl, member)
                ]),
                confing ? memberConfig(member) : null
            ];
        }).reduce((a, b) => a.concat(b), []),
        (isOwner && ordered.length < ctrl.members.max) ? snabbdom_1.h('div.add', {
            key: 'add',
            hook: util_1.bind('click', ctrl.members.inviteForm.toggle, ctrl.redraw)
        }, [
            snabbdom_1.h('div.left', [
                snabbdom_1.h('span.status', util_1.iconTag('O')),
                snabbdom_1.h('div.user-link', ctrl.trans.noarg('addMembers'))
            ])
        ]) : null
    ]);
}
exports.view = view;

},{"../util":110,"./inviteForm":83,"common":131,"snabbdom":35}],101:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
const common_1 = require("common");
const moveView_1 = require("../moveView");
function fromPly(ctrl) {
    const renderedMove = moveView_1.renderIndexAndMove({
        withDots: true,
        showEval: false
    }, ctrl.currentNode());
    return snabbdom_1.h('div.ply-wrap', snabbdom_1.h('label.ply', [
        snabbdom_1.h('input', {
            attrs: { type: 'checkbox' },
            hook: util_1.bind('change', e => {
                ctrl.withPly(e.target.checked);
            }, ctrl.redraw)
        }),
        ...(renderedMove ?
            ctrl.trans.vdom('startAtX', snabbdom_1.h('strong', renderedMove)) :
            [ctrl.trans.noarg('startAtInitialPosition')])
    ]));
}
function ctrl(data, currentChapter, currentNode, redraw, trans) {
    const withPly = common_1.prop(false);
    return {
        studyId: data.id,
        chapter: currentChapter,
        isPrivate() {
            return data.visibility === 'private';
        },
        currentNode,
        withPly,
        cloneable: data.features.cloneable,
        redraw,
        trans
    };
}
exports.ctrl = ctrl;
function view(ctrl) {
    const studyId = ctrl.studyId, chapter = ctrl.chapter();
    let fullUrl = `${util_1.baseUrl()}/study/${studyId}/${chapter.id}`;
    let embedUrl = `${util_1.baseUrl()}/study/embed/${studyId}/${chapter.id}`;
    const isPrivate = ctrl.isPrivate();
    if (ctrl.withPly()) {
        const p = ctrl.currentNode().ply;
        fullUrl += '#' + p;
        embedUrl += '#' + p;
    }
    return snabbdom_1.h('div.study__share', [
        snabbdom_1.h('div.downloads', [
            ctrl.cloneable ? snabbdom_1.h('a.button.text', {
                attrs: {
                    'data-icon': '4',
                    href: '/study/' + studyId + '/clone'
                }
            }, ctrl.trans.noarg('cloneStudy')) : null,
            snabbdom_1.h('a.button.text', {
                attrs: {
                    'data-icon': 'x',
                    href: '/study/' + studyId + '.pgn'
                }
            }, ctrl.trans.noarg('studyPgn')),
            snabbdom_1.h('a.button.text', {
                attrs: {
                    'data-icon': 'x',
                    href: '/study/' + studyId + '/' + chapter.id + '.pgn'
                }
            }, ctrl.trans.noarg('chapterPgn'))
        ]),
        snabbdom_1.h('form.form3', [
            snabbdom_1.h('div.form-group', [
                snabbdom_1.h('label.form-label', ctrl.trans.noarg('studyUrl')),
                snabbdom_1.h('input.form-control.autoselect', {
                    attrs: {
                        readonly: true,
                        value: `${util_1.baseUrl()}/study/${studyId}`
                    }
                })
            ]),
            snabbdom_1.h('div.form-group', [
                snabbdom_1.h('label.form-label', ctrl.trans.noarg('currentChapterUrl')),
                snabbdom_1.h('input.form-control.autoselect', {
                    attrs: {
                        readonly: true,
                        value: fullUrl
                    }
                }),
                fromPly(ctrl),
                !isPrivate ? snabbdom_1.h('p.form-help.text', {
                    attrs: { 'data-icon': '' }
                }, ctrl.trans.noarg('youCanPasteThisInTheForumToEmbedTheChapter')) : null,
            ]),
            snabbdom_1.h('div.form-group', [
                snabbdom_1.h('label.form-label', ctrl.trans.noarg('embedThisChapter')),
                snabbdom_1.h('input.form-control.autoselect', {
                    attrs: {
                        readonly: true,
                        disabled: isPrivate,
                        value: !isPrivate ? '<iframe width=600 height=371 src="' + embedUrl + '" frameborder=0></iframe>' : ctrl.trans.noarg('onlyPublicStudiesCanBeEmbedded')
                    }
                })
            ].concat(!isPrivate ? [
                fromPly(ctrl),
                snabbdom_1.h('a.form-help.text', {
                    attrs: {
                        href: '/developers#embed-study',
                        target: '_blank',
                        'data-icon': ''
                    }
                }, ctrl.trans.noarg('readMoreAboutEmbeddingAStudyChapter'))
            ] : [])),
            snabbdom_1.h('div.form-group', [
                snabbdom_1.h('label.form-label', 'FEN'),
                snabbdom_1.h('input.form-control.autoselect', {
                    attrs: {
                        readonly: true,
                        value: ctrl.currentNode().fen
                    },
                })
            ])
        ])
    ]);
}
exports.view = view;

},{"../moveView":64,"../util":110,"common":131,"snabbdom":35}],102:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const throttle_1 = require("common/throttle");
const util_1 = require("../util");
function editable(value, submit) {
    return snabbdom_1.h('input', {
        key: value,
        attrs: {
            spellcheck: false,
            value
        },
        hook: util_1.onInsert(el => {
            el.onblur = function () {
                submit(el.value, el);
            };
            el.onkeypress = function (e) {
                if ((e.keyCode || e.which) == 13)
                    el.blur();
            };
        })
    });
}
function fixed(text) {
    return snabbdom_1.h('span', text);
}
let selectedType;
function renderPgnTags(chapter, submit, types, trans) {
    let rows = [];
    if (chapter.setup.variant.key !== 'standard')
        rows.push(['Variant', fixed(chapter.setup.variant.name)]);
    rows = rows.concat(chapter.tags.map(tag => [
        tag[0],
        submit ? editable(tag[1], submit(tag[0])) : fixed(tag[1])
    ]));
    if (submit) {
        const existingTypes = chapter.tags.map(t => t[0]);
        rows.push([
            snabbdom_1.h('select', {
                hook: {
                    insert: vnode => {
                        const el = vnode.elm;
                        selectedType = el.value;
                        el.addEventListener('change', _ => {
                            selectedType = el.value;
                            $(el).parents('tr').find('input').focus();
                        });
                    },
                    postpatch: (_, vnode) => {
                        selectedType = vnode.elm.value;
                    }
                }
            }, [
                snabbdom_1.h('option', trans.noarg('newTag')),
                ...types.map(t => {
                    if (!existingTypes.includes(t))
                        return util_1.option(t, '', t);
                })
            ]),
            editable('', (value, el) => {
                if (selectedType) {
                    submit(selectedType)(value);
                    el.value = '';
                }
            })
        ]);
    }
    return snabbdom_1.h('table.study__tags.slist', snabbdom_1.h('tbody', rows.map(function (r) {
        return snabbdom_1.h('tr', {
            key: '' + r[0]
        }, [
            snabbdom_1.h('th', [r[0]]),
            snabbdom_1.h('td', [r[1]])
        ]);
    })));
}
function ctrl(root, getChapter, types) {
    const submit = throttle_1.default(500, function (name, value) {
        root.study.makeChange('setTag', {
            chapterId: getChapter().id,
            name,
            value: value.substr(0, 140)
        });
    });
    return {
        submit(name) {
            return value => submit(name, value);
        },
        getChapter,
        types
    };
}
exports.ctrl = ctrl;
function doRender(root) {
    return snabbdom_1.h('div', renderPgnTags(root.tags.getChapter(), root.vm.mode.write && root.tags.submit, root.tags.types, root.trans));
}
function view(root) {
    const chapter = root.tags.getChapter(), tagKey = chapter.tags.map(t => t[1]).join(','), key = chapter.id + root.data.name + chapter.name + root.data.likes + tagKey + root.vm.mode.write;
    return snabbdom_1.thunk('div.' + chapter.id, doRender, [root, key]);
}
exports.view = view;

},{"../util":110,"common/throttle":137,"snabbdom":35}],103:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function study(ctrl) {
    window.lichess.loadScript('javascripts/study/tour.js').then(() => {
        window.lichess['studyTour']({
            userId: ctrl.opts.userId,
            isContrib: ctrl.study.members.canContribute(),
            isOwner: ctrl.study.members.isOwner(),
            setTab: (tab) => {
                ctrl.study.vm.tab(tab);
                ctrl.redraw();
            }
        });
    });
}
exports.study = study;
function chapter(setTab) {
    window.lichess.loadScript('javascripts/study/tour-chapter.js').then(() => {
        window.lichess['studyTourChapter']({
            setTab
        });
    });
}
exports.chapter = chapter;

},{}],104:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("../util");
const studyMembers_1 = require("./studyMembers");
const studyChapters_1 = require("./studyChapters");
const chapterNewForm_1 = require("./chapterNewForm");
const chapterEditForm_1 = require("./chapterEditForm");
const commentForm = require("./commentForm");
const glyphForm = require("./studyGlyph");
const inviteForm_1 = require("./inviteForm");
const studyForm_1 = require("./studyForm");
const studyShare_1 = require("./studyShare");
const multiBoard_1 = require("./multiBoard");
const notif_1 = require("./notif");
const studyTags_1 = require("./studyTags");
const serverEval_1 = require("./serverEval");
const practiceView = require("./practice/studyPracticeView");
const gamebookButtons_1 = require("./gamebook/gamebookButtons");
const description_1 = require("./description");
function toolButton(opts) {
    return snabbdom_1.h('span.' + opts.tab, {
        attrs: { title: opts.hint },
        class: { active: opts.tab === opts.ctrl.vm.toolTab() },
        hook: util_1.bind('mousedown', () => {
            if (opts.onClick)
                opts.onClick();
            opts.ctrl.vm.toolTab(opts.tab);
        }, opts.ctrl.redraw)
    }, [
        opts.count ? snabbdom_1.h('count.data-count', { attrs: { 'data-count': opts.count } }) : null,
        opts.icon
    ]);
}
function buttons(root) {
    const ctrl = root.study, canContribute = ctrl.members.canContribute(), showSticky = ctrl.data.features.sticky && (canContribute || (ctrl.vm.behind && ctrl.isUpdatedRecently())), noarg = root.trans.noarg;
    return snabbdom_1.h('div.study__buttons', [
        snabbdom_1.h('div.left-buttons.tabs-horiz', [
            // distinct classes (sync, write) allow snabbdom to differentiate buttons
            showSticky ? snabbdom_1.h('a.mode.sync', {
                attrs: { title: noarg('allSyncMembersRemainOnTheSamePosition') },
                class: { on: ctrl.vm.mode.sticky },
                hook: util_1.bind('click', ctrl.toggleSticky)
            }, [
                ctrl.vm.behind ? snabbdom_1.h('span.behind', '' + ctrl.vm.behind) : snabbdom_1.h('i.is'),
                'SYNC'
            ]) : null,
            ctrl.members.canContribute() ? snabbdom_1.h('a.mode.write', {
                attrs: { title: noarg('shareChanges') },
                class: { on: ctrl.vm.mode.write },
                hook: util_1.bind('click', ctrl.toggleWrite)
            }, [snabbdom_1.h('i.is'), 'REC']) : null,
            toolButton({
                ctrl,
                tab: 'tags',
                hint: noarg('pgnTags'),
                icon: util_1.iconTag('o'),
            }),
            toolButton({
                ctrl,
                tab: 'comments',
                hint: noarg('commentThisPosition'),
                icon: util_1.iconTag('c'),
                onClick() {
                    ctrl.commentForm.start(ctrl.vm.chapterId, root.path, root.node);
                },
                count: (root.node.comments || []).length
            }),
            canContribute ? toolButton({
                ctrl,
                tab: 'glyphs',
                hint: noarg('annotateWithGlyphs'),
                icon: snabbdom_1.h('i.glyph-icon'),
                count: (root.node.glyphs || []).length
            }) : null,
            toolButton({
                ctrl,
                tab: 'serverEval',
                hint: noarg('computerAnalysis'),
                icon: util_1.iconTag(''),
                count: root.data.analysis && ''
            }),
            toolButton({
                ctrl,
                tab: 'multiBoard',
                hint: 'Multiboard',
                icon: util_1.iconTag('')
            }),
            toolButton({
                ctrl,
                tab: 'share',
                hint: noarg('shareAndExport'),
                icon: util_1.iconTag('$')
            }),
            snabbdom_1.h('span.help', {
                attrs: { title: 'Need help? Get the tour!', 'data-icon': '' },
                hook: util_1.bind('click', ctrl.startTour)
            })
        ]),
        snabbdom_1.h('div.right', [
            gamebookButtons_1.overrideButton(ctrl)
        ])
    ]);
}
function metadata(ctrl) {
    const d = ctrl.data, credit = ctrl.relay && ctrl.relay.data.credit;
    return snabbdom_1.h('div.study__metadata', [
        snabbdom_1.h('h2', [
            snabbdom_1.h('span.name', [
                d.name,
                ': ' + ctrl.currentChapter().name,
                credit ? snabbdom_1.h('span.credit', { hook: util_1.richHTML(credit, false) }) : undefined
            ]),
            snabbdom_1.h('span.liking.text', {
                class: { liked: d.liked },
                attrs: {
                    'data-icon': d.liked ? '' : '',
                    title: ctrl.trans.noarg('like')
                },
                hook: util_1.bind('click', ctrl.toggleLike)
            }, '' + d.likes)
        ]),
        studyTags_1.view(ctrl)
    ]);
}
function side(ctrl) {
    const activeTab = ctrl.vm.tab(), intro = ctrl.relay && ctrl.relay.intro;
    const makeTab = function (key, name) {
        return snabbdom_1.h('span.' + key, {
            class: { active: (!intro || !intro.active) && activeTab === key },
            hook: util_1.bind('mousedown', () => {
                if (intro)
                    intro.disable();
                ctrl.vm.tab(key);
            }, ctrl.redraw)
        }, name);
    };
    const introTab = intro && intro.exists ? snabbdom_1.h('span.intro', {
        class: { active: intro.active },
        hook: util_1.bind('mousedown', () => { intro.active = true; }, ctrl.redraw)
    }, [util_1.iconTag('')]) : null;
    const tabs = snabbdom_1.h('div.tabs-horiz', [
        introTab,
        makeTab('chapters', ctrl.trans.plural(ctrl.relay ? 'nbGames' : 'nbChapters', ctrl.chapters.size())),
        makeTab('members', ctrl.trans.plural('nbMembers', ctrl.members.size())),
        ctrl.members.isOwner() ? snabbdom_1.h('span.more', {
            hook: util_1.bind('click', () => ctrl.form.open(!ctrl.form.open()), ctrl.redraw)
        }, [util_1.iconTag('[')]) : null
    ]);
    return snabbdom_1.h('div.study__side', [
        tabs,
        (activeTab === 'members' ? studyMembers_1.view : studyChapters_1.view)(ctrl)
    ]);
}
exports.side = side;
function contextMenu(ctrl, path, node) {
    return ctrl.vm.mode.write ? [
        snabbdom_1.h('a', {
            attrs: util_1.dataIcon('c'),
            hook: util_1.bind('click', () => {
                ctrl.vm.toolTab('comments');
                ctrl.commentForm.start(ctrl.currentChapter().id, path, node);
            })
        }, ctrl.trans.noarg('commentThisMove')),
        snabbdom_1.h('a.glyph-icon', {
            hook: util_1.bind('click', () => {
                ctrl.vm.toolTab('glyphs');
                ctrl.userJump(path);
            })
        }, ctrl.trans.noarg('annotateWithGlyphs'))
    ] : [];
}
exports.contextMenu = contextMenu;
function overboard(ctrl) {
    if (ctrl.chapters.newForm.vm.open)
        return chapterNewForm_1.view(ctrl.chapters.newForm);
    if (ctrl.chapters.editForm.current())
        return chapterEditForm_1.view(ctrl.chapters.editForm);
    if (ctrl.members.inviteForm.open())
        return inviteForm_1.view(ctrl.members.inviteForm);
    if (ctrl.form.open())
        return studyForm_1.view(ctrl.form);
}
exports.overboard = overboard;
function underboard(ctrl) {
    if (ctrl.embed)
        return [];
    if (ctrl.studyPractice)
        return practiceView.underboard(ctrl.study);
    const study = ctrl.study, toolTab = study.vm.toolTab();
    if (study.gamebookPlay())
        return [
            gamebookButtons_1.playButtons(ctrl),
            description_1.view(study, true),
            description_1.view(study, false),
            metadata(study)
        ];
    let panel;
    switch (toolTab) {
        case 'tags':
            panel = metadata(study);
            break;
        case 'comments':
            panel = study.vm.mode.write ?
                commentForm.view(ctrl) : (commentForm.viewDisabled(ctrl, study.members.canContribute() ?
                'Press REC to comment moves' :
                'Only the study members can comment on moves'));
            break;
        case 'glyphs':
            panel = ctrl.path ? (study.vm.mode.write ?
                glyphForm.view(study.glyphForm) :
                glyphForm.viewDisabled('Press REC to annotate moves')) : glyphForm.viewDisabled('Select a move to annotate');
            break;
        case 'serverEval':
            panel = serverEval_1.view(study.serverEval);
            break;
        case 'share':
            panel = studyShare_1.view(study.share);
            break;
        case 'multiBoard':
            panel = multiBoard_1.view(study.multiBoard, study);
            break;
    }
    return [
        notif_1.view(study.notif),
        description_1.view(study, true),
        description_1.view(study, false),
        buttons(ctrl),
        panel
    ];
}
exports.underboard = underboard;

},{"../util":110,"./chapterEditForm":75,"./chapterNewForm":76,"./commentForm":77,"./description":78,"./gamebook/gamebookButtons":79,"./inviteForm":83,"./multiBoard":84,"./notif":85,"./practice/studyPracticeView":90,"./serverEval":94,"./studyChapters":95,"./studyForm":98,"./studyGlyph":99,"./studyMembers":100,"./studyShare":101,"./studyTags":102,"snabbdom":35}],105:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const headers = {
    'Accept': 'application/vnd.lichess.v3+json'
};
function reload(baseUrl, id, chapterId) {
    let url = '/' + baseUrl + '/' + id;
    if (chapterId)
        url += '/' + chapterId;
    return $.ajax({
        url,
        headers
    });
}
exports.reload = reload;
function variants() {
    return $.ajax({
        url: '/variant',
        headers,
        cache: true
    });
}
exports.variants = variants;
function glyphs() {
    return $.ajax({
        url: window.lichess.assetUrl('glyphs.json', { noVersion: true }),
        headers,
        cache: true
    });
}
exports.glyphs = glyphs;
function chapterConfig(studyId, chapterId) {
    return $.ajax({
        url: `/study/${studyId}/${chapterId}/meta`,
        headers
    });
}
exports.chapterConfig = chapterConfig;
function practiceComplete(chapterId, nbMoves) {
    return $.ajax({
        method: 'POST',
        url: `/practice/complete/${chapterId}/${nbMoves}`,
        headers
    });
}
exports.practiceComplete = practiceComplete;
function importPgn(studyId, data) {
    return $.ajax({
        method: 'POST',
        url: `/study/${studyId}/import-pgn?sri=${window.lichess.sri}`,
        data: data,
        headers
    });
}
exports.importPgn = importPgn;
function multiBoard(studyId, page, playing) {
    return $.ajax({
        url: `/study/${studyId}/multi-board?page=${page}&playing=${playing}`,
        headers
    });
}
exports.multiBoard = multiBoard;

},{}],106:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const common_1 = require("common");
const chess_1 = require("chess");
const tree_1 = require("tree");
const moveView = require("../moveView");
const studyComments_1 = require("../study/studyComments");
const treeView_1 = require("./treeView");
const util_1 = require("../util");
function emptyMove(conceal) {
    const c = {};
    if (conceal)
        c[conceal] = true;
    return snabbdom_1.h('move.empty', {
        class: c
    }, '...');
}
function renderChildrenOf(ctx, node, opts) {
    const cs = node.children, main = cs[0];
    if (!main)
        return;
    const conceal = opts.noConceal ? null : (opts.conceal || ctx.concealOf(true)(opts.parentPath + main.id, main));
    if (conceal === 'hide')
        return;
    if (opts.isMainline) {
        const isWhite = main.ply % 2 === 1, commentTags = renderMainlineCommentsOf(ctx, main, conceal, true).filter(treeView_1.nonEmpty);
        if (!cs[1] && common_1.empty(commentTags) && !main.forceVariation)
            return (isWhite ? [moveView.renderIndex(main.ply, false)] : []).concat(renderMoveAndChildrenOf(ctx, main, {
                parentPath: opts.parentPath,
                isMainline: true,
                conceal
            }) || []);
        const mainChildren = main.forceVariation ? undefined : renderChildrenOf(ctx, main, {
            parentPath: opts.parentPath + main.id,
            isMainline: true,
            conceal
        });
        const passOpts = {
            parentPath: opts.parentPath,
            isMainline: !main.forceVariation,
            conceal
        };
        return (isWhite ? [moveView.renderIndex(main.ply, false)] : []).concat(main.forceVariation ? [] : [
            renderMoveOf(ctx, main, passOpts),
            isWhite ? emptyMove(passOpts.conceal) : null
        ]).concat([
            snabbdom_1.h('interrupt', commentTags.concat(renderLines(ctx, main.forceVariation ? cs : cs.slice(1), {
                parentPath: opts.parentPath,
                isMainline: passOpts.isMainline,
                conceal,
                noConceal: !conceal
            })))
        ]).concat(isWhite && mainChildren ? [
            moveView.renderIndex(main.ply, false),
            emptyMove(passOpts.conceal)
        ] : []).concat(mainChildren || []);
    }
    if (!cs[1])
        return renderMoveAndChildrenOf(ctx, main, opts);
    return renderInlined(ctx, cs, opts) || [renderLines(ctx, cs, opts)];
}
function renderInlined(ctx, nodes, opts) {
    // only 2 branches
    if (!nodes[1] || nodes[2])
        return;
    // only if second branch has no sub-branches
    if (tree_1.ops.hasBranching(nodes[1], 6))
        return;
    return renderMoveAndChildrenOf(ctx, nodes[0], {
        parentPath: opts.parentPath,
        isMainline: false,
        noConceal: opts.noConceal,
        inline: nodes[1]
    });
}
function renderLines(ctx, nodes, opts) {
    return snabbdom_1.h('lines', {
        class: { single: !nodes[1] }
    }, nodes.map(n => {
        return treeView_1.retroLine(ctx, n, opts) || snabbdom_1.h('line', renderMoveAndChildrenOf(ctx, n, {
            parentPath: opts.parentPath,
            isMainline: false,
            withIndex: true,
            noConceal: opts.noConceal,
            truncate: n.comp && !tree_1.path.contains(ctx.ctrl.path, opts.parentPath + n.id) ? 3 : undefined
        }));
    }));
}
function renderMoveOf(ctx, node, opts) {
    return opts.isMainline ? renderMainlineMoveOf(ctx, node, opts) : renderVariationMoveOf(ctx, node, opts);
}
function renderMainlineMoveOf(ctx, node, opts) {
    const path = opts.parentPath + node.id, classes = treeView_1.nodeClasses(ctx, path);
    if (opts.conceal)
        classes[opts.conceal] = true;
    return snabbdom_1.h('move', {
        attrs: { p: path },
        class: classes
    }, moveView.renderMove(ctx, node));
}
function renderVariationMoveOf(ctx, node, opts) {
    const withIndex = opts.withIndex || node.ply % 2 === 1, path = opts.parentPath + node.id, content = [
        withIndex ? moveView.renderIndex(node.ply, true) : null,
        chess_1.fixCrazySan(node.san)
    ], classes = treeView_1.nodeClasses(ctx, path);
    if (opts.conceal)
        classes[opts.conceal] = true;
    if (node.glyphs)
        moveView.renderGlyphs(node.glyphs).forEach(g => content.push(g));
    return snabbdom_1.h('move', {
        attrs: { p: path },
        class: classes
    }, content);
}
function renderMoveAndChildrenOf(ctx, node, opts) {
    const path = opts.parentPath + node.id;
    if (opts.truncate === 0)
        return [
            snabbdom_1.h('move', {
                attrs: { p: path }
            }, [snabbdom_1.h('index', '[...]')])
        ];
    return [renderMoveOf(ctx, node, opts)]
        .concat(treeView_1.renderInlineCommentsOf(ctx, node))
        .concat(opts.inline ? renderInline(ctx, opts.inline, opts) : null)
        .concat(renderChildrenOf(ctx, node, {
        parentPath: path,
        isMainline: opts.isMainline,
        noConceal: opts.noConceal,
        truncate: opts.truncate ? opts.truncate - 1 : undefined
    }) || []);
}
function renderInline(ctx, node, opts) {
    return snabbdom_1.h('inline', renderMoveAndChildrenOf(ctx, node, {
        withIndex: true,
        parentPath: opts.parentPath,
        isMainline: false,
        noConceal: opts.noConceal,
        truncate: opts.truncate
    }));
}
function renderMainlineCommentsOf(ctx, node, conceal, withColor) {
    if (!ctx.ctrl.showComments || common_1.empty(node.comments))
        return [];
    const colorClass = withColor ? (node.ply % 2 === 0 ? '.black ' : '.white ') : '';
    return node.comments.map(comment => {
        if (comment.by === 'lichess' && !ctx.showComputer)
            return;
        let sel = 'comment' + colorClass;
        if (comment.text.startsWith('Inaccuracy.'))
            sel += '.inaccuracy';
        else if (comment.text.startsWith('Mistake.'))
            sel += '.mistake';
        else if (comment.text.startsWith('Blunder.'))
            sel += '.blunder';
        if (conceal)
            sel += '.' + conceal;
        const by = node.comments[1] ? `<span class="by">${studyComments_1.authorText(comment.by)}</span>` : '', truncated = treeView_1.truncateComment(comment.text, 400, ctx);
        return snabbdom_1.h(sel, {
            hook: util_1.innerHTML(truncated, text => by + util_1.enrichText(text))
        });
    });
}
const emptyConcealOf = function () {
    return function () { return null; };
};
function default_1(ctrl, concealOf) {
    const root = ctrl.tree.root;
    const ctx = {
        ctrl,
        truncateComments: !ctrl.embed,
        concealOf: concealOf || emptyConcealOf,
        showComputer: ctrl.showComputer() && !ctrl.retro,
        showGlyphs: !!ctrl.study || ctrl.showComputer(),
        showEval: ctrl.showComputer(),
        currentPath: treeView_1.findCurrentPath(ctrl)
    };
    const commentTags = renderMainlineCommentsOf(ctx, root, false, false);
    return snabbdom_1.h('div.tview2.tview2-column', {
        hook: treeView_1.mainHook(ctrl)
    }, [
        common_1.empty(commentTags) ? null : snabbdom_1.h('interrupt', commentTags),
        root.ply & 1 ? moveView.renderIndex(root.ply, false) : null,
        root.ply & 1 ? emptyMove() : null
    ].concat(renderChildrenOf(ctx, root, {
        parentPath: '',
        isMainline: true
    }) || []));
}
exports.default = default_1;

},{"../moveView":64,"../study/studyComments":96,"../util":110,"./treeView":109,"chess":129,"common":131,"snabbdom":35,"tree":142}],107:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const studyView = require("../study/studyView");
const util_1 = require("../util");
const main_1 = require("../main");
const elementId = 'analyse-cm';
function getPosition(e) {
    let posx = 0, posy = 0;
    if (e.pageX || e.pageY) {
        posx = e.pageX;
        posy = e.pageY;
    }
    else if (e.clientX || e.clientY) {
        posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
    }
    return {
        x: posx,
        y: posy
    };
}
function positionMenu(menu, coords) {
    const menuWidth = menu.offsetWidth + 4, menuHeight = menu.offsetHeight + 4, windowWidth = window.innerWidth, windowHeight = window.innerHeight;
    menu.style.left = (windowWidth - coords.x) < menuWidth ?
        windowWidth - menuWidth + "px" :
        menu.style.left = coords.x + "px";
    menu.style.top = (windowHeight - coords.y) < menuHeight ?
        windowHeight - menuHeight + "px" :
        menu.style.top = coords.y + "px";
}
function action(icon, text, handler) {
    return snabbdom_1.h('a', {
        attrs: { 'data-icon': icon },
        hook: util_1.bind('click', handler)
    }, text);
}
function view(opts, coords) {
    const ctrl = opts.root, node = ctrl.tree.nodeAtPath(opts.path), onMainline = ctrl.tree.pathIsMainline(opts.path) && !ctrl.tree.pathIsForcedVariation(opts.path), trans = ctrl.trans.noarg;
    return snabbdom_1.h('div#' + elementId + '.visible', {
        hook: {
            insert: vnode => positionMenu(vnode.elm, coords),
            postpatch: (_, vnode) => positionMenu(vnode.elm, coords)
        }
    }, [
        snabbdom_1.h('p.title', util_1.nodeFullName(node)),
        onMainline ? null : action('S', trans('promoteVariation'), () => ctrl.promote(opts.path, false)),
        onMainline ? null : action('E', trans('makeMainLine'), () => ctrl.promote(opts.path, true)),
        action('q', trans('deleteFromHere'), () => ctrl.deleteNode(opts.path))
    ].concat(ctrl.study ? studyView.contextMenu(ctrl.study, opts.path, node) : []).concat([
        onMainline ?
            action('F', trans('forceVariation'), () => ctrl.forceVariation(opts.path, true)) :
            null
    ]));
}
function default_1(e, opts) {
    const el = $('#' + elementId)[0] || $('<div id="' + elementId + '">').appendTo($('body'))[0];
    opts.root.contextMenuPath = opts.path;
    function close(e) {
        if (e.button === 2)
            return; // right click
        opts.root.contextMenuPath = undefined;
        document.removeEventListener('click', close, false);
        $('#' + elementId).removeClass('visible');
        opts.root.redraw();
    }
    ;
    document.addEventListener('click', close, false);
    el.innerHTML = '';
    main_1.patch(el, view(opts, getPosition(e)));
}
exports.default = default_1;

},{"../main":62,"../study/studyView":104,"../util":110,"snabbdom":35}],108:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chess_1 = require("chess");
const tree_1 = require("tree");
const moveView = require("../moveView");
const treeView_1 = require("./treeView");
function renderChildrenOf(ctx, node, opts) {
    const cs = node.children, main = cs[0];
    if (!main)
        return;
    if (opts.isMainline) {
        if (!cs[1] && !main.forceVariation)
            return renderMoveAndChildrenOf(ctx, main, {
                parentPath: opts.parentPath,
                isMainline: true,
                withIndex: opts.withIndex
            });
        return renderInlined(ctx, cs, opts) || [
            ...(main.forceVariation ? [] : [
                renderMoveOf(ctx, main, {
                    parentPath: opts.parentPath,
                    isMainline: true,
                    withIndex: opts.withIndex
                }),
                ...treeView_1.renderInlineCommentsOf(ctx, main)
            ]),
            snabbdom_1.h('interrupt', renderLines(ctx, main.forceVariation ? cs : cs.slice(1), {
                parentPath: opts.parentPath,
                isMainline: true
            })),
            ...(main.forceVariation ? [] : (renderChildrenOf(ctx, main, {
                parentPath: opts.parentPath + main.id,
                isMainline: true,
                withIndex: true
            }) || []))
        ];
    }
    if (!cs[1])
        return renderMoveAndChildrenOf(ctx, main, opts);
    return renderInlined(ctx, cs, opts) || [renderLines(ctx, cs, opts)];
}
function renderInlined(ctx, nodes, opts) {
    // only 2 branches
    if (!nodes[1] || nodes[2] || nodes[0].forceVariation)
        return;
    // only if second branch has no sub-branches
    if (tree_1.ops.hasBranching(nodes[1], 6))
        return;
    return renderMoveAndChildrenOf(ctx, nodes[0], {
        parentPath: opts.parentPath,
        isMainline: opts.isMainline,
        inline: nodes[1]
    });
}
function renderLines(ctx, nodes, opts) {
    return snabbdom_1.h('lines', nodes.map(n => {
        return treeView_1.retroLine(ctx, n, opts) || snabbdom_1.h('line', renderMoveAndChildrenOf(ctx, n, {
            parentPath: opts.parentPath,
            isMainline: false,
            withIndex: true,
            truncate: n.comp && !tree_1.path.contains(ctx.ctrl.path, opts.parentPath + n.id) ? 3 : undefined
        }));
    }));
}
function renderMoveAndChildrenOf(ctx, node, opts) {
    const path = opts.parentPath + node.id, comments = treeView_1.renderInlineCommentsOf(ctx, node);
    if (opts.truncate === 0)
        return [
            snabbdom_1.h('move', { attrs: { p: path } }, '[...]')
        ];
    return [renderMoveOf(ctx, node, opts)]
        .concat(comments)
        .concat(opts.inline ? renderInline(ctx, opts.inline, opts) : null)
        .concat(renderChildrenOf(ctx, node, {
        parentPath: path,
        isMainline: opts.isMainline,
        truncate: opts.truncate ? opts.truncate - 1 : undefined,
        withIndex: !!comments[0]
    }) || []);
}
function renderInline(ctx, node, opts) {
    return snabbdom_1.h('inline', renderMoveAndChildrenOf(ctx, node, {
        withIndex: true,
        parentPath: opts.parentPath,
        isMainline: false
    }));
}
function renderMoveOf(ctx, node, opts) {
    const path = opts.parentPath + node.id, content = [
        opts.withIndex || node.ply & 1 ? moveView.renderIndex(node.ply, true) : null,
        chess_1.fixCrazySan(node.san)
    ];
    if (node.glyphs)
        moveView.renderGlyphs(node.glyphs).forEach(g => content.push(g));
    return snabbdom_1.h('move', {
        attrs: { p: path },
        class: treeView_1.nodeClasses(ctx, path)
    }, content);
}
function default_1(ctrl) {
    const ctx = {
        ctrl,
        truncateComments: false,
        showComputer: ctrl.showComputer() && !ctrl.retro,
        showGlyphs: !!ctrl.study || ctrl.showComputer(),
        showEval: !!ctrl.study || ctrl.showComputer(),
        currentPath: treeView_1.findCurrentPath(ctrl)
    };
    return snabbdom_1.h('div.tview2.tview2-inline', {
        hook: treeView_1.mainHook(ctrl)
    }, [
        ...treeView_1.renderInlineCommentsOf(ctx, ctrl.tree.root),
        ...(renderChildrenOf(ctx, ctrl.tree.root, {
            parentPath: '',
            isMainline: true
        }) || [])
    ]);
}
exports.default = default_1;

},{"../moveView":64,"./treeView":109,"chess":129,"snabbdom":35,"tree":142}],109:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const game_1 = require("game");
const contextMenu_1 = require("./contextMenu");
const studyComments_1 = require("../study/studyComments");
const util_1 = require("../util");
const tree_1 = require("tree");
const columnView_1 = require("./columnView");
const inlineView_1 = require("./inlineView");
const common_1 = require("common");
const throttle_1 = require("common/throttle");
const storage_1 = require("common/storage");
function ctrl(initialValue = 'column') {
    const value = storage_1.storedProp('treeView', initialValue);
    function inline() {
        return value() === 'inline';
    }
    function set(i) {
        value(i ? 'inline' : 'column');
    }
    return {
        get: value,
        set,
        toggle() {
            set(!inline());
        },
        inline
    };
}
exports.ctrl = ctrl;
// entry point, dispatching to selected view
function render(ctrl, concealOf) {
    return (ctrl.treeView.inline() || window.lichess.isCol1()) ? inlineView_1.default(ctrl) : columnView_1.default(ctrl, concealOf);
}
exports.render = render;
function nodeClasses(ctx, path) {
    return {
        active: path === ctx.ctrl.path,
        'context-menu': path === ctx.ctrl.contextMenuPath,
        current: path === ctx.currentPath,
        nongame: !ctx.currentPath && !!ctx.ctrl.gamePath && tree_1.path.contains(path, ctx.ctrl.gamePath) && path !== ctx.ctrl.gamePath
    };
}
exports.nodeClasses = nodeClasses;
function findCurrentPath(c) {
    return (!c.synthetic && game_1.playable(c.data) && c.initialPath) || (c.retro && c.retro.current() && c.retro.current().prev.path) || (c.study && c.study.data.chapter.relay && c.study.data.chapter.relay.path);
}
exports.findCurrentPath = findCurrentPath;
function renderInlineCommentsOf(ctx, node) {
    if (!ctx.ctrl.showComments || common_1.empty(node.comments))
        return [];
    return node.comments.map(comment => {
        if (comment.by === 'lichess' && !ctx.showComputer)
            return;
        const by = node.comments[1] ? `<span class="by">${studyComments_1.authorText(comment.by)}</span>` : '', truncated = truncateComment(comment.text, 300, ctx);
        return snabbdom_1.h('comment', {
            hook: util_1.innerHTML(truncated, text => by + util_1.enrichText(text))
        });
    }).filter(nonEmpty);
}
exports.renderInlineCommentsOf = renderInlineCommentsOf;
function truncateComment(text, len, ctx) {
    return ctx.truncateComments && text.length > len ? text.slice(0, len - 10) + ' [...]' : text;
}
exports.truncateComment = truncateComment;
function mainHook(ctrl) {
    return {
        insert: vnode => {
            const el = vnode.elm;
            if (ctrl.path !== '')
                exports.autoScroll(ctrl, el);
            el.oncontextmenu = (e) => {
                const path = eventPath(e);
                if (path !== null)
                    contextMenu_1.default(e, {
                        path,
                        root: ctrl
                    });
                ctrl.redraw();
                return false;
            };
            el.addEventListener('mousedown', (e) => {
                if (common_1.defined(e.button) && e.button !== 0)
                    return; // only touch or left click
                const path = eventPath(e);
                if (path)
                    ctrl.userJump(path);
                ctrl.redraw();
            });
        },
        postpatch: (_, vnode) => {
            if (ctrl.autoScrollRequested) {
                exports.autoScroll(ctrl, vnode.elm);
                ctrl.autoScrollRequested = false;
            }
        }
    };
}
exports.mainHook = mainHook;
function retroLine(ctx, node, opts) {
    return node.comp && ctx.ctrl.retro && ctx.ctrl.retro.hideComputerLine(node, opts.parentPath) ?
        snabbdom_1.h('line', ctx.ctrl.trans.noarg('learnFromThisMistake')) : undefined;
}
exports.retroLine = retroLine;
function eventPath(e) {
    return e.target.getAttribute('p') ||
        e.target.parentNode.getAttribute('p');
}
exports.autoScroll = throttle_1.default(200, (ctrl, el) => {
    const cont = el.parentNode;
    if (!cont)
        return;
    const target = el.querySelector('.active');
    if (!target) {
        cont.scrollTop = ctrl.path ? 99999 : 0;
        return;
    }
    cont.scrollTop = target.offsetTop - cont.offsetHeight / 2 + target.offsetHeight;
});
function nonEmpty(x) {
    return !!x;
}
exports.nonEmpty = nonEmpty;

},{"../study/studyComments":96,"../util":110,"./columnView":106,"./contextMenu":107,"./inlineView":108,"common":131,"common/storage":135,"common/throttle":137,"game":138,"snabbdom":35,"tree":142}],110:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chess_1 = require("chess");
exports.emptyRedButton = 'button.button.button-red.button-empty';
function plyColor(ply) {
    return (ply % 2 === 0) ? 'white' : 'black';
}
exports.plyColor = plyColor;
function bindMobileMousedown(el, f, redraw) {
    for (const mousedownEvent of ['touchstart', 'mousedown']) {
        el.addEventListener(mousedownEvent, e => {
            f(e);
            e.preventDefault();
            if (redraw)
                redraw();
        });
    }
}
exports.bindMobileMousedown = bindMobileMousedown;
function listenTo(el, eventName, f, redraw) {
    el.addEventListener(eventName, e => {
        const res = f(e);
        if (res === false)
            e.preventDefault();
        if (redraw)
            redraw();
        return res;
    });
}
function bind(eventName, f, redraw) {
    return onInsert(el => listenTo(el, eventName, f, redraw));
}
exports.bind = bind;
function bindSubmit(f, redraw) {
    return bind('submit', e => {
        e.preventDefault();
        return f(e);
    }, redraw);
}
exports.bindSubmit = bindSubmit;
function onInsert(f) {
    return {
        insert: vnode => f(vnode.elm)
    };
}
exports.onInsert = onInsert;
function readOnlyProp(value) {
    return function () {
        return value;
    };
}
exports.readOnlyProp = readOnlyProp;
function dataIcon(icon) {
    return {
        'data-icon': icon
    };
}
exports.dataIcon = dataIcon;
function iconTag(icon) {
    return snabbdom_1.h('i', { attrs: dataIcon(icon) });
}
exports.iconTag = iconTag;
function plyToTurn(ply) {
    return Math.floor((ply - 1) / 2) + 1;
}
exports.plyToTurn = plyToTurn;
function nodeFullName(node) {
    if (node.san)
        return plyToTurn(node.ply) + (node.ply % 2 === 1 ? '.' : '...') + ' ' + chess_1.fixCrazySan(node.san);
    return 'Initial position';
}
exports.nodeFullName = nodeFullName;
function plural(noun, nb) {
    return nb + ' ' + (nb === 1 ? noun : noun + 's');
}
exports.plural = plural;
function titleNameToId(titleName) {
    const split = titleName.split(' ');
    return (split.length === 1 ? split[0] : split[1]).toLowerCase();
}
exports.titleNameToId = titleNameToId;
function spinner() {
    return snabbdom_1.h('div.spinner', [
        snabbdom_1.h('svg', { attrs: { viewBox: '0 0 40 40' } }, [
            snabbdom_1.h('circle', {
                attrs: { cx: 20, cy: 20, r: 18, fill: 'none' }
            })
        ])
    ]);
}
exports.spinner = spinner;
function innerHTML(a, toHtml) {
    return {
        insert(vnode) {
            vnode.elm.innerHTML = toHtml(a);
            vnode.data.cachedA = a;
        },
        postpatch(old, vnode) {
            if (old.data.cachedA !== a) {
                vnode.elm.innerHTML = toHtml(a);
            }
            vnode.data.cachedA = a;
        }
    };
}
exports.innerHTML = innerHTML;
function richHTML(text, newLines = true) {
    return innerHTML(text, t => enrichText(t, newLines));
}
exports.richHTML = richHTML;
function baseUrl() {
    return `${window.location.protocol}//${window.location.host}`;
}
exports.baseUrl = baseUrl;
function toYouTubeEmbed(url) {
    const embedUrl = toYouTubeEmbedUrl(url);
    if (embedUrl)
        return `<div class="embed"><iframe width="100%" src="${embedUrl}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
}
exports.toYouTubeEmbed = toYouTubeEmbed;
function toYouTubeEmbedUrl(url) {
    if (!url)
        return;
    var m = url.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch)?(?:\?v=)?([^"&?\/ ]{11})(?:\?|&|)(\S*)/i);
    if (!m)
        return;
    var start = 0;
    m[2].split('&').forEach(function (p) {
        var s = p.split('=');
        if (s[0] === 't' || s[0] === 'start') {
            if (s[1].match(/^\d+$/))
                start = parseInt(s[1]);
            else {
                var n = s[1].match(/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?/);
                start = (parseInt(n[1]) || 0) * 3600 + (parseInt(n[2]) || 0) * 60 + (parseInt(n[3]) || 0);
            }
        }
    });
    var params = 'modestbranding=1&rel=0&controls=2&iv_load_policy=3' + (start ? '&start=' + start : '');
    return 'https://www.youtube.com/embed/' + m[1] + '?' + params;
}
function toTwitchEmbed(url) {
    const embedUrl = toTwitchEmbedUrl(url);
    if (embedUrl)
        return `<div class="embed"><iframe width="100%" src="${embedUrl}" frameborder=0 allowfullscreen></iframe></div>`;
}
exports.toTwitchEmbed = toTwitchEmbed;
function toTwitchEmbedUrl(url) {
    if (!url)
        return;
    var m = url.match(/(?:https?:\/\/)?(?:www\.)?(?:twitch.tv)\/([^"&?/ ]+)/i);
    if (m)
        return 'https://player.twitch.tv/?channel=' + m[1] + '&autoplay=false';
}
const commentYoutubeRegex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:.*?(?:[?&]v=)|v\/)|youtu\.be\/)(?:[^"&?\/ ]{11})\b/i;
const commentTwitchRegex = /(?:https?:\/\/)?(?:www\.)?(?:twitch.tv)\/([^"&?/ ]+)(?:\?|&|)(\S*)/i;
const imgUrlRegex = /\.(jpg|jpeg|png|gif)$/;
const newLineRegex = /\n/g;
function imageTag(url) {
    if (imgUrlRegex.test(url))
        return `<img src="${url}" class="embed"/>`;
}
function toLink(url) {
    if (commentYoutubeRegex.test(url))
        return toYouTubeEmbed(url) || url;
    if (commentTwitchRegex.test(url))
        return toTwitchEmbed(url) || url;
    const show = imageTag(url) || url.replace(/https?:\/\//, '');
    return '<a target="_blank" rel="nofollow" href="' + url + '">' + show + '</a>';
}
function enrichText(text, allowNewlines = true) {
    let html = autolink(window.lichess.escapeHtml(text), toLink);
    if (allowNewlines)
        html = html.replace(newLineRegex, '<br>');
    return html;
}
exports.enrichText = enrichText;
// from https://github.com/bryanwoods/autolink-js/blob/master/autolink.js
const linkRegex = /(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;
function autolink(str, callback) {
    return str.replace(linkRegex, (_, space, url) => space + callback(url));
}
exports.autolink = autolink;
function option(value, current, name) {
    return snabbdom_1.h('option', {
        attrs: {
            value: value,
            selected: value === current
        },
    }, name);
}
exports.option = option;
function scrollTo(el, target) {
    if (el && target)
        el.scrollTop = target.offsetTop - el.offsetHeight / 2 + target.offsetHeight / 2;
}
exports.scrollTo = scrollTo;

},{"chess":129,"snabbdom":35}],111:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const chessground = require("./ground");
const util_1 = require("./util");
const game_1 = require("game");
const router = require("game/router");
const status_1 = require("game/view/status");
const tree_1 = require("tree");
const treeView_1 = require("./treeView/treeView");
const control = require("./control");
const actionMenu_1 = require("./actionMenu");
const promotion_1 = require("./promotion");
const clocks_1 = require("./clocks");
const pgnExport = require("./pgnExport");
const forecastView_1 = require("./forecast/forecastView");
const ceval_1 = require("ceval");
const crazyView_1 = require("./crazy/crazyView");
const keyboard_1 = require("./keyboard");
const explorerView_1 = require("./explorer/explorerView");
const retroView_1 = require("./retrospect/retroView");
const practiceView_1 = require("./practice/practiceView");
const gbEdit = require("./study/gamebook/gamebookEdit");
const gbPlay = require("./study/gamebook/gamebookPlayView");
const studyView = require("./study/studyView");
const studyPracticeView = require("./study/practice/studyPracticeView");
const fork_1 = require("./fork");
const acpl_1 = require("./acpl");
const relayManagerView_1 = require("./study/relay/relayManagerView");
const relayIntroView_1 = require("./study/relay/relayIntroView");
const playerBars_1 = require("./study/playerBars");
const serverSideUnderboard_1 = require("./serverSideUnderboard");
const gridHacks = require("./gridHacks");
const li = window.lichess;
function renderResult(ctrl) {
    let result;
    if (ctrl.data.game.status.id >= 30)
        switch (ctrl.data.game.winner) {
            case 'white':
                result = '1-0';
                break;
            case 'black':
                result = '0-1';
                break;
            default:
                result = '-';
        }
    const tags = [];
    if (result) {
        tags.push(snabbdom_1.h('div.result', result));
        const winner = game_1.getPlayer(ctrl.data, ctrl.data.game.winner);
        tags.push(snabbdom_1.h('div.status', [
            status_1.default(ctrl),
            winner ? ', ' + ctrl.trans(winner.color == 'white' ? 'whiteIsVictorious' : 'blackIsVictorious') : null
        ]));
    }
    return tags;
}
function makeConcealOf(ctrl) {
    const conceal = (ctrl.study && ctrl.study.data.chapter.conceal !== undefined) ? {
        owner: ctrl.study.isChapterOwner(),
        ply: ctrl.study.data.chapter.conceal
    } : null;
    if (conceal)
        return function (isMainline) {
            return function (path, node) {
                if (!conceal || (isMainline && conceal.ply >= node.ply))
                    return null;
                if (tree_1.path.contains(ctrl.path, path))
                    return null;
                return conceal.owner ? 'conceal' : 'hide';
            };
        };
}
function renderAnalyse(ctrl, concealOf) {
    return snabbdom_1.h('div.analyse__moves.areplay', [
        (ctrl.embed && ctrl.study) ? snabbdom_1.h('div.chapter-name', ctrl.study.currentChapter().name) : null,
        renderOpeningBox(ctrl),
        treeView_1.render(ctrl, concealOf),
    ].concat(renderResult(ctrl)));
}
function wheel(ctrl, e) {
    const target = e.target;
    if (target.tagName !== 'PIECE' && target.tagName !== 'SQUARE' && target.tagName !== 'CG-BOARD')
        return;
    e.preventDefault();
    if (e.deltaY > 0)
        control.next(ctrl);
    else if (e.deltaY < 0)
        control.prev(ctrl);
    ctrl.redraw();
    return false;
}
function inputs(ctrl) {
    if (ctrl.ongoing || !ctrl.data.userAnalysis)
        return;
    if (ctrl.redirecting)
        return util_1.spinner();
    return snabbdom_1.h('div.copyables', [
        snabbdom_1.h('div.pair', [
            snabbdom_1.h('label.name', 'FEN'),
            snabbdom_1.h('input.copyable.autoselect.analyse__underboard__fen', {
                attrs: {
                    spellCheck: false,
                    value: ctrl.node.fen
                },
                hook: util_1.bind('change', e => {
                    const value = e.target.value;
                    if (value !== ctrl.node.fen)
                        ctrl.changeFen(value);
                })
            })
        ]),
        snabbdom_1.h('div.pgn', [
            snabbdom_1.h('div.pair', [
                snabbdom_1.h('label.name', 'PGN'),
                snabbdom_1.h('textarea.copyable.autoselect', {
                    attrs: { spellCheck: false },
                    hook: {
                        postpatch: (_, vnode) => {
                            vnode.elm.value = pgnExport.renderFullTxt(ctrl);
                        }
                    }
                }),
                snabbdom_1.h('button.button.button-thin.action.text', {
                    attrs: util_1.dataIcon('G'),
                    hook: util_1.bind('click', _ => {
                        const pgn = $('.copyables .pgn textarea').val();
                        if (pgn !== pgnExport.renderFullTxt(ctrl))
                            ctrl.changePgn(pgn);
                    }, ctrl.redraw)
                }, ctrl.trans.noarg('importPgn'))
            ])
        ])
    ]);
}
function jumpButton(icon, effect, enabled) {
    return snabbdom_1.h('button.fbt', {
        class: { disabled: !enabled },
        attrs: { 'data-act': effect, 'data-icon': icon }
    });
}
function dataAct(e) {
    const target = e.target;
    return target.getAttribute('data-act') ||
        target.parentNode.getAttribute('data-act');
}
function repeater(ctrl, action, e) {
    const repeat = function () {
        control[action](ctrl);
        ctrl.redraw();
        delay = Math.max(100, delay - delay / 15);
        timeout = setTimeout(repeat, delay);
    };
    let delay = 350;
    let timeout = setTimeout(repeat, 500);
    control[action](ctrl);
    const eventName = e.type == 'touchstart' ? 'touchend' : 'mouseup';
    document.addEventListener(eventName, () => clearTimeout(timeout), { once: true });
}
function controls(ctrl) {
    const canJumpPrev = ctrl.path !== '', canJumpNext = !!ctrl.node.children[0], menuIsOpen = ctrl.actionMenu.open, noarg = ctrl.trans.noarg;
    return snabbdom_1.h('div.analyse__controls.analyse-controls', {
        hook: util_1.onInsert(el => {
            util_1.bindMobileMousedown(el, e => {
                const action = dataAct(e);
                if (action === 'prev' || action === 'next')
                    repeater(ctrl, action, e);
                else if (action === 'first')
                    control.first(ctrl);
                else if (action === 'last')
                    control.last(ctrl);
                else if (action === 'explorer')
                    ctrl.toggleExplorer();
                else if (action === 'practice')
                    ctrl.togglePractice();
                else if (action === 'menu')
                    ctrl.actionMenu.toggle();
            }, ctrl.redraw);
        })
    }, [
        ctrl.embed ? null : snabbdom_1.h('div.features', ctrl.studyPractice ? [
            snabbdom_1.h('a.fbt', {
                attrs: {
                    title: noarg('analysis'),
                    target: '_blank',
                    href: ctrl.studyPractice.analysisUrl(),
                    'data-icon': 'A'
                }
            })
        ] : [
            snabbdom_1.h('button.fbt', {
                attrs: {
                    title: noarg('openingExplorerAndTablebase'),
                    'data-act': 'explorer',
                    'data-icon': ']'
                },
                class: {
                    hidden: menuIsOpen || !ctrl.explorer.allowed() || !!ctrl.retro,
                    active: ctrl.explorer.enabled()
                }
            }),
            ctrl.ceval.possible && ctrl.ceval.allowed() && !ctrl.isGamebook() ? snabbdom_1.h('button.fbt', {
                attrs: {
                    title: noarg('practiceWithComputer'),
                    'data-act': 'practice',
                    'data-icon': ''
                },
                class: {
                    hidden: menuIsOpen || !!ctrl.retro,
                    active: !!ctrl.practice
                }
            }) : null
        ]),
        snabbdom_1.h('div.jumps', [
            jumpButton('W', 'first', canJumpPrev),
            jumpButton('Y', 'prev', canJumpPrev),
            jumpButton('X', 'next', canJumpNext),
            jumpButton('V', 'last', canJumpNext)
        ]),
        ctrl.studyPractice ? snabbdom_1.h('div.noop') : snabbdom_1.h('button.fbt', {
            class: { active: menuIsOpen },
            attrs: {
                title: noarg('menu'),
                'data-act': 'menu',
                'data-icon': '['
            }
        })
    ]);
}
function renderOpeningBox(ctrl) {
    let opening = ctrl.tree.getOpening(ctrl.nodeList);
    if (!opening && !ctrl.path)
        opening = ctrl.data.game.opening;
    if (opening)
        return snabbdom_1.h('div.opening_box', {
            attrs: { title: opening.eco + ' ' + opening.name }
        }, [
            snabbdom_1.h('strong', opening.eco),
            ' ' + opening.name
        ]);
}
function forceInnerCoords(ctrl, v) {
    if (ctrl.data.pref.coords == 2)
        $('body').toggleClass('coords-in', v).toggleClass('coords-out', !v);
}
function addChapterId(study, cssClass) {
    return cssClass + (study && study.data.chapter ? '.' + study.data.chapter.id : '');
}
function default_1(ctrl) {
    if (ctrl.nvui)
        return ctrl.nvui.render(ctrl);
    const concealOf = makeConcealOf(ctrl), study = ctrl.study, showCevalPvs = !(ctrl.retro && ctrl.retro.isSolving()) && !ctrl.practice, menuIsOpen = ctrl.actionMenu.open, gamebookPlay = ctrl.gamebookPlay(), gamebookPlayView = gamebookPlay && gbPlay.render(gamebookPlay), gamebookEditView = gbEdit.running(ctrl) ? gbEdit.render(ctrl) : undefined, playerBars = playerBars_1.default(ctrl), clocks = !playerBars && clocks_1.default(ctrl), gaugeOn = ctrl.showEvalGauge(), needsInnerCoords = !!gaugeOn || !!playerBars, intro = relayIntroView_1.default(ctrl);
    return snabbdom_1.h('main.analyse.variant-' + ctrl.data.game.variant.key, {
        hook: {
            insert: vn => {
                forceInnerCoords(ctrl, needsInnerCoords);
                if (!!playerBars != $('body').hasClass('header-margin')) {
                    li.raf(() => {
                        $('body').toggleClass('header-margin', !!playerBars);
                        ctrl.redraw();
                    });
                }
                gridHacks.start(vn.elm);
            },
            update(_, _2) {
                forceInnerCoords(ctrl, needsInnerCoords);
            },
            postpatch(old, vnode) {
                if (old.data.gaugeOn !== gaugeOn)
                    li.dispatchEvent(document.body, 'chessground.resize');
                vnode.data.gaugeOn = gaugeOn;
            }
        },
        class: {
            'comp-off': !ctrl.showComputer(),
            'gauge-on': gaugeOn,
            'has-players': !!playerBars,
            'has-clocks': !!clocks,
            'has-intro': !!intro
        }
    }, [
        ctrl.keyboardHelp ? keyboard_1.view(ctrl) : null,
        study ? studyView.overboard(study) : null,
        intro || snabbdom_1.h(addChapterId(study, 'div.analyse__board.main-board'), {
            hook: (window.lichess.hasTouchEvents || ctrl.gamebookPlay()) ? undefined : util_1.bind('wheel', (e) => wheel(ctrl, e))
        }, [
            ...(clocks || []),
            playerBars ? playerBars[ctrl.bottomIsWhite() ? 1 : 0] : null,
            chessground.render(ctrl),
            playerBars ? playerBars[ctrl.bottomIsWhite() ? 0 : 1] : null,
            promotion_1.view(ctrl)
        ]),
        (gaugeOn && !intro) ? ceval_1.view.renderGauge(ctrl) : null,
        (menuIsOpen || intro) ? null : crazyView_1.default(ctrl, ctrl.topColor(), 'top'),
        gamebookPlayView || (intro ? null : snabbdom_1.h(addChapterId(study, 'div.analyse__tools'), [
            ...(menuIsOpen ? [actionMenu_1.view(ctrl)] : [
                ceval_1.view.renderCeval(ctrl),
                showCevalPvs ? ceval_1.view.renderPvs(ctrl) : null,
                renderAnalyse(ctrl, concealOf),
                gamebookEditView || fork_1.view(ctrl, concealOf),
                retroView_1.default(ctrl) || practiceView_1.default(ctrl) || explorerView_1.default(ctrl)
            ])
        ])),
        (menuIsOpen || intro) ? null : crazyView_1.default(ctrl, ctrl.bottomColor(), 'bottom'),
        (gamebookPlayView || intro) ? null : controls(ctrl),
        (ctrl.embed || intro) ? null : snabbdom_1.h('div.analyse__underboard', {
            hook: (ctrl.synthetic || game_1.playable(ctrl.data)) ? undefined : util_1.onInsert(elm => serverSideUnderboard_1.default(elm, ctrl))
        }, study ? studyView.underboard(ctrl) : [inputs(ctrl)]),
        intro ? null : acpl_1.render(ctrl),
        ctrl.embed ? null : (ctrl.studyPractice ? studyPracticeView.side(study) :
            snabbdom_1.h('aside.analyse__side', {
                hook: util_1.onInsert(elm => {
                    ctrl.opts.$side && ctrl.opts.$side.length && $(elm).replaceWith(ctrl.opts.$side);
                    $(elm).append($('.streamers').clone().removeClass('none'));
                })
            }, ctrl.studyPractice ? [studyPracticeView.side(study)] : (study ? [studyView.side(study)] : [
                ctrl.forecast ? forecastView_1.default(ctrl, ctrl.forecast) : null,
                (!ctrl.synthetic && game_1.playable(ctrl.data)) ? snabbdom_1.h('div.back-to-game', snabbdom_1.h('a.button.button-empty.text', {
                    attrs: {
                        href: router.game(ctrl.data, ctrl.data.player.color),
                        'data-icon': 'i'
                    }
                }, ctrl.trans.noarg('backToGame'))) : null
            ]))),
        study && study.relay && relayManagerView_1.default(study.relay),
        ctrl.opts.chat && snabbdom_1.h('section.mchat', {
            hook: util_1.onInsert(_ => {
                if (ctrl.opts.chat.instance)
                    ctrl.opts.chat.instance.destroy();
                ctrl.opts.chat.parseMoves = true;
                li.makeChat(ctrl.opts.chat, chat => {
                    ctrl.opts.chat.instance = chat;
                });
            })
        }),
        ctrl.embed ? null : snabbdom_1.h('div.chat__members.none', {
            hook: util_1.onInsert(el => $(el).watchers())
        }, [snabbdom_1.h('span.number', '\xa0'), ' ', ctrl.trans.noarg('spectators'), ' ', snabbdom_1.h('span.list')])
    ]);
}
exports.default = default_1;

},{"./acpl":38,"./actionMenu":39,"./clocks":44,"./control":45,"./crazy/crazyView":47,"./explorer/explorerView":53,"./forecast/forecastView":57,"./fork":58,"./gridHacks":59,"./ground":60,"./keyboard":61,"./pgnExport":66,"./practice/practiceView":68,"./promotion":69,"./retrospect/retroView":71,"./serverSideUnderboard":72,"./study/gamebook/gamebookEdit":80,"./study/gamebook/gamebookPlayView":82,"./study/playerBars":86,"./study/practice/studyPracticeView":90,"./study/relay/relayIntroView":92,"./study/relay/relayManagerView":93,"./study/studyView":104,"./treeView/treeView":109,"./util":110,"ceval":113,"game":138,"game/router":139,"game/view/status":141,"snabbdom":35,"tree":142}],112:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const pool_1 = require("./pool");
const common_1 = require("common");
const storage_1 = require("common/storage");
const throttle_1 = require("common/throttle");
const winningChances_1 = require("./winningChances");
const li = window.lichess;
function sanIrreversible(variant, san) {
    if (san.startsWith('O-O'))
        return true;
    if (variant === 'crazyhouse')
        return false;
    if (san.includes('x'))
        return true; // capture
    if (san.toLowerCase() === san)
        return true; // pawn move
    return variant === 'threeCheck' && san.includes('+');
}
function officialStockfish(variant) {
    return variant === 'standard' || variant === 'chess960';
}
function is64Bit() {
    const x64 = ['x86_64', 'x86-64', 'Win64', 'x64', 'amd64', 'AMD64'];
    for (const substr of x64)
        if (navigator.userAgent.includes(substr))
            return true;
    return navigator.platform === 'Linux x86_64' || navigator.platform === 'MacIntel';
}
function sharedWasmMemory(initial, maximum) {
    // In theory 32 bit should be supported just the same, but some 32 bit
    // browser builds seem to have trouble with WASMX. So for now detect and
    // require a 64 bit platform.
    if (!is64Bit())
        return;
    // Atomics
    if (typeof Atomics !== 'object')
        return;
    // SharedArrayBuffer
    if (typeof SharedArrayBuffer !== 'function')
        return;
    // Shared memory
    const mem = new WebAssembly.Memory({ shared: true, initial, maximum });
    if (!(mem.buffer instanceof SharedArrayBuffer))
        return;
    // Structured cloning
    try {
        window.postMessage(mem, '*');
    }
    catch (e) {
        return;
    }
    return mem;
}
function median(values) {
    values.sort((a, b) => a - b);
    const half = Math.floor(values.length / 2);
    return values.length % 2 ? values[half] : (values[half - 1] + values[half]) / 2.0;
}
function default_1(opts) {
    const storageKey = (k) => {
        return opts.storageKeyPrefix ? `${opts.storageKeyPrefix}.${k}` : k;
    };
    // select wasmx with growable shared mem > wasmx > wasm > asmjs
    let technology = 'asmjs';
    let growableSharedMem = false;
    if (typeof WebAssembly === 'object' && WebAssembly.validate(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00))) {
        technology = 'wasm'; // WebAssembly 1.0
        if (officialStockfish(opts.variant.key)) {
            const sharedMem = sharedWasmMemory(8, 16);
            if (sharedMem) {
                technology = 'wasmx';
                try {
                    sharedMem.grow(8);
                    growableSharedMem = true;
                }
                catch (e) { }
            }
        }
    }
    const maxThreads = Math.min(Math.max((navigator.hardwareConcurrency || 1) - 1, 1), growableSharedMem ? 16 : 2);
    const threads = storage_1.storedProp(storageKey('ceval.threads'), Math.min(Math.ceil((navigator.hardwareConcurrency || 1) / 4), maxThreads));
    const maxHashSize = Math.min((navigator.deviceMemory || 0.25) * 1024 / 8, growableSharedMem ? 1024 : 16);
    const hashSize = storage_1.storedProp(storageKey('ceval.hash-size'), 16);
    const minDepth = 6;
    const maxDepth = storage_1.storedProp(storageKey('ceval.max-depth'), 18);
    const multiPv = storage_1.storedProp(storageKey('ceval.multipv'), opts.multiPvDefault || 1);
    const infinite = storage_1.storedProp('ceval.infinite', false);
    let curEval = null;
    const enableStorage = li.storage.makeBoolean(storageKey('client-eval-enabled'));
    const allowed = common_1.prop(true);
    const enabled = common_1.prop(opts.possible && allowed() && enableStorage.get() && !document.hidden);
    let started = false;
    let lastStarted = false; // last started object (for going deeper even if stopped)
    const hovering = common_1.prop(null);
    const isDeeper = common_1.prop(false);
    const pool = new pool_1.Pool({
        technology,
        asmjs: 'vendor/stockfish.js/stockfish.js',
        wasm: 'vendor/stockfish.js/stockfish.wasm.js',
        wasmx: officialStockfish(opts.variant.key) ? 'vendor/stockfish.wasm/stockfish.js' : 'vendor/stockfish-mv.wasm/stockfish.js',
    }, {
        minDepth,
        variant: opts.variant.key,
        threads: technology == 'wasmx' && (() => Math.min(parseInt(threads()), maxThreads)),
        hashSize: technology == 'wasmx' && (() => Math.min(parseInt(hashSize()), maxHashSize)),
    });
    // adjusts maxDepth based on nodes per second
    const npsRecorder = (function () {
        const values = [];
        const applies = function (ev) {
            return ev.knps && ev.depth >= 16 &&
                typeof ev.cp !== 'undefined' && Math.abs(ev.cp) < 500 &&
                (ev.fen.split(/\s/)[0].split(/[nbrqkp]/i).length - 1) >= 10;
        };
        return function (ev) {
            if (!applies(ev))
                return;
            values.push(ev.knps);
            if (values.length > 9) {
                let depth = 18, knps = median(values) || 0;
                if (knps > 100)
                    depth = 19;
                if (knps > 150)
                    depth = 20;
                if (knps > 250)
                    depth = 21;
                if (knps > 500)
                    depth = 22;
                if (knps > 1000)
                    depth = 23;
                if (knps > 2000)
                    depth = 24;
                if (knps > 3500)
                    depth = 25;
                if (knps > 5000)
                    depth = 26;
                if (knps > 7000)
                    depth = 27;
                maxDepth(depth);
                if (values.length > 40)
                    values.shift();
            }
        };
    })();
    let lastEmitFen = null;
    const onEmit = throttle_1.default(200, (ev, work) => {
        sortPvsInPlace(ev.pvs, (work.ply % 2 === (work.threatMode ? 1 : 0)) ? 'white' : 'black');
        npsRecorder(ev);
        curEval = ev;
        opts.emit(ev, work);
        if (ev.fen !== lastEmitFen) {
            lastEmitFen = ev.fen;
            li.storage.fire('ceval.fen', ev.fen);
        }
    });
    const effectiveMaxDepth = () => (isDeeper() || infinite()) ? 99 : parseInt(maxDepth());
    const sortPvsInPlace = (pvs, color) => pvs.sort(function (a, b) {
        return winningChances_1.povChances(color, b) - winningChances_1.povChances(color, a);
    });
    const start = (path, steps, threatMode, deeper) => {
        if (!enabled() || !opts.possible)
            return;
        isDeeper(deeper);
        const maxD = effectiveMaxDepth();
        const step = steps[steps.length - 1];
        const existing = threatMode ? step.threat : step.ceval;
        if (existing && existing.depth >= maxD)
            return;
        const work = {
            initialFen: steps[0].fen,
            moves: [],
            currentFen: step.fen,
            path,
            ply: step.ply,
            maxDepth: maxD,
            multiPv: parseInt(multiPv()),
            threatMode,
            emit(ev) {
                if (enabled())
                    onEmit(ev, work);
            }
        };
        if (threatMode) {
            const c = step.ply % 2 === 1 ? 'w' : 'b';
            const fen = step.fen.replace(/ (w|b) /, ' ' + c + ' ');
            work.currentFen = fen;
            work.initialFen = fen;
        }
        else {
            // send fen after latest castling move and the following moves
            for (let i = 1; i < steps.length; i++) {
                let s = steps[i];
                if (sanIrreversible(opts.variant.key, s.san)) {
                    work.moves = [];
                    work.initialFen = s.fen;
                }
                else
                    work.moves.push(s.uci);
            }
        }
        pool.start(work);
        started = {
            path,
            steps,
            threatMode
        };
    };
    function goDeeper() {
        const s = started || lastStarted;
        if (s) {
            stop();
            start(s.path, s.steps, s.threatMode, true);
        }
    }
    ;
    function stop() {
        if (!enabled() || !started)
            return;
        pool.stop();
        lastStarted = started;
        started = false;
    }
    ;
    // ask other tabs if a game is in progress
    if (enabled()) {
        li.storage.fire('ceval.fen', 'start');
        li.storage.make('round.ongoing').listen(_ => {
            enabled(false);
            opts.redraw();
        });
    }
    return {
        technology,
        start,
        stop,
        allowed,
        possible: opts.possible,
        enabled,
        multiPv,
        threads: technology == 'wasmx' ? threads : undefined,
        hashSize: technology == 'wasmx' ? hashSize : undefined,
        maxThreads,
        maxHashSize,
        infinite,
        hovering,
        setHovering(fen, uci) {
            hovering(uci ? {
                fen,
                uci
            } : null);
            opts.setAutoShapes();
        },
        toggle() {
            if (!opts.possible || !allowed())
                return;
            stop();
            enabled(!enabled());
            if (document.visibilityState !== 'hidden')
                enableStorage.set(enabled());
        },
        curDepth: () => curEval ? curEval.depth : 0,
        effectiveMaxDepth,
        variant: opts.variant,
        isDeeper,
        goDeeper,
        canGoDeeper: () => !isDeeper() && !infinite() && !pool.isComputing(),
        isComputing: () => !!started && pool.isComputing(),
        engineName: pool.engineName,
        destroy: pool.destroy,
        redraw: opts.redraw
    };
}
exports.default = default_1;
;

},{"./pool":114,"./winningChances":117,"common":131,"common/storage":135,"common/throttle":137}],113:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ctrl_1 = require("./ctrl");
exports.ctrl = ctrl_1.default;
const view = require("./view");
exports.view = view;
const winningChances = require("./winningChances");
exports.winningChances = winningChances;
function isEvalBetter(a, b) {
    return !b || a.depth > b.depth || (a.depth === b.depth && a.nodes > b.nodes);
}
exports.isEvalBetter = isEvalBetter;
// stop when another tab starts. Listen only once here,
// as the ctrl can be instanciated several times.
// gotta do the click on the toggle to have it visually change.
window.lichess.storage.make('ceval.pool.start').listen(_ => {
    const toggle = document.getElementById('analyse-toggle-ceval');
    if (toggle && toggle.checked)
        toggle.click();
});

},{"./ctrl":112,"./view":116,"./winningChances":117}],114:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const sync_1 = require("common/sync");
const stockfishProtocol_1 = require("./stockfishProtocol");
class AbstractWorker {
    constructor(url, poolOpts, workerOpts) {
        this.url = url;
        this.poolOpts = poolOpts;
        this.workerOpts = workerOpts;
        this.isComputing = () => !!this.protocol.sync && this.protocol.sync.isComputing();
        this.engineName = () => this.protocol.sync && this.protocol.sync.engineName;
        this.protocol = sync_1.sync(this.boot());
    }
    stop() {
        return this.protocol.promise.then(protocol => protocol.stop());
    }
    start(work) {
        return this.protocol.promise.then(protocol => {
            return protocol.stop().then(() => protocol.start(work));
        });
    }
}
exports.AbstractWorker = AbstractWorker;
class WebWorker extends AbstractWorker {
    boot() {
        this.worker = new Worker(window.lichess.assetUrl(this.url, { sameDomain: true }));
        const protocol = new stockfishProtocol_1.default(this.send.bind(this), this.workerOpts);
        this.worker.addEventListener('message', e => {
            protocol.received(e.data);
        }, true);
        return Promise.resolve(protocol);
    }
    start(work) {
        // wait for boot
        return this.protocol.promise.then(protocol => {
            const timeout = new Promise((_, reject) => setTimeout(reject, 1000));
            return Promise.race([protocol.stop(), timeout]).catch(() => {
                // reboot if not stopped after 1s
                this.destroy();
                this.protocol = sync_1.sync(this.boot());
            }).then(() => {
                return this.protocol.promise.then(protocol => protocol.start(work));
            });
        });
    }
    destroy() {
        this.worker.terminate();
    }
    send(cmd) {
        this.worker.postMessage(cmd);
    }
}
class ThreadedWasmWorker extends AbstractWorker {
    boot() {
        if (!ThreadedWasmWorker.global)
            ThreadedWasmWorker.global = window.lichess.loadScript(this.url, { sameDomain: true }).then(() => {
                const instance = this.instance = window['Stockfish'](), protocol = new stockfishProtocol_1.default(this.send.bind(this), this.workerOpts), listener = protocol.received.bind(protocol);
                instance.addMessageListener(listener);
                return {
                    instance,
                    protocol
                };
            });
        return ThreadedWasmWorker.global.then(global => {
            this.instance = global.instance;
            return global.protocol;
        });
    }
    destroy() {
        if (ThreadedWasmWorker.global) {
            console.log('stopping singleton wasmx worker (instead of destroying) ...');
            this.stop().then(() => console.log('... successfully stopped'));
        }
    }
    send(cmd) {
        if (this.instance)
            this.instance.postMessage(cmd);
    }
}
class Pool {
    constructor(poolOpts, protocolOpts) {
        this.poolOpts = poolOpts;
        this.protocolOpts = protocolOpts;
        this.workers = [];
        this.token = 0;
        this.warmup = () => {
            if (this.workers.length)
                return;
            if (this.poolOpts.technology == 'wasmx')
                this.workers.push(new ThreadedWasmWorker(this.poolOpts.wasmx, this.poolOpts, this.protocolOpts));
            else {
                for (let i = 1; i <= 2; i++)
                    this.workers.push(new WebWorker(this.poolOpts.technology == 'wasm' ? this.poolOpts.wasm : this.poolOpts.asmjs, this.poolOpts, this.protocolOpts));
            }
        };
        this.stop = () => this.workers.forEach(w => w.stop());
        this.destroy = () => {
            this.stop();
            this.workers.forEach(w => w.destroy());
        };
        this.start = (work) => {
            window.lichess.storage.fire('ceval.pool.start');
            this.getWorker().then(function (worker) {
                worker.start(work);
            }).catch(function (error) {
                console.log(error);
                setTimeout(() => window.lichess.reload(), 10000);
            });
        };
        this.isComputing = () => !!this.workers.length && this.workers[this.token].isComputing();
        this.engineName = () => this.workers[this.token] && this.workers[this.token].engineName();
    }
    getWorker() {
        this.warmup();
        // briefly wait and give a chance to reuse the current worker
        const worker = new Promise((resolve, reject) => {
            const currentWorker = this.workers[this.token];
            currentWorker.stop().then(() => resolve(currentWorker));
            setTimeout(reject, 50);
        });
        return worker.catch(() => {
            this.token = (this.token + 1) % this.workers.length;
            return Promise.resolve(this.workers[this.token]);
        });
    }
}
exports.Pool = Pool;

},{"./stockfishProtocol":115,"common/sync":136}],115:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const chess_1 = require("chess");
const EVAL_REGEX = new RegExp(''
    + /^info depth (\d+) seldepth \d+ multipv (\d+) /.source
    + /score (cp|mate) ([-\d]+) /.source
    + /(?:(upper|lower)bound )?nodes (\d+) nps \S+ /.source
    + /(?:hashfull \d+ )?(?:tbhits \d+ )?time (\S+) /.source
    + /pv (.+)/.source);
class Protocol {
    constructor(send, opts) {
        this.send = send;
        this.opts = opts;
        this.work = null;
        this.curEval = null;
        this.expectedPvs = 1;
        this.stopped = defer();
        this.stopped.resolve();
        // get engine name/version
        this.send('uci');
        // analyse without contempt
        this.setOption('UCI_AnalyseMode', 'true');
        this.setOption('Analysis Contempt', 'Off');
        if (opts.variant === 'fromPosition' || opts.variant === 'chess960')
            this.setOption('UCI_Chess960', 'true');
        else if (opts.variant === 'antichess')
            this.setOption('UCI_Variant', 'giveaway');
        else if (opts.variant !== 'standard')
            this.setOption('UCI_Variant', chess_1.variantToRules(opts.variant));
    }
    setOption(name, value) {
        this.send(`setoption name ${name} value ${value}`);
    }
    received(text) {
        if (text.startsWith('id name '))
            this.engineName = text.substring('id name '.length);
        else if (text.startsWith('bestmove ')) {
            if (!this.stopped)
                this.stopped = defer();
            this.stopped.resolve();
            if (this.work && this.curEval)
                this.work.emit(this.curEval);
            return;
        }
        if (!this.work)
            return;
        let matches = text.match(EVAL_REGEX);
        if (!matches)
            return;
        let depth = parseInt(matches[1]), multiPv = parseInt(matches[2]), isMate = matches[3] === 'mate', ev = parseInt(matches[4]), evalType = matches[5], nodes = parseInt(matches[6]), elapsedMs = parseInt(matches[7]), moves = matches[8].split(' ');
        // Sometimes we get #0. Let's just skip it.
        if (isMate && !ev)
            return;
        // Track max pv index to determine when pv prints are done.
        if (this.expectedPvs < multiPv)
            this.expectedPvs = multiPv;
        if (depth < this.opts.minDepth)
            return;
        let pivot = this.work.threatMode ? 0 : 1;
        if (this.work.ply % 2 === pivot)
            ev = -ev;
        // For now, ignore most upperbound/lowerbound messages.
        // The exception is for multiPV, sometimes non-primary PVs
        // only have an upperbound.
        // See: https://github.com/ddugovic/Stockfish/issues/228
        if (evalType && multiPv === 1)
            return;
        let pvData = {
            moves,
            cp: isMate ? undefined : ev,
            mate: isMate ? ev : undefined,
            depth,
        };
        if (multiPv === 1) {
            this.curEval = {
                fen: this.work.currentFen,
                maxDepth: this.work.maxDepth,
                depth,
                knps: nodes / elapsedMs,
                nodes,
                cp: isMate ? undefined : ev,
                mate: isMate ? ev : undefined,
                pvs: [pvData],
                millis: elapsedMs
            };
        }
        else if (this.curEval) {
            this.curEval.pvs.push(pvData);
            this.curEval.depth = Math.min(this.curEval.depth, depth);
        }
        if (multiPv === this.expectedPvs && this.curEval) {
            this.work.emit(this.curEval);
        }
    }
    start(w) {
        if (!this.stopped) {
            // TODO: Work is started by basically doing stop().then(() => start(w)).
            // There is a race condition where multiple callers are waiting for
            // completion of the same stop future, and so they will start work at
            // the same time.
            // This can lead to all kinds of issues, including deadlocks. Instead
            // we ignore all but the first request. The engine will show as loading
            // indefinitely. Until this is fixed, it is still better than a
            // possible deadlock.
            console.log('ceval: tried to start analysing before requesting stop');
            return;
        }
        this.work = w;
        this.curEval = null;
        this.stopped = null;
        this.expectedPvs = 1;
        if (this.opts.threads)
            this.setOption('Threads', this.opts.threads());
        if (this.opts.hashSize)
            this.setOption('Hash', this.opts.hashSize());
        this.setOption('MultiPV', this.work.multiPv);
        this.send(['position', 'fen', this.work.initialFen, 'moves'].concat(this.work.moves).join(' '));
        if (this.work.maxDepth >= 99)
            this.send('go depth 99');
        else
            this.send('go movetime 90000 depth ' + this.work.maxDepth);
    }
    stop() {
        if (!this.stopped) {
            this.work = null;
            this.stopped = defer();
            this.send('stop');
        }
        return this.stopped.promise;
    }
    isComputing() {
        return !this.stopped;
    }
}
exports.default = Protocol;
;
function defer() {
    const deferred = {};
    deferred.promise = new Promise(function (resolve, reject) {
        deferred.resolve = resolve;
        deferred.reject = reject;
    });
    return deferred;
}

},{"chess":129}],116:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const winningChances = require("./winningChances");
const common_1 = require("common");
const chess_1 = require("chess");
const snabbdom_1 = require("snabbdom");
const util_1 = require("chessops/util");
const fen_1 = require("chessops/fen");
const san_1 = require("chessops/san");
const variant_1 = require("chessops/variant");
let gaugeLast = 0;
const gaugeTicks = [...Array(8).keys()].map(i => snabbdom_1.h(i === 3 ? 'tick.zero' : 'tick', { attrs: { style: `height: ${(i + 1) * 12.5}%` } }));
function localEvalInfo(ctrl, evs) {
    const ceval = ctrl.getCeval(), trans = ctrl.trans;
    if (!evs.client)
        return [
            evs.server && ctrl.nextNodeBest() ? trans.noarg('usingServerAnalysis') : trans.noarg('loadingEngine'),
        ];
    const t = evs.client.cloud ? [
        trans('depthX', evs.client.depth || 0),
        snabbdom_1.h('span.cloud', { attrs: { title: trans.noarg('cloudAnalysis') } }, 'Cloud')
    ] : [
        trans('depthX', (evs.client.depth || 0) + '/' + evs.client.maxDepth)
    ];
    if (ceval.canGoDeeper())
        t.push(snabbdom_1.h('a.deeper', {
            attrs: {
                title: trans.noarg('goDeeper'),
                'data-icon': 'O'
            },
            hook: {
                insert: vnode => vnode.elm.addEventListener('click', () => {
                    ceval.goDeeper();
                    ceval.redraw();
                })
            }
        }));
    else if (!evs.client.cloud && evs.client.knps)
        t.push(', ' + Math.round(evs.client.knps) + ' knodes/s');
    return t;
}
function threatInfo(ctrl, threat) {
    if (!threat)
        return ctrl.trans.noarg('loadingEngine');
    let t = ctrl.trans('depthX', (threat.depth || 0) + '/' + threat.maxDepth);
    if (threat.knps)
        t += ', ' + Math.round(threat.knps) + ' knodes/s';
    return t;
}
function threatButton(ctrl) {
    if (ctrl.disableThreatMode && ctrl.disableThreatMode())
        return null;
    return snabbdom_1.h('a.show-threat', {
        class: {
            active: ctrl.threatMode(),
            hidden: !!ctrl.getNode().check
        },
        attrs: {
            'data-icon': '7',
            title: ctrl.trans.noarg('showThreat') + ' (x)'
        },
        hook: {
            insert: vnode => vnode.elm.addEventListener('click', ctrl.toggleThreatMode)
        }
    });
}
function engineName(ctrl) {
    const version = ctrl.engineName();
    return [
        snabbdom_1.h('span', version ? { attrs: { title: version } } : {}, ctrl.technology == 'wasmx' ? window.lichess.engineName : 'Stockfish 10+'),
        ctrl.technology == 'wasmx' ? snabbdom_1.h('span.native', { attrs: { title: 'Multi-threaded WebAssembly (experimental)' } }, 'wasmx') :
            (ctrl.technology == 'wasm' ? snabbdom_1.h('span.native', { attrs: { title: 'WebAssembly' } }, 'wasm') :
                snabbdom_1.h('span.asmjs', { attrs: { title: 'JavaScript fallback' } }, 'asmjs'))
    ];
}
const serverNodes = 4e6;
function getBestEval(evs) {
    const serverEv = evs.server, localEv = evs.client;
    if (!serverEv)
        return localEv;
    if (!localEv)
        return serverEv;
    // Prefer localEv if it exeeds fishnet node limit or finds a better mate.
    if (localEv.nodes > serverNodes ||
        (typeof localEv.mate !== 'undefined' && (typeof serverEv.mate === 'undefined' || Math.abs(localEv.mate) < Math.abs(serverEv.mate))))
        return localEv;
    return serverEv;
}
exports.getBestEval = getBestEval;
function renderGauge(ctrl) {
    if (ctrl.ongoing || !ctrl.showEvalGauge())
        return;
    let ev, bestEv = getBestEval(ctrl.currentEvals());
    if (bestEv) {
        ev = winningChances.povChances('white', bestEv);
        gaugeLast = ev;
    }
    else
        ev = gaugeLast;
    return snabbdom_1.h('div.eval-gauge', {
        class: {
            empty: ev === null,
            reverse: ctrl.getOrientation() === 'black'
        }
    }, [
        snabbdom_1.h('div.black', { attrs: { style: `height: ${100 - (ev + 1) * 50}%` } }),
        ...gaugeTicks
    ]);
}
exports.renderGauge = renderGauge;
function renderCeval(ctrl) {
    const instance = ctrl.getCeval(), trans = ctrl.trans;
    if (!instance.allowed() || !instance.possible || !ctrl.showComputer())
        return;
    const enabled = instance.enabled(), evs = ctrl.currentEvals(), threatMode = ctrl.threatMode(), threat = threatMode && ctrl.getNode().threat, bestEv = threat || getBestEval(evs);
    let pearl, percent;
    if (bestEv && typeof bestEv.cp !== 'undefined') {
        pearl = chess_1.renderEval(bestEv.cp);
        percent = evs.client ? Math.min(100, Math.round(100 * evs.client.depth / (evs.client.maxDepth || instance.effectiveMaxDepth()))) : 0;
    }
    else if (bestEv && common_1.defined(bestEv.mate)) {
        pearl = '#' + bestEv.mate;
        percent = 100;
    }
    else if (ctrl.gameOver()) {
        pearl = '-';
        percent = 0;
    }
    else {
        pearl = enabled ? snabbdom_1.h('i.ddloader') : snabbdom_1.h('i');
        percent = 0;
    }
    if (threatMode) {
        if (threat)
            percent = Math.min(100, Math.round(100 * threat.depth / threat.maxDepth));
        else
            percent = 0;
    }
    const progressBar = enabled ? snabbdom_1.h('div.bar', snabbdom_1.h('span', {
        class: { threat: threatMode },
        attrs: { style: `width: ${percent}%` },
        hook: {
            postpatch: (old, vnode) => {
                if (old.data.percent > percent || !!old.data.threatMode != threatMode) {
                    const el = vnode.elm;
                    const p = el.parentNode;
                    p.removeChild(el);
                    p.appendChild(el);
                }
                vnode.data.percent = percent;
                vnode.data.threatMode = threatMode;
            }
        }
    })) : null;
    const body = enabled ? [
        snabbdom_1.h('pearl', [pearl]),
        snabbdom_1.h('div.engine', [
            ...(threatMode ? [trans.noarg('showThreat')] : engineName(instance)),
            snabbdom_1.h('span.info', ctrl.gameOver() ? [trans.noarg('gameOver')] :
                (threatMode ? [threatInfo(ctrl, threat)] : localEvalInfo(ctrl, evs)))
        ])
    ] : [
        pearl ? snabbdom_1.h('pearl', [pearl]) : null,
        snabbdom_1.h('help', [
            ...engineName(instance),
            snabbdom_1.h('br'),
            trans.noarg('inLocalBrowser')
        ])
    ];
    const switchButton = ctrl.mandatoryCeval && ctrl.mandatoryCeval() ? null : snabbdom_1.h('div.switch', {
        attrs: { title: trans.noarg('toggleLocalEvaluation') + ' (l)' }
    }, [
        snabbdom_1.h('input#analyse-toggle-ceval.cmn-toggle.cmn-toggle--subtle', {
            attrs: {
                type: 'checkbox',
                checked: enabled
            },
            hook: {
                insert: vnode => vnode.elm.addEventListener('change', ctrl.toggleCeval)
            }
        }),
        snabbdom_1.h('label', { attrs: { 'for': 'analyse-toggle-ceval' } })
    ]);
    return snabbdom_1.h('div.ceval' + (enabled ? '.enabled' : ''), {
        class: {
            computing: percent < 100 && instance.isComputing()
        }
    }, [
        progressBar,
        ...body,
        threatButton(ctrl),
        switchButton
    ]);
}
exports.renderCeval = renderCeval;
function getElFen(el) {
    return el.getAttribute('data-fen');
}
function getElUci(e) {
    return $(e.target).closest('div.pv').attr('data-uci');
}
function checkHover(el, instance) {
    window.lichess.requestIdleCallback(() => {
        instance.setHovering(getElFen(el), $(el).find('div.pv:hover').attr('data-uci'));
    });
}
function renderPvs(ctrl) {
    const instance = ctrl.getCeval();
    if (!instance.allowed() || !instance.possible || !instance.enabled())
        return;
    const multiPv = parseInt(instance.multiPv()), node = ctrl.getNode(), setup = fen_1.parseFen(node.fen).unwrap();
    let pvs, threat = false;
    if (ctrl.threatMode() && node.threat) {
        pvs = node.threat.pvs;
        threat = true;
    }
    else if (node.ceval)
        pvs = node.ceval.pvs;
    else
        pvs = [];
    if (threat)
        setup.turn = util_1.opposite(setup.turn);
    const pos = variant_1.setupPosition(chess_1.variantToRules(instance.variant.key), setup);
    return snabbdom_1.h('div.pv_box', {
        attrs: { 'data-fen': node.fen },
        hook: {
            insert: vnode => {
                const el = vnode.elm;
                el.addEventListener('mouseover', (e) => {
                    instance.setHovering(getElFen(el), getElUci(e));
                });
                el.addEventListener('mouseout', () => {
                    instance.setHovering(getElFen(el));
                });
                el.addEventListener('mousedown', (e) => {
                    const uci = getElUci(e);
                    if (uci)
                        ctrl.playUci(uci);
                });
                checkHover(el, instance);
            },
            postpatch: (_, vnode) => checkHover(vnode.elm, instance)
        }
    }, [...Array(multiPv).keys()].map(function (i) {
        if (!pvs[i])
            return snabbdom_1.h('div.pv');
        return snabbdom_1.h('div.pv', threat ? {} : {
            attrs: { 'data-uci': pvs[i].moves[0] }
        }, [
            multiPv > 1 ? snabbdom_1.h('strong', common_1.defined(pvs[i].mate) ? ('#' + pvs[i].mate) : chess_1.renderEval(pvs[i].cp)) : null,
            snabbdom_1.h('span', pos.unwrap(pos => san_1.makeSanVariation(pos, pvs[i].moves.slice(0, 12).map(m => util_1.parseUci(m))), _ => '--'))
        ]);
    }));
}
exports.renderPvs = renderPvs;

},{"./winningChances":117,"chess":129,"chessops/fen":23,"chessops/san":24,"chessops/util":28,"chessops/variant":29,"common":131,"snabbdom":35}],117:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function toPov(color, diff) {
    return color === 'white' ? diff : -diff;
}
/**
 * https://graphsketch.com/?eqn1_color=1&eqn1_eqn=100+*+%282+%2F+%281+%2B+exp%28-0.005+*+x%29%29+-+1%29&eqn2_color=2&eqn2_eqn=100+*+%282+%2F+%281+%2B+exp%28-0.004+*+x%29%29+-+1%29&eqn3_color=3&eqn3_eqn=&eqn4_color=4&eqn4_eqn=&eqn5_color=5&eqn5_eqn=&eqn6_color=6&eqn6_eqn=&x_min=-1000&x_max=1000&y_min=-100&y_max=100&x_tick=100&y_tick=10&x_label_freq=2&y_label_freq=2&do_grid=0&do_grid=1&bold_labeled_lines=0&bold_labeled_lines=1&line_width=4&image_w=850&image_h=525
 */
function rawWinningChances(cp) {
    return 2 / (1 + Math.exp(-0.004 * cp)) - 1;
}
function cpWinningChances(cp) {
    return rawWinningChances(Math.min(Math.max(-1000, cp), 1000));
}
function mateWinningChances(mate) {
    var cp = (21 - Math.min(10, Math.abs(mate))) * 100;
    var signed = cp * (mate > 0 ? 1 : -1);
    return rawWinningChances(signed);
}
function evalWinningChances(ev) {
    return typeof ev.mate !== 'undefined' ? mateWinningChances(ev.mate) : cpWinningChances(ev.cp);
}
// winning chances for a color
// 1  infinitely winning
// -1 infinitely losing
function povChances(color, ev) {
    return toPov(color, evalWinningChances(ev));
}
exports.povChances = povChances;
// computes the difference, in winning chances, between two evaluations
// 1  = e1 is infinately better than e2
// -1 = e1 is infinately worse  than e2
function povDiff(color, e1, e2) {
    return (povChances(color, e1) - povChances(color, e2)) / 2;
}
exports.povDiff = povDiff;

},{}],118:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const preset_1 = require("./preset");
const note_1 = require("./note");
const moderation_1 = require("./moderation");
const common_1 = require("common");
const li = window.lichess;
function default_1(opts, redraw) {
    const data = opts.data;
    data.domVersion = 1; // increment to force redraw
    const maxLines = 200;
    const maxLinesDrop = 50; // how many lines to drop at once
    const palantir = {
        instance: undefined,
        loaded: false,
        enabled: common_1.prop(!!data.palantir)
    };
    const allTabs = ['discussion'];
    if (opts.noteId)
        allTabs.push('note');
    if (opts.plugin)
        allTabs.push(opts.plugin.tab.key);
    const tabStorage = li.storage.make('chat.tab'), storedTab = tabStorage.get();
    let moderation;
    const vm = {
        tab: allTabs.find(tab => tab === storedTab) || allTabs[0],
        enabled: opts.alwaysEnabled || !li.storage.get('nochat'),
        placeholderKey: 'talkInChat',
        loading: false,
        timeout: opts.timeout,
        writeable: opts.writeable
    };
    /* If discussion is disabled, and we have another chat tab,
     * then select that tab over discussion */
    if (allTabs.length > 1 && vm.tab === 'discussion' && li.storage.get('nochat'))
        vm.tab = allTabs[1];
    const post = function (text) {
        text = text.trim();
        if (!text)
            return;
        if (text.length > 140) {
            alert('Max length: 140 chars. ' + text.length + ' chars used.');
            return;
        }
        li.pubsub.emit('socket.send', 'talk', text);
    };
    const onTimeout = function (userId) {
        data.lines.forEach(l => {
            if (l.u && l.u.toLowerCase() == userId)
                l.d = true;
        });
        if (userId == data.userId)
            vm.timeout = true;
        data.domVersion++;
        redraw();
    };
    const onReinstate = function (userId) {
        if (userId == data.userId) {
            vm.timeout = false;
            redraw();
        }
    };
    const onMessage = function (line) {
        data.lines.push(line);
        const nb = data.lines.length;
        if (nb > maxLines) {
            data.lines.splice(0, nb - maxLines + maxLinesDrop);
            data.domVersion++;
        }
        redraw();
    };
    const onWriteable = function (v) {
        vm.writeable = v;
        redraw();
    };
    const onPermissions = function (obj) {
        let p;
        for (p in obj)
            opts.permissions[p] = obj[p];
        instanciateModeration();
        redraw();
    };
    const trans = li.trans(opts.i18n);
    function canMod() {
        return opts.permissions.timeout || opts.permissions.local;
    }
    function instanciateModeration() {
        moderation = canMod() ? moderation_1.moderationCtrl({
            reasons: opts.timeoutReasons || ([{ key: 'other', name: 'Inappropriate behavior' }]),
            permissions: opts.permissions,
            redraw
        }) : undefined;
        if (canMod())
            opts.loadCss('chat.mod');
    }
    instanciateModeration();
    const note = opts.noteId ? note_1.noteCtrl({
        id: opts.noteId,
        trans,
        redraw
    }) : undefined;
    const preset = preset_1.presetCtrl({
        initialGroup: opts.preset,
        post,
        redraw
    });
    const subs = [
        ['socket.in.message', onMessage],
        ['socket.in.chat_timeout', onTimeout],
        ['socket.in.chat_reinstate', onReinstate],
        ['chat.writeable', onWriteable],
        ['chat.permissions', onPermissions],
        ['palantir.toggle', palantir.enabled]
    ];
    subs.forEach(([eventName, callback]) => li.pubsub.on(eventName, callback));
    const destroy = () => {
        subs.forEach(([eventName, callback]) => li.pubsub.off(eventName, callback));
    };
    const emitEnabled = () => li.pubsub.emit('chat.enabled', vm.enabled);
    emitEnabled();
    return {
        data,
        opts,
        vm,
        allTabs,
        setTab(t) {
            vm.tab = t;
            tabStorage.set(t);
            // It's a lame way to do it. Give me a break.
            if (t === 'discussion')
                li.requestIdleCallback(() => $('.mchat__say').focus());
            redraw();
        },
        moderation: () => moderation,
        note,
        preset,
        post,
        trans,
        plugin: opts.plugin,
        setEnabled(v) {
            vm.enabled = v;
            emitEnabled();
            if (!v)
                li.storage.set('nochat', '1');
            else
                li.storage.remove('nochat');
            redraw();
        },
        redraw,
        palantir,
        destroy
    };
}
exports.default = default_1;
;

},{"./moderation":122,"./note":123,"./preset":124,"common":131}],119:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const spam = require("./spam");
const enhance = require("./enhance");
const preset_1 = require("./preset");
const moderation_1 = require("./moderation");
const util_1 = require("./util");
const xhr_1 = require("./xhr");
const whisperRegex = /^\/w(?:hisper)?\s/;
function default_1(ctrl) {
    if (!ctrl.vm.enabled)
        return [];
    const scrollCb = (vnode) => {
        const el = vnode.elm;
        if (ctrl.data.lines.length > 5) {
            const autoScroll = (el.scrollTop === 0 || (el.scrollTop > (el.scrollHeight - el.clientHeight - 100)));
            if (autoScroll) {
                el.scrollTop = 999999;
                setTimeout((_) => el.scrollTop = 999999, 300);
            }
        }
    }, mod = ctrl.moderation();
    const vnodes = [
        snabbdom_1.h('ol.mchat__messages.chat-v-' + ctrl.data.domVersion, {
            attrs: {
                role: 'log',
                'aria-live': 'polite',
                'aria-atomic': false
            },
            hook: {
                insert(vnode) {
                    const $el = $(vnode.elm).on('click', 'a.jump', (e) => {
                        window.lichess.pubsub.emit('jump', e.target.getAttribute('data-ply'));
                    });
                    if (mod)
                        $el.on('click', '.mod', (e) => {
                            mod.open(e.target.getAttribute('data-username').split(' ')[0]);
                        });
                    else
                        $el.on('click', '.flag', (e) => report(ctrl, e.target.parentNode));
                    scrollCb(vnode);
                },
                postpatch: (_, vnode) => scrollCb(vnode)
            }
        }, selectLines(ctrl).map(line => renderLine(ctrl, line))),
        renderInput(ctrl)
    ];
    const presets = preset_1.presetView(ctrl.preset);
    if (presets)
        vnodes.push(presets);
    return vnodes;
}
exports.default = default_1;
function renderInput(ctrl) {
    if (!ctrl.vm.writeable)
        return;
    if ((ctrl.data.loginRequired && !ctrl.data.userId) || ctrl.data.restricted)
        return snabbdom_1.h('input.mchat__say', {
            attrs: {
                placeholder: ctrl.trans('loginToChat'),
                disabled: true
            }
        });
    let placeholder;
    if (ctrl.vm.timeout)
        placeholder = ctrl.trans('youHaveBeenTimedOut');
    else if (ctrl.opts.blind)
        placeholder = 'Chat';
    else
        placeholder = ctrl.trans.noarg(ctrl.vm.placeholderKey);
    return snabbdom_1.h('input.mchat__say', {
        attrs: {
            placeholder,
            autocomplete: 'off',
            maxlength: 140,
            disabled: ctrl.vm.timeout || !ctrl.vm.writeable
        },
        hook: {
            insert(vnode) {
                setupHooks(ctrl, vnode.elm);
            }
        }
    });
}
let mouchListener;
const setupHooks = (ctrl, chatEl) => {
    chatEl.addEventListener('keypress', (e) => setTimeout(() => {
        const el = e.target, txt = el.value, pub = ctrl.opts.public;
        if (e.which == 10 || e.which == 13) {
            if (txt === '')
                $('.keyboard-move input').focus();
            else {
                spam.report(txt);
                if (pub && spam.hasTeamUrl(txt))
                    alert("Please don't advertise teams in the chat.");
                else
                    ctrl.post(txt);
                el.value = '';
                if (!pub)
                    el.classList.remove('whisper');
            }
        }
        else {
            el.removeAttribute('placeholder');
            if (!pub)
                el.classList.toggle('whisper', !!txt.match(whisperRegex));
        }
    }));
    window.Mousetrap.bind('c', () => {
        chatEl.focus();
        return false;
    });
    window.Mousetrap(chatEl).bind('esc', () => chatEl.blur());
    // Ensure clicks remove chat focus.
    // See ornicar/chessground#109
    const mouchEvents = ['touchstart', 'mousedown'];
    if (mouchListener)
        mouchEvents.forEach(event => document.body.removeEventListener(event, mouchListener, { capture: true }));
    mouchListener = (e) => {
        if (!e.shiftKey && e.buttons !== 2 && e.button !== 2)
            chatEl.blur();
    };
    chatEl.onfocus = () => mouchEvents.forEach(event => document.body.addEventListener(event, mouchListener, { passive: true, capture: true }));
    chatEl.onblur = () => mouchEvents.forEach(event => document.body.removeEventListener(event, mouchListener, { capture: true }));
};
function sameLines(l1, l2) {
    return l1.d && l2.d && l1.u === l2.u;
}
function selectLines(ctrl) {
    let prev, ls = [];
    ctrl.data.lines.forEach(line => {
        if (!line.d &&
            (!prev || !sameLines(prev, line)) &&
            (!line.r || (line.u || '').toLowerCase() == ctrl.data.userId) &&
            !spam.skip(line.t))
            ls.push(line);
        prev = line;
    });
    return ls;
}
function updateText(parseMoves) {
    return (oldVnode, vnode) => {
        if (vnode.data.lichessChat !== oldVnode.data.lichessChat) {
            vnode.elm.innerHTML = enhance.enhance(vnode.data.lichessChat, parseMoves);
        }
    };
}
function renderText(t, parseMoves) {
    if (enhance.isMoreThanText(t)) {
        const hook = updateText(parseMoves);
        return snabbdom_1.h('t', {
            lichessChat: t,
            hook: {
                create: hook,
                update: hook
            }
        });
    }
    return snabbdom_1.h('t', t);
}
function report(ctrl, line) {
    const userA = line.querySelector('a.user-link');
    const text = line.querySelector('t').innerText;
    if (userA && confirm(`Report "${text}" to moderators?`))
        xhr_1.flag(ctrl.data.resourceId, userA.href.split('/')[4], text);
}
function renderLine(ctrl, line) {
    const textNode = renderText(line.t, ctrl.opts.parseMoves);
    if (line.u === 'lichess')
        return snabbdom_1.h('li.system', textNode);
    if (line.c)
        return snabbdom_1.h('li', [
            snabbdom_1.h('span.color', '[' + line.c + ']'),
            textNode
        ]);
    const userNode = snabbdom_1.thunk('a', line.u, util_1.userLink, [line.u, line.title]);
    return snabbdom_1.h('li', {}, ctrl.moderation() ? [
        line.u ? moderation_1.lineAction(line.u) : null,
        userNode,
        textNode
    ] : [
        ctrl.data.userId && line.u && ctrl.data.userId != line.u ? snabbdom_1.h('i.flag', {
            attrs: {
                'data-icon': '!',
                title: 'Report'
            }
        }) : null,
        userNode,
        textNode
    ]);
}

},{"./enhance":120,"./moderation":122,"./preset":124,"./spam":125,"./util":126,"./xhr":128,"snabbdom":35}],120:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function enhance(text, parseMoves) {
    const escaped = window.lichess.escapeHtml(text);
    const linked = autoLink(escaped);
    const plied = parseMoves && linked === escaped ? addPlies(linked) : linked;
    return plied;
}
exports.enhance = enhance;
const moreThanTextPattern = /[&<>"@]/;
const possibleLinkPattern = /\.\w/;
function isMoreThanText(str) {
    return moreThanTextPattern.test(str) || possibleLinkPattern.test(str);
}
exports.isMoreThanText = isMoreThanText;
const linkPattern = /\b(https?:\/\/|lichess\.org\/)[-\w+&'@#\/%?=()~|!:,.;]+[\w+&@#\/%=~|]/gi;
function linkReplace(url, scheme) {
    if (url.includes('&quot;'))
        return url;
    const fullUrl = scheme === 'lichess.org/' ? 'https://' + url : url;
    const minUrl = url.replace(/^https:\/\//, '');
    return '<a target="_blank" rel="nofollow" href="' + fullUrl + '">' + minUrl + '</a>';
}
const userPattern = /(^|[^\w@#/])@([\w-]{2,})/g;
const pawnDropPattern = /^[a-h][2-7]$/;
function userLinkReplace(orig, prefix, user) {
    if (user.length > 20 || user.match(pawnDropPattern))
        return orig;
    return prefix + '<a href="/@/' + user + '">@' + user + "</a>";
}
function autoLink(html) {
    return html.replace(userPattern, userLinkReplace).replace(linkPattern, linkReplace);
}
const movePattern = /\b(\d+)\s*(\.+)\s*(?:[o0-]+[o0]|[NBRQKP]?[a-h]?[1-8]?[x@]?[a-z][1-8](?:=[NBRQK])?)\+?\#?[!\?=]{0,5}/gi;
function moveReplacer(match, turn, dots) {
    if (turn < 1 || turn > 200)
        return match;
    const ply = turn * 2 - (dots.length > 1 ? 0 : 1);
    return '<a class="jump" data-ply="' + ply + '">' + match + '</a>';
}
function addPlies(html) {
    return html.replace(movePattern, moveReplacer);
}

},{}],121:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const ctrl_1 = require("./ctrl");
const view_1 = require("./view");
const class_1 = require("snabbdom/modules/class");
const attributes_1 = require("snabbdom/modules/attributes");
function LichessChat(element, opts) {
    const patch = snabbdom_1.init([class_1.default, attributes_1.default]);
    let vnode, ctrl;
    function redraw() {
        vnode = patch(vnode, view_1.default(ctrl));
    }
    ctrl = ctrl_1.default(opts, redraw);
    const blueprint = view_1.default(ctrl);
    element.innerHTML = '';
    vnode = patch(element, blueprint);
    return ctrl;
}
exports.default = LichessChat;
;

},{"./ctrl":118,"./view":127,"snabbdom":35,"snabbdom/modules/attributes":33,"snabbdom/modules/class":34}],122:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const xhr_1 = require("./xhr");
const util_1 = require("./util");
function moderationCtrl(opts) {
    let data;
    let loading = false;
    const open = (username) => {
        if (opts.permissions.timeout) {
            loading = true;
            xhr_1.userModInfo(username).then(d => {
                data = d;
                loading = false;
                opts.redraw();
            });
        }
        else {
            data = {
                id: username,
                username
            };
        }
        opts.redraw();
    };
    const close = () => {
        data = undefined;
        loading = false;
        opts.redraw();
    };
    return {
        loading: () => loading,
        data: () => data,
        reasons: opts.reasons,
        permissions: () => opts.permissions,
        open,
        close,
        timeout(reason) {
            data && window.lichess.pubsub.emit('socket.send', 'timeout', {
                userId: data.id,
                reason: reason.key
            });
            close();
            opts.redraw();
        },
        shadowban() {
            loading = true;
            data && $.post('/mod/' + data.id + '/troll/true').then(() => data && open(data.username));
            opts.redraw();
        }
    };
}
exports.moderationCtrl = moderationCtrl;
function lineAction(username) {
    return snabbdom_1.h('i.mod', {
        attrs: {
            'data-icon': '',
            'data-username': username,
            title: 'Moderation'
        }
    });
}
exports.lineAction = lineAction;
function moderationView(ctrl) {
    if (!ctrl)
        return;
    if (ctrl.loading())
        return [snabbdom_1.h('div.loading', util_1.spinner())];
    const data = ctrl.data();
    if (!data)
        return;
    const perms = ctrl.permissions();
    const infos = data.history ? snabbdom_1.h('div.infos.block', [
        window.lichess.numberFormat(data.games || 0) + ' games',
        data.troll ? 'TROLL' : undefined,
        data.engine ? 'ENGINE' : undefined,
        data.booster ? 'BOOSTER' : undefined
    ].map(t => t && snabbdom_1.h('span', t)).concat([
        snabbdom_1.h('a', {
            attrs: {
                href: '/@/' + data.username + '?mod'
            }
        }, 'profile')
    ]).concat(perms.shadowban ? [
        snabbdom_1.h('a', {
            attrs: {
                href: '/mod/' + data.username + '/communication'
            }
        }, 'coms')
    ] : [])) : undefined;
    const timeout = perms.timeout ? snabbdom_1.h('div.timeout.block', [
        snabbdom_1.h('strong', 'Timeout 10 minutes for'),
        ...ctrl.reasons.map(r => {
            return snabbdom_1.h('a.text', {
                attrs: { 'data-icon': 'p' },
                hook: util_1.bind('click', () => ctrl.timeout(r))
            }, r.name);
        }),
        ...((data.troll || !perms.shadowban) ? [] : [snabbdom_1.h('div.shadowban', [
                'Or ',
                snabbdom_1.h('button.button.button-red.button-empty', {
                    hook: util_1.bind('click', ctrl.shadowban)
                }, 'shadowban')
            ])])
    ]) : snabbdom_1.h('div.timeout.block', [
        snabbdom_1.h('strong', 'Moderation'),
        snabbdom_1.h('a.text', {
            attrs: { 'data-icon': 'p' },
            hook: util_1.bind('click', () => ctrl.timeout(ctrl.reasons[0]))
        }, 'Timeout 10 minutes')
    ]);
    const history = data.history ? snabbdom_1.h('div.history.block', [
        snabbdom_1.h('strong', 'Timeout history'),
        snabbdom_1.h('table', snabbdom_1.h('tbody.slist', {
            hook: {
                insert: () => window.lichess.pubsub.emit('content_loaded')
            }
        }, data.history.map(function (e) {
            return snabbdom_1.h('tr', [
                snabbdom_1.h('td.reason', e.reason),
                snabbdom_1.h('td.mod', e.mod),
                snabbdom_1.h('td', snabbdom_1.h('time.timeago', {
                    attrs: { datetime: e.date }
                }))
            ]);
        })))
    ]) : undefined;
    return [
        snabbdom_1.h('div.top', { key: 'mod-' + data.id }, [
            snabbdom_1.h('span.text', {
                attrs: { 'data-icon': '' },
            }, [util_1.userLink(data.username)]),
            snabbdom_1.h('a', {
                attrs: { 'data-icon': 'L' },
                hook: util_1.bind('click', ctrl.close)
            })
        ]),
        snabbdom_1.h('div.mchat__content.moderation', [
            infos,
            timeout,
            history
        ])
    ];
}
exports.moderationView = moderationView;
;

},{"./util":126,"./xhr":128,"snabbdom":35}],123:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const xhr = require("./xhr");
const util_1 = require("./util");
function noteCtrl(opts) {
    let text;
    const doPost = window.lichess.debounce(() => {
        xhr.setNote(opts.id, text);
    }, 1000);
    return {
        id: opts.id,
        trans: opts.trans,
        text: () => text,
        fetch() {
            xhr.getNote(opts.id).then(t => {
                text = t || '';
                opts.redraw();
            });
        },
        post(t) {
            text = t;
            doPost();
        }
    };
}
exports.noteCtrl = noteCtrl;
function noteView(ctrl) {
    const text = ctrl.text();
    if (text == undefined)
        return snabbdom_1.h('div.loading', {
            hook: {
                insert: ctrl.fetch
            },
        }, [util_1.spinner()]);
    return snabbdom_1.h('textarea', {
        attrs: {
            placeholder: ctrl.trans('typePrivateNotesHere')
        },
        hook: {
            insert(vnode) {
                const $el = $(vnode.elm);
                $el.val(text).on('change keyup paste', () => {
                    ctrl.post($el.val());
                });
            }
        }
    });
}
exports.noteView = noteView;

},{"./util":126,"./xhr":128,"snabbdom":35}],124:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const util_1 = require("./util");
const groups = {
    start: [
        'hi/Hello', 'gl/Good luck', 'hf/Have fun!', 'u2/You too!'
    ].map(splitIt),
    end: [
        'gg/Good game', 'wp/Well played', 'ty/Thank you', 'gtg/I\'ve got to go', 'bye/Bye!'
    ].map(splitIt)
};
function presetCtrl(opts) {
    let group = opts.initialGroup;
    let said = [];
    return {
        group: () => group,
        said: () => said,
        setGroup(p) {
            if (p !== group) {
                group = p;
                if (!p)
                    said = [];
                opts.redraw();
            }
        },
        post(preset) {
            if (!group)
                return;
            const sets = groups[group];
            if (!sets)
                return;
            if (said.includes(preset.key))
                return;
            opts.post(preset.text);
            said.push(preset.key);
        }
    };
}
exports.presetCtrl = presetCtrl;
function presetView(ctrl) {
    const group = ctrl.group();
    if (!group)
        return;
    const sets = groups[group];
    const said = ctrl.said();
    return (sets && said.length < 2) ? snabbdom_1.h('div.mchat__presets', sets.map((p) => {
        const disabled = said.includes(p.key);
        return snabbdom_1.h('span', {
            class: {
                disabled
            },
            attrs: {
                title: p.text,
                disabled
            },
            hook: util_1.bind('click', () => { !disabled && ctrl.post(p); })
        }, p.key);
    })) : undefined;
}
exports.presetView = presetView;
function splitIt(s) {
    const parts = s.split('/');
    return {
        key: parts[0],
        text: parts[1]
    };
}

},{"./util":126,"snabbdom":35}],125:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function skip(txt) {
    return analyse(txt) && window.lichess.storage.get('chat-spam') != '1';
}
exports.skip = skip;
function hasTeamUrl(txt) {
    return !!txt.match(teamUrlRegex);
}
exports.hasTeamUrl = hasTeamUrl;
function report(txt) {
    if (analyse(txt)) {
        $.post('/jslog/' + window.location.href.substr(-12) + '?n=spam');
        window.lichess.storage.set('chat-spam', '1');
    }
}
exports.report = report;
const spamRegex = new RegExp([
    'xcamweb.com',
    '(^|[^i])chess-bot',
    'chess-cheat',
    'coolteenbitch',
    'letcafa.webcam',
    'tinyurl.com/',
    'wooga.info/',
    'bit.ly/',
    'wbt.link/',
    'eb.by/',
    '001.rs/',
    'shr.name/',
    'u.to/',
    '.3-a.net',
    '.ssl443.org',
    '.ns02.us',
    '.myftp.info',
    '.flinkup.com',
    '.serveusers.com',
    'badoogirls.com',
    'hide.su',
    'wyon.de',
    'sexdatingcz.club'
].map(url => {
    return url.replace(/\./g, '\\.').replace(/\//g, '\\/');
}).join('|'));
function analyse(txt) {
    return !!txt.match(spamRegex);
}
const teamUrlRegex = /lichess\.org\/team\//;

},{}],126:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
function userLink(u, title) {
    const trunc = u.substring(0, 14);
    return snabbdom_1.h('a', {
        // can't be inlined because of thunks
        class: {
            'user-link': true,
            ulpt: true
        },
        attrs: {
            href: '/@/' + u
        }
    }, title ? [
        snabbdom_1.h('span.title', title == 'BOT' ? { attrs: { 'data-bot': true } } : {}, title), trunc
    ] : [trunc]);
}
exports.userLink = userLink;
function spinner() {
    return snabbdom_1.h('div.spinner', [
        snabbdom_1.h('svg', { attrs: { viewBox: '0 0 40 40' } }, [
            snabbdom_1.h('circle', {
                attrs: { cx: 20, cy: 20, r: 18, fill: 'none' }
            })
        ])
    ]);
}
exports.spinner = spinner;
function bind(eventName, f) {
    return {
        insert: (vnode) => {
            vnode.elm.addEventListener(eventName, f);
        }
    };
}
exports.bind = bind;

},{"snabbdom":35}],127:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const snabbdom_1 = require("snabbdom");
const discussion_1 = require("./discussion");
const note_1 = require("./note");
const moderation_1 = require("./moderation");
const util_1 = require("./util");
function default_1(ctrl) {
    const mod = ctrl.moderation();
    return snabbdom_1.h('section.mchat' + (ctrl.opts.alwaysEnabled ? '' : '.mchat-optional'), {
        class: {
            'mchat-mod': !!mod
        },
        hook: {
            destroy: ctrl.destroy
        }
    }, moderation_1.moderationView(mod) || normalView(ctrl));
}
exports.default = default_1;
function renderPalantir(ctrl) {
    const p = ctrl.palantir;
    if (!p.enabled())
        return;
    return p.instance ? p.instance.render(snabbdom_1.h) : snabbdom_1.h('div.mchat__tab.palantir.palantir-slot', {
        attrs: {
            'data-icon': '',
            title: 'Voice chat'
        },
        hook: util_1.bind('click', () => {
            if (!p.loaded) {
                p.loaded = true;
                const li = window.lichess;
                li.loadScript('javascripts/vendor/peerjs.min.js').then(() => {
                    li.loadScript(li.compiledScript('palantir')).then(() => {
                        p.instance = window.Palantir.palantir({
                            uid: ctrl.data.userId,
                            redraw: ctrl.redraw
                        });
                        ctrl.redraw();
                    });
                });
            }
        })
    });
}
function normalView(ctrl) {
    const active = ctrl.vm.tab;
    return [
        snabbdom_1.h('div.mchat__tabs.nb_' + ctrl.allTabs.length, [
            ...ctrl.allTabs.map(t => renderTab(ctrl, t, active)),
            renderPalantir(ctrl)
        ]),
        snabbdom_1.h('div.mchat__content.' + active, (active === 'note' && ctrl.note) ? [note_1.noteView(ctrl.note)] : (ctrl.plugin && active === ctrl.plugin.tab.key ? [ctrl.plugin.view()] : discussion_1.default(ctrl)))
    ];
}
function renderTab(ctrl, tab, active) {
    return snabbdom_1.h('div.mchat__tab.' + tab, {
        class: { 'mchat__tab-active': tab === active },
        hook: util_1.bind('click', () => ctrl.setTab(tab))
    }, tabName(ctrl, tab));
}
function tabName(ctrl, tab) {
    if (tab === 'discussion')
        return [
            snabbdom_1.h('span', ctrl.data.name),
            ctrl.opts.alwaysEnabled ? undefined : snabbdom_1.h('input', {
                attrs: {
                    type: 'checkbox',
                    title: ctrl.trans.noarg('toggleTheChat'),
                    checked: ctrl.vm.enabled
                },
                hook: util_1.bind('change', (e) => {
                    ctrl.setEnabled(e.target.checked);
                })
            })
        ];
    if (tab === 'note')
        return [snabbdom_1.h('span', ctrl.trans.noarg('notes'))];
    if (ctrl.plugin && tab === ctrl.plugin.tab.key)
        return [snabbdom_1.h('span', ctrl.plugin.tab.name)];
    return [];
}

},{"./discussion":119,"./moderation":122,"./note":123,"./util":126,"snabbdom":35}],128:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function userModInfo(username) {
    return $.get('/mod/chat-user/' + username);
}
exports.userModInfo = userModInfo;
function flag(resource, username, text) {
    return $.post('/report/flag', { username, resource, text });
}
exports.flag = flag;
function getNote(id) {
    return $.get(noteUrl(id));
}
exports.getNote = getNote;
function setNote(id, text) {
    return $.post(noteUrl(id), { text });
}
exports.setNote = setNote;
function noteUrl(id) {
    return `/${id}/note`;
}

},{}],129:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const piotr_1 = require("./piotr");
exports.piotr = piotr_1.default;
exports.initialFen = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';
function fixCrazySan(san) {
    return san[0] === 'P' ? san.slice(1) : san;
}
exports.fixCrazySan = fixCrazySan;
function decomposeUci(uci) {
    return [uci.slice(0, 2), uci.slice(2, 4), uci.slice(4, 5)];
}
exports.decomposeUci = decomposeUci;
function renderEval(e) {
    e = Math.max(Math.min(Math.round(e / 10) / 10, 99), -99);
    return (e > 0 ? '+' : '') + e;
}
exports.renderEval = renderEval;
function readDests(lines) {
    if (typeof lines === 'undefined')
        return null;
    const dests = {};
    if (lines)
        lines.split(' ').forEach(line => {
            dests[piotr_1.default[line[0]]] = line.slice(1).split('').map(c => piotr_1.default[c]);
        });
    return dests;
}
exports.readDests = readDests;
function readDrops(line) {
    if (typeof line === 'undefined' || line === null)
        return null;
    return line.match(/.{2}/g) || [];
}
exports.readDrops = readDrops;
exports.roleToSan = {
    pawn: 'P',
    knight: 'N',
    bishop: 'B',
    rook: 'R',
    queen: 'Q',
    king: 'K'
};
exports.sanToRole = {
    P: 'pawn',
    N: 'knight',
    B: 'bishop',
    R: 'rook',
    Q: 'queen',
    K: 'king'
};
function variantToRules(variant) {
    switch (variant) {
        case 'standard':
        case 'chess960':
        case 'fromPosition':
            return 'chess';
        case 'threeCheck':
            return '3check';
        case 'kingOfTheHill':
            return 'kingofthehill';
        case 'racingKings':
            return 'racingkings';
        default:
            return variant;
    }
}
exports.variantToRules = variantToRules;

},{"./piotr":130}],130:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const piotr = {
    'a': 'a1',
    'b': 'b1',
    'c': 'c1',
    'd': 'd1',
    'e': 'e1',
    'f': 'f1',
    'g': 'g1',
    'h': 'h1',
    'i': 'a2',
    'j': 'b2',
    'k': 'c2',
    'l': 'd2',
    'm': 'e2',
    'n': 'f2',
    'o': 'g2',
    'p': 'h2',
    'q': 'a3',
    'r': 'b3',
    's': 'c3',
    't': 'd3',
    'u': 'e3',
    'v': 'f3',
    'w': 'g3',
    'x': 'h3',
    'y': 'a4',
    'z': 'b4',
    'A': 'c4',
    'B': 'd4',
    'C': 'e4',
    'D': 'f4',
    'E': 'g4',
    'F': 'h4',
    'G': 'a5',
    'H': 'b5',
    'I': 'c5',
    'J': 'd5',
    'K': 'e5',
    'L': 'f5',
    'M': 'g5',
    'N': 'h5',
    'O': 'a6',
    'P': 'b6',
    'Q': 'c6',
    'R': 'd6',
    'S': 'e6',
    'T': 'f6',
    'U': 'g6',
    'V': 'h6',
    'W': 'a7',
    'X': 'b7',
    'Y': 'c7',
    'Z': 'd7',
    '0': 'e7',
    '1': 'f7',
    '2': 'g7',
    '3': 'h7',
    '4': 'a8',
    '5': 'b8',
    '6': 'c8',
    '7': 'd8',
    '8': 'e8',
    '9': 'f8',
    '!': 'g8',
    '?': 'h8'
};
exports.default = piotr;

},{}],131:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function defined(v) {
    return typeof v !== 'undefined';
}
exports.defined = defined;
function empty(a) {
    return !a || a.length === 0;
}
exports.empty = empty;
// like mithril prop but with type safety
function prop(initialValue) {
    let value = initialValue;
    const fun = function (v) {
        if (defined(v))
            value = v;
        return value;
    };
    return fun;
}
exports.prop = prop;

},{}],132:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const throttle_1 = require("./throttle");
function runner(hacks, throttleMs = 100) {
    let timeout;
    const runHacks = throttle_1.default(throttleMs, () => {
        window.lichess.raf(() => {
            hacks();
            schedule();
        });
    });
    function schedule() {
        timeout && clearTimeout(timeout);
        timeout = setTimeout(runHacks, 500);
    }
    runHacks();
}
exports.runner = runner;
let lastMainBoardHeight;
// Firefox 60- needs this to properly compute the grid layout.
function fixMainBoardHeight(container) {
    const mainBoard = container.querySelector('.main-board'), width = mainBoard.offsetWidth;
    if (lastMainBoardHeight != width) {
        lastMainBoardHeight = width;
        mainBoard.style.height = width + 'px';
        mainBoard.querySelector('.cg-wrap').style.height = width + 'px';
        window.lichess.dispatchEvent(document.body, 'chessground.resize');
    }
}
exports.fixMainBoardHeight = fixMainBoardHeight;
let boundChessgroundResize = false;
function bindChessgroundResizeOnce(f) {
    if (!boundChessgroundResize) {
        boundChessgroundResize = true;
        document.body.addEventListener('chessground.resize', f);
    }
}
exports.bindChessgroundResizeOnce = bindChessgroundResizeOnce;
function needsBoardHeightFix() {
    // Chrome, Chromium, Brave, Opera, Safari 12+ are OK
    if (window.chrome)
        return false;
    // Firefox >= 61 is OK
    const ffv = navigator.userAgent.split('Firefox/');
    return !ffv[1] || parseInt(ffv[1]) < 61;
}
exports.needsBoardHeightFix = needsBoardHeightFix;

},{"./throttle":137}],133:[function(require,module,exports){
"use strict";
/* Based on: */
/*!
 * hoverIntent v1.10.0 // 2019.02.25 // jQuery v1.7.0+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007-2019 Brian Cherne
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.menuHover = () => window.lichess.raf(function () {
    if (window.lichess.hasTouchEvents)
        return;
    let interval = 100;
    let sensitivity = 10;
    // current X and Y position of mouse, updated during mousemove tracking (shared across instances)
    let cX, cY;
    // saves the current pointer position coordinates based on the given mousemove event
    let track = function (ev) {
        cX = ev.pageX;
        cY = ev.pageY;
    };
    // state properties:
    // timeoutId = timeout ID, reused for tracking mouse position and delaying "out" handler
    // isActive = plugin state, true after `over` is called just until `out` is called
    // pX, pY = previously-measured pointer coordinates, updated at each polling interval
    // event = string representing the namespaced event used for mouse tracking
    let state = {};
    $('#topnav.hover').each(function () {
        const $el = $(this).removeClass('hover'), handler = () => $el.toggleClass('hover');
        // compares current and previous mouse positions
        const compare = function () {
            // compare mouse positions to see if pointer has slowed enough to trigger `over` function
            if (Math.sqrt((state.pX - cX) * (state.pX - cX) + (state.pY - cY) * (state.pY - cY)) < sensitivity) {
                $el.off(state.event, track);
                delete state.timeoutId;
                // set hoverIntent state as active for this element (permits `out` handler to trigger)
                state.isActive = true;
                handler();
            }
            else {
                // set previous coordinates for next comparison
                state.pX = cX;
                state.pY = cY;
                // use self-calling timeout, guarantees intervals are spaced out properly (avoids JavaScript timer bugs)
                state.timeoutId = setTimeout(compare, interval);
            }
        };
        // A private function for handling mouse 'hovering'
        var handleHover = function (ev) {
            // clear any existing timeout
            if (state.timeoutId) {
                state.timeoutId = clearTimeout(state.timeoutId);
            }
            // namespaced event used to register and unregister mousemove tracking
            var mousemove = state.event = 'mousemove';
            // handle the event, based on its type
            if (ev.type == 'mouseenter') {
                // do nothing if already active or a button is pressed (dragging a piece)
                if (state.isActive || ev.originalEvent.buttons)
                    return;
                // set "previous" X and Y position based on initial entry point
                state.pX = ev.pageX;
                state.pY = ev.pageY;
                // update "current" X and Y position based on mousemove
                $el.off(mousemove, track).on(mousemove, track);
                // start polling interval (self-calling timeout) to compare mouse coordinates over time
                state.timeoutId = setTimeout(compare, interval);
            }
            else { // "mouseleave"
                // do nothing if not already active
                if (!state.isActive)
                    return;
                // unbind expensive mousemove event
                $el.off(mousemove, track);
                // if hoverIntent state is true, then call the mouseOut function after the specified delay
                state = {};
                handler();
            }
        };
        $el.on('mouseenter', handleHover).on('mouseleave', handleHover);
    });
});

},{}],134:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function resizeHandle(els, pref, ply, visible) {
    if (!pref)
        return;
    const el = document.createElement('cg-resize');
    els.container.appendChild(el);
    const startResize = (start) => {
        start.preventDefault();
        const mousemoveEvent = start.type === 'touchstart' ? 'touchmove' : 'mousemove';
        const mouseupEvent = start.type === 'touchstart' ? 'touchend' : 'mouseup';
        const startPos = eventPosition(start);
        const initialZoom = parseInt(getComputedStyle(document.body).getPropertyValue('--zoom'));
        let zoom = initialZoom;
        const saveZoom = window.lichess.debounce(() => {
            $.ajax({ method: 'post', url: '/pref/zoom?v=' + (100 + zoom) });
        }, 700);
        const resize = (move) => {
            const pos = eventPosition(move);
            const delta = pos[0] - startPos[0] + pos[1] - startPos[1];
            zoom = Math.round(Math.min(100, Math.max(0, initialZoom + delta / 10)));
            document.body.setAttribute('style', '--zoom:' + zoom);
            window.lichess.dispatchEvent(window, 'resize');
            saveZoom();
        };
        document.body.classList.add('resizing');
        document.addEventListener(mousemoveEvent, resize);
        document.addEventListener(mouseupEvent, () => {
            document.removeEventListener(mousemoveEvent, resize);
            document.body.classList.remove('resizing');
        }, { once: true });
    };
    el.addEventListener('touchstart', startResize);
    el.addEventListener('mousedown', startResize);
    if (pref == 1) {
        const toggle = (ply) => el.classList.toggle('none', visible ? !visible(ply) : ply >= 2);
        toggle(ply);
        window.lichess.pubsub.on('ply', toggle);
    }
    addNag(el);
}
exports.default = resizeHandle;
function eventPosition(e) {
    if (e.clientX || e.clientX === 0)
        return [e.clientX, e.clientY];
    if (e.touches && e.targetTouches[0])
        return [e.targetTouches[0].clientX, e.targetTouches[0].clientY];
    return undefined;
}
function addNag(el) {
    const storage = window.lichess.storage.makeBoolean('resize-nag');
    if (storage.get())
        return;
    window.lichess.loadCssPath('nag-circle');
    el.title = 'Drag to resize';
    el.innerHTML = '<div class="nag-circle"></div>';
    for (const mousedownEvent of ['touchstart', 'mousedown']) {
        el.addEventListener(mousedownEvent, () => {
            storage.set(true);
            el.innerHTML = '';
        }, { once: true });
    }
    setTimeout(() => storage.set(true), 15000);
}

},{}],135:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("./common");
const storage = window.lichess.storage;
function storedProp(k, defaultValue) {
    const sk = 'analyse.' + k;
    const isBoolean = defaultValue === true || defaultValue === false;
    let value;
    return function (v) {
        if (common_1.defined(v) && v != value) {
            value = v + '';
            storage.set(sk, v);
        }
        else if (!common_1.defined(value)) {
            value = storage.get(sk);
            if (value === null)
                value = defaultValue + '';
        }
        return isBoolean ? value === 'true' : value;
    };
}
exports.storedProp = storedProp;
function storedJsonProp(key, defaultValue) {
    return function (v) {
        if (common_1.defined(v)) {
            storage.set(key, JSON.stringify(v));
            return v;
        }
        const ret = JSON.parse(storage.get(key));
        return (ret !== null) ? ret : defaultValue;
    };
}
exports.storedJsonProp = storedJsonProp;

},{"./common":131}],136:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function sync(promise) {
    const sync = {
        sync: undefined,
        promise: promise.then(v => {
            sync.sync = v;
            return v;
        })
    };
    return sync;
}
exports.sync = sync;

},{}],137:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Ensures calls to the wrapped function are spaced by the given delay.
// Any extra calls are dropped, except the last one.
function throttle(delay, callback) {
    let timer;
    let lastExec = 0;
    return function (...args) {
        const self = this;
        const elapsed = performance.now() - lastExec;
        function exec() {
            timer = undefined;
            lastExec = performance.now();
            callback.apply(self, args);
        }
        if (timer)
            clearTimeout(timer);
        if (elapsed > delay)
            exec();
        else
            timer = setTimeout(exec, delay - elapsed);
    };
}
exports.default = throttle;

},{}],138:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const status = require("./status");
function playable(data) {
    return data.game.status.id < status.ids.aborted && !imported(data);
}
exports.playable = playable;
function isPlayerPlaying(data) {
    return playable(data) && !data.player.spectator;
}
exports.isPlayerPlaying = isPlayerPlaying;
function isPlayerTurn(data) {
    return isPlayerPlaying(data) && data.game.player == data.player.color;
}
exports.isPlayerTurn = isPlayerTurn;
function isFriendGame(data) {
    return data.game.source === 'friend';
}
exports.isFriendGame = isFriendGame;
function isClassical(data) {
    return data.game.perf === 'classical';
}
exports.isClassical = isClassical;
function mandatory(data) {
    return !!data.tournament || !!data.simul;
}
exports.mandatory = mandatory;
function playedTurns(data) {
    return data.game.turns - (data.game.startedAtTurn || 0);
}
exports.playedTurns = playedTurns;
function bothPlayersHavePlayed(data) {
    return playedTurns(data) > 1;
}
exports.bothPlayersHavePlayed = bothPlayersHavePlayed;
function abortable(data) {
    return playable(data) && !bothPlayersHavePlayed(data) && !mandatory(data);
}
exports.abortable = abortable;
function takebackable(data) {
    return playable(data) &&
        data.takebackable &&
        bothPlayersHavePlayed(data) &&
        !data.player.proposingTakeback &&
        !data.opponent.proposingTakeback;
}
exports.takebackable = takebackable;
function drawable(data) {
    return playable(data) &&
        data.game.turns >= 2 &&
        !data.player.offeringDraw &&
        !hasAi(data);
}
exports.drawable = drawable;
function resignable(data) {
    return playable(data) && !abortable(data);
}
exports.resignable = resignable;
// can the current player go berserk?
function berserkableBy(data) {
    return !!data.tournament &&
        data.tournament.berserkable &&
        isPlayerPlaying(data) &&
        !bothPlayersHavePlayed(data);
}
exports.berserkableBy = berserkableBy;
function moretimeable(data) {
    return isPlayerPlaying(data) && data.moretimeable && (!!data.clock ||
        (!!data.correspondence &&
            data.correspondence[data.opponent.color] < (data.correspondence.increment - 3600)));
}
exports.moretimeable = moretimeable;
function imported(data) {
    return data.game.source === 'import';
}
exports.imported = imported;
function replayable(data) {
    return imported(data) || status.finished(data) ||
        (status.aborted(data) && bothPlayersHavePlayed(data));
}
exports.replayable = replayable;
function getPlayer(data, color) {
    if (data.player.color === color)
        return data.player;
    if (data.opponent.color === color)
        return data.opponent;
    return null;
}
exports.getPlayer = getPlayer;
function hasAi(data) {
    return !!(data.player.ai || data.opponent.ai);
}
exports.hasAi = hasAi;
function userAnalysable(data) {
    return status.finished(data) || playable(data) && (!data.clock || !isPlayerPlaying(data));
}
exports.userAnalysable = userAnalysable;
function isCorrespondence(data) {
    return data.game.speed === 'correspondence';
}
exports.isCorrespondence = isCorrespondence;
function setOnGame(data, color, onGame) {
    const player = getPlayer(data, color);
    onGame = onGame || !!player.ai;
    player.onGame = onGame;
    if (onGame)
        setGone(data, color, false);
}
exports.setOnGame = setOnGame;
function setGone(data, color, gone) {
    const player = getPlayer(data, color);
    player.gone = !player.ai && gone;
    if (player.gone === false && player.user)
        player.user.online = true;
}
exports.setGone = setGone;
function nbMoves(data, color) {
    return Math.floor((data.game.turns + (color == 'white' ? 1 : 0)) / 2);
}
exports.nbMoves = nbMoves;
function isSwitchable(data) {
    return !hasAi(data) && (!!data.simul || isCorrespondence(data));
}
exports.isSwitchable = isSwitchable;

},{"./status":140}],139:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function game(data, color, embed) {
    const id = data.game ? data.game.id : data;
    return (embed ? '/embed/' : '/') + id + (color ? '/' + color : '');
}
exports.game = game;
function cont(data, mode) {
    return game(data) + '/continue/' + mode;
}
exports.cont = cont;

},{}],140:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// https://github.com/ornicar/scalachess/blob/master/src/main/scala/Status.scala
exports.ids = {
    created: 10,
    started: 20,
    aborted: 25,
    mate: 30,
    resign: 31,
    stalemate: 32,
    timeout: 33,
    draw: 34,
    outoftime: 35,
    cheat: 36,
    noStart: 37,
    variantEnd: 60
};
function started(data) {
    return data.game.status.id >= exports.ids.started;
}
exports.started = started;
function finished(data) {
    return data.game.status.id >= exports.ids.mate;
}
exports.finished = finished;
function aborted(data) {
    return data.game.status.id === exports.ids.aborted;
}
exports.aborted = aborted;
function playing(data) {
    return started(data) && !finished(data) && !aborted(data);
}
exports.playing = playing;

},{}],141:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function status(ctrl) {
    const noarg = ctrl.trans.noarg, d = ctrl.data;
    switch (d.game.status.name) {
        case 'started':
            return noarg('playingRightNow');
        case 'aborted':
            return noarg('gameAborted');
        case 'mate':
            return noarg('checkmate');
        case 'resign':
            return noarg(d.game.winner == 'white' ? 'blackResigned' : 'whiteResigned');
        case 'stalemate':
            return noarg('stalemate');
        case 'timeout':
            switch (d.game.winner) {
                case 'white':
                    return noarg('blackLeftTheGame');
                case 'black':
                    return noarg('whiteLeftTheGame');
            }
            return noarg('draw');
        case 'draw':
            return noarg('draw');
        case 'outoftime':
            return noarg('timeOut');
        case 'noStart':
            return (d.game.winner == 'white' ? 'Black' : 'White') + ' didn\'t move';
        case 'cheat':
            return 'Cheat detected';
        case 'variantEnd':
            switch (d.game.variant.key) {
                case 'kingOfTheHill':
                    return noarg('kingInTheCenter');
                case 'threeCheck':
                    return noarg('threeChecks');
            }
            return noarg('variantEnding');
        default:
            return d.game.status.name;
    }
}
exports.default = status;

},{}],142:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tree_1 = require("./tree");
exports.build = tree_1.build;
const path = require("./path");
exports.path = path;
const ops = require("./ops");
exports.ops = ops;

},{"./ops":143,"./path":144,"./tree":145}],143:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function withMainlineChild(node, f) {
    const next = node.children[0];
    return next ? f(next) : undefined;
}
exports.withMainlineChild = withMainlineChild;
function findInMainline(fromNode, predicate) {
    const findFrom = function (node) {
        if (predicate(node))
            return node;
        return withMainlineChild(node, findFrom);
    };
    return findFrom(fromNode);
}
exports.findInMainline = findInMainline;
// returns a list of nodes collected from the original one
function collect(from, pickChild) {
    let nodes = [from], n = from, c;
    while (c = pickChild(n)) {
        nodes.push(c);
        n = c;
    }
    return nodes;
}
exports.collect = collect;
function pickFirstChild(node) {
    return node.children[0];
}
function childById(node, id) {
    return node.children.find(child => child.id === id);
}
exports.childById = childById;
function last(nodeList) {
    return nodeList[nodeList.length - 1];
}
exports.last = last;
function nodeAtPly(nodeList, ply) {
    return nodeList.find(node => node.ply === ply);
}
exports.nodeAtPly = nodeAtPly;
function takePathWhile(nodeList, predicate) {
    let path = '';
    for (let i in nodeList) {
        if (predicate(nodeList[i]))
            path += nodeList[i].id;
        else
            break;
    }
    return path;
}
exports.takePathWhile = takePathWhile;
function removeChild(parent, id) {
    parent.children = parent.children.filter(function (n) {
        return n.id !== id;
    });
}
exports.removeChild = removeChild;
function countChildrenAndComments(node) {
    const count = {
        nodes: 1,
        comments: (node.comments || []).length
    };
    node.children.forEach(function (child) {
        const c = countChildrenAndComments(child);
        count.nodes += c.nodes;
        count.comments += c.comments;
    });
    return count;
}
exports.countChildrenAndComments = countChildrenAndComments;
function reconstruct(parts) {
    const root = parts[0], nb = parts.length;
    let node = root, i;
    root.id = '';
    for (i = 1; i < nb; i++) {
        const n = parts[i];
        if (node.children)
            node.children.unshift(n);
        else
            node.children = [n];
        node = n;
    }
    node.children = node.children || [];
    return root;
}
exports.reconstruct = reconstruct;
// adds n2 into n1
function merge(n1, n2) {
    n1.eval = n2.eval;
    if (n2.glyphs)
        n1.glyphs = n2.glyphs;
    n2.comments && n2.comments.forEach(function (c) {
        if (!n1.comments)
            n1.comments = [c];
        else if (!n1.comments.filter(function (d) {
            return d.text === c.text;
        }).length)
            n1.comments.push(c);
    });
    n2.children.forEach(function (c) {
        const existing = childById(n1, c.id);
        if (existing)
            merge(existing, c);
        else
            n1.children.push(c);
    });
}
exports.merge = merge;
function hasBranching(node, maxDepth) {
    return maxDepth <= 0 || !!node.children[1] || (node.children[0] && hasBranching(node.children[0], maxDepth - 1));
}
exports.hasBranching = hasBranching;
function mainlineNodeList(from) {
    return collect(from, pickFirstChild);
}
exports.mainlineNodeList = mainlineNodeList;
function updateAll(root, f) {
    // applies f recursively to all nodes
    function update(node) {
        f(node);
        node.children.forEach(update);
    }
    ;
    update(root);
}
exports.updateAll = updateAll;

},{}],144:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.root = '';
function size(path) {
    return path.length / 2;
}
exports.size = size;
function head(path) {
    return path.slice(0, 2);
}
exports.head = head;
function tail(path) {
    return path.slice(2);
}
exports.tail = tail;
function init(path) {
    return path.slice(0, -2);
}
exports.init = init;
function last(path) {
    return path.slice(-2);
}
exports.last = last;
function contains(p1, p2) {
    return p1.startsWith(p2);
}
exports.contains = contains;
function fromNodeList(nodes) {
    var path = '';
    for (var i in nodes)
        path += nodes[i].id;
    return path;
}
exports.fromNodeList = fromNodeList;
function isChildOf(child, parent) {
    return !!child && child.slice(0, -2) === parent;
}
exports.isChildOf = isChildOf;

},{}],145:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const treePath = require("./path");
const ops = require("./ops");
const common_1 = require("common");
function build(root) {
    function lastNode() {
        return ops.findInMainline(root, function (node) {
            return !node.children.length;
        });
    }
    function nodeAtPath(path) {
        return nodeAtPathFrom(root, path);
    }
    function nodeAtPathFrom(node, path) {
        if (path === '')
            return node;
        const child = ops.childById(node, treePath.head(path));
        return child ? nodeAtPathFrom(child, treePath.tail(path)) : node;
    }
    function nodeAtPathOrNull(path) {
        return nodeAtPathOrNullFrom(root, path);
    }
    function nodeAtPathOrNullFrom(node, path) {
        if (path === '')
            return node;
        const child = ops.childById(node, treePath.head(path));
        return child ? nodeAtPathOrNullFrom(child, treePath.tail(path)) : undefined;
    }
    function longestValidPathFrom(node, path) {
        var id = treePath.head(path);
        const child = ops.childById(node, id);
        return child ? id + longestValidPathFrom(child, treePath.tail(path)) : '';
    }
    function getCurrentNodesAfterPly(nodeList, mainline, ply) {
        var node, nodes = [];
        for (var i in nodeList) {
            node = nodeList[i];
            if (node.ply <= ply && mainline[i].id !== node.id)
                break;
            if (node.ply > ply)
                nodes.push(node);
        }
        return nodes;
    }
    ;
    function pathIsMainline(path) {
        return pathIsMainlineFrom(root, path);
    }
    function pathExists(path) {
        return !!nodeAtPathOrNull(path);
    }
    function pathIsMainlineFrom(node, path) {
        if (path === '')
            return true;
        const pathId = treePath.head(path), child = node.children[0];
        if (!child || child.id !== pathId)
            return false;
        return pathIsMainlineFrom(child, treePath.tail(path));
    }
    function pathIsForcedVariation(path) {
        return !!getNodeList(path).find(n => n.forceVariation);
    }
    function lastMainlineNodeFrom(node, path) {
        if (path === '')
            return node;
        const pathId = treePath.head(path);
        const child = node.children[0];
        if (!child || child.id !== pathId)
            return node;
        return lastMainlineNodeFrom(child, treePath.tail(path));
    }
    function getNodeList(path) {
        return ops.collect(root, function (node) {
            const id = treePath.head(path);
            if (id === '')
                return;
            path = treePath.tail(path);
            return ops.childById(node, id);
        });
    }
    function getOpening(nodeList) {
        var opening;
        nodeList.forEach(function (node) {
            opening = node.opening || opening;
        });
        return opening;
    }
    function updateAt(path, update) {
        const node = nodeAtPathOrNull(path);
        if (node) {
            update(node);
            return node;
        }
        return;
    }
    // returns new path
    function addNode(node, path) {
        const newPath = path + node.id, existing = nodeAtPathOrNull(newPath);
        if (existing) {
            ['dests', 'drops', 'clock'].forEach(key => {
                if (common_1.defined(node[key]) && !common_1.defined(existing[key]))
                    existing[key] = node[key];
            });
            return newPath;
        }
        return updateAt(path, function (parent) {
            parent.children.push(node);
        }) ? newPath : undefined;
    }
    function addNodes(nodes, path) {
        var node = nodes[0];
        if (!node)
            return path;
        const newPath = addNode(node, path);
        return newPath ? addNodes(nodes.slice(1), newPath) : undefined;
    }
    function deleteNodeAt(path) {
        ops.removeChild(parentNode(path), treePath.last(path));
    }
    function promoteAt(path, toMainline) {
        var nodes = getNodeList(path);
        for (var i = nodes.length - 2; i >= 0; i--) {
            var node = nodes[i + 1];
            var parent = nodes[i];
            if (parent.children[0].id !== node.id) {
                ops.removeChild(parent, node.id);
                parent.children.unshift(node);
                if (!toMainline)
                    break;
            }
            else if (node.forceVariation) {
                node.forceVariation = false;
                if (!toMainline)
                    break;
            }
        }
    }
    function setCommentAt(comment, path) {
        return !comment.text ? deleteCommentAt(comment.id, path) : updateAt(path, function (node) {
            node.comments = node.comments || [];
            const existing = node.comments.find(function (c) {
                return c.id === comment.id;
            });
            if (existing)
                existing.text = comment.text;
            else
                node.comments.push(comment);
        });
    }
    function deleteCommentAt(id, path) {
        return updateAt(path, function (node) {
            var comments = (node.comments || []).filter(function (c) {
                return c.id !== id;
            });
            node.comments = comments.length ? comments : undefined;
        });
    }
    function setGlyphsAt(glyphs, path) {
        return updateAt(path, function (node) {
            node.glyphs = glyphs;
        });
    }
    function parentNode(path) {
        return nodeAtPath(treePath.init(path));
    }
    function getParentClock(node, path) {
        if (!('parentClock' in node)) {
            const par = path && parentNode(path);
            if (!par)
                node.parentClock = node.clock;
            else if (!('clock' in par))
                node.parentClock = undefined;
            else
                node.parentClock = par.clock;
        }
        return node.parentClock;
    }
    return {
        root,
        lastPly() {
            return lastNode().ply;
        },
        nodeAtPath,
        getNodeList,
        longestValidPath: (path) => longestValidPathFrom(root, path),
        getOpening,
        updateAt,
        addNode,
        addNodes,
        addDests(dests, path, opening) {
            return updateAt(path, function (node) {
                node.dests = dests;
                if (opening)
                    node.opening = opening;
            });
        },
        setShapes(shapes, path) {
            return updateAt(path, function (node) {
                node.shapes = shapes;
            });
        },
        setCommentAt,
        deleteCommentAt,
        setGlyphsAt,
        setClockAt(clock, path) {
            return updateAt(path, function (node) {
                node.clock = clock;
            });
        },
        pathIsMainline,
        pathIsForcedVariation,
        lastMainlineNode(path) {
            return lastMainlineNodeFrom(root, path);
        },
        pathExists,
        deleteNodeAt,
        promoteAt,
        forceVariationAt(path, force) {
            return updateAt(path, function (node) {
                node.forceVariation = force;
            });
        },
        getCurrentNodesAfterPly,
        merge(tree) {
            ops.merge(root, tree);
        },
        removeCeval() {
            ops.updateAll(root, function (n) {
                delete n.ceval;
                delete n.threat;
            });
        },
        removeComputerVariations() {
            ops.mainlineNodeList(root).forEach(function (n) {
                n.children = n.children.filter(function (c) {
                    return !c.comp;
                });
            });
        },
        parentNode,
        getParentClock
    };
}
exports.build = build;

},{"./ops":143,"./path":144,"common":131}]},{},[62])(62)
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQGJhZHJhcC9yZXN1bHQvZGlzdC9pbmRleC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvYW5pbS50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvYXBpLnRzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzZ3JvdW5kL3NyYy9ib2FyZC50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvY2hlc3Nncm91bmQudHMiLCIuLi8uLi9ub2RlX21vZHVsZXMvY2hlc3Nncm91bmQvc3JjL2NvbmZpZy50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvZHJhZy50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvZHJhdy50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvZHJvcC50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvZXZlbnRzLnRzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzZ3JvdW5kL3NyYy9leHBsb3Npb24udHMiLCIuLi8uLi9ub2RlX21vZHVsZXMvY2hlc3Nncm91bmQvc3JjL2Zlbi50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvcHJlbW92ZS50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvcmVuZGVyLnRzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzZ3JvdW5kL3NyYy9zdGF0ZS50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvc3ZnLnRzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzZ3JvdW5kL3NyYy90eXBlcy50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvdXRpbC50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc2dyb3VuZC9zcmMvd3JhcC50cyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc29wcy9hdHRhY2tzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzb3BzL2JvYXJkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzb3BzL2NoZXNzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzb3BzL2Zlbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9jaGVzc29wcy9zYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvY2hlc3NvcHMvc2V0dXAuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvY2hlc3NvcHMvc3F1YXJlU2V0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzb3BzL3R5cGVzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2NoZXNzb3BzL3V0aWwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvY2hlc3NvcHMvdmFyaWFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9zbmFiYmRvbS9oLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3NuYWJiZG9tL2h0bWxkb21hcGkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc25hYmJkb20vaXMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc25hYmJkb20vbW9kdWxlcy9hdHRyaWJ1dGVzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3NuYWJiZG9tL21vZHVsZXMvY2xhc3MuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc25hYmJkb20vc25hYmJkb20uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc25hYmJkb20vdGh1bmsuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc25hYmJkb20vdm5vZGUuanMiLCJzcmMvYWNwbC50cyIsInNyYy9hY3Rpb25NZW51LnRzIiwic3JjL2F1dG9TaGFwZS50cyIsInNyYy9hdXRvcGxheS50cyIsInNyYy9ib29sU2V0dGluZy50cyIsInNyYy9ib290LnRzIiwic3JjL2Nsb2Nrcy50cyIsInNyYy9jb250cm9sLnRzIiwic3JjL2NyYXp5L2NyYXp5Q3RybC50cyIsInNyYy9jcmF6eS9jcmF6eVZpZXcudHMiLCJzcmMvY3RybC50cyIsInNyYy9ldmFsQ2FjaGUudHMiLCJzcmMvZXhwbG9yZXIvZXhwbG9yZXJDb25maWcudHMiLCJzcmMvZXhwbG9yZXIvZXhwbG9yZXJDdHJsLnRzIiwic3JjL2V4cGxvcmVyL2V4cGxvcmVyVXRpbC50cyIsInNyYy9leHBsb3Jlci9leHBsb3JlclZpZXcudHMiLCJzcmMvZXhwbG9yZXIvZXhwbG9yZXJYaHIudHMiLCJzcmMvZXhwbG9yZXIvaW50ZXJmYWNlcy50cyIsInNyYy9mb3JlY2FzdC9mb3JlY2FzdEN0cmwudHMiLCJzcmMvZm9yZWNhc3QvZm9yZWNhc3RWaWV3LnRzIiwic3JjL2ZvcmsudHMiLCJzcmMvZ3JpZEhhY2tzLnRzIiwic3JjL2dyb3VuZC50cyIsInNyYy9rZXlib2FyZC50cyIsInNyYy9tYWluLnRzIiwic3JjL21vZGFsLnRzIiwic3JjL21vdmVWaWV3LnRzIiwic3JjL25vZGVGaW5kZXIudHMiLCJzcmMvcGduRXhwb3J0LnRzIiwic3JjL3ByYWN0aWNlL3ByYWN0aWNlQ3RybC50cyIsInNyYy9wcmFjdGljZS9wcmFjdGljZVZpZXcudHMiLCJzcmMvcHJvbW90aW9uLnRzIiwic3JjL3JldHJvc3BlY3QvcmV0cm9DdHJsLnRzIiwic3JjL3JldHJvc3BlY3QvcmV0cm9WaWV3LnRzIiwic3JjL3NlcnZlclNpZGVVbmRlcmJvYXJkLnRzIiwic3JjL3NvY2tldC50cyIsInNyYy9zcGVlY2gudHMiLCJzcmMvc3R1ZHkvY2hhcHRlckVkaXRGb3JtLnRzIiwic3JjL3N0dWR5L2NoYXB0ZXJOZXdGb3JtLnRzIiwic3JjL3N0dWR5L2NvbW1lbnRGb3JtLnRzIiwic3JjL3N0dWR5L2Rlc2NyaXB0aW9uLnRzIiwic3JjL3N0dWR5L2dhbWVib29rL2dhbWVib29rQnV0dG9ucy50cyIsInNyYy9zdHVkeS9nYW1lYm9vay9nYW1lYm9va0VkaXQudHMiLCJzcmMvc3R1ZHkvZ2FtZWJvb2svZ2FtZWJvb2tQbGF5Q3RybC50cyIsInNyYy9zdHVkeS9nYW1lYm9vay9nYW1lYm9va1BsYXlWaWV3LnRzIiwic3JjL3N0dWR5L2ludml0ZUZvcm0udHMiLCJzcmMvc3R1ZHkvbXVsdGlCb2FyZC50cyIsInNyYy9zdHVkeS9ub3RpZi50cyIsInNyYy9zdHVkeS9wbGF5ZXJCYXJzLnRzIiwic3JjL3N0dWR5L3ByYWN0aWNlL3NvdW5kLnRzIiwic3JjL3N0dWR5L3ByYWN0aWNlL3N0dWR5UHJhY3RpY2VDdHJsLnRzIiwic3JjL3N0dWR5L3ByYWN0aWNlL3N0dWR5UHJhY3RpY2VTdWNjZXNzLnRzIiwic3JjL3N0dWR5L3ByYWN0aWNlL3N0dWR5UHJhY3RpY2VWaWV3LnRzIiwic3JjL3N0dWR5L3JlbGF5L3JlbGF5Q3RybC50cyIsInNyYy9zdHVkeS9yZWxheS9yZWxheUludHJvVmlldy50cyIsInNyYy9zdHVkeS9yZWxheS9yZWxheU1hbmFnZXJWaWV3LnRzIiwic3JjL3N0dWR5L3NlcnZlckV2YWwudHMiLCJzcmMvc3R1ZHkvc3R1ZHlDaGFwdGVycy50cyIsInNyYy9zdHVkeS9zdHVkeUNvbW1lbnRzLnRzIiwic3JjL3N0dWR5L3N0dWR5Q3RybC50cyIsInNyYy9zdHVkeS9zdHVkeUZvcm0udHMiLCJzcmMvc3R1ZHkvc3R1ZHlHbHlwaC50cyIsInNyYy9zdHVkeS9zdHVkeU1lbWJlcnMudHMiLCJzcmMvc3R1ZHkvc3R1ZHlTaGFyZS50cyIsInNyYy9zdHVkeS9zdHVkeVRhZ3MudHMiLCJzcmMvc3R1ZHkvc3R1ZHlUb3VyLnRzIiwic3JjL3N0dWR5L3N0dWR5Vmlldy50cyIsInNyYy9zdHVkeS9zdHVkeVhoci50cyIsInNyYy90cmVlVmlldy9jb2x1bW5WaWV3LnRzIiwic3JjL3RyZWVWaWV3L2NvbnRleHRNZW51LnRzIiwic3JjL3RyZWVWaWV3L2lubGluZVZpZXcudHMiLCJzcmMvdHJlZVZpZXcvdHJlZVZpZXcudHMiLCJzcmMvdXRpbC50cyIsInNyYy92aWV3LnRzIiwiLi4vY2V2YWwvc3JjL2N0cmwudHMiLCIuLi9jZXZhbC9zcmMvbWFpbi50cyIsIi4uL2NldmFsL3NyYy9wb29sLnRzIiwiLi4vY2V2YWwvc3JjL3N0b2NrZmlzaFByb3RvY29sLnRzIiwiLi4vY2V2YWwvc3JjL3ZpZXcudHMiLCIuLi9jZXZhbC9zcmMvd2lubmluZ0NoYW5jZXMudHMiLCIuLi9jaGF0L3NyYy9jdHJsLnRzIiwiLi4vY2hhdC9zcmMvZGlzY3Vzc2lvbi50cyIsIi4uL2NoYXQvc3JjL2VuaGFuY2UudHMiLCIuLi9jaGF0L3NyYy9tYWluLnRzIiwiLi4vY2hhdC9zcmMvbW9kZXJhdGlvbi50cyIsIi4uL2NoYXQvc3JjL25vdGUudHMiLCIuLi9jaGF0L3NyYy9wcmVzZXQudHMiLCIuLi9jaGF0L3NyYy9zcGFtLnRzIiwiLi4vY2hhdC9zcmMvdXRpbC50cyIsIi4uL2NoYXQvc3JjL3ZpZXcudHMiLCIuLi9jaGF0L3NyYy94aHIudHMiLCIuLi9jaGVzcy9zcmMvbWFpbi50cyIsIi4uL2NoZXNzL3NyYy9waW90ci50cyIsIi4uL2NvbW1vbi9zcmMvY29tbW9uLnRzIiwiLi4vY29tbW9uL3NyYy9ncmlkSGFja3MudHMiLCIuLi9jb21tb24vc3JjL21lbnVIb3Zlci50cyIsIi4uL2NvbW1vbi9zcmMvcmVzaXplLnRzIiwiLi4vY29tbW9uL3NyYy9zdG9yYWdlLnRzIiwiLi4vY29tbW9uL3NyYy9zeW5jLnRzIiwiLi4vY29tbW9uL3NyYy90aHJvdHRsZS50cyIsIi4uL2dhbWUvc3JjL2dhbWUudHMiLCIuLi9nYW1lL3NyYy9yb3V0ZXIudHMiLCIuLi9nYW1lL3NyYy9zdGF0dXMudHMiLCIuLi9nYW1lL3NyYy92aWV3L3N0YXR1cy50cyIsIi4uL3RyZWUvc3JjL21haW4udHMiLCIuLi90cmVlL3NyYy9vcHMudHMiLCIuLi90cmVlL3NyYy9wYXRoLnRzIiwiLi4vdHJlZS9zcmMvdHJlZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTs7OztBQ0RBLCtCQUE4QjtBQTRC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QUFDO0lBQzFCLE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUVoQyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQTtJQUMvQixLQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNoQyxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFFRCxTQUFnQixRQUFRLENBQUMsS0FBWSxFQUFFLElBQVksRUFBRSxJQUFZO0lBQy9ELE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckUsSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsU0FBUztRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQzlDLE1BQU0sUUFBUSxHQUFHLENBQUMsU0FBUyxJQUFJLFNBQVMsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUM1RixJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsUUFBUTtRQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzFELElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRTtRQUNyQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQztRQUMvQixPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDM0I7SUFDRCxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlCLEtBQUssQ0FBQyxLQUFL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S0FBWSxFQUFFLFNBQWlCO0lBQ25ELE1BQU0sRUFBRSxHQUFHLGVBQVEsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDekMsSUFBSSxDQUFjLENBQUM7SUFDbkIsS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUU7UUFDbkIsQ0FBQyxHQUFHLGVBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0QixDQUFDLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ25CO0lBQ0QsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDOzs7QUN6RUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5ZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ1RBLHVDQUFtQztBQUduQyx5REFBZ0Q7QUFDaEQsNkJBQTZCO0FBQzdCLG1DQUFpQztBQUNqQyxpQ0FBd0M7QUFFeEMsU0FBUyxnQkFBZ0IsQ0FBQyxFQUFzQjtJQUM5QyxJQUFJLEVBQUUsS0FBSyxDQUFDO1FBQUUsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3JDLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDO1FBQUUsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM3QyxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQztRQUFFLE9BQU8sWUFBQyxDQUFDLEtBQUssRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDL0MsT0FBTztBQUNULENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxJQUFpQixFQUFFLEtBQVk7SUFDbkQsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzNDLElBQUksQ0FBQyxDQUFDLElBQUk7UUFBRSxPQUFPLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTtZQUN2QyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO1NBQ3pDLEVBQUU7WUFDRCxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHO1lBQ3BCLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7U0FDL0IsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUNiLENBQUMsQ0FBQyxJQUFJO1FBQ04sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbkMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLHVCQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUM1RCxXQUFXLENBQUMsQ0FBQztBQUNqQixDQUFDO0FBRUQsTUFBTSxPQUFPLEdBQUc7SUFDZCxDQUFDLFlBQVksRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDO0lBQ3BDLENBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxHQUFHLENBQUM7SUFDNUIsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQztDQUM5QixDQUFDO0FBRUYsU0FBUyxXQUFXLENBQUMsSUFBaUIsRUFBRSxLQUFZO0lBQ2xELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQzlDLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxRQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3JDLE9BQU8sWUFBQyxDQUFDLE9BQU8sRUFBRTtRQUNoQixJQUFJLEVBQUU7WUFDSixNQUFNLENBQUMsS0FBSztnQkFDVixNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xELENBQUM7U0FDRjtLQUNGLEVBQUU7UUFDRCxZQUFDLENBQUMsT0FBTyxFQUFFLFlBQUMsQ0FBQyxJQUFJLEVBQUU7WUFDakIsWUFBQyxDQUFDLElBQUksRUFBRSxZQUFDLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDLENBQUM7WUFDdEMsWUFBQyxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ25DLENBQUMsQ0FBQztRQUNILFlBQUMsQ0FBQyxPQUFPLEVBQ1AsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNkLE1BQU0sRUFBRSxHQUFXLENBQUMsQ0FBQyxRQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsTUFBTSxLQUFLLEdBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDNUIsWUFBWSxFQUFFLEtBQUs7Z0JBQ25CLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3BCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNQLE9BQU8sWUFBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUNoRCxZQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQ2hCLFlBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3JCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FDUCxZQUFDLENBQUMsSUFBSSxFQUFFO1lBQ04sWUFBQyxDQUFDLElBQUksRUFBRSxFQUFFLEdBQUcsQ0FBQyxnQkFBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFDLFlBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDdkMsQ0FBQyxDQUNILENBQUM7S0FDTCxDQUFDLENBQUE7QUFDSixDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsSUFBaUI7SUFDakMsT0FBTyxZQUFDLENBQUMsb0JBQW9CLEVBQUU7UUFDN0IsSUFBSSxFQUFFO1lBQ0osTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUNkLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBa0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFO29CQUNuRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hFLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztTQUNGO0tBQ0YsRUFBRTtRQUNELFdBQVcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDO1FBQzFCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGVBQWUsRUFBRTtZQUNyQyxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDL0IsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7WUFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQ25ELEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUM3QyxXQUFXLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQztLQUMzQixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBZ0IsTUFBTSxDQUFDLElBQWlCO0lBRXRDLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsS0FBSztRQUFFLE9BQU87SUFFN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxZQUFZLENBQUM7UUFDekcsT0FBTyxZQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUVoQyw4Q0FBOEM7SUFDOUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUMvRCxJQUFJLFFBQVEsR0FBRyxFQUFFLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzFDLElBQUksSUFBSSxDQUFDLEtBQUs7UUFBRSxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUV2RCxPQUFPLFlBQUMsQ0FBQyxtQkFBbUIsRUFBRSxnQkFBSyxDQUFDLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekYsQ0FBQztBQWJELHdCQWFDOzs7OztBQ3ZHRCxtQ0FBK0I7QUFDL0IsdUNBQTRCO0FBSzVCLCtDQUF5RDtBQUV6RCx3Q0FBZ0Q7QUFDaEQsaUNBQXdDO0FBQ3hDLHlDQUF5QztBQU96QyxNQUFNLFVBQVUsR0FBb0IsQ0FBQztRQUNuQyxJQUFJLEVBQUUsTUFBTTtRQUNaLEtBQUssRUFBRSxJQUFJO0tBQ1osRUFBRTtRQUNELElBQUksRUFBRSxNQUFNO1FBQ1osS0FBSyxFQUFFLElBQUk7S0FDWixDQUFDLENBQUM7QUFFSCxNQUFNLGFBQWEsR0FBa0I7SUFDbkMsSUFBSSxFQUFFLGdCQUFnQjtJQUN0QixLQUFLLEVBQUUsVUFBVTtDQUNsQixDQUFDO0FBRUYsTUFBTSxRQUFRLEdBQWtCO0lBQzlCLElBQUksRUFBRSxPQUFPO0lBQ2IsS0FBSyxFQUFFLEtBQUs7Q0FDYixDQUFDO0FBRUYsU0FBUyxZQUFZLENBQUMsSUFBaUIsRUFBRSxNQUFxQjtJQUM1RCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN6QixJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssUUFBUTtRQUN2QixDQUFDLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxVQUFVLEtBQUssTUFBTTtRQUN2QyxPQUFPLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDdEIsS0FBSyxFQUFFO2dCQUNMLE1BQU0sRUFBRSxNQUFNO2dCQUNkLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxTQUFTO2FBQy9CO1lBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO1NBQy9FLEVBQUU7WUFDRCxZQUFDLENBQUMseUJBQXlCLEVBQUU7Z0JBQzNCLEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsUUFBUTtvQkFDZCxXQUFXLEVBQUUsR0FBRztpQkFDakI7YUFDRixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQy9CLENBQUMsQ0FBQztJQUNMLE9BQU87QUFDVCxDQUFDO0FBRUQsU0FBUyxlQUFlLENBQUMsSUFBaUI7SUFDeEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNwQixNQUFNLE1BQU0sR0FBRztRQUNiLEdBQUcsVUFBVTtRQUNiLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxnQkFBZ0IsSUFBSSxDQUFDLGNBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDMUYsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztLQUNsQyxDQUFDO0lBQ0YsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDMUMsT0FBTyxZQUFDLENBQUMsdUJBQXVCLEVBQUU7WUFDaEMsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUNyRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ25DLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsSUFBa0IsRUFBRSxLQUE4QjtJQUNyRSxPQUFPO1FBQ0wsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBQ2QsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQXVCLENBQUM7WUFDekMsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLENBQUM7WUFDdkIsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RCxFQUFFLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDbEQsQ0FBQztLQUNGLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxjQUFjLENBQUMsQ0FBUztJQUMvQixJQUFJLENBQUMsR0FBRyxJQUFJO1FBQUUsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDOztRQUN6QixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztBQUMxQyxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsSUFBWSxFQUFFLEtBQWE7SUFDOUMsT0FBTyxZQUFDLENBQUMsT0FBTyxFQUFFO1FBQ2hCLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTtLQUN6QyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsSUFBaUI7SUFDcEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTztRQUFFLE9BQU8sWUFBQyxDQUFDLHVCQUF1QixFQUFFO1lBQy9FLEtBQUssRUFBRTtnQkFDTCxJQUFJLEVBQUUsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxFQUFFO2dCQUMzRSxNQUFNLEVBQUUsUUFBUTtnQkFDaEIsV0FBVyxFQUFFLEdBQUc7YUFDakI7U0FDRixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDbEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLEtBQUs7UUFBRSxPQUFPO0lBQ3JELE9BQU8sWUFBQyxDQUFDLE1BQU0sRUFBRTtRQUNmLEtBQUssRUFBRTtZQUNMLE1BQU0sRUFBRSxNQUFNO1lBQ2QsTUFBTSxFQUFFLFdBQVc7U0FDcEI7UUFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUN2QixNQUFNLFFBQVEsR0FBSSxDQUFDLENBQUMsTUFBc0IsQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQXFCLENBQUM7WUFDaEcsSUFBSSxRQUFRO2dCQUFFLFFBQVEsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUM7S0FDSCxFQUFFO1FBQ0QsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQztRQUNuRixXQUFXLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztRQUM5RCxXQUFXLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDbEQsV0FBVyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDdEMsWUFBQyxDQUFDLDRCQUE0QixFQUFFO1lBQzlCLEtBQUssRUFBRTtnQkFDTCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxXQUFXLEVBQUUsR0FBRzthQUNqQjtTQUNGLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDaEMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELE1BQWEsSUFBSTtJQUFqQjtRQUNFLFNBQUksR0FBWSxLQUFLLENBQUM7UUFDdEIsV0FBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3hDLENBQUM7Q0FBQTtBQUhELG9CQUdDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQ2pCLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFDeEIsV0FBVyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxLQUFLLFVBQVUsRUFDL0UsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFDdkIsY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUV6QyxNQUFNLEtBQUssR0FBZ0I7UUFDekIsWUFBQyxDQUFDLHdCQUF3QixFQUFFO1lBQzFCLFlBQUMsQ0FBQyx1QkFBdUIsRUFBRTtnQkFDekIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQztnQkFDOUIsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7YUFDckIsRUFBRSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsdUJBQXVCLEVBQUU7Z0JBQy9DLEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztvQkFDdEcsR0FBRyxFQUFFLFVBQVU7b0JBQ2YsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDbEMsV0FBVyxFQUFFLEdBQUc7aUJBQ2pCO2FBQ0YsRUFBRSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDeEIsV0FBVyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsdUJBQXVCLEVBQUU7Z0JBQ3ZDLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNyRSxLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQzthQUNyQixFQUFFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDcEMsV0FBVyxDQUFDLElBQUksQ0FBQztTQUNsQixDQUFDO0tBQ0gsQ0FBQztJQUVGLE1BQU0sV0FBVyxHQUFnQixDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBRTtRQUMvRSxZQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0tBQ25CLENBQUMsTUFBTSxDQUFDO1FBQ3ZCLGVBQWUsQ0FBQztZQUNkLElBQUksRUFBRSxRQUFRO1lBQ2QsS0FBSyxFQUFFLENBQ0wsY0FBYyxDQUFDLENBQUMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQ3pFLEdBQUcsY0FBYztZQUNsQixFQUFFLEVBQUUsS0FBSztZQUNULE9BQU8sRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQzVCLFFBQVEsRUFBRSxjQUFjO1lBQ3hCLE1BQU0sRUFBRSxJQUFJLENBQUMsY0FBYztTQUM1QixFQUFFLElBQUksQ0FBQztLQUNULENBQUMsQ0FBQyxNQUFNLENBQ1AsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwQixlQUFlLENBQUM7WUFDZCxJQUFJLEVBQUUsZUFBZTtZQUNyQixLQUFLLEVBQUUsV0FBVztZQUNsQixFQUFFLEVBQUUsUUFBUTtZQUNaLE9BQU8sRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQzlCLE1BQU0sRUFBRSxJQUFJLENBQUMsZ0JBQWdCO1NBQzlCLEVBQUUsSUFBSSxDQUFDO1FBQ1IsZUFBZSxDQUFDO1lBQ2QsSUFBSSxFQUFFLGlCQUFpQjtZQUN2QixFQUFFLEVBQUUsT0FBTztZQUNYLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ3pCLE1BQU0sRUFBRSxJQUFJLENBQUMsV0FBVztTQUN6QixFQUFFLElBQUksQ0FBQztRQUNSLGVBQWUsQ0FBQztZQUNkLElBQUksRUFBRSxrQkFBa0I7WUFDeEIsS0FBSyxFQUFFLHNCQUFzQjtZQUM3QixFQUFFLEVBQUUsVUFBVTtZQUNkLE9BQU8sRUFBRSxLQUFLLENBQUMsUUFBUSxFQUFFO1lBQ3pCLE1BQU0sRUFBRSxJQUFJLENBQUMsZ0JBQWdCO1NBQzlCLEVBQUUsSUFBSSxDQUFDO1FBQ1IsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNKLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztZQUNkLE9BQU8sWUFBQyxDQUFDLGFBQWEsRUFBRTtnQkFDdEIsWUFBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztnQkFDNUQsWUFBQyxDQUFDLFFBQVEsR0FBRyxFQUFFLEVBQUU7b0JBQ2YsS0FBSyxFQUFFO3dCQUNMLElBQUksRUFBRSxPQUFPO3dCQUNiLEdBQUcsRUFBRSxDQUFDO3dCQUNOLEdBQUc7d0JBQ0gsSUFBSSxFQUFFLENBQUM7cUJBQ1I7b0JBQ0QsSUFBSSxFQUFFLFdBQVcsQ0FDZixHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQ2hDLElBQUksQ0FBQyxlQUFlLENBQUM7aUJBQ3hCLENBQUM7Z0JBQ0YsWUFBQyxDQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDO2FBQ3BELENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDO1FBQ3JCLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDcEIsT0FBTyxZQUFDLENBQUMsYUFBYSxFQUFFO2dCQUN0QixZQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNuRCxZQUFDLENBQUMsUUFBUSxHQUFHLEVBQUUsRUFBRTtvQkFDZixLQUFLLEVBQUU7d0JBQ0wsSUFBSSxFQUFFLE9BQU87d0JBQ2IsR0FBRyxFQUFFLENBQUM7d0JBQ04sR0FBRyxFQUFFLEtBQUssQ0FBQyxVQUFVO3dCQUNyQixJQUFJLEVBQUUsQ0FBQztxQkFDUjtvQkFDRCxJQUFJLEVBQUUsV0FBVyxDQUNmLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBUSxFQUFFLENBQUMsRUFDaEMsSUFBSSxDQUFDLGVBQWUsQ0FBQztpQkFDeEIsQ0FBQztnQkFDRixZQUFDLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxLQUFLLENBQUMsT0FBTyxFQUFFLE1BQU0sS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDO2FBQ2pFLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDNUIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDdkMsWUFBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNyRCxZQUFDLENBQUMsUUFBUSxHQUFHLEVBQUUsRUFBRTtnQkFDZixLQUFLLEVBQUU7b0JBQ0wsSUFBSSxFQUFFLE9BQU87b0JBQ2IsR0FBRyxFQUFFLENBQUM7b0JBQ04sR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7b0JBQzdDLElBQUksRUFBRSxDQUFDO2lCQUNSO2dCQUNELElBQUksRUFBRSxXQUFXLENBQ2YsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3hELENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDOUMsQ0FBQztZQUNGLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRSxjQUFjLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDakUsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtLQUM3QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRWYsTUFBTSxjQUFjLEdBQUc7UUFDckIsZUFBZSxDQUFDO1lBQ2QsSUFBSSxFQUFFLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztZQUM3QixLQUFLLEVBQUUsU0FBUztZQUNoQixFQUFFLEVBQUUsUUFBUTtZQUNaLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRTtZQUMvQixNQUFNLENBQUMsQ0FBQztnQkFDTixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDckIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUMzQixDQUFDO1NBQ0YsRUFBRSxJQUFJLENBQUM7S0FDVCxDQUFDO0lBRUYsT0FBTyxZQUFDLENBQUMsaUJBQWlCLEVBQ3hCLEtBQUs7U0FDSixNQUFNLENBQUMsY0FBYyxDQUFDO1NBQ3RCLE1BQU0sQ0FBQyxXQUFXLENBQUM7U0FDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7U0FDN0YsTUFBTSxDQUFDO1FBQ04sWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNwQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQywyQkFBMkIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN2RCxZQUFDLENBQUMsVUFBVSxFQUFFO2dCQUNaLEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLGFBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztvQkFDN0csR0FBRyxFQUFFLFVBQVU7aUJBQ2hCO2FBQ0YsRUFBRSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUMvQixZQUFDLENBQUMsVUFBVSxFQUFFO2dCQUNaLEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLGFBQVMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztvQkFDckgsR0FBRyxFQUFFLFVBQVU7aUJBQ2hCO2FBQ0YsRUFBRSxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztTQUM3QixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7S0FDVixDQUFDLENBQ0gsQ0FBQztBQUNKLENBQUM7QUF4SkQsb0JBd0pDO0FBRUQsU0FBUyxlQUFlLENBQUMsQ0FBYyxFQUFFLElBQWlCO0lBQ3hELE9BQU8seUJBQVcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDakQsQ0FBQzs7Ozs7QUM3UkQsaUNBQXVDO0FBQ3ZDLGlDQUFnRDtBQUVoRCwyQ0FBNEM7QUFJNUMsU0FBUyxTQUFTLENBQUMsR0FBVyxFQUFFLElBQWEsRUFBRSxLQUFZO0lBQ3pELE9BQU87UUFDTCxJQUFJLEVBQUUsR0FBRztRQUNULEtBQUssRUFBRTtZQUNMLEtBQUs7WUFDTCxJQUFJO1lBQ0osS0FBSyxFQUFFLEdBQUc7U0FDWDtRQUNELEtBQUssRUFBRSxPQUFPO0tBQ2YsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FBQyxLQUFZLEVBQUUsR0FBUSxFQUFFLEtBQWEsRUFBRSxTQUFlO0lBQ3RGLE1BQU0sSUFBSSxHQUFHLG9CQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRztRQUFFLE9BQU87WUFDekI7Z0JBQ0UsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsS0FBSzthQUNOO1lBQ0QsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQVcsRUFBRSxpQkFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQztTQUNyRSxDQUFDO0lBQ0YsTUFBTSxNQUFNLEdBQWdCLENBQUM7WUFDM0IsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDYixJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNiLEtBQUs7WUFDTCxTQUFTO1NBQ1YsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBRSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQVksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3pFLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFqQkQsOENBaUJDO0FBRUQsU0FBZ0IsT0FBTyxDQUFDLElBQWlCO0lBQ3ZDLE1BQU0sS0FBSyxHQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFjLENBQUM7SUFDbkUsTUFBTSxNQUFNLEdBQVUsZUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3RDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtRQUNqQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFO1lBQUUsT0FBTyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDckcsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNyQyxJQUFJLElBQUksRUFBRTtZQUNSLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNO2dCQUFFLE9BQU8saUJBQWlCLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7O2dCQUMzRSxPQUFPLENBQUM7d0JBQ1gsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ3ZFLEtBQUssRUFBRSxVQUFVO3FCQUNsQixDQUFDLENBQUM7U0FDSjtRQUNELE9BQU8sRUFBRSxDQUFDO0tBQ1g7SUFDRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDakMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDakUsTUFBTSxFQUNKLElBQUksRUFBRSxLQUFLLEdBQUcsRUFBRSxFQUNoQixHQUFHLEVBQUUsSUFBSSxFQUNULEtBQUssRUFBRSxNQUFNLEVBQ2IsTUFBTSxFQUFFLE9BQU8sRUFDaEIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBRWQsSUFBSSxNQUFNLEdBQWdCLEVBQUUsQ0FBQztJQUM3QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsRUFBRTtRQUMxQyxPQUFPLGlCQUFpQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUU7WUFDdkUsU0FBUyxFQUFFLENBQUM7U0FDYixDQUFDLENBQUM7S0FDSjtJQUNELElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxHQUFHLEtBQUssSUFBSTtRQUFFLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDbEgsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFO1FBQ2hELElBQUksS0FBSyxDQUFDLElBQUk7WUFBRSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQzNGLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDYixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksTUFBTTtnQkFBRSxRQUFRLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakYsSUFBSSxRQUFRO2dCQUFFLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUNyRixJQUFJLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDOUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBUyxFQUFFO29CQUM1QixJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUTt3QkFBRSxPQUFPO29CQUNyQyxNQUFNLEtBQUssR0FBRyxzQkFBYyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDL0QsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssR0FBRyxHQUFHLEVBQUU7d0JBQzdCLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsRUFBRTs0QkFDdkUsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxVQUFVO3lCQUNsRCxDQUFDLENBQUMsQ0FBQztxQkFDTDtnQkFDSCxDQUFDLENBQUMsQ0FBQzthQUNKO1NBQ0Y7S0FDRjtJQUNELElBQUksUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUU7UUFDdEQsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFFbkMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQzNELElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFFeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFTLEVBQUU7WUFDdEIsTUFBTSxLQUFLLEdBQUcsc0JBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUN0RCxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxHQUFHLEdBQUcsRUFBRTtnQkFDN0IsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxFQUFFO29CQUN2RSxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFVBQVU7aUJBQ2xELENBQUMsQ0FBQyxDQUFDO2FBQ0w7UUFDSCxDQUFDLENBQUMsQ0FBQztLQUNKO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQWxFRCwwQkFrRUM7Ozs7O0FDdEdELHFDQUFxQztBQUlyQyxNQUFhLFFBQVE7SUFLbkIsWUFBb0IsSUFBaUI7UUFBakIsU0FBSSxHQUFKLElBQUksQ0FBYTtJQUFJLENBQUM7SUFFbEMsSUFBSTtRQUNWLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDbkMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNuQixPQUFPLElBQUksQ0FBQztTQUNiO1FBQ0QsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ1osSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNuQixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFTyxRQUFRLENBQUMsSUFBZTtRQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsWUFBWTtRQUM5RCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUM3RCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRyxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxTQUFTO1FBQ2YsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLEtBQUssUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVO1lBQUUsT0FBTyxJQUFJLENBQUM7YUFDcEUsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRTtZQUNsQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUFFLE9BQU8sSUFBSSxDQUFDO1lBQ3hDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDOUMsSUFBSSxDQUFDLE1BQU07Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFDekIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbEUsNkNBQTZDO1lBQzdDLE9BQU8sSUFBSSxHQUFHLEVBQUUsR0FBRyxHQUFHLElBQUksSUFBSSxDQUFDO1NBQ2hDO2FBQ0ksSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssRUFBRTtZQUM3QixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDcEIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQUUsT0FBTyxDQUFDLENBQUM7WUFDbEUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUQsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFDakIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQztTQUNsRDs7WUFDSSxPQUFPLElBQUksQ0FBQyxLQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVPLFFBQVE7UUFDZCxJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDN0IsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNuQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVELEtBQUssQ0FBQyxLQUFvQjtRQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDWixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVELElBQUk7UUFDRixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDaEIsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztTQUMxQjtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsS0FBb0I7UUFDekIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUMvQjtZQUNILElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZELElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDbkI7SUFDSCxDQUFDO0lBRUQsTUFBTSxDQUFDLEtBQXFCO1FBQzFCLE9BQU8sQ0FBQyxDQUFDLEtBQUssSUFBSSxLQUFLLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQzVELENBQUM7Q0FDRjtBQTVFRCw0QkE0RUM7Ozs7O0FDbEZELHVDQUE0QjtBQUU1QixpQ0FBOEI7QUFXOUIsU0FBZ0IsV0FBVyxDQUFDLENBQWMsRUFBRSxLQUFZLEVBQUUsTUFBYztJQUN0RSxNQUFNLE1BQU0sR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUMvQixPQUFPLFlBQUMsQ0FBQyxjQUFjLEdBQUcsTUFBTSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtLQUN2QyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7UUFDTixZQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0QsWUFBQyxDQUFDLFlBQVksRUFBRTtZQUNkLFlBQUMsQ0FBQyxRQUFRLEdBQUcsTUFBTSxHQUFHLGFBQWEsRUFBRTtnQkFDbkMsS0FBSyxFQUFFO29CQUNMLElBQUksRUFBRSxVQUFVO29CQUNoQixPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU87aUJBQ25CO2dCQUNELElBQUksRUFBRSxXQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBRSxDQUFDLENBQUMsTUFBMkIsQ0FBQyxPQUFPLENBQUMsRUFBRSxNQUFNLENBQUM7YUFDcEYsQ0FBQztZQUNGLFlBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztTQUN6QyxDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWpCRCxrQ0FpQkM7Ozs7O0FDN0JELGlDQUErQjtBQUUvQixtQkFBd0IsR0FBZ0I7SUFDdEMsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLE9BQU8sRUFBRSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztJQUMzQyxJQUFJLE9BQW1CLENBQUM7SUFFeEIsRUFBRSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsWUFBWSxDQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtRQUNuQixPQUFPLEVBQUU7WUFDUCxJQUFJLEVBQUUsU0FBUztTQUNoQjtRQUNELE1BQU0sRUFBRTtZQUNOLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtTQUN0QztRQUNELE9BQU8sRUFBRSxVQUFTLENBQUMsRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFDRCxNQUFNLEVBQUUsRUFDUDtLQUNGLENBQUMsQ0FBQztJQUNMLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDeEMsR0FBRyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNwRCxHQUFHLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9CLEdBQUcsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0lBQ3ZCLEdBQUcsQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDaEMsT0FBTyxHQUFHLFlBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN2QixDQUFDO0FBekJELDRCQXlCQztBQUFBLENBQUM7Ozs7O0FDNUJGLHVDQUE0QjtBQUc1Qix5REFBbUQ7QUFFbkQsU0FBd0IsWUFBWSxDQUFDLElBQWlCO0lBQ3BELElBQUksSUFBSSxDQUFDLEtBQUs7UUFBRSxPQUFPO0lBRXZCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDM0MsSUFBSSxDQUFDLEtBQUssSUFBSSxLQUFLLEtBQUssQ0FBQztRQUFFLE9BQU87SUFFbEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxFQUNuQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDdkQsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFDaEMsTUFBTSxHQUE4QixDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUUzRCxJQUFJLENBQUMsV0FBVztRQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxFQUN0QixLQUFLLEdBQUcsS0FBSyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztJQUM1QyxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsSUFBSSxDQUFDLDBCQUFVLENBQUMsS0FBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUNqSCxNQUFNLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ25ELE1BQU0sQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUIsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQztLQUM1RDtJQUVELE1BQU0sVUFBVSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBRXBELE9BQU87UUFDTCxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQztRQUM1RSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDO0tBQy9FLENBQUM7QUFDSixDQUFDO0FBM0JELCtCQTJCQztBQUVELFNBQVMsV0FBVyxDQUFDLE1BQTBCLEVBQUUsTUFBZSxFQUFFLEdBQVcsRUFBRSxVQUFtQjtJQUNoRyxPQUFPLFlBQUMsQ0FBQyxxQkFBcUIsR0FBRyxHQUFHLEVBQUU7UUFDcEMsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFO0tBQ2xCLEVBQUUsWUFBWSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxNQUEwQixFQUFFLFVBQW1CO0lBQ25FLElBQUksQ0FBQyxNQUFNLElBQUksTUFBTSxLQUFLLENBQUM7UUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUMsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUNsQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEVBQ2xDLEdBQUcsR0FBRyxHQUFHLEVBQ1QsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO0lBQ3hFLElBQUksQ0FBQyxVQUFVLElBQUksTUFBTSxJQUFJLE1BQU07UUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDO0lBQzFGLE9BQU8sTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEMsT0FBTztRQUNQLFlBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO0tBQ3ZELENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxJQUFJLENBQUMsR0FBVztJQUN2QixPQUFPLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDckMsQ0FBQzs7Ozs7QUNyREQsK0JBQXdDO0FBRXhDLFNBQWdCLFlBQVksQ0FBQyxJQUFpQjtJQUM1QyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDdkMsQ0FBQztBQUZELG9DQUVDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLElBQUksS0FBSztRQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdEQsQ0FBQztBQUhELG9CQUdDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBRkQsb0JBRUM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBaUI7SUFDcEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFGRCxvQkFFQztBQUVELFNBQWdCLEtBQUssQ0FBQyxJQUFpQjtJQUNyQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQixDQUFDO0FBRkQsc0JBRUM7QUFFRCxTQUFnQixjQUFjLENBQUMsSUFBaUI7SUFDOUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsSUFBSSxLQUFLO1FBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNqRCxDQUFDO0FBSEQsd0NBR0M7QUFFRCxTQUFnQixhQUFhLENBQUMsSUFBaUI7SUFDN0MsSUFBSSxJQUFJLENBQUMsVUFBVTtRQUFFLE9BQU87SUFDNUIsSUFBSSxLQUFLLEVBQUUsSUFBSSxHQUFHLFdBQVEsQ0FBQyxJQUFJLENBQUM7SUFDaEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVMsQ0FBWTtRQUN0RCxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFBRSxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQ2xDLENBQUMsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxLQUFLO1FBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBUkQsc0NBUUM7Ozs7O0FDdENELDJDQUFnRDtBQUNoRCxpQ0FBa0M7QUFLbEMsU0FBZ0IsSUFBSSxDQUFDLElBQWlCLEVBQUUsS0FBWSxFQUFFLENBQWdCO0lBQ3BFLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxTQUFTLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTyxDQUFDLDJCQUEyQjtJQUNqRixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssS0FBSztRQUFFLE9BQU87SUFDM0QsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQXFCLENBQUM7SUFDbkMsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQVksRUFDbEQsTUFBTSxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdEMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxNQUFNLEtBQUssR0FBRztRQUFFLE9BQU87SUFDOUMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUNuQixtQkFBWSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFWRCxvQkFVQztBQUVELFNBQWdCLEtBQUssQ0FBQyxXQUEyQixFQUFFLGFBQXdDLEVBQUUsS0FBZSxFQUFFLEdBQVE7SUFFcEgsSUFBSSxLQUFLLENBQUMsS0FBSyxLQUFLLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUs7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUVsRSxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFFOUUsTUFBTSxLQUFLLEdBQUcsaUJBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUV2QyxJQUFJLEtBQUssS0FBSyxJQUFJO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFFaEMsT0FBTyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLENBQUM7QUFYRCxzQkFXQzs7Ozs7QUM3QkQsMkNBQW1DO0FBQ25DLHVDQUE0QjtBQUU1QixrQ0FBbUM7QUFHbkMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDL0MsTUFBTSxLQUFLLEdBQUcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFJNUQsbUJBQXdCLElBQWlCLEVBQUUsS0FBWSxFQUFFLFFBQWtCO0lBQ3pFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUs7UUFBRSxPQUFPO0lBQzdCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDakMsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztJQUNqQyxJQUFJLFFBQVE7UUFBRSxRQUFRLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztJQUN6RSxNQUFNLFdBQVcsR0FBRyxLQUFLLEtBQUssSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQy9DLE1BQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxXQUFXLENBQUM7SUFDMUMsT0FBTyxZQUFDLENBQUMsMEJBQTBCLFFBQVEsUUFBUSxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsRUFBRTtRQUN2RSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUU7UUFDakIsSUFBSSxFQUFFLGVBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNsQixJQUFJLElBQUksQ0FBQyxLQUFLO2dCQUFFLE9BQU87WUFDdkIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDeEIsRUFBRSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGdCQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFlLENBQUMsQ0FBQyxDQUFDO1lBQ3JFLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO0tBQ0gsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2xCLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0IsSUFBSSxXQUFXLEVBQUU7WUFDZixJQUFJLE9BQU8sS0FBSyxJQUFJO2dCQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzNCLElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssSUFBSTtnQkFBRSxFQUFFLEVBQUUsQ0FBQztTQUM5QztRQUNELE9BQU8sWUFBQyxDQUFDLGVBQWUsRUFBRSxZQUFDLENBQUMsZUFBZSxFQUFFLFlBQUMsQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEVBQUU7WUFDNUUsS0FBSyxFQUFFO2dCQUNMLFdBQVcsRUFBRSxJQUFJO2dCQUNqQixZQUFZLEVBQUUsS0FBSztnQkFDbkIsU0FBUyxFQUFFLEVBQUU7YUFDZDtTQUNGLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQTlCRCw0QkE4QkM7Ozs7O0FDekNELDJDQUE0QztBQUM1QyxpQ0FBdUM7QUFFdkMsc0NBQXdDO0FBRXhDLDhDQUFpRDtBQUtqRCwrQkFBd0Y7QUFDeEYsdUNBQXVDO0FBQ3ZDLDZDQUFzRDtBQUN0RCx5Q0FBcUQ7QUFDckQseUNBQXlDO0FBQ3pDLCtCQUErQjtBQUMvQixtQ0FBbUM7QUFDbkMsbUNBQTZDO0FBQzdDLDhDQUF1QztBQUN2Qyw0Q0FBK0Q7QUFDL0QscUNBQXNEO0FBRXRELDBEQUErRDtBQUMvRCxpQ0FBaUc7QUFDakcsMERBQW1EO0FBRW5ELDZCQUE2QjtBQUM3QixpREFBd0Q7QUFDeEQsaURBQTBDO0FBRzFDLGlDQUFvRDtBQUNwRCxzREFBc0U7QUFDdEUsMERBQTZFO0FBQzdFLDJDQUErRDtBQUMvRCwyQ0FBMkQ7QUFDM0QsNkNBQStDO0FBQy9DLG1DQUFtQztBQUduQyxrREFBcUU7QUFFckUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUUxQixNQUFxQixXQUFXO0lBZ0U5QixZQUFxQixJQUFpQixFQUFXLE1BQWM7UUFBMUMsU0FBSSxHQUFKLElBQUksQ0FBYTtRQUFXLFdBQU0sR0FBTixNQUFNLENBQVE7UUEvQi9ELHdCQUFtQixHQUFZLEtBQUssQ0FBQztRQUNyQyxnQkFBVyxHQUFZLEtBQUssQ0FBQztRQUM3QixlQUFVLEdBQVksSUFBSSxDQUFDO1FBSTNCLGdCQUFnQjtRQUNoQixZQUFPLEdBQVksS0FBSyxDQUFDO1FBRXpCLGlCQUFZLEdBQVksSUFBSSxDQUFDLENBQUMsK0NBQStDO1FBQzdFLG1CQUFjLEdBQXNCLG9CQUFVLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDekUsY0FBUyxHQUFzQixvQkFBVSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM5RCxpQkFBWSxHQUFzQixvQkFBVSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNwRSxpQkFBWSxHQUFZLFFBQVEsQ0FBQyxJQUFJLEtBQUssV0FBVyxDQUFDO1FBQ3RELGVBQVUsR0FBa0IsYUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRXhDLGNBQVMsR0FBRztZQUNWLEVBQUUsRUFBRSxDQUFDO1lBQ0wsR0FBRyxFQUFFLENBQUM7U0FDUCxDQUFDO1FBcUdNLFlBQU8sR0FBRyxDQUFDLElBQWUsRUFBUSxFQUFFO1lBQzFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ2pCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUMsSUFBSSxDQUFDLElBQUksR0FBRyxVQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQWMsQ0FBQztZQUNyRCxJQUFJLENBQUMsUUFBUSxHQUFHLFVBQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDbEQsQ0FBQyxDQUFBO1FBRUQsU0FBSSxHQUFHLEdBQUcsRUFBRTtZQUNWLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQzdCLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDO2dCQUNuQixXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRTthQUNoQyxDQUFDLENBQUM7WUFDSCxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUNwQjtZQUNELElBQUksSUFBSSxDQUFDLFFBQVE7Z0JBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQzFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDLENBQUE7UUFVRCxrQkFBYSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSyxPQUFPLENBQUM7UUFrQ3JELGFBQVEsR0FBZSxrQkFBUSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDeEMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxnQkFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO29CQUNyRSxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUc7b0JBQ25DLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc7b0JBQ2xCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtpQkFDaEIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFzQ0ssVUFBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksRUFBRSxrQkFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztZQUNqQyxPQUFPLEVBQUUsa0JBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7WUFDdkMsS0FBSyxFQUFFLGtCQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1NBQ3BDLENBQUMsQ0FBQyxDQUFDO1lBQ0YsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJO1lBQ1osT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJO1lBQ2YsS0FBSyxFQUFFLENBQUMsQ0FBQyxJQUFJO1NBQ2QsQ0FBQztRQUVNLGFBQVEsR0FBZSxrQkFBUSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDaEQsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkcsQ0FBQyxDQUFDLENBQUM7UUFFSyxlQUFVLEdBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7WUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztnQkFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25GLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQU1SLHlCQUFvQixHQUFHLEdBQUcsRUFBRSxDQUMxQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQXFDcEYsYUFBUSxHQUFHLENBQUMsSUFBZSxFQUFRLEVBQUU7WUFFbkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNyQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDakIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoQixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzdDOztnQkFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQTtRQWNELGVBQVUsR0FBRyxDQUFDLEdBQVEsRUFBUSxFQUFFO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFBO1FBRUQsZ0JBQVcsR0FBRyxDQUFDLEtBQWEsRUFBUSxFQUFFO1lBQ3BDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUE7UUF5Q0QsaUJBQVksR0FBRyxDQUFDLEtBQWUsRUFBRSxHQUFRLEVBQVEsRUFBRTtZQUNqRCxJQUFJLGlCQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLEVBQUU7Z0JBQzdELElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztnQkFDOUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO2dCQUM5QixJQUFJLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztnQkFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDbEIsTUFBTSxJQUFJLEdBQUc7b0JBQ1gsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO29CQUNoQixHQUFHO29CQUNILE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRztvQkFDbkMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztvQkFDbEIsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2lCQUNoQixDQUFDO2dCQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM5QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDeEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ2Y7O2dCQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQTtRQUVELGFBQVEsR0FBRyxDQUFDLElBQVMsRUFBRSxJQUFTLEVBQUUsT0FBc0IsRUFBUSxFQUFFO1lBQ2hFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1lBQzdCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsRCxNQUFNLFNBQVMsR0FBRyxPQUFPLElBQUksQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLElBQUksSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25GLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDN0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3JHLENBQUMsQ0FBQTtRQUVELGFBQVEsR0FBRyxDQUFDLElBQVMsRUFBRSxJQUFTLEVBQUUsT0FBc0IsRUFBRSxJQUFjLEVBQVEsRUFBRTtZQUNoRixNQUFNLElBQUksR0FBUTtnQkFDaEIsSUFBSTtnQkFDSixJQUFJO2dCQUNKLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDbkMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztnQkFDbEIsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2FBQ2hCLENBQUM7WUFDRixJQUFJLE9BQU87Z0JBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUM7WUFDekMsSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1lBQ2hDLElBQUksSUFBSSxDQUFDLFFBQVE7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUM5QyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN4QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQyxDQUFBO1FBY0QsaUJBQVksR0FBRyxHQUFHLEVBQUU7WUFDbEIsSUFBSSxJQUFJLENBQUMsS0FBSztnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQzVDLENBQUMsQ0FBQTtRQW9FRCxrQkFBYSxHQUFHLEdBQVMsRUFBRTtZQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxtQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFBO1FBRU8sZUFBVSxHQUFHLENBQUMsRUFBbUIsRUFBRSxJQUFlLEVBQUUsUUFBaUIsRUFBUSxFQUFFO1lBQ3JGLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLElBQWUsRUFBRSxFQUFFO2dCQUMzQyxJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVE7b0JBQUUsT0FBTztnQkFDN0MsSUFBSSxRQUFRLEVBQUU7b0JBQ1osSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksb0JBQVksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxRQUFRO3dCQUNyRixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztpQkFDcEI7cUJBQU0sSUFBSSxvQkFBWSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDO29CQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO3FCQUNwRCxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVE7b0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQztnQkFFNUYsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksRUFBRTtvQkFDdEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO29CQUNyQixJQUFJLENBQUMsUUFBUSxFQUFFO3dCQUNiLElBQUksSUFBSSxDQUFDLEtBQUs7NEJBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQzt3QkFDckMsSUFBSSxJQUFJLENBQUMsUUFBUTs0QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUMzQyxJQUFJLElBQUksQ0FBQyxhQUFhOzRCQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUM7d0JBQ3JELElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7d0JBQ3pCLElBQUksRUFBRSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUU7NEJBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztxQkFDL0U7b0JBQ0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2lCQUNmO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUE7UUEwQ0QsZUFBVSxHQUFHLGtCQUFRLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRTtZQUM5QixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ3hCLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFO29CQUN0QixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO29CQUNyRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztpQkFDakU7O29CQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDMUI7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILGdCQUFXLEdBQUcsR0FBRyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO2dCQUFFLE9BQU87WUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNwQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDckIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxFQUFFO2dCQUN6QixJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN2QixJQUFJLElBQUksQ0FBQyxRQUFRO29CQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUMxQztZQUNELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDLENBQUE7UUFFRCxxQkFBZ0IsR0FBRyxHQUFHLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUs7Z0JBQUUsT0FBTztZQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUMvQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7Z0JBQUUsT0FBTztZQUNsQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7WUFDcEMsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksSUFBSSxDQUFDLFFBQVE7Z0JBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQzlELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUNyQixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUMsQ0FBQTtRQUVELHNCQUFpQixHQUFHLEdBQVksRUFBRTtZQUNoQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3pCLENBQUMsQ0FBQTtRQUVELG1CQUFjLEdBQUcsR0FBWSxFQUFFO1lBQzdCLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDOUIsQ0FBQyxDQUFBO1FBU0Qsb0JBQWUsR0FBRyxDQUFDLENBQVMsRUFBUSxFQUFFO1lBQ3BDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDeEIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BCLENBQUMsQ0FBQTtRQUVELG9CQUFlLEdBQUcsQ0FBQyxDQUFTLEVBQVEsRUFBRTtZQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPO2dCQUFFLE9BQU87WUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BCLENBQUMsQ0FBQTtRQUVELHFCQUFnQixHQUFHLENBQUMsQ0FBUyxFQUFRLEVBQUU7WUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUTtnQkFBRSxPQUFPO1lBQ2pDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNwQixDQUFDLENBQUE7UUFFRCxxQkFBZ0IsR0FBRyxDQUFDLENBQVUsRUFBUSxFQUFFO1lBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNwQixDQUFDLENBQUE7UUFVRCw0QkFBdUIsR0FBRyxHQUFZLEVBQUU7WUFDdEMsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFBO1FBT0QscUJBQWdCLEdBQUcsQ0FBQyxDQUFVLEVBQVEsRUFBRTtZQUN0QyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUE7UUFFRCxnQkFBVyxHQUFHLEdBQUcsRUFBRTtZQUNqQixJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFDcEMsQ0FBQyxDQUFBO1FBVUQsbUJBQWMsR0FBRyxHQUFHLEVBQUU7WUFDcEIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtnQkFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDN0MsTUFBTSxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRO2dCQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUNuRCxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN4QixFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUE7UUFzQ0QsZUFBVSxHQUFHLENBQUMsSUFBZSxFQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztRQWtCNUUsZ0JBQVcsR0FBRyxHQUFTLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsS0FBSztnQkFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztpQkFDbEM7Z0JBQ0gsSUFBSSxDQUFDLEtBQUssR0FBRyxnQkFBUyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM3QixJQUFJLElBQUksQ0FBQyxRQUFRO29CQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtvQkFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7YUFDcEQ7WUFDRCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDdkIsQ0FBQyxDQUFBO1FBRUQsbUJBQWMsR0FBRyxHQUFTLEVBQUU7WUFDMUIsSUFBSSxJQUFJLENBQUMsUUFBUTtnQkFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDekMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUE7UUFFRCxtQkFBYyxHQUFHLEdBQUcsRUFBRTtZQUNwQixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVE7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7aUJBQ2hFO2dCQUNILElBQUksSUFBSSxDQUFDLEtBQUs7b0JBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUNuQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFO29CQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDbkQsSUFBSSxDQUFDLFFBQVEsR0FBRyxtQkFBWSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUU7b0JBQ3RDLDRDQUE0QztvQkFDNUMsaURBQWlEO29CQUNqRCxPQUFPLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUMvRSxDQUFDLENBQUMsQ0FBQzthQUNKO1lBQ0QsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQztRQU9GLGlCQUFZLEdBQUcsR0FBaUMsRUFBRTtZQUNoRCxPQUFPLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNqRCxDQUFDLENBQUE7UUFFRCxlQUFVLEdBQUcsR0FBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFudEI3RSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzVCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUUvRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsbUJBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRTVGLElBQUksRUFBRSxDQUFDLFdBQVc7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFlLENBQUM7UUFFckUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFFNUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRWxDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRXhCLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBUSxDQUFDLElBQUksQ0FBQztRQUVqQyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFDekIsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDbkYsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUN6RSxxS0FBcUs7WUFDckssSUFBSSxPQUFPO2dCQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JGLE1BQU0sUUFBUSxHQUFHLFVBQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFELElBQUksTUFBTSxLQUFLLE1BQU07Z0JBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFRLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUNyRTtnQkFDSCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBZ0IsQ0FBQyxDQUFDO2dCQUN2QyxJQUFJLEdBQUc7b0JBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFPLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUM7YUFDaEY7U0FDRjtRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRS9CLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLG1CQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBQy9ILElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUVsRSxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssV0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1lBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO2FBQ3hHLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxPQUFPO1lBQUUsRUFBRSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFbkYsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVwQixFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFRLEVBQUUsRUFBRTtZQUNoQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLEdBQVcsRUFBRSxFQUFFO1lBQ3hDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsS0FBSyxPQUFPO2dCQUNoQyxFQUFFLENBQUMsVUFBVSxDQUFDLDZCQUE2QixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtvQkFDckQsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztnQkFDM0MsQ0FBQyxDQUFDLENBQUM7WUFDTCxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksR0FBRyxLQUFLLE9BQU87Z0JBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDdkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdkQsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUE7UUFDZixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRCxVQUFVLENBQUMsSUFBaUIsRUFBRSxLQUFjO1FBQzFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssV0FBVyxDQUFDO1FBQzlDLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdEQsTUFBTSxRQUFRLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsWUFBUSxDQUFDLFVBQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQy9ELElBQUksUUFBUTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRXhDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxpQkFBYyxFQUFFLENBQUM7UUFDdkMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkMsSUFBSSxJQUFJLENBQUMsTUFBTTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7O1lBQ3JDLElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxRQUFRLEdBQUcsc0JBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzVELFdBQVEsQ0FBQyxZQUFZLENBQUMsVUFBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNoRSxJQUFJLENBQUMsSUFBSSxHQUFHLFdBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBdUJELFFBQVE7UUFDTixPQUFPLGVBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsV0FBVztRQUNULE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsZUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ2hGLENBQUM7SUFJRCxjQUFjO1FBQ1osT0FBTyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUNELE9BQU87UUFDTCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztJQUVELFNBQVM7UUFDUCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsVUFBVSxDQUFDLEtBQW9CO1FBQzdCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztJQUMvQixDQUFDO0lBRU8sYUFBYSxDQUFDLEdBQVM7UUFDN0IsSUFBSSxDQUFDLEdBQUc7WUFBRSxPQUFPO1FBQ2pCLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUc7WUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQVUsQ0FBQztRQUN6RSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQVUsQ0FBQztJQUN2RCxDQUFDO0lBQUEsQ0FBQztJQUVNLFVBQVU7UUFDaEIsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxnQkFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQy9DLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDZixFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUNyQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtnQkFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBcUIsQ0FBQyxDQUFDO1FBQ3RFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQVVELFVBQVU7UUFDUixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxFQUNwQixLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUN4QixLQUFLLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUM1QyxLQUFLLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUM1QyxZQUFZLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQzNFLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUNiLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUN4QyxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQy9CLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQ3hCLE1BQU0sR0FBc0I7WUFDMUIsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO1lBQ2IsU0FBUyxFQUFFLEtBQUs7WUFDaEIsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNwQixLQUFLLEVBQUUsU0FBUztnQkFDaEIsS0FBSyxFQUFFLEVBQWE7YUFDckIsQ0FBQyxDQUFDLENBQUM7Z0JBQ0YsS0FBSyxFQUFFLFlBQVk7Z0JBQ25CLEtBQUssRUFBRSxDQUFDLFlBQVksS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQVk7YUFDaEU7WUFDRCxLQUFLLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLO1lBQ25CLFFBQVEsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7U0FDdkMsQ0FBQztRQUNKLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ3pCLDhDQUE4QztZQUM5QywrREFBK0Q7WUFDL0QsTUFBTSxDQUFDLFNBQVMsR0FBRyxlQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMsTUFBTSxDQUFDLE9BQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1NBQy9CO1FBQ0QsTUFBTSxDQUFDLFVBQVUsR0FBRztZQUNsQixPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQVEsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLFNBQVMsS0FBSyxNQUFNLENBQUMsT0FBUSxDQUFDLEtBQUs7U0FDN0UsQ0FBQztRQUNGLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO1FBQ3ZCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFvQkQsVUFBVTtRQUNSLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUM7SUFDbEMsQ0FBQztJQUtELElBQUksQ0FBQyxJQUFlO1FBQ2xCLE1BQU0sV0FBVyxHQUFHLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxFQUN0QyxhQUFhLEdBQUcsV0FBVyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLElBQUksV0FBVyxFQUFFO1lBQ2YsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFDakQsSUFBSSxJQUFJLENBQUMsS0FBSztnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztZQUNsRSxJQUFJLGFBQWEsRUFBRTtnQkFDakIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztvQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsbUJBQW1CO3FCQUNyRCxJQUFJLENBQUMsWUFBWSxFQUFFO29CQUN0QixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUM7d0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7d0JBQ2xELElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7aUJBQ3hCO2dCQUNELElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUksQ0FBQztvQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ3REO1lBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN2QixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN4QjtRQUNELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztRQUNuRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QixJQUFJLFdBQVcsRUFBRTtZQUNmLElBQUksSUFBSSxDQUFDLEtBQUs7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNwQyxJQUFJLElBQUksQ0FBQyxRQUFRO2dCQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDMUMsSUFBSSxJQUFJLENBQUMsS0FBSztnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ3JDO1FBQ0QsSUFBSSxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBY08sU0FBUyxDQUFDLElBQWU7UUFDL0IsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVELGFBQWEsQ0FBQyxJQUFlO1FBQzNCLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxHQUFRO1FBQ3hCLE9BQU8sVUFBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBVUQsaUJBQWlCLENBQUMsS0FBWSxFQUFFLE1BQWM7UUFDNUMsTUFBTSxJQUFJLEdBQUcsNEJBQWUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxRSxJQUFJLElBQUk7WUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVELFVBQVUsQ0FBQyxJQUFpQixFQUFFLEtBQWM7UUFDMUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBRUQsU0FBUyxDQUFDLEdBQVc7UUFDbkIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDeEIsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNMLEdBQUcsRUFBRSxlQUFlO1lBQ3BCLE1BQU0sRUFBRSxNQUFNO1lBQ2QsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFO1lBQ2IsT0FBTyxFQUFFLENBQUMsSUFBaUIsRUFBRSxFQUFFO2dCQUM3QixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDN0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzNELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDO1lBQ0QsS0FBSyxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUNiLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO2dCQUN6QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDaEIsQ0FBQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxTQUFTLENBQUMsR0FBUTtRQUNoQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN4QixNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzdJLENBQUM7SUE4Q08sZ0JBQWdCO1FBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDO1lBQ25CLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBaUI7WUFDM0QsT0FBTyxFQUFFO2dCQUNQLEtBQUssRUFBRSxlQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQWlCLENBQUM7YUFDbEU7WUFDRCxVQUFVLEVBQUU7Z0JBQ1YsT0FBTyxFQUFFLElBQUk7YUFDZDtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFNRCxPQUFPLENBQUMsSUFBZSxFQUFFLElBQWU7UUFDdEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDWixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDekMsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDdEI7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNkLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELFFBQVEsQ0FBQyxLQUFhLEVBQUUsSUFBZSxFQUFFLE9BQXNCO1FBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDekMsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksRUFBRTtZQUN0QixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsaUJBQWlCO1lBQ2pCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ3hDO1FBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxVQUFVLENBQUMsSUFBZTtRQUN4QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDbEIsTUFBTSxLQUFLLEdBQUcsVUFBTyxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLEVBQUUsSUFBSSxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUN2RCxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUM5SDtZQUFFLE9BQU87UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3QixJQUFJLFdBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7WUFDdEUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsSUFBSSxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCxPQUFPLENBQUMsSUFBZSxFQUFFLFVBQW1CO1FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hCLElBQUksSUFBSSxDQUFDLEtBQUs7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVELGNBQWMsQ0FBQyxJQUFlLEVBQUUsS0FBYztRQUM1QyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hCLElBQUksSUFBSSxDQUFDLEtBQUs7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELEtBQUs7UUFDSCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxhQUFhO1FBQ1gsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxZQUFZO1FBQ1YsT0FBTztZQUNMLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFDdEIsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztTQUN4QixDQUFDO0lBQ0osQ0FBQztJQUVELFlBQVk7UUFDVixPQUFPLFVBQU8sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbEcsQ0FBQztJQTZCTyxnQkFBZ0I7UUFDdEIsSUFBSSxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckMsTUFBTSxHQUFHLEdBQWM7WUFDckIsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87WUFDL0IsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUN2QixJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQzVDO1lBQ0QsSUFBSSxFQUFFLENBQUMsRUFBbUIsRUFBRSxJQUFlLEVBQUUsRUFBRTtnQkFDN0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbEQsQ0FBQztZQUNELGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07U0FDcEIsQ0FBQztRQUNGLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDekMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLFVBQVUsQ0FBQztZQUNsQyxHQUFHLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQztTQUN4QjtRQUNELElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxRQUFRLENBQUMsSUFBZ0I7UUFDdkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDNUIsSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsS0FBSztZQUFFLE9BQU8sS0FBSyxDQUFDO1FBQzVDLElBQUksQ0FBQyxDQUFDLEtBQUs7WUFBRSxPQUFPLFdBQVcsQ0FBQztRQUNoQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsUUFBUSxDQUFDLElBQWU7UUFDdEIsTUFBTSxLQUFLLEdBQUcsY0FBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUMxQyxPQUFPLHVCQUFhLENBQUMsc0JBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDbEQsQ0FBQztJQTBDTyxVQUFVO1FBQ2hCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUMvQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUF5QkQsYUFBYTtRQUNYLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixFQUFFLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0RyxDQUFDO0lBRUQsc0JBQXNCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMxRCxDQUFDO0lBTU8sZUFBZTtRQUNyQixJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7O1lBQzNDLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQVdPLGdCQUFnQjtRQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztZQUNyQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFO2dCQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUM3QyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3hEOztZQUFNLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBV0QsaUJBQWlCLENBQUMsSUFBb0I7UUFDcEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUU7WUFBRSxPQUFPO1FBQ2pFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUMvRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ25DLElBQUksSUFBSSxDQUFDLFFBQVE7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsVUFBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BILElBQUksSUFBSSxDQUFDLFFBQVE7WUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUMzRCxJQUFJLElBQUksQ0FBQyxLQUFLO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQ2pELElBQUksSUFBSSxDQUFDLEtBQUs7WUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzVELEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLDBCQUEwQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVELE9BQU8sQ0FBQyxHQUFRO1FBQ2QsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHO1lBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUM7Z0JBQzVDLEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBYztnQkFDcEQsSUFBSSxFQUFFLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2xDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDUDtZQUNILE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN2RCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUN4RSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1NBQ3JEO0lBQ0gsQ0FBQztJQUVELFlBQVksQ0FBQyxHQUFRO1FBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELFlBQVk7UUFDVixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEYsSUFBSSxHQUFHO1lBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBSUQsb0JBQW9CO1FBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsZ0JBQWEsQ0FBQztZQUM3QixPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUc7WUFDbkMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVO1lBQ3ZCLE1BQU0sRUFBRSxDQUFDLElBQWUsRUFBRSxFQUFFO2dCQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUk7Z0JBQ25ELGlEQUFpRDtnQkFDakQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxFQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FDekUsQ0FBQztZQUNKLENBQUM7WUFDRCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUk7WUFDeEIsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVTtZQUMxQixPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVU7U0FDekIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQStCRCxlQUFlO1FBQ2IsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFDMUIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFRRCxNQUFNLENBQUksQ0FBNEI7UUFDcEMsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRztZQUM5RCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDL0IsQ0FBQztDQUNGO0FBM3hCRCw4QkEyeEJDO0FBQUEsQ0FBQzs7Ozs7QUN2MEJGLG1DQUE2QztBQUM3Qyw4Q0FBdUM7QUFTdkMsTUFBTSxlQUFlLEdBQUcsRUFBRSxDQUFDO0FBQzNCLE1BQU0sZUFBZSxHQUFHLEdBQUcsQ0FBQztBQUM1QixNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7QUFFM0IsU0FBUyxZQUFZLENBQUMsRUFBRTtJQUN0Qiw4RUFBOEU7SUFDOUUsa0NBQWtDO0lBQ2xDLE9BQU8sRUFBRSxDQUFDLEtBQUssR0FBRyxNQUFNLElBQUksQ0FDMUIsRUFBRSxDQUFDLEtBQUssSUFBSSxlQUFlLElBQUksRUFBRSxDQUFDLEtBQUssR0FBRyxlQUFlLENBQzFELENBQUM7QUFDSixDQUFDO0FBRUQsa0NBQWtDO0FBQ2xDLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxFQUFFO0lBQzVCLE1BQU0sSUFBSSxHQUFRO1FBQ2hCLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRztRQUNYLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ25DLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSztRQUNmLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNuQixPQUFPO2dCQUNMLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRTtnQkFDVCxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUk7Z0JBQ2IsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2FBQ3BELENBQUM7UUFDSixDQUFDLENBQUM7S0FDSCxDQUFDO0lBQ0YsSUFBSSxPQUFPLEtBQUssVUFBVTtRQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0lBQ25ELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQUVELGtDQUFrQztBQUNsQyxTQUFTLE9BQU8sQ0FBQyxDQUFDO0lBQ2hCLE1BQU0sR0FBRyxHQUFRO1FBQ2YsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHO1FBQ1YsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSTtRQUN0QixLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUs7UUFDZCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsVUFBUyxJQUFJO1lBQzFCLE1BQU0sRUFBRSxHQUFRO2dCQUNkLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7YUFDN0IsQ0FBQztZQUNGLElBQUksZ0JBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUFFLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQzs7Z0JBQ2pDLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUN6QixPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUMsQ0FBQztRQUNGLEtBQUssRUFBRSxJQUFJO0tBQ1osQ0FBQztJQUNGLElBQUksZ0JBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7O1FBQzlDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDaEMsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7SUFDakIsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQUk7SUFDdkIsTUFBTSxVQUFVLEdBQWEsRUFBRSxDQUFDO0lBQ2hDLFNBQVMsVUFBVSxDQUFDLElBQUk7UUFDdEIsT0FBTyxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBQUEsQ0FBQztJQUNGLElBQUksVUFBVSxHQUFHLGFBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QixPQUFPO1FBQ0wsT0FBTyxFQUFFLGtCQUFRLENBQUMsR0FBRyxFQUFFO1lBQ3JCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUM3QyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLFlBQVksQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNoRixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ25EO1FBQ0gsQ0FBQyxDQUFDO1FBQ0YsS0FBSyxDQUFDLElBQWUsRUFBRSxPQUFlO1lBQ3BDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7Z0JBQUUsT0FBTztZQUNuRSxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUM7Z0JBQUUsT0FBTztZQUM3QixVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixNQUFNLEdBQUcsR0FBUTtnQkFDZixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7Z0JBQ2IsSUFBSTthQUNMLENBQUM7WUFDRixJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssVUFBVTtnQkFBRSxHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDNUQsSUFBSSxPQUFPLEdBQUcsQ0FBQztnQkFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQztZQUNuQyxJQUFJLFVBQVUsRUFBRTtnQkFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQztZQUNoQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixDQUFDO1FBQ0QsV0FBVyxDQUFDLFVBQVU7WUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JELENBQUM7UUFDRCxVQUFVO0tBQ1gsQ0FBQztBQUNKLENBQUM7QUFoQ0Qsb0JBZ0NDO0FBQUEsQ0FBQzs7Ozs7QUM5RkYsdUNBQTZCO0FBRTdCLG1DQUE4QjtBQUM5Qiw0Q0FBNEQ7QUFDNUQsa0NBQXlDO0FBSXpDLE1BQU0sU0FBUyxHQUFvQixDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzdFLE1BQU0sVUFBVSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBRWxELFNBQWdCLFVBQVUsQ0FBQyxJQUFVLEVBQUUsT0FBbUIsRUFBRSxLQUFZLEVBQUUsTUFBa0I7SUFFMUYsTUFBTSxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztJQUV0RixNQUFNLFNBQVMsR0FBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM1QyxJQUFJLE9BQU8sS0FBSyxVQUFVO1FBQUUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUV6RCxNQUFNLElBQUksR0FBdUI7UUFDL0IsSUFBSSxFQUFFLGFBQUksQ0FBQyxLQUFLLENBQUM7UUFDakIsRUFBRSxFQUFFO1lBQ0YsU0FBUztZQUNULFFBQVEsRUFBRSxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsb0JBQVUsQ0FBQyxjQUFjLEdBQUcsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDcEYsT0FBTyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsQ0FBQztTQUNGO1FBQ0QsTUFBTSxFQUFFO1lBQ04sU0FBUyxFQUFFLFVBQVU7WUFDckIsUUFBUSxFQUFFLHdCQUFjLENBQUMsaUJBQWlCLEVBQUUsVUFBVSxDQUFDO1NBQ3hEO1FBQ0QsS0FBSyxFQUFFO1lBQ0wsU0FBUyxFQUFFLFNBQVM7WUFDcEIsUUFBUSxFQUFFLHdCQUFjLENBQWtCLGdCQUFnQixFQUFFLFNBQVMsQ0FBQztTQUN2RTtLQUNGLENBQUM7SUFFRixNQUFNLFVBQVUsR0FBRyxVQUFTLENBQUMsRUFBRSxLQUFLO1FBQ2xDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM1QyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUMsQ0FBQztJQUVGLE9BQU87UUFDTCxLQUFLO1FBQ0wsTUFBTTtRQUNOLElBQUk7UUFDSixVQUFVO1lBQ1IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUFFLE9BQU8sRUFBRSxDQUFDO1FBQzlCLENBQUM7UUFDRCxRQUFRLENBQUMsRUFBRTtZQUNULElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxZQUFZLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQSxDQUFDLENBQUM7UUFDdkQsV0FBVyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUEsQ0FBQyxDQUFDO1FBQ3JELFNBQVM7WUFDUCxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssU0FBUyxJQUFJLENBQ3pDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU07Z0JBQzVELElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FDL0QsQ0FBQztRQUNKLENBQUM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQWxERCxnQ0FrREM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBd0I7SUFDM0MsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNwQixPQUFPO1FBQ0wsWUFBQyxDQUFDLFlBQVksRUFBRTtZQUNkLFlBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEMsWUFBQyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBUyxDQUFDO2dCQUM1QyxPQUFPLFlBQUMsQ0FBQyxNQUFNLEVBQUU7b0JBQ2YsS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxFQUFFO29CQUMxQyxJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztpQkFDeEQsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNSLENBQUMsQ0FBQyxDQUFDO1NBQ0osQ0FBQztRQUNGLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMscUJBQXFCLEVBQUU7WUFDdkQsWUFBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNoQyxZQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztTQUNoRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxLQUFLLEVBQUU7WUFDWixZQUFDLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2xCLFlBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzFDLFlBQUMsQ0FBQyxhQUFhLEVBQ2IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVMsQ0FBQztvQkFDL0IsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFO3dCQUNmLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDcEQsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7cUJBQzVELEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7Z0JBQ25CLENBQUMsQ0FBQyxDQUNIO2FBQ0YsQ0FBQztZQUNGLFlBQUMsQ0FBQyxlQUFlLEVBQUU7Z0JBQ2pCLFlBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQzNDLFlBQUMsQ0FBQyxhQUFhLEVBQ2IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVMsQ0FBQztvQkFDOUIsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFO3dCQUNmLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDbkQsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7cUJBQzNELEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ1IsQ0FBQyxDQUFDLENBQ0g7YUFDRixDQUFDO1NBQ0gsQ0FBQztRQUNGLFlBQUMsQ0FBQyxjQUFjLEVBQ2QsWUFBQyxDQUFDLGlDQUFpQyxFQUFFO1lBQ25DLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7U0FDckMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUMvQjtLQUNGLENBQUM7QUFDSixDQUFDO0FBOUNELG9CQThDQzs7Ozs7QUM3R0QsbUNBQThCO0FBQzlCLDRDQUE0QztBQUM1QywyQ0FBNEM7QUFDNUMscURBQTREO0FBQzVELHFDQUFzQztBQUN0QyxpREFBbUQ7QUFDbkQsaUNBQWlDO0FBSWpDLFNBQVMsVUFBVSxDQUFDLEdBQVE7SUFDMUIsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5QixPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUNoRCxDQUFDO0FBRUQsU0FBUyxlQUFlLENBQUMsT0FBbUI7SUFDMUMsUUFBUSxPQUFPLEVBQUU7UUFDZixLQUFLLFVBQVUsQ0FBQztRQUNoQixLQUFLLGNBQWMsQ0FBQztRQUNwQixLQUFLLFVBQVU7WUFDYixPQUFPLENBQUMsQ0FBQztRQUNYLEtBQUssUUFBUSxDQUFDO1FBQ2QsS0FBSyxXQUFXO1lBQ2QsT0FBTyxDQUFDLENBQUM7UUFDWDtZQUNFLE9BQU8sQ0FBQyxDQUFDO0tBQ1o7QUFDSCxDQUFDO0FBRUQsU0FBZ0IsbUJBQW1CLENBQUMsT0FBbUIsRUFBRSxHQUFRO0lBQy9ELE9BQU8sVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNyRCxDQUFDO0FBRkQsa0RBRUM7QUFFRCxTQUFTLGlCQUFpQixDQUFDLE9BQW1CLEVBQUUsR0FBUTtJQUN0RCxPQUFPLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pELENBQUM7QUFFRCxtQkFBd0IsSUFBaUIsRUFBRSxJQUFJLEVBQUUsS0FBYztJQUM3RCxNQUFNLE9BQU8sR0FBRyxhQUFJLENBQUMsS0FBSyxDQUFDLEVBQzNCLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxhQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFVLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLEVBQzFFLE9BQU8sR0FBRyxhQUFJLENBQUMsSUFBSSxDQUFDLEVBQ3BCLE9BQU8sR0FBRyxhQUFJLENBQUMsS0FBSyxDQUFDLEVBQ3JCLFFBQVEsR0FBRyxhQUFJLENBQWtCLElBQUksQ0FBQyxFQUN0QyxTQUFTLEdBQUcsYUFBSSxDQUFDLENBQUMsQ0FBQyxFQUNuQixRQUFRLEdBQUcsYUFBSSxDQUFnQixJQUFJLENBQUMsQ0FBQztJQUVyQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxXQUFXLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLO1FBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRWxHLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztJQUNmLFNBQVMsYUFBYTtRQUNwQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ1gsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBQ0QsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksRUFDdEIsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQzdFLGdCQUFnQixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxjQUFjLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUNoRyxNQUFNLEdBQUcsMkJBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUV2RSxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNwQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUMxQixNQUFNLE9BQU8sR0FBZ0MsQ0FBQyxTQUFTLElBQUksaUJBQWlCLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BHLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDOUQsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRTVFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFpQixFQUFFLEVBQUU7WUFDakMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUNqQixTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDbEQsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUMsRUFBRSxHQUFHLEVBQUU7WUFDTixPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDZixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDZCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRWQsTUFBTSxLQUFLLEdBQUc7UUFDWixPQUFPLEVBQUUsSUFBSTtRQUNiLEtBQUssRUFBRSxFQUFFO0tBQ1YsQ0FBQztJQUVGLFNBQVMsT0FBTztRQUNkLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFBRSxPQUFPO1FBQ3ZCLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNmLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDdkIsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNuRSxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztTQUN6QjtRQUNELE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BDLElBQUksTUFBTSxFQUFFO1lBQ1YsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3JELE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNoQjthQUFNO1lBQ0wsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2QsS0FBSyxFQUFFLENBQUM7U0FDVDtJQUNILENBQUM7SUFBQSxDQUFDO0lBRUYsT0FBTztRQUNMLE9BQU87UUFDUCxPQUFPO1FBQ1AsT0FBTztRQUNQLE9BQU87UUFDUCxPQUFPO1FBQ1AsUUFBUTtRQUNSLFNBQVM7UUFDVCxNQUFNO1FBQ04sU0FBUztRQUNULFFBQVE7UUFDUixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ25DLE1BQU07WUFDSixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDYixPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1lBQ3BCLE9BQU8sRUFBRSxDQUFDO1lBQ1YsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BCLENBQUM7UUFDRCxPQUFPO1lBQ0wsSUFBSSxPQUFPLEVBQUUsRUFBRTtnQkFDYixPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2YsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNmLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQzthQUNuQjtRQUNILENBQUM7UUFDRCxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUc7WUFDbEIsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsR0FBRztnQkFDSCxHQUFHO2FBQ0osQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDVixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDdkIsQ0FBQztRQUNELGtCQUFrQixFQUFFLENBQUM7WUFDbkIsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFRLEVBQThCLEVBQUU7Z0JBQzlDLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQztvQkFBRSxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFnQyxDQUFDO2dCQUM1RyxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFO29CQUNqRCxFQUFFLEVBQUU7d0JBQ0YsUUFBUSxFQUFFLGFBQUksQ0FBQyxTQUFTLENBQUM7cUJBQzFCO2lCQUNGLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBZ0IsRUFBRSxFQUFFO29CQUNsQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO29CQUN2QixPQUFPLEdBQUcsQ0FBQztnQkFDYixDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQTtRQUNILENBQUMsQ0FBQyxFQUFFO1FBQ0osaUJBQWlCLENBQUMsR0FBUTtZQUN4QixPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQWtCLEVBQUUsRUFBRTtnQkFDOUYsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUIsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJO29CQUFFLE1BQU0sNEJBQTRCLENBQUM7Z0JBQ2pFLE9BQU87b0JBQ0wsR0FBRyxFQUFFLEdBQUc7b0JBQ1IsSUFBSSxFQUFFLElBQUksSUFBSSxJQUFJLENBQUMsR0FBRztvQkFDdEIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGVBQVEsQ0FBQyxzQkFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQy9DLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsdUJBQVEsQ0FBQyxHQUFHLEVBQUUsSUFBSyxDQUFDLENBQ2pEO2lCQUNvQixDQUFBO1lBQ3pCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztLQUNGLENBQUM7QUFDSixDQUFDO0FBNUhELDRCQTRIQztBQUFBLENBQUM7Ozs7O0FDL0pGLFNBQWdCLE9BQU8sQ0FBQyxHQUFRO0lBQzlCLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3ZELENBQUM7QUFGRCwwQkFFQztBQUVELFNBQWdCLFFBQVEsQ0FBQyxHQUFRLEVBQUUsSUFBd0I7SUFDekQsTUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBSSxHQUFHLENBQUMsQ0FBQztRQUN0RSxPQUFPLE9BQU8sQ0FBQztJQUNqQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBSSxHQUFHLENBQUMsQ0FBQztRQUN0RSxPQUFPLE9BQU8sQ0FBQztBQUNuQixDQUFDO0FBTkQsNEJBTUM7Ozs7O0FDWkQsdUNBQTRCO0FBRTVCLHFEQUF3RDtBQUN4RCxrQ0FBeUM7QUFDekMsaURBQTBDO0FBRTFDLDZDQUF5RztBQUV6RyxTQUFTLFNBQVMsQ0FBQyxJQUFzQjtJQUN2QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNqRCxTQUFTLE9BQU8sQ0FBQyxHQUFHO1FBQ2xCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3RDLE9BQU8sT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRTtZQUM3QyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRTtTQUM5RSxFQUFFLE9BQU8sR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBQ0QsT0FBTyxZQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRUQsSUFBSSxRQUFlLENBQUM7QUFFcEIsU0FBUyxtQkFBbUIsQ0FBQyxJQUFpQixFQUFFLEdBQVE7SUFDdEQsT0FBTztRQUNMLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUU7UUFDMUIsSUFBSSxFQUFFO1lBQ0osTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUNkLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFrQixDQUFDO2dCQUNwQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxFQUFFO29CQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBcUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztnQkFDL0csQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRTtvQkFDbEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDMUQsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTtvQkFDbkMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFxQixDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDdEUsSUFBSSxHQUFHO3dCQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2xDLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztZQUNELFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRTtnQkFDdEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtvQkFDZCxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBa0IsQ0FBQztvQkFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUM3RixDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDVixDQUFDO1NBQ0Y7S0FDRixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLElBQWlCLEVBQUUsS0FBeUIsRUFBRSxHQUFRO0lBQzNFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTTtRQUFFLE9BQU8sSUFBSSxDQUFDO0lBQy9CLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQy9CLE9BQU8sWUFBQyxDQUFDLGFBQWEsRUFBRTtRQUN0QixZQUFDLENBQUMsT0FBTyxFQUFFO1lBQ1QsWUFBQyxDQUFDLElBQUksRUFBRTtnQkFDTixZQUFDLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDNUIsWUFBQyxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzdCLFlBQUMsQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDdkMsQ0FBQztTQUNILENBQUM7UUFDRixZQUFDLENBQUMsT0FBTyxFQUFFLG1CQUFtQixDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzFELE9BQU8sWUFBQyxDQUFDLElBQUksRUFBRTtnQkFDYixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7Z0JBQ2IsS0FBSyxFQUFFO29CQUNMLFVBQVUsRUFBRSxJQUFJLENBQUMsR0FBRztvQkFDcEIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQztpQkFDeEQ7YUFDRixFQUFFO2dCQUNELFlBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUMzRCxZQUFDLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzFFLFlBQUMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3pCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLE1BQWM7SUFDaEMsSUFBSSxNQUFNLEtBQUssT0FBTztRQUFFLE9BQU8sWUFBQyxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN4RCxJQUFJLE1BQU0sS0FBSyxPQUFPO1FBQUUsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3hELE9BQU8sWUFBQyxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBRUQsU0FBUyxhQUFhLENBQUMsSUFBaUIsRUFBRSxLQUFhLEVBQUUsS0FBb0I7SUFDM0UsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07UUFBRSxPQUFPLElBQUksQ0FBQztJQUMzRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzFDLE9BQU8sWUFBQyxDQUFDLGFBQWEsRUFBRTtRQUN0QixZQUFDLENBQUMsT0FBTyxFQUFFO1lBQ1QsWUFBQyxDQUFDLElBQUksRUFBRTtnQkFDTixZQUFDLENBQUMsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDO2FBQ2hELENBQUM7U0FDSCxDQUFDO1FBQ0YsWUFBQyxDQUFDLE9BQU8sRUFBRTtZQUNULElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUN0QixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQXFCLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3JELElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTTtvQkFBRSxPQUFPO2dCQUN4QixNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUMxQixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUU7b0JBQ3BELElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUMzQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7aUJBQ2Y7O29CQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDNUIsQ0FBQyxDQUFDO1NBQ0gsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2xCLE9BQU8sUUFBUSxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxJQUFJLEVBQUU7Z0JBQzlELEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDWixLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTthQUM5QixFQUFFO2dCQUNELFlBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxZQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDcEUsWUFBQyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFlBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQzdELFlBQUMsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDaEMsWUFBQyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNyQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxJQUFpQixFQUFFLE1BQWM7SUFDakQsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUN0RCxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDOUQsSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsV0FBVyxHQUFHLFFBQVEsQ0FBQztJQUN0RCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssU0FBUztRQUFFLEdBQUcsR0FBRyxnQkFBZ0IsR0FBRyxHQUFHLENBQUM7SUFDeEYsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDN0IsQ0FBQztBQUVELFNBQVMsV0FBVyxDQUFDLElBQWlCLEVBQUUsSUFBaUI7SUFDdkQsU0FBUyxJQUFJLENBQUMsTUFBZTtRQUMzQixJQUFJLENBQUMsS0FBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBQ0QsT0FBTyxZQUFDLENBQUMsSUFBSSxFQUFFO1FBQ2IsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSTtLQUNwQixFQUFFO1FBQ0QsWUFBQyxDQUFDLGNBQWMsRUFBRTtZQUNoQixLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFO1NBQ3RCLEVBQUU7WUFDRCxZQUFDLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDN0csWUFBQyxDQUFDLFVBQVUsRUFBRTtnQkFDWixZQUFDLENBQUMsUUFBUSxFQUFFO29CQUNWLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO29CQUNwQixJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUNsRCxFQUFFLE1BQU0sQ0FBQztnQkFDVixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ2YsWUFBQyxDQUFDLFFBQVEsRUFBRTt3QkFDVixLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQzt3QkFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztxQkFDbkQsRUFBRSxNQUFNLENBQUM7b0JBQ1YsWUFBQyxDQUFDLFFBQVEsRUFBRTt3QkFDVixLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQzt3QkFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztxQkFDbEQsRUFBRSxRQUFRLENBQUM7aUJBQ2IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUNQLFlBQUMsQ0FBQyxRQUFRLEVBQUU7b0JBQ1YsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7b0JBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztpQkFDcEUsRUFBRSxPQUFPLENBQUM7YUFDWixDQUFDO1NBQ0gsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxJQUFpQixFQUFFLEtBQWEsRUFBRSxLQUEyQixFQUFFLEdBQVE7SUFDNUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNO1FBQUUsT0FBTyxFQUFFLENBQUM7SUFDN0IsT0FBTztRQUNMLFlBQUMsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDO1FBQ3JCLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRTtZQUNuQixZQUFDLENBQUMsT0FBTyxFQUFFLG1CQUFtQixDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUMxRCxPQUFPLFlBQUMsQ0FBQyxJQUFJLEVBQUU7b0JBQ2IsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO29CQUNiLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2lCQUNoQyxFQUFFO29CQUNELFlBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQztvQkFDakIsWUFBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQzlELENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ0osQ0FBQztLQUNILENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxPQUFPLENBQUMsSUFBaUIsRUFBRSxHQUFRLEVBQUUsSUFBd0I7SUFDcEUsSUFBSSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sWUFBQyxDQUFDLFNBQVMsR0FBRyx1QkFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRTtZQUN0RCxLQUFLLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCO2FBQ3RGO1NBQ0YsRUFBRSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBRUQsU0FBUyxPQUFPLENBQUMsSUFBaUIsRUFBRSxHQUFRLEVBQUUsSUFBd0I7SUFDcEUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDL0IsSUFBSSxJQUFJLENBQUMsU0FBUztRQUFFLE9BQU8sWUFBQyxDQUFDLFNBQVMsR0FBRyx1QkFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUM3RSxJQUFJLElBQUksQ0FBQyxTQUFTO1FBQUUsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1NBQ2pFLElBQUksSUFBSSxDQUFDLFdBQVc7UUFBRSxPQUFPLFlBQUMsQ0FBQyxTQUFTLEdBQUcsdUJBQVEsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7U0FDdEYsSUFBSSxJQUFJLENBQUMsWUFBWTtRQUFFLE9BQU8sWUFBQyxDQUFDLFNBQVMsR0FBRyx1QkFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztTQUN0RixJQUFJLElBQUksQ0FBQyxxQkFBcUI7UUFBRSxPQUFPLFlBQUMsQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQztTQUN4RixJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssSUFBSTtRQUFFLE9BQU8sSUFBSSxDQUFDO1NBQ25DLElBQUksSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQUUsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQzVELElBQUksSUFBSSxDQUFDLE9BQU87UUFBRSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdEQsWUFBQyxDQUFDLFNBQVMsR0FBRyx1QkFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RELFlBQUMsQ0FBQyxTQUFTLEdBQUcsdUJBQVEsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDdEQsT0FBTyxZQUFDLENBQUMsU0FBUyxHQUFHLHVCQUFRLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFO1FBQ3hDLEtBQUssRUFBRTtZQUNMLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxtQ0FBbUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNsRjtLQUNGLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDbEMsQ0FBQztBQUVELFNBQVMsV0FBVyxDQUFDLElBQWlCO0lBQ3BDLE9BQU8sWUFBQyxDQUFDLGlDQUFpQyxFQUFFO1FBQzFDLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1FBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztLQUN0RCxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLElBQWlCO0lBQ2xDLE9BQU8sWUFBQyxDQUFDLGdCQUFnQixFQUFFO1FBQ3pCLFlBQUMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN2RCxZQUFDLENBQUMsYUFBYSxFQUFFO1lBQ2YsWUFBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM1QyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO2dCQUNsQyxJQUFJLENBQUMsQ0FBQztnQkFDTixZQUFDLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLDZDQUE2QyxDQUFDLENBQUM7WUFDbkYsV0FBVyxDQUFDLElBQUksQ0FBQztTQUNsQixDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsV0FBVyxDQUFDLElBQWlCLEVBQUUsS0FBYTtJQUNuRCxPQUFPLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtRQUN6QixZQUFDLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzVDLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDZixZQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ2hDLFlBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDO1lBQ2QsV0FBVyxDQUFDLElBQUksQ0FBQztTQUNsQixDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsSUFBSSxDQUFDLElBQWlCO0lBQzdCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUM5QixJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMvQixJQUFJLElBQUksSUFBSSxzQkFBUyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQzNCLE1BQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQzNELFdBQVcsR0FBRyxhQUFhLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxhQUFhLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQyxFQUMvRSxRQUFRLEdBQUcsYUFBYSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUN2RSxJQUFJLFNBQVMsSUFBSSxXQUFXLElBQUksUUFBUTtZQUFFLFFBQVEsR0FBRyxZQUFDLENBQUMsVUFBVSxFQUFFLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDOztZQUNsRyxRQUFRLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2pDO1NBQU0sSUFBSSxJQUFJLElBQUksd0JBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNwQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3pCLElBQUksS0FBSyxDQUFDLE1BQU07WUFBRSxRQUFRLEdBQUcsWUFBQyxDQUFDLFVBQVUsRUFBRztnQkFDMUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDO2dCQUN2QyxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDdEQsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztnQkFDbEMsQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO2dCQUNsRCxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO2FBQ2tCO2lCQUNwRCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQVcsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDM0UsTUFBTSxDQUFDLFVBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUNsRCxJQUFJLElBQUksQ0FBQyxTQUFTO1lBQUUsUUFBUSxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUE7YUFDbEUsSUFBSSxJQUFJLENBQUMsU0FBUztZQUFFLFFBQVEsR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFBO2FBQ2xFLElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsWUFBWTtZQUFFLFFBQVEsR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDOztZQUNsRyxRQUFRLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ25DO0lBQ0QsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLElBQWlCLEVBQUUsT0FBZ0I7SUFDcEQsSUFBSSxPQUFPLENBQUMsR0FBRyxLQUFLLFVBQVUsSUFBSSxPQUFPLENBQUMsR0FBRyxLQUFLLGNBQWM7UUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDN0csT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN0RCxDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsSUFBaUI7SUFDbkMsT0FBTyxZQUFDLENBQUMsWUFBWSxFQUFFO1FBQ3JCLFlBQUMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUN4RCxDQUFDLE1BQU0sQ0FBQyxxQkFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBQyxJQUFpQjtJQUNwQyxPQUFPLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtRQUN6QixZQUFDLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkQsWUFBQyxDQUFDLHFCQUFxQixFQUFFO1lBQ3ZCLFlBQUMsQ0FBQyxJQUFJLEVBQUUsY0FBYyxDQUFDO1lBQ3ZCLFlBQUMsQ0FBQyxlQUFlLEVBQUUsNkRBQTZELENBQUM7WUFDakYsV0FBVyxDQUFDLElBQUksQ0FBQztTQUNsQixDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELElBQUksT0FBTyxHQUFRLEVBQUUsQ0FBQztBQUV0QixtQkFBd0IsSUFBaUI7SUFDdkMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUMvQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtRQUFFLE9BQU87SUFDaEMsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxFQUMvQixNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFDeEIsWUFBWSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQ2pDLE9BQU8sR0FBRyxDQUFDLFlBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFDakYsT0FBTyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNsRyxPQUFPLFlBQUMsQ0FBQyw4QkFBOEIsRUFBRTtRQUN2QyxLQUFLLEVBQUU7WUFDTCxPQUFPO1lBQ1AsTUFBTSxFQUFFLFlBQVk7WUFDcEIsT0FBTyxFQUFFLENBQUMsWUFBWSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7U0FDM0U7UUFDRCxJQUFJLEVBQUU7WUFDSixNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBRSxLQUFLLENBQUMsR0FBbUIsQ0FBQyxTQUFTLEdBQUcsQ0FBQztZQUN6RCxTQUFTLENBQUMsQ0FBQyxFQUFFLEtBQUs7Z0JBQ2hCLElBQUksQ0FBQyxJQUFJLElBQUksT0FBTyxLQUFLLElBQUksQ0FBQyxHQUFHO29CQUFFLE9BQU87Z0JBQ3pDLEtBQUssQ0FBQyxHQUFtQixDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7Z0JBQ3pDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQ3JCLENBQUM7U0FDRjtLQUNGLEVBQUU7UUFDRCxZQUFDLENBQUMsYUFBYSxDQUFDO1FBQ2hCLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDbEUsS0FBSyxFQUFFLGVBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQ3pDLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDMUUsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUE3QkQsNEJBNkJDO0FBQUEsQ0FBQzs7Ozs7QUMzVEYsU0FBZ0IsT0FBTyxDQUFDLFFBQWdCLEVBQUUsT0FBbUIsRUFBRSxHQUFRLEVBQUUsTUFBTSxFQUFFLFNBQWtCO0lBQ2pHLElBQUksR0FBVyxDQUFDO0lBQ2hCLE1BQU0sTUFBTSxHQUFRO1FBQ2xCLEdBQUc7UUFDSCxLQUFLLEVBQUUsRUFBRTtLQUNWLENBQUM7SUFDRixJQUFJLENBQUMsU0FBUztRQUFFLE1BQU0sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7SUFDekQsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxLQUFLLFNBQVM7UUFBRSxHQUFHLEdBQUcsU0FBUyxDQUFDO1NBQ25EO1FBQ0gsR0FBRyxHQUFHLFVBQVUsQ0FBQztRQUNqQixNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDO1FBQzVCLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzdDLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0tBQ2hEO0lBQ0QsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ1osR0FBRyxFQUFFLFFBQVEsR0FBRyxHQUFHO1FBQ25CLElBQUksRUFBRSxNQUFNO1FBQ1osS0FBSyxFQUFFLElBQUk7S0FDWixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBMEIsRUFBRSxFQUFFO1FBQ3JDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsT0FBTyxJQUFtQixDQUFDO0lBQzdCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXZCRCwwQkF1QkM7QUFFRCxTQUFnQixTQUFTLENBQUMsUUFBZ0IsRUFBRSxPQUFtQixFQUFFLEdBQVE7SUFDdkUsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sS0FBSyxjQUFjLElBQUksT0FBTyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUN2RyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDWixHQUFHLEVBQUUsUUFBUSxHQUFHLEdBQUcsR0FBRyxnQkFBZ0I7UUFDdEMsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFO1FBQ2IsS0FBSyxFQUFFLElBQUk7S0FDWixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBNEIsRUFBRSxFQUFFO1FBQ3ZDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsT0FBTyxJQUFxQixDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQVhELDhCQVdDOzs7OztBQzhERCxTQUFnQixTQUFTLENBQUMsQ0FBZTtJQUN2QyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3JCLENBQUM7QUFGRCw4QkFFQztBQUNELFNBQWdCLFdBQVcsQ0FBQyxDQUFlO0lBQ3pDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDdkIsQ0FBQztBQUZELGtDQUVDOzs7OztBQ3pHRCxtQ0FBOEI7QUFJOUIsU0FBZ0IsSUFBSSxDQUFDLEdBQWlCLEVBQUUsSUFBaUIsRUFBRSxNQUFrQjtJQUUzRSxNQUFNLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxZQUFZLENBQUM7SUFFOUQsSUFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7SUFDaEMsTUFBTSxPQUFPLEdBQUcsYUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRTVCLFNBQVMsS0FBSyxDQUFDLEVBQWtCO1FBQy9CLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVELFNBQVMsUUFBUSxDQUFDLEdBQW1CLEVBQUUsR0FBbUI7UUFDeEQsT0FBTyxHQUFHLENBQUMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsU0FBUyxvQkFBb0IsQ0FBQyxJQUFrQjtRQUM5QyxPQUFPLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBUyxFQUFFO1lBQ2pDLE9BQU8sUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsU0FBUyxRQUFRLENBQUMsR0FBbUIsRUFBRSxHQUFtQjtRQUN4RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3BFLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFO2dCQUM3QixJQUFJLEdBQUcsQ0FBQyxRQUFRO29CQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDaEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUNwQjtTQUNGO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsU0FBUyxRQUFRLENBQUMsRUFBa0I7UUFDbEMsSUFBSSxHQUFHLENBQUMsUUFBUTtZQUNoQixPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pFLDRCQUE0QjtRQUM1QixPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFRCxTQUFTLFlBQVksQ0FBQyxFQUFrQjtRQUN0QyxPQUFPLEVBQUUsQ0FBQyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxTQUFTLE1BQU07UUFDYiw2QkFBNkI7UUFDN0IsU0FBUyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBUyxFQUFFLEVBQUUsQ0FBQztZQUN6QyxPQUFPLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBUyxDQUFDLEVBQUUsQ0FBQztnQkFDbkMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7WUFDbkMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztRQUNsQixDQUFDLENBQUMsQ0FBQztRQUNILDZCQUE2QjtRQUM3QixTQUFTLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFTLEVBQUUsRUFBRSxDQUFDO1lBQ3pDLE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFTLENBQUMsRUFBRSxDQUFDO2dCQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQTtZQUNqQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1FBQ2xCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELE1BQU0sRUFBRSxDQUFDO0lBRVQsU0FBUyxlQUFlO1FBQ3RCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNkLE1BQU0sRUFBRSxDQUFDO1FBQ1QsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLFdBQVcsQ0FBQyxFQUFrQjtRQUNyQyxFQUFFLEdBQUcsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDcEMsSUFBSSxVQUFVLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFTLENBQUM7WUFDMUMsT0FBTyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxVQUFVLENBQUMsTUFBTTtZQUFFLE9BQU8sS0FBSyxDQUFDO1FBQ3BDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLElBQUk7UUFDWCxJQUFJLEdBQUcsQ0FBQyxRQUFRO1lBQUUsT0FBTztRQUN6QixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDZCxNQUFNLEVBQUUsQ0FBQztRQUNULENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDTCxNQUFNLEVBQUUsTUFBTTtZQUNkLEdBQUcsRUFBRSxPQUFPO1lBQ1osSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBQy9CLFdBQVcsRUFBRSxrQkFBa0I7U0FDaEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLElBQUk7WUFDbkIsSUFBSSxJQUFJLENBQUMsTUFBTTtnQkFBRSxlQUFlLEVBQUUsQ0FBQztpQkFDOUI7Z0JBQ0gsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNmLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQzthQUM5QjtZQUNELE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsV0FBVyxDQUFDLElBQWtCO1FBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUTtZQUFFLE9BQU87UUFDMUIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2QsTUFBTSxFQUFFLENBQUM7UUFDVCxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ0wsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRztZQUM3QixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBUyxFQUFFO2dCQUNoRSxPQUFPLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBQ3ZCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFTLEVBQUU7Z0JBQ2hCLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQixDQUFDLENBQUMsQ0FBQztZQUNILFdBQVcsRUFBRSxrQkFBa0I7U0FDaEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLElBQUk7WUFDbkIsSUFBSSxJQUFJLENBQUMsTUFBTTtnQkFBRSxlQUFlLEVBQUUsQ0FBQztpQkFDOUI7Z0JBQ0gsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNmLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQzthQUM5QjtZQUNELE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsT0FBTztRQUNMLFFBQVEsQ0FBQyxFQUFrQjtZQUN6QixFQUFFLEdBQUcsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO2dCQUFFLE9BQU87WUFDN0IsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNuQixNQUFNLEVBQUUsQ0FBQztZQUNULElBQUksRUFBRSxDQUFDO1FBQ1QsQ0FBQztRQUNELFdBQVc7UUFDWCxXQUFXLENBQUMsS0FBSztZQUNmLFNBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFBO1lBQ2pELElBQUksRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTO1FBQ3JCLFFBQVE7UUFDUixPQUFPO1FBQ1AsUUFBUSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUTtRQUN4QixvQkFBb0I7UUFDcEIsV0FBVztRQUNYLGVBQWU7S0FDaEIsQ0FBQztBQUNKLENBQUM7QUEzSUQsb0JBMklDOzs7OztBQy9JRCx1Q0FBNEI7QUFJNUIsNENBQStDO0FBQy9DLGtDQUFrRDtBQUNsRCxpQ0FBb0M7QUFFcEMsU0FBUyxRQUFRLENBQUMsSUFBaUIsRUFBRSxLQUFtQixFQUFFLE1BQXNCO0lBQzlFLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQixJQUFJLENBQUMsU0FBUztRQUFFLE9BQU87SUFDdkIsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2hELElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTTtRQUFFLE9BQU87SUFDeEIsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFTLEVBQUU7UUFDaEMsT0FBTyxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUNILE9BQU8sWUFBQyxDQUFDLCtCQUErQixFQUFFO1FBQ3hDLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1FBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztLQUN2RCxFQUFFO1FBQ0QsWUFBQyxDQUFDLE1BQU0sRUFBRTtZQUNSLFlBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsbUJBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1RCxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2QsWUFBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyRSxZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUM7U0FDckQsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxJQUFpQixFQUFFLEtBQW1CO0lBQ3hELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZHLE9BQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMxQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7UUFDYixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7UUFDYixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUk7UUFDZCxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUk7UUFDZCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7S0FDbEIsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxtQkFBd0IsSUFBaUIsRUFBRSxLQUFtQjtJQUM1RCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUMsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFO1FBQ3ZCLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLEVBQUU7S0FDcEMsRUFBRTtRQUNELEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGFBQWEsRUFBRSxjQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1FBQ3BELFlBQUMsQ0FBQyxTQUFTLEVBQUU7WUFDWCxZQUFDLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFDckQsWUFBQyxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVMsS0FBSyxFQUFFLENBQUM7Z0JBQzlDLE9BQU8sWUFBQyxDQUFDLGdCQUFnQixFQUFFO29CQUN6QixLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQztpQkFDckIsRUFBRTtvQkFDRCxZQUFDLENBQUMsT0FBTyxFQUFFO3dCQUNULElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFOzRCQUN0QixLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUNyQixDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7d0JBQ3RCLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO3FCQUNoQixFQUFFLEdBQUcsQ0FBQztvQkFDUCxZQUFDLENBQUMsTUFBTSxFQUFFLDJCQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ2xDLENBQUMsQ0FBQTtZQUNKLENBQUMsQ0FBQyxDQUFDO1lBQ0gsWUFBQyxDQUFDLGlCQUFpQixFQUFFO2dCQUNuQixLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFO2dCQUMvQixLQUFLLEVBQUUsZUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBQ3hDLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUMvRSxFQUFFO2dCQUNELFdBQVcsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLE1BQU0sRUFBRTtvQkFDdEIsWUFBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO29CQUNsRCxZQUFDLENBQUMsTUFBTSxFQUFFLDJCQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ25DLENBQUMsQ0FBQyxDQUFDO29CQUNKLFlBQUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsMENBQTBDLENBQUMsQ0FBQzthQUN4RSxDQUFDO1NBQ0gsQ0FBQztRQUNGLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO0tBQ3RELENBQUMsQ0FBQztBQUNMLENBQUM7QUFwQ0QsNEJBb0NDOzs7OztBQzVFRCx1Q0FBNEI7QUFDNUIseUNBQWdEO0FBQ2hELG1DQUFpQztBQUVqQyxpQ0FBa0M7QUFjbEMsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLElBQUksSUFBMkIsQ0FBQztJQUNoQyxJQUFJLFFBQVEsR0FBVyxDQUFDLENBQUM7SUFDekIsU0FBUyxTQUFTO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBQUEsQ0FBQztJQUNGLE9BQU87UUFDTCxLQUFLO1lBQ0gsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUN2QixJQUFJLENBQUMsSUFBSSxJQUFJLElBQUssQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDakMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDWixRQUFRLEdBQUcsQ0FBQyxDQUFDO2FBQ2Q7WUFDRCxPQUFPO2dCQUNMLElBQUk7Z0JBQ0osUUFBUTtnQkFDUixTQUFTLEVBQUUsU0FBUyxFQUFFO2FBQ3ZCLENBQUM7UUFDSixDQUFDO1FBQ0QsSUFBSTtZQUNGLElBQUksU0FBUyxFQUFFLEVBQUU7Z0JBQ2YsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pFLE9BQU8sSUFBSSxDQUFDO2FBQ2I7UUFDSCxDQUFDO1FBQ0QsSUFBSTtZQUNGLElBQUksU0FBUyxFQUFFLEVBQUU7Z0JBQ2YsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDckMsT0FBTyxJQUFJLENBQUM7YUFDYjtRQUNILENBQUM7UUFDRCxPQUFPLENBQUMsRUFBRTtZQUNSLElBQUksU0FBUyxFQUFFLEVBQUU7Z0JBQ2YsRUFBRSxHQUFHLGdCQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO2dCQUNqQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzFELE9BQU8sSUFBSSxDQUFDO2FBQ2I7UUFDSCxDQUFDO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUF2Q0Qsb0JBdUNDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCLEVBQUUsU0FBcUI7SUFDM0QsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLO1FBQUUsT0FBTztJQUNyQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2hDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUztRQUFFLE9BQU87SUFDN0IsTUFBTSxVQUFVLEdBQUcsU0FBUyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDaEQsT0FBTyxZQUFDLENBQUMsbUJBQW1CLEVBQUU7UUFDNUIsSUFBSSxFQUFFLGVBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNsQixFQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUMvQixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBcUIsRUFDcEMsRUFBRSxHQUFHLFFBQVEsQ0FDVixNQUFNLENBQUMsVUFBMEIsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDO29CQUMxRCxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FDckMsQ0FBQztnQkFDSixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDdEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2hCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO0tBQ0gsRUFDQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUU7UUFDbkMsTUFBTSxPQUFPLEdBQUcsVUFBVSxJQUFJLFNBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLE9BQU87WUFBRSxPQUFPLFlBQUMsQ0FBQyxNQUFNLEVBQUU7Z0JBQzdCLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEtBQUssS0FBSyxDQUFDLFFBQVEsRUFBRTtnQkFDMUMsS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRTthQUN6QixFQUFFLDZCQUFrQixDQUFDO2dCQUNwQixRQUFRLEVBQUUsSUFBSTtnQkFDZCxRQUFRLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRTtnQkFDN0IsVUFBVSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUU7YUFDaEMsRUFBRSxJQUFJLENBQUUsQ0FBQyxDQUFDO0lBQ2IsQ0FBQyxDQUFDLENBQ0gsQ0FBQztBQUNKLENBQUM7QUE5QkQsb0JBOEJDOzs7OztBQ3pGRCw4Q0FBOEM7QUFFOUMsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBRW5CLFNBQWdCLEtBQUssQ0FBQyxTQUFzQjtJQUUxQyxvREFBb0Q7SUFDcEQsSUFBSSxNQUFNLENBQUMsTUFBTTtRQUFFLE9BQU87SUFFMUIsTUFBTSxRQUFRLEdBQUcsR0FBRyxFQUFFO1FBQ3BCLElBQUksU0FBUyxDQUFDLG1CQUFtQixFQUFFO1lBQUUsU0FBUyxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzdFLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUMzQixDQUFDLENBQUE7SUFFRCxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTNCLFNBQVMsQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUU5QyxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ1gsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNsRCxNQUFNLEdBQUcsSUFBSSxDQUFDO0tBQ2Y7QUFDSCxDQUFDO0FBbEJELHNCQWtCQztBQUVELFNBQVMsYUFBYSxDQUFDLFNBQXNCO0lBQzNDLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFnQixFQUMzRCxLQUFLLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBZ0IsRUFDMUUsSUFBSSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQWdCLENBQUM7SUFDbEUsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksRUFBRTtRQUN6QixNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDdEQsSUFBSSxNQUFNO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsUUFBUSxNQUFNLGFBQWEsQ0FBQztLQUM3RDtBQUNILENBQUM7Ozs7O0FDaENELHVDQUE0QjtBQUU1Qiw2Q0FBMEM7QUFLMUMsMENBQXlDO0FBR3pDLFNBQWdCLE1BQU0sQ0FBQyxJQUFpQjtJQUN0QyxPQUFPLFlBQUMsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRTtRQUM5QyxJQUFJLEVBQUU7WUFDSixNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBVyxDQUFFLEtBQUssQ0FBQyxHQUFtQixFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUM3RSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBQ3JCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO29CQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBcUIsQ0FBQyxDQUFDO2dCQUNsRixJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztZQUN6QyxDQUFDO1lBQ0QsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUU7U0FDekM7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDO0FBWkQsd0JBWUM7QUFFRCxTQUFnQixPQUFPLENBQUMsTUFBYSxFQUFFLEdBQVEsRUFBRSxJQUFhO0lBQzVELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNsQixNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QyxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSSxJQUFJLE1BQU0sRUFBRTtRQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUc7WUFDWixLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUs7WUFDbEIsSUFBSTtZQUNKLFFBQVEsRUFBRSxJQUFJO1NBQ2YsQ0FBQztRQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDMUI7QUFDSCxDQUFDO0FBWEQsMEJBV0M7QUFFRCxTQUFnQixVQUFVLENBQUMsSUFBaUI7SUFDMUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQzdELE1BQU0sTUFBTSxHQUFHO1FBQ2IsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1FBQ3pCLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRztRQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztRQUNqQixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7UUFDdkIsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUU7UUFDL0IsV0FBVyxFQUFFLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUs7UUFDN0MsY0FBYyxFQUFFLElBQUksQ0FBQyxJQUFJO1FBQ3pCLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUs7UUFDdEIsT0FBTyxFQUFFO1lBQ1AsSUFBSSxFQUFFLEtBQUs7WUFDWCxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQVEsQ0FBQyxLQUFLO1lBQzFCLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBUSxDQUFDLEtBQUs7WUFDMUIsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXO1lBQzNCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtTQUM1QjtRQUNELE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUTtZQUNuQixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVk7WUFDL0IsTUFBTSxDQUFDLFFBQVE7Z0JBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLO29CQUFFLGdCQUFZLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3RGLENBQUM7U0FDRjtRQUNELFVBQVUsRUFBRTtZQUNWLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVyxDQUFDLE9BQU87WUFDakMsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXO1lBQzNCLE1BQU0sRUFBRTtnQkFDTixHQUFHLEVBQUUsSUFBSSxDQUFDLFlBQVk7YUFDdkI7U0FDRjtRQUNELFFBQVEsRUFBRTtZQUNSLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLO1lBQ3BCLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7U0FDdkQ7UUFDRCxTQUFTLEVBQUU7WUFDVCxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVM7WUFDeEIsS0FBSyxFQUFFLElBQUksQ0FBQyxTQUFTO1NBQ3RCO1FBQ0QsU0FBUyxFQUFFO1lBQ1QsUUFBUSxFQUFFLElBQUksQ0FBQyxpQkFBaUI7U0FDakM7UUFDRCxrQkFBa0IsRUFBRSxJQUFJO0tBQ3pCLENBQUM7SUFDRixJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWhELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFoREQsZ0NBZ0RDOzs7OztBQ3JGRCxxQ0FBcUM7QUFFckMsaUNBQWlDO0FBQ2pDLG1DQUFnQztBQUNoQyx1Q0FBNEI7QUFHNUIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFhLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBYSxFQUFFLEVBQUU7SUFDdEQsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ25CLENBQUMsRUFBRSxDQUFDO0FBQ04sQ0FBQyxDQUFBO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUztRQUFFLE9BQU87SUFDOUIsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUM3QixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFLFVBQVUsQ0FBQztRQUNqQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ0osR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksRUFBRSxTQUFTLENBQUMsRUFBRSxVQUFVLENBQUM7UUFDN0MsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNKLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLEVBQUUsVUFBVSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDSixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxFQUFFLFVBQVUsQ0FBQztRQUM5QyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ0osR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUM7UUFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNKLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEVBQUUsVUFBVSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtZQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDSixHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDdkMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ0osR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDSixHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUM7UUFDdkIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRUosSUFBSSxJQUFJLENBQUMsS0FBSztRQUFFLE9BQU87SUFFdkIsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDO1FBQzNCLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUMvQixJQUFJLEVBQUU7WUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDaEIsSUFBSSxJQUFJLENBQUMsYUFBYTtZQUFFLE9BQU87YUFDL0IsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtZQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQzs7WUFDOUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzFCLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFSixJQUFJLElBQUksQ0FBQyxhQUFhO1FBQUUsT0FBTztJQUUvQixHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDckMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ0osR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBQzVDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQztRQUN2QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNKLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0lBQ2pELEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQztRQUN2QixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDSixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7UUFDZCxNQUFNLGNBQWMsR0FBRyxDQUFDLEdBQVcsRUFBRSxRQUFnQixFQUFFLEVBQUU7WUFDdkQsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDO2dCQUN2QixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUNmLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztnQkFDbEQsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ04sQ0FBQyxDQUFDO1FBQ0YsY0FBYyxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO1FBQ2pELGNBQWMsQ0FBQyxHQUFHLEVBQUUseUJBQXlCLENBQUMsQ0FBQztLQUNoRDtBQUNILENBQUM7QUEvRUQsb0JBK0VDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLE9BQU8sYUFBSyxDQUFDO1FBQ1gsS0FBSyxFQUFFLGVBQWU7UUFDdEIsUUFBUSxDQUFDLEVBQWU7WUFDdEIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtZQUM5QyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRixDQUFDO1FBQ0QsT0FBTztZQUNMLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1lBQzFCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDO1FBQ0QsT0FBTyxFQUFFO1lBQ1AsWUFBQyxDQUFDLGdCQUFnQixFQUFFLGNBQU8sRUFBRSxDQUFDO1NBQy9CO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWZELG9CQWVDOzs7OztBQ3pHRCxpQ0FBOEI7QUFDOUIsaUNBQTBCO0FBQzFCLGlDQUEwQjtBQXVDakIsZUF2Q0YsY0FBSSxDQXVDRTtBQXRDYiw2Q0FBMEM7QUFDMUMsNkJBQTZCO0FBRTdCLHVDQUFnQztBQUVoQyxrREFBMkM7QUFDM0MsNERBQXFEO0FBQ3JELGdEQUE2QztBQUU3QyxxQkFBUyxFQUFFLENBQUM7QUFFQyxRQUFBLEtBQUssR0FBRyxlQUFJLENBQUMsQ0FBQyxlQUFLLEVBQUUsb0JBQVUsQ0FBQyxDQUFDLENBQUM7QUFFL0MsU0FBZ0IsS0FBSyxDQUFDLElBQWlCO0lBRXJDLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQWdCLENBQUM7SUFFckUsSUFBSSxLQUFZLEVBQUUsSUFBaUIsQ0FBQztJQUVwQyxTQUFTLE1BQU07UUFDYixLQUFLLEdBQUcsYUFBSyxDQUFDLEtBQUssRUFBRSxjQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsSUFBSSxHQUFHLElBQUksY0FBUSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUVsQyxNQUFNLFNBQVMsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQzVCLEtBQUssR0FBRyxhQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUV2QyxPQUFPO1FBQ0wsYUFBYSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTztRQUNsQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUk7UUFDckIsVUFBVSxDQUFDLEVBQVU7WUFDbkIsSUFBSSxJQUFJLENBQUMsS0FBSztnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM1QyxDQUFDO0tBQ0YsQ0FBQTtBQUNILENBQUM7QUF2QkQsc0JBdUJDO0FBSUQsdURBQXVEO0FBQ3ZELDZDQUE2QztBQUM3QyxNQUFNLENBQUMsV0FBVyxHQUFHLHlCQUFXLENBQUM7QUFDakMsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7Ozs7O0FDakQxQix1Q0FBNEI7QUFHNUIsaUNBQXdDO0FBU3hDLFNBQWdCLEtBQUssQ0FBQyxDQUFRO0lBQzVCLE9BQU8sWUFBQyxDQUFDLG1CQUFtQixFQUFFO1FBQzVCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUM7S0FDL0IsRUFBRTtRQUNELFlBQUMsQ0FBQyw4QkFBOEIsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFO1lBQzFDLElBQUksRUFBRSxlQUFRLENBQUMsRUFBRSxDQUFDLEVBQUU7Z0JBQ2xCLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQztnQkFDdkQsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLENBQUMsQ0FBQztTQUNILEVBQUU7WUFDRCxZQUFDLENBQUMsWUFBWSxFQUFFO2dCQUNkLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUU7Z0JBQzNCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUM7YUFDL0IsQ0FBQztZQUNGLFlBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQztTQUNwQixDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWpCRCxzQkFpQkM7QUFFRCxTQUFnQixNQUFNLENBQUMsSUFBWTtJQUNqQyxPQUFPLFlBQUMsQ0FBQyx5QkFBeUIsRUFDaEMsWUFBQyxDQUFDLGVBQWUsRUFBRTtRQUNqQixLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO0tBQzFCLEVBQUUsSUFBSSxDQUFDLENBQ1QsQ0FBQztBQUNKLENBQUM7QUFORCx3QkFNQzs7Ozs7QUNyQ0QsdUNBQTRCO0FBRTVCLGlDQUFpRTtBQUNqRSxtQ0FBaUM7QUFDakMsaUNBQTBDO0FBUTFDLFNBQWdCLFNBQVMsQ0FBQyxHQUFRO0lBQ2hDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdkMsQ0FBQztBQUZELDhCQUVDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLE1BQU07SUFDakMsT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsWUFBQyxDQUFDLE9BQU8sRUFBRTtRQUNwQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRTtLQUM3QixFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLENBQUM7QUFKRCxvQ0FJQztBQUVELFNBQVMsVUFBVSxDQUFDLENBQUM7SUFDbkIsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3RCLENBQUM7QUFFRCxTQUFnQixlQUFlLENBQUMsR0FBUSxFQUFFLFFBQWtCO0lBQzFELE9BQU8sU0FBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMxRSxDQUFDO0FBRkQsMENBRUM7QUFFRCxTQUFnQixXQUFXLENBQUMsR0FBUSxFQUFFLFFBQWtCO0lBQ3RELE9BQU8sWUFBQyxDQUFDLE9BQU8sRUFBRSxlQUFlLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDcEQsQ0FBQztBQUZELGtDQUVDO0FBRUQsU0FBZ0IsVUFBVSxDQUFDLEdBQVEsRUFBRSxJQUFlO0lBQ2xELE1BQU0sRUFBRSxHQUFRLFlBQVMsQ0FBQyxXQUFXLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3JGLE9BQU8sQ0FBQyxZQUFDLENBQUMsS0FBSyxFQUFFLG1CQUFXLENBQUMsSUFBSSxDQUFDLEdBQUksQ0FBQyxDQUFDLENBQUM7U0FDdEMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUN4RSxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FDckIsZ0JBQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLGtCQUFhLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDcEQsZ0JBQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNwRCxDQUNGLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ1osQ0FBQztBQVRELGdDQVNDO0FBRUQsU0FBZ0Isa0JBQWtCLENBQUMsR0FBUSxFQUFFLElBQUk7SUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyxDQUFDLG1CQUFtQjtJQUMxQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3pFLENBQUM7QUFIRCxnREFHQzs7Ozs7QUNoREQsaUNBQXVDO0FBQ3ZDLG1DQUFpQztBQUVqQyxTQUFTLFlBQVksQ0FBQyxJQUFlO0lBQ25DLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVMsQ0FBQztRQUNwQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ2xCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxLQUFZLEVBQUUsTUFBYyxFQUFFLFFBQXFCLEVBQUUsT0FBZTtJQUNsRyxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO0lBQzVCLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTztJQUNqQixNQUFNLFNBQVMsR0FBRyxPQUFPLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUM1QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzVCLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUM3QyxNQUFNLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBUyxDQUFDO1lBQ3hHLE9BQU8sQ0FBQyxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLEtBQUs7WUFBRSxPQUFPLElBQUksQ0FBQztLQUN4QjtJQUNELE9BQU87QUFDVCxDQUFDO0FBWkQsMENBWUM7QUFFRCxTQUFnQixVQUFVLENBQUMsUUFBcUIsRUFBRSxVQUF3QztJQUN4RixNQUFNLEtBQUssR0FBZ0IsRUFBRSxDQUFDO0lBQzlCLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQztJQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN4QyxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMzQixJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDOUMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxzQkFBYyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMzRSxJQUFJLElBQUksR0FBRyxTQUFTLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQztnQkFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlEO0tBQ0Y7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFaRCxnQ0FZQztBQUVELFNBQVMsWUFBWSxDQUFDLEdBQUc7SUFDdkIsT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlDLENBQUM7QUFFRCxTQUFnQixlQUFlLENBQUMsUUFBUSxFQUFFLElBQUk7SUFDNUMsSUFBSSxnQkFBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7UUFBRSxPQUFPO0lBQ3BDLE1BQU0sVUFBVSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUMsSUFBSSxrQkFBa0IsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlCLEtBQUssQ0FBQyxJQUFJLFFBQVE7UUFDaEIsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFVBQVU7WUFDOUMsa0JBQWtCLEVBQUUsQ0FBQztJQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLGtCQUFrQixHQUFHLENBQUMsQ0FBQztBQUMxQyxDQUFDO0FBUkQsMENBUUM7QUFBQSxDQUFDOzs7OztBQ2hERix1Q0FBNEI7QUFDNUIsaUNBQWdEO0FBUWhELFNBQVMsY0FBYyxDQUFDLEtBQWdCO0lBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQUUsT0FBTyxFQUFFLENBQUM7SUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHO1FBQUUsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFBRSxPQUFPLEVBQUUsQ0FBQztJQUN6QixJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ2xGLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBUyxJQUFJLEVBQUUsQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUFFLE9BQU87UUFDM0IsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO1lBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQTs7WUFDbkQsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNiLENBQUMsSUFBSSxtQkFBVyxDQUFDLElBQUksQ0FBQyxHQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakUsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNsQixDQUFDO0FBRUQsU0FBZ0IsYUFBYSxDQUFDLElBQWlCO0lBQzdDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3ZCLElBQUksR0FBRyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMzRCxJQUFJLElBQUksR0FBNEIsRUFBRSxDQUFDO0lBQ3ZDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEtBQUssVUFBVTtRQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6QyxJQUFJLENBQUMsQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLFVBQVUsS0FBSyxrQkFBVTtRQUM3QyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ25DLElBQUksSUFBSSxDQUFDLE1BQU07UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFTLENBQUM7WUFDdkIsT0FBTyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ3pDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDO0lBQy9CLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQWJELHNDQWFDO0FBRUQsU0FBZ0IsZUFBZSxDQUFDLEtBQWdCO0lBQzlDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQUUsT0FBTyxFQUFFLENBQUM7SUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHO1FBQUUsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFBRSxPQUFPLEVBQUUsQ0FBQztJQUN6QixNQUFNLElBQUksR0FBZ0IsRUFBRSxDQUFDO0lBQzdCLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztRQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBQyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzlGLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDbkIsSUFBSSxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7WUFBRSxPQUFPO1FBQzNCLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFFLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBQyxDQUFDLEtBQUssRUFBRSxtQkFBVyxDQUFDLElBQUksQ0FBQyxHQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFaRCwwQ0FZQzs7Ozs7QUNuREQsaUNBQXVDO0FBRXZDLCtCQUF3QztBQUN4Qyw4Q0FBZ0Q7QUFDaEQsMkRBQStEO0FBRy9ELG1DQUE2QztBQUM3Qyx3Q0FBeUM7QUFDekMsc0NBQXVDO0FBd0N2QyxTQUFnQixJQUFJLENBQUMsSUFBaUIsRUFBRSxhQUEyQjtJQUVqRSxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUMxQyxPQUFPLEdBQUcsYUFBSSxDQUFDLElBQUksQ0FBQyxFQUNwQixPQUFPLEdBQUcsYUFBSSxDQUFpQixJQUFJLENBQUMsRUFDcEMsUUFBUSxHQUFHLGFBQUksQ0FBTSxJQUFJLENBQUMsRUFDMUIsT0FBTyxHQUFHLGFBQUksQ0FBaUIsSUFBSSxDQUFDLEVBQ3BDLE1BQU0sR0FBRyxhQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFckIsU0FBUyxrQkFBa0I7UUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFO1lBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzlDLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ2pELENBQUM7SUFFRCxTQUFTLFdBQVcsQ0FBQyxJQUFlLEVBQUUsUUFBZ0IsQ0FBQztRQUNyRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUs7WUFBRSxPQUFPLElBQUksQ0FBQztRQUNuRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3pCLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLEVBQUUsSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNyRyxDQUFDO0lBRUQsU0FBUyxRQUFRLENBQUMsSUFBZTtRQUMvQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3pCLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUNiLEtBQUssQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLEVBQUUsRUFBRSxhQUFhLEVBQUUsQ0FBQztZQUM5RCxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQzVELENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNaLENBQUM7SUFBQSxDQUFDO0lBRUYsTUFBTSxVQUFVLEdBQUc7UUFDakIsSUFBSSxFQUFFLE1BQU07UUFDWixJQUFJLEVBQUUsTUFBTTtRQUNaLElBQUksRUFBRSxNQUFNO1FBQ1osSUFBSSxFQUFFLE1BQU07S0FDYixDQUFDO0lBRUYsU0FBUyxXQUFXLENBQUMsR0FBeUM7UUFDNUQsT0FBTyxHQUFHLElBQUksQ0FDWixHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNYLElBQUksRUFBRSxHQUFHLENBQUMsTUFBTSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7U0FDeEMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQ2QsQ0FBQztJQUNKLENBQUM7SUFDRCxTQUFTLFdBQVcsQ0FBQyxJQUFlO1FBQ2xDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZGLENBQUM7SUFFRCxTQUFTLFdBQVcsQ0FBQyxJQUFlLEVBQUUsSUFBZSxFQUFFLElBQWU7UUFDcEUsSUFBSSxPQUFPLEVBQUUsSUFBSSxDQUFDO1FBQ2xCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFakMsSUFBSSxJQUFJLEtBQUssV0FBVztZQUFFLE9BQU8sR0FBRyxVQUFVLENBQUM7YUFDMUM7WUFDSCxNQUFNLFFBQVEsR0FBUyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQ2hELENBQUMsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBYSxDQUNyRSxDQUFDO1lBQ0YsTUFBTSxRQUFRLEdBQVMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBTSxDQUFDO1lBQzlELE1BQU0sS0FBSyxHQUFHLENBQUMsc0JBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUU5RSxJQUFJLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBRSxDQUFDO1lBQzFCLElBQUksSUFBSSxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxLQUFLLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBSSxDQUFDO2dCQUFFLElBQUksR0FBRyxJQUFJLENBQUM7WUFFckUsSUFBSSxDQUFDLElBQUk7Z0JBQUUsT0FBTyxHQUFHLFVBQVUsQ0FBQztpQkFDM0IsSUFBSSxLQUFLLEdBQUcsS0FBSztnQkFBRSxPQUFPLEdBQUcsVUFBVSxDQUFDO2lCQUN4QyxJQUFJLEtBQUssR0FBRyxJQUFJO2dCQUFFLE9BQU8sR0FBRyxZQUFZLENBQUM7aUJBQ3pDLElBQUksS0FBSyxHQUFHLElBQUk7Z0JBQUUsT0FBTyxHQUFHLFNBQVMsQ0FBQzs7Z0JBQ3RDLE9BQU8sR0FBRyxTQUFTLENBQUM7U0FDMUI7UUFFRCxPQUFPO1lBQ0wsSUFBSTtZQUNKLElBQUk7WUFDSixJQUFJO1lBQ0osT0FBTztZQUNQLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUNYLEdBQUcsRUFBRSxJQUFJO2dCQUNULEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLGFBQU8sQ0FBQyxHQUFHLEVBQUUsZUFBUSxDQUFDLElBQUksQ0FBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUM7YUFDakYsQ0FBQyxDQUFDLENBQUMsU0FBUztTQUNkLENBQUM7SUFDSixDQUFDO0lBRUQsU0FBUyxRQUFRO1FBQ2YsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2pELENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxVQUFVO1FBQ2pCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQ2QsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2QsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDdEI7UUFDRCxJQUFJLGtDQUFtQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFBRSxPQUFPO1FBQzNFLGtCQUFrQixFQUFFLENBQUM7UUFDckIsSUFBSSxRQUFRLEVBQUUsRUFBRTtZQUNkLE1BQU0sQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxFQUFFO2dCQUNMLENBQUMsQ0FBQyxHQUFHLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQzthQUN0QjtTQUNGO2FBQU07WUFDTCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDZCxJQUFJLElBQUksQ0FBQyxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNqQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ25ELElBQUksV0FBVyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFBRSxPQUFPLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7cUJBQzlFO29CQUNIOzs7Ozs7dUJBTUc7b0JBQ0gsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDakUsSUFBSSxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztpQkFDbEY7YUFDRjtZQUNELElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBRSxDQUFDLENBQUM7Z0JBQ2pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNkOztnQkFBTSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMscUJBQXFCO1FBQzVCLElBQUksa0NBQW1CLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDekcsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUc7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUM1RCxVQUFVLEVBQUUsQ0FBQztZQUNmLENBQUMsRUFBRSxHQUFHLEVBQUU7Z0JBQ04sSUFBSSxDQUFDLGdCQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO2dCQUN0RCxVQUFVLEVBQUUsQ0FBQztZQUNmLENBQUMsQ0FBQyxDQUFDOztZQUNFLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxTQUFTLE1BQU07UUFDYixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDZCxxQkFBcUIsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFFMUQsT0FBTztRQUNMLE9BQU8sRUFBRSxVQUFVO1FBQ25CLE1BQU07WUFDSixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDZCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDZCw0QkFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFDLHFCQUFxQixFQUFFLENBQUM7UUFDMUIsQ0FBQztRQUNELFFBQVE7UUFDUixPQUFPO1FBQ1AsT0FBTztRQUNQLFFBQVE7UUFDUixPQUFPO1FBQ1AsTUFBTTtRQUNOLGFBQWE7UUFDYixLQUFLO1lBQ0gsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2QsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hCLENBQUM7UUFDRCxXQUFXLENBQUMsSUFBZSxFQUFFLEVBQWE7WUFDeEMsSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFO2dCQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDZixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDZjtRQUNILENBQUM7UUFDRCxZQUFZLENBQUMsSUFBZSxFQUFFLEVBQWE7WUFDekMsSUFBSSxJQUFJLEtBQUssRUFBRSxJQUFJLFFBQVEsRUFBRTtnQkFBRSxNQUFNLEVBQUUsQ0FBQztRQUMxQyxDQUFDO1FBQ0QsVUFBVTtZQUNSLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQixDQUFDO1FBQ0QsZUFBZTtZQUNiLE1BQU0sQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxDQUFDO2dCQUFFLE9BQU87WUFDZixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLENBQUMsSUFBSTtnQkFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUNELFlBQVksQ0FBQyxNQUFlO1lBQzFCLE1BQU0sQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSTtnQkFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7O2dCQUN4QyxRQUFRLENBQUM7b0JBQ1osR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRztpQkFDaEIsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxJQUFJO1lBQ0YsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFDckUsSUFBSSxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQ2pCLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLENBQUM7Z0JBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDOztnQkFDdEQsT0FBTyxDQUFDO29CQUNYLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTztvQkFDN0IsR0FBRyxFQUFFLElBQUk7aUJBQ1YsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxXQUFXLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUk7UUFDNUIsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO1FBQzdCLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtLQUNwQixDQUFDO0FBQ0osQ0FBQztBQXhNRCxvQkF3TUM7QUFBQSxDQUFDOzs7OztBQ3pQRiwyQ0FBNEM7QUFDNUMsa0NBQStCO0FBQy9CLHVDQUE0QjtBQU01QixTQUFTLFdBQVcsQ0FBQyxDQUFVLEVBQUUsSUFBaUIsRUFBRSxJQUFrQjtJQUNwRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUM3QixDQUFDLENBQUMsT0FBTyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQ3JELFlBQUMsQ0FBQyxNQUFNLEVBQUU7UUFDUixJQUFJLEVBQUU7WUFDSixNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUU7Z0JBQ2QsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQWtCLENBQUM7Z0JBQ3BDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUNuRCxFQUFFLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDaEUsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDbEUsQ0FBQztZQUNELE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztTQUN4QztLQUNGLEVBQ0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FDWixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDVCxDQUFDO0FBRUQsU0FBUyxjQUFjLENBQUMsSUFBaUIsRUFBRSxJQUFrQjtJQUMzRCxPQUFPLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtRQUN6QixZQUFDLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQztRQUN0QixZQUFDLENBQUMsaUJBQWlCLEVBQUU7WUFDbkIsWUFBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQy9DLFlBQUMsQ0FBQyxhQUFhLEVBQUU7Z0JBQ2YsWUFBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzthQUM5RixDQUFDO1NBQ0gsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFNBQVMsQ0FBQyxJQUFpQixFQUFFLEdBQVc7SUFDL0MsTUFBTSxNQUFNLEdBQUcsR0FBRyxLQUFLLFdBQVcsQ0FBQztJQUNuQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLGVBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3JFLE9BQU8sWUFBQyxDQUFDLFlBQVksRUFBRTtRQUNyQixLQUFLLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxlQUFlLEVBQUUsWUFBQyxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQztRQUM3RSxZQUFDLENBQUMsaUJBQWlCLEVBQUU7WUFDbkIsWUFBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsQ0FBQztnQkFDTixZQUFDLENBQUMsSUFBSSxFQUFFLFlBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDOUYsWUFBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQzlDLENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBRW5CLFNBQVMsa0JBQWtCLENBQUMsSUFBZSxFQUFFLFFBQWdCO0lBQzNELE9BQU8sWUFBQyxDQUFDLGNBQWMsRUFBRSxZQUFDLENBQUMsS0FBSyxFQUFFO1FBQ2hDLEtBQUssRUFBRTtZQUNMLEtBQUssRUFBRSxVQUFVLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7U0FDbkg7S0FDRixDQUFDLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxJQUFpQixFQUFFLElBQWtCO0lBQzFELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM1QixPQUFPLFlBQUMsQ0FBQyxvQkFBb0IsRUFBRTtRQUM3QixZQUFDLENBQUMsZUFBZSxFQUFFLFlBQUMsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFDdkQsWUFBQyxDQUFDLGlCQUFpQixFQUNqQixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0QsWUFBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ2pELGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDN0QsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFDLENBQUMsYUFBYSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLEdBQUcsRUFBRTtnQkFDdkIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQzlELEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1NBQ3hHLENBQUMsQ0FBQyxDQUFDO0tBQ1AsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELG1CQUF3QixJQUFpQjtJQUN2QyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQzNCLElBQUksQ0FBQyxJQUFJO1FBQUUsT0FBTztJQUNsQixNQUFNLE9BQU8sR0FBbUIsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQy9DLE1BQU0sT0FBTyxHQUFZLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN4QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ25GLE9BQU8sWUFBQyxDQUFDLHdDQUF3QyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRTtRQUM5RixZQUFDLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDeEQsWUFBQyxDQUFDLGNBQWMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNuSCxPQUFPLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBRTtZQUNwQyxZQUFDLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNwRCxHQUFHO1NBQ1ksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDckosT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDbEM7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDO0FBaEJELDRCQWdCQztBQUFBLENBQUM7Ozs7O0FDOUZGLHVDQUE0QjtBQUM1QixtQ0FBbUM7QUFDbkMsaUNBQXdDO0FBQ3hDLHlDQUF5QztBQWN6QyxJQUFJLFNBQWdDLENBQUM7QUFFckMsU0FBZ0IsS0FBSyxDQUFDLElBQWlCLEVBQUUsSUFBUyxFQUFFLElBQVMsRUFBRSxPQUFpQyxFQUFFLFFBQWtCO0lBQ2xILElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO0lBQy9CLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLElBQUksSUFBSSxNQUFNLElBQUksQ0FDbkMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxTQUFTLElBQUksT0FBTyxDQUFDO1FBQzFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsU0FBUyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUU7UUFDN0MsU0FBUyxHQUFHO1lBQ1YsSUFBSTtZQUNKLElBQUk7WUFDSixPQUFPO1lBQ1AsUUFBUTtTQUNULENBQUM7UUFDRixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxPQUFPLElBQUksQ0FBQztLQUNiO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBaEJELHNCQWdCQztBQUVELFNBQVMsTUFBTSxDQUFDLElBQWlCLEVBQUUsSUFBSTtJQUNyQyxJQUFJLFNBQVMsRUFBRTtRQUNiLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZELElBQUksU0FBUyxDQUFDLFFBQVE7WUFBRSxTQUFTLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ3JHO0lBQ0QsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUN4QixDQUFDO0FBRUQsU0FBZ0IsTUFBTSxDQUFDLElBQWlCO0lBQ3RDLElBQUksU0FBUyxFQUFFO1FBQ2IsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ2Y7QUFDSCxDQUFDO0FBTkQsd0JBTUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxJQUFpQixFQUFFLElBQVMsRUFBRSxNQUFNLEVBQUUsS0FBWSxFQUFFLFdBQWtCO0lBQzdGLElBQUksQ0FBQyxTQUFTO1FBQUUsT0FBTztJQUV2QixJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQzlDLElBQUksV0FBVyxLQUFLLE9BQU87UUFBRSxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztJQUVoRCxNQUFNLFFBQVEsR0FBRyxLQUFLLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztJQUUxRCxPQUFPLFlBQUMsQ0FBQyx1QkFBdUIsR0FBRyxRQUFRLEVBQUU7UUFDM0MsSUFBSSxFQUFFLGVBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNsQixFQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEQsRUFBRSxDQUFDLGFBQWEsR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7UUFDakMsQ0FBQyxDQUFDO0tBQ0gsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVMsVUFBVSxFQUFFLENBQUM7UUFDbEMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxLQUFLLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDdkQsT0FBTyxZQUFDLENBQUMsUUFBUSxFQUFFO1lBQ2pCLEtBQUssRUFBRTtnQkFDTCxLQUFLLEVBQUUsTUFBTSxHQUFHLEdBQUcsR0FBRyxTQUFTLEdBQUcsSUFBSSxHQUFHLEdBQUc7YUFDN0M7WUFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDdEIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO2dCQUNwQixNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzNCLENBQUMsQ0FBQztTQUNILEVBQUUsQ0FBQyxZQUFDLENBQUMsUUFBUSxHQUFHLFVBQVUsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWlCO0lBQ3BDLElBQUksQ0FBQyxTQUFTO1FBQUUsT0FBTztJQUN2QixJQUFJLE1BQU0sR0FBRyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ25ELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxXQUFXO1FBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUVwRSxPQUFPLGVBQWUsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQ2pELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQy9DLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3hDLENBQUM7QUFSRCxvQkFRQzs7Ozs7QUN4RkQsOENBQTJDO0FBQzNDLGlDQUF1QztBQUN2QywrQkFBd0M7QUFDeEMsbUNBQXFDO0FBWXJDLFNBQWdCLElBQUksQ0FBQyxJQUFpQjtJQUVwQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUM1QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDakMsSUFBSSxjQUFjLEdBQWdCLEVBQUUsQ0FBQztJQUNyQyxNQUFNLG1CQUFtQixHQUFhLEVBQUUsQ0FBQztJQUN6QyxJQUFJLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDL0IsTUFBTSxPQUFPLEdBQUcsYUFBSSxDQUFNLElBQUksQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sUUFBUSxHQUFHLGFBQUksQ0FBVyxNQUFNLENBQUMsQ0FBQztJQUV4QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBRTNCLFNBQVMsV0FBVyxDQUFDLEdBQVE7UUFDM0IsT0FBTyxXQUFXLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxZQUFZO1FBQ25CLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsY0FBYyxHQUFHLHVCQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLFdBQVcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuSCxPQUFPLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsVUFBVTtRQUNqQixRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakIsTUFBTSxJQUFJLEdBQUcsWUFBWSxFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNkLE9BQU8sTUFBTSxFQUFFLENBQUM7U0FDakI7UUFDRCxNQUFNLEtBQUssR0FBRztZQUNaLElBQUk7WUFDSixJQUFJLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7U0FDdkMsQ0FBQztRQUNGLE1BQU0sUUFBUSxHQUFHLFdBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNDLE1BQU0sSUFBSSxHQUFHO1lBQ1gsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztZQUNwQyxJQUFJLEVBQUUsUUFBUTtTQUNmLENBQUM7UUFDRixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVELE9BQU8sQ0FBQztZQUNOLEtBQUs7WUFDTCxJQUFJO1lBQ0osUUFBUSxFQUFFO2dCQUNSLElBQUksRUFBRSxZQUFZO2dCQUNsQixJQUFJLEVBQUUsUUFBUSxHQUFHLFlBQWEsQ0FBQyxFQUFFO2FBQ2xDO1lBQ0QsV0FBVyxFQUFFLEVBQUU7U0FDaEIsQ0FBQyxDQUFDO1FBQ0gsK0JBQStCO1FBQy9CLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEtBQUssVUFBVSxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDeEgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQWdCLEVBQUUsRUFBRTtnQkFDeEUsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7Z0JBQ3RCLE1BQU0sSUFBSSxHQUFVLEVBQUUsQ0FBQztnQkFDdkIsR0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ3JCLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQzt3QkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDeEQsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBSSxDQUFDLEVBQUU7b0JBQ2xDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUN6QyxVQUFVLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDO2lCQUM3QjtxQkFBTTtvQkFDTCxHQUFHLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztvQkFDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUNkO1lBQ0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLE1BQU0sRUFBRSxDQUFDO0lBQ1gsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLE1BQU07UUFDYixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsR0FBRyxRQUFRLEVBQUUsRUFBRSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7UUFDekQsSUFBSSxDQUFDLEdBQUc7WUFBRSxPQUFPO1FBQ2pCLElBQUksRUFBRSxLQUFLLE1BQU0sSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNwRCxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDakIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3JCLE9BQU87U0FDUjtRQUNELElBQUksU0FBUyxFQUFFLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDbEQsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsNEJBQTRCO2lCQUN4RSxJQUFJLElBQUksQ0FBQyxJQUFJO2dCQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsNkJBQTZCO2lCQUNyRCxJQUFJLElBQUksQ0FBQyxJQUFJO2dCQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsdUNBQXVDO2lCQUNoRTtnQkFDSCxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtvQkFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzlDLFVBQVUsRUFBRSxDQUFDO2FBQ2Q7U0FDRjtRQUNELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsWUFBWSxDQUFDLElBQWU7UUFDbkMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3RCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksRUFBRSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUNyRCxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDWixDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsVUFBVTtRQUNqQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxFQUNsQixHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLEdBQUcsSUFBSSxRQUFRLEVBQUUsS0FBSyxNQUFNLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHO1lBQUUsT0FBTztRQUM3RSxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUN0QixJQUFJLElBQUksR0FBRyxzQkFBYyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQU0sRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxRSxJQUFJLElBQUksR0FBRyxDQUFDLEtBQUs7Z0JBQUUsS0FBSyxFQUFFLENBQUM7O2dCQUN0QixNQUFNLEVBQUUsQ0FBQztTQUNmO0lBQ0gsQ0FBQztJQUVELFNBQVMsS0FBSztRQUNaLFlBQVksRUFBRSxDQUFDO1FBQ2YsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hCLE1BQU0sRUFBRSxDQUFDO0lBQ1gsQ0FBQztJQUVELFNBQVMsTUFBTTtRQUNiLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQixNQUFNLEdBQUcsR0FBRztZQUNWLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNmLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtTQUNoQixDQUFDO1FBQ0YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxjQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDakUsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLE1BQU0sRUFBRSxDQUFDO0lBQ1gsQ0FBQztJQUVELFNBQVMsWUFBWTtRQUNuQixRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkMsWUFBWSxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVELFNBQVMsSUFBSTtRQUNYLFlBQVksRUFBRSxDQUFDO1FBQ2YsVUFBVSxFQUFFLENBQUM7SUFDZixDQUFDO0lBRUQsU0FBUyxZQUFZO1FBQ25CLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxJQUFlO1FBQ3ZDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEYsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLFdBQVc7UUFDbEIsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7UUFDdEIsSUFBSSxHQUFHLElBQUksU0FBUyxFQUFFLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQy9FLENBQUM7SUFFRCxTQUFTLFNBQVM7UUFDaEIsTUFBTSxFQUFFLEdBQUcsUUFBUSxFQUFFLENBQUM7UUFDdEIsT0FBTyxFQUFFLEtBQUssTUFBTSxJQUFJLEVBQUUsS0FBSyxNQUFNLENBQUM7SUFDeEMsQ0FBQztJQUVELFVBQVUsRUFBRSxDQUFDO0lBRWIsU0FBUyxtQkFBbUI7UUFDMUIsSUFBSSxTQUFTLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUFFLFVBQVUsRUFBRSxDQUFDO0lBQzlDLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTztRQUNQLEtBQUs7UUFDTCxXQUFXO1FBQ1gsTUFBTTtRQUNOLFVBQVU7UUFDVixJQUFJO1FBQ0osWUFBWTtRQUNaLGdCQUFnQjtRQUNoQixXQUFXO1FBQ1gsT0FBTyxFQUFFLFVBQVU7UUFDbkIsbUJBQW1CO1FBQ25CLFFBQVE7UUFDUixTQUFTO1FBQ1QsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxjQUFjLENBQUMsTUFBTSxDQUFDO1FBQzdELEtBQUs7WUFDSCxXQUFXLEdBQUcsRUFBRSxDQUFDO1lBQ2pCLFVBQVUsRUFBRSxDQUFDO1FBQ2YsQ0FBQztRQUNELEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVztRQUN2QixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7UUFDakIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSztRQUN2QixJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUk7UUFDckIsTUFBTTtLQUNQLENBQUM7QUFDSixDQUFDO0FBMUxELG9CQTBMQztBQUFBLENBQUM7Ozs7O0FDek1GLDBDQUFpRDtBQUdqRCxrQ0FBa0Q7QUFDbEQsdUNBQTRCO0FBRzVCLFNBQVMsa0JBQWtCLENBQUMsSUFBZTtJQUN6QyxPQUFPLFlBQUMsQ0FBQyxhQUFhLEVBQUU7UUFDdEIsWUFBQyxDQUFDLEdBQUcsRUFBRTtZQUNMLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUNwRCxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUNqQyxZQUFDLENBQUMsR0FBRyxFQUFFO1lBQ0wsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQztTQUMvQixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7S0FDL0IsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLElBQWU7SUFDakMsT0FBTyxZQUFDLENBQUMsaUJBQWlCLEVBQUU7UUFDMUIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQztLQUNyQyxFQUFFO1FBQ0QsWUFBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztLQUNuQixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQ25CLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUVwQixTQUFTLGtCQUFrQixDQUFDLElBQWU7SUFDekMsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFLFlBQUMsQ0FBQyxLQUFLLEVBQUU7UUFDaEMsS0FBSyxFQUFFO1lBQ0wsS0FBSyxFQUFFLFVBQVUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtTQUNuSDtLQUNGLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELE1BQU0sUUFBUSxHQUFHO0lBQ2YsSUFBSSxDQUFDLElBQWU7UUFDbEIsT0FBTztZQUNMLFlBQUMsQ0FBQyxZQUFZLEVBQUU7Z0JBQ2QsWUFBQyxDQUFDLGVBQWUsRUFBRSxZQUFDLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDakQsWUFBQyxDQUFDLGlCQUFpQixFQUFFO29CQUNuQixZQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxZQUFDLENBQUMsTUFBTSxFQUFFLDZCQUFrQixDQUFDO3dCQUNyRSxRQUFRLEVBQUUsSUFBSTt3QkFDZCxVQUFVLEVBQUUsSUFBSTt3QkFDaEIsUUFBUSxFQUFFLEtBQUs7cUJBQ2hCLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ2pDLFlBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUM7b0JBQ2pHLGtCQUFrQixDQUFDLElBQUksQ0FBQztpQkFDekIsQ0FBQzthQUNILENBQUM7U0FDSCxDQUFDO0lBQ0osQ0FBQztJQUNELCtDQUErQztJQUMvQyxRQUFRLENBQUMsSUFBZTtRQUN0QixPQUFPO1lBQ0wsWUFBQyxDQUFDLFlBQVksRUFBRTtnQkFDZCxZQUFDLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQztnQkFDdEIsWUFBQyxDQUFDLGlCQUFpQixFQUFFO29CQUNuQixZQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztvQkFDekMsWUFBQyxDQUFDLGlCQUFpQixFQUFFO3dCQUNuQixZQUFDLENBQUMsR0FBRyxFQUFFOzRCQUNMLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7eUJBQ3JDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO3FCQUNqQyxDQUFDO2lCQUNILENBQUM7YUFDSCxDQUFDO1NBQ0gsQ0FBQztJQUNKLENBQUM7SUFDRCxJQUFJLENBQUMsSUFBZTtRQUNsQixPQUFPO1lBQ0wsWUFBQyxDQUFDLFlBQVksRUFBRTtnQkFDZCxZQUFDLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQztnQkFDbEIsWUFBQyxDQUFDLGlCQUFpQixFQUFFO29CQUNuQixZQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztvQkFDekMsWUFBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQztvQkFDakcsa0JBQWtCLENBQUMsSUFBSSxDQUFDO2lCQUN6QixDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7SUFDSixDQUFDO0lBQ0QsR0FBRyxDQUFDLElBQWU7UUFDakIsT0FBTztZQUNMLFlBQUMsQ0FBQyxjQUFjLEVBQ2QsWUFBQyxDQUFDLFlBQVksRUFBRTtnQkFDZCxZQUFDLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQztnQkFDbEIsWUFBQyxDQUFDLGlCQUFpQixFQUFFLFlBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO2FBQzFELENBQUMsQ0FDSDtZQUNELFVBQVUsQ0FBQyxJQUFJLENBQUM7U0FDakIsQ0FBQztJQUNKLENBQUM7SUFDRCxJQUFJLENBQUMsSUFBZTtRQUNsQixPQUFPO1lBQ0wsWUFBQyxDQUFDLGNBQWMsRUFDZCxZQUFDLENBQUMsWUFBWSxFQUFFO2dCQUNkLFlBQUMsQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDO2dCQUNsQixZQUFDLENBQUMsaUJBQWlCLEVBQUU7b0JBQ25CLFlBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDbkMsWUFBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsWUFBQyxDQUFDLFFBQVEsRUFBRSw2QkFBa0IsQ0FBQzt3QkFDakUsUUFBUSxFQUFFLElBQUk7d0JBQ2QsUUFBUSxFQUFFLEtBQUs7cUJBQ2hCLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQ3JDLENBQUM7YUFDSCxDQUFDLENBQ0g7WUFDRCxVQUFVLENBQUMsSUFBSSxDQUFDO1NBQ2pCLENBQUM7SUFDSixDQUFDO0lBQ0QsSUFBSSxDQUFDLElBQWU7UUFDbEIsT0FBTztZQUNMLFlBQUMsQ0FBQyxjQUFjLEVBQ2QsWUFBQyxDQUFDLG1CQUFtQixFQUFFO2dCQUNyQixZQUFDLENBQUMsaUJBQWlCLEVBQUU7b0JBQ25CLFlBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO29CQUM3QyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7aUJBQ2hDLENBQUM7YUFDSCxDQUFDLENBQ0g7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUNELEdBQUcsQ0FBQyxJQUFlLEVBQUUsSUFBZ0IsRUFBRSx1QkFBc0M7UUFDM0UsSUFBSSxDQUFDLHVCQUF1QixFQUFFO1lBQUUsT0FBTztnQkFDckMsWUFBQyxDQUFDLGNBQWMsRUFDZCxZQUFDLENBQUMsWUFBWSxFQUFFO29CQUNkLFlBQUMsQ0FBQyxVQUFVLEVBQUUsY0FBTyxFQUFFLENBQUM7b0JBQ3hCLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7aUJBQ3ZELENBQUMsQ0FDSDthQUNGLENBQUM7UUFDRixNQUFNLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxPQUFPO1lBQ0wsWUFBQyxDQUFDLFlBQVksRUFBRTtnQkFDZCxZQUFDLENBQUMsZUFBZSxFQUFFLFlBQUMsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxZQUFDLENBQUMsaUJBQWlCLEVBQUU7b0JBQ25CLFlBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBQ2YsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQzt3QkFDNUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLDRCQUE0QixDQUFDLENBQUM7b0JBQ25HLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRTt3QkFDbkIsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxHQUFHLEVBQUU7NEJBQ3RCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUM7eUJBQ2hDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQzt3QkFDM0IsWUFBQyxDQUFDLEdBQUcsRUFBRTs0QkFDTCxJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7eUJBQzFCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUM7cUJBQ3ZGLENBQUM7aUJBQ0gsQ0FBQzthQUNILENBQUM7U0FDSCxDQUFDO0lBQ0osQ0FBQztDQUNGLENBQUM7QUFFRixTQUFTLGNBQWMsQ0FBQyxJQUFpQixFQUFFLEVBQUU7SUFDM0MsTUFBTSxJQUFJLEdBQWMsSUFBSSxDQUFDLEtBQU0sQ0FBQztJQUNwQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDL0IsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJO1FBQ2hFLE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqQyxJQUFJLEVBQUUsS0FBSyxNQUFNO1FBQUUsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN2RCxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBQzlELE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzVCLENBQUM7QUFFRCxtQkFBd0IsSUFBaUI7SUFDdkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN4QixJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU87SUFDbEIsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUN4QixVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ2pDLE9BQU8sWUFBQyxDQUFDLG9DQUFvQyxFQUFFO1FBQzdDLFlBQUMsQ0FBQyxXQUFXLEVBQUU7WUFDYixZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUM5QyxZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzlFLENBQUM7UUFDRixZQUFDLENBQUMsZUFBZSxHQUFHLEVBQUUsRUFBRSxjQUFjLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQ2xELENBQUMsQ0FBQztBQUNMLENBQUM7QUFaRCw0QkFZQztBQUFBLENBQUM7Ozs7O0FDL0tGLG1DQUFpQztBQUNqQyxpQ0FBaUM7QUFHakMsbUJBQXdCLE9BQW9CLEVBQUUsSUFBaUI7SUFFN0QsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUUxQixDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBWSxDQUFDLENBQUM7SUFFL0MsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFFekMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksRUFDcEIsT0FBTyxHQUFHLENBQUMsQ0FBQyxvQ0FBb0MsQ0FBQyxFQUNqRCxLQUFLLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QixDQUFDLEVBQ3ZDLFVBQVUsR0FBRyxDQUFDLENBQUMsa0JBQWtCLENBQUMsRUFDbEMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsMkJBQTJCLENBQXFCLEVBQ2xGLFFBQVEsR0FBRyxLQUFLLENBQUMsRUFBRTtRQUNqQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBUyxLQUFLO1lBQzlDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7SUFDSixJQUFJLE9BQWUsQ0FBQztJQUVwQixJQUFJLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRTtRQUNuQixFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLENBQVUsRUFBRSxFQUFFO1lBQ2xELFVBQVUsQ0FBQztnQkFDVCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3ZHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNULENBQUMsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxHQUFRLEVBQUUsQ0FBQyxFQUFFLFdBQXdCLEVBQUUsRUFBRTtZQUN4RSxJQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsSUFBSSxHQUFHLEtBQUssT0FBTyxFQUFFO2dCQUMxQixRQUFRLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztnQkFDckIsT0FBTyxHQUFHLEdBQUcsQ0FBQzthQUNmO1lBQ0QsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO2dCQUNqQixLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsSUFBSSxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7Z0JBQ2pELElBQUksS0FBSyxFQUFFO29CQUNULElBQUksV0FBVyxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUU7d0JBQ2hDLElBQUksV0FBVyxLQUFLLEtBQUs7NEJBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDOzZCQUN0Qzs0QkFDSCxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDOzRCQUN4RSxJQUFJLGdCQUFPLENBQUMsS0FBSyxDQUFDO2dDQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7Z0NBQzlCLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzt5QkFDdEI7cUJBQ0Y7b0JBQ0QsS0FBSyxDQUFDLE9BQU8sR0FBRyxXQUFXLENBQUM7aUJBQzdCO2FBQ0Y7WUFDRCxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3JCLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxJQUFJLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztnQkFDckQsSUFBSSxLQUFLLEVBQUU7b0JBQ1QsSUFBSSxXQUFXLElBQUksS0FBSyxDQUFDLE9BQU8sRUFBRTt3QkFDaEMsSUFBSSxXQUFXLEtBQUssS0FBSzs0QkFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7NkJBQ3RDOzRCQUNILE1BQU0sS0FBSyxHQUFHLFdBQVcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUNwQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUM1QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUN6RSxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7NEJBQ3ZDLElBQUksZ0JBQU8sQ0FBQyxLQUFLLENBQUM7Z0NBQUUsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDOztnQ0FDOUIsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO3lCQUN0QjtxQkFDRjtvQkFDRCxLQUFLLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQztpQkFDN0I7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsMEJBQTBCLEVBQUUsQ0FBQyxDQUFjLEVBQUUsRUFBRTtZQUMxRCxJQUFJLENBQUMsRUFBRSxDQUFDLGNBQWM7Z0JBQUUsbUJBQW1CLEVBQUUsQ0FBQztpQkFDekMsSUFBSSxFQUFFLENBQUMsY0FBYyxDQUFDLE1BQU07Z0JBQUUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0QsSUFBSSxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPO2dCQUFFLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzFFLENBQUMsQ0FBQyxDQUFDO0tBQ0o7SUFFRCxTQUFTLFdBQVc7UUFDbEIsT0FBTyw4QkFBOEI7WUFDbkMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxVQUFVLEdBQUcsNEJBQTRCO1lBQ3ZELEVBQUUsQ0FBQyxXQUFXO1lBQ2QsUUFBUSxDQUFBO0lBQ1osQ0FBQztJQUFBLENBQUM7SUFDRixTQUFTLG1CQUFtQjtRQUMxQixJQUFJLEVBQUUsQ0FBQyxjQUFjLElBQUksRUFBRSxDQUFDLFdBQVc7WUFBRSxPQUFPO1FBQ2hELE1BQU0sT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ3ZGLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNwRCxJQUFJLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU07WUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLDZCQUE2QixHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUNyRyxJQUFJLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU07WUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7UUFDbEYsRUFBRSxDQUFDLFVBQVUsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUM5QyxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQWdCLENBQUMsQ0FBQztRQUMxRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFBQSxDQUFDO0lBRUYsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNsRCxNQUFNLFFBQVEsR0FBRyxVQUFTLEtBQUs7UUFDN0IsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixLQUFLLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6RyxPQUFPLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JFLElBQUksS0FBSyxJQUFJLFlBQVksSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhO1lBQUUsSUFBSTtnQkFDbEQsRUFBRSxDQUFDLFVBQVUsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLElBQUksQ0FBQztvQkFDbEQsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNyQyxDQUFDLENBQUMsQ0FBQzthQUNKO1lBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRTtRQUNkLElBQUksS0FBSyxJQUFJLG1CQUFtQixJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNO1lBQ3pELFVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUM7SUFDRixLQUFLLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxNQUFNLEVBQUU7UUFDNUIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQixDQUFDLENBQUMsQ0FBQztJQUNILE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUM3QixJQUFJLE1BQU0sSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLGdCQUFnQixNQUFNLFlBQVksQ0FBQyxDQUFDLE1BQU07UUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDckY7UUFDSCxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDeEQsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDbEY7SUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtRQUNsQixPQUFPLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQUMsTUFBTSxDQUFDO1lBQy9DLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRTtnQkFDbEMsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO29CQUFFLFFBQVEsQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDO2dCQUMvRSxPQUFPLEtBQUssQ0FBQzthQUNkO1lBQ0QsQ0FBQyxDQUFDLElBQUksaUNBQ0QsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsS0FDdkIsT0FBTyxFQUFFLG1CQUFtQixFQUM1QixLQUFLLEVBQUUsRUFBRSxDQUFDLE1BQU0sSUFDaEIsQ0FBQztZQUNILE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQyxDQUFDLENBQUM7S0FDSjtJQUVELE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRTtRQUMxQixNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsWUFBWSxFQUFFLEVBQ3JDLEtBQUssR0FBRyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDakMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9CLFNBQVUsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUM3QixTQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdCLENBQUMsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsY0FBYyxFQUFFO1FBQ2xDLE1BQU0sR0FBRyxHQUFHLEdBQUcsY0FBTyxFQUFFLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2pFLE1BQU0sTUFBTSxHQUFHLGVBQWUsR0FBRyxHQUFHLEdBQUcsb0VBQW9FLENBQUM7UUFDNUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQ1Asa0NBQWtDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLHVCQUF1QjtZQUM3RSxPQUFPLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsR0FBRyxjQUFjO1lBQ2hELE1BQU0sR0FBRyxjQUFjO1lBQ3ZCLGlHQUFpRyxDQUNsRyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUEvSUQsNEJBK0lDOzs7OztBQ3BKRCx5Q0FBNkQ7QUFDN0QsK0JBQXNDO0FBNkJ0QyxTQUFnQixJQUFJLENBQUMsSUFBZ0IsRUFBRSxJQUFpQjtJQUV0RCxJQUFJLGNBQWMsQ0FBQztJQUNuQixJQUFJLGVBQWUsQ0FBQztJQUVwQixJQUFJLGFBQWEsR0FBYyxFQUFFLENBQUM7SUFFbEMsU0FBUyxVQUFVO1FBQ2pCLGFBQWEsR0FBRyxDQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEtBQUssVUFBVTtZQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxhQUFlLENBQzFELENBQUMsQ0FBQyxDQUFDO1lBQ0YsRUFBRSxFQUFFO2dCQUNGLElBQUksRUFBRSxFQUFFO2dCQUNSLEtBQUssRUFBRSx5Q0FBeUM7YUFDakQ7U0FDRixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDVCxDQUFDO0lBQ0QsVUFBVSxFQUFFLENBQUM7SUFFYiw0Q0FBNEM7SUFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTO1FBQUUsVUFBVSxDQUFDO1lBQzlCLElBQUksQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDM0MsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRVQsU0FBUyxnQkFBZ0I7UUFDdkIsSUFBSSxJQUFJLENBQUMsS0FBSztZQUFFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDO0lBQ2pELENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxZQUFZLENBQUMsR0FBRyxFQUFFLE9BQU8sR0FBRyxLQUFLO1FBQ3hDLElBQUksQ0FBQyxHQUFHLGdCQUFnQixFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLEVBQUU7WUFDTCxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNYLElBQUksT0FBTyxFQUFFO2dCQUNYLElBQUksSUFBSSxDQUFDLEtBQU0sQ0FBQyxTQUFTLEVBQUUsRUFBRTtvQkFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNO3dCQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2lCQUNyRDs7b0JBQ0ksR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7YUFDeEI7U0FDRjtJQUNILENBQUM7SUFBQSxDQUFDO0lBRUYsTUFBTSxRQUFRLEdBQWE7UUFDekIsSUFBSSxDQUFDLElBQUk7WUFDUCxZQUFZLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0IsMkJBQTJCO1lBQzNCLElBQUksSUFBSSxDQUFDLEVBQUUsSUFBSSxnQkFBZ0IsRUFBRTtnQkFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7Z0JBRXJDLE9BQU8sQ0FBQyxHQUFHLENBQUMsMENBQTBDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEUsQ0FBQztRQUNELFdBQVc7WUFDVCxZQUFZLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0IsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2YsQ0FBQztRQUNELEtBQUssQ0FBQyxJQUFJO1lBQ1IsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzlCLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxFQUFFLEtBQUssZ0JBQWdCLEVBQUUsRUFBRTtnQkFDOUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUNwRDs7Z0JBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQ0FBMEMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNoRSxDQUFDO1FBQ0QsWUFBWSxDQUFDLElBQUk7WUFDZixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xCLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBQ0QsR0FBRyxDQUFDLENBQUM7WUFDSCxJQUFJLElBQUksQ0FBQyxRQUFRO2dCQUNmLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDMUIsVUFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN2RCxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQ2pDO1FBQ0gsQ0FBQztRQUNELGdCQUFnQixDQUFDLElBQUk7WUFDbkIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFDRCxPQUFPLENBQUMsQ0FBQztZQUNQLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFDRCxLQUFLLENBQUMsQ0FBQztZQUNMLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEMsQ0FBQztLQUNGLENBQUM7SUFFRixTQUFTLHNCQUFzQixDQUFDLEdBQUc7UUFDakMsSUFBSSxHQUFHLENBQUMsT0FBTyxLQUFLLFVBQVU7WUFBRSxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUM7SUFDckQsQ0FBQztJQUVELFNBQVMsWUFBWSxDQUFDLEdBQUc7UUFDdkIsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQzlCLElBQUksYUFBYSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7WUFBRSxVQUFVLENBQUM7Z0JBQ3RDLFFBQVEsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQzthQUNIO1lBQ0gsc0JBQXNCLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUIsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDdEIsZUFBZSxHQUFHLFVBQVUsQ0FBQztnQkFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztnQkFDbkMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUNWO0lBQ0gsQ0FBQztJQUVELFNBQVMsV0FBVyxDQUFDLEdBQUc7UUFDdEIsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzdCLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLFlBQVksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNyQixjQUFjLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsU0FBUyxXQUFXLENBQUMsR0FBRztRQUN0QixZQUFZLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDN0Isc0JBQXNCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsWUFBWSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLGNBQWMsR0FBRyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxDQUFDLElBQVksRUFBRSxJQUFTO1lBQzdCLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvQixJQUFJLE9BQU87Z0JBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzNCLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzlELENBQUM7UUFDRCxXQUFXO1FBQ1gsV0FBVztRQUNYLFlBQVk7UUFDWixhQUFhLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLFVBQVU7UUFDVixJQUFJO0tBQ0wsQ0FBQztBQUNKLENBQUM7QUF0SUQsb0JBc0lDOzs7OztBQ3BLRCxTQUFnQixLQUFLO0lBQ25CLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxjQUFjLENBQUMsQ0FBQztJQUMzRCxjQUFjLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUNoRCxDQUFDO0FBSEQsc0JBR0M7QUFFRCxTQUFTLGNBQWMsQ0FBQyxPQUFnQjtJQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsSUFBSSxPQUFPO1FBQ2xDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDaEUsSUFBSSxNQUFNLENBQUMsYUFBYSxJQUFJLENBQUMsT0FBTztRQUFFLE1BQU0sQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFDO0FBQzlFLENBQUM7QUFFRCxTQUFnQixJQUFJLENBQUMsQ0FBWTtJQUMvQixVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFGRCxvQkFFQztBQUVELFNBQVMsVUFBVSxDQUFDLENBQWtDO0lBQ3BELElBQUksTUFBTSxDQUFDLGFBQWE7UUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3BELENBQUM7Ozs7O0FDakJELHVDQUE0QjtBQUU1QixtQ0FBNkM7QUFFN0Msa0NBQXNGO0FBQ3RGLGtDQUFrQztBQUNsQyxnREFBZ0Q7QUFlaEQsU0FBZ0IsSUFBSSxDQUFDLElBQWdCLEVBQUUsYUFBNEQsRUFBRSxLQUFZLEVBQUUsTUFBYztJQUUvSCxNQUFNLE9BQU8sR0FBRyxhQUFJLENBQStDLElBQUksQ0FBQyxDQUFDO0lBRXpFLFNBQVMsSUFBSSxDQUFDLElBQXNCO1FBQ2xDLE9BQU8sQ0FBQztZQUNOLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRTtZQUNYLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtTQUNoQixDQUFDLENBQUM7UUFDSCxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUM5QixPQUFPLENBQUMsQ0FBRSxDQUFDLENBQUM7WUFDWixNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLFNBQVMsQ0FBQyxFQUFFO1FBQ25CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO1FBQ3BCLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFBQSxDQUFDO0lBRUYsT0FBTztRQUNMLElBQUk7UUFDSixNQUFNLENBQUMsSUFBSTtZQUNULElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDOztnQkFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xCLENBQUM7UUFDRCxPQUFPO1FBQ1AsTUFBTSxDQUFDLElBQUk7WUFDVCxNQUFNLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQztZQUNwQixJQUFJLENBQUMsRUFBRTtnQkFDTCxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ2YsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQTtnQkFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2Y7WUFDRCxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxNQUFNLENBQUMsRUFBRTtZQUNQLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDMUIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hCLENBQUM7UUFDRCxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUM3QixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEIsQ0FBQztRQUNELFNBQVM7UUFDVCxLQUFLO1FBQ0wsTUFBTTtLQUNQLENBQUE7QUFDSCxDQUFDO0FBaERELG9CQWdEQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUE4QjtJQUNqRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUIsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7UUFDeEIsS0FBSyxFQUFFLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRTtRQUN4QixPQUFPO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQztRQUNELE9BQU8sRUFBRTtZQUNQLFlBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDeEMsWUFBQyxDQUFDLFlBQVksRUFBRTtnQkFDZCxJQUFJLEVBQUUsaUJBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDbkIsTUFBTSxDQUFDLEdBQVEsRUFBRSxDQUFDO29CQUNsQixtQ0FBbUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO3dCQUM3RCxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7b0JBQzlDLENBQUMsQ0FBQyxDQUFDO29CQUNILElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pCLENBQUMsQ0FBQzthQUNILEVBQUU7Z0JBQ0QsWUFBQyxDQUFDLGdCQUFnQixFQUFFO29CQUNsQixZQUFDLENBQUMsa0JBQWtCLEVBQUU7d0JBQ3BCLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxjQUFjLEVBQUU7cUJBQy9CLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQzVCLFlBQUMsQ0FBQyxpQ0FBaUMsRUFBRTt3QkFDbkMsS0FBSyxFQUFFOzRCQUNMLFNBQVMsRUFBRSxDQUFDOzRCQUNaLFNBQVMsRUFBRSxFQUFFO3lCQUNkO3dCQUNELElBQUksRUFBRSxlQUFRLENBQW1CLEVBQUUsQ0FBQyxFQUFFOzRCQUNwQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtnQ0FDYixFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7Z0NBQ3JCLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQ0FDWixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7NkJBQ1o7d0JBQ0gsQ0FBQyxDQUFDO3FCQUNILENBQUM7aUJBQ0gsQ0FBQztnQkFDRixHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQU8sRUFBRSxDQUFDLENBQUM7YUFDM0QsQ0FBQztZQUNGLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRTtnQkFDbkIsWUFBQyxDQUFDLHFCQUFjLEVBQUU7b0JBQ2hCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO3dCQUN0QixJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDOzRCQUM1RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUNuQyxDQUFDLENBQUM7aUJBQ0gsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2dCQUN4QyxZQUFDLENBQUMscUJBQWMsRUFBRTtvQkFDaEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUU7d0JBQ3RCLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7NEJBQ2hELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN6QixDQUFDLENBQUM7aUJBQ0gsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQzthQUN0QyxDQUFDO1NBQ0g7S0FDRixDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNqQixDQUFDO0FBdkRELG9CQXVEQztBQUVELFNBQVMsUUFBUSxDQUFDLElBQTJDO0lBQzNELE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUMvQixDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsSUFBOEIsRUFBRSxJQUF3QjtJQUMxRSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDeEgsT0FBTztRQUNMLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtZQUNsQixZQUFDLENBQUMsMEJBQTBCLEVBQUU7Z0JBQzVCLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTtvQkFDcEIsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLHFCQUFxQixFQUFFO2lCQUN0QyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUNuQyxZQUFDLENBQUMseUNBQXlDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVMsS0FBSztvQkFDaEYsT0FBTyxhQUFNLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDbEUsQ0FBQyxDQUFDLENBQUM7YUFDSixDQUFDO1lBQ0YsWUFBQyxDQUFDLDBCQUEwQixFQUFFO2dCQUM1QixZQUFDLENBQUMsa0JBQWtCLEVBQUU7b0JBQ3BCLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxjQUFjLEVBQUU7aUJBQy9CLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQ3BDLFlBQUMsQ0FBQyxrQ0FBa0MsRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDcEUsT0FBTyxhQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNwRCxDQUFDLENBQUMsQ0FBQzthQUNKLENBQUM7U0FDSCxDQUFDO1FBQ0YsWUFBQyxDQUFDLGdCQUFnQixFQUFFO1lBQ2xCLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTtnQkFDcEIsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLHFCQUFxQixFQUFFO2FBQ3RDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztZQUM1QyxZQUFDLENBQUMseUNBQXlDLEVBQUU7Z0JBQzNDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7Z0JBQ3pDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7YUFDOUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxhQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDN0QsQ0FBQztRQUNGLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7S0FDOUMsQ0FBQztBQUNKLENBQUM7Ozs7O0FDcEtELHVDQUE0QjtBQUU1QixtQ0FBNkM7QUFDN0MsNENBQXdEO0FBQ3hELGtDQUFzRTtBQUN0RSx5Q0FBZ0U7QUFDaEUsa0NBQWtDO0FBQ2xDLDJDQUFxRDtBQUt4QyxRQUFBLFdBQVcsR0FBRztJQUN6QixDQUFDLFFBQVEsRUFBRSxnQkFBZ0IsQ0FBQztJQUM1QixDQUFDLFVBQVUsRUFBRSxzQkFBc0IsQ0FBQztJQUNwQyxDQUFDLFNBQVMsRUFBRSxlQUFlLENBQUM7SUFDNUIsQ0FBQyxVQUFVLEVBQUUsbUJBQW1CLENBQUM7Q0FDbEMsQ0FBQztBQUVGLFNBQWdCLFVBQVUsQ0FBQyxDQUFRLEVBQUUsRUFBVTtJQUM3QyxNQUFNLEVBQUUsR0FBSSxDQUFDLENBQUMsTUFBc0IsQ0FBQyxhQUFhLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3JFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBRSxFQUF1QixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3BELENBQUM7QUFIRCxnQ0FHQztBQUFBLENBQUM7QUF1QkYsU0FBZ0IsSUFBSSxDQUFDLElBQWdCLEVBQUUsUUFBa0MsRUFBRSxNQUFrQixFQUFFLElBQWlCO0lBRTlHLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUV2QixNQUFNLEVBQUUsR0FBRztRQUNULFFBQVEsRUFBRSxFQUFFO1FBQ1osSUFBSSxFQUFFLEtBQUs7UUFDWCxPQUFPLEVBQUUsYUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixHQUFHLEVBQUUsb0JBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNLENBQUM7UUFDekMsTUFBTSxFQUFFLElBQUk7UUFDWixTQUFTLEVBQUUsYUFBSSxDQUFDLElBQUksQ0FBQztLQUN0QixDQUFDO0lBRUYsU0FBUyxZQUFZO1FBQ25CLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU07WUFBRSxtQkFBVyxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVMsRUFBRTtnQkFDckQsRUFBRSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7Z0JBQ2pCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxJQUFJO1FBQ1gsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDZixZQUFZLEVBQUUsQ0FBQztRQUNmLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQUNELFNBQVMsS0FBSztRQUNaLEVBQUUsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO0lBQ2xCLENBQUM7SUFFRCxPQUFPO1FBQ0wsRUFBRTtRQUNGLElBQUk7UUFDSixJQUFJO1FBQ0osV0FBVztZQUNULElBQUksRUFBRSxDQUFDO1lBQ1AsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQixDQUFDO1FBQ0QsS0FBSztRQUNMLE1BQU07WUFDSixJQUFJLEVBQUUsQ0FBQyxJQUFJO2dCQUFFLEtBQUssRUFBRSxDQUFDOztnQkFDaEIsSUFBSSxFQUFFLENBQUM7UUFDZCxDQUFDO1FBQ0QsTUFBTSxDQUFDLENBQUM7WUFDTixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBTSxDQUFDO1lBQzFCLENBQUMsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3pCLENBQUMsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ2hDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRztnQkFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDOztnQkFDN0Isb0JBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNqQyxLQUFLLEVBQUUsQ0FBQztZQUNSLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELFFBQVE7UUFDUixTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsbUJBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNqQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1osSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUMsQ0FBQztRQUNGLFdBQVc7UUFDWCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07S0FDcEIsQ0FBQTtBQUNILENBQUM7QUEzREQsb0JBMkRDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQTZCO0lBRWhELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzlCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDaEMsTUFBTSxPQUFPLEdBQUcsVUFBUyxHQUFXLEVBQUUsSUFBWSxFQUFFLEtBQWE7UUFDL0QsT0FBTyxZQUFDLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRTtZQUN0QixLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsU0FBUyxLQUFLLEdBQUcsRUFBRTtZQUNwQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUU7WUFDaEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDOUQsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNYLENBQUMsQ0FBQztJQUNGLE1BQU0sU0FBUyxHQUFHLFNBQVMsS0FBSyxNQUFNLElBQUksU0FBUyxLQUFLLEtBQUssQ0FBQztJQUM5RCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3JELE1BQU0sSUFBSSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBTyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUV0SixPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUM7UUFDakIsS0FBSyxFQUFFLGFBQWE7UUFDcEIsT0FBTztZQUNMLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNiLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDO1FBQ0QsT0FBTyxFQUFFO1lBQ1AsU0FBUyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsSUFBSSxFQUFFO2dCQUNwQyxLQUFLLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQztnQkFDekIsWUFBQyxDQUFDLFFBQVEsRUFBRTtvQkFDVixLQUFLLEVBQUUsRUFBRSxXQUFXLEVBQUUsR0FBRyxFQUFFO29CQUMzQixJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDO2lCQUNwQyxDQUFDO2FBQ0gsQ0FBQztZQUNGLFlBQUMsQ0FBQyxZQUFZLEVBQUU7Z0JBQ2QsSUFBSSxFQUFFLGlCQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ25CLE1BQU0sQ0FBQyxHQUFRO3dCQUNiLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztxQkFDckYsQ0FBQztvQkFDRix3Q0FBd0MsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO3dCQUNsRSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztvQkFDbEMsQ0FBQyxDQUFDLENBQUM7b0JBQ0gsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakIsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7YUFDaEIsRUFBRTtnQkFDRCxZQUFDLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2xCLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTt3QkFDcEIsS0FBSyxFQUFFLEVBQUMsR0FBRyxFQUFFLGNBQWMsRUFBRTtxQkFDOUIsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUN2QixZQUFDLENBQUMsaUNBQWlDLEVBQUU7d0JBQ25DLEtBQUssRUFBRTs0QkFDTCxTQUFTLEVBQUUsQ0FBQzs0QkFDWixTQUFTLEVBQUUsRUFBRTt5QkFDZDt3QkFDRCxJQUFJLEVBQUUsZUFBUSxDQUFtQixFQUFFLENBQUMsRUFBRTs0QkFDcEMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUU7Z0NBQ2IsRUFBRSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dDQUNyRixFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7Z0NBQ1osRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDOzZCQUNaO3dCQUNILENBQUMsQ0FBQztxQkFDSCxDQUFDO2lCQUNILENBQUM7Z0JBQ0YsWUFBQyxDQUFDLGdCQUFnQixFQUFFO29CQUNsQixPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO29CQUM5RSxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO29CQUM5RSxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7b0JBQ3JELE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztvQkFDMUQsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2lCQUN2RCxDQUFDO2dCQUNGLFNBQVMsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyx1QkFBdUIsRUFBRTtvQkFDaEQsSUFBSSxFQUFFO3dCQUNKLE1BQU0sRUFBRSxLQUFLLENBQUMsRUFBRTs0QkFDZCxDQUFDLENBQUMsSUFBSSxDQUNKLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGdDQUFnQyxDQUFDLEVBQzNELENBQUMsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFO2dDQUNwQixHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRzs2QkFDeEIsQ0FBQyxDQUNILENBQUMsSUFBSSxDQUFDLFVBQVMsQ0FBQyxFQUFFLENBQUM7Z0NBQ2xCLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQ0FDbEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0NBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUc7b0NBQ2IsY0FBYyxFQUFFLElBQUk7b0NBQ3BCLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVM7aUNBQzVCLENBQUM7Z0NBQ0YsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFrQixFQUFFLElBQUksQ0FBQyxDQUFDO2dDQUN6RSxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDOzRCQUM3QyxDQUFDLENBQUMsQ0FBQzt3QkFDTCxDQUFDO3dCQUNELE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRTs0QkFDWCxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7d0JBQ3hCLENBQUM7cUJBQ0Y7aUJBQ0YsRUFBRSxDQUFDLGNBQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtnQkFDdEIsU0FBUyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGdCQUFnQixFQUFFO29CQUN6QyxZQUFDLENBQUMsa0JBQWtCLEVBQUU7d0JBQ3BCLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUU7cUJBQ2pDLEVBQUUsS0FBSyxDQUFDLG1CQUFtQixFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO29CQUMvRCxZQUFDLENBQUMsaUNBQWlDLEVBQUU7d0JBQ25DLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxFQUFFO3FCQUNwRCxDQUFDO2lCQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtnQkFDVCxTQUFTLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ3hDLFlBQUMsQ0FBQyxnQ0FBZ0MsRUFBRTt3QkFDbEMsS0FBSyxFQUFFOzRCQUNMLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHOzRCQUN6QixXQUFXLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQzt5QkFDakQ7cUJBQ0YsQ0FBQztpQkFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7Z0JBQ1QsU0FBUyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLG9CQUFvQixFQUFFO29CQUM1QyxZQUFDLENBQUMsbUNBQW1DLEVBQUU7d0JBQ3JDLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRTtxQkFDMUYsQ0FBQztvQkFDRixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMscUNBQXFDLEVBQUU7d0JBQzNELEtBQUssRUFBRTs0QkFDTCxJQUFJLEVBQUUsTUFBTTs0QkFDWixNQUFNLEVBQUUsTUFBTTt5QkFDZjt3QkFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRTs0QkFDdkIsTUFBTSxJQUFJLEdBQUksQ0FBQyxDQUFDLE1BQTJCLENBQUMsS0FBTSxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUN0RCxJQUFJLENBQUMsSUFBSTtnQ0FBRSxPQUFPOzRCQUNsQixNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDOzRCQUNoQyxNQUFNLENBQUMsTUFBTSxHQUFHO2dDQUNiLFFBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUF5QixDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBZ0IsQ0FBQzs0QkFDbEcsQ0FBQyxDQUFDOzRCQUNGLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzFCLENBQUMsQ0FBQztxQkFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7aUJBQ1YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO2dCQUNULFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtvQkFDbEIsWUFBQyxDQUFDLDBCQUEwQixFQUFFO3dCQUM1QixZQUFDLENBQUMsa0JBQWtCLEVBQUU7NEJBQ3BCLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRTt5QkFDcEMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUMxQixZQUFDLENBQUMscUNBQXFDLEVBQUU7NEJBQ3ZDLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUU7eUJBQy9CLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQzs0QkFDYixZQUFDLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7eUJBQ3RDLENBQUMsQ0FBQzs0QkFDSCxJQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxhQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxjQUFjLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7cUJBQ3BGLENBQUM7b0JBQ0YsWUFBQyxDQUFDLDBCQUEwQixFQUFFO3dCQUM1QixZQUFDLENBQUMsa0JBQWtCLEVBQUU7NEJBQ3BCLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxxQkFBcUIsRUFBRTt5QkFDeEMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO3dCQUM5QixZQUFDLENBQUMseUNBQXlDLEVBQUU7NEJBQzNDLElBQUksRUFBRSxXQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFO2dDQUN2QixJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUUsQ0FBQyxDQUFDLE1BQTJCLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3hGLENBQUMsQ0FBQzt5QkFDSCxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFTLEtBQUs7NEJBQ3RDLE9BQU8sYUFBTSxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQzdFLENBQUMsQ0FBQyxDQUFDO3FCQUNKLENBQUM7aUJBQ0gsQ0FBQztnQkFDRixZQUFDLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2xCLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTt3QkFDcEIsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRTtxQkFDakMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDO29CQUMvQixZQUFDLENBQUMsa0NBQWtDLEVBQUUsbUJBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxhQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDbkcsQ0FBQztnQkFDRixLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7YUFDM0MsQ0FBQztTQUNIO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWhLRCxvQkFnS0M7Ozs7O0FDMVFELHVDQUE0QjtBQUU1QixtREFBa0Q7QUFDbEQsa0NBQTZDO0FBQzdDLG1DQUFvQztBQUNwQyw4Q0FBdUM7QUFxQnZDLFNBQWdCLElBQUksQ0FBQyxJQUFpQjtJQUVwQyxNQUFNLE9BQU8sR0FBRyxhQUFJLENBQWlCLElBQUksQ0FBQyxFQUN4QyxLQUFLLEdBQUcsYUFBSSxDQUFDLEtBQUssQ0FBQyxFQUNuQixPQUFPLEdBQUcsYUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXhCLFNBQVMsTUFBTSxDQUFDLElBQVk7UUFDMUIsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUFFLE9BQU87UUFDdkIsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pCLENBQUM7SUFBQSxDQUFDO0lBRUYsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFZLEVBQUUsRUFBRTtRQUM5QyxNQUFNLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQztRQUN0QixJQUFJLEdBQUc7WUFBRSxJQUFJLENBQUMsS0FBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUU7Z0JBQzVDLEVBQUUsRUFBRSxHQUFHLENBQUMsU0FBUztnQkFDakIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJO2dCQUNkLElBQUk7YUFDTCxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsS0FBSyxDQUFDLFNBQWlCLEVBQUUsSUFBZSxFQUFFLElBQWU7UUFDaEUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2QsT0FBTyxDQUFDO1lBQ04sU0FBUztZQUNULElBQUk7WUFDSixJQUFJO1NBQ0wsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBQUEsQ0FBQztJQUVGLE9BQU87UUFDTCxJQUFJO1FBQ0osT0FBTztRQUNQLEtBQUs7UUFDTCxPQUFPO1FBQ1AsTUFBTTtRQUNOLEtBQUs7UUFDTCxTQUFTLENBQUMsU0FBaUIsRUFBRSxJQUFlLEVBQUUsSUFBZSxFQUFFLFlBQXFCO1lBQ2xGLFVBQVUsQ0FBQyxHQUFHLEVBQUU7Z0JBQ2QsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7Z0JBQ3RCLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxJQUFJLElBQUksU0FBUyxLQUFLLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksWUFBWSxDQUFDLEVBQUU7b0JBQzNGLEdBQUcsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO29CQUMxQixHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztvQkFDaEIsR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7b0JBQ2hCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztpQkFDZjtZQUNILENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNWLENBQUM7UUFDRCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07UUFDbkIsTUFBTSxDQUFDLFNBQWlCLEVBQUUsSUFBZSxFQUFFLEVBQVU7WUFDbkQsSUFBSSxDQUFDLEtBQU0sQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFO2dCQUN0QyxFQUFFLEVBQUUsU0FBUztnQkFDYixJQUFJO2dCQUNKLEVBQUU7YUFDSCxDQUFDLENBQUM7UUFDTCxDQUFDO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUF6REQsb0JBeURDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLElBQWlCLEVBQUUsR0FBVztJQUN6RCxPQUFPLFlBQUMsQ0FBQyxxQkFBcUIsRUFBRTtRQUM5QiwrQkFBZSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7UUFDM0IsWUFBQyxDQUFDLG9CQUFvQixFQUFFLEdBQUcsQ0FBQztLQUM3QixDQUFDLENBQUM7QUFDTCxDQUFDO0FBTEQsb0NBS0M7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBaUI7SUFFcEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQU0sRUFBRSxJQUFJLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzlFLElBQUksQ0FBQyxPQUFPO1FBQUUsT0FBTyxZQUFZLENBQUMsSUFBSSxFQUFFLDBCQUEwQixDQUFDLENBQUM7SUFFcEUsU0FBUyxhQUFhLENBQUMsS0FBWTtRQUNqQyxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBdUIsRUFDdEMsSUFBSSxHQUFHLENBQUMsT0FBUSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsQ0FBTTtZQUN4RCxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBQ0wsRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsT0FBTyxZQUFDLENBQUMscUJBQXFCLEVBQUU7UUFDOUIsK0JBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3JELFlBQUMsQ0FBQyxZQUFZLEVBQUU7WUFDZCxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLEdBQUcsRUFBRTtnQkFDdkQsNEJBQTRCO2dCQUM1QixZQUFDLENBQUMsR0FBRyxFQUFFO29CQUNMLElBQUksRUFBRSxXQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2lCQUM3RSxFQUFFLG1CQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQy9CLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtZQUNULFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDbEIsWUFBQyxDQUFDLG9DQUFvQyxFQUFFO29CQUN0QyxJQUFJLEVBQUU7d0JBQ0osTUFBTSxDQUFDLEtBQUs7NEJBQ1YsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUNyQixNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBdUIsQ0FBQzs0QkFDekMsU0FBUyxRQUFRO2dDQUNmLFVBQVUsQ0FBQztvQ0FDVCxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQ0FDeEIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDOzRCQUNULENBQUM7NEJBQ0QsRUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQzs0QkFDbkMsRUFBRSxDQUFDLE9BQU8sR0FBRztnQ0FDWCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO2dDQUNqQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7NEJBQ2hCLENBQUMsQ0FBQzs0QkFDRixFQUFFLENBQUMsTUFBTSxHQUFHO2dDQUNWLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3BCLENBQUMsQ0FBQzs0QkFDRixLQUFLLENBQUMsSUFBSyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ3RELENBQUM7d0JBQ0QsU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLOzRCQUNsQixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7NEJBQ2hELElBQUksR0FBRyxDQUFDLElBQUssQ0FBQyxJQUFJLEtBQUssTUFBTTtnQ0FBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3BELEtBQUssQ0FBQyxJQUFLLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQzt3QkFDNUIsQ0FBQztxQkFDRjtpQkFDRixDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBdkRELG9CQXVEQzs7Ozs7QUNuSkQsdUNBQTRCO0FBRzVCLGtDQUFtRDtBQUluRCxNQUFhLGVBQWU7SUFJMUIsWUFBbUIsSUFBd0IsRUFBVyxNQUFZLEVBQVcsTUFBa0I7UUFBNUUsU0FBSSxHQUFKLElBQUksQ0FBb0I7UUFBVyxXQUFNLEdBQU4sTUFBTSxDQUFNO1FBQVcsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQUYvRixTQUFJLEdBQVksS0FBSyxDQUFDO0lBRTZFLENBQUM7SUFFcEcsSUFBSSxDQUFDLENBQVM7UUFDWixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVELEdBQUcsQ0FBQyxDQUFxQjtRQUN2QixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDaEMsQ0FBQztDQUNGO0FBZkQsMENBZUM7QUFFRCxTQUFnQixTQUFTLENBQUMsT0FBZ0I7SUFDeEMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLGlCQUFpQixDQUFDO0FBQzNELENBQUM7QUFGRCw4QkFFQztBQUVELFNBQWdCLElBQUksQ0FBQyxLQUFnQixFQUFFLE9BQWdCO0lBQ3JELE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDeEQsT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDbkUsSUFBSSxJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU8sSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0YsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSyxHQUFHLENBQUM7SUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFBRSxPQUFPO0lBQ2hELE9BQU8sWUFBQyxDQUFDLGlCQUFpQixPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRTtRQUNwRixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDckMsWUFBQyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDN0IsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxHQUFHLEVBQUU7Z0JBQ3RCLEtBQUssRUFBRTtvQkFDTCxXQUFXLEVBQUUsR0FBRztvQkFDaEIsS0FBSyxFQUFFLE1BQU07aUJBQ2Q7Z0JBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQzdELENBQUM7WUFDRixZQUFDLENBQUMsR0FBRyxFQUFFO2dCQUNMLEtBQUssRUFBRTtvQkFDTCxXQUFXLEVBQUUsR0FBRztvQkFDaEIsS0FBSyxFQUFFLFFBQVE7aUJBQ2hCO2dCQUNELElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtvQkFDdkIsSUFBSSxPQUFPLENBQUMsK0JBQStCLENBQUM7d0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDOUQsQ0FBQyxDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUNULE9BQU8sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGVBQWUsRUFBRTtZQUMzQixJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDN0QsRUFBRSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxlQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7S0FDdEUsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQTlCRCxvQkE4QkM7QUFFRCxTQUFTLElBQUksQ0FBQyxJQUFxQixFQUFFLEVBQVUsRUFBRSxPQUFnQjtJQUMvRCxPQUFPLFlBQUMsQ0FBQyxxQkFBcUIsRUFBRTtRQUM5QixZQUFDLENBQUMsV0FBVyxFQUFFO1lBQ2IsU0FBUyxDQUFDLE9BQU8sQ0FBQztZQUNsQixZQUFDLENBQUMsdUNBQXVDLEVBQUU7Z0JBQ3pDLEtBQUssRUFBRTtvQkFDTCxXQUFXLEVBQUUsR0FBRztvQkFDaEIsS0FBSyxFQUFFLE9BQU87aUJBQ2Y7Z0JBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUMxRCxDQUFDO1NBQ0gsQ0FBQztRQUNGLFlBQUMsQ0FBQyxZQUFZLEVBQUU7WUFDZCxZQUFDLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2xCLFlBQUMsQ0FBQyxrQ0FBa0MsR0FBRyxFQUFFLEVBQUU7b0JBQ3pDLElBQUksRUFBRSxlQUFRLENBQW1CLEVBQUUsQ0FBQyxFQUFFO3dCQUNwQyxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQzt3QkFDdEQsRUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRTs0QkFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7d0JBQzdCLENBQUMsQ0FBQzt3QkFDRixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ2IsQ0FBQyxDQUFDO2lCQUNILENBQUM7YUFDSCxDQUFDO1NBQ0gsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7Ozs7O0FDdEZELHVDQUE0QjtBQUU1QixxQ0FBNEM7QUFJNUMsU0FBZ0IsV0FBVyxDQUFDLElBQWlCO0lBQzNDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFNLEVBQ3ZCLElBQUksR0FBRyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDOUIsSUFBSSxDQUFDLElBQUk7UUFBRSxPQUFPO0lBQ2xCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQ3RCLEVBQUUsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUNuQixNQUFNLEdBQUcsRUFBRSxLQUFLLE1BQU0sQ0FBQztJQUN6QixPQUFPLFlBQUMsQ0FBQyxzQkFBc0IsRUFBRTtRQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsaUJBQWlCLEVBQUU7WUFDL0IsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7WUFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQzFELEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDakIsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMscUJBQXFCLEVBQUU7WUFDaEMsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7WUFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQ2hELEVBQUUsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztRQUNuQyxjQUFjLENBQUMsS0FBSyxDQUFDO0tBQ3RCLENBQUMsQ0FBQztBQUNMLENBQUM7QUFsQkQsa0NBa0JDO0FBRUQsU0FBZ0IsY0FBYyxDQUFDLEtBQWdCO0lBQzdDLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFO1FBQy9CLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUM7UUFDcEMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRTtZQUFFLE9BQU8sWUFBQyxDQUFDLG9CQUFvQixFQUFFO2dCQUNoRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxLQUFLLE1BQU0sRUFBRTtnQkFDL0IsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7Z0JBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtvQkFDdkIsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQy9ELENBQUMsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDO2FBQ2pCLEVBQUUsU0FBUyxDQUFDLENBQUM7YUFDVDtZQUNILE1BQU0sU0FBUyxHQUFHLENBQUMsS0FBSyxTQUFTLEVBQy9CLElBQUksR0FBRyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDOUIsSUFBSSxTQUFTLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEtBQUssS0FBSyxDQUFDO2dCQUFFLE9BQU8sWUFBQyxDQUFDLG9CQUFvQixFQUFFO29CQUN2RixLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFO29CQUM1QixLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQztvQkFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO3dCQUN2QixLQUFLLENBQUMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUMvRCxDQUFDLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQztpQkFDakIsRUFBRSxTQUFTLENBQUMsQ0FBQztTQUNmO0tBQ0Y7QUFDSCxDQUFDO0FBdEJELHdDQXNCQzs7Ozs7QUNoREQsdUNBQTRCO0FBSTVCLHFDQUEyQztBQUUzQyw4Q0FBdUM7QUFDdkMseUNBQXlDO0FBRXpDLFNBQWdCLE9BQU8sQ0FBQyxJQUFpQjtJQUN2QyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRO1FBQ3ZELENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGdCQUFnQixLQUFLLFNBQVMsQ0FBQztBQUN2RSxDQUFDO0FBSEQsMEJBR0M7QUFFRCxTQUFnQixNQUFNLENBQUMsSUFBaUI7SUFFdEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQU0sRUFDekIsUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFDckQsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUN2RSxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBRW5FLElBQUksT0FBb0IsQ0FBQztJQUV6QixNQUFNLFdBQVcsR0FBVSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtRQUM1QyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsRSxLQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM3QixNQUFNLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFDZCxJQUFJLFFBQVE7WUFBRSxPQUFPLEdBQUc7Z0JBQ3RCLFlBQUMsQ0FBQywyQkFBMkIsRUFBRTtvQkFDN0IsSUFBSSxFQUFFLFdBQVc7b0JBQ2pCLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7aUJBQzdCLEVBQUU7b0JBQ0QsY0FBTyxDQUFDLEdBQUcsQ0FBQztvQkFDWixZQUFDLENBQUMsR0FBRyxFQUFFLHdEQUF3RCxDQUFDO2lCQUNqRSxDQUFDO2dCQUNGLFVBQVUsQ0FBQyxJQUFJLENBQUM7YUFDakIsQ0FBQzs7WUFDRyxPQUFPLEdBQUc7Z0JBQ2IsWUFBQyxDQUFDLHNCQUFzQixFQUFFO29CQUN4QixJQUFJLEVBQUUsV0FBVztpQkFDbEIsRUFBRTtvQkFDRCxjQUFPLENBQUMsR0FBRyxDQUFDO29CQUNaLFlBQUMsQ0FBQyxHQUFHLEVBQUUsdUNBQXVDLENBQUM7aUJBQ2hELENBQUM7Z0JBQ0YsWUFBQyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFDLEVBQUU7b0JBQ2hFLGNBQU8sQ0FBQyxHQUFHLENBQUM7b0JBQ1osWUFBQyxDQUFDLEdBQUcsRUFBRSw4Q0FBOEMsQ0FBQztpQkFDdkQsQ0FBQzthQUNILENBQUM7S0FDSDtTQUNJLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtRQUN4QixJQUFJLFFBQVE7WUFBRSxPQUFPLEdBQUc7Z0JBQ3RCLFlBQUMsQ0FBQywyQkFBMkIsRUFBRTtvQkFDN0IsSUFBSSxFQUFFLFdBQVc7b0JBQ2pCLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7aUJBQzdCLEVBQUU7b0JBQ0QsY0FBTyxDQUFDLEdBQUcsQ0FBQztvQkFDWixZQUFDLENBQUMsR0FBRyxFQUFFLG9GQUFvRixDQUFDO2lCQUM3RixDQUFDO2dCQUNGLFVBQVUsQ0FBQyxJQUFJLENBQUM7YUFDakIsQ0FBQzs7WUFDRyxPQUFPLEdBQUc7Z0JBQ2IsWUFBQyxDQUFDLHNCQUFzQixFQUFFO29CQUN4QixJQUFJLEVBQUUsV0FBVztpQkFDbEIsRUFBRTtvQkFDRCxjQUFPLENBQUMsR0FBRyxDQUFDO29CQUNaLFlBQUMsQ0FBQyxHQUFHLEVBQUUscUhBQXFILENBQUM7aUJBQzlILENBQUM7Z0JBQ0YsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxzQkFBc0IsRUFBRTtvQkFDOUMsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2lCQUMzRCxFQUFFO29CQUNELGNBQU8sQ0FBQyxHQUFHLENBQUM7b0JBQ1osWUFBQyxDQUFDLEdBQUcsRUFBRSxvRUFBb0UsQ0FBQztpQkFDN0UsQ0FBQztnQkFDRixlQUFlLENBQUMsSUFBSSxDQUFDO2FBQ3RCLENBQUM7S0FDSDs7UUFDSSxPQUFPLEdBQUc7WUFDYixZQUFDLENBQUMsMkJBQTJCLEVBQUU7Z0JBQzdCLElBQUksRUFBRSxXQUFXO2dCQUNqQixLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO2FBQzdCLEVBQUU7Z0JBQ0QsY0FBTyxDQUFDLEdBQUcsQ0FBQztnQkFDWixZQUFDLENBQUMsR0FBRyxFQUFFLDZDQUE2QyxDQUFDO2FBQ3RELENBQUM7WUFDRixZQUFDLENBQUMsWUFBWSxFQUFFO2dCQUNkLFlBQUMsQ0FBQyxHQUFHLEVBQUUsd0RBQXdELENBQUM7YUFDakUsQ0FBQztTQUNILENBQUM7SUFFRixPQUFPLFlBQUMsQ0FBQyxtQkFBbUIsRUFBRTtRQUM1QixJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO0tBQzNFLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDZCxDQUFDO0FBbEZELHdCQWtGQztBQUVELFNBQVMsZUFBZSxDQUFDLElBQWlCO0lBQ3hDLE1BQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQztJQUMxQixPQUFPLFlBQUMsQ0FBQyxlQUFlLEVBQUU7UUFDeEIsWUFBQyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUU7WUFDeEYsY0FBTyxDQUFDLEdBQUcsQ0FBQztZQUNaLFlBQUMsQ0FBQyxHQUFHLEVBQUUsc0NBQXNDLENBQUM7U0FDL0MsQ0FBQztRQUNGLFlBQUMsQ0FBQyxVQUFVLEVBQUU7WUFDWixLQUFLLEVBQUUsRUFBRSxXQUFXLEVBQUUsdUNBQXVDLEVBQUU7WUFDL0QsSUFBSSxFQUFFLFlBQVksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDO1NBQ2hDLENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsSUFBaUI7SUFDbkMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDO0lBQ3JCLE9BQU8sWUFBQyxDQUFDLFVBQVUsRUFBRTtRQUNuQixZQUFDLENBQUMsWUFBWSxFQUFFO1lBQ2QsY0FBTyxDQUFDLEdBQUcsQ0FBQztZQUNaLFlBQUMsQ0FBQyxHQUFHLEVBQUUsMENBQTBDLENBQUM7U0FDbkQsQ0FBQztRQUNGLFlBQUMsQ0FBQyxVQUFVLEVBQUU7WUFDWixLQUFLLEVBQUUsRUFBRSxXQUFXLEVBQUUsdURBQXVELEVBQUU7WUFDL0UsSUFBSSxFQUFFLFlBQVksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDO1NBQ2hDLENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFpQixFQUFFLFFBQXVCLEVBQUUsRUFBRTtJQUM1RSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUU7UUFDOUIsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1FBQ2YsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFNLENBQUMsRUFBRSxDQUFDLFNBQVM7UUFDNUIsUUFBUSxFQUFFLFFBQVE7S0FDbkIsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBUyxpQkFBaUIsQ0FBQyxJQUFlLEVBQUUsS0FBYTtJQUN2RCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3ZELENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxJQUFpQixFQUFFLEtBQWE7SUFDcEQsTUFBTSxLQUFLLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNsRCxPQUFPO1FBQ0wsTUFBTSxDQUFDLEtBQVk7WUFDakIsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQXVCLENBQUM7WUFDekMsRUFBRSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDakIsRUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRTtnQkFDN0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQztnQkFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUN2QyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDcEMsQ0FBQyxDQUFDO1lBQ0YsS0FBSyxDQUFDLElBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUMvQixDQUFDO1FBQ0QsU0FBUyxDQUFDLEdBQVUsRUFBRSxLQUFZO1lBQ2hDLElBQUksR0FBRyxDQUFDLElBQUssQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7Z0JBQUcsS0FBSyxDQUFDLEdBQXdCLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNoRixLQUFLLENBQUMsSUFBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQy9CLENBQUM7S0FDRixDQUFBO0FBQ0gsQ0FBQzs7Ozs7QUM3SkQsK0JBQXdEO0FBQ3hELCtDQUFvRDtBQVlwRCxNQUFxQixnQkFBZ0I7SUFJbkMsWUFDVyxJQUFpQixFQUNqQixTQUFpQixFQUNqQixLQUFZLEVBQ1osTUFBa0I7UUFIbEIsU0FBSSxHQUFKLElBQUksQ0FBYTtRQUNqQixjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQ2pCLFVBQUssR0FBTCxLQUFLLENBQU87UUFDWixXQUFNLEdBQU4sTUFBTSxDQUFZO1FBWXJCLGNBQVMsR0FBRyxHQUFTLEVBQUU7WUFDN0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQzNCLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3RDLEtBQUssR0FBbUI7Z0JBQ3RCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFO2dCQUMzQixPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTO2dCQUNuRCxRQUFRLEVBQUUsS0FBSzthQUNoQixFQUNELE9BQU8sR0FBRyxXQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQ3ZDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQztnQkFBRSxPQUFPO1lBQzdFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUM3QyxLQUFLLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQzthQUN4QjtpQkFDSSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRTtnQkFDeEIsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7Z0JBQ3hCLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQzthQUN6QztpQkFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO2dCQUMvQixLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQzthQUN6QjtpQkFBTTtnQkFDTCxLQUFLLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztnQkFDdkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7b0JBQ2xCLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFTLENBQUMsU0FBUyxDQUFDO2lCQUN6RDthQUNGO1lBQ0QsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFjLENBQUM7WUFDNUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7Z0JBQ2xCLElBQUksS0FBSyxDQUFDLFFBQVEsS0FBSyxNQUFNO29CQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUM3RSxJQUFJLEtBQUssQ0FBQyxRQUFRLEtBQUssS0FBSztvQkFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQzthQUNoRTtRQUNILENBQUMsQ0FBQTtRQUVELGFBQVEsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUV0RSxVQUFLLEdBQUcsR0FBRyxFQUFFO1lBQ1gsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDMUIsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO2dCQUFFLElBQUksR0FBRyxXQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDLENBQUE7UUFFRCxTQUFJLEdBQUcsR0FBRyxFQUFFO1lBQ1YsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRTtnQkFDcEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6QyxJQUFJLEtBQUs7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2FBQzFEO1lBQ0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUMsQ0FBQTtRQUVELFlBQU8sR0FBRyxHQUFHLEVBQUU7WUFDYixRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO2dCQUMzQixLQUFLLEtBQUs7b0JBQ1IsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO29CQUNiLE1BQU07Z0JBQ1IsS0FBSyxLQUFLO29CQUNSLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBTSxFQUMxQixDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO29CQUNwQixJQUFJLENBQUM7d0JBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQzFCLE1BQU07Z0JBQ1I7b0JBQ0UsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2FBQ2Y7UUFDSCxDQUFDLENBQUE7UUFFRCxpQkFBWSxHQUFHLEdBQUcsRUFBRTtZQUNsQixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZCxDQUFDLENBQUE7UUFFRCxTQUFJLEdBQUcsR0FBRyxFQUFFO1lBQ1YsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUNsRSxDQUFDLENBQUE7UUFFRCxhQUFRLEdBQUcsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUM3Qiw2QkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUN4RixDQUFDLENBQUE7UUFFRCxjQUFTLEdBQUcsQ0FBQyxJQUFlLEVBQUUsRUFBRSxDQUFDLFdBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFekUsV0FBTSxHQUFHLEdBQUcsRUFBRTtZQUNaLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNqQiwwQ0FBMEM7WUFDMUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbEUsQ0FBQyxDQUFBO1FBRUQsa0JBQWEsR0FBRyxNQUFNLENBQUMsRUFBRTtZQUN2QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO2dCQUMzRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNoQztRQUNILENBQUMsQ0FBQztRQXJHQSxtREFBbUQ7UUFDbkQsNkRBQTZEO1FBQzdELFVBQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDcEMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQztZQUM5QixJQUFJLENBQUMsQ0FBQyxNQUFNO2dCQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ25CLENBQUM7Q0E4RkY7QUFoSEQsbUNBZ0hDOzs7OztBQzlIRCx1Q0FBNEI7QUFHNUIscUNBQStEO0FBRy9ELE1BQU0sZUFBZSxHQUFHO0lBQ3RCLElBQUksRUFBRSx1Q0FBdUM7SUFDN0MsR0FBRyxFQUFFLDZDQUE2QztDQUNuRCxDQUFDO0FBRUYsU0FBZ0IsTUFBTSxDQUFDLElBQXNCO0lBRTNDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQ3hCLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxJQUFJLGVBQWUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFM0QsT0FBTyxZQUFDLENBQUMsY0FBYyxFQUFFO1FBQ3ZCLElBQUksRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLHVCQUF1QixDQUFDLEVBQUU7S0FDM0UsRUFBRTtRQUNELE9BQU8sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGFBQWEsRUFBRTtZQUN6QixLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFBRTtTQUNsQyxFQUFFO1lBQ0QsWUFBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLElBQUksRUFBRSxlQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUM3QyxRQUFRLENBQUMsSUFBSSxDQUFDO1NBQ2YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQ2QsWUFBQyxDQUFDLFdBQVcsRUFBRTtZQUNiLGNBQWMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDO1lBQzNCLFlBQUMsQ0FBQyxZQUFZLEVBQUU7Z0JBQ2QsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxHQUFHO29CQUNWLE1BQU0sRUFBRSxHQUFHO29CQUNYLEdBQUcsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQztpQkFDMUQ7YUFDRixDQUFDO1NBQ0gsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUF6QkQsd0JBeUJDO0FBRUQsU0FBUyxRQUFRLENBQUMsSUFBc0I7SUFDdEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFDeEIsU0FBUyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDakIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO0tBQzVDLENBQUMsQ0FBQztJQUNILElBQUksS0FBSyxDQUFDLFFBQVE7UUFBRSxPQUFPLFlBQUMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUU7WUFDL0MsWUFBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxlQUFRLENBQUMsS0FBSyxDQUFDLElBQUssQ0FBQyxFQUFFLENBQUM7U0FDL0MsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxLQUFLLENBQUMsSUFBSTtRQUFFLE9BQU8sWUFBQyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRUQsU0FBUyxjQUFjLENBQUMsSUFBc0IsRUFBRSxLQUFZO0lBQzFELE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQ3pCLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQzlCLElBQUksRUFBRSxLQUFLLEtBQUs7UUFBRSxPQUFPLFlBQUMsQ0FBQyxzQkFBc0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDakYsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQztTQUNoQyxFQUFFO1lBQ0QsY0FBTyxDQUFDLEdBQUcsQ0FBQztZQUNaLFlBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDO1NBQ25CLENBQUMsQ0FBQztJQUNILElBQUksRUFBRSxLQUFLLE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTztRQUFFLE9BQU8sWUFBQyxDQUFDLDJCQUEyQixFQUFFO1lBQ3hFLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7U0FDL0IsRUFBRTtZQUNELFlBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDO1lBQ2hELFlBQUMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDO1NBQ3BCLENBQUMsQ0FBQztJQUNILElBQUksRUFBRSxLQUFLLEtBQUs7UUFBRSxPQUFPLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN6QyxPQUFPLFlBQUMsQ0FBQyxvQkFBb0IsR0FBRyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUM5RCxZQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLFlBQUMsQ0FBQyxlQUFlLEVBQUUsWUFBQyxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUM1QyxZQUFDLENBQUMsaUJBQWlCLEVBQUU7WUFDbkIsWUFBQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN6QyxZQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1NBQ3JHLENBQUM7S0FDSCxDQUFDLENBQUMsQ0FBQyxDQUFFLFlBQVksQ0FBRSxDQUFDLENBQ3RCLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsSUFBc0I7SUFDdkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFNLEVBQzlCLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEMsT0FBTyxZQUFDLENBQUMsa0JBQWtCLEVBQUU7UUFDM0IsV0FBVyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsYUFBYSxFQUFFO1lBQzdCLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzVELEVBQUUsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7UUFDOUIsWUFBQyxDQUFDLFNBQVMsRUFBRTtZQUNYLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDL0QsRUFBRSxZQUFZLENBQUM7UUFDaEIsWUFBQyxDQUFDLFdBQVcsRUFBRTtZQUNiLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQzdFLEVBQUUsU0FBUyxDQUFDO0tBQ2QsQ0FBQyxDQUFDO0FBQ0wsQ0FBQzs7Ozs7QUM3RkQsdUNBQTRCO0FBRTVCLGtDQUF3RDtBQUN4RCxtQ0FBb0M7QUFDcEMsb0NBQWlDO0FBR2pDLFNBQWdCLElBQUksQ0FBQyxJQUFnQixFQUFFLE9BQTZCLEVBQUUsTUFBa0IsRUFBRSxNQUFrQixFQUFFLEtBQVk7SUFDeEgsTUFBTSxJQUFJLEdBQUcsYUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUNwQixJQUFJLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDcEIsU0FBUyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3pCLFVBQVUsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDM0IsSUFBSSxJQUFJLEVBQUU7WUFBRSxNQUFNLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBQUEsQ0FBQztJQUNGLE9BQU87UUFDTCxJQUFJO1FBQ0osVUFBVTtZQUNSLE1BQU0sUUFBUSxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQzNCLE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBUyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUc7Z0JBQ2pFLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksb0JBQW9CO29CQUNyRCxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsMEJBQTBCO1lBQzdFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUNELE9BQU87UUFDUCxhQUFhLENBQUMsU0FBUztZQUNyQixVQUFVLEdBQUcsU0FBUyxDQUFDO1FBQ3pCLENBQUM7UUFDRCxhQUFhLENBQUMsU0FBUztZQUNyQixnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ2xDLENBQUM7UUFDRCxZQUFZLENBQUMsUUFBUTtZQUNuQixnQkFBZ0IsQ0FBQyxVQUFTLEtBQUs7Z0JBQzdCLE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxVQUFTLENBQUM7b0JBQzVCLE9BQU8sUUFBUSxLQUFLLENBQUMsQ0FBQztnQkFDeEIsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxZQUFZLENBQUMsUUFBUTtZQUNuQixnQkFBZ0IsQ0FBQyxVQUFTLEtBQUs7Z0JBQzdCLE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDbEMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsTUFBTTtZQUNKLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDZCxJQUFJLElBQUksRUFBRTtnQkFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUN4QyxDQUFDO1FBQ0QsTUFBTSxDQUFDLFNBQVM7WUFDZCxJQUFJLENBQUMsUUFBUSxFQUFFLG9CQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxNQUFNO1FBQ04sS0FBSztLQUNOLENBQUM7QUFDSixDQUFDO0FBL0NELG9CQStDQztBQUFBLENBQUM7QUFFRixTQUFnQixJQUFJLENBQUMsSUFBSTtJQUN2QixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDckMsT0FBTyxhQUFLLENBQUM7UUFDWCxLQUFLLEVBQUUsZUFBZTtRQUN0QixPQUFPO1lBQ0wsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQztRQUNELE9BQU8sRUFBRTtZQUNQLFlBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUM3QyxZQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztZQUMvRixZQUFDLENBQUMsbUJBQW1CLEVBQUU7Z0JBQ3JCLFlBQUMsQ0FBQyxPQUFPLEVBQUU7b0JBQ1QsS0FBSyxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEVBQUU7b0JBQzVELElBQUksRUFBRSxlQUFRLENBQW1CLEVBQUUsQ0FBQyxFQUFFO3dCQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTs0QkFDckMsR0FBRyxFQUFFLE1BQU07NEJBQ1gsUUFBUSxDQUFDLENBQUM7Z0NBQ1IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7Z0NBQ3BCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7Z0NBQ3pCLEVBQUUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO2dDQUNkLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQzs0QkFDaEIsQ0FBQzt5QkFDRixDQUFDLENBQUM7b0JBQ0wsQ0FBQyxDQUFDO2lCQUNILENBQUM7YUFDSCxDQUFDO1lBQ0YsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQVMsUUFBUTtnQkFDakUsT0FBTyxZQUFDLENBQUMsMEJBQTBCLEVBQUU7b0JBQ25DLEdBQUcsRUFBRSxRQUFRO29CQUNiLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDaEQsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUNmLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7U0FDaEI7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDO0FBbkNELG9CQW1DQzs7Ozs7QUMzRkQsdUNBQTRCO0FBRTVCLDZDQUEwQztBQUMxQywyQ0FBNEM7QUFHNUMseUNBQW1EO0FBQ25ELGtDQUF3QztBQUV4QyxNQUFhLGNBQWM7SUFPekIsWUFBcUIsT0FBZSxFQUFXLE1BQWtCLEVBQVcsS0FBWTtRQUFuRSxZQUFPLEdBQVAsT0FBTyxDQUFRO1FBQVcsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQUFXLFVBQUssR0FBTCxLQUFLLENBQU87UUFMeEYsWUFBTyxHQUFZLEtBQUssQ0FBQztRQUN6QixTQUFJLEdBQVcsQ0FBQyxDQUFDO1FBRWpCLFlBQU8sR0FBWSxLQUFLLENBQUM7UUE2QnpCLFlBQU8sR0FBRyxDQUFDLElBQVksRUFBRSxFQUFFO1lBQ3pCLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUU7Z0JBQ3JCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO2dCQUNqQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDZjtRQUNILENBQUMsQ0FBQztRQUNGLGFBQVEsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0MsYUFBUSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3QyxhQUFRLEdBQUcsR0FBRyxFQUFFLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RSxlQUFVLEdBQUcsQ0FBQyxDQUFVLEVBQUUsRUFBRTtZQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUNqQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQyxDQUFDO0lBeEN5RixDQUFDO0lBRTVGLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSTtRQUNmLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUMxRixJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFO1lBQ3BCLEVBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUNsQixFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7WUFDdkIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ2Y7SUFDSCxDQUFDO0lBRUQsTUFBTSxDQUFDLFFBQWtCO1FBQ3ZCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztZQUNwQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDZjtRQUNELHFCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDdEQsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7WUFDZixJQUFJLENBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDekIsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPO29CQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDOztvQkFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDOUI7WUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBZ0JGO0FBaERELHdDQWdEQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUFvQixFQUFFLEtBQWdCO0lBRXpELE9BQU8sWUFBQyxDQUFDLHVCQUF1QixFQUFFO1FBQ2hDLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7UUFDdEQsSUFBSSxFQUFFO1lBQ0osTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQyxDQUFDO1NBQy9CO0tBQ0YsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQVJELG9CQVFDO0FBRUQsU0FBUyxXQUFXLENBQUMsS0FBZ0MsRUFBRSxLQUFnQjtJQUNyRSxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDO0lBQzlCLE9BQU87UUFDTCxZQUFDLENBQUMsU0FBUyxFQUFFO1lBQ1gsY0FBYyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7WUFDM0IsbUJBQW1CLENBQUMsSUFBSSxDQUFDO1NBQzFCLENBQUM7UUFDRixZQUFDLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztLQUN2RSxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsbUJBQW1CLENBQUMsSUFBb0I7SUFDL0MsT0FBTyxZQUFDLENBQUMsZUFBZSxFQUFFO1FBQ3hCLFlBQUMsQ0FBQyxPQUFPLEVBQUU7WUFDVCxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQzNCLElBQUksRUFBRSxXQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUN2QixJQUFJLENBQUMsVUFBVSxDQUFFLENBQUMsQ0FBQyxNQUEyQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzFELENBQUMsQ0FBQztTQUNILENBQUM7UUFDRixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7S0FDNUIsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsY0FBYyxDQUFDLEtBQWdDLEVBQUUsSUFBb0I7SUFDNUUsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksRUFDdEIsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxFQUNuRSxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLElBQUksR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDeEQsT0FBTyxZQUFDLENBQUMsV0FBVyxFQUFFO1FBQ3BCLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQztRQUNsRixXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUM7UUFDN0UsWUFBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLE1BQU0sS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3BELFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7UUFDckYsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksR0FBRyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztLQUN0RixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsSUFBWSxFQUFFLElBQVksRUFBRSxLQUFpQixFQUFFLE1BQWUsRUFBRSxJQUFvQjtJQUN2RyxPQUFPLFlBQUMsQ0FBQyxZQUFZLEVBQUU7UUFDckIsS0FBSyxFQUFFO1lBQ0wsV0FBVyxFQUFFLElBQUk7WUFDakIsUUFBUSxFQUFFLENBQUMsTUFBTTtZQUNqQixLQUFLLEVBQUUsSUFBSTtTQUNaO1FBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7S0FDNUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsV0FBVyxDQUFDLEtBQWdCO0lBQ25DLE9BQU8sQ0FBQyxPQUF1QixFQUFFLEVBQUU7UUFDakMsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDakMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsZUFBUSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQzFELE1BQU0sQ0FBQyxPQUFPLENBQUM7WUFDZixVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDakQsQ0FBQyxDQUFDLENBQUM7WUFDRixZQUFDLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDM0IsTUFBTSxDQUFDLE9BQU8sQ0FBQztTQUNoQixDQUFDO1FBQ0YsT0FBTyxZQUFDLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxFQUFFLEVBQUU7WUFDMUIsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUU7WUFDOUIsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUksT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQy9ILElBQUksRUFBRSxXQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDM0QsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNmLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxNQUE0QjtJQUM5QyxPQUFPLFlBQUMsQ0FBQyxZQUFZLEVBQUU7UUFDckIsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUk7UUFDN0QsTUFBTSxDQUFDLE1BQU0sSUFBSSxZQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0tBQy9DLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxFQUFXO0lBQ2hDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBVyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDcEUsQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLE9BQXVCO0lBQ3JDLE9BQU8sWUFBQyxDQUFDLDZCQUE2QixFQUFFO1FBQ3RDLElBQUksRUFBRTtZQUNKLE1BQU0sQ0FBQyxLQUFLO2dCQUNWLE1BQU0sRUFBRSxHQUFHLHlCQUFXLENBQUMsS0FBSyxDQUFDLEdBQWtCLEVBQUU7b0JBQy9DLFdBQVcsRUFBRSxLQUFLO29CQUNsQixRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7b0JBQzVDLFNBQVMsRUFBRSxLQUFLO29CQUNoQixRQUFRLEVBQUUsSUFBSTtvQkFDZCxXQUFXLEVBQUUsT0FBTyxDQUFDLFdBQVc7b0JBQ2hDLEdBQUcsRUFBRSxPQUFPLENBQUMsR0FBRztvQkFDaEIsUUFBUSxFQUFFLGFBQWEsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO2lCQUMxQyxDQUFDLENBQUM7Z0JBQ0gsS0FBSyxDQUFDLElBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM1QyxDQUFDO1lBQ0QsU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLO2dCQUNsQixJQUFJLEdBQUcsQ0FBQyxJQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxPQUFPLENBQUMsR0FBRyxFQUFFO29CQUNwQyxHQUFHLENBQUMsSUFBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDO3dCQUNsQixHQUFHLEVBQUUsT0FBTyxDQUFDLEdBQUc7d0JBQ2hCLFFBQVEsRUFBRSxhQUFhLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztxQkFDMUMsQ0FBQyxDQUFDO29CQUNILEdBQUcsQ0FBQyxJQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO2lCQUNoQztnQkFDRCxLQUFLLENBQUMsSUFBSyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSyxDQUFDLEVBQUUsQ0FBQztZQUNoQyxDQUFDO1NBQ0Y7S0FDRixDQUFDLENBQUE7QUFDSixDQUFDOzs7OztBQzVLRCx1Q0FBNEI7QUFjNUIsU0FBZ0IsSUFBSSxDQUFDLE1BQWtCO0lBQ3JDLElBQUksT0FBMEIsQ0FBQztJQUMvQixJQUFJLE9BQWUsQ0FBQztJQUNwQixPQUFPO1FBQ0wsR0FBRyxDQUFDLENBQVE7WUFDVixZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdEIsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUNaLE9BQU8sR0FBRyxVQUFVLENBQUM7Z0JBQ25CLE9BQU8sR0FBRyxTQUFTLENBQUM7Z0JBQ3BCLE1BQU0sRUFBRSxDQUFDO1lBQ1gsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqQixDQUFDO1FBQ0QsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQU87S0FDbkIsQ0FBQztBQUNKLENBQUM7QUFkRCxvQkFjQztBQUFBLENBQUM7QUFFRixTQUFnQixJQUFJLENBQUMsSUFBZTtJQUNsQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDckIsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUMzRCxDQUFDO0FBSEQsb0JBR0M7QUFBQSxDQUFDOzs7OztBQ2pDRix1Q0FBNkI7QUFFN0IsK0JBQXNDO0FBRXRDLHNDQUFxQztBQUVyQyxtREFBZ0U7QUFPaEUsbUJBQXdCLElBQWlCO0lBQ3ZDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDekIsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSztRQUFFLE9BQU87SUFDakMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUNuQyxXQUFXLEdBQUc7UUFDYixLQUFLLEVBQUUsdUJBQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFFO1FBQzlCLEtBQUssRUFBRSx1QkFBTyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUU7S0FDL0IsQ0FBQztJQUNGLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxDQUFDLFVBQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUFFLE9BQU87SUFDaEgsTUFBTSxNQUFNLEdBQUcsZ0JBQVksQ0FBQyxJQUFJLENBQUMsRUFDakMsT0FBTyxHQUFHLENBQUMsMEJBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUM5RCxPQUFRLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBYSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUNqRCxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckcsQ0FBQztBQWJELDRCQWFDO0FBRUQsU0FBUyxZQUFZLENBQUMsSUFBZ0IsRUFBRSxNQUFrQyxFQUFFLFdBQXdCLEVBQUUsS0FBWSxFQUFFLE9BQWdCLEVBQUUsR0FBWTtJQUNoSixNQUFNLEtBQUssR0FBRyx1QkFBTyxDQUFDLElBQUksRUFBRSxHQUFHLEtBQUssT0FBTyxDQUFDLEVBQzVDLEdBQUcsR0FBRyx1QkFBTyxDQUFDLElBQUksRUFBRSxHQUFHLEtBQUssS0FBSyxDQUFDLEVBQ2xDLE1BQU0sR0FBRyx3QkFBUSxDQUFDLElBQUksRUFBRSxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUM7SUFDM0MsT0FBTyxZQUFDLENBQUMsbUNBQW1DLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUNqRSxLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUU7S0FDbkIsRUFBRTtRQUNELFlBQUMsQ0FBQyxVQUFVLEVBQUU7WUFDWixNQUFNLElBQUksWUFBQyxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUM7WUFDbEMsWUFBQyxDQUFDLFdBQVcsRUFBRTtnQkFDYixLQUFLLElBQUksWUFBQyxDQUFDLFlBQVksRUFBRSxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNyQyxZQUFDLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbEMsR0FBRyxJQUFJLFlBQUMsQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDO2FBQzFCLENBQUM7U0FDSCxDQUFDO1FBQ0YsTUFBTSxJQUFJLE1BQU0sQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUM1QyxDQUFDLENBQUM7QUFDTCxDQUFDOzs7OztBQzdDRCxJQUFJLE9BQWUsQ0FBQztBQUVwQixTQUFTLElBQUksQ0FBQyxJQUFJO0lBQ2hCLE9BQU8sR0FBRyxPQUFPLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQztJQUNwRSxNQUFNLEtBQUssR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDNUIsR0FBRyxFQUFFO1lBQ0gsT0FBTyxHQUFHLElBQUksR0FBRyxNQUFNO1lBQ3ZCLE9BQU8sR0FBRyxJQUFJLEdBQUcsTUFBTTtTQUN4QjtLQUNGLENBQUMsQ0FBQztJQUNILE9BQU87UUFDTCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxLQUFLLFFBQVE7WUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDNUQsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUFBLENBQUM7QUFFRjtJQUNFLE9BQU87UUFDTCxPQUFPLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUM5QixPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDO0tBQ2hDLENBQUM7QUFDSixDQUFDO0FBTEQsNEJBS0M7Ozs7O0FDcEJELG1DQUFtQztBQUNuQyxtQ0FBOEI7QUFDOUIsNENBQTRDO0FBQzVDLGlFQUFpRDtBQUNqRCxtQ0FBZ0M7QUFDaEMscUNBQTBDO0FBSzFDLG1CQUF3QixJQUFpQixFQUFFLFNBQW9CLEVBQUUsSUFBdUI7SUFFdEYsTUFBTSxJQUFJLEdBQUcsYUFBSSxDQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBYSxDQUFDLEVBQ2hELE9BQU8sR0FBRyxhQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLDJDQUEyQztJQUMzQyxPQUFPLEdBQUcsYUFBSSxDQUFpQixJQUFJLENBQUMsRUFDcEMsS0FBSyxHQUFHLGVBQVMsRUFBRSxFQUNuQixXQUFXLEdBQUcsYUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUN0QixRQUFRLEdBQUcsb0JBQVUsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUVsRCxTQUFTLE1BQU07UUFDYixJQUFJLENBQUMsY0FBYyxHQUFHLG1CQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxZQUFZLEdBQUcsbUJBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFhLENBQUMsQ0FBQztRQUM5QixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDWCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDZCxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDO1FBQ2xDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLFdBQVcsQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUN6RyxDQUFDO0lBQ0QsTUFBTSxFQUFFLENBQUM7SUFFVCxTQUFTLGNBQWM7UUFDckIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQy9DLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUs7WUFBRSxLQUFLLEVBQUUsQ0FBQztRQUMzRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxTQUFTLFFBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxLQUFNLENBQUM7SUFDckIsQ0FBQztJQUVELFNBQVMsWUFBWTtRQUNuQixNQUFNLFFBQVEsR0FBRyxRQUFRLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUMzQyxJQUFJLFFBQVEsRUFBRTtZQUNaLElBQUksUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLEtBQUssS0FBSztnQkFBRSxTQUFTLEVBQUUsQ0FBQztZQUNuRCxPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUU7WUFDckMsT0FBTyxXQUFXLEVBQUUsQ0FBQztTQUN0QjtRQUNELElBQUksT0FBTyxFQUFFLEtBQUssSUFBSTtZQUFFLE9BQU87UUFDL0IsT0FBTyxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUM7UUFDMUIsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLDhCQUFXLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMxRCxJQUFJLEdBQUc7WUFBRSxTQUFTLEVBQUUsQ0FBQzthQUNoQixJQUFJLEdBQUcsS0FBSyxLQUFLO1lBQUUsU0FBUyxFQUFFLENBQUM7SUFDdEMsQ0FBQztJQUVELFNBQVMsU0FBUztRQUNoQixXQUFXLEVBQUUsQ0FBQztRQUNkLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNoQixJQUFJLFFBQVEsRUFBRTtZQUFFLFVBQVUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVELFNBQVMsV0FBVztRQUNsQixNQUFNLFNBQVMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxFQUFFLEVBQ2hELE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3BDLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxJQUFJLE9BQU8sRUFBRSxHQUFHLE1BQU0sRUFBRTtZQUN2RCxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO1lBQ3ZDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztTQUM1QztJQUNILENBQUM7SUFFRCxTQUFTLFFBQVE7UUFDZixNQUFNLElBQUksR0FBRyxRQUFRLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN0QyxJQUFJLElBQUk7WUFBRSxRQUFRLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxTQUFTLFNBQVM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBRUQsT0FBTztRQUNMLE1BQU07UUFDTixNQUFNO1lBQ0osa0VBQWtFO1lBQ2xFLElBQUksT0FBTyxFQUFFLEtBQUssS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0UsWUFBWSxFQUFFLENBQUM7UUFDakIsQ0FBQztRQUNELE9BQU8sRUFBRSxZQUFZO1FBQ3JCLElBQUk7UUFDSixJQUFJO1FBQ0osT0FBTztRQUNQLE9BQU87UUFDUCxLQUFLO1lBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxRQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdkIsTUFBTSxFQUFFLENBQUM7WUFDVCxJQUFJLENBQUMsUUFBUyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzFCLENBQUM7UUFDRCxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWE7UUFDM0IsV0FBVztRQUNYLFFBQVE7UUFDUixRQUFRO0tBQ1QsQ0FBQztBQUNKLENBQUM7QUFsR0QsNEJBa0dDOzs7OztBQ3hHRCwwQ0FBMEM7QUFDMUMsU0FBUyxTQUFTLENBQUMsSUFBZTtJQUNoQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQztRQUFFLE9BQU8sSUFBSSxDQUFDO0lBQ3JDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBTSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsRUFBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzlELENBQUM7QUFDRCwwQ0FBMEM7QUFDMUMsU0FBUyxTQUFTLENBQUMsSUFBZSxFQUFFLE1BQWMsRUFBRSxLQUFZO0lBQzlELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDckMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQU0sQ0FBQyxJQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxJQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM3RixPQUFPLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUcsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUcsSUFBSSxNQUFNLENBQUM7QUFDM0QsQ0FBQztBQUNELDBDQUEwQztBQUMxQyxTQUFTLFFBQVEsQ0FBQyxJQUFlLEVBQUUsS0FBWTtJQUM3QyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQztRQUFFLE9BQU8sSUFBSSxDQUFDO0lBQ3JDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBTSxDQUFDLElBQUk7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUNwQyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBTSxDQUFDLElBQUssR0FBRyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5RCxPQUFPLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ3JDLENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxJQUFlO0lBQ25DLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7QUFDOUMsQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLElBQWlCO0lBQy9CLE9BQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLFdBQVcsQ0FBQztBQUN6QyxDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsSUFBaUI7SUFDakMsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNqRSxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsSUFBaUI7SUFDcEMsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNqRSxDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsT0FBdUI7SUFDM0MsT0FBTyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsT0FBTyxLQUFLLFNBQVMsQ0FBQyxDQUFDO0FBQ3JGLENBQUM7QUFFRCxtREFBbUQ7QUFDbkQsbUJBQXdCLElBQWlCLEVBQUUsSUFBVSxFQUFFLE9BQWU7SUFDcEUsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLElBQUksQ0FBQztJQUMzQixJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUM7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUNwQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNoQyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFDekQsUUFBUSxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ25CLEtBQUssUUFBUSxDQUFDO1FBQ2QsS0FBSyxTQUFTO1lBQ1osSUFBSSxJQUFJLENBQUMsU0FBUztnQkFBRSxPQUFPLElBQUksQ0FBQztZQUNoQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLO2dCQUFFLE9BQU8sS0FBSyxDQUFDO1lBQzVDLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFNO2dCQUFFLE9BQU8sS0FBSyxDQUFDO1lBQ3hDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLE1BQU07Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFDNUMsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLEtBQU07Z0JBQUUsT0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkQsTUFBTTtRQUNSLEtBQUssUUFBUTtZQUNYLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxLQUFNO2dCQUFFLE9BQU8sU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lBQ2pGLE1BQU07UUFDUixLQUFLLFFBQVE7WUFDWCxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBTTtnQkFBRSxPQUFPLEtBQUssQ0FBQztZQUN4QyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lBQ2xELElBQUksTUFBTSxLQUFLLElBQUk7Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFDakMsSUFBSSxDQUFDLE1BQU0sSUFBSyxNQUFpQixHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBTTtnQkFBRSxPQUFPLEtBQUssQ0FBQztZQUN4RSxNQUFNO1FBQ1IsS0FBSyxXQUFXO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUFFLE9BQU8sSUFBSSxDQUFDO1lBQzlCLE9BQU8sU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZELEtBQUssTUFBTSxDQUFDO0tBQ2I7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUE5QkQsNEJBOEJDO0FBQUEsQ0FBQzs7Ozs7QUMxRUYsdUNBQW1DO0FBRW5DLHFDQUFxRTtBQUlyRSxtREFBZ0Q7QUFDaEQsZ0RBQWtEO0FBRWxELFNBQVMsUUFBUSxDQUFDLElBQXVCO0lBQ3ZDLE9BQU8sWUFBQyxDQUFDLGlCQUFpQixFQUFFO1FBQzFCLElBQUksRUFBRSxXQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQ3ZCLFFBQVEsQ0FBQyxJQUFJLEdBQUcsWUFBWSxHQUFJLENBQUMsQ0FBQyxNQUEyQixDQUFDLEtBQUssQ0FBQztRQUN0RSxDQUFDLENBQUM7S0FDSCxFQUFFO1FBQ0QsWUFBQyxDQUFDLFFBQVEsRUFBRTtZQUNWLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtTQUMxQyxFQUFFLGVBQWUsQ0FBQztRQUNuQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVMsT0FBTztZQUNwQyxPQUFPLFlBQUMsQ0FBQyxVQUFVLEVBQUU7Z0JBQ25CLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsSUFBSSxFQUFFO2FBQy9CLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBUyxLQUFLO2dCQUNuQyxPQUFPLGFBQU0sQ0FDWCxPQUFPLENBQUMsRUFBRSxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsRUFBRSxFQUM5QyxFQUFFLEVBQ0YsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDTixDQUFDLENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsUUFBMkIsRUFBRSxPQUFlO0lBQzlELE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM3QixRQUFRLElBQUksQ0FBQyxNQUFNLEVBQUU7UUFDbkIsS0FBSyxNQUFNO1lBQ1QsT0FBTyx3QkFBd0IsQ0FBQztRQUNsQyxLQUFLLFFBQVE7WUFDWCxPQUFPLDRCQUE0QixHQUFHLGFBQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDaEUsS0FBSyxRQUFRO1lBQ1gsT0FBTyxvQkFBb0IsR0FBRyxhQUFNLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzdELEtBQUssU0FBUztZQUNaLE9BQU8sY0FBYyxHQUFHLGFBQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDbEQsS0FBSyxRQUFRO1lBQ1gsSUFBSSxRQUFRLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRyxJQUFJLENBQUMsQ0FBQztnQkFDeEMsT0FBTyw0QkFBNEIsR0FBRyxhQUFNLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sYUFBYSxHQUFHLGFBQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDakQsS0FBSyxXQUFXO1lBQ2QsT0FBTywwQkFBMEIsQ0FBQztLQUNyQztBQUNILENBQUM7QUFFRCxTQUFnQixVQUFVLENBQUMsSUFBZTtJQUN4QyxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTztRQUFFLE9BQU8sQ0FBQyxZQUFDLENBQUMsY0FBYyxFQUFFLGNBQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMzRCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUyxFQUN0QixFQUFFLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUN4QixNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO0lBQ3pDLElBQUksRUFBRTtRQUFFLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxzQkFBc0IsRUFBRTtnQkFDakQsWUFBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLElBQUksRUFBRSxlQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQzthQUM3QyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1NBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVE7UUFBRSxPQUFPLENBQUMsa0JBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNwRSxRQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtRQUNuQixLQUFLLElBQUk7WUFDUCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDaEMsT0FBTztnQkFDTCxZQUFDLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDekIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQztpQkFDaEMsQ0FBQyxDQUFDLENBQUM7b0JBQ0YsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtpQkFDN0IsRUFBRTtvQkFDRCxZQUFDLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQztvQkFDckIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsdUJBQXVCO2lCQUNyRSxDQUFDO2FBQ0gsQ0FBQztRQUNKLEtBQUssS0FBSztZQUNSLE9BQU87Z0JBQ0wsWUFBQyxDQUFDLGlCQUFpQixFQUFFO29CQUNuQixJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7aUJBQzFDLEVBQUU7b0JBQ0QsWUFBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQU0sQ0FBQyxDQUFDLENBQUM7b0JBQzNDLFlBQUMsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLENBQUM7aUJBQzlCLENBQUM7YUFDSCxDQUFDO1FBQ0o7WUFDRSxPQUFPO2dCQUNMLFlBQUMsQ0FBQyxzQkFBc0IsRUFBRTtvQkFDeEIsWUFBQyxDQUFDLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQU0sR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUM3RCxNQUFNLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxhQUFhLEVBQUUsRUFBRSxJQUFJLEVBQUUsZUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtpQkFDN0QsQ0FBQztnQkFDRix5QkFBVyxDQUFDO29CQUNWLElBQUksRUFBRSxnQ0FBZ0M7b0JBQ3RDLEVBQUUsRUFBRSxVQUFVO29CQUNkLE9BQU8sRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFO29CQUNyQixNQUFNLEVBQUUsQ0FBQyxDQUFDLFFBQVE7aUJBQ25CLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQzVCLENBQUM7S0FDTDtBQUNILENBQUM7QUE3Q0QsZ0NBNkNDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWU7SUFFbEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUNuQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVMsQ0FBQyxJQUFJLENBQUM7SUFFN0IsT0FBTyxZQUFDLENBQUMsb0JBQW9CLEVBQUU7UUFDN0IsWUFBQyxDQUFDLDJCQUEyQixFQUFFO1lBQzdCLFlBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDdkIsWUFBQyxDQUFDLFVBQVUsRUFBRTtnQkFDWixZQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO2dCQUN4QixZQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO2FBQ3pCLENBQUM7U0FDSCxDQUFDO1FBQ0YsWUFBQyxDQUFDLDhCQUE4QixFQUFFO1lBQ2hDLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUN0QixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ25CLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFxQixFQUNwQyxFQUFFLEdBQUksTUFBTSxDQUFDLFVBQTBCLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ3BHLElBQUksRUFBRTtvQkFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDbEMsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDLENBQUM7U0FDSCxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVMsT0FBTztZQUMxQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUNyRSxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsRUFBRSxFQUNqRSxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUNyRSxPQUFPO2dCQUNMLFlBQUMsQ0FBQyxlQUFlLEVBQUU7b0JBQ2pCLEdBQUcsRUFBRSxPQUFPLENBQUMsRUFBRTtvQkFDZixLQUFLLEVBQUU7d0JBQ0wsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLE9BQU8sQ0FBQyxFQUFFO3dCQUNqQyxTQUFTLEVBQUUsT0FBTyxDQUFDLEVBQUU7cUJBQ3RCO29CQUNELEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUU7aUJBQzNCLEVBQUU7b0JBQ0QsWUFBQyxDQUFDLGNBQWMsR0FBRyxVQUFVLEVBQUU7d0JBQzdCLEtBQUssRUFBRTs0QkFDTCxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxVQUFVLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRzt5QkFDM0U7cUJBQ0YsQ0FBQztvQkFDRixZQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUM7aUJBQ3RCLENBQUM7YUFDSCxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNyQyxZQUFDLENBQUMsYUFBYSxFQUFFO1lBQ2YsWUFBQyxDQUFDLFFBQVEsRUFBRTtnQkFDVixLQUFLLEVBQUU7b0JBQ0wsV0FBVyxFQUFFLEdBQUc7b0JBQ2hCLElBQUksRUFBRSxXQUFXO29CQUNqQixLQUFLLEVBQUUsZUFBZTtpQkFDdkI7YUFDRixDQUFDO1lBQ0YsZ0JBQUssQ0FBQyxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUMzQyxDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXRERCxvQkFzREM7Ozs7O0FDdEpELG9EQUE4QztBQUU5QyxNQUFxQixTQUFTO0lBTzVCLFlBQW1CLElBQWUsRUFBVyxJQUFnQixFQUFXLE1BQWtCLEVBQVcsT0FBWSxFQUFFLE9BQXFCO1FBQXJILFNBQUksR0FBSixJQUFJLENBQVc7UUFBVyxTQUFJLEdBQUosSUFBSSxDQUFZO1FBQVcsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQUFXLFlBQU8sR0FBUCxPQUFPLENBQUs7UUFMakgsUUFBRyxHQUFlLEVBQUUsQ0FBQztRQUNyQixhQUFRLEdBQVksS0FBSyxDQUFDO1FBYTFCLFlBQU8sR0FBRyxDQUFDLENBQVUsRUFBRSxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixDQUFDLENBQUE7UUFFRCxZQUFPLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUV6RCxzQkFBaUIsR0FBRyxDQUFDLENBQWUsRUFBRSxDQUFxQixFQUFFLEVBQUU7WUFDN0QsSUFBSSxJQUFJLENBQUMsYUFBYTtnQkFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzFELElBQUksQ0FBQyxFQUFFO2dCQUNMLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsSUFBSSxDQUFDLDBCQUFVLENBQUMsQ0FBQyxDQUFDO29CQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDekU7UUFDSCxDQUFDLENBQUE7UUFFTyxnQkFBVyxHQUFHLENBQUMsQ0FBb0IsRUFBcUIsRUFBRTtZQUNoRSxJQUFJLE9BQU8sQ0FBQyxDQUFDLG9CQUFvQixLQUFLLFdBQVcsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUU7Z0JBQ2xFLENBQUMsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7YUFDM0Q7WUFDRCxPQUFPLENBQUMsQ0FBQztRQUNYLENBQUMsQ0FBQTtRQUVPLG1CQUFjLEdBQUc7WUFDdkIsU0FBUyxFQUFFLENBQUMsQ0FBWSxFQUFFLEVBQUU7Z0JBQzFCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDaEMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7Z0JBQ2QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2hCLENBQUM7WUFDRCxRQUFRLEVBQUUsQ0FBQyxLQUFlLEVBQUUsRUFBRTtnQkFDNUIsSUFBSSxLQUFLLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFBRSxPQUFPO2dCQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNuRCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDckIsVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUNsRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ2QsSUFBSSxLQUFLLENBQUMsS0FBSztvQkFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUMvRSxDQUFDO1NBQ0YsQ0FBQztRQUVGLGtCQUFhLEdBQUcsQ0FBQyxDQUFTLEVBQUUsQ0FBTSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN2QyxJQUFJLE9BQU8sSUFBSSxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNwQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ1gsT0FBTyxJQUFJLENBQUM7YUFDYjtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQyxDQUFBO1FBdERDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxLQUFLLEdBQUc7WUFDWCxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO1lBQ3JCLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFFLEVBQUUsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQ3hFLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUEsQ0FBQyxDQUFDO1NBQzdDLENBQUM7SUFDSixDQUFDO0NBaURGO0FBL0RELDRCQStEQzs7Ozs7QUNuRUQsdUNBQTZCO0FBRzdCLHFDQUF1QztBQUN2Qyw4Q0FBdUQ7QUFFdkQsbUJBQXdCLElBQWlCO0lBQ3ZDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDekIsTUFBTSxLQUFLLEdBQUcsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDbkMsSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTTtRQUFFLE9BQU8sWUFBQyxDQUFDLFdBQVcsRUFBRTtZQUM5RCxZQUFDLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ25CLFlBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQ3hCLFlBQUMsQ0FBQyxLQUFLLEVBQUU7b0JBQ1AsSUFBSSxFQUFFLGdCQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFPLENBQUM7aUJBQzdELENBQUM7YUFDSCxDQUFDO1lBQ0YsaUJBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQztTQUN4QyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBWkQsNEJBWUM7Ozs7O0FDbEJELHVDQUE2QjtBQUc3QixxQ0FBc0Q7QUFHdEQsbUJBQXdCLElBQWU7SUFDckMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRTtRQUFFLE9BQU8sWUFBQyxDQUFDLGlCQUFpQixFQUFFO1lBQzVELElBQUksRUFBRSxlQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1NBQ3ZFLEVBQUU7WUFDRCxZQUFDLENBQUMsSUFBSSxFQUFFO2dCQUNOLFlBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsbUJBQW1CLENBQUM7Z0JBQzdELFlBQUMsQ0FBQyxHQUFHLEVBQUU7b0JBQ0wsS0FBSyxFQUFFO3dCQUNMLElBQUksRUFBRSxjQUFjLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPO3dCQUN6RCxXQUFXLEVBQUUsR0FBRztxQkFDakI7aUJBQ0YsQ0FBQzthQUNILENBQUM7WUFDRixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1lBQy9FLFNBQVMsQ0FBQyxJQUFJLENBQUM7U0FDaEIsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWhCRCw0QkFnQkM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxDQUFXO0lBQzdCLE9BQU87UUFDTCxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLO1FBQzdDLFlBQVksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0tBQ3JDLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsSUFBZTtJQUNoQyxNQUFNLGFBQWEsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ3pDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQzdELE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksWUFBQyxDQUFDLEdBQUcsRUFBRTtZQUM1QixLQUFLLEVBQUU7Z0JBQ0wsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc7Z0JBQ3hCLE1BQU0sRUFBRSxRQUFRO2FBQ2pCO1NBQ0YsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDWixPQUFPLFlBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQ1QsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1NBQ2pDLEVBQUU7WUFDRCxZQUFDLENBQUMsS0FBSyxFQUFFO2dCQUNQLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEMsWUFBQyxDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDekMsQ0FBQztTQUNILENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxZQUFDLENBQUMsVUFBVSxFQUFFO1lBQ2pELFlBQUMsQ0FBQyxZQUFZLENBQUM7WUFDZixtQkFBbUI7U0FDcEIsQ0FBQyxDQUFDLENBQUM7SUFDSixPQUFPLFlBQUMsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVELFNBQVMsT0FBTyxDQUFDLElBQWU7SUFDOUIsT0FBTyxZQUFDLENBQUMsd0JBQXdCLEVBQUU7UUFDakMsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdDLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO0tBQ3JCLEVBQUU7UUFDRCxZQUFDLENBQUMsS0FBSyxFQUFFO1lBQ1AscUJBQXFCO1lBQ3JCLFlBQUMsQ0FBQyxJQUFJLENBQUM7WUFDUCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUM7U0FDOUMsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxJQUFlO0lBQy9CLE9BQU8sWUFBQyxDQUFDLHlCQUF5QixFQUFFO1FBQ2xDLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQztLQUNyQixFQUFFO1FBQ0QsWUFBQyxDQUFDLFNBQVMsRUFBRSxrQkFBa0IsQ0FBQztLQUNqQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsSUFBSSxtQkFBMkMsQ0FBQztBQUVoRCxTQUFTLGdCQUFnQjtJQUN2QixJQUFJLENBQUMsbUJBQW1CO1FBQUUsbUJBQW1CLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1lBQ3BGLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsZUFBZ0IsQ0FBQyxJQUFJLEVBQUU7Z0JBQ3RELEtBQUssRUFBRSxPQUFPO2dCQUNkLEdBQUcsRUFBRSxTQUFTO2dCQUNkLElBQUksRUFBRSxTQUFTO2dCQUNmLE1BQU0sRUFBRSxTQUFTO2dCQUNqQixNQUFNLEVBQUUsU0FBUzthQUNsQixDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFTLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUV4RCxPQUFPLG1CQUFtQixDQUFDO0FBQzdCLENBQUM7Ozs7O0FDNUZELHVDQUE0QjtBQUc1QixrQ0FBa0Q7QUFDbEQsbUNBQTZDO0FBYTdDLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFMUIsU0FBZ0IsSUFBSSxDQUFDLElBQWlCLEVBQUUsU0FBdUI7SUFFN0QsTUFBTSxTQUFTLEdBQUcsYUFBSSxDQUFDLEtBQUssQ0FBQyxFQUMzQixPQUFPLEdBQUcsYUFBSSxDQUFpQixLQUFLLENBQUMsRUFDckMsT0FBTyxHQUFHLGFBQUksQ0FBcUIsSUFBSSxDQUFDLENBQUM7SUFFM0MsU0FBUyxRQUFRLENBQUMsS0FBSztRQUNyQixLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxXQUEyQixFQUFFLEVBQUU7UUFDM0YsSUFBSSxDQUFDLEVBQUUsQ0FBQyxjQUFjLElBQUksT0FBTyxFQUFFLEtBQUssV0FBVztZQUFFLE9BQU87UUFDNUQsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLE9BQU8sV0FBVyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUM5RSxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUM7UUFDakIsSUFBSSxFQUFFLElBQUksTUFBTSxDQUFDLFVBQVUsRUFBRTtZQUMzQixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDckIsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO2dCQUNqQixNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7Z0JBQ2xDLElBQUksS0FBSyxFQUFFO29CQUNULElBQUksRUFBRSxLQUFLLEtBQUs7d0JBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO3lCQUM3Qjt3QkFDSCxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO3dCQUNoRSxJQUFJLGdCQUFPLENBQUMsS0FBSyxDQUFDOzRCQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7NEJBQzlCLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztxQkFDdEI7aUJBQ0Y7O29CQUFNLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN2QjtTQUNGOztZQUFNLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN4QixDQUFDLENBQUMsQ0FBQztJQUVILE9BQU87UUFDTCxJQUFJO1FBQ0osS0FBSztZQUNILFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqQixPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakIsQ0FBQztRQUNELFNBQVM7UUFDVCxtQkFBbUI7WUFDakIsSUFBSSxFQUFFLENBQUMsY0FBYztnQkFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUNELE9BQU87WUFDTCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO1lBQ2pELFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQixDQUFDO1FBQ0QsU0FBUztRQUNULE9BQU87UUFDUCxPQUFPO0tBQ1IsQ0FBQztBQUNKLENBQUM7QUFoREQsb0JBZ0RDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQW9CO0lBRXZDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUV6QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7UUFBRSxPQUFPLFFBQVEsRUFBRSxDQUFDO0lBQ2pELElBQUksQ0FBQyxRQUFRO1FBQUUsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFM0UsT0FBTyxZQUFDLENBQUMsK0JBQStCLEdBQUcsUUFBUSxDQUFDLEVBQUUsRUFBRTtRQUN0RCxJQUFJLEVBQUUsZUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDcEIsRUFBRSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRTtnQkFDMUIsRUFBRSxDQUFDLFVBQVUsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7b0JBQ25ELEVBQUUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3ZELElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ25CLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7S0FDSCxFQUFFLENBQUMsWUFBQyxDQUFDLG9CQUFvQixFQUFFLGNBQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNDLENBQUM7QUFsQkQsb0JBa0JDO0FBRUQsU0FBUyxRQUFRO0lBQ2YsT0FBTyxZQUFDLENBQUMsd0NBQXdDLEVBQUUsaUNBQWlDLENBQUMsQ0FBQztBQUN4RixDQUFDO0FBRUQsU0FBUyxTQUFTO0lBQ2hCLE9BQU8sWUFBQyxDQUFDLHlDQUF5QyxFQUFFLGNBQU8sRUFBRSxDQUFDLENBQUM7QUFDakUsQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLElBQW9CO0lBQ3pDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDdkIsT0FBTyxZQUFDLENBQUMsb0JBQW9CLEVBQzNCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ3hGLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsb0NBQW9DLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRyxZQUFDLENBQUMsR0FBRyxFQUFFO1lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsMEJBQTBCLENBQUM7WUFDNUMsWUFBQyxDQUFDLElBQUksQ0FBQztZQUNQLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLDhCQUE4QixDQUFDO1NBQ2pELENBQUM7UUFDRixZQUFDLENBQUMsZUFBZSxFQUFFO1lBQ2pCLEtBQUssRUFBRTtnQkFDTCxXQUFXLEVBQUUsR0FBRztnQkFDaEIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUM7YUFDbkM7WUFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDL0MsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0tBQ2pELENBQUMsQ0FDTCxDQUFDO0FBQ0osQ0FBQzs7Ozs7QUNwSEQsdUNBQTRCO0FBRTVCLG1DQUFvQztBQUNwQyxrQ0FBNEQ7QUFDNUQscURBQW1GO0FBQ25GLHVEQUE0RDtBQWdCNUQsU0FBZ0IsSUFBSSxDQUFDLFlBQWdDLEVBQUUsSUFBZ0IsRUFBRSxNQUFrQixFQUFFLGFBQWEsRUFBRSxJQUFpQjtJQUUzSCxNQUFNLElBQUksR0FBNkIsYUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBRTFELE1BQU0sT0FBTyxHQUFHLHFCQUFjLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekQsTUFBTSxRQUFRLEdBQUcsc0JBQWUsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRS9FLE1BQU0sVUFBVSxHQUFlLEVBQUUsQ0FBQztJQUVsQyxPQUFPO1FBQ0wsT0FBTztRQUNQLFFBQVE7UUFDUixJQUFJO1FBQ0osR0FBRyxDQUFDLEVBQUU7WUFDSixPQUFPLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUNELElBQUk7WUFDRixPQUFPLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQztRQUN2QixDQUFDO1FBQ0QsSUFBSSxDQUFDLEdBQUc7WUFDTixJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLENBQUM7UUFDRCxjQUFjO1lBQ1osT0FBTyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDdEIsQ0FBQztRQUNELGFBQWE7WUFDWCxJQUFJLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxDQUFDLE1BQU0sR0FBRyxFQUFFO2dCQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7Z0JBQ3ZELEtBQUssQ0FBQyxpRkFBaUYsQ0FBQyxDQUFDO1FBQ2hHLENBQUM7UUFDRCxVQUFVO0tBQ1gsQ0FBQztBQUNKLENBQUM7QUEvQkQsb0JBK0JDO0FBRUQsU0FBZ0IsVUFBVSxDQUFDLENBQWU7SUFDeEMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDekMsT0FBTyxNQUFNLElBQUksTUFBTSxLQUFLLEdBQUcsQ0FBQztBQUNsQyxDQUFDO0FBSEQsZ0NBR0M7QUFFRCxTQUFnQixPQUFPLENBQUMsSUFBZ0IsRUFBRSxJQUFZO0lBQ3BELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssSUFBSSxDQUFDLENBQUM7SUFDdEQsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25CLENBQUM7QUFIRCwwQkFHQztBQUVELFNBQWdCLFFBQVEsQ0FBQyxJQUFnQixFQUFFLE9BQWdCO0lBQ3pELFFBQU8sT0FBTyxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsRUFBRTtRQUM5QixLQUFLLEtBQUssQ0FBQyxDQUFDLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUN2QyxLQUFLLEtBQUssQ0FBQyxDQUFDLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUN2QyxLQUFLLFNBQVMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxDQUFDLE9BQU87S0FDakI7QUFDSCxDQUFDO0FBUEQsNEJBT0M7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBZTtJQUVsQyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUNoRCxZQUFZLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFDeEUsT0FBTyxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUVsQyxTQUFTLE1BQU0sQ0FBQyxLQUFZO1FBQzFCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUMxQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUssQ0FBQyxFQUFHLEVBQ3ZCLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBa0IsQ0FBQztRQUNoQyxJQUFJLEtBQUssQ0FBQyxLQUFLLEtBQUssUUFBUSxFQUFFO1lBQzVCLElBQUksT0FBTyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxFQUFFO2dCQUNqRCxlQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQzthQUMzQztTQUNGO2FBQU0sSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFO1lBQ3ZFLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUM7WUFDeEMsZUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7U0FDNUM7UUFDRCxLQUFLLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztRQUN2QixJQUFJLGFBQWEsSUFBSSxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRTtZQUNwRCxNQUFNLFlBQVksR0FBRztnQkFDbkIsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRTtvQkFDN0MsU0FBUyxFQUFFLFlBQVk7b0JBQ3ZCLE1BQU0sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTO29CQUMxRCxNQUFNO3dCQUNKLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztvQkFDL0MsQ0FBQztpQkFDRixDQUFDLENBQUM7WUFDTCxDQUFDLENBQUE7WUFDRCxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUM7Z0JBQUUsWUFBWSxFQUFFLENBQUM7O2dCQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUN6RjtJQUNILENBQUM7SUFFRCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUUxRCxPQUFPLFlBQUMsQ0FBQyxxQkFBcUIsRUFBRTtRQUM5QixJQUFJLEVBQUU7WUFDSixNQUFNLENBQUMsS0FBSztnQkFDVCxLQUFLLENBQUMsR0FBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUU7b0JBQ3ZELE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFxQixDQUFDO29CQUN2QyxNQUFNLEVBQUUsR0FBSSxNQUFNLENBQUMsVUFBMEIsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDeEcsSUFBSSxDQUFDLEVBQUU7d0JBQUUsT0FBTztvQkFDaEIsSUFBSSxNQUFNLENBQUMsT0FBTyxLQUFLLEtBQUs7d0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O3dCQUM5RSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUMzQixDQUFDLENBQUMsQ0FBQztnQkFDSCxLQUFLLENBQUMsSUFBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQ3BCLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDZCxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDNUMsQ0FBQztZQUNELFNBQVMsQ0FBQyxHQUFHLEVBQUUsS0FBSztnQkFDbEIsS0FBSyxDQUFDLElBQUssQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQzlCLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNoQixDQUFDO1lBQ0QsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUNmLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxJQUFLLENBQUMsRUFBRyxDQUFDLFFBQVEsQ0FBQztnQkFDMUMsSUFBSSxRQUFRO29CQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtZQUNsQyxDQUFDO1NBQ0Y7S0FDRixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQzFELE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUNqRSxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxPQUFPLElBQUksQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3BGLE9BQU8sWUFBQyxDQUFDLEtBQUssRUFBRTtZQUNkLEdBQUcsRUFBRSxPQUFPLENBQUMsRUFBRTtZQUNmLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFO1lBQ2hDLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUU7U0FDOUQsRUFBRTtZQUNELFlBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEQsWUFBQyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ3JCLFlBQVk7U0FDYixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0IsWUFBQyxDQUFDLFNBQVMsRUFBRTtZQUNYLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDOUQsRUFBRTtZQUNELFlBQUMsQ0FBQyxNQUFNLEVBQUUsY0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3ZCLFlBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDM0MsQ0FBQztLQUNILENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FDUCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBbEZELG9CQWtGQzs7Ozs7QUMzSkQsdUNBQTRCO0FBRzVCLGtDQUF1RDtBQUd2RCxTQUFTLFNBQVMsQ0FBQyxNQUFNO0lBQ3ZCLElBQUksQ0FBQyxNQUFNO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJO1FBQUUsT0FBTyxNQUFNLENBQUM7SUFDaEMsT0FBTyxZQUFDLENBQUMscUJBQXFCLEVBQUU7UUFDOUIsS0FBSyxFQUFFLEVBQUUsV0FBVyxFQUFFLEtBQUssR0FBRyxNQUFNLENBQUMsRUFBRSxFQUFFO0tBQzFDLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xCLENBQUM7QUFFRCxTQUFnQixVQUFVLENBQUMsTUFBTTtJQUMvQixJQUFJLENBQUMsTUFBTTtRQUFFLE9BQU8sU0FBUyxDQUFDO0lBQzlCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSTtRQUFFLE9BQU8sTUFBTSxDQUFDO0lBQ2hDLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQztBQUNyQixDQUFDO0FBSkQsZ0NBSUM7QUFFRCxTQUFnQixlQUFlLENBQUMsSUFBaUIsRUFBRSxhQUFzQjtJQUN2RSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO1FBQUUsT0FBTztJQUNoQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxFQUN0QixLQUFLLEdBQWMsSUFBSSxDQUFDLEtBQU0sRUFDOUIsT0FBTyxHQUFHLEtBQUssQ0FBQyxjQUFjLEVBQUUsRUFDaEMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFTLENBQUM7SUFDMUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNO1FBQUUsT0FBTztJQUM3QixPQUFPLFlBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQXFCLEVBQUUsRUFBRTtRQUNyRCxNQUFNLEVBQUUsR0FBUSxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQzNCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUNuRCxJQUFJLENBQUMsYUFBYSxJQUFJLE1BQU07WUFBRSxPQUFPO1FBQ3JDLE1BQU0sU0FBUyxHQUFHLE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3BELE9BQU8sWUFBQyxDQUFDLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyxFQUFFLEVBQUU7WUFDM0MsU0FBUyxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLFFBQVEsRUFBRTtnQkFDN0MsS0FBSyxFQUFFO29CQUNMLFdBQVcsRUFBRSxHQUFHO29CQUNoQixLQUFLLEVBQUUsUUFBUTtpQkFDaEI7Z0JBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUU7b0JBQ3RCLElBQUksT0FBTyxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMsRUFBRSxDQUFDLEdBQUcsY0FBYyxDQUFDO3dCQUN4RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUM5RCxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUNoQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDVCxNQUFNLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsUUFBUSxFQUFFO2dCQUMxQyxLQUFLLEVBQUU7b0JBQ0wsV0FBVyxFQUFFLEdBQUc7b0JBQ2hCLEtBQUssRUFBRSxNQUFNO2lCQUNkO2dCQUNELElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO29CQUN0QixLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQ3ZELENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtZQUNULFNBQVMsQ0FBQyxFQUFFLENBQUM7WUFDYixHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsTUFBTTtnQkFDTixZQUFDLENBQUMsV0FBVyxFQUFFLG1CQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbkMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ1AsSUFBSTtZQUNKLFlBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsZUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1NBQ2hELENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDO0FBekNELDBDQXlDQzs7Ozs7QUM3REQsbUNBQThCO0FBQzlCLDhDQUF1QztBQUV2QyxpREFBb0Q7QUFDcEQsbURBQXNEO0FBQ3RELG9FQUF3RDtBQUV4RCwrQ0FBcUU7QUFDckUsNkNBQWdFO0FBQ2hFLDJDQUFtRTtBQUNuRSxtQ0FBNEM7QUFDNUMsNkNBQWlEO0FBQ2pELDJDQUErQztBQUMvQyw2Q0FBc0Q7QUFDdEQscUNBQXFDO0FBQ3JDLGtDQUFrQztBQUNsQywrQkFBd0M7QUFFeEMsa0VBQTJEO0FBQzNELCtDQUFnRDtBQUNoRCxpREFBMEM7QUFFMUMsNkNBQThDO0FBRTlDLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFMUIsaURBQWlEO0FBQ2pELGdDQUFnQztBQUNoQyxtQkFBd0IsSUFBZSxFQUFFLElBQWlCLEVBQUUsUUFBa0IsRUFBRSxZQUFnQyxFQUFFLFNBQXFCO0lBRXJJLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQzlCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7SUFFM0IsTUFBTSxFQUFFLEdBQVksQ0FBQyxHQUFHLEVBQUU7UUFDeEIsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7UUFDcEUsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsZUFBZSxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQy9GLE9BQU87WUFDTCxPQUFPLEVBQUUsS0FBSztZQUNkLEdBQUcsRUFBRSxhQUFJLENBQU0sU0FBUyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7WUFDOUUsT0FBTyxFQUFFLGFBQUksQ0FBVSxNQUFNLENBQUM7WUFDOUIsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUM5RCx1QkFBdUI7WUFDdkIsSUFBSSxFQUFFO2dCQUNKLE1BQU0sRUFBRSxPQUFPO2dCQUNmLEtBQUssRUFBRSxJQUFJO2FBQ1o7WUFDRCwwQ0FBMEM7WUFDMUMsTUFBTSxFQUFFLENBQUM7WUFDVCx5QkFBeUI7WUFDekIsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSTtZQUN0RCxnQkFBZ0IsRUFBRSxTQUFTO1NBQzVCLENBQUM7SUFDSixDQUFDLENBQUMsRUFBRSxDQUFDO0lBRUwsTUFBTSxLQUFLLEdBQUcsWUFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWhDLFNBQVMsU0FBUztRQUNoQixLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BCLENBQUM7SUFBQSxDQUFDO0lBRUYsTUFBTSxPQUFPLEdBQUcsbUJBQVUsQ0FBQztRQUN6QixRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU87UUFDdEIsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU07UUFDNUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1FBQ3JCLElBQUk7UUFDSixHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUc7UUFDWCxTQUFTO1FBQ1QsS0FBSztRQUNMLHFCQUFxQjtZQUNuQixFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDdkIsQ0FBQztRQUNELE1BQU07UUFDTixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7S0FDbEIsQ0FBQyxDQUFDO0lBRUgsTUFBTSxRQUFRLEdBQUcsb0JBQVcsQ0FDMUIsSUFBSSxDQUFDLFFBQVEsRUFDYixJQUFJLEVBQ0osR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFDeEIsU0FBUyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLEVBQ2xELElBQUksQ0FBQyxDQUFDO0lBRVIsU0FBUyxjQUFjO1FBQ3JCLE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFFLENBQUM7SUFDckMsQ0FBQztJQUFBLENBQUM7SUFDRixTQUFTLGNBQWM7UUFDckIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUNuRCxDQUFDO0lBQUEsQ0FBQztJQUVGLE1BQU0sVUFBVSxHQUFHLElBQUksMkJBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFbkUsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLG1CQUFTLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBRXBHLE1BQU0sSUFBSSxHQUFrQixnQkFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFO1FBQ3JELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckIsSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxVQUFVLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxJQUFJLENBQUMsS0FBSztZQUMvSCxRQUFRLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ25DLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFFMUMsU0FBUyxTQUFTO1FBQ2hCLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0lBRUQsU0FBUyxVQUFVLENBQUMsQ0FBUyxFQUFFLENBQU07UUFDbkMsSUFBSSxTQUFTLEVBQUUsRUFBRTtZQUNmLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDWCxPQUFPLElBQUksQ0FBQztTQUNiO1FBQ0QsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUFBLENBQUM7SUFFRixNQUFNLFdBQVcsR0FBZ0Isa0JBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2RCxNQUFNLFNBQVMsR0FBYyxpQkFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pELE1BQU0sSUFBSSxHQUFHLGdCQUFRLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUQsTUFBTSxTQUFTLEdBQUcsSUFBSSw2QkFBZSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQUU7UUFDMUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN2QixDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDWCxNQUFNLFdBQVcsR0FBRyxJQUFJLDZCQUFlLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQUU7UUFDcEUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNyRCxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFWCxNQUFNLFVBQVUsR0FBRyxpQkFBYyxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUM7SUFFNUQsU0FBUyxZQUFZLENBQUMsR0FBRztRQUN2QixHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7UUFDdEIsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDO0lBRUQsU0FBUyxjQUFjO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLGdCQUFnQixLQUFLLFNBQVM7WUFDL0QsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEtBQUssTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxjQUFjLEVBQUU7UUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdEUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXO1FBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUV6RixTQUFTLGlCQUFpQjtRQUN4QixJQUFJLElBQUksQ0FBQyxLQUFLO1lBQUUsT0FBTztRQUN2QixNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDOUMsb0NBQW9DO1FBQ3BDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLGFBQWEsQ0FBQztRQUMvQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JELEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEVBQUMsS0FBSyxFQUFFLGFBQWEsRUFBQyxDQUFDLENBQUM7UUFDM0QsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQzlFLE1BQU0sUUFBUSxHQUFZLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDM0csSUFBSSxDQUFDLFFBQVE7WUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVE7WUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzdELElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFBQSxDQUFDO0lBQ0YsaUJBQWlCLEVBQUUsQ0FBQztJQUVwQixTQUFTLGlCQUFpQjtRQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVE7WUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDbkUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVE7WUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDbEQsSUFBSSxRQUFRO1lBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxRQUFRLENBQUMsQ0FBYTtRQUM3QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBTSxDQUFDO1FBQ25CLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDM0IsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDckQsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZHLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNO1lBQUUsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDbEMsNEVBQTRFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNwRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2hDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUMzQixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUVyQixNQUFNLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLFdBQVcsQ0FBQztRQUM1QyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbkMsRUFBRSxDQUFDLGdCQUFnQixHQUFHLFNBQVMsQ0FBQztRQUNoQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3BCLEVBQUUsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBRW5CLHVCQUF1QixFQUFFLENBQUM7UUFDMUIsSUFBSSxLQUFLO1lBQUUsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVsRSxJQUFJLFFBQW1CLENBQUM7UUFFeEIsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNsQixFQUFFLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1lBQ3ZDLFFBQVEsR0FBRyxDQUNULENBQUMsRUFBRSxDQUFDLGdCQUFnQixLQUFLLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxRQUFRLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FDNUUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztTQUN6QjthQUFNO1lBQ0wsUUFBUSxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUNsQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLFdBQVEsQ0FBQyxJQUFJLENBQUMsQ0FDckcsQ0FBQztTQUNIO1FBRUQsMEVBQTBFO1FBQzFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBRXBELEVBQUUsQ0FBQyxnQkFBZ0IsR0FBRyxTQUFTLENBQUM7UUFFaEMsaUJBQWlCLEVBQUUsQ0FBQztRQUNwQixVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDbkIsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFcEUsTUFBTSxFQUFFLENBQUM7UUFDVCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUFBLENBQUM7SUFFRixNQUFNLFNBQVMsR0FBRyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7UUFDbkMsRUFBRSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDbEIsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUNmLFFBQVEsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQ3BDLElBQUksQ0FBQyxFQUFFLEVBQ1AsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FDMUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QixDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sU0FBUyxHQUFHLGtCQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBZSxFQUFFLEVBQUU7UUFDbEQsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJO1lBQUUsVUFBVSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUM7Z0JBQ3BGLElBQUk7YUFDTCxDQUFDLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxPQUFPLENBQUMsYUFBYSxFQUFFO1FBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBRTlDLFNBQVMsV0FBVztRQUNsQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztJQUFBLENBQUM7SUFFRixNQUFNLEtBQUssR0FBRyxpQkFBUyxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFL0UsTUFBTSxRQUFRLEdBQWtDLFlBQVksSUFBSSwyQkFBWSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFFdkcsSUFBSSxZQUEwQyxDQUFDO0lBRS9DLFNBQVMsdUJBQXVCO1FBQzlCLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFBRSxPQUFPLFlBQVksR0FBRyxTQUFTLENBQUM7UUFDdkQsSUFBSSxZQUFZLElBQUksWUFBWSxDQUFDLFNBQVMsS0FBSyxFQUFFLENBQUMsU0FBUztZQUFFLE9BQU87UUFDcEUsWUFBWSxHQUFHLElBQUksMEJBQWdCLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM1RSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQUNELHVCQUF1QixFQUFFLENBQUM7SUFFMUIsU0FBUyxjQUFjLENBQUMsTUFBTTtRQUM1QixNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsRUFBRTtZQUNsQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO2dCQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN2QyxVQUFVLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQztvQkFDaEMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO29CQUNmLE1BQU07aUJBQ1AsQ0FBQyxDQUFDLENBQUM7YUFDTDtZQUNELFlBQVksSUFBSSxZQUFZLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JELENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCxTQUFTLFlBQVksQ0FBQyxVQUFVO1FBQzlCLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLEtBQUssRUFBRSxDQUFDLFNBQVMsRUFBRTtZQUMzQyw4Q0FBOEM7WUFDOUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxVQUFVLENBQUMsTUFBTTtnQkFBRSxTQUFTLEVBQUUsQ0FBQztZQUNyRCxPQUFPLElBQUksQ0FBQztTQUNiO0lBQ0gsQ0FBQztJQUVELFNBQVMsZUFBZSxDQUFDLEdBQWlCO1FBQ3hDLEdBQUcsSUFBSSxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQyxFQUFFLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUM1QixDQUFDO0lBRUQsU0FBUyxZQUFZLENBQUMsR0FBUTtRQUM1QixHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7UUFDdEIsR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3JCLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUVELE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUVqRixNQUFNLGNBQWMsR0FBRztRQUNyQixJQUFJLENBQUMsQ0FBQztZQUNKLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ2xCLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ1osZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDbkIsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUNaLE9BQU8sTUFBTSxFQUFFLENBQUM7YUFDakI7WUFDRCxJQUFJLFFBQVEsQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTO2dCQUNoRCxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDdEMsT0FBTyxTQUFTLEVBQUUsQ0FBQzthQUNwQjtZQUNELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDbkMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRztnQkFBRSxPQUFPO1lBQ3BDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELE9BQU8sQ0FBQyxDQUFDO1lBQ1AsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDbEIsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ1YsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ1QsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZixlQUFlLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLElBQUksWUFBWSxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU07Z0JBQUUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5RixJQUFJLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTTtnQkFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDM0MsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ25CLElBQUksTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNO29CQUFFLE1BQU0sRUFBRSxDQUFDO2dCQUN4QyxPQUFPO2FBQ1I7WUFDRCxJQUFJLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFO2dCQUNyQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQzdDLE9BQU87YUFDUjtZQUNELElBQUksS0FBSztnQkFBRSxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUQsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2RCxJQUFJLENBQUMsT0FBTztnQkFBRSxPQUFPLFNBQVMsRUFBRSxDQUFDO1lBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLE1BQU07Z0JBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNoQyxRQUFRLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJO2dCQUMzQixRQUFRLENBQUMsSUFBSSxLQUFLLFdBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUN2RDtnQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELFVBQVUsQ0FBQyxDQUFDO1lBQ1YsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDbEIsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWixlQUFlLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDO2dCQUFFLE9BQU87WUFDNUIsOEJBQThCO1lBQzlCLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUc7Z0JBQUUsT0FBTztZQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQUUsT0FBTyxTQUFTLEVBQUUsQ0FBQztZQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsTUFBTSxFQUFFLENBQUM7UUFDWCxDQUFDO1FBQ0QsT0FBTyxDQUFDLENBQUM7WUFDUCxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUNsQixHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNaLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQUUsT0FBTztZQUM1QixJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHO2dCQUFFLE9BQU87WUFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUFFLE9BQU8sU0FBUyxFQUFFLENBQUM7WUFDeEQsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDakQsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsTUFBTSxFQUFFLENBQUM7UUFDWCxDQUFDO1FBQ0QsTUFBTSxFQUFFLFNBQVM7UUFDakIsYUFBYSxDQUFDLENBQUM7WUFDYixlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2pDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTTtnQkFBRSxTQUFTLEVBQUUsQ0FBQzs7Z0JBQzNCLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUM7UUFDRCxhQUFhLENBQUMsQ0FBQztZQUNiLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsU0FBUyxFQUFFLENBQUM7UUFDZCxDQUFDO1FBQ0QsV0FBVyxDQUFDLENBQUM7WUFDWCxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRztnQkFBRSxPQUFPO1lBQ3BDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLFNBQVMsRUFBRTtnQkFDbkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDbEMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDekI7WUFDRCxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxTQUFTLENBQUMsQ0FBQztZQUNULGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHO2dCQUFFLE9BQU87WUFDcEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQzFCLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELFVBQVUsQ0FBQyxDQUFDO1lBQ1YsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQixJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUN4QixJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRTtnQkFDaEMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO2dCQUNyQixFQUFFLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO2FBQzlCO1lBQ0QsU0FBUyxFQUFFLENBQUM7UUFDZCxDQUFDO1FBQ0QsT0FBTyxDQUFDLENBQUM7WUFDUCxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLGlCQUFpQixFQUFFLENBQUM7WUFDcEIsTUFBTSxFQUFFLENBQUM7UUFDWCxDQUFDO1FBQ0QsUUFBUSxDQUFDLENBQUM7WUFDUixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxjQUFjLEVBQUUsRUFBRTtnQkFDckIsRUFBRSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUN2QixJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNO29CQUFFLFNBQVMsRUFBRSxDQUFDO2FBQ2xDO1lBQ0QsTUFBTSxFQUFFLENBQUM7UUFDWCxDQUFDO1FBQ0QsTUFBTSxDQUFDLENBQUM7WUFDTixNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUNsQixHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNaLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQUUsT0FBTztZQUM1QixJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHO2dCQUFFLE9BQU87WUFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDcEMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQyxJQUFJO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELGVBQWUsQ0FBQyxDQUFDO1lBQ2YsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNqQixDQUFDO1FBQ0QsVUFBVSxDQUFDLENBQUM7WUFDVixNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUNsQixHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNaLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQUUsT0FBTztZQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMzQyxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxPQUFPLENBQUMsQ0FBQztZQUNQLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsSUFBSSxDQUFDLENBQUMsU0FBUyxLQUFLLEVBQUUsQ0FBQyxTQUFTO2dCQUFFLE9BQU87WUFDekMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUMzQixNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxhQUFhLENBQUMsQ0FBQztZQUNiLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ2xCLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ1osZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQztnQkFBRSxPQUFPO1lBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9DLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELE1BQU0sQ0FBQyxDQUFDO1lBQ04sTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDbEIsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWixlQUFlLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDO2dCQUFFLE9BQU87WUFDNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUMsTUFBTSxFQUFFLENBQUM7UUFDWCxDQUFDO1FBQ0QsS0FBSyxDQUFDLENBQUM7WUFDTCxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUNsQixHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNaLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQUUsT0FBTztZQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN6QyxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxjQUFjLENBQUMsQ0FBQztZQUNkLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ2xCLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ1osZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQztnQkFBRSxPQUFPO1lBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkQsTUFBTSxFQUFFLENBQUM7UUFDWCxDQUFDO1FBQ0QsT0FBTyxDQUFDLENBQUM7WUFDUCxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7Z0JBQUUsT0FBTztZQUM1QixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQzdCLE1BQU0sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUNELE1BQU0sQ0FBQyxDQUFDO1lBQ04sSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUN2QixJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUc7Z0JBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNqRCxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxpQkFBaUIsRUFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLGFBQWE7UUFDbkQsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxZQUFZO1FBQ2pELGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsWUFBWTtRQUNqRCxLQUFLLENBQUMsQ0FBQztZQUNMLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFDRCxLQUFLLENBQUMsR0FBRztZQUNQLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNiLENBQUM7S0FDRixDQUFDO0lBRUYsT0FBTztRQUNMLElBQUk7UUFDSixJQUFJO1FBQ0osT0FBTztRQUNQLFFBQVE7UUFDUixLQUFLO1FBQ0wsV0FBVztRQUNYLFNBQVM7UUFDVCxVQUFVO1FBQ1YsS0FBSztRQUNMLElBQUk7UUFDSixTQUFTO1FBQ1QsV0FBVztRQUNYLEVBQUU7UUFDRixLQUFLO1FBQ0wsVUFBVTtRQUNWLGlCQUFpQjtZQUNmLE9BQU8sSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztRQUNoRCxDQUFDO1FBQ0QsVUFBVTtZQUNSLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3pCLE1BQU0sRUFBRSxDQUFDO1lBQ1QsV0FBVyxFQUFFLENBQUM7UUFDaEIsQ0FBQztRQUNELFFBQVE7WUFDTixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDdkIsQ0FBQztRQUNELGNBQWM7UUFDZCxjQUFjO1FBQ2QsU0FBUyxDQUFDLElBQWU7WUFDdkIsSUFBSSxZQUFZO2dCQUFFLE9BQU8sWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxLQUFLLFNBQVM7Z0JBQ3ZDLGNBQWMsRUFBRTtnQkFDaEIsV0FBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLHFCQUFxQjtnQkFDM0QsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFRLENBQUM7UUFDbEUsQ0FBQztRQUNELE1BQU07WUFDSixJQUFJLFlBQVk7Z0JBQUUsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDOztnQkFDbkMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLHNDQUFzQztZQUMxRixJQUFJLFFBQVE7Z0JBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xDLENBQUM7UUFDRCxZQUFZO1FBQ1osT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsWUFBWTtZQUM5QixTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEIsV0FBVyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDaEUsQ0FBQztRQUNELFVBQVUsQ0FBQyxJQUFJO1lBQ2IsVUFBVSxDQUFDLFlBQVksRUFBRSxZQUFZLENBQUM7Z0JBQ3BDLElBQUk7Z0JBQ0osTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJO2FBQ2xCLENBQUMsQ0FBQyxDQUFDO1FBQ04sQ0FBQztRQUNELE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUN0QixVQUFVLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQztnQkFDakMsVUFBVTtnQkFDVixJQUFJO2FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDTixDQUFDO1FBQ0QsY0FBYyxDQUFDLElBQUksRUFBRSxLQUFLO1lBQ3hCLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxZQUFZLENBQUM7Z0JBQ3hDLEtBQUs7Z0JBQ0wsSUFBSTthQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ04sQ0FBQztRQUNELFVBQVUsQ0FBQyxFQUFFLEVBQUUsS0FBSztZQUNsQixNQUFNLFVBQVUsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUNqRCxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtnQkFDL0IsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDdEIsSUFBSSxVQUFVO29CQUFFLE1BQU0sRUFBRSxDQUFDO2FBQzFCO1lBQ0QsSUFBSSxVQUFVO2dCQUFFLE9BQU87WUFDdkIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsRUFBRTtnQkFDcEQsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2dCQUN2QixJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU07b0JBQUUsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7Z0JBQzlCLEVBQUUsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO2dCQUNsQixTQUFTLEVBQUUsQ0FBQzthQUNiO1lBQ0QsRUFBRSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDbEIsRUFBRSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7WUFDdEIsRUFBRSxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQztZQUN6QixNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxZQUFZO1lBQ1YsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztZQUN6RCxTQUFTLEVBQUUsQ0FBQztRQUNkLENBQUM7UUFDRCxXQUFXO1lBQ1QsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDMUQsU0FBUyxFQUFFLENBQUM7UUFDZCxDQUFDO1FBQ0QsU0FBUztRQUNULFVBQVU7UUFDVixTQUFTO1FBQ1QsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1FBQ3ZCLFdBQVc7UUFDWCxRQUFRO1FBQ1IsWUFBWSxFQUFFLEdBQUcsRUFBRSxDQUFDLFlBQVk7UUFDaEMsV0FBVztZQUNULE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQzVCLFNBQVMsR0FBRyxjQUFjLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDbEMsS0FBSyxJQUFJLENBQUMsSUFBSSxRQUFRO2dCQUNwQixJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssU0FBUztvQkFBRSxPQUFPLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkUsQ0FBQztRQUNELG1CQUFtQixDQUFDLENBQUM7WUFDbkIsRUFBRSxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQztZQUN4Qix1QkFBdUIsRUFBRSxDQUFDO1lBQzFCLGlCQUFpQixFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLENBQUM7Z0JBQUUsU0FBUyxFQUFFLENBQUM7UUFDdEIsQ0FBQztRQUNELGNBQWM7UUFDZCxZQUFZLENBQUMsTUFBYyxFQUFFLE1BQWU7WUFDMUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxZQUFZLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9ELENBQUM7UUFDRCxZQUFZO1lBQ1YsSUFBSSxZQUFZO2dCQUFFLFlBQVksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNoRCxDQUFDO1FBQ0QsTUFBTTtRQUNOLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztRQUNqQixhQUFhLEVBQUUsQ0FBQyxDQUFTLEVBQUUsQ0FBTSxFQUFFLEVBQUU7WUFDbkMsTUFBTSxPQUFPLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksT0FBTyxFQUFFO2dCQUNYLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDWCxPQUFPLElBQUksQ0FBQzthQUNiO1lBQ0QsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzlDLENBQUM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQW5rQkQsNEJBbWtCQztBQUFBLENBQUM7Ozs7O0FDL2xCRix1Q0FBNEI7QUFFNUIsa0NBQWtDO0FBQ2xDLG1DQUFvQztBQUNwQyxrQ0FBMkQ7QUE0QjNELFNBQVMsTUFBTSxDQUFDLENBQVM7SUFDdkIsT0FBTztRQUNMLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTtZQUNwQixLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUU7U0FDakMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ1YsWUFBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsR0FBRyxlQUFlLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBUyxDQUFDO1lBQzlELE9BQU8sWUFBQyxDQUFDLFFBQVEsRUFBRTtnQkFDakIsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNYLFFBQVEsRUFBRSxDQUFDLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQzlCO2FBQ0YsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNYLENBQUMsQ0FBQyxDQUFDO0tBQ0osQ0FBQztBQUNKLENBQUM7QUFBQSxDQUFDO0FBRUYsU0FBZ0IsSUFBSSxDQUFDLElBQThDLEVBQUUsT0FBd0IsRUFBRSxLQUFZLEVBQUUsTUFBYyxFQUFFLEtBQWlCO0lBRTVJLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUUxQixTQUFTLEtBQUs7UUFDWixNQUFNLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQztRQUNwQixPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUssU0FBUyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQ3pFLENBQUM7SUFFRCxNQUFNLElBQUksR0FBRyxhQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFekIsT0FBTztRQUNMLElBQUk7UUFDSixTQUFTO1lBQ1AsSUFBSSxLQUFLLEVBQUU7Z0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFCLENBQUM7UUFDRCxJQUFJLENBQUMsSUFBYyxFQUFFLEtBQWM7WUFDakMsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDZCxDQUFDO1FBQ0QsT0FBTztRQUNQLEtBQUs7UUFDTCxLQUFLO1FBQ0wsTUFBTTtRQUNOLEtBQUs7S0FDTixDQUFDO0FBQ0osQ0FBQztBQTFCRCxvQkEwQkM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBbUI7SUFDdEMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUMzQixNQUFNLFVBQVUsR0FBRyxVQUFTLEtBQUssRUFBRSxRQUFRO1FBQ3pDLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUF1QixDQUFDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO1lBQzFCLEVBQUUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNyQixJQUFJLEtBQUs7Z0JBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3ZCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNaO0lBQ0gsQ0FBQyxDQUFBO0lBQ0QsTUFBTSxvQkFBb0IsR0FBYTtRQUNyQyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyQyxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNqRCxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2QyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUMzQyxDQUFDO0lBQ0YsT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDO1FBQ2pCLEtBQUssRUFBRSxZQUFZO1FBQ25CLE9BQU8sRUFBRTtZQUNQLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDakIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUM7UUFDRCxPQUFPLEVBQUU7WUFDUCxZQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ3hHLFlBQUMsQ0FBQyxZQUFZLEVBQUU7Z0JBQ2QsSUFBSSxFQUFFLGlCQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ25CLE1BQU0sR0FBRyxHQUFhLEVBQUUsQ0FBQztvQkFDekIscUVBQXFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDM0YsTUFBTSxFQUFFLEdBQUssQ0FBQyxDQUFDLE1BQXNCLENBQUMsYUFBYSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQXNCLENBQUM7d0JBQ3hGLElBQUksRUFBRTs0QkFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztvQkFDNUIsQ0FBQyxDQUFDLENBQUM7b0JBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ3hCLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ2hCLEVBQUU7Z0JBQ0QsWUFBQyxDQUFDLGdCQUFnQixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtvQkFDaEQsWUFBQyxDQUFDLGtCQUFrQixFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ25GLFlBQUMsQ0FBQywrQkFBK0IsRUFBRTt3QkFDakMsS0FBSyxFQUFFOzRCQUNMLFNBQVMsRUFBRSxDQUFDOzRCQUNaLFNBQVMsRUFBRSxHQUFHO3lCQUNmO3dCQUNELElBQUksRUFBRTs0QkFDSixNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQzs0QkFDekMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7eUJBQ2pEO3FCQUNGLENBQUM7aUJBQ0gsQ0FBQztnQkFDRixZQUFDLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2xCLFlBQUMsQ0FBQywwQkFBMEIsRUFBRSxNQUFNLENBQUM7d0JBQ25DLEdBQUcsRUFBRSxZQUFZO3dCQUNqQixJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDO3dCQUNwQyxPQUFPLEVBQUU7NEJBQ1AsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7NEJBQ3RDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDOzRCQUMxQyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQzt5QkFDNUM7d0JBQ0QsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVO3FCQUMxQixDQUFDLENBQUM7b0JBQ0gsWUFBQyxDQUFDLDBCQUEwQixFQUFFLE1BQU0sQ0FBQzt3QkFDbkMsR0FBRyxFQUFFLFdBQVc7d0JBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUM7d0JBQ3RDLE9BQU8sRUFBRSxvQkFBb0I7d0JBQzdCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVM7cUJBQ2xDLENBQUMsQ0FBQztpQkFDSixDQUFDO2dCQUNGLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtvQkFDbEIsWUFBQyxDQUFDLDBCQUEwQixFQUFFLE1BQU0sQ0FBQzt3QkFDbkMsR0FBRyxFQUFFLFVBQVU7d0JBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDO3dCQUMxQyxPQUFPLEVBQUUsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDdEUsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUTtxQkFDakMsQ0FBQyxDQUFDO29CQUNILFlBQUMsQ0FBQywwQkFBMEIsRUFBRSxNQUFNLENBQUM7d0JBQ25DLEdBQUcsRUFBRSxVQUFVO3dCQUNmLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQzt3QkFDekMsT0FBTyxFQUFFLG9CQUFvQjt3QkFDN0IsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUTtxQkFDakMsQ0FBQyxDQUFDO2lCQUNKLENBQUM7Z0JBQ0YsWUFBQyxDQUFDLGdCQUFnQixFQUFFO29CQUNsQixZQUFDLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxDQUFDO3dCQUNuQyxHQUFHLEVBQUUsTUFBTTt3QkFDWCxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO3dCQUM5QixPQUFPLEVBQUUsb0JBQW9CO3dCQUM3QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJO3FCQUM3QixDQUFDLENBQUM7b0JBQ0gsWUFBQyxDQUFDLDBCQUEwQixFQUFFLE1BQU0sQ0FBQzt3QkFDbkMsR0FBRyxFQUFFLFFBQVE7d0JBQ2IsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQzt3QkFDcEMsT0FBTyxFQUFFOzRCQUNQLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7NEJBQzlELENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7eUJBQ3ZEO3dCQUNELFFBQVEsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNO3FCQUNwQyxDQUFDLENBQUM7aUJBQ0osQ0FBQztnQkFDRixZQUFDLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxDQUFDO29CQUNuQyxHQUFHLEVBQUUsYUFBYTtvQkFDbEIsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDO29CQUM1QyxPQUFPLEVBQUU7d0JBQ1AsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQzt3QkFDOUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztxQkFDakQ7b0JBQ0QsUUFBUSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVc7aUJBQ3pDLENBQUMsQ0FBQztnQkFDSCxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUN6RCxDQUFDO1lBQ0YsWUFBQyxDQUFDLGlCQUFpQixFQUFFO2dCQUNuQixLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLE1BQU0sRUFBRTtvQkFDdkIsS0FBSyxFQUFFO3dCQUNMLE1BQU0sRUFBRSxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxhQUFhO3dCQUMzQyxNQUFNLEVBQUUsTUFBTTtxQkFDZjtvQkFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRTt3QkFDdkIsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDO29CQUNoRSxDQUFDLENBQUM7aUJBQ0gsRUFBRTtvQkFDRCxZQUFDLENBQUMscUJBQWMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztpQkFDakQsQ0FBQztnQkFDRixZQUFDLENBQUMsTUFBTSxFQUFFO29CQUNSLEtBQUssRUFBRTt3QkFDTCxNQUFNLEVBQUUsU0FBUyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsU0FBUzt3QkFDdkMsTUFBTSxFQUFFLE1BQU07cUJBQ2Y7b0JBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUU7d0JBQ3ZCLE9BQU8sS0FBSyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7b0JBQ3BFLENBQUMsQ0FBQztpQkFDSCxFQUFFO29CQUNELFlBQUMsQ0FBQyxxQkFBYyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQztpQkFDdEUsQ0FBQzthQUNILENBQUM7U0FDSDtLQUNGLENBQUMsQ0FBQztBQUNMLENBQUM7QUF2SUQsb0JBdUlDOzs7OztBQ25ORCx1Q0FBNEI7QUFFNUIsa0NBQWtDO0FBQ2xDLG1DQUFvQztBQUNwQyw4Q0FBdUM7QUFDdkMsa0NBQXdDO0FBaUJ4QyxTQUFTLFdBQVcsQ0FBQyxJQUFlLEVBQUUsSUFBZTtJQUNuRCxPQUFPLFVBQVMsS0FBSztRQUNuQixPQUFPLFlBQUMsQ0FBQyxHQUFHLEVBQUU7WUFDWixJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDdEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzNCLE9BQU8sS0FBSyxDQUFDO1lBQ2YsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDZixLQUFLLEVBQUUsRUFBRSxhQUFhLEVBQUUsS0FBSyxDQUFDLE1BQU0sRUFBRTtZQUN0QyxLQUFLLEVBQUU7Z0JBQ0wsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssS0FBSyxDQUFDLEVBQUUsQ0FBQzthQUNwRTtTQUNGLEVBQUU7WUFDRCxLQUFLLENBQUMsSUFBSTtTQUNYLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBaUI7SUFFcEMsTUFBTSxHQUFHLEdBQUcsYUFBSSxDQUFhLElBQUksQ0FBQyxDQUFDO0lBRW5DLFNBQVMsVUFBVTtRQUNqQixJQUFJLENBQUMsR0FBRyxFQUFFO1lBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRTtnQkFDakMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNSLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFBQSxDQUFDO0lBRUYsTUFBTSxXQUFXLEdBQUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFVLEVBQUUsRUFBRTtRQUMvQyxJQUFJLENBQUMsS0FBTSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLEtBQU0sQ0FBQyxZQUFZLENBQUM7WUFDN0QsRUFBRTtTQUNILENBQUMsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPO1FBQ0wsSUFBSTtRQUNKLEdBQUc7UUFDSCxVQUFVO1FBQ1YsV0FBVztRQUNYLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtLQUNwQixDQUFDO0FBQ0osQ0FBQztBQXhCRCxvQkF3QkM7QUFFRCxTQUFnQixZQUFZLENBQUMsR0FBVztJQUN0QyxPQUFPLFlBQUMsQ0FBQyxtQkFBbUIsRUFBRTtRQUM1QixZQUFDLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxDQUFDO0tBQzdCLENBQUMsQ0FBQztBQUNMLENBQUM7QUFKRCxvQ0FJQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUFlO0lBRWxDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7SUFFOUMsT0FBTyxZQUFDLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUU7UUFDcEQsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUU7S0FDbEMsRUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ0osWUFBQyxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDcEQsWUFBQyxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDNUQsWUFBQyxDQUFDLGlCQUFpQixFQUFFLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztLQUNuRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxvQkFBb0IsRUFBRSxjQUFPLEVBQUUsQ0FBQyxDQUFDLENBQ3pDLENBQUM7QUFDSixDQUFDO0FBYkQsb0JBYUM7Ozs7O0FDcEZELHVDQUE0QjtBQUU1QixrQ0FBcUY7QUFDckYsbUNBQW9DO0FBQ3BDLDZDQUFzRDtBQWlCdEQsU0FBUyxjQUFjLENBQUMsTUFBTTtJQUM1QixJQUFJLE9BQU8sQ0FBQztJQUNaLElBQUksUUFBUSxHQUFHO1FBQ2IsSUFBSSxPQUFPO1lBQUUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25DLE9BQU8sR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3BDLENBQUMsQ0FBQztJQUNGLFFBQVEsRUFBRSxDQUFDO0lBQ1gsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUFVO0lBRTdCLE1BQU0sSUFBSSxHQUFHLGFBQUksQ0FBaUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sT0FBTyxHQUFHLGFBQUksQ0FBcUIsU0FBUyxDQUFDLENBQUM7SUFDcEQsSUFBSSxNQUFNLEdBQWlDLEVBQUUsQ0FBQztJQUM5QyxJQUFJLE1BQU0sR0FBOEIsRUFBRSxDQUFDO0lBQzNDLElBQUksWUFBWSxHQUFhLEVBQUUsQ0FBQztJQUNoQyxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUM7SUFFZixTQUFTLEtBQUs7UUFDWixPQUFPLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsT0FBTztRQUNkLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3BDLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxRQUFRO1FBQ2YsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUM5QyxDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsYUFBYTtRQUNwQixJQUFJLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQztRQUNuQixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLEdBQUcsQ0FBQztJQUM3QixDQUFDO0lBQUEsQ0FBQztJQUVGLE1BQU0sVUFBVSxHQUFHLGlCQUFjLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUV2RyxTQUFTLFNBQVMsQ0FBQyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLFNBQVM7WUFBRSxPQUFPO1FBQ3JDLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDOztZQUN4QixNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsY0FBYyxDQUFDO2dCQUMvQixPQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBQUEsQ0FBQztJQUVGLFNBQVMsWUFBWTtRQUNuQixNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ1osTUFBTSxPQUFPLEdBQW1CLElBQUksRUFBRSxDQUFDO1FBQ3ZDLFlBQVksQ0FBQyxPQUFPLENBQUMsVUFBUyxFQUFFO1lBQzlCLElBQUksT0FBTyxDQUFDLEVBQUUsQ0FBQztnQkFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssU0FBUztZQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM5QyxDQUFDO0lBRUQsT0FBTztRQUNMLElBQUk7UUFDSixPQUFPO1FBQ1AsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1FBQ2YsVUFBVTtRQUNWLE1BQU0sQ0FBQyxPQUF1QjtZQUM1QixJQUFJLE9BQU8sRUFBRTtnQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxHQUFHO29CQUMzRCxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3RCLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDSixNQUFNLFNBQVMsR0FBRyxRQUFRLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ2pELE1BQU0sVUFBVSxHQUFHLFFBQVEsRUFBRSxJQUFJLGFBQWEsRUFBRSxDQUFDO1lBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNkLElBQUksU0FBUyxJQUFJLGFBQWEsRUFBRSxFQUFFO2dCQUNoQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztvQkFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ3hELElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO2dCQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztvQkFDYixJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUM7b0JBQy9DLFFBQVEsRUFBRSxJQUFJO2lCQUNmLENBQUMsQ0FBQzthQUNKO2lCQUFNLElBQUksVUFBVSxJQUFJLENBQUMsYUFBYSxFQUFFO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO29CQUN4RCxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUM7b0JBQzdDLFFBQVEsRUFBRSxJQUFJO2lCQUNmLENBQUMsQ0FBQztZQUNILFlBQVksRUFBRSxDQUFDO1FBQ2pCLENBQUM7UUFDRCxTQUFTO1FBQ1QsUUFBUSxDQUFDLEVBQUU7WUFDVCxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdEIsQ0FBQztRQUNELEtBQUs7UUFDTCxRQUFRO1FBQ1IsT0FBTztRQUNQLGFBQWE7UUFDYixHQUFHO1FBQ0gsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJO1lBQ2QsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQ25CLE1BQU0sRUFBRSxFQUFFO2dCQUNWLElBQUk7YUFDTCxDQUFDLENBQUM7WUFDSCxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDckIsQ0FBQztRQUNELElBQUksQ0FBQyxFQUFFO1lBQ0wsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDdEIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3JCLENBQUM7UUFDRCxLQUFLO1lBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyQixDQUFDO1FBQ0QsT0FBTztZQUNMLE1BQU0sQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDO1lBQ2pCLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FDbkQsQ0FBQyxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDckMsQ0FBQyxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzFDLENBQUMsQ0FBQztRQUNQLENBQUM7UUFDRCxJQUFJO1lBQ0YsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ3BDLENBQUM7UUFDRCxhQUFhLENBQUMsU0FBb0I7WUFDaEMsTUFBTSxLQUFLLEdBQUcsU0FBUyxJQUFJLEVBQUUsQ0FBQztZQUM5QixJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNyQyxZQUFZLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxvQkFBYSxDQUFDLENBQUM7WUFDeEMsWUFBWSxFQUFFLENBQUM7UUFDakIsQ0FBQztRQUNELFFBQVEsQ0FBQyxNQUFjO1lBQ3JCLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxvQkFBb0I7WUFDbEIsTUFBTSxPQUFPLEdBQUcsSUFBSSxFQUFFLENBQUM7WUFDdkIsS0FBSyxJQUFJLENBQUMsSUFBSSxPQUFPO2dCQUFFLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssR0FBRztvQkFBRSxPQUFPLElBQUksQ0FBQztZQUM3RSxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQXpIRCxvQkF5SEM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBZTtJQUVsQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBRXZDLFNBQVMsUUFBUSxDQUFDLE1BQW1CO1FBQ25DLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDcEIsT0FBTyxZQUFDLENBQUMscUJBQXFCLEVBQUU7WUFDOUIsS0FBSyxFQUFFLEVBQUUsV0FBVyxFQUFFLEtBQUssR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFO1NBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxVQUFVLENBQUMsTUFBbUI7UUFDckMsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksS0FBSyxHQUFHLENBQUM7UUFDcEMsT0FBTyxZQUFDLENBQUMsYUFBYSxFQUFFO1lBQ3RCLEtBQUssRUFBRTtnQkFDTCxPQUFPO2dCQUNQLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztnQkFDN0MsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2FBQzlDO1lBQ0QsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRTtTQUMxRSxFQUFFO1lBQ0QsY0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLFlBQVksQ0FBQyxJQUFlLEVBQUUsTUFBbUI7UUFDeEQsSUFBSSxPQUFPLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJO1lBQ2pELE9BQU8sWUFBQyxDQUFDLEtBQUssRUFBRTtnQkFDZCxHQUFHLEVBQUUsTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDNUIsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7Z0JBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO29CQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzFGLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ2hCLENBQUMsQ0FBQztRQUNMLElBQUksQ0FBQyxPQUFPLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJO1lBQ2xELE9BQU8sWUFBQyxDQUFDLFdBQVcsRUFBRTtnQkFDcEIsR0FBRyxFQUFFLE9BQU87Z0JBQ1osS0FBSyxFQUFFO29CQUNMLFdBQVcsRUFBRSxHQUFHO29CQUNoQixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDO2lCQUN6QztnQkFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ3JELENBQUMsQ0FBQztJQUNQLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxZQUFZLENBQUMsTUFBbUI7UUFDdkMsTUFBTSxNQUFNLEdBQUcsYUFBYSxDQUFDO1FBQzdCLE9BQU8sWUFBQyxDQUFDLFVBQVUsRUFBRTtZQUNuQixHQUFHLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsU0FBUztZQUMvQixJQUFJLEVBQUUsZUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsZUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFnQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQy9FLEVBQUU7WUFDRCxZQUFDLENBQUMsVUFBVSxFQUFFO2dCQUNaLFlBQUMsQ0FBQyxZQUFZLEVBQUU7b0JBQ2QsWUFBQyxDQUFDLGtCQUFrQixFQUFFO3dCQUNwQixLQUFLLEVBQUU7NEJBQ0wsRUFBRSxFQUFFLE1BQU07NEJBQ1YsSUFBSSxFQUFFLFVBQVU7NEJBQ2hCLE9BQU8sRUFBRSxNQUFNLENBQUMsSUFBSSxLQUFLLEdBQUc7eUJBQzdCO3dCQUNELElBQUksRUFBRSxXQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFOzRCQUN2QixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRyxDQUFDLENBQUMsTUFBMkIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7d0JBQzNGLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO3FCQUNoQixDQUFDO29CQUNGLFlBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztpQkFDekMsQ0FBQztnQkFDRixZQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7YUFDMUUsQ0FBQztZQUNGLFlBQUMsQ0FBQyxVQUFVLEVBQUUsWUFBQyxDQUFDLHVDQUF1QyxFQUFFO2dCQUN2RCxLQUFLLEVBQUUsZUFBUSxDQUFDLEdBQUcsQ0FBQztnQkFDcEIsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7YUFDekUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQzlCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFBQSxDQUFDO0lBRUYsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVyQyxPQUFPLFlBQUMsQ0FBQyxvQkFBb0IsRUFBRTtRQUM3QixJQUFJLEVBQUU7WUFDSixNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQ1YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBQzdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM1QyxDQUFDO1NBQ0Y7S0FDRixFQUFFO1FBQ0QsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVMsTUFBTTtZQUM1QixNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQzFELE9BQU87Z0JBQ0wsWUFBQyxDQUFDLEtBQUssRUFBRTtvQkFDUCxHQUFHLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUNuQixLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRTtpQkFDOUIsRUFBRTtvQkFDRCxZQUFDLENBQUMsVUFBVSxFQUFFO3dCQUNaLFVBQVUsQ0FBQyxNQUFNLENBQUM7d0JBQ2xCLFFBQVEsQ0FBQyxNQUFNLENBQUM7cUJBQ2pCLENBQUM7b0JBQ0YsWUFBWSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUM7aUJBQzNCLENBQUM7Z0JBQ0YsT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7YUFDdEMsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3BDLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLFNBQVMsRUFBRTtZQUM1RCxHQUFHLEVBQUUsS0FBSztZQUNWLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQ2pFLEVBQUU7WUFDRCxZQUFDLENBQUMsVUFBVSxFQUFFO2dCQUNaLFlBQUMsQ0FBQyxhQUFhLEVBQUUsY0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM5QixZQUFDLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO2FBQ25ELENBQUM7U0FDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7S0FDVixDQUFDLENBQUM7QUFDTCxDQUFDO0FBOUdELG9CQThHQzs7Ozs7QUN4UUQsdUNBQTRCO0FBRTVCLGtDQUF3QztBQUN4QyxtQ0FBOEI7QUFDOUIsMENBQWlEO0FBR2pELFNBQVMsT0FBTyxDQUFDLElBQUk7SUFDbkIsTUFBTSxZQUFZLEdBQUcsNkJBQWtCLENBQUM7UUFDdEMsUUFBUSxFQUFFLElBQUk7UUFDZCxRQUFRLEVBQUUsS0FBSztLQUNoQixFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZCLE9BQU8sWUFBQyxDQUFDLGNBQWMsRUFBRSxZQUFDLENBQUMsV0FBVyxFQUFFO1FBQ3RDLFlBQUMsQ0FBQyxPQUFPLEVBQUU7WUFDVCxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQzNCLElBQUksRUFBRSxXQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUN2QixJQUFJLENBQUMsT0FBTyxDQUFFLENBQUMsQ0FBQyxNQUEyQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3ZELENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQ2hCLENBQUM7UUFDRixHQUFHLENBQ0QsWUFBWSxDQUFDLENBQUM7WUFDZCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsWUFBQyxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEQsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQzdDO0tBQ0YsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWUsRUFBRSxjQUFzQyxFQUFFLFdBQTRCLEVBQUUsTUFBa0IsRUFBRSxLQUFZO0lBQzFJLE1BQU0sT0FBTyxHQUFHLGFBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixPQUFPO1FBQ0wsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFO1FBQ2hCLE9BQU8sRUFBRSxjQUFjO1FBQ3ZCLFNBQVM7WUFDUCxPQUFPLElBQUksQ0FBQyxVQUFVLEtBQUssU0FBUyxDQUFDO1FBQ3ZDLENBQUM7UUFDRCxXQUFXO1FBQ1gsT0FBTztRQUNQLFNBQVMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVM7UUFDbEMsTUFBTTtRQUNOLEtBQUs7S0FDTixDQUFBO0FBQ0gsQ0FBQztBQWRELG9CQWNDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQUk7SUFDdkIsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3ZELElBQUksT0FBTyxHQUFHLEdBQUcsY0FBTyxFQUFFLFVBQVUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUM1RCxJQUFJLFFBQVEsR0FBRyxHQUFHLGNBQU8sRUFBRSxnQkFBZ0IsT0FBTyxJQUFJLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUNuRSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbkMsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUU7UUFDbEIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqQyxPQUFPLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNuQixRQUFRLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztLQUNyQjtJQUNELE9BQU8sWUFBQyxDQUFDLGtCQUFrQixFQUFFO1FBQzNCLFlBQUMsQ0FBQyxlQUFlLEVBQUU7WUFDakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGVBQWUsRUFBRTtnQkFDbEMsS0FBSyxFQUFFO29CQUNMLFdBQVcsRUFBRSxHQUFHO29CQUNoQixJQUFJLEVBQUUsU0FBUyxHQUFHLE9BQU8sR0FBRyxRQUFRO2lCQUNyQzthQUNGLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtZQUN6QyxZQUFDLENBQUMsZUFBZSxFQUFFO2dCQUNqQixLQUFLLEVBQUU7b0JBQ0wsV0FBVyxFQUFFLEdBQUc7b0JBQ2hCLElBQUksRUFBRSxTQUFTLEdBQUcsT0FBTyxHQUFHLE1BQU07aUJBQ25DO2FBQ0YsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNoQyxZQUFDLENBQUMsZUFBZSxFQUFFO2dCQUNqQixLQUFLLEVBQUU7b0JBQ0wsV0FBVyxFQUFFLEdBQUc7b0JBQ2hCLElBQUksRUFBRSxTQUFTLEdBQUcsT0FBTyxHQUFHLEdBQUcsR0FBRyxPQUFPLENBQUMsRUFBRSxHQUFHLE1BQU07aUJBQ3REO2FBQ0YsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUNuQyxDQUFDO1FBQ0YsWUFBQyxDQUFDLFlBQVksRUFBRTtZQUNkLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDbEIsWUFBQyxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNuRCxZQUFDLENBQUMsK0JBQStCLEVBQUU7b0JBQ2pDLEtBQUssRUFBRTt3QkFDTCxRQUFRLEVBQUUsSUFBSTt3QkFDZCxLQUFLLEVBQUUsR0FBRyxjQUFPLEVBQUUsVUFBVSxPQUFPLEVBQUU7cUJBQ3ZDO2lCQUNGLENBQUM7YUFDSCxDQUFDO1lBQ0YsWUFBQyxDQUFDLGdCQUFnQixFQUFFO2dCQUNsQixZQUFDLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDNUQsWUFBQyxDQUFDLCtCQUErQixFQUFFO29CQUNqQyxLQUFLLEVBQUU7d0JBQ0wsUUFBUSxFQUFFLElBQUk7d0JBQ2QsS0FBSyxFQUFFLE9BQU87cUJBQ2Y7aUJBQ0YsQ0FBQztnQkFDRixPQUFPLENBQUMsSUFBSSxDQUFDO2dCQUNiLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsa0JBQWtCLEVBQUU7b0JBQ2pDLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUU7aUJBQzVCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsNENBQTRDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO2FBQzFFLENBQUM7WUFDRixZQUFDLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2xCLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2dCQUMzRCxZQUFDLENBQUMsK0JBQStCLEVBQUU7b0JBQ2pDLEtBQUssRUFBRTt3QkFDTCxRQUFRLEVBQUUsSUFBSTt3QkFDZCxRQUFRLEVBQUUsU0FBUzt3QkFDbkIsS0FBSyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxvQ0FBb0MsR0FBRyxRQUFRLEdBQUcsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGdDQUFnQyxDQUFDO3FCQUN2SjtpQkFDRixDQUFDO2FBQ0gsQ0FBQyxNQUFNLENBQ04sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQ2IsWUFBQyxDQUFDLGtCQUFrQixFQUFFO29CQUNwQixLQUFLLEVBQUU7d0JBQ0wsSUFBSSxFQUFFLHlCQUF5Qjt3QkFDL0IsTUFBTSxFQUFFLFFBQVE7d0JBQ2hCLFdBQVcsRUFBRSxHQUFHO3FCQUNqQjtpQkFDRixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxDQUFDLENBQUM7YUFDNUQsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQ1I7WUFDRCxZQUFDLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2xCLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUM7Z0JBQzVCLFlBQUMsQ0FBQywrQkFBK0IsRUFBRTtvQkFDakMsS0FBSyxFQUFFO3dCQUNMLFFBQVEsRUFBRSxJQUFJO3dCQUNkLEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRztxQkFDOUI7aUJBQ0YsQ0FBQzthQUNILENBQUM7U0FDSCxDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXRGRCxvQkFzRkM7Ozs7O0FDaklELHVDQUFtQztBQUVuQyw4Q0FBdUM7QUFDdkMsa0NBQTJDO0FBSTNDLFNBQVMsUUFBUSxDQUFDLEtBQWEsRUFBRSxNQUFpRDtJQUNoRixPQUFPLFlBQUMsQ0FBQyxPQUFPLEVBQUU7UUFDaEIsR0FBRyxFQUFFLEtBQUs7UUFDVixLQUFLLEVBQUU7WUFDTCxVQUFVLEVBQUUsS0FBSztZQUNqQixLQUFLO1NBQ047UUFDRCxJQUFJLEVBQUUsZUFBUSxDQUFtQixFQUFFLENBQUMsRUFBRTtZQUNwQyxFQUFFLENBQUMsTUFBTSxHQUFHO2dCQUNWLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZCLENBQUMsQ0FBQztZQUNGLEVBQUUsQ0FBQyxVQUFVLEdBQUcsVUFBUyxDQUFDO2dCQUN4QixJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRTtvQkFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDOUMsQ0FBQyxDQUFBO1FBQ0gsQ0FBQyxDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsS0FBSyxDQUFDLElBQVk7SUFDekIsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3pCLENBQUM7QUFFRCxJQUFJLFlBQW9CLENBQUM7QUFJekIsU0FBUyxhQUFhLENBQUMsT0FBcUIsRUFBRSxNQUFNLEVBQUUsS0FBZSxFQUFFLEtBQVk7SUFDakYsSUFBSSxJQUFJLEdBQWEsRUFBRSxDQUFDO0lBQ3hCLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxLQUFLLFVBQVU7UUFDMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVELElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDekMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNOLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUMxRCxDQUFDLENBQUMsQ0FBQztJQUNKLElBQUksTUFBTSxFQUFFO1FBQ1YsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ1IsWUFBQyxDQUFDLFFBQVEsRUFBRTtnQkFDVixJQUFJLEVBQUU7b0JBQ0osTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFO3dCQUNkLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUF1QixDQUFDO3dCQUN6QyxZQUFZLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQzt3QkFDeEIsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRTs0QkFDaEMsWUFBWSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7NEJBQ3hCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO3dCQUM1QyxDQUFDLENBQUMsQ0FBQztvQkFDTCxDQUFDO29CQUNELFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRTt3QkFDdEIsWUFBWSxHQUFJLEtBQUssQ0FBQyxHQUF3QixDQUFDLEtBQUssQ0FBQztvQkFDdkQsQ0FBQztpQkFDRjthQUNGLEVBQUU7Z0JBQ0QsWUFBQyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNsQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ2YsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO3dCQUFFLE9BQU8sYUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFELENBQUMsQ0FBQzthQUNILENBQUM7WUFDRixRQUFRLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFO2dCQUN6QixJQUFJLFlBQVksRUFBRTtvQkFDaEIsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM1QixFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztpQkFDZjtZQUNILENBQUMsQ0FBQztTQUNILENBQUMsQ0FBQztLQUNKO0lBRUQsT0FBTyxZQUFDLENBQUMseUJBQXlCLEVBQUUsWUFBQyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVMsQ0FBQztRQUNoRSxPQUFPLFlBQUMsQ0FBQyxJQUFJLEVBQUU7WUFDYixHQUFHLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDZixFQUFFO1lBQ0QsWUFBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2YsWUFBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2hCLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBaUIsRUFBRSxVQUE4QixFQUFFLEtBQUs7SUFFM0UsTUFBTSxNQUFNLEdBQUcsa0JBQVEsQ0FBQyxHQUFHLEVBQUUsVUFBUyxJQUFJLEVBQUUsS0FBSztRQUMvQyxJQUFJLENBQUMsS0FBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUU7WUFDL0IsU0FBUyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUU7WUFDMUIsSUFBSTtZQUNKLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUM7U0FDNUIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPO1FBQ0wsTUFBTSxDQUFDLElBQUk7WUFDVCxPQUFPLEtBQUssQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBQ0QsVUFBVTtRQUNWLEtBQUs7S0FDTixDQUFBO0FBQ0gsQ0FBQztBQWpCRCxvQkFpQkM7QUFDRCxTQUFTLFFBQVEsQ0FBQyxJQUFlO0lBQy9CLE9BQU8sWUFBQyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQzNCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQ3RCLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFDdEMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQ2YsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7QUFDaEIsQ0FBQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUFlO0lBQ2xDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQ3BDLE1BQU0sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFDOUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ25HLE9BQU8sZ0JBQUssQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMzRCxDQUFDO0FBTEQsb0JBS0M7Ozs7O0FDL0dELFNBQWdCLEtBQUssQ0FBQyxJQUFpQjtJQUNyQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7UUFDL0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMxQixNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO1lBQ3hCLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUU7WUFDOUMsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtZQUN0QyxNQUFNLEVBQUUsQ0FBQyxHQUFRLEVBQUUsRUFBRTtnQkFDbkIsSUFBSSxDQUFDLEtBQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDaEIsQ0FBQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQVpELHNCQVlDO0FBRUQsU0FBZ0IsT0FBTyxDQUFDLE1BQTZCO0lBQ25ELE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLG1DQUFtQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUN2RSxNQUFNLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDakMsTUFBTTtTQUNQLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQU5ELDBCQU1DOzs7OztBQ3ZCRCx1Q0FBNEI7QUFFNUIsa0NBQTREO0FBQzVELGlEQUFvRDtBQUNwRCxtREFBc0Q7QUFDdEQscURBQThEO0FBQzlELHVEQUFnRTtBQUNoRSw2Q0FBNkM7QUFDN0MsMENBQTBDO0FBQzFDLDZDQUFzRDtBQUN0RCwyQ0FBb0Q7QUFDcEQsNkNBQXNEO0FBQ3RELDZDQUFzRDtBQUN0RCxtQ0FBNEM7QUFDNUMsMkNBQStDO0FBQy9DLDZDQUFzRDtBQUN0RCw2REFBNkQ7QUFDN0QsZ0VBQThHO0FBQzlHLCtDQUFpRDtBQWVqRCxTQUFTLFVBQVUsQ0FBQyxJQUFvQjtJQUN0QyxPQUFPLFlBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUMzQixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRTtRQUMzQixLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRTtRQUN0RCxJQUFJLEVBQUUsV0FBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7WUFDM0IsSUFBSSxJQUFJLENBQUMsT0FBTztnQkFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7S0FDckIsRUFBRTtRQUNELElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1FBQ2xGLElBQUksQ0FBQyxJQUFJO0tBQ1YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsT0FBTyxDQUFDLElBQWlCO0lBQ2hDLE1BQU0sSUFBSSxHQUFjLElBQUksQ0FBQyxLQUFNLEVBQ2pDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUM1QyxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxFQUN6RyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDM0IsT0FBTyxZQUFDLENBQUMsb0JBQW9CLEVBQUU7UUFDN0IsWUFBQyxDQUFDLDZCQUE2QixFQUFFO1lBQy9CLHlFQUF5RTtZQUN6RSxVQUFVLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxhQUFhLEVBQUU7Z0JBQzVCLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsdUNBQXVDLENBQUMsRUFBRTtnQkFDaEUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDbEMsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQzthQUN2QyxFQUFFO2dCQUNELElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsYUFBYSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsTUFBTSxDQUFDO2dCQUNsRSxNQUFNO2FBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1lBQ1QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGNBQWMsRUFBRTtnQkFDL0MsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxjQUFjLENBQUMsRUFBRTtnQkFDdkMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDakMsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQzthQUN0QyxFQUFFLENBQUUsWUFBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDL0IsVUFBVSxDQUFDO2dCQUNULElBQUk7Z0JBQ0osR0FBRyxFQUFFLE1BQU07Z0JBQ1gsSUFBSSxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUM7Z0JBQ3RCLElBQUksRUFBRSxjQUFPLENBQUMsR0FBRyxDQUFDO2FBQ25CLENBQUM7WUFDRixVQUFVLENBQUM7Z0JBQ1QsSUFBSTtnQkFDSixHQUFHLEVBQUUsVUFBVTtnQkFDZixJQUFJLEVBQUUsS0FBSyxDQUFDLHFCQUFxQixDQUFDO2dCQUNsQyxJQUFJLEVBQUUsY0FBTyxDQUFDLEdBQUcsQ0FBQztnQkFDbEIsT0FBTztvQkFDTCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEUsQ0FBQztnQkFDRCxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNO2FBQ3pDLENBQUM7WUFDRixhQUFhLENBQUMsQ0FBQyxDQUFFLFVBQVUsQ0FBQztnQkFDMUIsSUFBSTtnQkFDSixHQUFHLEVBQUUsUUFBUTtnQkFDYixJQUFJLEVBQUUsS0FBSyxDQUFDLG9CQUFvQixDQUFDO2dCQUNqQyxJQUFJLEVBQUUsWUFBQyxDQUFDLGNBQWMsQ0FBQztnQkFDdkIsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTTthQUN2QyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDVCxVQUFVLENBQUM7Z0JBQ1QsSUFBSTtnQkFDSixHQUFHLEVBQUUsWUFBWTtnQkFDakIsSUFBSSxFQUFFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQztnQkFDL0IsSUFBSSxFQUFFLGNBQU8sQ0FBQyxHQUFHLENBQUM7Z0JBQ2xCLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHO2FBQ2pDLENBQUM7WUFDRixVQUFVLENBQUM7Z0JBQ1QsSUFBSTtnQkFDSixHQUFHLEVBQUUsWUFBWTtnQkFDakIsSUFBSSxFQUFFLFlBQVk7Z0JBQ2xCLElBQUksRUFBRSxjQUFPLENBQUMsR0FBRyxDQUFDO2FBQ25CLENBQUM7WUFDRixVQUFVLENBQUM7Z0JBQ1QsSUFBSTtnQkFDSixHQUFHLEVBQUUsT0FBTztnQkFDWixJQUFJLEVBQUUsS0FBSyxDQUFDLGdCQUFnQixDQUFDO2dCQUM3QixJQUFJLEVBQUUsY0FBTyxDQUFDLEdBQUcsQ0FBQzthQUNuQixDQUFDO1lBQ0YsWUFBQyxDQUFDLFdBQVcsRUFBRTtnQkFDYixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRTtnQkFDOUQsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQzthQUNwQyxDQUFDO1NBQ0gsQ0FBQztRQUNGLFlBQUMsQ0FBQyxXQUFXLEVBQUU7WUFDYixnQ0FBZ0IsQ0FBQyxJQUFJLENBQUM7U0FDdkIsQ0FBQztLQUNILENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxJQUFlO0lBQy9CLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQ2pCLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNoRCxPQUFPLFlBQUMsQ0FBQyxxQkFBcUIsRUFBRTtRQUM5QixZQUFDLENBQUMsSUFBSSxFQUFFO1lBQ04sWUFBQyxDQUFDLFdBQVcsRUFBRTtnQkFDYixDQUFDLENBQUMsSUFBSTtnQkFDTixJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDLElBQUk7Z0JBQ2pDLE1BQU0sQ0FBQyxDQUFDLENBQUUsWUFBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLElBQUksRUFBRSxlQUFRLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUzthQUMxRSxDQUFDO1lBQ0YsWUFBQyxDQUFDLGtCQUFrQixFQUFFO2dCQUNwQixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRTtnQkFDekIsS0FBSyxFQUFFO29CQUNMLFdBQVcsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUc7b0JBQ2hDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7aUJBQ2hDO2dCQUNELElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7YUFDckMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztTQUNqQixDQUFDO1FBQ0YsZ0JBQVEsQ0FBQyxJQUFJLENBQUM7S0FDZixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWU7SUFFbEMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFDN0IsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFFekMsTUFBTSxPQUFPLEdBQUcsVUFBUyxHQUFRLEVBQUUsSUFBWTtRQUM3QyxPQUFPLFlBQUMsQ0FBQyxPQUFPLEdBQUcsR0FBRyxFQUFFO1lBQ3RCLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLFNBQVMsS0FBSyxHQUFHLEVBQUU7WUFDakUsSUFBSSxFQUFFLFdBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO2dCQUMzQixJQUFJLEtBQUs7b0JBQUUsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUMzQixJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNuQixDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUNoQixFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0lBRUYsTUFBTSxRQUFRLEdBQUcsS0FBSyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxZQUFZLEVBQUU7UUFDdkQsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUU7UUFDL0IsSUFBSSxFQUFFLFdBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztLQUNwRSxFQUFFLENBQUMsY0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBRTFCLE1BQU0sSUFBSSxHQUFHLFlBQUMsQ0FBQyxnQkFBZ0IsRUFBRTtRQUMvQixRQUFRO1FBQ1IsT0FBTyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDbkcsT0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxXQUFXLEVBQUU7WUFDdEMsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUMxRSxFQUFFLENBQUUsY0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtLQUM1QixDQUFDLENBQUM7SUFFSCxPQUFPLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRTtRQUMxQixJQUFJO1FBQ0osQ0FBQyxTQUFTLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxtQkFBVSxDQUFDLENBQUMsQ0FBQyxvQkFBVyxDQUFDLENBQUMsSUFBSSxDQUFDO0tBQzNELENBQUMsQ0FBQztBQUNMLENBQUM7QUFqQ0Qsb0JBaUNDO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLElBQWUsRUFBRSxJQUFlLEVBQUUsSUFBZTtJQUMzRSxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDMUIsWUFBQyxDQUFDLEdBQUcsRUFBRTtZQUNMLEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDdkIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQzVCLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ2hFLENBQUMsQ0FBQztTQUNILEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN2QyxZQUFDLENBQUMsY0FBYyxFQUFFO1lBQ2hCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDdkIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEIsQ0FBQyxDQUFDO1NBQ0gsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0tBQzNDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNULENBQUM7QUFoQkQsa0NBZ0JDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLElBQWU7SUFDdkMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSTtRQUFFLE9BQU8scUJBQWtCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNwRixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtRQUFFLE9BQU8sc0JBQW1CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN6RixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRTtRQUFFLE9BQU8saUJBQWMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ25GLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFBRSxPQUFPLGdCQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFMRCw4QkFLQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxJQUFpQjtJQUMxQyxJQUFJLElBQUksQ0FBQyxLQUFLO1FBQUUsT0FBTyxFQUFFLENBQUM7SUFDMUIsSUFBSSxJQUFJLENBQUMsYUFBYTtRQUFFLE9BQU8sWUFBWSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBTSxDQUFDLENBQUM7SUFDcEUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQU0sRUFBRSxPQUFPLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN4RCxJQUFJLEtBQUssQ0FBQyxZQUFZLEVBQUU7UUFBRSxPQUFPO1lBQy9CLDZCQUFhLENBQUMsSUFBSSxDQUFDO1lBQ25CLGtCQUFRLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztZQUNyQixrQkFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUM7WUFDdEIsUUFBUSxDQUFDLEtBQUssQ0FBQztTQUNoQixDQUFDO0lBQ0YsSUFBSSxLQUFLLENBQUM7SUFDVixRQUFPLE9BQU8sRUFBRTtRQUNkLEtBQUssTUFBTTtZQUNULEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEIsTUFBTTtRQUNSLEtBQUssVUFBVTtZQUNiLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDM0IsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDdkIsV0FBVyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO2dCQUM1RCw0QkFBNEIsQ0FBQyxDQUFDO2dCQUM5Qiw2Q0FBNkMsQ0FBQyxDQUNqRCxDQUFDO1lBQ0osTUFBTTtRQUNSLEtBQUssUUFBUTtZQUNYLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNsQixLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckIsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDakMsU0FBUyxDQUFDLFlBQVksQ0FBQyw2QkFBNkIsQ0FBQyxDQUN0RCxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLDJCQUEyQixDQUFDLENBQUM7WUFDeEQsTUFBTTtRQUNSLEtBQUssWUFBWTtZQUNmLEtBQUssR0FBRyxpQkFBYyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN6QyxNQUFNO1FBQ1IsS0FBSyxPQUFPO1lBQ1YsS0FBSyxHQUFHLGlCQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3BDLE1BQU07UUFDUixLQUFLLFlBQVk7WUFDZixLQUFLLEdBQUcsaUJBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2hELE1BQU07S0FDVDtJQUNELE9BQU87UUFDTCxZQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztRQUN0QixrQkFBUSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7UUFDckIsa0JBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDO1FBQ3RCLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDYixLQUFLO0tBQ04sQ0FBQztBQUNKLENBQUM7QUEvQ0QsZ0NBK0NDOzs7OztBQ3pQRCxNQUFNLE9BQU8sR0FBRztJQUNkLFFBQVEsRUFBRSxpQ0FBaUM7Q0FDNUMsQ0FBQztBQUVGLFNBQWdCLE1BQU0sQ0FBQyxPQUFlLEVBQUUsRUFBVSxFQUFFLFNBQWtCO0lBQ3BFLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNuQyxJQUFJLFNBQVM7UUFBRSxHQUFHLElBQUksR0FBRyxHQUFHLFNBQVMsQ0FBQztJQUN0QyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDWixHQUFHO1FBQ0gsT0FBTztLQUNSLENBQUMsQ0FBQztBQUNMLENBQUM7QUFQRCx3QkFPQztBQUVELFNBQWdCLFFBQVE7SUFDdEIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ1osR0FBRyxFQUFFLFVBQVU7UUFDZixPQUFPO1FBQ1AsS0FBSyxFQUFFLElBQUk7S0FDWixDQUFDLENBQUM7QUFDTCxDQUFDO0FBTkQsNEJBTUM7QUFFRCxTQUFnQixNQUFNO0lBQ3BCLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQztRQUNaLEdBQUcsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFDaEUsT0FBTztRQUNQLEtBQUssRUFBRSxJQUFJO0tBQ1osQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQU5ELHdCQU1DO0FBRUQsU0FBZ0IsYUFBYSxDQUFDLE9BQWUsRUFBRSxTQUFpQjtJQUM5RCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDWixHQUFHLEVBQUUsVUFBVSxPQUFPLElBQUksU0FBUyxPQUFPO1FBQzFDLE9BQU87S0FDUixDQUFDLENBQUM7QUFDTCxDQUFDO0FBTEQsc0NBS0M7QUFFRCxTQUFnQixnQkFBZ0IsQ0FBQyxTQUFpQixFQUFFLE9BQWU7SUFDakUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ1osTUFBTSxFQUFFLE1BQU07UUFDZCxHQUFHLEVBQUUsc0JBQXNCLFNBQVMsSUFBSSxPQUFPLEVBQUU7UUFDakQsT0FBTztLQUNSLENBQUMsQ0FBQztBQUNMLENBQUM7QUFORCw0Q0FNQztBQUVELFNBQWdCLFNBQVMsQ0FBQyxPQUFlLEVBQUUsSUFBUztJQUNsRCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDWixNQUFNLEVBQUUsTUFBTTtRQUNkLEdBQUcsRUFBRSxVQUFVLE9BQU8sbUJBQW1CLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQzdELElBQUksRUFBRSxJQUFJO1FBQ1YsT0FBTztLQUNSLENBQUMsQ0FBQztBQUNMLENBQUM7QUFQRCw4QkFPQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxPQUFlLEVBQUUsSUFBWSxFQUFFLE9BQWdCO0lBQ3hFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQztRQUNaLEdBQUcsRUFBRSxVQUFVLE9BQU8scUJBQXFCLElBQUksWUFBWSxPQUFPLEVBQUU7UUFDcEUsT0FBTztLQUNSLENBQUMsQ0FBQztBQUNMLENBQUM7QUFMRCxnQ0FLQzs7Ozs7QUM1REQsdUNBQTRCO0FBRTVCLG1DQUErQjtBQUMvQixpQ0FBb0M7QUFDcEMsK0JBQXdEO0FBQ3hELHdDQUF3QztBQUN4QywwREFBeUU7QUFHekUseUNBQWtJO0FBQ2xJLGtDQUFnRDtBQVdoRCxTQUFTLFNBQVMsQ0FBQyxPQUFpQjtJQUNsQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDYixJQUFJLE9BQU87UUFBRSxDQUFDLENBQUMsT0FBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUN6QyxPQUFPLFlBQUMsQ0FBQyxZQUFZLEVBQUU7UUFDckIsS0FBSyxFQUFFLENBQUM7S0FDVCxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ1osQ0FBQztBQUVELFNBQVMsZ0JBQWdCLENBQUMsR0FBUSxFQUFFLElBQWUsRUFBRSxJQUFVO0lBQzdELE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQ3hCLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDYixJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU87SUFDbEIsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMvRyxJQUFJLE9BQU8sS0FBSyxNQUFNO1FBQUUsT0FBTztJQUMvQixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7UUFDbkIsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUNsQyxXQUFXLEdBQUcsd0JBQXdCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLG1CQUFRLENBQUMsQ0FBQztRQUNsRixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLGNBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjO1lBQUUsT0FBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFpQixDQUFDLE1BQU0sQ0FDL0ksdUJBQXVCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTtnQkFDakMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO2dCQUMzQixVQUFVLEVBQUUsSUFBSTtnQkFDaEIsT0FBTzthQUNSLENBQUMsSUFBSSxFQUFFLENBQ1QsQ0FBQztRQUNGLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTtZQUNqRixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRTtZQUNyQyxVQUFVLEVBQUUsSUFBSTtZQUNoQixPQUFPO1NBQ1IsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxRQUFRLEdBQUc7WUFDZixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDM0IsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLGNBQWM7WUFDaEMsT0FBTztTQUNSLENBQUM7UUFDRixPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFpQixDQUFDLENBQUMsTUFBTSxDQUNuRixJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLFlBQVksQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQztZQUNqQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7U0FDN0MsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUNSLFlBQUMsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FDL0IsV0FBVyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3ZELFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtnQkFDM0IsVUFBVSxFQUFFLFFBQVEsQ0FBQyxVQUFVO2dCQUMvQixPQUFPO2dCQUNQLFNBQVMsRUFBRSxDQUFDLE9BQU87YUFDcEIsQ0FBQyxDQUNILENBQUM7U0FDWSxDQUFDLENBQUMsTUFBTSxDQUN0QixPQUFPLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQztZQUN4QixRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDO1lBQ3JDLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1NBQzVCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLElBQUksRUFBRSxDQUFDLENBQUM7S0FDeEM7SUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUFFLE9BQU8sdUJBQXVCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RCxPQUFPLGFBQWEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN0RSxDQUFDO0FBRUQsU0FBUyxhQUFhLENBQUMsR0FBUSxFQUFFLEtBQWtCLEVBQUUsSUFBVTtJQUM3RCxrQkFBa0I7SUFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQUUsT0FBTztJQUNsQyw0Q0FBNEM7SUFDNUMsSUFBSSxVQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFBRSxPQUFPO0lBQzlDLE9BQU8sdUJBQXVCLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUM1QyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7UUFDM0IsVUFBVSxFQUFFLEtBQUs7UUFDakIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1FBQ3pCLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQ2pCLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBQyxHQUFRLEVBQUUsS0FBa0IsRUFBRSxJQUFVO0lBQzNELE9BQU8sWUFBQyxDQUFDLE9BQU8sRUFBRTtRQUNoQixLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7S0FDN0IsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ2YsT0FBTyxvQkFBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksWUFBQyxDQUFDLE1BQU0sRUFBRSx1QkFBdUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQzFFLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUMzQixVQUFVLEVBQUUsS0FBSztZQUNqQixTQUFTLEVBQUUsSUFBSTtZQUNmLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztZQUN6QixRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFdBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztTQUM5RixDQUFDLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsR0FBUSxFQUFFLElBQWUsRUFBRSxJQUFVO0lBQ3pELE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsb0JBQW9CLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxRyxDQUFDO0FBRUQsU0FBUyxvQkFBb0IsQ0FBQyxHQUFRLEVBQUUsSUFBZSxFQUFFLElBQVU7SUFDakUsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUN0QyxPQUFPLEdBQUcsc0JBQVcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDakMsSUFBSSxJQUFJLENBQUMsT0FBTztRQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUN6RCxPQUFPLFlBQUMsQ0FBQyxNQUFNLEVBQUU7UUFDZixLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFO1FBQ2xCLEtBQUssRUFBRSxPQUFPO0tBQ2YsRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3JDLENBQUM7QUFFRCxTQUFTLHFCQUFxQixDQUFDLEdBQVEsRUFBRSxJQUFlLEVBQUUsSUFBVTtJQUNsRSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFDdEQsSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFDaEMsT0FBTyxHQUFnQjtRQUNyQixTQUFTLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUN2RCxtQkFBVyxDQUFDLElBQUksQ0FBQyxHQUFJLENBQUM7S0FDdkIsRUFDRCxPQUFPLEdBQUcsc0JBQVcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDakMsSUFBSSxJQUFJLENBQUMsT0FBTztRQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUN6RCxJQUFJLElBQUksQ0FBQyxNQUFNO1FBQUUsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xGLE9BQU8sWUFBQyxDQUFDLE1BQU0sRUFBRTtRQUNmLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUU7UUFDbEIsS0FBSyxFQUFFLE9BQU87S0FDZixFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2QsQ0FBQztBQUVELFNBQVMsdUJBQXVCLENBQUMsR0FBUSxFQUFFLElBQWUsRUFBRSxJQUFVO0lBQ3BFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUN2QyxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssQ0FBQztRQUFFLE9BQU87WUFDOUIsWUFBQyxDQUFDLE1BQU0sRUFBRTtnQkFDUixLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFO2FBQ25CLEVBQUUsQ0FBQyxZQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDMUIsQ0FBQztJQUNGLE9BQVEsQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBaUI7U0FDcEQsTUFBTSxDQUFDLGlDQUFzQixDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUN6QyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7U0FDakUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUU7UUFDbEMsVUFBVSxFQUFFLElBQUk7UUFDaEIsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1FBQzNCLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztRQUN6QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7S0FDeEQsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ2QsQ0FBQztBQUVELFNBQVMsWUFBWSxDQUFDLEdBQVEsRUFBRSxJQUFlLEVBQUUsSUFBVTtJQUN6RCxPQUFPLFlBQUMsQ0FBQyxRQUFRLEVBQUUsdUJBQXVCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTtRQUNwRCxTQUFTLEVBQUUsSUFBSTtRQUNmLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtRQUMzQixVQUFVLEVBQUUsS0FBSztRQUNqQixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7UUFDekIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO0tBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELFNBQVMsd0JBQXdCLENBQUMsR0FBUSxFQUFFLElBQWUsRUFBRSxPQUFnQixFQUFFLFNBQWtCO0lBRS9GLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxjQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUFFLE9BQU8sRUFBRSxDQUFDO0lBRTlELE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUVqRixPQUFPLElBQUksQ0FBQyxRQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ2xDLElBQUksT0FBTyxDQUFDLEVBQUUsS0FBSyxTQUFTLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWTtZQUFFLE9BQU87UUFDMUQsSUFBSSxHQUFHLEdBQUcsU0FBUyxHQUFHLFVBQVUsQ0FBQztRQUNqQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQztZQUFFLEdBQUcsSUFBSSxhQUFhLENBQUM7YUFDNUQsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUM7WUFBRSxHQUFHLElBQUksVUFBVSxDQUFDO2FBQzNELElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDO1lBQUUsR0FBRyxJQUFJLFVBQVUsQ0FBQztRQUNoRSxJQUFJLE9BQU87WUFBRSxHQUFHLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQztRQUNsQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsMEJBQWlCLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFDOUYsU0FBUyxHQUFHLDBCQUFlLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDcEQsT0FBTyxZQUFDLENBQUMsR0FBRyxFQUFFO1lBQ1osSUFBSSxFQUFFLGdCQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLGlCQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDMUQsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxjQUFjLEdBQWM7SUFDaEMsT0FBTyxjQUFhLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JDLENBQUMsQ0FBQztBQUVGLG1CQUF3QixJQUFpQixFQUFFLFNBQXFCO0lBQzlELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzVCLE1BQU0sR0FBRyxHQUFRO1FBQ2YsSUFBSTtRQUNKLGdCQUFnQixFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUs7UUFDN0IsU0FBUyxFQUFFLFNBQVMsSUFBSSxjQUFjO1FBQ3RDLFlBQVksRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztRQUNoRCxVQUFVLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtRQUMvQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRTtRQUM3QixXQUFXLEVBQUUsMEJBQWUsQ0FBQyxJQUFJLENBQUM7S0FDbkMsQ0FBQztJQUNGLE1BQU0sV0FBVyxHQUFHLHdCQUF3QixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RFLE9BQU8sWUFBQyxDQUFDLDBCQUEwQixFQUFFO1FBQ25DLElBQUksRUFBRSxtQkFBUSxDQUFDLElBQUksQ0FBQztLQUNyQixFQUFHO1FBQ0YsY0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDM0QsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJO0tBQ2xCLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUU7UUFDbkQsVUFBVSxFQUFFLEVBQUU7UUFDZCxVQUFVLEVBQUUsSUFBSTtLQUNqQixDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNiLENBQUM7QUF0QkQsNEJBc0JDOzs7OztBQ2xORCx1Q0FBNEI7QUFFNUIsZ0RBQWlEO0FBQ2pELGtDQUE2QztBQUU3QyxrQ0FBZ0M7QUFZaEMsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDO0FBRS9CLFNBQVMsV0FBVyxDQUFDLENBQWE7SUFDaEMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUM7SUFDdkIsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUU7UUFDdEIsSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDZixJQUFJLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztLQUNoQjtTQUFNLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFO1FBQ2pDLElBQUksR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxlQUFnQixDQUFDLFVBQVUsQ0FBQztRQUNuRixJQUFJLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsZUFBZ0IsQ0FBQyxTQUFTLENBQUM7S0FDbEY7SUFDRCxPQUFPO1FBQ0wsQ0FBQyxFQUFFLElBQUk7UUFDUCxDQUFDLEVBQUUsSUFBSTtLQUNSLENBQUE7QUFDSCxDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsSUFBaUIsRUFBRSxNQUFjO0lBRXJELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUN0QyxVQUFVLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLEVBQ2xDLFdBQVcsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUMvQixZQUFZLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUVsQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7UUFDdEQsV0FBVyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVwQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7UUFDdkQsWUFBWSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUNyQyxDQUFDO0FBRUQsU0FBUyxNQUFNLENBQUMsSUFBWSxFQUFFLElBQVksRUFBRSxPQUFtQjtJQUM3RCxPQUFPLFlBQUMsQ0FBQyxHQUFHLEVBQUU7UUFDWixLQUFLLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFO1FBQzVCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztLQUM3QixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUVELFNBQVMsSUFBSSxDQUFDLElBQVUsRUFBRSxNQUFjO0lBQ3RDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQ3RCLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQ3RDLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDL0YsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ3pCLE9BQU8sWUFBQyxDQUFDLE1BQU0sR0FBRyxTQUFTLEdBQUcsVUFBVSxFQUFFO1FBQ3hDLElBQUksRUFBRTtZQUNKLE1BQU0sRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsR0FBa0IsRUFBRSxNQUFNLENBQUM7WUFDL0QsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFrQixFQUFFLE1BQU0sQ0FBQztTQUN4RTtLQUNGLEVBQUU7UUFDRCxZQUFDLENBQUMsU0FBUyxFQUFFLG1CQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hHLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxjQUFjLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDM0YsTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN2RSxDQUFDLE1BQU0sQ0FDTixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNyRSxDQUFDLE1BQU0sQ0FBQztRQUNQLFVBQVUsQ0FBQyxDQUFDO1lBQ1osTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xGLElBQUk7S0FDTCxDQUFDLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRCxtQkFBd0IsQ0FBYSxFQUFFLElBQVU7SUFDL0MsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0YsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN0QyxTQUFTLEtBQUssQ0FBQyxDQUFhO1FBQzFCLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQUUsT0FBTyxDQUFDLGNBQWM7UUFDMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcsU0FBUyxDQUFDO1FBQ3RDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUFBLENBQUM7SUFDRixRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNqRCxFQUFFLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztJQUNsQixZQUFLLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QyxDQUFDO0FBYkQsNEJBYUM7Ozs7O0FDOUZELHVDQUE0QjtBQUU1QixpQ0FBb0M7QUFDcEMsK0JBQXdEO0FBQ3hELHdDQUF3QztBQUd4Qyx5Q0FBdUc7QUFHdkcsU0FBUyxnQkFBZ0IsQ0FBQyxHQUFRLEVBQUUsSUFBZSxFQUFFLElBQVU7SUFDN0QsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFDeEIsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNiLElBQUksQ0FBQyxJQUFJO1FBQUUsT0FBTztJQUNsQixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7UUFDbkIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjO1lBQUUsT0FBTyx1QkFBdUIsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFO2dCQUM1RSxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7Z0JBQzNCLFVBQVUsRUFBRSxJQUFJO2dCQUNoQixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7YUFDMUIsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxhQUFhLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNyQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDN0IsWUFBWSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUU7b0JBQ3RCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtvQkFDM0IsVUFBVSxFQUFFLElBQUk7b0JBQ2hCLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztpQkFDMUIsQ0FBQztnQkFDRixHQUFHLGlDQUFzQixDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7YUFDckMsQ0FBQztZQUNGLFlBQUMsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3RFLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtnQkFDM0IsVUFBVSxFQUFFLElBQUk7YUFDakIsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFO2dCQUMxRCxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRTtnQkFDckMsVUFBVSxFQUFFLElBQUk7Z0JBQ2hCLFNBQVMsRUFBRSxJQUFJO2FBQ2hCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztTQUNYLENBQUM7S0FDSDtJQUNELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQUUsT0FBTyx1QkFBdUIsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzVELE9BQU8sYUFBYSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxHQUFRLEVBQUUsS0FBa0IsRUFBRSxJQUFVO0lBQzdELGtCQUFrQjtJQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYztRQUFFLE9BQU87SUFDN0QsNENBQTRDO0lBQzVDLElBQUksVUFBTyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQUUsT0FBTztJQUM5QyxPQUFPLHVCQUF1QixDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDNUMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1FBQzNCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtRQUMzQixNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztLQUNqQixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsR0FBUSxFQUFFLEtBQWtCLEVBQUUsSUFBVTtJQUMzRCxPQUFPLFlBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUM5QixPQUFPLG9CQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxZQUFDLENBQUMsTUFBTSxFQUFFLHVCQUF1QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDMUUsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1lBQzNCLFVBQVUsRUFBRSxLQUFLO1lBQ2pCLFNBQVMsRUFBRSxJQUFJO1lBQ2YsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxXQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7U0FDOUYsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELFNBQVMsdUJBQXVCLENBQUMsR0FBUSxFQUFFLElBQWUsRUFBRSxJQUFVO0lBQ3BFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFDdEMsUUFBUSxHQUFHLGlDQUFzQixDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM3QyxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssQ0FBQztRQUFFLE9BQU87WUFDOUIsWUFBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQztTQUMzQyxDQUFDO0lBQ0YsT0FBUSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFpQjtTQUNwRCxNQUFNLENBQUMsUUFBUSxDQUFDO1NBQ2hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztTQUNqRSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTtRQUNsQyxVQUFVLEVBQUUsSUFBSTtRQUNoQixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7UUFDM0IsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQ3ZELFNBQVMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztLQUN6QixDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFDZCxDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsR0FBUSxFQUFFLElBQWUsRUFBRSxJQUFVO0lBQ3pELE9BQU8sWUFBQyxDQUFDLFFBQVEsRUFBRSx1QkFBdUIsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFO1FBQ3BELFNBQVMsRUFBRSxJQUFJO1FBQ2YsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1FBQzNCLFVBQVUsRUFBRSxLQUFLO0tBQ2xCLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELFNBQVMsWUFBWSxDQUFDLEdBQVEsRUFBRSxJQUFlLEVBQUUsSUFBVTtJQUN6RCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQ3RDLE9BQU8sR0FBZ0I7UUFDckIsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1FBQzVFLG1CQUFXLENBQUMsSUFBSSxDQUFDLEdBQUksQ0FBQztLQUN2QixDQUFDO0lBQ0YsSUFBSSxJQUFJLENBQUMsTUFBTTtRQUFFLFFBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRixPQUFPLFlBQUMsQ0FBQyxNQUFNLEVBQUU7UUFDZixLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFO1FBQ2xCLEtBQUssRUFBRSxzQkFBVyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7S0FDOUIsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNkLENBQUM7QUFFRCxtQkFBd0IsSUFBaUI7SUFDdkMsTUFBTSxHQUFHLEdBQVE7UUFDZixJQUFJO1FBQ0osZ0JBQWdCLEVBQUUsS0FBSztRQUN2QixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUs7UUFDaEQsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7UUFDL0MsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7UUFDN0MsV0FBVyxFQUFFLDBCQUFlLENBQUMsSUFBSSxDQUFDO0tBQ25DLENBQUM7SUFDRixPQUFPLFlBQUMsQ0FBQywwQkFBMEIsRUFBRTtRQUNuQyxJQUFJLEVBQUUsbUJBQVEsQ0FBQyxJQUFJLENBQUM7S0FDckIsRUFBRTtRQUNELEdBQUcsaUNBQXNCLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzlDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDeEMsVUFBVSxFQUFFLEVBQUU7WUFDZCxVQUFVLEVBQUUsSUFBSTtTQUNqQixDQUFDLElBQUksRUFBRSxDQUFDO0tBQ1YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWxCRCw0QkFrQkM7Ozs7O0FDM0hELHVDQUE0QjtBQUc1QiwrQkFBZ0M7QUFFaEMsK0NBQXdDO0FBRXhDLDBEQUF5RTtBQUN6RSxrQ0FBZ0Q7QUFDaEQsK0JBQXdDO0FBQ3hDLDZDQUFrQztBQUNsQyw2Q0FBa0M7QUFDbEMsbUNBQXdDO0FBQ3hDLDhDQUF1QztBQUN2Qyw0Q0FBd0Q7QUFvQ3hELFNBQWdCLElBQUksQ0FBQyxlQUE0QixRQUFRO0lBQ3ZELE1BQU0sS0FBSyxHQUFHLG9CQUFVLENBQWMsVUFBVSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ2hFLFNBQVMsTUFBTTtRQUNiLE9BQU8sS0FBSyxFQUFFLEtBQUssUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFDRCxTQUFTLEdBQUcsQ0FBQyxDQUFVO1FBQ3JCLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUNELE9BQU87UUFDTCxHQUFHLEVBQUUsS0FBSztRQUNWLEdBQUc7UUFDSCxNQUFNO1lBQ0osR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNqQixDQUFDO1FBQ0QsTUFBTTtLQUNQLENBQUM7QUFDSixDQUFDO0FBaEJELG9CQWdCQztBQUVELDRDQUE0QztBQUM1QyxTQUFnQixNQUFNLENBQUMsSUFBaUIsRUFBRSxTQUFxQjtJQUM3RCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3RHLENBQUM7QUFGRCx3QkFFQztBQUVELFNBQWdCLFdBQVcsQ0FBQyxHQUFRLEVBQUUsSUFBZTtJQUNuRCxPQUFPO1FBQ0wsTUFBTSxFQUFFLElBQUksS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUk7UUFDOUIsY0FBYyxFQUFFLElBQUksS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLGVBQWU7UUFDakQsT0FBTyxFQUFFLElBQUksS0FBSyxHQUFHLENBQUMsV0FBVztRQUNqQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxXQUFRLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVE7S0FDN0gsQ0FBQztBQUNKLENBQUM7QUFQRCxrQ0FPQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxDQUFjO0lBQzVDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLElBQUksZUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FDNUQsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FDNUQsSUFBSSxDQUNILENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FDekUsQ0FBQztBQUNKLENBQUM7QUFORCwwQ0FNQztBQUVELFNBQWdCLHNCQUFzQixDQUFDLEdBQVEsRUFBRSxJQUFlO0lBQzlELElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxjQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUFFLE9BQU8sRUFBRSxDQUFDO0lBQzlELE9BQU8sSUFBSSxDQUFDLFFBQVMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDbEMsSUFBSSxPQUFPLENBQUMsRUFBRSxLQUFLLFNBQVMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZO1lBQUUsT0FBTztRQUMxRCxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsMEJBQWlCLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFDOUYsU0FBUyxHQUFHLGVBQWUsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNwRCxPQUFPLFlBQUMsQ0FBQyxTQUFTLEVBQUU7WUFDbEIsSUFBSSxFQUFFLGdCQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLGlCQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDMUQsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3RCLENBQUM7QUFWRCx3REFVQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxJQUFZLEVBQUUsR0FBVyxFQUFFLEdBQVE7SUFDakUsT0FBTyxHQUFHLENBQUMsZ0JBQWdCLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUMvRixDQUFDO0FBRkQsMENBRUM7QUFFRCxTQUFnQixRQUFRLENBQUMsSUFBaUI7SUFDeEMsT0FBTztRQUNMLE1BQU0sRUFBRSxLQUFLLENBQUMsRUFBRTtZQUNkLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFrQixDQUFDO1lBQ3BDLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFO2dCQUFFLGtCQUFVLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQzNDLEVBQUUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFhLEVBQUUsRUFBRTtnQkFDbkMsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixJQUFJLElBQUksS0FBSyxJQUFJO29CQUFFLHFCQUFXLENBQUMsQ0FBQyxFQUFFO3dCQUNoQyxJQUFJO3dCQUNKLElBQUksRUFBRSxJQUFJO3FCQUNYLENBQUMsQ0FBQztnQkFDSCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ2QsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDLENBQUM7WUFDRixFQUFFLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBYSxFQUFFLEVBQUU7Z0JBQ2pELElBQUksZ0JBQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDO29CQUFFLE9BQU8sQ0FBQywyQkFBMkI7Z0JBQzVFLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUIsSUFBSSxJQUFJO29CQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxTQUFTLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEVBQUU7Z0JBQzVCLGtCQUFVLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxHQUFrQixDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7YUFDbEM7UUFDSCxDQUFDO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUE1QkQsNEJBNEJDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLEdBQVEsRUFBRSxJQUFlLEVBQUUsSUFBVTtJQUM3RCxPQUFPLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQzlGLFlBQUMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQ3RFLENBQUM7QUFIRCw4QkFHQztBQUVELFNBQVMsU0FBUyxDQUFDLENBQWE7SUFDOUIsT0FBUSxDQUFDLENBQUMsTUFBc0IsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxNQUFzQixDQUFDLFVBQTBCLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFFLENBQUM7QUFFWSxRQUFBLFVBQVUsR0FBRyxrQkFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQWlCLEVBQUUsRUFBZSxFQUFFLEVBQUU7SUFDN0UsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDLFVBQXlCLENBQUM7SUFDMUMsSUFBSSxDQUFDLElBQUk7UUFBRSxPQUFPO0lBQ2xCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFnQixDQUFDO0lBQzFELElBQUksQ0FBQyxNQUFNLEVBQUU7UUFDWCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE9BQU87S0FDUjtJQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDO0FBQ2xGLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBZ0IsUUFBUSxDQUFDLENBQU07SUFDN0IsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2IsQ0FBQztBQUZELDRCQUVDOzs7OztBQy9KRCx1Q0FBNEI7QUFJNUIsaUNBQW9DO0FBRXZCLFFBQUEsY0FBYyxHQUFHLHVDQUF1QyxDQUFDO0FBRXRFLFNBQWdCLFFBQVEsQ0FBQyxHQUFXO0lBQ2xDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUM3QyxDQUFDO0FBRkQsNEJBRUM7QUFFRCxTQUFnQixtQkFBbUIsQ0FBQyxFQUFlLEVBQUUsQ0FBb0IsRUFBRSxNQUFtQjtJQUM1RixLQUFLLE1BQU0sY0FBYyxJQUFJLENBQUMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxFQUFFO1FBQ3hELEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDdEMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ25CLElBQUksTUFBTTtnQkFBRSxNQUFNLEVBQUUsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztLQUNKO0FBQ0gsQ0FBQztBQVJELGtEQVFDO0FBRUQsU0FBUyxRQUFRLENBQUMsRUFBZSxFQUFFLFNBQWlCLEVBQUUsQ0FBb0IsRUFBRSxNQUFtQjtJQUM3RixFQUFFLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFO1FBQ2pDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixJQUFJLEdBQUcsS0FBSyxLQUFLO1lBQUUsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3RDLElBQUksTUFBTTtZQUFFLE1BQU0sRUFBRSxDQUFDO1FBQ3JCLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLFNBQWlCLEVBQUUsQ0FBb0IsRUFBRSxNQUFtQjtJQUMvRSxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzVELENBQUM7QUFGRCxvQkFFQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxDQUFvQixFQUFFLE1BQW1CO0lBQ2xFLE9BQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRTtRQUN4QixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDbkIsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDZCxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDYixDQUFDO0FBTEQsZ0NBS0M7QUFFRCxTQUFnQixRQUFRLENBQXdCLENBQXVCO0lBQ3JFLE9BQU87UUFDTCxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQVEsQ0FBQztLQUNuQyxDQUFDO0FBQ0osQ0FBQztBQUpELDRCQUlDO0FBRUQsU0FBZ0IsWUFBWSxDQUFJLEtBQVE7SUFDdEMsT0FBTztRQUNMLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUpELG9DQUlDO0FBRUQsU0FBZ0IsUUFBUSxDQUFDLElBQVk7SUFDbkMsT0FBTztRQUNMLFdBQVcsRUFBRSxJQUFJO0tBQ2xCLENBQUM7QUFDSixDQUFDO0FBSkQsNEJBSUM7QUFFRCxTQUFnQixPQUFPLENBQUMsSUFBWTtJQUNsQyxPQUFPLFlBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMzQyxDQUFDO0FBRkQsMEJBRUM7QUFFRCxTQUFnQixTQUFTLENBQUMsR0FBVztJQUNuQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFGRCw4QkFFQztBQUVELFNBQWdCLFlBQVksQ0FBQyxJQUFlO0lBQzFDLElBQUksSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FDekMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FDakMsR0FBRyxHQUFHLEdBQUcsbUJBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEMsT0FBTyxrQkFBa0IsQ0FBQztBQUM1QixDQUFDO0FBTEQsb0NBS0M7QUFFRCxTQUFnQixNQUFNLENBQUMsSUFBWSxFQUFFLEVBQVU7SUFDN0MsT0FBTyxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDbkQsQ0FBQztBQUZELHdCQUVDO0FBRUQsU0FBZ0IsYUFBYSxDQUFDLFNBQWlCO0lBQzdDLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ2xFLENBQUM7QUFIRCxzQ0FHQztBQUVELFNBQWdCLE9BQU87SUFDckIsT0FBTyxZQUFDLENBQUMsYUFBYSxFQUFFO1FBQ3RCLFlBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRTtZQUM1QyxZQUFDLENBQUMsUUFBUSxFQUFFO2dCQUNWLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7YUFDL0MsQ0FBQztTQUFDLENBQUM7S0FBQyxDQUFDLENBQUM7QUFDYixDQUFDO0FBTkQsMEJBTUM7QUFFRCxTQUFnQixTQUFTLENBQUksQ0FBSSxFQUFFLE1BQXdCO0lBQ3pELE9BQU87UUFDTCxNQUFNLENBQUMsS0FBSztZQUNULEtBQUssQ0FBQyxHQUFtQixDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakQsS0FBSyxDQUFDLElBQUssQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLENBQUM7UUFDRCxTQUFTLENBQUMsR0FBRyxFQUFFLEtBQUs7WUFDbEIsSUFBSSxHQUFHLENBQUMsSUFBSyxDQUFDLE9BQU8sS0FBSyxDQUFDLEVBQUU7Z0JBQzFCLEtBQUssQ0FBQyxHQUFtQixDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEQ7WUFDRCxLQUFLLENBQUMsSUFBSyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7UUFDMUIsQ0FBQztLQUNGLENBQUM7QUFDSixDQUFDO0FBYkQsOEJBYUM7QUFFRCxTQUFnQixRQUFRLENBQUMsSUFBWSxFQUFFLFdBQW9CLElBQUk7SUFDN0QsT0FBTyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELENBQUM7QUFGRCw0QkFFQztBQUVELFNBQWdCLE9BQU87SUFDckIsT0FBTyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDaEUsQ0FBQztBQUZELDBCQUVDO0FBRUQsU0FBZ0IsY0FBYyxDQUFDLEdBQVc7SUFDeEMsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDeEMsSUFBSSxRQUFRO1FBQUUsT0FBTyxnREFBZ0QsUUFBUSxtSUFBbUksQ0FBQztBQUNuTixDQUFDO0FBSEQsd0NBR0M7QUFFRCxTQUFTLGlCQUFpQixDQUFDLEdBQUc7SUFDNUIsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPO0lBQ2pCLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMseUdBQXlHLENBQUMsQ0FBQztJQUM3SCxJQUFJLENBQUMsQ0FBQztRQUFFLE9BQU87SUFDZixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFTLENBQUM7UUFDaEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sRUFBRTtZQUNwQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO2dCQUFFLEtBQUssR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQzNDO2dCQUNILElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsbUNBQW1DLENBQUMsQ0FBQztnQkFDeEQsS0FBSyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDM0Y7U0FDRjtJQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxNQUFNLEdBQUcsb0RBQW9ELEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JHLE9BQU8sZ0NBQWdDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUM7QUFDaEUsQ0FBQztBQUVELFNBQWdCLGFBQWEsQ0FBQyxHQUFXO0lBQ3ZDLE1BQU0sUUFBUSxHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZDLElBQUksUUFBUTtRQUFFLE9BQU8sZ0RBQWdELFFBQVEsaURBQWlELENBQUM7QUFDakksQ0FBQztBQUhELHNDQUdDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxHQUFHO0lBQzNCLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTztJQUNqQixJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLHVEQUF1RCxDQUFDLENBQUM7SUFDN0UsSUFBSSxDQUFDO1FBQUUsT0FBTyxvQ0FBb0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsaUJBQWlCLENBQUM7QUFDOUUsQ0FBQztBQUVELE1BQU0sbUJBQW1CLEdBQUcsbUdBQW1HLENBQUM7QUFDaEksTUFBTSxrQkFBa0IsR0FBRyxxRUFBcUUsQ0FBQztBQUNqRyxNQUFNLFdBQVcsR0FBRyx1QkFBdUIsQ0FBQztBQUM1QyxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUM7QUFFM0IsU0FBUyxRQUFRLENBQUMsR0FBVztJQUMzQixJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQUUsT0FBTyxhQUFhLEdBQUcsbUJBQW1CLENBQUM7QUFDeEUsQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLEdBQVc7SUFDekIsSUFBSSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQUUsT0FBTyxjQUFjLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDO0lBQ3JFLElBQUksa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUFFLE9BQU8sYUFBYSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQztJQUNuRSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0QsT0FBTywwQ0FBMEMsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxNQUFNLENBQUM7QUFDakYsQ0FBQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxJQUFZLEVBQUUsZ0JBQXlCLElBQUk7SUFDcEUsSUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzdELElBQUksYUFBYTtRQUFFLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM3RCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFKRCxnQ0FJQztBQUVELHlFQUF5RTtBQUN6RSxNQUFNLFNBQVMsR0FBRyx1SEFBdUgsQ0FBQztBQUUxSSxTQUFnQixRQUFRLENBQUMsR0FBVyxFQUFFLFFBQWlDO0lBQ3JFLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzFFLENBQUM7QUFGRCw0QkFFQztBQUVELFNBQWdCLE1BQU0sQ0FBQyxLQUFhLEVBQUUsT0FBMkIsRUFBRSxJQUFZO0lBQzdFLE9BQU8sWUFBQyxDQUFDLFFBQVEsRUFBRTtRQUNqQixLQUFLLEVBQUU7WUFDTCxLQUFLLEVBQUUsS0FBSztZQUNaLFFBQVEsRUFBRSxLQUFLLEtBQUssT0FBTztTQUM1QjtLQUNGLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDWCxDQUFDO0FBUEQsd0JBT0M7QUFFRCxTQUFnQixRQUFRLENBQUMsRUFBMkIsRUFBRSxNQUEyQjtJQUMvRSxJQUFJLEVBQUUsSUFBSSxNQUFNO1FBQUUsRUFBRSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQ3BHLENBQUM7QUFGRCw0QkFFQzs7Ozs7QUM5TEQsdUNBQTRCO0FBRTVCLHdDQUF3QztBQUN4QyxpQ0FBZ0Y7QUFDaEYsK0JBQTJDO0FBQzNDLHNDQUFzQztBQUN0Qyw2Q0FBMEM7QUFDMUMsK0JBQXdDO0FBQ3hDLGtEQUErRDtBQUMvRCxxQ0FBcUM7QUFDckMsNkNBQWtEO0FBQ2xELDJDQUFzRDtBQUN0RCxxQ0FBb0M7QUFDcEMseUNBQXlDO0FBQ3pDLDBEQUFtRDtBQUNuRCxpQ0FBMEM7QUFDMUMsaURBQTBDO0FBQzFDLHlDQUFpRDtBQUNqRCwwREFBbUQ7QUFDbkQsc0RBQStDO0FBQy9DLDBEQUFtRDtBQUNuRCx3REFBd0Q7QUFDeEQsNERBQTREO0FBRTVELCtDQUErQztBQUMvQyx3RUFBd0U7QUFDeEUsaUNBQXlDO0FBQ3pDLGlDQUEyQztBQUczQyxxRUFBMEQ7QUFDMUQsaUVBQXNEO0FBQ3RELG1EQUFrRDtBQUNsRCxpRUFBMEQ7QUFDMUQseUNBQXlDO0FBRXpDLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFMUIsU0FBUyxZQUFZLENBQUMsSUFBaUI7SUFDckMsSUFBSSxNQUEwQixDQUFDO0lBQy9CLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFO1FBQUUsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDakUsS0FBSyxPQUFPO2dCQUNWLE1BQU0sR0FBRyxLQUFLLENBQUM7Z0JBQ2YsTUFBTTtZQUNSLEtBQUssT0FBTztnQkFDVixNQUFNLEdBQUcsS0FBSyxDQUFDO2dCQUNmLE1BQU07WUFDUjtnQkFDRSxNQUFNLEdBQUcsS0FBSyxDQUFDO1NBQ2xCO0lBQ0QsTUFBTSxJQUFJLEdBQVksRUFBRSxDQUFDO0lBQ3pCLElBQUksTUFBTSxFQUFFO1FBQ1YsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFDLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxNQUFNLEdBQUcsZ0JBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU8sQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxJQUFJLENBQUMsWUFBQyxDQUFDLFlBQVksRUFBRTtZQUN4QixnQkFBVSxDQUFDLElBQUksQ0FBQztZQUNoQixNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtTQUN2RyxDQUFDLENBQUMsQ0FBQztLQUNMO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsU0FBUyxhQUFhLENBQUMsSUFBaUI7SUFDdEMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRTtRQUNsQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU87S0FDckMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ1QsSUFBSSxPQUFPO1FBQUUsT0FBTyxVQUFTLFVBQW1CO1lBQzlDLE9BQU8sVUFBUyxJQUFlLEVBQUUsSUFBZTtnQkFDOUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLFVBQVUsSUFBSSxPQUFPLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUM7b0JBQUUsT0FBTyxJQUFJLENBQUM7Z0JBQ3JFLElBQUksV0FBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztvQkFBRSxPQUFPLElBQUksQ0FBQztnQkFDcEQsT0FBTyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUM1QyxDQUFDLENBQUM7UUFDSixDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxhQUFhLENBQUMsSUFBaUIsRUFBRSxTQUFxQjtJQUM3RCxPQUFPLFlBQUMsQ0FBQyw0QkFBNEIsRUFBRTtRQUNyQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUMzRixnQkFBZ0IsQ0FBQyxJQUFJLENBQUM7UUFDdEIsaUJBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDO0tBQ2hDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVELFNBQVMsS0FBSyxDQUFDLElBQWlCLEVBQUUsQ0FBYTtJQUM3QyxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBcUIsQ0FBQztJQUN2QyxJQUFJLE1BQU0sQ0FBQyxPQUFPLEtBQUssT0FBTyxJQUFJLE1BQU0sQ0FBQyxPQUFPLEtBQUssUUFBUSxJQUFJLE1BQU0sQ0FBQyxPQUFPLEtBQUssVUFBVTtRQUFFLE9BQU87SUFDdkcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ25CLElBQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDO1FBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNoQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztRQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQsU0FBUyxNQUFNLENBQUMsSUFBaUI7SUFDL0IsSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZO1FBQUUsT0FBTztJQUNwRCxJQUFJLElBQUksQ0FBQyxXQUFXO1FBQUUsT0FBTyxjQUFPLEVBQUUsQ0FBQztJQUN2QyxPQUFPLFlBQUMsQ0FBQyxlQUFlLEVBQUU7UUFDeEIsWUFBQyxDQUFDLFVBQVUsRUFBRTtZQUNaLFlBQUMsQ0FBQyxZQUFZLEVBQUUsS0FBSyxDQUFDO1lBQ3RCLFlBQUMsQ0FBQyxvREFBb0QsRUFBRTtnQkFDdEQsS0FBSyxFQUFFO29CQUNMLFVBQVUsRUFBRSxLQUFLO29CQUNqQixLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHO2lCQUNyQjtnQkFDRCxJQUFJLEVBQUUsV0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRTtvQkFDdkIsTUFBTSxLQUFLLEdBQUksQ0FBQyxDQUFDLE1BQTJCLENBQUMsS0FBSyxDQUFDO29CQUNuRCxJQUFJLEtBQUssS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc7d0JBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckQsQ0FBQyxDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7UUFDRixZQUFDLENBQUMsU0FBUyxFQUFFO1lBQ1gsWUFBQyxDQUFDLFVBQVUsRUFBRTtnQkFDWixZQUFDLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQztnQkFDdEIsWUFBQyxDQUFDLDhCQUE4QixFQUFFO29CQUNoQyxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFO29CQUM1QixJQUFJLEVBQUU7d0JBQ0osU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFOzRCQUNyQixLQUFLLENBQUMsR0FBd0IsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDeEUsQ0FBQztxQkFDRjtpQkFDRixDQUFDO2dCQUNGLFlBQUMsQ0FBQyx1Q0FBdUMsRUFBRTtvQkFDekMsS0FBSyxFQUFFLGVBQVEsQ0FBQyxHQUFHLENBQUM7b0JBQ3BCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFO3dCQUN0QixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQzt3QkFDaEQsSUFBSSxHQUFHLEtBQUssU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUM7NEJBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDakUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUM7aUJBQ2hCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDbEMsQ0FBQztTQUNILENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsSUFBWSxFQUFFLE1BQWMsRUFBRSxPQUFnQjtJQUNoRSxPQUFPLFlBQUMsQ0FBQyxZQUFZLEVBQUU7UUFDckIsS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsT0FBTyxFQUFFO1FBQzdCLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRTtLQUNqRCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxPQUFPLENBQUMsQ0FBUTtJQUN2QixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBcUIsQ0FBQztJQUN2QyxPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxVQUEwQixDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBR0QsU0FBUyxRQUFRLENBQUMsSUFBaUIsRUFBRSxNQUF1QixFQUFFLENBQVE7SUFDcEUsTUFBTSxNQUFNLEdBQUc7UUFDYixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2QsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssR0FBRyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDMUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDdEMsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDO0lBQ2hCLElBQUksT0FBTyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdEMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RCLE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUNsRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBQ2xGLENBQUM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxJQUFpQjtJQUNqQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsRUFDbEMsV0FBVyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFDckMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUNqQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDM0IsT0FBTyxZQUFDLENBQUMsd0NBQXdDLEVBQUU7UUFDakQsSUFBSSxFQUFFLGVBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNsQiwwQkFBbUIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQzFCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUIsSUFBSSxNQUFNLEtBQUssTUFBTSxJQUFJLE1BQU0sS0FBSyxNQUFNO29CQUFFLFFBQVEsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO3FCQUNqRSxJQUFJLE1BQU0sS0FBSyxPQUFPO29CQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQzVDLElBQUksTUFBTSxLQUFLLE1BQU07b0JBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDMUMsSUFBSSxNQUFNLEtBQUssVUFBVTtvQkFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7cUJBQ2pELElBQUksTUFBTSxLQUFLLFVBQVU7b0JBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO3FCQUNqRCxJQUFJLE1BQU0sS0FBSyxNQUFNO29CQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDdkQsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsQixDQUFDLENBQUM7S0FDSCxFQUFFO1FBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ3pELFlBQUMsQ0FBQyxPQUFPLEVBQUU7Z0JBQ1QsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDO29CQUN4QixNQUFNLEVBQUUsUUFBUTtvQkFDaEIsSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFO29CQUN0QyxXQUFXLEVBQUUsR0FBRztpQkFDakI7YUFDRixDQUFDO1NBQ0gsQ0FBQyxDQUFDLENBQUM7WUFDRixZQUFDLENBQUMsWUFBWSxFQUFFO2dCQUNkLEtBQUssRUFBRTtvQkFDTCxLQUFLLEVBQUUsS0FBSyxDQUFDLDZCQUE2QixDQUFDO29CQUMzQyxVQUFVLEVBQUUsVUFBVTtvQkFDdEIsV0FBVyxFQUFFLEdBQUc7aUJBQ2pCO2dCQUNELEtBQUssRUFBRTtvQkFDTCxNQUFNLEVBQUUsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUs7b0JBQzlELE1BQU0sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtpQkFDaEM7YUFDRixDQUFDO1lBQ0YsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLFlBQVksRUFBRTtnQkFDbEYsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxLQUFLLENBQUMsc0JBQXNCLENBQUM7b0JBQ3BDLFVBQVUsRUFBRSxVQUFVO29CQUN0QixXQUFXLEVBQUUsR0FBRztpQkFDakI7Z0JBQ0QsS0FBSyxFQUFFO29CQUNMLE1BQU0sRUFBRSxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLO29CQUNsQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRO2lCQUN4QjthQUNGLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtTQUNWLENBQUM7UUFDRixZQUFDLENBQUMsV0FBVyxFQUFFO1lBQ2IsVUFBVSxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDO1lBQ3JDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQztZQUNwQyxVQUFVLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxXQUFXLENBQUM7WUFDcEMsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsV0FBVyxDQUFDO1NBQ3JDLENBQUM7UUFDRixJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxZQUFZLEVBQUU7WUFDbkQsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRTtZQUM3QixLQUFLLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUM7Z0JBQ3BCLFVBQVUsRUFBRSxNQUFNO2dCQUNsQixXQUFXLEVBQUUsR0FBRzthQUNqQjtTQUNGLENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxJQUFpQjtJQUN6QyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbEQsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1FBQUUsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUM3RCxJQUFJLE9BQU87UUFBRSxPQUFPLFlBQUMsQ0FBQyxpQkFBaUIsRUFBRTtZQUN2QyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsT0FBTyxDQUFDLElBQUksRUFBRTtTQUNuRCxFQUFFO1lBQ0QsWUFBQyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDO1lBQ3hCLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSTtTQUNuQixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxJQUFpQixFQUFFLENBQVU7SUFDckQsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQztRQUM1QixDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEUsQ0FBQztBQUVELFNBQVMsWUFBWSxDQUFDLEtBQTRCLEVBQUUsUUFBZ0I7SUFDbEUsT0FBTyxRQUFRLEdBQUcsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JGLENBQUM7QUFFRCxtQkFBd0IsSUFBaUI7SUFDdkMsSUFBSSxJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0MsTUFBTSxTQUFTLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUNuQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFDbEIsWUFBWSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQ3hFLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFDakMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsRUFDbEMsZ0JBQWdCLEdBQUcsWUFBWSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQzlELGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDekUsVUFBVSxHQUFHLG9CQUFnQixDQUFDLElBQUksQ0FBQyxFQUNuQyxNQUFNLEdBQUcsQ0FBQyxVQUFVLElBQUksZ0JBQVksQ0FBQyxJQUFJLENBQUMsRUFDMUMsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFDOUIsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsVUFBVSxFQUM1QyxLQUFLLEdBQUcsd0JBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQixPQUFPLFlBQUMsQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1FBQzdELElBQUksRUFBRTtZQUNKLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtnQkFDWCxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztnQkFDekMsSUFBSSxDQUFDLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLEVBQUU7b0JBQ3ZELEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO3dCQUNWLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQzt3QkFDckQsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUNoQixDQUFDLENBQUMsQ0FBQztpQkFDSjtnQkFDRCxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFrQixDQUFDLENBQUM7WUFDekMsQ0FBQztZQUNELE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDVixnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUMzQyxDQUFDO1lBQ0QsU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLO2dCQUNsQixJQUFJLEdBQUcsQ0FBQyxJQUFLLENBQUMsT0FBTyxLQUFLLE9BQU87b0JBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLG9CQUFvQixDQUFDLENBQUM7Z0JBQ3pGLEtBQUssQ0FBQyxJQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUNoQyxDQUFDO1NBQ0Y7UUFDRCxLQUFLLEVBQUU7WUFDTCxVQUFVLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ2hDLFVBQVUsRUFBRSxPQUFPO1lBQ25CLGFBQWEsRUFBRSxDQUFDLENBQUMsVUFBVTtZQUMzQixZQUFZLEVBQUUsQ0FBQyxDQUFDLE1BQU07WUFDdEIsV0FBVyxFQUFFLENBQUMsQ0FBQyxLQUFLO1NBQ3JCO0tBQ0YsRUFBRTtRQUNELElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLGVBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUM3QyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDekMsS0FBSyxJQUFJLFlBQUMsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLCtCQUErQixDQUFDLEVBQUU7WUFDL0QsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsV0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQWEsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztTQUM1SCxFQUFFO1lBQ0QsR0FBRyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUM7WUFDakIsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO1lBQzVELFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ3hCLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtZQUM1RCxnQkFBZSxDQUFDLElBQUksQ0FBQztTQUN0QixDQUFDO1FBQ0YsQ0FBQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUN4RCxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxtQkFBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsS0FBSyxDQUFDO1FBQ3RFLGdCQUFnQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLG9CQUFvQixDQUFDLEVBQUU7WUFDL0UsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNwQyxZQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztnQkFDM0IsWUFBWSxDQUFDLENBQUMsQ0FBQyxZQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO2dCQUMvQyxhQUFhLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQztnQkFDOUIsZ0JBQWdCLElBQUksV0FBUSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUM7Z0JBQzdDLG1CQUFTLENBQUMsSUFBSSxDQUFDLElBQUksc0JBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxzQkFBWSxDQUFDLElBQUksQ0FBQzthQUM1RCxDQUFDO1NBQ0gsQ0FBQyxDQUFDO1FBQ0gsQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsbUJBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLFFBQVEsQ0FBQztRQUM1RSxDQUFDLGdCQUFnQixJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFDbkQsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyx5QkFBeUIsRUFBRTtZQUMxRCxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLGVBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxlQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyw4QkFBb0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDN0csRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDdkQsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGFBQVEsQ0FBQyxJQUFJLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNsQixJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBTSxDQUFDLENBQUMsQ0FBQztZQUNyRCxZQUFDLENBQUMscUJBQXFCLEVBQUU7Z0JBQ3ZCLElBQUksRUFBRSxlQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ2pGLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUM3RCxDQUFDLENBQUM7YUFDSCxFQUNDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ3RELEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxzQkFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7Z0JBQ3hELENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLGVBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGtCQUFrQixFQUM3RCxZQUFDLENBQUMsNEJBQTRCLEVBQUU7b0JBQzlCLEtBQUssRUFBRTt3QkFDTCxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQzt3QkFDcEQsV0FBVyxFQUFFLEdBQUc7cUJBQ2pCO2lCQUNGLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FDbkMsQ0FBQyxDQUFDLENBQUMsSUFBSTthQUNULENBQ0YsQ0FDRixDQUNGO1FBQ0QsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLElBQUksMEJBQVksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1FBQ2pELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLFlBQUMsQ0FBQyxlQUFlLEVBQUU7WUFDbkMsSUFBSSxFQUFFLGVBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDakIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO29CQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDL0QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztnQkFDakMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRTtvQkFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDakMsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUM7U0FDSCxDQUFDO1FBQ0YsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsd0JBQXdCLEVBQUU7WUFDOUMsSUFBSSxFQUFFLGVBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUN2QyxFQUFFLENBQUMsWUFBQyxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEVBQUUsR0FBRyxFQUFFLFlBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0tBQ3pGLENBQUMsQ0FBQztBQUNMLENBQUM7QUEzR0QsNEJBMkdDOzs7OztBQ25XRCxpQ0FBOEI7QUFDOUIsbUNBQThCO0FBQzlCLDRDQUE0QztBQUM1Qyw4Q0FBdUM7QUFDdkMscURBQThDO0FBRTlDLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFMUIsU0FBUyxlQUFlLENBQUMsT0FBbUIsRUFBRSxHQUFXO0lBQ3ZELElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQztJQUN2QyxJQUFJLE9BQU8sS0FBSyxZQUFZO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFDM0MsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQztRQUFFLE9BQU8sSUFBSSxDQUFDLENBQUMsVUFBVTtJQUM5QyxJQUFJLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxHQUFHO1FBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQyxZQUFZO0lBQ3hELE9BQU8sT0FBTyxLQUFLLFlBQVksSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZELENBQUM7QUFFRCxTQUFTLGlCQUFpQixDQUFDLE9BQW1CO0lBQzVDLE9BQU8sT0FBTyxLQUFLLFVBQVUsSUFBSSxPQUFPLEtBQUssVUFBVSxDQUFDO0FBQzFELENBQUM7QUFFRCxTQUFTLE9BQU87SUFDZCxNQUFNLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDbEUsS0FBSyxNQUFNLE1BQU0sSUFBSSxHQUFHO1FBQUUsSUFBSSxTQUFTLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7WUFBRSxPQUFPLElBQUksQ0FBQztJQUNoRixPQUFPLFNBQVMsQ0FBQyxRQUFRLEtBQUssY0FBYyxJQUFJLFNBQVMsQ0FBQyxRQUFRLEtBQUssVUFBVSxDQUFDO0FBQ3BGLENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUFDLE9BQWUsRUFBRSxPQUFlO0lBQ3hELHNFQUFzRTtJQUN0RSx3RUFBd0U7SUFDeEUsNkJBQTZCO0lBQzdCLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFBRSxPQUFPO0lBRXZCLFVBQVU7SUFDVixJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVE7UUFBRSxPQUFPO0lBRXhDLG9CQUFvQjtJQUNwQixJQUFJLE9BQU8saUJBQWlCLEtBQUssVUFBVTtRQUFFLE9BQU87SUFFcEQsZ0JBQWdCO0lBQ2hCLE1BQU0sR0FBRyxHQUFHLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBaUMsQ0FBQyxDQUFDO0lBQ3JHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLFlBQVksaUJBQWlCLENBQUM7UUFBRSxPQUFPO0lBRXZELHFCQUFxQjtJQUNyQixJQUFJO1FBQ0YsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDOUI7SUFBQyxPQUFPLENBQUMsRUFBRTtRQUNWLE9BQU87S0FDUjtJQUVELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLE1BQWdCO0lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDN0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzNDLE9BQU8sTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNwRixDQUFDO0FBRUQsbUJBQXdCLElBQWU7SUFDckMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFTLEVBQUUsRUFBRTtRQUMvQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxDQUFDLENBQUM7SUFFRiwrREFBK0Q7SUFDL0QsSUFBSSxVQUFVLEdBQW9CLE9BQU8sQ0FBQztJQUMxQyxJQUFJLGlCQUFpQixHQUFHLEtBQUssQ0FBQztJQUM5QixJQUFJLE9BQU8sV0FBVyxLQUFLLFFBQVEsSUFBSSxXQUFXLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDekgsVUFBVSxHQUFHLE1BQU0sQ0FBQyxDQUFDLGtCQUFrQjtRQUN2QyxJQUFJLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDdkMsTUFBTSxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQzFDLElBQUksU0FBUyxFQUFFO2dCQUNiLFVBQVUsR0FBRyxPQUFPLENBQUM7Z0JBQ3JCLElBQUk7b0JBQ0YsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbEIsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO2lCQUMxQjtnQkFBQyxPQUFPLENBQUMsRUFBRSxHQUFHO2FBQ2hCO1NBQ0Y7S0FDRjtJQUVELE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0csTUFBTSxPQUFPLEdBQUcsb0JBQVUsQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLG1CQUFtQixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFFbkksTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN6RyxNQUFNLFFBQVEsR0FBRyxvQkFBVSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRS9ELE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQztJQUNuQixNQUFNLFFBQVEsR0FBRyxvQkFBVSxDQUFTLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZFLE1BQU0sT0FBTyxHQUFHLG9CQUFVLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFLElBQUksQ0FBQyxjQUFjLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbEYsTUFBTSxRQUFRLEdBQUcsb0JBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNyRCxJQUFJLE9BQU8sR0FBMkIsSUFBSSxDQUFDO0lBQzNDLE1BQU0sYUFBYSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7SUFDaEYsTUFBTSxPQUFPLEdBQUcsYUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzNCLE1BQU0sT0FBTyxHQUFHLGFBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLE9BQU8sRUFBRSxJQUFJLGFBQWEsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM1RixJQUFJLE9BQU8sR0FBb0IsS0FBSyxDQUFDO0lBQ3JDLElBQUksV0FBVyxHQUFvQixLQUFLLENBQUMsQ0FBQyx5REFBeUQ7SUFDbkcsTUFBTSxRQUFRLEdBQUcsYUFBSSxDQUFrQixJQUFJLENBQUMsQ0FBQztJQUM3QyxNQUFNLFFBQVEsR0FBRyxhQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFN0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxXQUFJLENBQUM7UUFDcEIsVUFBVTtRQUNWLEtBQUssRUFBRSxrQ0FBa0M7UUFDekMsSUFBSSxFQUFFLHVDQUF1QztRQUM3QyxLQUFLLEVBQUUsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsb0NBQW9DLENBQUMsQ0FBQyxDQUFDLHVDQUF1QztLQUM1SCxFQUFFO1FBQ0QsUUFBUTtRQUNSLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUc7UUFDekIsT0FBTyxFQUFFLFVBQVUsSUFBSSxPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ25GLFFBQVEsRUFBRSxVQUFVLElBQUksT0FBTyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztLQUN2RixDQUFDLENBQUM7SUFFSCw2Q0FBNkM7SUFDN0MsTUFBTSxXQUFXLEdBQUcsQ0FBQztRQUNuQixNQUFNLE1BQU0sR0FBYSxFQUFFLENBQUM7UUFDNUIsTUFBTSxPQUFPLEdBQUcsVUFBUyxFQUFtQjtZQUMxQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLEtBQUssSUFBSSxFQUFFO2dCQUM5QixPQUFPLEVBQUUsQ0FBQyxFQUFFLEtBQUssV0FBVyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUc7Z0JBQ3JELENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDaEUsQ0FBQyxDQUFBO1FBQ0QsT0FBTyxVQUFTLEVBQW1CO1lBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO2dCQUFFLE9BQU87WUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDckIsSUFBSSxLQUFLLEdBQUcsRUFBRSxFQUNaLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM3QixJQUFJLElBQUksR0FBRyxHQUFHO29CQUFFLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQzNCLElBQUksSUFBSSxHQUFHLEdBQUc7b0JBQUUsS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFDM0IsSUFBSSxJQUFJLEdBQUcsR0FBRztvQkFBRSxLQUFLLEdBQUcsRUFBRSxDQUFDO2dCQUMzQixJQUFJLElBQUksR0FBRyxHQUFHO29CQUFFLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQzNCLElBQUksSUFBSSxHQUFHLElBQUk7b0JBQUUsS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFDNUIsSUFBSSxJQUFJLEdBQUcsSUFBSTtvQkFBRSxLQUFLLEdBQUcsRUFBRSxDQUFDO2dCQUM1QixJQUFJLElBQUksR0FBRyxJQUFJO29CQUFFLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQzVCLElBQUksSUFBSSxHQUFHLElBQUk7b0JBQUUsS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFDNUIsSUFBSSxJQUFJLEdBQUcsSUFBSTtvQkFBRSxLQUFLLEdBQUcsRUFBRSxDQUFDO2dCQUM1QixRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2hCLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxFQUFFO29CQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQzthQUN4QztRQUNILENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFFTCxJQUFJLFdBQVcsR0FBa0IsSUFBSSxDQUFDO0lBRXRDLE1BQU0sTUFBTSxHQUFHLGtCQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBbUIsRUFBRSxJQUFVLEVBQUUsRUFBRTtRQUMvRCxjQUFjLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pGLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQixPQUFPLEdBQUcsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDcEIsSUFBSSxFQUFFLENBQUMsR0FBRyxLQUFLLFdBQVcsRUFBRTtZQUMxQixXQUFXLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztZQUNyQixFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLGlCQUFpQixHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUV2RixNQUFNLGNBQWMsR0FBRyxDQUFDLEdBQWtCLEVBQUUsS0FBWSxFQUFFLEVBQUUsQ0FDMUQsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFTLENBQUMsRUFBRSxDQUFDO1FBQ3BCLE9BQU8sMkJBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEdBQUcsMkJBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDckQsQ0FBQyxDQUFDLENBQUM7SUFFTCxNQUFNLEtBQUssR0FBRyxDQUFDLElBQWUsRUFBRSxLQUFhLEVBQUUsVUFBbUIsRUFBRSxNQUFlLEVBQUUsRUFBRTtRQUVyRixJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUFFLE9BQU87UUFFekMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pCLE1BQU0sSUFBSSxHQUFHLGlCQUFpQixFQUFFLENBQUM7UUFFakMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFckMsTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3ZELElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxLQUFLLElBQUksSUFBSTtZQUFFLE9BQU87UUFFL0MsTUFBTSxJQUFJLEdBQVM7WUFDakIsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHO1lBQ3hCLEtBQUssRUFBRSxFQUFFO1lBQ1QsVUFBVSxFQUFFLElBQUksQ0FBQyxHQUFHO1lBQ3BCLElBQUk7WUFDSixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7WUFDYixRQUFRLEVBQUUsSUFBSTtZQUNkLE9BQU8sRUFBRSxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDNUIsVUFBVTtZQUNWLElBQUksQ0FBQyxFQUFtQjtnQkFDdEIsSUFBSSxPQUFPLEVBQUU7b0JBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNsQyxDQUFDO1NBQ0YsQ0FBQztRQUVGLElBQUksVUFBVSxFQUFFO1lBQ2QsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUN6QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUN2RCxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQztZQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQztTQUN2QjthQUFNO1lBQ0wsOERBQThEO1lBQzlELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNyQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pCLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFJLENBQUMsRUFBRTtvQkFDN0MsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7b0JBQ2hCLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQztpQkFDekI7O29CQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFJLENBQUMsQ0FBQzthQUNoQztTQUNGO1FBRUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVqQixPQUFPLEdBQUc7WUFDUixJQUFJO1lBQ0osS0FBSztZQUNMLFVBQVU7U0FDWCxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUYsU0FBUyxRQUFRO1FBQ2YsTUFBTSxDQUFDLEdBQUcsT0FBTyxJQUFJLFdBQVcsQ0FBQztRQUNqQyxJQUFJLENBQUMsRUFBRTtZQUNMLElBQUksRUFBRSxDQUFDO1lBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzVDO0lBQ0gsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLElBQUk7UUFDWCxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1lBQUUsT0FBTztRQUNuQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDWixXQUFXLEdBQUcsT0FBTyxDQUFDO1FBQ3RCLE9BQU8sR0FBRyxLQUFLLENBQUM7SUFDbEIsQ0FBQztJQUFBLENBQUM7SUFFRiwwQ0FBMEM7SUFDMUMsSUFBSSxPQUFPLEVBQUUsRUFBRTtRQUNiLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN0QyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDMUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUMsQ0FBQyxDQUFDO0tBQ0o7SUFFRCxPQUFPO1FBQ0wsVUFBVTtRQUNWLEtBQUs7UUFDTCxJQUFJO1FBQ0osT0FBTztRQUNQLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtRQUN2QixPQUFPO1FBQ1AsT0FBTztRQUNQLE9BQU8sRUFBRSxVQUFVLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVM7UUFDcEQsUUFBUSxFQUFFLFVBQVUsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUztRQUN0RCxVQUFVO1FBQ1YsV0FBVztRQUNYLFFBQVE7UUFDUixRQUFRO1FBQ1IsV0FBVyxDQUFDLEdBQVEsRUFBRSxHQUFTO1lBQzdCLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNiLEdBQUc7Z0JBQ0gsR0FBRzthQUNKLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1YsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxNQUFNO1lBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQUUsT0FBTztZQUN6QyxJQUFJLEVBQUUsQ0FBQztZQUNQLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFDcEIsSUFBSSxRQUFRLENBQUMsZUFBZSxLQUFLLFFBQVE7Z0JBQ3ZDLGFBQWEsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBQ0QsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQyxpQkFBaUI7UUFDakIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1FBQ3JCLFFBQVE7UUFDUixRQUFRO1FBQ1IsV0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7UUFDcEUsV0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtRQUNsRCxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7UUFDM0IsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1FBQ3JCLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtLQUNwQixDQUFDO0FBQ0osQ0FBQztBQXhORCw0QkF3TkM7QUFBQSxDQUFDOzs7OztBQ3BSRixpQ0FBMEI7QUFNakIsZUFORixjQUFJLENBTUU7QUFMYiwrQkFBK0I7QUFLaEIsb0JBQUk7QUFKbkIsbURBQW1EO0FBSTlCLHdDQUFjO0FBRW5DLFNBQWdCLFlBQVksQ0FBQyxDQUFrQixFQUFFLENBQW1CO0lBQ2xFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQy9FLENBQUM7QUFGRCxvQ0FFQztBQUVELHVEQUF1RDtBQUN2RCxpREFBaUQ7QUFDakQsK0RBQStEO0FBQy9ELE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUN6RCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDL0QsSUFBSSxNQUFNLElBQUssTUFBMkIsQ0FBQyxPQUFPO1FBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3JFLENBQUMsQ0FBQyxDQUFDOzs7OztBQ2xCSCxzQ0FBeUM7QUFFekMsMkRBQTJDO0FBRTNDLE1BQXNCLGNBQWM7SUFJbEMsWUFBc0IsR0FBVyxFQUFZLFFBQWtCLEVBQVksVUFBc0I7UUFBM0UsUUFBRyxHQUFILEdBQUcsQ0FBUTtRQUFZLGFBQVEsR0FBUixRQUFRLENBQVU7UUFBWSxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBY2pHLGdCQUFXLEdBQWtCLEdBQUcsRUFBRSxDQUNoQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFM0QsZUFBVSxHQUE2QixHQUFHLEVBQUUsQ0FDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBakJwRCxJQUFJLENBQUMsUUFBUSxHQUFHLFdBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQsSUFBSTtRQUNGLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELEtBQUssQ0FBQyxJQUFVO1FBQ2QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDM0MsT0FBTyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMxRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FXRjtBQTNCRCx3Q0EyQkM7QUFFRCxNQUFNLFNBQVUsU0FBUSxjQUFjO0lBR3BDLElBQUk7UUFDRixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBQyxVQUFVLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hGLE1BQU0sUUFBUSxHQUFHLElBQUksMkJBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDMUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUIsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ1QsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRCxLQUFLLENBQUMsSUFBVTtRQUNkLGdCQUFnQjtRQUNoQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUMzQyxNQUFNLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNyRSxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFO2dCQUN6RCxpQ0FBaUM7Z0JBQ2pDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDZixJQUFJLENBQUMsUUFBUSxHQUFHLFdBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNwQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNYLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsT0FBTztRQUNMLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksQ0FBQyxHQUFXO1FBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsQ0FBQztDQUNGO0FBRUQsTUFBTSxrQkFBbUIsU0FBUSxjQUFjO0lBSzdDLElBQUk7UUFDRixJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTTtZQUFFLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUMsVUFBVSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDNUgsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsRUFDcEQsUUFBUSxHQUFHLElBQUksMkJBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQzlELFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDOUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN0QyxPQUFPO29CQUNMLFFBQVE7b0JBQ1IsUUFBUTtpQkFDVCxDQUFDO1lBQ0osQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDN0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1lBQ2hDLE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxPQUFPO1FBQ0wsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEVBQUU7WUFDN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2REFBNkQsQ0FBQyxDQUFDO1lBQzNFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUM7U0FDakU7SUFDSCxDQUFDO0lBRUQsSUFBSSxDQUFDLEdBQVc7UUFDZCxJQUFJLElBQUksQ0FBQyxRQUFRO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEQsQ0FBQztDQUNGO0FBRUQsTUFBYSxJQUFJO0lBSWYsWUFBb0IsUUFBa0IsRUFBVSxZQUF3QjtRQUFwRCxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQVUsaUJBQVksR0FBWixZQUFZLENBQVk7UUFIaEUsWUFBTyxHQUFxQixFQUFFLENBQUM7UUFDL0IsVUFBSyxHQUFHLENBQUMsQ0FBQztRQW9CbEIsV0FBTSxHQUFHLEdBQUcsRUFBRTtZQUNaLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNO2dCQUFFLE9BQU87WUFFaEMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsSUFBSSxPQUFPO2dCQUNyQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7aUJBQzlGO2dCQUNILEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFO29CQUN6QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO2FBQ3JKO1FBQ0gsQ0FBQyxDQUFBO1FBRUQsU0FBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFFakQsWUFBTyxHQUFHLEdBQUcsRUFBRTtZQUNiLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNaLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDO1FBRUYsVUFBSyxHQUFHLENBQUMsSUFBVSxFQUFFLEVBQUU7WUFDckIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDaEQsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFTLE1BQU07Z0JBQ25DLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckIsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVMsS0FBSztnQkFDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbkIsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7UUFFRixnQkFBVyxHQUFHLEdBQUcsRUFBRSxDQUNqQixDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFbEUsZUFBVSxHQUE2QixHQUFHLEVBQUUsQ0FDMUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7SUFsRFEsQ0FBQztJQUU3RSxTQUFTO1FBQ1AsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRWQsNkRBQTZEO1FBQzdELE1BQU0sTUFBTSxHQUFHLElBQUksT0FBTyxDQUFpQixDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUM3RCxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMvQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ3hELFVBQVUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1lBQ3BELE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQW1DRjtBQXZERCxvQkF1REM7Ozs7O0FDN0pELGlDQUF1QztBQUd2QyxNQUFNLFVBQVUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxFQUFFO01BQzVCLCtDQUErQyxDQUFDLE1BQU07TUFDdEQsMkJBQTJCLENBQUMsTUFBTTtNQUNsQyw4Q0FBOEMsQ0FBQyxNQUFNO01BQ3JELCtDQUErQyxDQUFDLE1BQU07TUFDdEQsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBRXRCLE1BQXFCLFFBQVE7SUFRM0IsWUFBb0IsSUFBMkIsRUFBVSxJQUFnQjtRQUFyRCxTQUFJLEdBQUosSUFBSSxDQUF1QjtRQUFVLFNBQUksR0FBSixJQUFJLENBQVk7UUFQakUsU0FBSSxHQUFnQixJQUFJLENBQUM7UUFDekIsWUFBTyxHQUEyQixJQUFJLENBQUM7UUFDdkMsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFPdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQVEsQ0FBQztRQUM3QixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRXZCLDBCQUEwQjtRQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRWpCLDJCQUEyQjtRQUMzQixJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFM0MsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLGNBQWMsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFVBQVU7WUFDaEUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDcEMsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFdBQVc7WUFDbkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDdkMsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFVBQVU7WUFDbEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsc0JBQWMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRU8sU0FBUyxDQUFDLElBQVksRUFBRSxLQUFzQjtRQUNwRCxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLFVBQVUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsUUFBUSxDQUFDLElBQVk7UUFDbkIsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQztZQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDaEYsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ3JDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTztnQkFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssRUFBUSxDQUFDO1lBQ2hELElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDdkIsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPO2dCQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBRXZCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLE9BQU87WUFBRSxPQUFPO1FBRXJCLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDOUIsT0FBTyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDOUIsTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxNQUFNLEVBQzlCLEVBQUUsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3pCLFFBQVEsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQ3JCLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQzVCLFNBQVMsR0FBVyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3hDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWhDLDJDQUEyQztRQUMzQyxJQUFJLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFBRSxPQUFPO1FBRTFCLDJEQUEyRDtRQUMzRCxJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTztZQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDO1FBRTNELElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUFFLE9BQU87UUFFdkMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLEtBQUs7WUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFFMUMsdURBQXVEO1FBQ3ZELDBEQUEwRDtRQUMxRCwyQkFBMkI7UUFDM0Isd0RBQXdEO1FBQ3hELElBQUksUUFBUSxJQUFJLE9BQU8sS0FBSyxDQUFDO1lBQUUsT0FBTztRQUV0QyxJQUFJLE1BQU0sR0FBRztZQUNYLEtBQUs7WUFDTCxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDM0IsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQzdCLEtBQUs7U0FDTixDQUFDO1FBRUYsSUFBSSxPQUFPLEtBQUssQ0FBQyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUc7Z0JBQ2IsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVTtnQkFDekIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtnQkFDNUIsS0FBSztnQkFDTCxJQUFJLEVBQUUsS0FBSyxHQUFHLFNBQVM7Z0JBQ3ZCLEtBQUs7Z0JBQ0wsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUMzQixJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQzdCLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFDYixNQUFNLEVBQUUsU0FBUzthQUNsQixDQUFDO1NBQ0g7YUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzlCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDMUQ7UUFFRCxJQUFJLE9BQU8sS0FBSyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzlCO0lBQ0gsQ0FBQztJQUVELEtBQUssQ0FBQyxDQUFPO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDakIsd0VBQXdFO1lBQ3hFLG1FQUFtRTtZQUNuRSxxRUFBcUU7WUFDckUsaUJBQWlCO1lBQ2pCLHFFQUFxRTtZQUNyRSx1RUFBdUU7WUFDdkUsK0RBQStEO1lBQy9ELHFCQUFxQjtZQUNyQixPQUFPLENBQUMsR0FBRyxDQUFDLHdEQUF3RCxDQUFDLENBQUM7WUFDdEUsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7UUFDZCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTztZQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN0RSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksRUFBRTtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7O1lBQ2xELElBQUksQ0FBQyxJQUFJLENBQUMsMEJBQTBCLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsSUFBSTtRQUNGLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxFQUFRLENBQUM7WUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNuQjtRQUNELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7SUFDOUIsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN2QixDQUFDO0NBQ0Y7QUF6SUQsMkJBeUlDO0FBQUEsQ0FBQztBQUVGLFNBQVMsS0FBSztJQUNaLE1BQU0sUUFBUSxHQUFzQyxFQUFFLENBQUE7SUFDdEQsUUFBUSxDQUFDLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBSSxVQUFVLE9BQU8sRUFBRSxNQUFNO1FBQ3pELFFBQVEsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQzFCLFFBQVEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0lBQzFCLENBQUMsQ0FBQyxDQUFBO0lBQ0YsT0FBTyxRQUFvQyxDQUFDO0FBQzlDLENBQUM7Ozs7O0FDM0pELG1EQUFtRDtBQUNuRCxtQ0FBaUM7QUFDakMsaUNBQW1EO0FBQ25ELHVDQUE0QjtBQUU1Qix3Q0FBbUQ7QUFDbkQsc0NBQXdDO0FBQ3hDLHNDQUFnRDtBQUNoRCw4Q0FBaUQ7QUFFakQsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQ2xCLE1BQU0sVUFBVSxHQUFZLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FDdkQsWUFBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQ3RGLENBQUM7QUFFRixTQUFTLGFBQWEsQ0FBQyxJQUFnQixFQUFFLEdBQWM7SUFDckQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ2xELElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTTtRQUFFLE9BQU87WUFDdEIsR0FBRyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUM7U0FDdEcsQ0FBQztJQUVGLE1BQU0sQ0FBQyxHQUEwQixHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDbEQsS0FBSyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDdEMsWUFBQyxDQUFDLFlBQVksRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUM7S0FDN0UsQ0FBQyxDQUFDLENBQUM7UUFDRixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO0tBQ3JFLENBQUM7SUFDRixJQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUU7UUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQUMsQ0FBQyxVQUFVLEVBQUU7WUFDNUMsS0FBSyxFQUFFO2dCQUNMLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztnQkFDOUIsV0FBVyxFQUFFLEdBQUc7YUFDakI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUUsS0FBSyxDQUFDLEdBQW1CLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtvQkFDekUsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUNqQixLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ2pCLENBQUMsQ0FBQzthQUNIO1NBQ0YsQ0FBQyxDQUFDLENBQUM7U0FDQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJO1FBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDO0lBQ3hHLE9BQU8sQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLElBQWdCLEVBQUUsTUFBZ0M7SUFDcEUsSUFBSSxDQUFDLE1BQU07UUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ3RELElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzFFLElBQUksTUFBTSxDQUFDLElBQUk7UUFBRSxDQUFDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLFdBQVcsQ0FBQztJQUNuRSxPQUFPLENBQUMsQ0FBQztBQUNYLENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxJQUFnQjtJQUNwQyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNwRSxPQUFPLFlBQUMsQ0FBQyxlQUFlLEVBQUU7UUFDeEIsS0FBSyxFQUFFO1lBQ0wsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDekIsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSztTQUMvQjtRQUNELEtBQUssRUFBRTtZQUNMLFdBQVcsRUFBRSxHQUFHO1lBQ2hCLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsR0FBRyxNQUFNO1NBQy9DO1FBQ0QsSUFBSSxFQUFFO1lBQ0osTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUUsS0FBSyxDQUFDLEdBQW1CLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztTQUM3RjtLQUNGLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxJQUFlO0lBQ2pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNsQyxPQUFPO1FBQ0wsWUFBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQztRQUNqSSxJQUFJLENBQUMsVUFBVSxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSwyQ0FBMkMsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUN6SCxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsYUFBYSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDMUYsWUFBQyxDQUFDLFlBQVksRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxxQkFBcUIsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDM0UsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFFeEIsU0FBZ0IsV0FBVyxDQUFDLEdBQWM7SUFDeEMsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFDekIsT0FBTyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7SUFFdkIsSUFBSSxDQUFDLFFBQVE7UUFBRSxPQUFPLE9BQU8sQ0FBQztJQUM5QixJQUFJLENBQUMsT0FBTztRQUFFLE9BQU8sUUFBUSxDQUFDO0lBRTlCLHlFQUF5RTtJQUN6RSxJQUFJLE9BQU8sQ0FBQyxLQUFLLEdBQUcsV0FBVztRQUM3QixDQUFDLE9BQU8sT0FBTyxDQUFDLElBQUksS0FBSyxXQUFXLElBQUksQ0FBQyxPQUFPLFFBQVEsQ0FBQyxJQUFJLEtBQUssV0FBVyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkksT0FBTyxPQUFPLENBQUM7SUFFakIsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQWJELGtDQWFDO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLElBQWdCO0lBQzFDLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUU7UUFBRSxPQUFPO0lBQ2xELElBQUksRUFBRSxFQUFFLE1BQU0sR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7SUFDbEQsSUFBSSxNQUFNLEVBQUU7UUFDVixFQUFFLEdBQUcsY0FBYyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDaEQsU0FBUyxHQUFHLEVBQUUsQ0FBQztLQUNoQjs7UUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDO0lBQ3RCLE9BQU8sWUFBQyxDQUFDLGdCQUFnQixFQUFFO1FBQ3pCLEtBQUssRUFBRTtZQUNMLEtBQUssRUFBRSxFQUFFLEtBQUssSUFBSTtZQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLE9BQU87U0FDM0M7S0FDRixFQUFFO1FBQ0QsWUFBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxXQUFXLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7UUFDdkUsR0FBRyxVQUFVO0tBQ2QsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWhCRCxrQ0FnQkM7QUFFRCxTQUFnQixXQUFXLENBQUMsSUFBZ0I7SUFDMUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3JELElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtRQUFFLE9BQU87SUFDOUUsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxFQUNoQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUN6QixVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUM5QixNQUFNLEdBQUcsVUFBVSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQzVDLE1BQU0sR0FBRyxNQUFNLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RDLElBQUksS0FBcUIsRUFBRSxPQUFlLENBQUM7SUFDM0MsSUFBSSxNQUFNLElBQUksT0FBTyxNQUFNLENBQUMsRUFBRSxLQUFLLFdBQVcsRUFBRTtRQUM5QyxLQUFLLEdBQUcsa0JBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDOUIsT0FBTyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN0STtTQUFNLElBQUksTUFBTSxJQUFJLGdCQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3pDLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUMxQixPQUFPLEdBQUcsR0FBRyxDQUFDO0tBQ2Y7U0FBTSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRTtRQUMxQixLQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ1osT0FBTyxHQUFHLENBQUMsQ0FBQztLQUNiO1NBQU07UUFDTCxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMzQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0tBQ2I7SUFDRCxJQUFJLFVBQVUsRUFBRTtRQUNkLElBQUksTUFBTTtZQUFFLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOztZQUNqRixPQUFPLEdBQUcsQ0FBQyxDQUFDO0tBQ2xCO0lBRUQsTUFBTSxXQUFXLEdBQWlCLE9BQU8sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLFNBQVMsRUFBRSxZQUFDLENBQUMsTUFBTSxFQUFFO1FBQ2pFLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUU7UUFDN0IsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLFVBQVUsT0FBTyxHQUFHLEVBQUU7UUFDdEMsSUFBSSxFQUFFO1lBQ0osU0FBUyxFQUFFLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUN4QixJQUFJLEdBQUcsQ0FBQyxJQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUssQ0FBQyxVQUFVLElBQUksVUFBVSxFQUFFO29CQUN2RSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBa0IsQ0FBQztvQkFDcEMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLFVBQXlCLENBQUM7b0JBQ3ZDLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ2xCLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7aUJBQ25CO2dCQUNELEtBQUssQ0FBQyxJQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztnQkFDOUIsS0FBSyxDQUFDLElBQUssQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1lBQ3RDLENBQUM7U0FDRjtLQUNGLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFFWCxNQUFNLElBQUksR0FBd0IsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUMxQyxZQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsWUFBQyxDQUFDLFlBQVksRUFBRTtZQUNkLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEUsWUFBQyxDQUFDLFdBQVcsRUFDWCxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzdDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUNyRTtTQUNGLENBQUM7S0FDSCxDQUFDLENBQUMsQ0FBQztRQUNGLEtBQUssQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDbEMsWUFBQyxDQUFDLE1BQU0sRUFBRTtZQUNSLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztZQUN2QixZQUFDLENBQUMsSUFBSSxDQUFDO1lBQ1AsS0FBSyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztTQUM5QixDQUFDO0tBQ0gsQ0FBQztJQUVGLE1BQU0sWUFBWSxHQUFpQixJQUFJLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsWUFBWSxFQUFFO1FBQ3ZHLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLEdBQUcsTUFBTSxFQUFFO0tBQ2hFLEVBQUU7UUFDRCxZQUFDLENBQUMsMERBQTBELEVBQUU7WUFDNUQsS0FBSyxFQUFFO2dCQUNMLElBQUksRUFBRSxVQUFVO2dCQUNoQixPQUFPLEVBQUUsT0FBTzthQUNqQjtZQUNELElBQUksRUFBRTtnQkFDSixNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBRSxLQUFLLENBQUMsR0FBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQzthQUN6RjtTQUNGLENBQUM7UUFDRixZQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLHNCQUFzQixFQUFFLEVBQUUsQ0FBQztLQUN6RCxDQUFDLENBQUE7SUFFRixPQUFPLFlBQUMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDbEQsS0FBSyxFQUFFO1lBQ0wsU0FBUyxFQUFFLE9BQU8sR0FBRyxHQUFHLElBQUksUUFBUSxDQUFDLFdBQVcsRUFBRTtTQUNuRDtLQUNGLEVBQUU7UUFDRCxXQUFXO1FBQ1gsR0FBRyxJQUFJO1FBQ1AsWUFBWSxDQUFDLElBQUksQ0FBQztRQUNsQixZQUFZO0tBQ2IsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXZGRCxrQ0F1RkM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxFQUFlO0lBQy9CLE9BQU8sRUFBRSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUUsQ0FBQztBQUN0QyxDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsQ0FBYTtJQUM3QixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBcUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkUsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLEVBQWUsRUFBRSxRQUFtQjtJQUN0RCxNQUFNLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRTtRQUN0QyxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ2xGLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQWdCLFNBQVMsQ0FBQyxJQUFnQjtJQUN4QyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDakMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFO1FBQUUsT0FBTztJQUM3RSxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQzFDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQ3JCLEtBQUssR0FBRyxjQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3RDLElBQUksR0FBbUIsRUFBRSxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBQ3hDLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7UUFDcEMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ3RCLE1BQU0sR0FBRyxJQUFJLENBQUM7S0FDZjtTQUFNLElBQUksSUFBSSxDQUFDLEtBQUs7UUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7O1FBQ3ZDLEdBQUcsR0FBRyxFQUFFLENBQUM7SUFDZCxJQUFJLE1BQU07UUFBRSxLQUFLLENBQUMsSUFBSSxHQUFHLGVBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUMsTUFBTSxHQUFHLEdBQUcsdUJBQWEsQ0FBQyxzQkFBYyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDdkUsT0FBTyxZQUFDLENBQUMsWUFBWSxFQUFFO1FBQ3JCLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1FBQy9CLElBQUksRUFBRTtZQUNKLE1BQU0sRUFBRSxLQUFLLENBQUMsRUFBRTtnQkFDZCxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBa0IsQ0FBQztnQkFDcEMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxDQUFDLENBQWEsRUFBRSxFQUFFO29CQUNqRCxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEQsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7b0JBQ25DLFFBQVEsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLENBQUMsQ0FBQyxDQUFDO2dCQUNILEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFhLEVBQUUsRUFBRTtvQkFDakQsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QixJQUFJLEdBQUc7d0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDN0IsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsVUFBVSxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUMzQixDQUFDO1lBQ0QsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFrQixFQUFFLFFBQVEsQ0FBQztTQUN4RTtLQUNGLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFTLENBQUM7UUFDMUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFBRSxPQUFPLFlBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoQyxPQUFPLFlBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQy9CLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFO1NBQ3ZDLEVBQUU7WUFDRCxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsUUFBUSxFQUFFLGdCQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGtCQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFDckcsWUFBQyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsc0JBQWdCLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxlQUFRLENBQUMsQ0FBQyxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDakgsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNOLENBQUM7QUExQ0QsOEJBMENDOzs7OztBQ2hRRCxTQUFTLEtBQUssQ0FBQyxLQUFZLEVBQUUsSUFBWTtJQUN2QyxPQUFPLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDMUMsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxpQkFBaUIsQ0FBQyxFQUFVO0lBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDN0MsQ0FBQztBQUVELFNBQVMsZ0JBQWdCLENBQUMsRUFBVTtJQUNsQyxPQUFPLGlCQUFpQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2hFLENBQUM7QUFFRCxTQUFTLGtCQUFrQixDQUFDLElBQVk7SUFDdEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQ25ELElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0QyxPQUFPLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFFRCxTQUFTLGtCQUFrQixDQUFDLEVBQVE7SUFDbEMsT0FBTyxPQUFPLEVBQUUsQ0FBQyxJQUFJLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxFQUFHLENBQUMsQ0FBQztBQUNqRyxDQUFDO0FBRUQsOEJBQThCO0FBQzlCLHdCQUF3QjtBQUN4Qix1QkFBdUI7QUFDdkIsU0FBZ0IsVUFBVSxDQUFDLEtBQVksRUFBRSxFQUFRO0lBQy9DLE9BQU8sS0FBSyxDQUFDLEtBQUssRUFBRSxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzlDLENBQUM7QUFGRCxnQ0FFQztBQUVELHVFQUF1RTtBQUN2RSx1Q0FBdUM7QUFDdkMsdUNBQXVDO0FBQ3ZDLFNBQWdCLE9BQU8sQ0FBQyxLQUFZLEVBQUUsRUFBUSxFQUFFLEVBQVE7SUFDdEQsT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM3RCxDQUFDO0FBRkQsMEJBRUM7Ozs7O0FDdENELHFDQUFxQztBQUNyQyxpQ0FBaUM7QUFDakMsNkNBQTZDO0FBQzdDLG1DQUE4QjtBQUU5QixNQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBRTFCLG1CQUF3QixJQUFjLEVBQUUsTUFBYztJQUVwRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3ZCLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsNEJBQTRCO0lBQ2pELE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQztJQUNyQixNQUFNLFlBQVksR0FBRyxFQUFFLENBQUMsQ0FBQyxpQ0FBaUM7SUFFMUQsTUFBTSxRQUFRLEdBQUc7UUFDZixRQUFRLEVBQUUsU0FBUztRQUNuQixNQUFNLEVBQUUsS0FBSztRQUNiLE9BQU8sRUFBRSxhQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7S0FDL0IsQ0FBQztJQUVGLE1BQU0sT0FBTyxHQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdEMsSUFBSSxJQUFJLENBQUMsTUFBTTtRQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEMsSUFBSSxJQUFJLENBQUMsTUFBTTtRQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFbkQsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQzVDLFNBQVMsR0FBRyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUM7SUFFL0IsSUFBSSxVQUFzQyxDQUFDO0lBRTNDLE1BQU0sRUFBRSxHQUFjO1FBQ3BCLEdBQUcsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLFNBQVMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDekQsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7UUFDeEQsY0FBYyxFQUFFLFlBQVk7UUFDNUIsT0FBTyxFQUFFLEtBQUs7UUFDZCxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87UUFDckIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO0tBQzFCLENBQUM7SUFFRjs4Q0FDMEM7SUFDMUMsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxLQUFLLFlBQVksSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7UUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVuRyxNQUFNLElBQUksR0FBRyxVQUFTLElBQVk7UUFDaEMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDbEIsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtZQUNyQixLQUFLLENBQUMseUJBQXlCLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxjQUFjLENBQUMsQ0FBQztZQUNoRSxPQUFPO1NBQ1I7UUFDRCxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlDLENBQUMsQ0FBQztJQUVGLE1BQU0sU0FBUyxHQUFHLFVBQVMsTUFBYztRQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNyQixJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxNQUFNO2dCQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ3JELENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU07WUFBRSxFQUFFLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUM3QyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsTUFBTSxFQUFFLENBQUM7SUFDWCxDQUFDLENBQUM7SUFFRixNQUFNLFdBQVcsR0FBRyxVQUFTLE1BQWM7UUFDekMsSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUN6QixFQUFFLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNuQixNQUFNLEVBQUUsQ0FBQztTQUNWO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsTUFBTSxTQUFTLEdBQUcsVUFBUyxJQUFVO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQzdCLElBQUksRUFBRSxHQUFHLFFBQVEsRUFBRTtZQUNqQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLFFBQVEsR0FBRyxZQUFZLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7U0FDbkI7UUFDRCxNQUFNLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQztJQUVGLE1BQU0sV0FBVyxHQUFHLFVBQVMsQ0FBVTtRQUNyQyxFQUFFLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNqQixNQUFNLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQTtJQUVELE1BQU0sYUFBYSxHQUFHLFVBQVMsR0FBZ0I7UUFDN0MsSUFBSSxDQUFvQixDQUFDO1FBQ3pCLEtBQUssQ0FBQyxJQUFJLEdBQUc7WUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QyxxQkFBcUIsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sRUFBRSxDQUFDO0lBQ1gsQ0FBQyxDQUFBO0lBRUQsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEMsU0FBUyxNQUFNO1FBQ2IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQztJQUM1RCxDQUFDO0lBRUQsU0FBUyxxQkFBcUI7UUFDNUIsVUFBVSxHQUFHLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQywyQkFBYyxDQUFDO1lBQ3JDLE9BQU8sRUFBRSxJQUFJLENBQUMsY0FBYyxJQUFJLENBQUMsQ0FBQyxFQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLHdCQUF3QixFQUFDLENBQUMsQ0FBQztZQUNsRixXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7WUFDN0IsTUFBTTtTQUNQLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBQ2YsSUFBSSxNQUFNLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRCxxQkFBcUIsRUFBRSxDQUFDO0lBRXhCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLGVBQVEsQ0FBQztRQUNsQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU07UUFDZixLQUFLO1FBQ0wsTUFBTTtLQUNQLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBRWYsTUFBTSxNQUFNLEdBQUcsbUJBQVUsQ0FBQztRQUN4QixZQUFZLEVBQUUsSUFBSSxDQUFDLE1BQU07UUFDekIsSUFBSTtRQUNKLE1BQU07S0FDUCxDQUFDLENBQUM7SUFFSCxNQUFNLElBQUksR0FBZ0M7UUFDeEMsQ0FBQyxtQkFBbUIsRUFBRSxTQUFTLENBQUM7UUFDaEMsQ0FBQyx3QkFBd0IsRUFBRSxTQUFTLENBQUM7UUFDckMsQ0FBQywwQkFBMEIsRUFBRSxXQUFXLENBQUM7UUFDekMsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLENBQUM7UUFDL0IsQ0FBQyxrQkFBa0IsRUFBRSxhQUFhLENBQUM7UUFDbkMsQ0FBQyxpQkFBaUIsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDO0tBQ3RDLENBQUM7SUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBRTNFLE1BQU0sT0FBTyxHQUFHLEdBQUcsRUFBRTtRQUNuQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQzlFLENBQUMsQ0FBQztJQUVGLE1BQU0sV0FBVyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckUsV0FBVyxFQUFFLENBQUM7SUFFZCxPQUFPO1FBQ0wsSUFBSTtRQUNKLElBQUk7UUFDSixFQUFFO1FBQ0YsT0FBTztRQUNQLE1BQU0sQ0FBQyxDQUFNO1lBQ1gsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFDWCxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLDZDQUE2QztZQUM3QyxJQUFJLENBQUMsS0FBSyxZQUFZO2dCQUFFLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUMvRSxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVTtRQUM1QixJQUFJO1FBQ0osTUFBTTtRQUNOLElBQUk7UUFDSixLQUFLO1FBQ0wsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO1FBQ25CLFVBQVUsQ0FBQyxDQUFVO1lBQ25CLEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsV0FBVyxFQUFFLENBQUM7WUFDZCxJQUFJLENBQUMsQ0FBQztnQkFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7O2dCQUNqQyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqQyxNQUFNLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFDRCxNQUFNO1FBQ04sUUFBUTtRQUNSLE9BQU87S0FDUixDQUFDO0FBQ0osQ0FBQztBQTdKRCw0QkE2SkM7QUFBQSxDQUFDOzs7OztBQ3JLRix1Q0FBbUM7QUFHbkMsK0JBQThCO0FBQzlCLHFDQUFxQztBQUNyQyxxQ0FBc0M7QUFDdEMsNkNBQTJEO0FBQzNELGlDQUFrQztBQUNsQywrQkFBNEI7QUFFNUIsTUFBTSxZQUFZLEdBQUcsbUJBQW1CLENBQUM7QUFFekMsbUJBQXdCLElBQVU7SUFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTztRQUFFLE9BQU8sRUFBRSxDQUFDO0lBQ2hDLE1BQU0sUUFBUSxHQUFHLENBQUMsS0FBWSxFQUFFLEVBQUU7UUFDaEMsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQWtCLENBQUE7UUFDbkMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzlCLE1BQU0sVUFBVSxHQUFHLENBQUMsRUFBRSxDQUFDLFNBQVMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxHQUFHLENBQUMsRUFBRSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUMsWUFBWSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RyxJQUFJLFVBQVUsRUFBRTtnQkFDZCxFQUFFLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztnQkFDdEIsVUFBVSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxHQUFHLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQTthQUNuRDtTQUNGO0lBQ0gsQ0FBQyxFQUNELEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDeEIsTUFBTSxNQUFNLEdBQUc7UUFDYixZQUFDLENBQUMsNEJBQTRCLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDckQsS0FBSyxFQUFFO2dCQUNMLElBQUksRUFBRSxLQUFLO2dCQUNYLFdBQVcsRUFBRSxRQUFRO2dCQUNyQixhQUFhLEVBQUUsS0FBSzthQUNyQjtZQUNELElBQUksRUFBRTtnQkFDSixNQUFNLENBQUMsS0FBSztvQkFDVixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQWtCLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQVEsRUFBRSxFQUFFO3dCQUN6RSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFHLENBQUMsQ0FBQyxNQUFzQixDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO29CQUN6RixDQUFDLENBQUMsQ0FBQztvQkFDSCxJQUFJLEdBQUc7d0JBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBUSxFQUFFLEVBQUU7NEJBQzVDLEdBQUcsQ0FBQyxJQUFJLENBQUcsQ0FBQyxDQUFDLE1BQXNCLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUM5RixDQUFDLENBQUMsQ0FBQzs7d0JBQ0UsR0FBRyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBUSxFQUFFLEVBQUUsQ0FDekMsTUFBTSxDQUFDLElBQUksRUFBRyxDQUFDLENBQUMsTUFBc0IsQ0FBQyxVQUF5QixDQUFDLENBQ2xFLENBQUM7b0JBQ0YsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNsQixDQUFDO2dCQUNELFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7YUFDekM7U0FDRixFQUFFLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDekQsV0FBVyxDQUFDLElBQUksQ0FBQztLQUNsQixDQUFDO0lBQ0YsTUFBTSxPQUFPLEdBQUcsbUJBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDeEMsSUFBSSxPQUFPO1FBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUNqQyxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBekNELDRCQXlDQztBQUVELFNBQVMsV0FBVyxDQUFDLElBQVU7SUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUztRQUFFLE9BQU87SUFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVU7UUFDeEUsT0FBTyxZQUFDLENBQUMsa0JBQWtCLEVBQUU7WUFDM0IsS0FBSyxFQUFFO2dCQUNMLFdBQVcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQztnQkFDdEMsUUFBUSxFQUFFLElBQUk7YUFDZjtTQUNGLENBQUMsQ0FBQztJQUNMLElBQUksV0FBbUIsQ0FBQztJQUN4QixJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTztRQUFFLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FDaEUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUs7UUFBRSxXQUFXLEdBQUcsTUFBTSxDQUFDOztRQUMxQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUM1RCxPQUFPLFlBQUMsQ0FBQyxrQkFBa0IsRUFBRTtRQUMzQixLQUFLLEVBQUU7WUFDTCxXQUFXO1lBQ1gsWUFBWSxFQUFFLEtBQUs7WUFDbkIsU0FBUyxFQUFFLEdBQUc7WUFDZCxRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVM7U0FDaEQ7UUFDRCxJQUFJLEVBQUU7WUFDSixNQUFNLENBQUMsS0FBSztnQkFDVixVQUFVLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxHQUFrQixDQUFDLENBQUM7WUFDN0MsQ0FBQztTQUNGO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELElBQUksYUFBNEIsQ0FBQztBQUVqQyxNQUFNLFVBQVUsR0FBRyxDQUFDLElBQVUsRUFBRSxNQUFtQixFQUFFLEVBQUU7SUFDckQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFDaEMsQ0FBQyxDQUFnQixFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ3BDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUEwQixFQUNyQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFDZCxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDekIsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUUsRUFBRTtZQUNsQyxJQUFJLEdBQUcsS0FBSyxFQUFFO2dCQUFFLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO2lCQUM3QztnQkFDSCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNqQixJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztvQkFBRSxLQUFLLENBQUMsMkNBQTJDLENBQUMsQ0FBQzs7b0JBQy9FLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3BCLEVBQUUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO2dCQUNkLElBQUksQ0FBQyxHQUFHO29CQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzFDO1NBQ0Y7YUFDSTtZQUNILEVBQUUsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDbEMsSUFBSSxDQUFDLEdBQUc7Z0JBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7U0FDckU7SUFDSCxDQUFDLENBQUMsQ0FDSCxDQUFDO0lBRUYsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRTtRQUM5QixNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBRzFELG1DQUFtQztJQUNuQyw4QkFBOEI7SUFFOUIsTUFBTSxXQUFXLEdBQUcsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFaEQsSUFBSSxhQUFhO1FBQUUsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUM3QyxRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUUsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FDekUsQ0FBQztJQUVGLGFBQWEsR0FBRyxDQUFDLENBQWEsRUFBRSxFQUFFO1FBQ2hDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQztZQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN0RSxDQUFDLENBQUM7SUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRSxDQUNwQixXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQzFCLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLGFBQWEsRUFDakQsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUMsQ0FDL0IsQ0FBQyxDQUFDO0lBRVAsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FDbkIsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUMxQixRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUUsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FDekUsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLFNBQVMsU0FBUyxDQUFDLEVBQVEsRUFBRSxFQUFRO0lBQ25DLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN2QyxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsSUFBVTtJQUM3QixJQUFJLElBQVUsRUFBRSxFQUFFLEdBQWdCLEVBQUUsQ0FBQztJQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1QsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDakMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQzdELENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEIsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNkLENBQUMsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsVUFBbUI7SUFDckMsT0FBTyxDQUFDLFFBQWUsRUFBRSxLQUFZLEVBQUUsRUFBRTtRQUN2QyxJQUFLLEtBQUssQ0FBQyxJQUFrQixDQUFDLFdBQVcsS0FBTSxRQUFRLENBQUMsSUFBa0IsQ0FBQyxXQUFXLEVBQUU7WUFDckYsS0FBSyxDQUFDLEdBQW1CLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUUsS0FBSyxDQUFDLElBQWtCLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1NBQzNHO0lBQ0gsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLENBQVMsRUFBRSxVQUFtQjtJQUNoRCxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDN0IsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sWUFBQyxDQUFDLEdBQUcsRUFBRTtZQUNaLFdBQVcsRUFBRSxDQUFDO1lBQ2QsSUFBSSxFQUFFO2dCQUNKLE1BQU0sRUFBRSxJQUFJO2dCQUNaLE1BQU0sRUFBRSxJQUFJO2FBQ2I7U0FDRixDQUFDLENBQUM7S0FDSjtJQUNELE9BQU8sWUFBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNuQixDQUFDO0FBRUQsU0FBUyxNQUFNLENBQUMsSUFBVSxFQUFFLElBQWlCO0lBQzNDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFvQixDQUFDO0lBQ25FLE1BQU0sSUFBSSxHQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFpQixDQUFDLFNBQVMsQ0FBQztJQUNoRSxJQUFJLEtBQUssSUFBSSxPQUFPLENBQUMsV0FBVyxJQUFJLGtCQUFrQixDQUFDO1FBQUUsVUFBSSxDQUMzRCxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFDcEIsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3hCLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLElBQVUsRUFBRSxJQUFVO0lBRXhDLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFMUQsSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLFNBQVM7UUFBRSxPQUFPLFlBQUMsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFMUQsSUFBSSxJQUFJLENBQUMsQ0FBQztRQUFFLE9BQU8sWUFBQyxDQUFDLElBQUksRUFBRTtZQUN6QixZQUFDLENBQUMsWUFBWSxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUNuQyxRQUFRO1NBQ1QsQ0FBQyxDQUFDO0lBRUgsTUFBTSxRQUFRLEdBQUcsZ0JBQUssQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxlQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBRXBFLE9BQU8sWUFBQyxDQUFDLElBQUksRUFBRSxFQUNkLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx1QkFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUNyQyxRQUFRO1FBQ1IsUUFBUTtLQUNULENBQUMsQ0FBQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsUUFBUSxFQUFFO1lBQ3JFLEtBQUssRUFBRTtnQkFDTCxXQUFXLEVBQUUsR0FBRztnQkFDaEIsS0FBSyxFQUFFLFFBQVE7YUFDaEI7U0FDRixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDVCxRQUFRO1FBQ1IsUUFBUTtLQUNULENBQUMsQ0FBQztBQUNMLENBQUM7Ozs7O0FDMU5ELFNBQWdCLE9BQU8sQ0FBQyxJQUFZLEVBQUUsVUFBbUI7SUFDdkQsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDaEQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pDLE1BQU0sS0FBSyxHQUFHLFVBQVUsSUFBSSxNQUFNLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUMzRSxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFMRCwwQkFLQztBQUVELE1BQU0sbUJBQW1CLEdBQUcsU0FBUyxDQUFDO0FBQ3RDLE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDO0FBRW5DLFNBQWdCLGNBQWMsQ0FBQyxHQUFXO0lBQ3hDLE9BQU8sbUJBQW1CLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLG1CQUFtQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN4RSxDQUFDO0FBRkQsd0NBRUM7QUFFRCxNQUFNLFdBQVcsR0FBRywyRUFBMkUsQ0FBQztBQUVoRyxTQUFTLFdBQVcsQ0FBQyxHQUFXLEVBQUUsTUFBYztJQUM5QyxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQUUsT0FBTyxHQUFHLENBQUM7SUFDdkMsTUFBTSxPQUFPLEdBQUcsTUFBTSxLQUFLLGNBQWMsQ0FBQyxDQUFDLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQ25FLE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLE9BQU8sMENBQTBDLEdBQUcsT0FBTyxHQUFHLElBQUksR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3ZGLENBQUM7QUFFRCxNQUFNLFdBQVcsR0FBRywyQkFBMkIsQ0FBQztBQUNoRCxNQUFNLGVBQWUsR0FBRyxjQUFjLENBQUM7QUFFdkMsU0FBUyxlQUFlLENBQUMsSUFBWSxFQUFFLE1BQWMsRUFBRSxJQUFZO0lBQ2pFLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNqRSxPQUFPLE1BQU0sR0FBRyxjQUFjLEdBQUcsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsTUFBTSxDQUFDO0FBQ2hFLENBQUM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxJQUFZO0lBQzVCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsZUFBZSxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN0RixDQUFDO0FBRUQsTUFBTSxXQUFXLEdBQUcsdUdBQXVHLENBQUM7QUFDNUgsU0FBUyxZQUFZLENBQUMsS0FBYSxFQUFFLElBQVksRUFBRSxJQUFZO0lBQzdELElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsR0FBRztRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQ3pDLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqRCxPQUFPLDRCQUE0QixHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLE1BQU0sQ0FBQztBQUNwRSxDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsSUFBWTtJQUM1QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ2pELENBQUM7Ozs7O0FDNUNELHVDQUFnQztBQUdoQyxpQ0FBOEI7QUFDOUIsaUNBQTBCO0FBSTFCLGtEQUEyQztBQUMzQyw0REFBcUQ7QUFJckQsU0FBd0IsV0FBVyxDQUFDLE9BQWdCLEVBQUUsSUFBYztJQUdsRSxNQUFNLEtBQUssR0FBRyxlQUFJLENBQUMsQ0FBQyxlQUFLLEVBQUUsb0JBQVUsQ0FBQyxDQUFDLENBQUM7SUFFeEMsSUFBSSxLQUFZLEVBQUUsSUFBVSxDQUFBO0lBRTVCLFNBQVMsTUFBTTtRQUNiLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFFLGNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRCxJQUFJLEdBQUcsY0FBUSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUU5QixNQUFNLFNBQVMsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsT0FBTyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDdkIsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFFbEMsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBbEJELDhCQWtCQztBQUFBLENBQUM7Ozs7O0FDL0JGLHVDQUE0QjtBQUc1QiwrQkFBbUM7QUFDbkMsaUNBQWlEO0FBRWpELFNBQWdCLGNBQWMsQ0FBQyxJQUFvQjtJQUVqRCxJQUFJLElBQWdDLENBQUM7SUFDckMsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDO0lBRXBCLE1BQU0sSUFBSSxHQUFHLENBQUMsUUFBZ0IsRUFBRSxFQUFFO1FBQ2hDLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUU7WUFDNUIsT0FBTyxHQUFHLElBQUksQ0FBQztZQUNmLGlCQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUM3QixJQUFJLEdBQUcsQ0FBQyxDQUFDO2dCQUNULE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQ2hCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDLENBQUMsQ0FBQztTQUNKO2FBQU07WUFDTCxJQUFJLEdBQUc7Z0JBQ0wsRUFBRSxFQUFFLFFBQVE7Z0JBQ1osUUFBUTthQUNULENBQUM7U0FDSDtRQUNELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUM7SUFFRixNQUFNLEtBQUssR0FBRyxHQUFHLEVBQUU7UUFDakIsSUFBSSxHQUFHLFNBQVMsQ0FBQztRQUNqQixPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUM7SUFFRixPQUFPO1FBQ0wsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQU87UUFDdEIsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUk7UUFDaEIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1FBQ3JCLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVztRQUNuQyxJQUFJO1FBQ0osS0FBSztRQUNMLE9BQU8sQ0FBQyxNQUF3QjtZQUM5QixJQUFJLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUU7Z0JBQzNELE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDZixNQUFNLEVBQUUsTUFBTSxDQUFDLEdBQUc7YUFDbkIsQ0FBQyxDQUFDO1lBQ0gsS0FBSyxFQUFFLENBQUM7WUFDUixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQztRQUNELFNBQVM7WUFDUCxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ2YsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDMUYsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQWpERCx3Q0FpREM7QUFFRCxTQUFnQixVQUFVLENBQUMsUUFBZ0I7SUFDekMsT0FBTyxZQUFDLENBQUMsT0FBTyxFQUFFO1FBQ2hCLEtBQUssRUFBRTtZQUNMLFdBQVcsRUFBRSxHQUFHO1lBQ2hCLGVBQWUsRUFBRSxRQUFRO1lBQ3pCLEtBQUssRUFBRSxZQUFZO1NBQ3BCO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQVJELGdDQVFDO0FBRUQsU0FBZ0IsY0FBYyxDQUFDLElBQXFCO0lBQ2xELElBQUksQ0FBQyxJQUFJO1FBQUUsT0FBTztJQUNsQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFBRSxPQUFPLENBQUMsWUFBQyxDQUFDLGFBQWEsRUFBRSxjQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDekQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pCLElBQUksQ0FBQyxJQUFJO1FBQUUsT0FBTztJQUNsQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFFakMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGlCQUFpQixFQUFFO1FBQ2hELE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsUUFBUTtRQUN2RCxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVM7UUFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQ2xDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUztLQUNyQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxZQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ25DLFlBQUMsQ0FBQyxHQUFHLEVBQUU7WUFDTCxLQUFLLEVBQUU7Z0JBQ0wsSUFBSSxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU07YUFDckM7U0FDRixFQUFFLFNBQVMsQ0FBQztLQUNkLENBQUMsQ0FBQyxNQUFNLENBQ1AsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDaEIsWUFBQyxDQUFDLEdBQUcsRUFBRTtZQUNMLEtBQUssRUFBRTtnQkFDTCxJQUFJLEVBQUUsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsZ0JBQWdCO2FBQ2pEO1NBQ0YsRUFBRSxNQUFNLENBQUM7S0FDWCxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFFckIsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLG1CQUFtQixFQUFFO1FBQ3JELFlBQUMsQ0FBQyxRQUFRLEVBQUUsd0JBQXdCLENBQUM7UUFDckMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN0QixPQUFPLFlBQUMsQ0FBQyxRQUFRLEVBQUU7Z0JBQ2pCLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUU7Z0JBQzNCLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDYixDQUFDLENBQUM7UUFDRixHQUFHLENBQ0QsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLGVBQWUsRUFBRTtnQkFDMUQsS0FBSztnQkFDTCxZQUFDLENBQUMsdUNBQXVDLEVBQUU7b0JBQ3pDLElBQUksRUFBRSxXQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7aUJBQ3BDLEVBQUUsV0FBVyxDQUFDO2FBQ2hCLENBQUMsQ0FBQyxDQUFDO0tBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsbUJBQW1CLEVBQUU7UUFDMUIsWUFBQyxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUM7UUFDekIsWUFBQyxDQUFDLFFBQVEsRUFBRTtZQUNWLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUU7WUFDM0IsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDekQsRUFBRSxvQkFBb0IsQ0FBQztLQUN6QixDQUFDLENBQUM7SUFFSCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFDLENBQUMsbUJBQW1CLEVBQUU7UUFDcEQsWUFBQyxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQztRQUM5QixZQUFDLENBQUMsT0FBTyxFQUFFLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDMUIsSUFBSSxFQUFFO2dCQUNKLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7YUFDM0Q7U0FDRixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVMsQ0FBQztZQUM1QixPQUFPLFlBQUMsQ0FBQyxJQUFJLEVBQUU7Z0JBQ2IsWUFBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDO2dCQUN4QixZQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBQ2xCLFlBQUMsQ0FBQyxJQUFJLEVBQUUsWUFBQyxDQUFDLGNBQWMsRUFBRTtvQkFDeEIsS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUU7aUJBQzVCLENBQUMsQ0FBQzthQUNKLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDTCxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUVmLE9BQU87UUFDTCxZQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUU7WUFDdEMsWUFBQyxDQUFDLFdBQVcsRUFBRTtnQkFDYixLQUFLLEVBQUUsRUFBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO2FBQzNCLEVBQUUsQ0FBQyxlQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDN0IsWUFBQyxDQUFDLEdBQUcsRUFBRTtnQkFDTCxLQUFLLEVBQUUsRUFBQyxXQUFXLEVBQUUsR0FBRyxFQUFDO2dCQUN6QixJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDO2FBQ2hDLENBQUM7U0FDSCxDQUFDO1FBQ0YsWUFBQyxDQUFDLCtCQUErQixFQUFFO1lBQ2pDLEtBQUs7WUFDTCxPQUFPO1lBQ1AsT0FBTztTQUNSLENBQUM7S0FDSCxDQUFDO0FBQ04sQ0FBQztBQW5GRCx3Q0FtRkM7QUFBQSxDQUFDOzs7OztBQ3RKRix1Q0FBNEI7QUFHNUIsNkJBQTRCO0FBQzVCLGlDQUFnQztBQUVoQyxTQUFnQixRQUFRLENBQUMsSUFBYztJQUNyQyxJQUFJLElBQVksQ0FBQTtJQUNoQixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7UUFDMUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNULE9BQU87UUFDTCxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7UUFDWCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7UUFDakIsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUk7UUFDaEIsS0FBSztZQUNILEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDNUIsSUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ2YsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFBO1lBQ2YsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUM7WUFDSixJQUFJLEdBQUcsQ0FBQyxDQUFDO1lBQ1QsTUFBTSxFQUFFLENBQUE7UUFDVixDQUFDO0tBQ0YsQ0FBQTtBQUNILENBQUM7QUFwQkQsNEJBb0JDO0FBRUQsU0FBZ0IsUUFBUSxDQUFDLElBQWM7SUFDckMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pCLElBQUksSUFBSSxJQUFJLFNBQVM7UUFBRSxPQUFPLFlBQUMsQ0FBQyxhQUFhLEVBQUU7WUFDN0MsSUFBSSxFQUFFO2dCQUNKLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSzthQUNuQjtTQUNGLEVBQUUsQ0FBQyxjQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDZixPQUFPLFlBQUMsQ0FBQyxVQUFVLEVBQUU7UUFDbkIsS0FBSyxFQUFFO1lBQ0wsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQUM7U0FDaEQ7UUFDRCxJQUFJLEVBQUU7WUFDSixNQUFNLENBQUMsS0FBSztnQkFDVixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQWtCLENBQUMsQ0FBQztnQkFDeEMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO29CQUMxQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFBO2dCQUN0QixDQUFDLENBQUMsQ0FBQTtZQUNKLENBQUM7U0FDRjtLQUNGLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFwQkQsNEJBb0JDOzs7OztBQ2hERCx1Q0FBNEI7QUFFNUIsaUNBQTZCO0FBOEI3QixNQUFNLE1BQU0sR0FBaUI7SUFDM0IsS0FBSyxFQUFFO1FBQ0wsVUFBVSxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsYUFBYTtLQUMxRCxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7SUFDZCxHQUFHLEVBQUU7UUFDSCxjQUFjLEVBQUUsZ0JBQWdCLEVBQUUsY0FBYyxFQUFFLHFCQUFxQixFQUFFLFVBQVU7S0FDcEYsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO0NBQ2YsQ0FBQTtBQUVELFNBQWdCLFVBQVUsQ0FBQyxJQUFnQjtJQUV6QyxJQUFJLEtBQUssR0FBdUIsSUFBSSxDQUFDLFlBQVksQ0FBQztJQUVsRCxJQUFJLElBQUksR0FBYSxFQUFFLENBQUM7SUFFeEIsT0FBTztRQUNMLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLO1FBQ2xCLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJO1FBQ2hCLFFBQVEsQ0FBQyxDQUFxQjtZQUM1QixJQUFJLENBQUMsS0FBSyxLQUFLLEVBQUU7Z0JBQ2YsS0FBSyxHQUFHLENBQUMsQ0FBQztnQkFDVixJQUFJLENBQUMsQ0FBQztvQkFBRSxJQUFJLEdBQUcsRUFBRSxDQUFDO2dCQUNsQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDZjtRQUNILENBQUM7UUFDRCxJQUFJLENBQUMsTUFBTTtZQUNULElBQUksQ0FBQyxLQUFLO2dCQUFFLE9BQU87WUFDbkIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNCLElBQUksQ0FBQyxJQUFJO2dCQUFFLE9BQU87WUFDbEIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7Z0JBQUUsT0FBTztZQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN4QixDQUFDO0tBQ0YsQ0FBQTtBQUNILENBQUM7QUF6QkQsZ0NBeUJDO0FBRUQsU0FBZ0IsVUFBVSxDQUFDLElBQWdCO0lBQ3pDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUMzQixJQUFJLENBQUMsS0FBSztRQUFFLE9BQU87SUFDbkIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzNCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN6QixPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBUyxFQUFFLEVBQUU7UUFDaEYsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEMsT0FBTyxZQUFDLENBQUMsTUFBTSxFQUFFO1lBQ2YsS0FBSyxFQUFFO2dCQUNMLFFBQVE7YUFDVDtZQUNELEtBQUssRUFBRTtnQkFDTCxLQUFLLEVBQUUsQ0FBQyxDQUFDLElBQUk7Z0JBQ2IsUUFBUTthQUNUO1lBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBQztTQUN6RCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNaLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNsQixDQUFDO0FBbEJELGdDQWtCQztBQUVELFNBQVMsT0FBTyxDQUFDLENBQVM7SUFDeEIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMzQixPQUFPO1FBQ0wsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDYixJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztLQUNmLENBQUE7QUFDSCxDQUFDOzs7OztBQzlGRCxTQUFnQixJQUFJLENBQUMsR0FBVztJQUM5QixPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxDQUFDO0FBQ3hFLENBQUM7QUFGRCxvQkFFQztBQUNELFNBQWdCLFVBQVUsQ0FBQyxHQUFXO0lBQ3BDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUZELGdDQUVDO0FBQ0QsU0FBZ0IsTUFBTSxDQUFDLEdBQVc7SUFDaEMsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDaEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7UUFDakUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUM5QztBQUNILENBQUM7QUFMRCx3QkFLQztBQUVELE1BQU0sU0FBUyxHQUFHLElBQUksTUFBTSxDQUFDO0lBQzNCLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsYUFBYTtJQUNiLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLGFBQWE7SUFDYixTQUFTO0lBQ1QsV0FBVztJQUNYLFFBQVE7SUFDUixTQUFTO0lBQ1QsV0FBVztJQUNYLE9BQU87SUFDUCxVQUFVO0lBQ1YsYUFBYTtJQUNiLFVBQVU7SUFDVixhQUFhO0lBQ2IsY0FBYztJQUNkLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsU0FBUztJQUNULFNBQVM7SUFDVCxrQkFBa0I7Q0FDbkIsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7SUFDVixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekQsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFFZCxTQUFTLE9BQU8sQ0FBQyxHQUFXO0lBQzFCLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVELE1BQU0sWUFBWSxHQUFHLHNCQUFzQixDQUFBOzs7OztBQzdDM0MsdUNBQTRCO0FBRzVCLFNBQWdCLFFBQVEsQ0FBQyxDQUFTLEVBQUUsS0FBYztJQUNoRCxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNqQyxPQUFPLFlBQUMsQ0FBQyxHQUFHLEVBQUU7UUFDWixxQ0FBcUM7UUFDckMsS0FBSyxFQUFFO1lBQ0wsV0FBVyxFQUFFLElBQUk7WUFDakIsSUFBSSxFQUFFLElBQUk7U0FDWDtRQUNELEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxLQUFLLEdBQUcsQ0FBQztTQUNoQjtLQUNGLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNULFlBQUMsQ0FDQyxZQUFZLEVBQ1osS0FBSyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUNwRCxLQUFLLENBQUMsRUFBRSxLQUFLO0tBQ2hCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNmLENBQUM7QUFqQkQsNEJBaUJDO0FBRUQsU0FBZ0IsT0FBTztJQUNyQixPQUFPLFlBQUMsQ0FBQyxhQUFhLEVBQUU7UUFDdEIsWUFBQyxDQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFO1lBQzVDLFlBQUMsQ0FBQyxRQUFRLEVBQUU7Z0JBQ1YsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRTthQUMvQyxDQUFDO1NBQUMsQ0FBQztLQUFDLENBQUMsQ0FBQztBQUNiLENBQUM7QUFORCwwQkFNQztBQUVELFNBQWdCLElBQUksQ0FBQyxTQUFpQixFQUFFLENBQXFCO0lBQzNELE9BQU87UUFDTCxNQUFNLEVBQUUsQ0FBQyxLQUFZLEVBQUUsRUFBRTtZQUN0QixLQUFLLENBQUMsR0FBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDNUQsQ0FBQztLQUNGLENBQUM7QUFDSixDQUFDO0FBTkQsb0JBTUM7Ozs7O0FDcENELHVDQUE0QjtBQUc1Qiw2Q0FBeUM7QUFDekMsaUNBQWlDO0FBQ2pDLDZDQUE2QztBQUM3QyxpQ0FBNkI7QUFFN0IsbUJBQXdCLElBQVU7SUFFaEMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBRTlCLE9BQU8sWUFBQyxDQUFDLGVBQWUsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLEVBQUU7UUFDN0UsS0FBSyxFQUFFO1lBQ0wsV0FBVyxFQUFFLENBQUMsQ0FBQyxHQUFHO1NBQ25CO1FBQ0QsSUFBSSxFQUFFO1lBQ0osT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1NBQ3RCO0tBQ0YsRUFBRSwyQkFBYyxDQUFDLEdBQUcsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO0FBQzdDLENBQUM7QUFaRCw0QkFZQztBQUVELFNBQVMsY0FBYyxDQUFDLElBQVU7SUFDaEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN4QixJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRTtRQUFFLE9BQU87SUFDekIsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxZQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBQyxDQUFDLHVDQUF1QyxFQUFDO1FBQ25GLEtBQUssRUFBRTtZQUNMLFdBQVcsRUFBRSxHQUFHO1lBQ2hCLEtBQUssRUFBRSxZQUFZO1NBQ3BCO1FBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO2dCQUNiLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO2dCQUNoQixNQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO2dCQUMxQixFQUFFLENBQUMsVUFBVSxDQUFDLGtDQUFrQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtvQkFDMUQsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTt3QkFDckQsQ0FBQyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUyxDQUFDLFFBQVEsQ0FBQzs0QkFDckMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTs0QkFDckIsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO3lCQUNwQixDQUFDLENBQUM7d0JBQ0gsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUNoQixDQUFDLENBQUMsQ0FBQztnQkFDTCxDQUFDLENBQUMsQ0FBQzthQUNKO1FBQ0gsQ0FBQyxDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLElBQVU7SUFDNUIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUM7SUFDM0IsT0FBTztRQUNMLFlBQUMsQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtZQUM3QyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDcEQsY0FBYyxDQUFDLElBQUksQ0FBQztTQUNyQixDQUFDO1FBQ0YsWUFBQyxDQUFDLHFCQUFxQixHQUFHLE1BQU0sRUFDOUIsQ0FBQyxNQUFNLEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ3pELElBQUksQ0FBQyxNQUFNLElBQUksTUFBTSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFjLENBQUMsSUFBSSxDQUFDLENBQzVGLENBQUM7S0FDTCxDQUFBO0FBQ0gsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLElBQVUsRUFBRSxHQUFRLEVBQUUsTUFBVztJQUNsRCxPQUFPLFlBQUMsQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLEVBQUU7UUFDaEMsS0FBSyxFQUFFLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxLQUFLLE1BQU0sRUFBRTtRQUM5QyxJQUFJLEVBQUUsV0FBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQzVDLEVBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLENBQUM7QUFFRCxTQUFTLE9BQU8sQ0FBQyxJQUFVLEVBQUUsR0FBUTtJQUNuQyxJQUFJLEdBQUcsS0FBSyxZQUFZO1FBQUUsT0FBTztZQUMvQixZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFlBQUMsQ0FBQyxPQUFPLEVBQUU7Z0JBQy9DLEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsVUFBVTtvQkFDaEIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQztvQkFDeEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTztpQkFDekI7Z0JBQ0QsSUFBSSxFQUFFLFdBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFRLEVBQUUsRUFBRTtvQkFDaEMsSUFBSSxDQUFDLFVBQVUsQ0FBRSxDQUFDLENBQUMsTUFBMkIsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsQ0FBQyxDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7SUFDRixJQUFJLEdBQUcsS0FBSyxNQUFNO1FBQUUsT0FBTyxDQUFDLFlBQUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxHQUFHLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRztRQUFFLE9BQU8sQ0FBQyxZQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDekYsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDOzs7OztBQ3RGRCxTQUFnQixXQUFXLENBQUMsUUFBZ0I7SUFDMUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxDQUFBO0FBQzVDLENBQUM7QUFGRCxrQ0FFQztBQUVELFNBQWdCLElBQUksQ0FBQyxRQUFnQixFQUFFLFFBQWdCLEVBQUUsSUFBWTtJQUNuRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzlELENBQUM7QUFGRCxvQkFFQztBQUVELFNBQWdCLE9BQU8sQ0FBQyxFQUFVO0lBQ2hDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1QixDQUFDO0FBRkQsMEJBRUM7QUFFRCxTQUFnQixPQUFPLENBQUMsRUFBVSxFQUFFLElBQVk7SUFDOUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7QUFDdEMsQ0FBQztBQUZELDBCQUVDO0FBRUQsU0FBUyxPQUFPLENBQUMsRUFBVTtJQUN6QixPQUFPLElBQUksRUFBRSxPQUFPLENBQUM7QUFDdkIsQ0FBQzs7Ozs7QUNsQkQsbUNBQTRCO0FBcURuQixnQkFyREYsZUFBSyxDQXFERTtBQW5ERCxRQUFBLFVBQVUsR0FBUSwwREFBMEQsQ0FBQztBQUUxRixTQUFnQixXQUFXLENBQUMsR0FBUTtJQUNsQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUM3QyxDQUFDO0FBRkQsa0NBRUM7QUFFRCxTQUFnQixZQUFZLENBQUMsR0FBUTtJQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFRLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFRLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRSxDQUFDO0FBRkQsb0NBRUM7QUFFRCxTQUFnQixVQUFVLENBQUMsQ0FBUztJQUNsQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pELE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBSEQsZ0NBR0M7QUFNRCxTQUFnQixTQUFTLENBQUMsS0FBYztJQUN0QyxJQUFJLE9BQU8sS0FBSyxLQUFLLFdBQVc7UUFBRSxPQUFPLElBQUksQ0FBQztJQUM5QyxNQUFNLEtBQUssR0FBVSxFQUFFLENBQUM7SUFDeEIsSUFBSSxLQUFLO1FBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDekMsS0FBSyxDQUFDLGVBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGVBQUssQ0FBQyxDQUFDLENBQVEsQ0FBQyxDQUFBO1FBQzNFLENBQUMsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBUEQsOEJBT0M7QUFFRCxTQUFnQixTQUFTLENBQUMsSUFBb0I7SUFDNUMsSUFBSSxPQUFPLElBQUksS0FBSyxXQUFXLElBQUksSUFBSSxLQUFLLElBQUk7UUFBRSxPQUFPLElBQUksQ0FBQztJQUM5RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25DLENBQUM7QUFIRCw4QkFHQztBQUVZLFFBQUEsU0FBUyxHQUFHO0lBQ3ZCLElBQUksRUFBRSxHQUFHO0lBQ1QsTUFBTSxFQUFFLEdBQUc7SUFDWCxNQUFNLEVBQUUsR0FBRztJQUNYLElBQUksRUFBRSxHQUFHO0lBQ1QsS0FBSyxFQUFFLEdBQUc7SUFDVixJQUFJLEVBQUUsR0FBRztDQUNWLENBQUM7QUFFVyxRQUFBLFNBQVMsR0FBRztJQUN2QixDQUFDLEVBQUUsTUFBTTtJQUNULENBQUMsRUFBRSxRQUFRO0lBQ1gsQ0FBQyxFQUFFLFFBQVE7SUFDWCxDQUFDLEVBQUUsTUFBTTtJQUNULENBQUMsRUFBRSxPQUFPO0lBQ1YsQ0FBQyxFQUFFLE1BQU07Q0FDVixDQUFDO0FBSUYsU0FBZ0IsY0FBYyxDQUFDLE9BQW1CO0lBQ2hELFFBQVEsT0FBTyxFQUFFO1FBQ2YsS0FBSyxVQUFVLENBQUM7UUFDaEIsS0FBSyxVQUFVLENBQUM7UUFDaEIsS0FBSyxjQUFjO1lBQ2pCLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLEtBQUssWUFBWTtZQUNmLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLEtBQUssZUFBZTtZQUNsQixPQUFPLGVBQWUsQ0FBQztRQUN6QixLQUFLLGFBQWE7WUFDaEIsT0FBTyxhQUFhLENBQUM7UUFDdkI7WUFDRSxPQUFPLE9BQU8sQ0FBQztLQUNsQjtBQUNILENBQUM7QUFmRCx3Q0FlQzs7Ozs7QUNsRUQsTUFBTSxLQUFLLEdBQVU7SUFDbkIsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7SUFDVCxHQUFHLEVBQUUsSUFBSTtJQUNULEdBQUcsRUFBRSxJQUFJO0lBQ1QsR0FBRyxFQUFFLElBQUk7Q0FDVixDQUFDO0FBRUYsa0JBQWUsS0FBSyxDQUFDOzs7OztBQ3ZFckIsU0FBZ0IsT0FBTyxDQUFJLENBQWdCO0lBQ3pDLE9BQU8sT0FBTyxDQUFDLEtBQUssV0FBVyxDQUFDO0FBQ2xDLENBQUM7QUFGRCwwQkFFQztBQUVELFNBQWdCLEtBQUssQ0FBQyxDQUFNO0lBQzFCLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7QUFDOUIsQ0FBQztBQUZELHNCQUVDO0FBT0QseUNBQXlDO0FBQ3pDLFNBQWdCLElBQUksQ0FBSSxZQUFlO0lBQ3JDLElBQUksS0FBSyxHQUFHLFlBQVksQ0FBQztJQUN6QixNQUFNLEdBQUcsR0FBRyxVQUFTLENBQWdCO1FBQ25DLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztZQUFFLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDMUIsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDLENBQUM7SUFDRixPQUFPLEdBQWMsQ0FBQztBQUN4QixDQUFDO0FBUEQsb0JBT0M7Ozs7O0FDckJELHlDQUFrQztBQUVsQyxTQUFnQixNQUFNLENBQUMsS0FBaUIsRUFBRSxhQUFxQixHQUFHO0lBRWhFLElBQUksT0FBMkIsQ0FBQztJQUVoQyxNQUFNLFFBQVEsR0FBRyxrQkFBUSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7UUFDekMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ3RCLEtBQUssRUFBRSxDQUFDO1lBQ1IsUUFBUSxFQUFFLENBQUM7UUFDYixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxRQUFRO1FBQ2YsT0FBTyxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNqQyxPQUFPLEdBQUcsVUFBVSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsUUFBUSxFQUFFLENBQUM7QUFDYixDQUFDO0FBakJELHdCQWlCQztBQUVELElBQUksbUJBQXVDLENBQUM7QUFFNUMsOERBQThEO0FBQzlELFNBQWdCLGtCQUFrQixDQUFDLFNBQXNCO0lBQ3ZELE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFnQixFQUNyRSxLQUFLLEdBQUcsU0FBUyxDQUFDLFdBQVcsQ0FBQztJQUNoQyxJQUFJLG1CQUFtQixJQUFJLEtBQUssRUFBRTtRQUNoQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7UUFDNUIsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNyQyxTQUFTLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBaUIsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDakYsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0tBQ25FO0FBQ0gsQ0FBQztBQVRELGdEQVNDO0FBRUQsSUFBSSxzQkFBc0IsR0FBRyxLQUFLLENBQUM7QUFFbkMsU0FBZ0IseUJBQXlCLENBQUMsQ0FBYTtJQUNyRCxJQUFJLENBQUMsc0JBQXNCLEVBQUU7UUFDM0Isc0JBQXNCLEdBQUcsSUFBSSxDQUFDO1FBQzlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDekQ7QUFDSCxDQUFDO0FBTEQsOERBS0M7QUFFRCxTQUFnQixtQkFBbUI7SUFDakMsb0RBQW9EO0lBQ3BELElBQUksTUFBTSxDQUFDLE1BQU07UUFBRSxPQUFPLEtBQUssQ0FBQztJQUVoQyxzQkFBc0I7SUFDdEIsTUFBTSxHQUFHLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzFDLENBQUM7QUFQRCxrREFPQzs7OztBQ25ERCxlQUFlO0FBQ2Y7Ozs7Ozs7R0FPRzs7QUFJVSxRQUFBLFNBQVMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztJQUVoRCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsY0FBYztRQUFFLE9BQU87SUFFMUMsSUFBSSxRQUFRLEdBQVcsR0FBRyxDQUFDO0lBQzNCLElBQUksV0FBVyxHQUFXLEVBQUUsQ0FBQztJQUU3QixpR0FBaUc7SUFDakcsSUFBSSxFQUFVLEVBQUUsRUFBVSxDQUFDO0lBRTNCLG9GQUFvRjtJQUNwRixJQUFJLEtBQUssR0FBRyxVQUFTLEVBQXFCO1FBQ3hDLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQ2QsRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7SUFDaEIsQ0FBQyxDQUFDO0lBRUYsb0JBQW9CO0lBQ3BCLHdGQUF3RjtJQUN4RixrRkFBa0Y7SUFDbEYscUZBQXFGO0lBQ3JGLDJFQUEyRTtJQUMzRSxJQUFJLEtBQUssR0FBVSxFQUFFLENBQUM7SUFFdEIsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUV0QixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUN0QyxPQUFPLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUczQyxnREFBZ0Q7UUFDaEQsTUFBTSxPQUFPLEdBQUc7WUFDZCx5RkFBeUY7WUFDekYsSUFBSyxJQUFJLENBQUMsSUFBSSxDQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBQyxFQUFFLENBQUMsR0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFDLEVBQUUsQ0FBQyxHQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBQyxFQUFFLENBQUMsQ0FBRSxHQUFHLFdBQVcsRUFBRztnQkFDMUYsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixPQUFPLEtBQUssQ0FBQyxTQUFTLENBQUM7Z0JBQ3ZCLHNGQUFzRjtnQkFDdEYsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7Z0JBQ3RCLE9BQU8sRUFBRSxDQUFDO2FBQ1g7aUJBQU07Z0JBQ0wsK0NBQStDO2dCQUMvQyxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztnQkFBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztnQkFDN0Isd0dBQXdHO2dCQUN4RyxLQUFLLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFFLENBQUM7YUFDbEQ7UUFDSCxDQUFDLENBQUM7UUFFRixtREFBbUQ7UUFDbkQsSUFBSSxXQUFXLEdBQUcsVUFBUyxFQUFxQjtZQUU5Qyw2QkFBNkI7WUFDN0IsSUFBSSxLQUFLLENBQUMsU0FBUyxFQUFFO2dCQUFFLEtBQUssQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUFFO1lBRXpFLHNFQUFzRTtZQUN0RSxJQUFJLFNBQVMsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQztZQUUxQyxzQ0FBc0M7WUFDdEMsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLFlBQVksRUFBRTtnQkFDM0IseUVBQXlFO2dCQUN6RSxJQUFJLEtBQUssQ0FBQyxRQUFRLElBQUssRUFBRSxDQUFDLGFBQTRCLENBQUMsT0FBTztvQkFBRSxPQUFPO2dCQUN2RSwrREFBK0Q7Z0JBQy9ELEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztnQkFBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7Z0JBQ3pDLHVEQUF1RDtnQkFDdkQsR0FBRyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDL0MsdUZBQXVGO2dCQUN2RixLQUFLLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFFLENBQUM7YUFDbEQ7aUJBQU0sRUFBRSxlQUFlO2dCQUN0QixtQ0FBbUM7Z0JBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUTtvQkFBRSxPQUFPO2dCQUM1QixtQ0FBbUM7Z0JBQ25DLEdBQUcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN6QiwwRkFBMEY7Z0JBQzFGLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQ1gsT0FBTyxFQUFFLENBQUM7YUFDWDtRQUNILENBQUMsQ0FBQztRQUVGLEdBQUcsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDbEUsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQzs7Ozs7QUNwRkgsU0FBd0IsWUFBWSxDQUFDLEdBQWdCLEVBQUUsSUFBWSxFQUFFLEdBQVcsRUFBRSxPQUFpQjtJQUVqRyxJQUFJLENBQUMsSUFBSTtRQUFFLE9BQU87SUFFbEIsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUMvQyxHQUFHLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUU5QixNQUFNLFdBQVcsR0FBRyxDQUFDLEtBQWlCLEVBQUUsRUFBRTtRQUV4QyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7UUFFdkIsTUFBTSxjQUFjLEdBQUcsS0FBSyxDQUFDLElBQUksS0FBSyxZQUFZLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO1FBQy9FLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxJQUFJLEtBQUssWUFBWSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUUxRSxNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFFLENBQUM7UUFDdkMsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3pGLElBQUksSUFBSSxHQUFHLFdBQVcsQ0FBQztRQUV2QixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7WUFDNUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGVBQWUsR0FBRyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbEUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRVIsTUFBTSxNQUFNLEdBQUcsQ0FBQyxJQUFnQixFQUFFLEVBQUU7WUFFbEMsTUFBTSxHQUFHLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBRSxDQUFDO1lBQ2pDLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUUxRCxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxXQUFXLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV4RSxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsU0FBUyxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQ3RELE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztZQUUvQyxRQUFRLEVBQUUsQ0FBQztRQUNiLENBQUMsQ0FBQztRQUVGLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUV4QyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRWxELFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1lBQzNDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDckQsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzdDLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3JCLENBQUMsQ0FBQztJQUVGLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDL0MsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUU5QyxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7UUFDYixNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNoRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWixNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQ3pDO0lBRUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2IsQ0FBQztBQXZERCwrQkF1REM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxDQUFhO0lBQ2xDLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLENBQUM7UUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDaEUsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckcsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLEVBQWU7SUFFN0IsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2pFLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUFFLE9BQU87SUFFMUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDekMsRUFBRSxDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQztJQUM1QixFQUFFLENBQUMsU0FBUyxHQUFHLGdDQUFnQyxDQUFDO0lBQ2hELEtBQUssTUFBTSxjQUFjLElBQUksQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLEVBQUU7UUFDeEQsRUFBRSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7WUFDdkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQixFQUFFLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNwQixDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztLQUNwQjtJQUVELFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzdDLENBQUM7Ozs7O0FDckZELHFDQUFtQztBQVluQyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUl2QyxTQUFnQixVQUFVLENBQUMsQ0FBUyxFQUFFLFlBQWlCO0lBQ3JELE1BQU0sRUFBRSxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFDMUIsTUFBTSxTQUFTLEdBQUcsWUFBWSxLQUFLLElBQUksSUFBSSxZQUFZLEtBQUssS0FBSyxDQUFDO0lBQ2xFLElBQUksS0FBVSxDQUFDO0lBQ2YsT0FBTyxVQUFTLENBQU07UUFDcEIsSUFBSSxnQkFBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUU7WUFDNUIsS0FBSyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDZixPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNwQjthQUFNLElBQUksQ0FBQyxnQkFBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzFCLEtBQUssR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3hCLElBQUksS0FBSyxLQUFLLElBQUk7Z0JBQUUsS0FBSyxHQUFHLFlBQVksR0FBRyxFQUFFLENBQUM7U0FDL0M7UUFDRCxPQUFPLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQzlDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFkRCxnQ0FjQztBQU9ELFNBQWdCLGNBQWMsQ0FBSSxHQUFXLEVBQUUsWUFBZTtJQUM1RCxPQUFPLFVBQVMsQ0FBSztRQUNuQixJQUFJLGdCQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDZCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEMsT0FBTyxDQUFDLENBQUM7U0FDVjtRQUNELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUUsQ0FBQyxDQUFDO1FBQzFDLE9BQU8sQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO0lBQzdDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFURCx3Q0FTQzs7Ozs7QUN6Q0QsU0FBZ0IsSUFBSSxDQUFJLE9BQW1CO0lBQ3pDLE1BQU0sSUFBSSxHQUFZO1FBQ3BCLElBQUksRUFBRSxTQUFTO1FBQ2YsT0FBTyxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDeEIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7WUFDZCxPQUFPLENBQUMsQ0FBQztRQUNYLENBQUMsQ0FBQztLQUNILENBQUM7SUFDRixPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFURCxvQkFTQzs7Ozs7QUNkRCx1RUFBdUU7QUFDdkUsb0RBQW9EO0FBQ3BELFNBQXdCLFFBQVEsQ0FBQyxLQUFhLEVBQUUsUUFBa0M7SUFDaEYsSUFBSSxLQUF5QixDQUFDO0lBQzlCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztJQUVqQixPQUFPLFVBQW9CLEdBQUcsSUFBVztRQUN2QyxNQUFNLElBQUksR0FBUSxJQUFJLENBQUM7UUFDdkIsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFFBQVEsQ0FBQztRQUU3QyxTQUFTLElBQUk7WUFDWCxLQUFLLEdBQUcsU0FBUyxDQUFDO1lBQ2xCLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDN0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDN0IsQ0FBQztRQUVELElBQUksS0FBSztZQUFFLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUUvQixJQUFJLE9BQU8sR0FBRyxLQUFLO1lBQUUsSUFBSSxFQUFFLENBQUM7O1lBQ3ZCLEtBQUssR0FBRyxVQUFVLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQztJQUNqRCxDQUFDLENBQUM7QUFDSixDQUFDO0FBbkJELDJCQW1CQzs7Ozs7QUNwQkQsbUNBQW1DO0FBSW5DLFNBQWdCLFFBQVEsQ0FBQyxJQUFjO0lBQ3JDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3JFLENBQUM7QUFGRCw0QkFFQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxJQUFjO0lBQzVDLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7QUFDbEQsQ0FBQztBQUZELDBDQUVDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLElBQWM7SUFDekMsT0FBTyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDeEUsQ0FBQztBQUZELG9DQUVDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLElBQWM7SUFDekMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxRQUFRLENBQUM7QUFDdkMsQ0FBQztBQUZELG9DQUVDO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLElBQWM7SUFDeEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxXQUFXLENBQUM7QUFDeEMsQ0FBQztBQUZELGtDQUVDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLElBQWM7SUFDdEMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUMzQyxDQUFDO0FBRkQsOEJBRUM7QUFFRCxTQUFnQixXQUFXLENBQUMsSUFBYztJQUN4QyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDMUQsQ0FBQztBQUZELGtDQUVDO0FBRUQsU0FBZ0IscUJBQXFCLENBQUMsSUFBYztJQUNsRCxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDL0IsQ0FBQztBQUZELHNEQUVDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLElBQWM7SUFDdEMsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM1RSxDQUFDO0FBRkQsOEJBRUM7QUFFRCxTQUFnQixZQUFZLENBQUMsSUFBYztJQUN6QyxPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLFlBQVk7UUFDakIscUJBQXFCLENBQUMsSUFBSSxDQUFDO1FBQzNCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUI7UUFDOUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDO0FBQ3JDLENBQUM7QUFORCxvQ0FNQztBQUVELFNBQWdCLFFBQVEsQ0FBQyxJQUFjO0lBQ3JDLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztRQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDO1FBQ3BCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZO1FBQ3pCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pCLENBQUM7QUFMRCw0QkFLQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxJQUFjO0lBQ3ZDLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzVDLENBQUM7QUFGRCxnQ0FFQztBQUVELHFDQUFxQztBQUNyQyxTQUFnQixhQUFhLENBQUMsSUFBYztJQUMxQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUN0QixJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVc7UUFDM0IsZUFBZSxDQUFDLElBQUksQ0FBQztRQUNyQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLENBQUM7QUFMRCxzQ0FLQztBQUVELFNBQWdCLFlBQVksQ0FBQyxJQUFjO0lBQ3pDLE9BQU8sZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksQ0FDbkQsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLO1FBQ1osQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWM7WUFDcEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLENBQ2xGLENBQ0YsQ0FBQztBQUNKLENBQUM7QUFQRCxvQ0FPQztBQUVELFNBQWdCLFFBQVEsQ0FBQyxJQUFjO0lBQ3JDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssUUFBUSxDQUFDO0FBQ3ZDLENBQUM7QUFGRCw0QkFFQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxJQUFjO0lBQ3ZDLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQzVDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQzFELENBQUM7QUFIRCxnQ0FHQztBQUdELFNBQWdCLFNBQVMsQ0FBQyxJQUFjLEVBQUUsS0FBYTtJQUNyRCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLEtBQUs7UUFBRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDcEQsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssS0FBSyxLQUFLO1FBQUUsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3hELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQUpELDhCQUlDO0FBRUQsU0FBZ0IsS0FBSyxDQUFDLElBQWM7SUFDbEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFGRCxzQkFFQztBQUVELFNBQWdCLGNBQWMsQ0FBQyxJQUFjO0lBQzNDLE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUM1RixDQUFDO0FBRkQsd0NBRUM7QUFFRCxTQUFnQixnQkFBZ0IsQ0FBQyxJQUFjO0lBQzdDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssZ0JBQWdCLENBQUM7QUFDOUMsQ0FBQztBQUZELDRDQUVDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLElBQWMsRUFBRSxLQUFZLEVBQUUsTUFBZTtJQUNyRSxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7SUFDL0IsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDdkIsSUFBSSxNQUFNO1FBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDMUMsQ0FBQztBQUxELDhCQUtDO0FBRUQsU0FBZ0IsT0FBTyxDQUFDLElBQWMsRUFBRSxLQUFZLEVBQUUsSUFBc0I7SUFDMUUsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN0QyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUM7SUFDakMsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLEtBQUssSUFBSSxNQUFNLENBQUMsSUFBSTtRQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztBQUN0RSxDQUFDO0FBSkQsMEJBSUM7QUFFRCxTQUFnQixPQUFPLENBQUMsSUFBYyxFQUFFLEtBQVk7SUFDbEQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxLQUFLLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDeEUsQ0FBQztBQUZELDBCQUVDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLElBQWM7SUFDekMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDbEUsQ0FBQztBQUZELG9DQUVDOzs7OztBQ3hIRCxTQUFnQixJQUFJLENBQUMsSUFBUyxFQUFFLEtBQWEsRUFBRSxLQUFlO0lBQzVELE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDM0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JFLENBQUM7QUFIRCxvQkFHQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUFjLEVBQUUsSUFBa0I7SUFDckQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQztBQUMxQyxDQUFDO0FBRkQsb0JBRUM7Ozs7O0FDVEQsZ0ZBQWdGO0FBRW5FLFFBQUEsR0FBRyxHQUFHO0lBQ2pCLE9BQU8sRUFBRSxFQUFFO0lBQ1gsT0FBTyxFQUFFLEVBQUU7SUFDWCxPQUFPLEVBQUUsRUFBRTtJQUNYLElBQUksRUFBRSxFQUFFO0lBQ1IsTUFBTSxFQUFFLEVBQUU7SUFDVixTQUFTLEVBQUUsRUFBRTtJQUNiLE9BQU8sRUFBRSxFQUFFO0lBQ1gsSUFBSSxFQUFFLEVBQUU7SUFDUixTQUFTLEVBQUUsRUFBRTtJQUNiLEtBQUssRUFBRSxFQUFFO0lBQ1QsT0FBTyxFQUFFLEVBQUU7SUFDWCxVQUFVLEVBQUUsRUFBRTtDQUNmLENBQUM7QUFFRixTQUFnQixPQUFPLENBQUMsSUFBYztJQUNwQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxXQUFHLENBQUMsT0FBTyxDQUFDO0FBQzVDLENBQUM7QUFGRCwwQkFFQztBQUVELFNBQWdCLFFBQVEsQ0FBQyxJQUFjO0lBQ3JDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLFdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDekMsQ0FBQztBQUZELDRCQUVDO0FBRUQsU0FBZ0IsT0FBTyxDQUFDLElBQWM7SUFDcEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssV0FBRyxDQUFDLE9BQU8sQ0FBQztBQUM3QyxDQUFDO0FBRkQsMEJBRUM7QUFFRCxTQUFnQixPQUFPLENBQUMsSUFBYztJQUNwQyxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM1RCxDQUFDO0FBRkQsMEJBRUM7Ozs7O0FDL0JELFNBQXdCLE1BQU0sQ0FBQyxJQUFVO0lBQ3ZDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzlDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFO1FBQzFCLEtBQUssU0FBUztZQUNaLE9BQU8sS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDbEMsS0FBSyxTQUFTO1lBQ1osT0FBTyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDOUIsS0FBSyxNQUFNO1lBQ1QsT0FBTyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDNUIsS0FBSyxRQUFRO1lBQ1gsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQzdFLEtBQUssV0FBVztZQUNkLE9BQU8sS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzVCLEtBQUssU0FBUztZQUNaLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQ3JCLEtBQUssT0FBTztvQkFDVixPQUFPLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2dCQUNuQyxLQUFLLE9BQU87b0JBQ1YsT0FBTyxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQzthQUNwQztZQUNELE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZCLEtBQUssTUFBTTtZQUNULE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZCLEtBQUssV0FBVztZQUNkLE9BQU8sS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzFCLEtBQUssU0FBUztZQUNaLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsZUFBZSxDQUFDO1FBQzFFLEtBQUssT0FBTztZQUNWLE9BQU8sZ0JBQWdCLENBQUM7UUFDMUIsS0FBSyxZQUFZO1lBQ2YsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7Z0JBQzFCLEtBQUssZUFBZTtvQkFDbEIsT0FBTyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxZQUFZO29CQUNmLE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO2FBQy9CO1lBQ0QsT0FBTyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDaEM7WUFDRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztLQUM3QjtBQUNILENBQUM7QUF4Q0QseUJBd0NDOzs7OztBQzFDRCxpQ0FBNEM7QUFJbkMsZ0JBSkEsWUFBSyxDQUlBO0FBSGQsK0JBQStCO0FBR0Ysb0JBQUk7QUFGakMsNkJBQTZCO0FBRU0sa0JBQUc7Ozs7O0FDSnRDLFNBQWdCLGlCQUFpQixDQUFJLElBQWUsRUFBRSxDQUF5QjtJQUM3RSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlCLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNwQyxDQUFDO0FBSEQsOENBR0M7QUFFRCxTQUFnQixjQUFjLENBQUMsUUFBbUIsRUFBRSxTQUF1QztJQUN6RixNQUFNLFFBQVEsR0FBRyxVQUFTLElBQWU7UUFDdkMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFDakMsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0MsQ0FBQyxDQUFDO0lBQ0YsT0FBTyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsQ0FBQztBQU5ELHdDQU1DO0FBRUQsMERBQTBEO0FBQzFELFNBQWdCLE9BQU8sQ0FBQyxJQUFlLEVBQUUsU0FBcUQ7SUFDNUYsSUFBSSxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNoQyxPQUFNLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDdEIsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNkLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDUDtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQVBELDBCQU9DO0FBRUQsU0FBUyxjQUFjLENBQUMsSUFBZTtJQUNyQyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsQ0FBQztBQUVELFNBQWdCLFNBQVMsQ0FBQyxJQUFlLEVBQUUsRUFBVTtJQUNuRCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUN0RCxDQUFDO0FBRkQsOEJBRUM7QUFFRCxTQUFnQixJQUFJLENBQUMsUUFBcUI7SUFDeEMsT0FBTyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN2QyxDQUFDO0FBRkQsb0JBRUM7QUFFRCxTQUFnQixTQUFTLENBQUMsUUFBcUIsRUFBRSxHQUFXO0lBQzFELE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDakQsQ0FBQztBQUZELDhCQUVDO0FBRUQsU0FBZ0IsYUFBYSxDQUFDLFFBQXFCLEVBQUUsU0FBdUM7SUFDMUYsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2QsS0FBSyxJQUFJLENBQUMsSUFBSSxRQUFRLEVBQUU7UUFDdEIsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQUUsSUFBSSxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7O1lBQzlDLE1BQU07S0FDWjtJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQztBQVBELHNDQU9DO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLE1BQWlCLEVBQUUsRUFBVTtJQUN2RCxNQUFNLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVMsQ0FBQztRQUNqRCxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUpELGtDQUlDO0FBRUQsU0FBZ0Isd0JBQXdCLENBQUMsSUFBZTtJQUN0RCxNQUFNLEtBQUssR0FBRztRQUNaLEtBQUssRUFBRSxDQUFDO1FBQ1IsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNO0tBQ3ZDLENBQUM7SUFDRixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFTLEtBQUs7UUFDbEMsTUFBTSxDQUFDLEdBQUcsd0JBQXdCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsS0FBSyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ3ZCLEtBQUssQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQztJQUMvQixDQUFDLENBQUMsQ0FBQztJQUNILE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQVhELDREQVdDO0FBRUQsU0FBZ0IsV0FBVyxDQUFDLEtBQVU7SUFDcEMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQ3pDLElBQUksSUFBSSxHQUFHLElBQUksRUFBRSxDQUFTLENBQUM7SUFDM0IsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDYixLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN2QixNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkIsSUFBSSxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDOztZQUN2QyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxHQUFHLENBQUMsQ0FBQztLQUNWO0lBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQztJQUNwQyxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFaRCxrQ0FZQztBQUVELGtCQUFrQjtBQUNsQixTQUFnQixLQUFLLENBQUMsRUFBYSxFQUFFLEVBQWE7SUFDaEQsRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDO0lBQ2xCLElBQUksRUFBRSxDQUFDLE1BQU07UUFBRSxFQUFFLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDckMsRUFBRSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFTLENBQUM7UUFDM0MsSUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRO1lBQUUsRUFBRSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQy9CLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFTLENBQUM7WUFDckMsT0FBTyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUMsTUFBTTtZQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLENBQUMsQ0FBQyxDQUFDO0lBQ0gsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBUyxDQUFDO1FBQzVCLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3JDLElBQUksUUFBUTtZQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7O1lBQzVCLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWRELHNCQWNDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLElBQWUsRUFBRSxRQUFnQjtJQUM1RCxPQUFPLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDNUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQ2pFLENBQUM7QUFDSixDQUFDO0FBSkQsb0NBSUM7QUFFRCxTQUFnQixnQkFBZ0IsQ0FBQyxJQUFlO0lBQzlDLE9BQU8sT0FBTyxDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsQ0FBQztBQUN2QyxDQUFDO0FBRkQsNENBRUM7QUFFRCxTQUFnQixTQUFTLENBQUMsSUFBZSxFQUFFLENBQTRCO0lBQ3JFLHFDQUFxQztJQUNyQyxTQUFTLE1BQU0sQ0FBQyxJQUFlO1FBQzdCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFBQSxDQUFDO0lBQ0YsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2YsQ0FBQztBQVBELDhCQU9DOzs7OztBQ25IWSxRQUFBLElBQUksR0FBYyxFQUFFLENBQUM7QUFFbEMsU0FBZ0IsSUFBSSxDQUFDLElBQWU7SUFDbEMsT0FBTyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBRkQsb0JBRUM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBZTtJQUNsQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzFCLENBQUM7QUFGRCxvQkFFQztBQUVELFNBQWdCLElBQUksQ0FBQyxJQUFlO0lBQ2xDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2QixDQUFDO0FBRkQsb0JBRUM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBZTtJQUNsQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0IsQ0FBQztBQUZELG9CQUVDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLElBQWU7SUFDbEMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsQ0FBQztBQUZELG9CQUVDO0FBRUQsU0FBZ0IsUUFBUSxDQUFDLEVBQWEsRUFBRSxFQUFhO0lBQ25ELE9BQU8sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMzQixDQUFDO0FBRkQsNEJBRUM7QUFFRCxTQUFnQixZQUFZLENBQUMsS0FBa0I7SUFDN0MsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2QsS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLO1FBQUUsSUFBSSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDekMsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBSkQsb0NBSUM7QUFFRCxTQUFnQixTQUFTLENBQUMsS0FBZ0IsRUFBRSxNQUFpQjtJQUMzRCxPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUM7QUFDbEQsQ0FBQztBQUZELDhCQUVDOzs7OztBQ2xDRCxtQ0FBbUM7QUFDbkMsNkJBQTZCO0FBQzdCLG1DQUFpQztBQW1DakMsU0FBZ0IsS0FBSyxDQUFDLElBQWU7SUFFbkMsU0FBUyxRQUFRO1FBQ2YsT0FBTyxHQUFHLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFTLElBQWU7WUFDdEQsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQy9CLENBQUMsQ0FBRSxDQUFDO0lBQ04sQ0FBQztJQUVELFNBQVMsVUFBVSxDQUFDLElBQWU7UUFDakMsT0FBTyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxTQUFTLGNBQWMsQ0FBQyxJQUFlLEVBQUUsSUFBZTtRQUN0RCxJQUFJLElBQUksS0FBSyxFQUFFO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFDN0IsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ25FLENBQUM7SUFFRCxTQUFTLGdCQUFnQixDQUFDLElBQWU7UUFDdkMsT0FBTyxvQkFBb0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVELFNBQVMsb0JBQW9CLENBQUMsSUFBZSxFQUFFLElBQWU7UUFDNUQsSUFBSSxJQUFJLEtBQUssRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFDO1FBQzdCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN2RCxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsb0JBQW9CLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQzlFLENBQUM7SUFFRCxTQUFTLG9CQUFvQixDQUFDLElBQWUsRUFBRSxJQUFlO1FBQzVELElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdEMsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDNUUsQ0FBQztJQUVELFNBQVMsdUJBQXVCLENBQUMsUUFBcUIsRUFBRSxRQUFxQixFQUFFLEdBQVc7UUFDeEYsSUFBSSxJQUFJLEVBQUUsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNyQixLQUFLLElBQUksQ0FBQyxJQUFJLFFBQVEsRUFBRTtZQUN0QixJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25CLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFBRTtnQkFBRSxNQUFNO1lBQ3pELElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHO2dCQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdEM7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFBQSxDQUFDO0lBRUYsU0FBUyxjQUFjLENBQUMsSUFBZTtRQUNyQyxPQUFPLGtCQUFrQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQsU0FBUyxVQUFVLENBQUMsSUFBZTtRQUNqQyxPQUFPLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsU0FBUyxrQkFBa0IsQ0FBQyxJQUFlLEVBQUUsSUFBZTtRQUMxRCxJQUFJLElBQUksS0FBSyxFQUFFO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFDN0IsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDbEMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsRUFBRSxLQUFLLE1BQU07WUFBRSxPQUFPLEtBQUssQ0FBQztRQUNoRCxPQUFPLGtCQUFrQixDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUVELFNBQVMscUJBQXFCLENBQUMsSUFBZTtRQUM1QyxPQUFPLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRCxTQUFTLG9CQUFvQixDQUFDLElBQWUsRUFBRSxJQUFlO1FBQzVELElBQUksSUFBSSxLQUFLLEVBQUU7WUFBRSxPQUFPLElBQUksQ0FBQztRQUM3QixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsRUFBRSxLQUFLLE1BQU07WUFBRSxPQUFPLElBQUksQ0FBQztRQUMvQyxPQUFPLG9CQUFvQixDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELFNBQVMsV0FBVyxDQUFDLElBQWU7UUFDbEMsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxVQUFTLElBQWU7WUFDL0MsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvQixJQUFJLEVBQUUsS0FBSyxFQUFFO2dCQUFFLE9BQU87WUFDdEIsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDM0IsT0FBTyxHQUFHLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxTQUFTLFVBQVUsQ0FBQyxRQUFxQjtRQUN2QyxJQUFJLE9BQWlDLENBQUM7UUFDdEMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFTLElBQWU7WUFDdkMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDO1FBQ3BDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUVELFNBQVMsUUFBUSxDQUFDLElBQWUsRUFBRSxNQUFpQztRQUNsRSxNQUFNLElBQUksR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwQyxJQUFJLElBQUksRUFBRTtZQUNSLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNiLE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFDRCxPQUFPO0lBQ1QsQ0FBQztJQUVELG1CQUFtQjtJQUNuQixTQUFTLE9BQU8sQ0FBQyxJQUFlLEVBQUUsSUFBZTtRQUMvQyxNQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFDOUIsUUFBUSxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JDLElBQUksUUFBUSxFQUFFO1lBQ1gsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBNEIsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ3BFLElBQUksZ0JBQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFVLENBQUM7WUFDeEYsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLE9BQU8sQ0FBQztTQUNoQjtRQUNELE9BQU8sUUFBUSxDQUFDLElBQUksRUFBRSxVQUFTLE1BQWlCO1lBQzlDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUMzQixDQUFDO0lBRUQsU0FBUyxRQUFRLENBQUMsS0FBa0IsRUFBRSxJQUFlO1FBQ25ELElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU8sSUFBSSxDQUFDO1FBQ3ZCLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDcEMsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDakUsQ0FBQztJQUVELFNBQVMsWUFBWSxDQUFDLElBQWU7UUFDbkMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRCxTQUFTLFNBQVMsQ0FBQyxJQUFlLEVBQUUsVUFBbUI7UUFDckQsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLEtBQUssSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMxQyxJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JDLEdBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDakMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxVQUFVO29CQUFFLE1BQU07YUFDeEI7aUJBQU0sSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO2dCQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztnQkFDNUIsSUFBSSxDQUFDLFVBQVU7b0JBQUUsTUFBTTthQUN4QjtTQUNGO0lBQ0gsQ0FBQztJQUVELFNBQVMsWUFBWSxDQUFDLE9BQXFCLEVBQUUsSUFBZTtRQUMxRCxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsVUFBUyxJQUFJO1lBQ3JGLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUM7WUFDcEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBUyxDQUFDO2dCQUM1QyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUM3QixDQUFDLENBQUMsQ0FBQztZQUNILElBQUksUUFBUTtnQkFBRSxRQUFRLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7O2dCQUN0QyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxTQUFTLGVBQWUsQ0FBQyxFQUFVLEVBQUUsSUFBZTtRQUNsRCxPQUFPLFFBQVEsQ0FBQyxJQUFJLEVBQUUsVUFBUyxJQUFJO1lBQ2pDLElBQUksUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBUyxDQUFDO2dCQUNwRCxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFBO1lBQ3BCLENBQUMsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUN6RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxTQUFTLFdBQVcsQ0FBQyxNQUFvQixFQUFFLElBQWU7UUFDeEQsT0FBTyxRQUFRLENBQUMsSUFBSSxFQUFFLFVBQVMsSUFBSTtZQUNqQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxTQUFTLFVBQVUsQ0FBQyxJQUFlO1FBQ2pDLE9BQU8sVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsU0FBUyxjQUFjLENBQUMsSUFBZSxFQUFFLElBQWU7UUFDdEQsSUFBSSxDQUFDLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxFQUFFO1lBQzVCLE1BQU0sR0FBRyxHQUFHLElBQUksSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLEdBQUc7Z0JBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO2lCQUNuQyxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDO2dCQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDOztnQkFDcEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO1NBQ25DO1FBQ0QsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFRCxPQUFPO1FBQ0wsSUFBSTtRQUNKLE9BQU87WUFDTCxPQUFPLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUN4QixDQUFDO1FBQ0QsVUFBVTtRQUNWLFdBQVc7UUFDWCxnQkFBZ0IsRUFBRSxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsb0JBQW9CLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztRQUNwRSxVQUFVO1FBQ1YsUUFBUTtRQUNSLE9BQU87UUFDUCxRQUFRO1FBQ1IsUUFBUSxDQUFDLEtBQWEsRUFBRSxJQUFlLEVBQUUsT0FBc0I7WUFDN0QsT0FBTyxRQUFRLENBQUMsSUFBSSxFQUFFLFVBQVMsSUFBZTtnQkFDNUMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7Z0JBQ25CLElBQUksT0FBTztvQkFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUN0QyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxTQUFTLENBQUMsTUFBb0IsRUFBRSxJQUFlO1lBQzdDLE9BQU8sUUFBUSxDQUFDLElBQUksRUFBRSxVQUFTLElBQWU7Z0JBQzVDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3ZCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztRQUNELFlBQVk7UUFDWixlQUFlO1FBQ2YsV0FBVztRQUNYLFVBQVUsQ0FBQyxLQUE2QixFQUFFLElBQWU7WUFDdkQsT0FBTyxRQUFRLENBQUMsSUFBSSxFQUFFLFVBQVMsSUFBSTtnQkFDakMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDckIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsY0FBYztRQUNkLHFCQUFxQjtRQUNyQixnQkFBZ0IsQ0FBQyxJQUFlO1lBQzlCLE9BQU8sb0JBQW9CLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFDRCxVQUFVO1FBQ1YsWUFBWTtRQUNaLFNBQVM7UUFDVCxnQkFBZ0IsQ0FBQyxJQUFlLEVBQUUsS0FBYztZQUM5QyxPQUFPLFFBQVEsQ0FBQyxJQUFJLEVBQUUsVUFBUyxJQUFJO2dCQUNqQyxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCx1QkFBdUI7UUFDdkIsS0FBSyxDQUFDLElBQWU7WUFDbkIsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDeEIsQ0FBQztRQUNELFdBQVc7WUFDVCxHQUFHLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxVQUFTLENBQUM7Z0JBQzVCLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDZixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDbEIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0Qsd0JBQXdCO1lBQ3RCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBUyxDQUFDO2dCQUMzQyxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVMsQ0FBQztvQkFDdkMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ2pCLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsVUFBVTtRQUNWLGNBQWM7S0FDZixDQUFDO0FBQ0osQ0FBQztBQXBQRCxzQkFvUEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJmdW5jdGlvbiByKHIsdCl7ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksci5wcm90b3R5cGUuY29uc3RydWN0b3I9cixyLl9fcHJvdG9fXz10fXZhciB0LG49ZnVuY3Rpb24oKXtmdW5jdGlvbiByKCl7fXZhciB0PXIucHJvdG90eXBlO3JldHVybiB0LnVud3JhcD1mdW5jdGlvbihyLHQpe3ZhciBuPXRoaXMuX2NoYWluKChmdW5jdGlvbih0KXtyZXR1cm4gZXhwb3J0cy5SZXN1bHQub2socj9yKHQpOnQpfSksKGZ1bmN0aW9uKHIpe3JldHVybiB0P2V4cG9ydHMuUmVzdWx0Lm9rKHQocikpOmV4cG9ydHMuUmVzdWx0LmVycihyKX0pKTtpZihuLmlzRXJyKXRocm93IG4uZXJyb3I7cmV0dXJuIG4udmFsdWV9LHQubWFwPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHRoaXMuX2NoYWluKChmdW5jdGlvbih0KXtyZXR1cm4gZXhwb3J0cy5SZXN1bHQub2socih0KSl9KSwoZnVuY3Rpb24ocil7cmV0dXJuIGV4cG9ydHMuUmVzdWx0LmVycih0P3Qocik6cil9KSl9LHQuY2hhaW49ZnVuY3Rpb24ocix0KXtyZXR1cm4gdGhpcy5fY2hhaW4ocix0fHxmdW5jdGlvbihyKXtyZXR1cm4gZXhwb3J0cy5SZXN1bHQuZXJyKHIpfSl9LHJ9KCksZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBuKHIpe3ZhciBuO3JldHVybihuPXQuY2FsbCh0aGlzKXx8dGhpcykudmFsdWU9cixuLmlzT2s9ITAsbi5pc0Vycj0hMSxufXJldHVybiByKG4sdCksbi5wcm90b3R5cGUuX2NoYWluPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHIodGhpcy52YWx1ZSl9LG59KG4pLHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihyKXt2YXIgbjtyZXR1cm4obj10LmNhbGwodGhpcyl8fHRoaXMpLmVycm9yPXIsbi5pc09rPSExLG4uaXNFcnI9ITAsbn1yZXR1cm4gcihuLHQpLG4ucHJvdG90eXBlLl9jaGFpbj1mdW5jdGlvbihyLHQpe3JldHVybiB0KHRoaXMuZXJyb3IpfSxufShuKTsodD1leHBvcnRzLlJlc3VsdHx8KGV4cG9ydHMuUmVzdWx0PXt9KSkub2s9ZnVuY3Rpb24ocil7cmV0dXJuIG5ldyBlKHIpfSx0LmVycj1mdW5jdGlvbihyKXtyZXR1cm4gbmV3IHUocil9LHQuYWxsPWZ1bmN0aW9uKHIpe2lmKEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbj1bXSxlPTA7ZTxyLmxlbmd0aDtlKyspe3ZhciB1PXJbZV07aWYodS5pc0VycilyZXR1cm4gdTtuLnB1c2godS52YWx1ZSl9cmV0dXJuIHQub2sobil9Zm9yKHZhciBvPXt9LGk9T2JqZWN0LmtleXMocikscz0wO3M8aS5sZW5ndGg7cysrKXt2YXIgYz1yW2lbc11dO2lmKGMuaXNFcnIpcmV0dXJuIGM7b1tpW3NdXT1jLnZhbHVlfXJldHVybiB0Lm9rKG8pfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL3N0YXRlJ1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBNdXRhdGlvbjxBPiA9IChzdGF0ZTogU3RhdGUpID0+IEE7XG5cbi8vIDAsMSBhbmltYXRpb24gZ29hbFxuLy8gMiwzIGFuaW1hdGlvbiBjdXJyZW50IHN0YXR1c1xuZXhwb3J0IHR5cGUgQW5pbVZlY3RvciA9IGNnLk51bWJlclF1YWRcblxuZXhwb3J0IGludGVyZmFjZSBBbmltVmVjdG9ycyB7XG4gIFtrZXk6IHN0cmluZ106IEFuaW1WZWN0b3Jcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmltRmFkaW5ncyB7XG4gIFtrZXk6IHN0cmluZ106IGNnLlBpZWNlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5pbVBsYW4ge1xuICBhbmltczogQW5pbVZlY3RvcnM7XG4gIGZhZGluZ3M6IEFuaW1GYWRpbmdzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFuaW1DdXJyZW50IHtcbiAgc3RhcnQ6IERPTUhpZ2hSZXNUaW1lU3RhbXA7XG4gIGZyZXF1ZW5jeTogY2cuS0h6O1xuICBwbGFuOiBBbmltUGxhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFuaW08QT4obXV0YXRpb246IE11dGF0aW9uPEE+LCBzdGF0ZTogU3RhdGUpOiBBIHtcbiAgcmV0dXJuIHN0YXRlLmFuaW1hdGlvbi5lbmFibGVkID8gYW5pbWF0ZShtdXRhdGlvbiwgc3RhdGUpIDogcmVuZGVyKG11dGF0aW9uLCBzdGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXI8QT4obXV0YXRpb246IE11dGF0aW9uPEE+LCBzdGF0ZTogU3RhdGUpOiBBIHtcbiAgY29uc3QgcmVzdWx0ID0gbXV0YXRpb24oc3RhdGUpO1xuICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmludGVyZmFjZSBBbmltUGllY2Uge1xuICBrZXk6IGNnLktleTtcbiAgcG9zOiBjZy5Qb3M7XG4gIHBpZWNlOiBjZy5QaWVjZTtcbn1cbmludGVyZmFjZSBBbmltUGllY2VzIHtcbiAgW2tleTogc3RyaW5nXTogQW5pbVBpZWNlXG59XG5cbmZ1bmN0aW9uIG1ha2VQaWVjZShrZXk6IGNnLktleSwgcGllY2U6IGNnLlBpZWNlKTogQW5pbVBpZWNlIHtcbiAgcmV0dXJuIHtcbiAgICBrZXk6IGtleSxcbiAgICBwb3M6IHV0aWwua2V5MnBvcyhrZXkpLFxuICAgIHBpZWNlOiBwaWVjZVxuICB9O1xufVxuXG5mdW5jdGlvbiBjbG9zZXIocGllY2U6IEFuaW1QaWVjZSwgcGllY2VzOiBBbmltUGllY2VbXSk6IEFuaW1QaWVjZSB7XG4gIHJldHVybiBwaWVjZXMuc29ydCgocDEsIHAyKSA9PiB7XG4gICAgcmV0dXJuIHV0aWwuZGlzdGFuY2VTcShwaWVjZS5wb3MsIHAxLnBvcykgLSB1dGlsLmRpc3RhbmNlU3EocGllY2UucG9zLCBwMi5wb3MpO1xuICB9KVswXTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVBsYW4ocHJldlBpZWNlczogY2cuUGllY2VzLCBjdXJyZW50OiBTdGF0ZSk6IEFuaW1QbGFuIHtcbiAgY29uc3QgYW5pbXM6IEFuaW1WZWN0b3JzID0ge30sXG4gIGFuaW1lZE9yaWdzOiBjZy5LZXlbXSA9IFtdLFxuICBmYWRpbmdzOiBBbmltRmFkaW5ncyA9IHt9LFxuICBtaXNzaW5nczogQW5pbVBpZWNlW10gPSBbXSxcbiAgbmV3czogQW5pbVBpZWNlW10gPSBbXSxcbiAgcHJlUGllY2VzOiBBbmltUGllY2VzID0ge307XG4gIGxldCBjdXJQOiBjZy5QaWVjZSB8IHVuZGVmaW5lZCwgcHJlUDogQW5pbVBpZWNlIHwgdW5kZWZpbmVkLCBpOiBhbnksIHZlY3RvcjogY2cuTnVtYmVyUGFpcjtcbiAgZm9yIChpIGluIHByZXZQaWVjZXMpIHtcbiAgICBwcmVQaWVjZXNbaV0gPSBtYWtlUGllY2UoaSBhcyBjZy5LZXksIHByZXZQaWVjZXNbaV0hKTtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLmFsbEtleXMpIHtcbiAgICBjdXJQID0gY3VycmVudC5waWVjZXNba2V5XTtcbiAgICBwcmVQID0gcHJlUGllY2VzW2tleV07XG4gICAgaWYgKGN1clApIHtcbiAgICAgIGlmIChwcmVQKSB7XG4gICAgICAgIGlmICghdXRpbC5zYW1lUGllY2UoY3VyUCwgcHJlUC5waWVjZSkpIHtcbiAgICAgICAgICBtaXNzaW5ncy5wdXNoKHByZVApO1xuICAgICAgICAgIG5ld3MucHVzaChtYWtlUGllY2Uoa2V5LCBjdXJQKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBuZXdzLnB1c2gobWFrZVBpZWNlKGtleSwgY3VyUCkpO1xuICAgIH0gZWxzZSBpZiAocHJlUCkgbWlzc2luZ3MucHVzaChwcmVQKTtcbiAgfVxuICBuZXdzLmZvckVhY2gobmV3UCA9PiB7XG4gICAgcHJlUCA9IGNsb3NlcihuZXdQLCBtaXNzaW5ncy5maWx0ZXIocCA9PiB1dGlsLnNhbWVQaWVjZShuZXdQLnBpZWNlLCBwLnBpZWNlKSkpO1xuICAgIGlmIChwcmVQKSB7XG4gICAgICB2ZWN0b3IgPSBbcHJlUC5wb3NbMF0gLSBuZXdQLnBvc1swXSwgcHJlUC5wb3NbMV0gLSBuZXdQLnBvc1sxXV07XG4gICAgICBhbmltc1tuZXdQLmtleV0gPSB2ZWN0b3IuY29uY2F0KHZlY3RvcikgYXMgQW5pbVZlY3RvcjtcbiAgICAgIGFuaW1lZE9yaWdzLnB1c2gocHJlUC5rZXkpO1xuICAgIH1cbiAgfSk7XG4gIG1pc3NpbmdzLmZvckVhY2gocCA9PiB7XG4gICAgaWYgKCF1dGlsLmNvbnRhaW5zWChhbmltZWRPcmlncywgcC5rZXkpKSBmYWRpbmdzW3Aua2V5XSA9IHAucGllY2U7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgYW5pbXM6IGFuaW1zLFxuICAgIGZhZGluZ3M6IGZhZGluZ3NcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3RlcChzdGF0ZTogU3RhdGUsIG5vdzogRE9NSGlnaFJlc1RpbWVTdGFtcCk6IHZvaWQge1xuICBjb25zdCBjdXIgPSBzdGF0ZS5hbmltYXRpb24uY3VycmVudDtcbiAgaWYgKGN1ciA9PT0gdW5kZWZpbmVkKSB7IC8vIGFuaW1hdGlvbiB3YXMgY2FuY2VsZWQgOihcbiAgICBpZiAoIXN0YXRlLmRvbS5kZXN0cm95ZWQpIHN0YXRlLmRvbS5yZWRyYXdOb3coKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcmVzdCA9IDEgLSAobm93IC0gY3VyLnN0YXJ0KSAqIGN1ci5mcmVxdWVuY3k7XG4gIGlmIChyZXN0IDw9IDApIHtcbiAgICBzdGF0ZS5hbmltYXRpb24uY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICBzdGF0ZS5kb20ucmVkcmF3Tm93KCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZWFzZSA9IGVhc2luZyhyZXN0KTtcbiAgICBmb3IgKGxldCBpIGluIGN1ci5wbGFuLmFuaW1zKSB7XG4gICAgICBjb25zdCBjZmcgPSBjdXIucGxhbi5hbmltc1tpXTtcbiAgICAgIGNmZ1syXSA9IGNmZ1swXSAqIGVhc2U7XG4gICAgICBjZmdbM10gPSBjZmdbMV0gKiBlYXNlO1xuICAgIH1cbiAgICBzdGF0ZS5kb20ucmVkcmF3Tm93KHRydWUpOyAvLyBvcHRpbWlzYXRpb246IGRvbid0IHJlbmRlciBTVkcgY2hhbmdlcyBkdXJpbmcgYW5pbWF0aW9uc1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgobm93ID0gcGVyZm9ybWFuY2Uubm93KCkpID0+IHN0ZXAoc3RhdGUsIG5vdykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFuaW1hdGU8QT4obXV0YXRpb246IE11dGF0aW9uPEE+LCBzdGF0ZTogU3RhdGUpOiBBIHtcbiAgLy8gY2xvbmUgc3RhdGUgYmVmb3JlIG11dGF0aW5nIGl0XG4gIGNvbnN0IHByZXZQaWVjZXM6IGNnLlBpZWNlcyA9IHsuLi5zdGF0ZS5waWVjZXN9O1xuXG4gIGNvbnN0IHJlc3VsdCA9IG11dGF0aW9uKHN0YXRlKTtcbiAgY29uc3QgcGxhbiA9IGNvbXB1dGVQbGFuKHByZXZQaWVjZXMsIHN0YXRlKTtcbiAgaWYgKCFpc09iamVjdEVtcHR5KHBsYW4uYW5pbXMpIHx8ICFpc09iamVjdEVtcHR5KHBsYW4uZmFkaW5ncykpIHtcbiAgICBjb25zdCBhbHJlYWR5UnVubmluZyA9IHN0YXRlLmFuaW1hdGlvbi5jdXJyZW50ICYmIHN0YXRlLmFuaW1hdGlvbi5jdXJyZW50LnN0YXJ0O1xuICAgIHN0YXRlLmFuaW1hdGlvbi5jdXJyZW50ID0ge1xuICAgICAgc3RhcnQ6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgICAgZnJlcXVlbmN5OiAxIC8gc3RhdGUuYW5pbWF0aW9uLmR1cmF0aW9uLFxuICAgICAgcGxhbjogcGxhblxuICAgIH07XG4gICAgaWYgKCFhbHJlYWR5UnVubmluZykgc3RlcChzdGF0ZSwgcGVyZm9ybWFuY2Uubm93KCkpO1xuICB9IGVsc2Uge1xuICAgIC8vIGRvbid0IGFuaW1hdGUsIGp1c3QgcmVuZGVyIHJpZ2h0IGF3YXlcbiAgICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3RFbXB0eShvOiBhbnkpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgXyBpbiBvKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ3JlLzE2NTAyOTRcbmZ1bmN0aW9uIGVhc2luZyh0OiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gdCA8IDAuNSA/IDQgKiB0ICogdCAqIHQgOiAodCAtIDEpICogKDIgKiB0IC0gMikgKiAoMiAqIHQgLSAyKSArIDE7XG59XG4iLCJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgKiBhcyBib2FyZCBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0IHsgd3JpdGUgYXMgZmVuV3JpdGUgfSBmcm9tICcuL2ZlbidcbmltcG9ydCB7IENvbmZpZywgY29uZmlndXJlIH0gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBhbmltLCByZW5kZXIgfSBmcm9tICcuL2FuaW0nXG5pbXBvcnQgeyBjYW5jZWwgYXMgZHJhZ0NhbmNlbCwgZHJhZ05ld1BpZWNlIH0gZnJvbSAnLi9kcmFnJ1xuaW1wb3J0IHsgRHJhd1NoYXBlIH0gZnJvbSAnLi9kcmF3J1xuaW1wb3J0IGV4cGxvc2lvbiBmcm9tICcuL2V4cGxvc2lvbidcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpIHtcblxuICAvLyByZWNvbmZpZ3VyZSB0aGUgaW5zdGFuY2UuIEFjY2VwdHMgYWxsIGNvbmZpZyBvcHRpb25zLCBleGNlcHQgZm9yIHZpZXdPbmx5ICYgZHJhd2FibGUudmlzaWJsZS5cbiAgLy8gYm9hcmQgd2lsbCBiZSBhbmltYXRlZCBhY2NvcmRpbmdseSwgaWYgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgc2V0KGNvbmZpZzogQ29uZmlnKTogdm9pZDtcblxuICAvLyByZWFkIGNoZXNzZ3JvdW5kIHN0YXRlOyB3cml0ZSBhdCB5b3VyIG93biByaXNrcy5cbiAgc3RhdGU6IFN0YXRlO1xuXG4gIC8vIGdldCB0aGUgcG9zaXRpb24gYXMgYSBGRU4gc3RyaW5nIChvbmx5IGNvbnRhaW5zIHBpZWNlcywgbm8gZmxhZ3MpXG4gIC8vIGUuZy4gcm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUlxuICBnZXRGZW4oKTogY2cuRkVOO1xuXG4gIC8vIGNoYW5nZSB0aGUgdmlldyBhbmdsZVxuICB0b2dnbGVPcmllbnRhdGlvbigpOiB2b2lkO1xuXG4gIC8vIHBlcmZvcm0gYSBtb3ZlIHByb2dyYW1tYXRpY2FsbHlcbiAgbW92ZShvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IHZvaWQ7XG5cbiAgLy8gYWRkIGFuZC9vciByZW1vdmUgYXJiaXRyYXJ5IHBpZWNlcyBvbiB0aGUgYm9hcmRcbiAgc2V0UGllY2VzKHBpZWNlczogY2cuUGllY2VzRGlmZik6IHZvaWQ7XG5cbiAgLy8gY2xpY2sgYSBzcXVhcmUgcHJvZ3JhbW1hdGljYWxseVxuICBzZWxlY3RTcXVhcmUoa2V5OiBjZy5LZXkgfCBudWxsLCBmb3JjZT86IGJvb2xlYW4pOiB2b2lkO1xuXG4gIC8vIHB1dCBhIG5ldyBwaWVjZSBvbiB0aGUgYm9hcmRcbiAgbmV3UGllY2UocGllY2U6IGNnLlBpZWNlLCBrZXk6IGNnLktleSk6IHZvaWQ7XG5cbiAgLy8gcGxheSB0aGUgY3VycmVudCBwcmVtb3ZlLCBpZiBhbnk7IHJldHVybnMgdHJ1ZSBpZiBwcmVtb3ZlIHdhcyBwbGF5ZWRcbiAgcGxheVByZW1vdmUoKTogYm9vbGVhbjtcblxuICAvLyBjYW5jZWwgdGhlIGN1cnJlbnQgcHJlbW92ZSwgaWYgYW55XG4gIGNhbmNlbFByZW1vdmUoKTogdm9pZDtcblxuICAvLyBwbGF5IHRoZSBjdXJyZW50IHByZWRyb3AsIGlmIGFueTsgcmV0dXJucyB0cnVlIGlmIHByZW1vdmUgd2FzIHBsYXllZFxuICBwbGF5UHJlZHJvcCh2YWxpZGF0ZTogKGRyb3A6IGNnLkRyb3ApID0+IGJvb2xlYW4pOiBib29sZWFuO1xuXG4gIC8vIGNhbmNlbCB0aGUgY3VycmVudCBwcmVkcm9wLCBpZiBhbnlcbiAgY2FuY2VsUHJlZHJvcCgpOiB2b2lkO1xuXG4gIC8vIGNhbmNlbCB0aGUgY3VycmVudCBtb3ZlIGJlaW5nIG1hZGVcbiAgY2FuY2VsTW92ZSgpOiB2b2lkO1xuXG4gIC8vIGNhbmNlbCBjdXJyZW50IG1vdmUgYW5kIHByZXZlbnQgZnVydGhlciBvbmVzXG4gIHN0b3AoKTogdm9pZDtcblxuICAvLyBtYWtlIHNxdWFyZXMgZXhwbG9kZSAoYXRvbWljIGNoZXNzKVxuICBleHBsb2RlKGtleXM6IGNnLktleVtdKTogdm9pZDtcblxuICAvLyBwcm9ncmFtbWF0aWNhbGx5IGRyYXcgdXNlciBzaGFwZXNcbiAgc2V0U2hhcGVzKHNoYXBlczogRHJhd1NoYXBlW10pOiB2b2lkO1xuXG4gIC8vIHByb2dyYW1tYXRpY2FsbHkgZHJhdyBhdXRvIHNoYXBlc1xuICBzZXRBdXRvU2hhcGVzKHNoYXBlczogRHJhd1NoYXBlW10pOiB2b2lkO1xuXG4gIC8vIHNxdWFyZSBuYW1lIGF0IHRoaXMgRE9NIHBvc2l0aW9uIChsaWtlIFwiZTRcIilcbiAgZ2V0S2V5QXREb21Qb3MocG9zOiBjZy5OdW1iZXJQYWlyKTogY2cuS2V5IHwgdW5kZWZpbmVkO1xuXG4gIC8vIG9ubHkgdXNlZnVsIHdoZW4gQ1NTIGNoYW5nZXMgdGhlIGJvYXJkIHdpZHRoL2hlaWdodCByYXRpbyAoZm9yIDNEKVxuICByZWRyYXdBbGw6IGNnLlJlZHJhdztcblxuICAvLyBmb3IgY3Jhenlob3VzZSBhbmQgYm9hcmQgZWRpdG9yc1xuICBkcmFnTmV3UGllY2UocGllY2U6IGNnLlBpZWNlLCBldmVudDogY2cuTW91Y2hFdmVudCwgZm9yY2U/OiBib29sZWFuKTogdm9pZDtcblxuICAvLyB1bmJpbmRzIGFsbCBldmVudHNcbiAgLy8gKGltcG9ydGFudCBmb3IgZG9jdW1lbnQtd2lkZSBldmVudHMgbGlrZSBzY3JvbGwgYW5kIG1vdXNlbW92ZSlcbiAgZGVzdHJveTogY2cuVW5iaW5kXG59XG5cbi8vIHNlZSBBUEkgdHlwZXMgYW5kIGRvY3VtZW50YXRpb25zIGluIGR0cy9hcGkuZC50c1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0KHN0YXRlOiBTdGF0ZSwgcmVkcmF3QWxsOiBjZy5SZWRyYXcpOiBBcGkge1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZU9yaWVudGF0aW9uKCkge1xuICAgIGJvYXJkLnRvZ2dsZU9yaWVudGF0aW9uKHN0YXRlKTtcbiAgICByZWRyYXdBbGwoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuXG4gICAgc2V0KGNvbmZpZykge1xuICAgICAgaWYgKGNvbmZpZy5vcmllbnRhdGlvbiAmJiBjb25maWcub3JpZW50YXRpb24gIT09IHN0YXRlLm9yaWVudGF0aW9uKSB0b2dnbGVPcmllbnRhdGlvbigpO1xuICAgICAgKGNvbmZpZy5mZW4gPyBhbmltIDogcmVuZGVyKShzdGF0ZSA9PiBjb25maWd1cmUoc3RhdGUsIGNvbmZpZyksIHN0YXRlKTtcbiAgICB9LFxuXG4gICAgc3RhdGUsXG5cbiAgICBnZXRGZW46ICgpID0+IGZlbldyaXRlKHN0YXRlLnBpZWNlcyksXG5cbiAgICB0b2dnbGVPcmllbnRhdGlvbixcblxuICAgIHNldFBpZWNlcyhwaWVjZXMpIHtcbiAgICAgIGFuaW0oc3RhdGUgPT4gYm9hcmQuc2V0UGllY2VzKHN0YXRlLCBwaWVjZXMpLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIHNlbGVjdFNxdWFyZShrZXksIGZvcmNlKSB7XG4gICAgICBpZiAoa2V5KSBhbmltKHN0YXRlID0+IGJvYXJkLnNlbGVjdFNxdWFyZShzdGF0ZSwga2V5LCBmb3JjZSksIHN0YXRlKTtcbiAgICAgIGVsc2UgaWYgKHN0YXRlLnNlbGVjdGVkKSB7XG4gICAgICAgIGJvYXJkLnVuc2VsZWN0KHN0YXRlKTtcbiAgICAgICAgc3RhdGUuZG9tLnJlZHJhdygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtb3ZlKG9yaWcsIGRlc3QpIHtcbiAgICAgIGFuaW0oc3RhdGUgPT4gYm9hcmQuYmFzZU1vdmUoc3RhdGUsIG9yaWcsIGRlc3QpLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIG5ld1BpZWNlKHBpZWNlLCBrZXkpIHtcbiAgICAgIGFuaW0oc3RhdGUgPT4gYm9hcmQuYmFzZU5ld1BpZWNlKHN0YXRlLCBwaWVjZSwga2V5KSwgc3RhdGUpO1xuICAgIH0sXG5cbiAgICBwbGF5UHJlbW92ZSgpIHtcbiAgICAgIGlmIChzdGF0ZS5wcmVtb3ZhYmxlLmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGFuaW0oYm9hcmQucGxheVByZW1vdmUsIHN0YXRlKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIGlmIHRoZSBwcmVtb3ZlIGNvdWxkbid0IGJlIHBsYXllZCwgcmVkcmF3IHRvIGNsZWFyIGl0IHVwXG4gICAgICAgIHN0YXRlLmRvbS5yZWRyYXcoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgcGxheVByZWRyb3AodmFsaWRhdGUpIHtcbiAgICAgIGlmIChzdGF0ZS5wcmVkcm9wcGFibGUuY3VycmVudCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBib2FyZC5wbGF5UHJlZHJvcChzdGF0ZSwgdmFsaWRhdGUpO1xuICAgICAgICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGNhbmNlbFByZW1vdmUoKSB7XG4gICAgICByZW5kZXIoYm9hcmQudW5zZXRQcmVtb3ZlLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIGNhbmNlbFByZWRyb3AoKSB7XG4gICAgICByZW5kZXIoYm9hcmQudW5zZXRQcmVkcm9wLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIGNhbmNlbE1vdmUoKSB7XG4gICAgICByZW5kZXIoc3RhdGUgPT4geyBib2FyZC5jYW5jZWxNb3ZlKHN0YXRlKTsgZHJhZ0NhbmNlbChzdGF0ZSk7IH0sIHN0YXRlKTtcbiAgICB9LFxuXG4gICAgc3RvcCgpIHtcbiAgICAgIHJlbmRlcihzdGF0ZSA9PiB7IGJvYXJkLnN0b3Aoc3RhdGUpOyBkcmFnQ2FuY2VsKHN0YXRlKTsgfSwgc3RhdGUpO1xuICAgIH0sXG5cbiAgICBleHBsb2RlKGtleXM6IGNnLktleVtdKSB7XG4gICAgICBleHBsb3Npb24oc3RhdGUsIGtleXMpO1xuICAgIH0sXG5cbiAgICBzZXRBdXRvU2hhcGVzKHNoYXBlczogRHJhd1NoYXBlW10pIHtcbiAgICAgIHJlbmRlcihzdGF0ZSA9PiBzdGF0ZS5kcmF3YWJsZS5hdXRvU2hhcGVzID0gc2hhcGVzLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIHNldFNoYXBlcyhzaGFwZXM6IERyYXdTaGFwZVtdKSB7XG4gICAgICByZW5kZXIoc3RhdGUgPT4gc3RhdGUuZHJhd2FibGUuc2hhcGVzID0gc2hhcGVzLCBzdGF0ZSk7XG4gICAgfSxcblxuICAgIGdldEtleUF0RG9tUG9zKHBvcykge1xuICAgICAgcmV0dXJuIGJvYXJkLmdldEtleUF0RG9tUG9zKHBvcywgYm9hcmQud2hpdGVQb3Yoc3RhdGUpLCBzdGF0ZS5kb20uYm91bmRzKCkpO1xuICAgIH0sXG5cbiAgICByZWRyYXdBbGwsXG5cbiAgICBkcmFnTmV3UGllY2UocGllY2UsIGV2ZW50LCBmb3JjZSkge1xuICAgICAgZHJhZ05ld1BpZWNlKHN0YXRlLCBwaWVjZSwgZXZlbnQsIGZvcmNlKVxuICAgIH0sXG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgYm9hcmQuc3RvcChzdGF0ZSk7XG4gICAgICBzdGF0ZS5kb20udW5iaW5kICYmIHN0YXRlLmRvbS51bmJpbmQoKTtcbiAgICAgIHN0YXRlLmRvbS5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IHBvczJrZXksIGtleTJwb3MsIG9wcG9zaXRlLCBjb250YWluc1ggfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgcHJlbW92ZSBmcm9tICcuL3ByZW1vdmUnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBDYWxsYmFjayA9ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGxVc2VyRnVuY3Rpb24oZjogQ2FsbGJhY2sgfCB1bmRlZmluZWQsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gIGlmIChmKSBzZXRUaW1lb3V0KCgpID0+IGYoLi4uYXJncyksIDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlT3JpZW50YXRpb24oc3RhdGU6IFN0YXRlKTogdm9pZCB7XG4gIHN0YXRlLm9yaWVudGF0aW9uID0gb3Bwb3NpdGUoc3RhdGUub3JpZW50YXRpb24pO1xuICBzdGF0ZS5hbmltYXRpb24uY3VycmVudCA9XG4gIHN0YXRlLmRyYWdnYWJsZS5jdXJyZW50ID1cbiAgc3RhdGUuc2VsZWN0ZWQgPSB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldChzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgc3RhdGUubGFzdE1vdmUgPSB1bmRlZmluZWQ7XG4gIHVuc2VsZWN0KHN0YXRlKTtcbiAgdW5zZXRQcmVtb3ZlKHN0YXRlKTtcbiAgdW5zZXRQcmVkcm9wKHN0YXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFBpZWNlcyhzdGF0ZTogU3RhdGUsIHBpZWNlczogY2cuUGllY2VzRGlmZik6IHZvaWQge1xuICBmb3IgKGxldCBrZXkgaW4gcGllY2VzKSB7XG4gICAgY29uc3QgcGllY2UgPSBwaWVjZXNba2V5XTtcbiAgICBpZiAocGllY2UpIHN0YXRlLnBpZWNlc1trZXldID0gcGllY2U7XG4gICAgZWxzZSBkZWxldGUgc3RhdGUucGllY2VzW2tleV07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldENoZWNrKHN0YXRlOiBTdGF0ZSwgY29sb3I6IGNnLkNvbG9yIHwgYm9vbGVhbik6IHZvaWQge1xuICBzdGF0ZS5jaGVjayA9IHVuZGVmaW5lZDtcbiAgaWYgKGNvbG9yID09PSB0cnVlKSBjb2xvciA9IHN0YXRlLnR1cm5Db2xvcjtcbiAgaWYgKGNvbG9yKSBmb3IgKGxldCBrIGluIHN0YXRlLnBpZWNlcykge1xuICAgIGlmIChzdGF0ZS5waWVjZXNba10hLnJvbGUgPT09ICdraW5nJyAmJiBzdGF0ZS5waWVjZXNba10hLmNvbG9yID09PSBjb2xvcikge1xuICAgICAgc3RhdGUuY2hlY2sgPSBrIGFzIGNnLktleTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0UHJlbW92ZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5LCBtZXRhOiBjZy5TZXRQcmVtb3ZlTWV0YWRhdGEpOiB2b2lkIHtcbiAgdW5zZXRQcmVkcm9wKHN0YXRlKTtcbiAgc3RhdGUucHJlbW92YWJsZS5jdXJyZW50ID0gW29yaWcsIGRlc3RdO1xuICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLnByZW1vdmFibGUuZXZlbnRzLnNldCwgb3JpZywgZGVzdCwgbWV0YSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnNldFByZW1vdmUoc3RhdGU6IFN0YXRlKTogdm9pZCB7XG4gIGlmIChzdGF0ZS5wcmVtb3ZhYmxlLmN1cnJlbnQpIHtcbiAgICBzdGF0ZS5wcmVtb3ZhYmxlLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5wcmVtb3ZhYmxlLmV2ZW50cy51bnNldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0UHJlZHJvcChzdGF0ZTogU3RhdGUsIHJvbGU6IGNnLlJvbGUsIGtleTogY2cuS2V5KTogdm9pZCB7XG4gIHVuc2V0UHJlbW92ZShzdGF0ZSk7XG4gIHN0YXRlLnByZWRyb3BwYWJsZS5jdXJyZW50ID0geyByb2xlLCBrZXkgfTtcbiAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5wcmVkcm9wcGFibGUuZXZlbnRzLnNldCwgcm9sZSwga2V5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2V0UHJlZHJvcChzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgY29uc3QgcGQgPSBzdGF0ZS5wcmVkcm9wcGFibGU7XG4gIGlmIChwZC5jdXJyZW50KSB7XG4gICAgcGQuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICBjYWxsVXNlckZ1bmN0aW9uKHBkLmV2ZW50cy51bnNldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5QXV0b0Nhc3RsZShzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogYm9vbGVhbiB7XG4gIGlmICghc3RhdGUuYXV0b0Nhc3RsZSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBraW5nID0gc3RhdGUucGllY2VzW29yaWddO1xuICBpZiAoIWtpbmcgfHwga2luZy5yb2xlICE9PSAna2luZycpIHJldHVybiBmYWxzZTtcbiAgY29uc3Qgb3JpZ1BvcyA9IGtleTJwb3Mob3JpZyk7XG4gIGlmIChvcmlnUG9zWzBdICE9PSA1KSByZXR1cm4gZmFsc2U7XG4gIGlmIChvcmlnUG9zWzFdICE9PSAxICYmIG9yaWdQb3NbMV0gIT09IDgpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgZGVzdFBvcyA9IGtleTJwb3MoZGVzdCk7XG4gIGxldCBvbGRSb29rUG9zLCBuZXdSb29rUG9zLCBuZXdLaW5nUG9zO1xuICBpZiAoZGVzdFBvc1swXSA9PT0gNyB8fCBkZXN0UG9zWzBdID09PSA4KSB7XG4gICAgb2xkUm9va1BvcyA9IHBvczJrZXkoWzgsIG9yaWdQb3NbMV1dKTtcbiAgICBuZXdSb29rUG9zID0gcG9zMmtleShbNiwgb3JpZ1Bvc1sxXV0pO1xuICAgIG5ld0tpbmdQb3MgPSBwb3Mya2V5KFs3LCBvcmlnUG9zWzFdXSk7XG4gIH0gZWxzZSBpZiAoZGVzdFBvc1swXSA9PT0gMyB8fCBkZXN0UG9zWzBdID09PSAxKSB7XG4gICAgb2xkUm9va1BvcyA9IHBvczJrZXkoWzEsIG9yaWdQb3NbMV1dKTtcbiAgICBuZXdSb29rUG9zID0gcG9zMmtleShbNCwgb3JpZ1Bvc1sxXV0pO1xuICAgIG5ld0tpbmdQb3MgPSBwb3Mya2V5KFszLCBvcmlnUG9zWzFdXSk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG5cbiAgY29uc3Qgcm9vayA9IHN0YXRlLnBpZWNlc1tvbGRSb29rUG9zXTtcbiAgaWYgKCFyb29rIHx8IHJvb2sucm9sZSAhPT0gJ3Jvb2snKSByZXR1cm4gZmFsc2U7XG5cbiAgZGVsZXRlIHN0YXRlLnBpZWNlc1tvcmlnXTtcbiAgZGVsZXRlIHN0YXRlLnBpZWNlc1tvbGRSb29rUG9zXTtcblxuICBzdGF0ZS5waWVjZXNbbmV3S2luZ1Bvc10gPSBraW5nXG4gIHN0YXRlLnBpZWNlc1tuZXdSb29rUG9zXSA9IHJvb2s7XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZU1vdmUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IGNnLlBpZWNlIHwgYm9vbGVhbiB7XG4gIGNvbnN0IG9yaWdQaWVjZSA9IHN0YXRlLnBpZWNlc1tvcmlnXSwgZGVzdFBpZWNlID0gc3RhdGUucGllY2VzW2Rlc3RdO1xuICBpZiAob3JpZyA9PT0gZGVzdCB8fCAhb3JpZ1BpZWNlKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IGNhcHR1cmVkID0gKGRlc3RQaWVjZSAmJiBkZXN0UGllY2UuY29sb3IgIT09IG9yaWdQaWVjZS5jb2xvcikgPyBkZXN0UGllY2UgOiB1bmRlZmluZWQ7XG4gIGlmIChkZXN0ID09IHN0YXRlLnNlbGVjdGVkKSB1bnNlbGVjdChzdGF0ZSk7XG4gIGNhbGxVc2VyRnVuY3Rpb24oc3RhdGUuZXZlbnRzLm1vdmUsIG9yaWcsIGRlc3QsIGNhcHR1cmVkKTtcbiAgaWYgKCF0cnlBdXRvQ2FzdGxlKHN0YXRlLCBvcmlnLCBkZXN0KSkge1xuICAgIHN0YXRlLnBpZWNlc1tkZXN0XSA9IG9yaWdQaWVjZTtcbiAgICBkZWxldGUgc3RhdGUucGllY2VzW29yaWddO1xuICB9XG4gIHN0YXRlLmxhc3RNb3ZlID0gW29yaWcsIGRlc3RdO1xuICBzdGF0ZS5jaGVjayA9IHVuZGVmaW5lZDtcbiAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5ldmVudHMuY2hhbmdlKTtcbiAgcmV0dXJuIGNhcHR1cmVkIHx8IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlTmV3UGllY2Uoc3RhdGU6IFN0YXRlLCBwaWVjZTogY2cuUGllY2UsIGtleTogY2cuS2V5LCBmb3JjZT86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgaWYgKHN0YXRlLnBpZWNlc1trZXldKSB7XG4gICAgaWYgKGZvcmNlKSBkZWxldGUgc3RhdGUucGllY2VzW2tleV07XG4gICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5ldmVudHMuZHJvcE5ld1BpZWNlLCBwaWVjZSwga2V5KTtcbiAgc3RhdGUucGllY2VzW2tleV0gPSBwaWVjZTtcbiAgc3RhdGUubGFzdE1vdmUgPSBba2V5XTtcbiAgc3RhdGUuY2hlY2sgPSB1bmRlZmluZWQ7XG4gIGNhbGxVc2VyRnVuY3Rpb24oc3RhdGUuZXZlbnRzLmNoYW5nZSk7XG4gIHN0YXRlLm1vdmFibGUuZGVzdHMgPSB1bmRlZmluZWQ7XG4gIHN0YXRlLnR1cm5Db2xvciA9IG9wcG9zaXRlKHN0YXRlLnR1cm5Db2xvcik7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBiYXNlVXNlck1vdmUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IGNnLlBpZWNlIHwgYm9vbGVhbiB7XG4gIGNvbnN0IHJlc3VsdCA9IGJhc2VNb3ZlKHN0YXRlLCBvcmlnLCBkZXN0KTtcbiAgaWYgKHJlc3VsdCkge1xuICAgIHN0YXRlLm1vdmFibGUuZGVzdHMgPSB1bmRlZmluZWQ7XG4gICAgc3RhdGUudHVybkNvbG9yID0gb3Bwb3NpdGUoc3RhdGUudHVybkNvbG9yKTtcbiAgICBzdGF0ZS5hbmltYXRpb24uY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlck1vdmUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IGJvb2xlYW4ge1xuICBpZiAoY2FuTW92ZShzdGF0ZSwgb3JpZywgZGVzdCkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBiYXNlVXNlck1vdmUoc3RhdGUsIG9yaWcsIGRlc3QpO1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGNvbnN0IGhvbGRUaW1lID0gc3RhdGUuaG9sZC5zdG9wKCk7XG4gICAgICB1bnNlbGVjdChzdGF0ZSk7XG4gICAgICBjb25zdCBtZXRhZGF0YTogY2cuTW92ZU1ldGFkYXRhID0ge1xuICAgICAgICBwcmVtb3ZlOiBmYWxzZSxcbiAgICAgICAgY3RybEtleTogc3RhdGUuc3RhdHMuY3RybEtleSxcbiAgICAgICAgaG9sZFRpbWVcbiAgICAgIH07XG4gICAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSBtZXRhZGF0YS5jYXB0dXJlZCA9IHJlc3VsdDtcbiAgICAgIGNhbGxVc2VyRnVuY3Rpb24oc3RhdGUubW92YWJsZS5ldmVudHMuYWZ0ZXIsIG9yaWcsIGRlc3QsIG1ldGFkYXRhKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjYW5QcmVtb3ZlKHN0YXRlLCBvcmlnLCBkZXN0KSkge1xuICAgIHNldFByZW1vdmUoc3RhdGUsIG9yaWcsIGRlc3QsIHtcbiAgICAgIGN0cmxLZXk6IHN0YXRlLnN0YXRzLmN0cmxLZXlcbiAgICB9KTtcbiAgICB1bnNlbGVjdChzdGF0ZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdW5zZWxlY3Qoc3RhdGUpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcm9wTmV3UGllY2Uoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgZm9yY2U/OiBib29sZWFuKTogdm9pZCB7XG4gIGlmIChjYW5Ecm9wKHN0YXRlLCBvcmlnLCBkZXN0KSB8fCBmb3JjZSkge1xuICAgIGNvbnN0IHBpZWNlID0gc3RhdGUucGllY2VzW29yaWddITtcbiAgICBkZWxldGUgc3RhdGUucGllY2VzW29yaWddO1xuICAgIGJhc2VOZXdQaWVjZShzdGF0ZSwgcGllY2UsIGRlc3QsIGZvcmNlKTtcbiAgICBjYWxsVXNlckZ1bmN0aW9uKHN0YXRlLm1vdmFibGUuZXZlbnRzLmFmdGVyTmV3UGllY2UsIHBpZWNlLnJvbGUsIGRlc3QsIHtcbiAgICAgIHByZWRyb3A6IGZhbHNlXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoY2FuUHJlZHJvcChzdGF0ZSwgb3JpZywgZGVzdCkpIHtcbiAgICBzZXRQcmVkcm9wKHN0YXRlLCBzdGF0ZS5waWVjZXNbb3JpZ10hLnJvbGUsIGRlc3QpO1xuICB9IGVsc2Uge1xuICAgIHVuc2V0UHJlbW92ZShzdGF0ZSk7XG4gICAgdW5zZXRQcmVkcm9wKHN0YXRlKTtcbiAgfVxuICBkZWxldGUgc3RhdGUucGllY2VzW29yaWddO1xuICB1bnNlbGVjdChzdGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RTcXVhcmUoc3RhdGU6IFN0YXRlLCBrZXk6IGNnLktleSwgZm9yY2U/OiBib29sZWFuKTogdm9pZCB7XG4gIGNhbGxVc2VyRnVuY3Rpb24oc3RhdGUuZXZlbnRzLnNlbGVjdCwga2V5KTtcbiAgaWYgKHN0YXRlLnNlbGVjdGVkKSB7XG4gICAgaWYgKHN0YXRlLnNlbGVjdGVkID09PSBrZXkgJiYgIXN0YXRlLmRyYWdnYWJsZS5lbmFibGVkKSB7XG4gICAgICB1bnNlbGVjdChzdGF0ZSk7XG4gICAgICBzdGF0ZS5ob2xkLmNhbmNlbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoKHN0YXRlLnNlbGVjdGFibGUuZW5hYmxlZCB8fCBmb3JjZSkgJiYgc3RhdGUuc2VsZWN0ZWQgIT09IGtleSkge1xuICAgICAgaWYgKHVzZXJNb3ZlKHN0YXRlLCBzdGF0ZS5zZWxlY3RlZCwga2V5KSkge1xuICAgICAgICBzdGF0ZS5zdGF0cy5kcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGlzTW92YWJsZShzdGF0ZSwga2V5KSB8fCBpc1ByZW1vdmFibGUoc3RhdGUsIGtleSkpIHtcbiAgICBzZXRTZWxlY3RlZChzdGF0ZSwga2V5KTtcbiAgICBzdGF0ZS5ob2xkLnN0YXJ0KCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNlbGVjdGVkKHN0YXRlOiBTdGF0ZSwga2V5OiBjZy5LZXkpOiB2b2lkIHtcbiAgc3RhdGUuc2VsZWN0ZWQgPSBrZXk7XG4gIGlmIChpc1ByZW1vdmFibGUoc3RhdGUsIGtleSkpIHtcbiAgICBzdGF0ZS5wcmVtb3ZhYmxlLmRlc3RzID0gcHJlbW92ZShzdGF0ZS5waWVjZXMsIGtleSwgc3RhdGUucHJlbW92YWJsZS5jYXN0bGUpO1xuICB9XG4gIGVsc2Ugc3RhdGUucHJlbW92YWJsZS5kZXN0cyA9IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2VsZWN0KHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBzdGF0ZS5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgc3RhdGUucHJlbW92YWJsZS5kZXN0cyA9IHVuZGVmaW5lZDtcbiAgc3RhdGUuaG9sZC5jYW5jZWwoKTtcbn1cblxuZnVuY3Rpb24gaXNNb3ZhYmxlKHN0YXRlOiBTdGF0ZSwgb3JpZzogY2cuS2V5KTogYm9vbGVhbiB7XG4gIGNvbnN0IHBpZWNlID0gc3RhdGUucGllY2VzW29yaWddO1xuICByZXR1cm4gISFwaWVjZSAmJiAoXG4gICAgc3RhdGUubW92YWJsZS5jb2xvciA9PT0gJ2JvdGgnIHx8IChcbiAgICAgIHN0YXRlLm1vdmFibGUuY29sb3IgPT09IHBpZWNlLmNvbG9yICYmXG4gICAgICAgIHN0YXRlLnR1cm5Db2xvciA9PT0gcGllY2UuY29sb3JcbiAgICApKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbk1vdmUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IGJvb2xlYW4ge1xuICByZXR1cm4gb3JpZyAhPT0gZGVzdCAmJiBpc01vdmFibGUoc3RhdGUsIG9yaWcpICYmIChcbiAgICBzdGF0ZS5tb3ZhYmxlLmZyZWUgfHwgKCEhc3RhdGUubW92YWJsZS5kZXN0cyAmJiBjb250YWluc1goc3RhdGUubW92YWJsZS5kZXN0c1tvcmlnXSwgZGVzdCkpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGNhbkRyb3Aoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IGJvb2xlYW4ge1xuICBjb25zdCBwaWVjZSA9IHN0YXRlLnBpZWNlc1tvcmlnXTtcbiAgcmV0dXJuICEhcGllY2UgJiYgZGVzdCAmJiAob3JpZyA9PT0gZGVzdCB8fCAhc3RhdGUucGllY2VzW2Rlc3RdKSAmJiAoXG4gICAgc3RhdGUubW92YWJsZS5jb2xvciA9PT0gJ2JvdGgnIHx8IChcbiAgICAgIHN0YXRlLm1vdmFibGUuY29sb3IgPT09IHBpZWNlLmNvbG9yICYmXG4gICAgICAgIHN0YXRlLnR1cm5Db2xvciA9PT0gcGllY2UuY29sb3JcbiAgICApKTtcbn1cblxuXG5mdW5jdGlvbiBpc1ByZW1vdmFibGUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXkpOiBib29sZWFuIHtcbiAgY29uc3QgcGllY2UgPSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIHJldHVybiAhIXBpZWNlICYmIHN0YXRlLnByZW1vdmFibGUuZW5hYmxlZCAmJlxuICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSBwaWVjZS5jb2xvciAmJlxuICAgIHN0YXRlLnR1cm5Db2xvciAhPT0gcGllY2UuY29sb3I7XG59XG5cbmZ1bmN0aW9uIGNhblByZW1vdmUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSk6IGJvb2xlYW4ge1xuICByZXR1cm4gb3JpZyAhPT0gZGVzdCAmJlxuICBpc1ByZW1vdmFibGUoc3RhdGUsIG9yaWcpICYmXG4gIGNvbnRhaW5zWChwcmVtb3ZlKHN0YXRlLnBpZWNlcywgb3JpZywgc3RhdGUucHJlbW92YWJsZS5jYXN0bGUpLCBkZXN0KTtcbn1cblxuZnVuY3Rpb24gY2FuUHJlZHJvcChzdGF0ZTogU3RhdGUsIG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5KTogYm9vbGVhbiB7XG4gIGNvbnN0IHBpZWNlID0gc3RhdGUucGllY2VzW29yaWddO1xuICBjb25zdCBkZXN0UGllY2UgPSBzdGF0ZS5waWVjZXNbZGVzdF07XG4gIHJldHVybiAhIXBpZWNlICYmIGRlc3QgJiZcbiAgKCFkZXN0UGllY2UgfHwgZGVzdFBpZWNlLmNvbG9yICE9PSBzdGF0ZS5tb3ZhYmxlLmNvbG9yKSAmJlxuICBzdGF0ZS5wcmVkcm9wcGFibGUuZW5hYmxlZCAmJlxuICAocGllY2Uucm9sZSAhPT0gJ3Bhd24nIHx8IChkZXN0WzFdICE9PSAnMScgJiYgZGVzdFsxXSAhPT0gJzgnKSkgJiZcbiAgc3RhdGUubW92YWJsZS5jb2xvciA9PT0gcGllY2UuY29sb3IgJiZcbiAgICBzdGF0ZS50dXJuQ29sb3IgIT09IHBpZWNlLmNvbG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEcmFnZ2FibGUoc3RhdGU6IFN0YXRlLCBvcmlnOiBjZy5LZXkpOiBib29sZWFuIHtcbiAgY29uc3QgcGllY2UgPSBzdGF0ZS5waWVjZXNbb3JpZ107XG4gIHJldHVybiAhIXBpZWNlICYmIHN0YXRlLmRyYWdnYWJsZS5lbmFibGVkICYmIChcbiAgICBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSAnYm90aCcgfHwgKFxuICAgICAgc3RhdGUubW92YWJsZS5jb2xvciA9PT0gcGllY2UuY29sb3IgJiYgKFxuICAgICAgICBzdGF0ZS50dXJuQ29sb3IgPT09IHBpZWNlLmNvbG9yIHx8IHN0YXRlLnByZW1vdmFibGUuZW5hYmxlZFxuICAgICAgKVxuICAgIClcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQcmVtb3ZlKHN0YXRlOiBTdGF0ZSk6IGJvb2xlYW4ge1xuICBjb25zdCBtb3ZlID0gc3RhdGUucHJlbW92YWJsZS5jdXJyZW50O1xuICBpZiAoIW1vdmUpIHJldHVybiBmYWxzZTtcbiAgY29uc3Qgb3JpZyA9IG1vdmVbMF0sIGRlc3QgPSBtb3ZlWzFdO1xuICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuICBpZiAoY2FuTW92ZShzdGF0ZSwgb3JpZywgZGVzdCkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBiYXNlVXNlck1vdmUoc3RhdGUsIG9yaWcsIGRlc3QpO1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGNvbnN0IG1ldGFkYXRhOiBjZy5Nb3ZlTWV0YWRhdGEgPSB7IHByZW1vdmU6IHRydWUgfTtcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIG1ldGFkYXRhLmNhcHR1cmVkID0gcmVzdWx0O1xuICAgICAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5tb3ZhYmxlLmV2ZW50cy5hZnRlciwgb3JpZywgZGVzdCwgbWV0YWRhdGEpO1xuICAgICAgc3VjY2VzcyA9IHRydWU7XG4gICAgfVxuICB9XG4gIHVuc2V0UHJlbW92ZShzdGF0ZSk7XG4gIHJldHVybiBzdWNjZXNzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxheVByZWRyb3Aoc3RhdGU6IFN0YXRlLCB2YWxpZGF0ZTogKGRyb3A6IGNnLkRyb3ApID0+IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgbGV0IGRyb3AgPSBzdGF0ZS5wcmVkcm9wcGFibGUuY3VycmVudCxcbiAgc3VjY2VzcyA9IGZhbHNlO1xuICBpZiAoIWRyb3ApIHJldHVybiBmYWxzZTtcbiAgaWYgKHZhbGlkYXRlKGRyb3ApKSB7XG4gICAgY29uc3QgcGllY2UgPSB7XG4gICAgICByb2xlOiBkcm9wLnJvbGUsXG4gICAgICBjb2xvcjogc3RhdGUubW92YWJsZS5jb2xvclxuICAgIH0gYXMgY2cuUGllY2U7XG4gICAgaWYgKGJhc2VOZXdQaWVjZShzdGF0ZSwgcGllY2UsIGRyb3Aua2V5KSkge1xuICAgICAgY2FsbFVzZXJGdW5jdGlvbihzdGF0ZS5tb3ZhYmxlLmV2ZW50cy5hZnRlck5ld1BpZWNlLCBkcm9wLnJvbGUsIGRyb3Aua2V5LCB7XG4gICAgICAgIHByZWRyb3A6IHRydWVcbiAgICAgIH0pO1xuICAgICAgc3VjY2VzcyA9IHRydWU7XG4gICAgfVxuICB9XG4gIHVuc2V0UHJlZHJvcChzdGF0ZSk7XG4gIHJldHVybiBzdWNjZXNzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsTW92ZShzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgdW5zZXRQcmVtb3ZlKHN0YXRlKTtcbiAgdW5zZXRQcmVkcm9wKHN0YXRlKTtcbiAgdW5zZWxlY3Qoc3RhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcChzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgc3RhdGUubW92YWJsZS5jb2xvciA9XG4gIHN0YXRlLm1vdmFibGUuZGVzdHMgPVxuICBzdGF0ZS5hbmltYXRpb24uY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgY2FuY2VsTW92ZShzdGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlBdERvbVBvcyhwb3M6IGNnLk51bWJlclBhaXIsIGFzV2hpdGU6IGJvb2xlYW4sIGJvdW5kczogQ2xpZW50UmVjdCk6IGNnLktleSB8IHVuZGVmaW5lZCB7XG4gIGxldCBmaWxlID0gTWF0aC5jZWlsKDggKiAoKHBvc1swXSAtIGJvdW5kcy5sZWZ0KSAvIGJvdW5kcy53aWR0aCkpO1xuICBpZiAoIWFzV2hpdGUpIGZpbGUgPSA5IC0gZmlsZTtcbiAgbGV0IHJhbmsgPSBNYXRoLmNlaWwoOCAtICg4ICogKChwb3NbMV0gLSBib3VuZHMudG9wKSAvIGJvdW5kcy5oZWlnaHQpKSk7XG4gIGlmICghYXNXaGl0ZSkgcmFuayA9IDkgLSByYW5rO1xuICByZXR1cm4gKGZpbGUgPiAwICYmIGZpbGUgPCA5ICYmIHJhbmsgPiAwICYmIHJhbmsgPCA5KSA/IHBvczJrZXkoW2ZpbGUsIHJhbmtdKSA6IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdoaXRlUG92KHM6IFN0YXRlKTogYm9vbGVhbiB7XG4gIHJldHVybiBzLm9yaWVudGF0aW9uID09PSAnd2hpdGUnO1xufVxuIiwiaW1wb3J0IHsgQXBpLCBzdGFydCB9IGZyb20gJy4vYXBpJ1xuaW1wb3J0IHsgQ29uZmlnLCBjb25maWd1cmUgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IFN0YXRlLCBkZWZhdWx0cyB9IGZyb20gJy4vc3RhdGUnXG5cbmltcG9ydCByZW5kZXJXcmFwIGZyb20gJy4vd3JhcCc7XG5pbXBvcnQgKiBhcyBldmVudHMgZnJvbSAnLi9ldmVudHMnXG5pbXBvcnQgcmVuZGVyIGZyb20gJy4vcmVuZGVyJztcbmltcG9ydCAqIGFzIHN2ZyBmcm9tICcuL3N2Zyc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBDaGVzc2dyb3VuZChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnPzogQ29uZmlnKTogQXBpIHtcblxuICBjb25zdCBzdGF0ZSA9IGRlZmF1bHRzKCkgYXMgU3RhdGU7XG5cbiAgY29uZmlndXJlKHN0YXRlLCBjb25maWcgfHwge30pO1xuXG4gIGZ1bmN0aW9uIHJlZHJhd0FsbCgpIHtcbiAgICBsZXQgcHJldlVuYmluZCA9IHN0YXRlLmRvbSAmJiBzdGF0ZS5kb20udW5iaW5kO1xuICAgIC8vIGNvbXB1dGUgYm91bmRzIGZyb20gZXhpc3RpbmcgYm9hcmQgZWxlbWVudCBpZiBwb3NzaWJsZVxuICAgIC8vIHRoaXMgYWxsb3dzIG5vbi1zcXVhcmUgYm9hcmRzIGZyb20gQ1NTIHRvIGJlIGhhbmRsZWQgKGZvciAzRClcbiAgICBjb25zdCByZWxhdGl2ZSA9IHN0YXRlLnZpZXdPbmx5ICYmICFzdGF0ZS5kcmF3YWJsZS52aXNpYmxlLFxuICAgIGVsZW1lbnRzID0gcmVuZGVyV3JhcChlbGVtZW50LCBzdGF0ZSwgcmVsYXRpdmUpLFxuICAgIGJvdW5kcyA9IHV0aWwubWVtbygoKSA9PiBlbGVtZW50cy5ib2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksXG4gICAgcmVkcmF3Tm93ID0gKHNraXBTdmc/OiBib29sZWFuKSA9PiB7XG4gICAgICByZW5kZXIoc3RhdGUpO1xuICAgICAgaWYgKCFza2lwU3ZnICYmIGVsZW1lbnRzLnN2Zykgc3ZnLnJlbmRlclN2ZyhzdGF0ZSwgZWxlbWVudHMuc3ZnKTtcbiAgICB9O1xuICAgIHN0YXRlLmRvbSA9IHtcbiAgICAgIGVsZW1lbnRzLFxuICAgICAgYm91bmRzLFxuICAgICAgcmVkcmF3OiBkZWJvdW5jZVJlZHJhdyhyZWRyYXdOb3cpLFxuICAgICAgcmVkcmF3Tm93LFxuICAgICAgdW5iaW5kOiBwcmV2VW5iaW5kLFxuICAgICAgcmVsYXRpdmVcbiAgICB9O1xuICAgIHN0YXRlLmRyYXdhYmxlLnByZXZTdmdIYXNoID0gJyc7XG4gICAgcmVkcmF3Tm93KGZhbHNlKTtcbiAgICBldmVudHMuYmluZEJvYXJkKHN0YXRlKTtcbiAgICBpZiAoIXByZXZVbmJpbmQpIHN0YXRlLmRvbS51bmJpbmQgPSBldmVudHMuYmluZERvY3VtZW50KHN0YXRlLCByZWRyYXdBbGwpO1xuICAgIHN0YXRlLmV2ZW50cy5pbnNlcnQgJiYgc3RhdGUuZXZlbnRzLmluc2VydChlbGVtZW50cyk7XG4gIH1cbiAgcmVkcmF3QWxsKCk7XG5cbiAgcmV0dXJuIHN0YXJ0KHN0YXRlLCByZWRyYXdBbGwpO1xufTtcblxuZnVuY3Rpb24gZGVib3VuY2VSZWRyYXcocmVkcmF3Tm93OiAoc2tpcFN2Zz86IGJvb2xlYW4pID0+IHZvaWQpOiAoKSA9PiB2b2lkIHtcbiAgbGV0IHJlZHJhd2luZyA9IGZhbHNlO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmIChyZWRyYXdpbmcpIHJldHVybjtcbiAgICByZWRyYXdpbmcgPSB0cnVlO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICByZWRyYXdOb3coKTtcbiAgICAgIHJlZHJhd2luZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuL3N0YXRlJ1xuaW1wb3J0IHsgc2V0Q2hlY2ssIHNldFNlbGVjdGVkIH0gZnJvbSAnLi9ib2FyZCdcbmltcG9ydCB7IHJlYWQgYXMgZmVuUmVhZCB9IGZyb20gJy4vZmVuJ1xuaW1wb3J0IHsgRHJhd1NoYXBlLCBEcmF3QnJ1c2ggfSBmcm9tICcuL2RyYXcnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZyB7XG4gIGZlbj86IGNnLkZFTjsgLy8gY2hlc3MgcG9zaXRpb24gaW4gRm9yc3l0aCBub3RhdGlvblxuICBvcmllbnRhdGlvbj86IGNnLkNvbG9yOyAvLyBib2FyZCBvcmllbnRhdGlvbi4gd2hpdGUgfCBibGFja1xuICB0dXJuQ29sb3I/OiBjZy5Db2xvcjsgLy8gdHVybiB0byBwbGF5LiB3aGl0ZSB8IGJsYWNrXG4gIGNoZWNrPzogY2cuQ29sb3IgfCBib29sZWFuOyAvLyB0cnVlIGZvciBjdXJyZW50IGNvbG9yLCBmYWxzZSB0byB1bnNldFxuICBsYXN0TW92ZT86IGNnLktleVtdOyAvLyBzcXVhcmVzIHBhcnQgb2YgdGhlIGxhc3QgbW92ZSBbXCJjM1wiLCBcImM0XCJdXG4gIHNlbGVjdGVkPzogY2cuS2V5OyAvLyBzcXVhcmUgY3VycmVudGx5IHNlbGVjdGVkIFwiYTFcIlxuICBjb29yZGluYXRlcz86IGJvb2xlYW47IC8vIGluY2x1ZGUgY29vcmRzIGF0dHJpYnV0ZXNcbiAgYXV0b0Nhc3RsZT86IGJvb2xlYW47IC8vIGltbWVkaWF0ZWx5IGNvbXBsZXRlIHRoZSBjYXN0bGUgYnkgbW92aW5nIHRoZSByb29rIGFmdGVyIGtpbmcgbW92ZVxuICB2aWV3T25seT86IGJvb2xlYW47IC8vIGRvbid0IGJpbmQgZXZlbnRzOiB0aGUgdXNlciB3aWxsIG5ldmVyIGJlIGFibGUgdG8gbW92ZSBwaWVjZXMgYXJvdW5kXG4gIGRpc2FibGVDb250ZXh0TWVudT86IGJvb2xlYW47IC8vIGJlY2F1c2Ugd2hvIG5lZWRzIGEgY29udGV4dCBtZW51IG9uIGEgY2hlc3Nib2FyZFxuICByZXNpemFibGU/OiBib29sZWFuOyAvLyBsaXN0ZW5zIHRvIGNoZXNzZ3JvdW5kLnJlc2l6ZSBvbiBkb2N1bWVudC5ib2R5IHRvIGNsZWFyIGJvdW5kcyBjYWNoZVxuICBhZGRQaWVjZVpJbmRleD86IGJvb2xlYW47IC8vIGFkZHMgei1pbmRleCB2YWx1ZXMgdG8gcGllY2VzIChmb3IgM0QpXG4gIC8vIHBpZWNlS2V5OiBib29sZWFuOyAvLyBhZGQgYSBkYXRhLWtleSBhdHRyaWJ1dGUgdG8gcGllY2UgZWxlbWVudHNcbiAgaGlnaGxpZ2h0Pzoge1xuICAgIGxhc3RNb3ZlPzogYm9vbGVhbjsgLy8gYWRkIGxhc3QtbW92ZSBjbGFzcyB0byBzcXVhcmVzXG4gICAgY2hlY2s/OiBib29sZWFuOyAvLyBhZGQgY2hlY2sgY2xhc3MgdG8gc3F1YXJlc1xuICB9O1xuICBhbmltYXRpb24/OiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47XG4gICAgZHVyYXRpb24/OiBudW1iZXI7XG4gIH07XG4gIG1vdmFibGU/OiB7XG4gICAgZnJlZT86IGJvb2xlYW47IC8vIGFsbCBtb3ZlcyBhcmUgdmFsaWQgLSBib2FyZCBlZGl0b3JcbiAgICBjb2xvcj86IGNnLkNvbG9yIHwgJ2JvdGgnOyAvLyBjb2xvciB0aGF0IGNhbiBtb3ZlLiB3aGl0ZSB8IGJsYWNrIHwgYm90aCB8IHVuZGVmaW5lZFxuICAgIGRlc3RzPzoge1xuICAgICAgW2tleTogc3RyaW5nXTogY2cuS2V5W11cbiAgICB9OyAvLyB2YWxpZCBtb3Zlcy4ge1wiYTJcIiBbXCJhM1wiIFwiYTRcIl0gXCJiMVwiIFtcImEzXCIgXCJjM1wiXX1cbiAgICBzaG93RGVzdHM/OiBib29sZWFuOyAvLyB3aGV0aGVyIHRvIGFkZCB0aGUgbW92ZS1kZXN0IGNsYXNzIG9uIHNxdWFyZXNcbiAgICBldmVudHM/OiB7XG4gICAgICBhZnRlcj86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBtb3ZlIGhhcyBiZWVuIHBsYXllZFxuICAgICAgYWZ0ZXJOZXdQaWVjZT86IChyb2xlOiBjZy5Sb2xlLCBrZXk6IGNnLktleSwgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIGEgbmV3IHBpZWNlIGlzIGRyb3BwZWQgb24gdGhlIGJvYXJkXG4gICAgfTtcbiAgICByb29rQ2FzdGxlPzogYm9vbGVhbiAvLyBjYXN0bGUgYnkgbW92aW5nIHRoZSBraW5nIHRvIHRoZSByb29rXG4gIH07XG4gIHByZW1vdmFibGU/OiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47IC8vIGFsbG93IHByZW1vdmVzIGZvciBjb2xvciB0aGF0IGNhbiBub3QgbW92ZVxuICAgIHNob3dEZXN0cz86IGJvb2xlYW47IC8vIHdoZXRoZXIgdG8gYWRkIHRoZSBwcmVtb3ZlLWRlc3QgY2xhc3Mgb24gc3F1YXJlc1xuICAgIGNhc3RsZT86IGJvb2xlYW47IC8vIHdoZXRoZXIgdG8gYWxsb3cga2luZyBjYXN0bGUgcHJlbW92ZXNcbiAgICBkZXN0cz86IGNnLktleVtdOyAvLyBwcmVtb3ZlIGRlc3RpbmF0aW9ucyBmb3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgZXZlbnRzPzoge1xuICAgICAgc2V0PzogKG9yaWc6IGNnLktleSwgZGVzdDogY2cuS2V5LCBtZXRhZGF0YT86IGNnLlNldFByZW1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVtb3ZlIGhhcyBiZWVuIHNldFxuICAgICAgdW5zZXQ/OiAoKSA9PiB2b2lkOyAgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVtb3ZlIGhhcyBiZWVuIHVuc2V0XG4gICAgfVxuICB9O1xuICBwcmVkcm9wcGFibGU/OiB7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47IC8vIGFsbG93IHByZWRyb3BzIGZvciBjb2xvciB0aGF0IGNhbiBub3QgbW92ZVxuICAgIGV2ZW50cz86IHtcbiAgICAgIHNldD86IChyb2xlOiBjZy5Sb2xlLCBrZXk6IGNnLktleSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVkcm9wIGhhcyBiZWVuIHNldFxuICAgICAgdW5zZXQ/OiAoKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHByZWRyb3AgaGFzIGJlZW4gdW5zZXRcbiAgICB9XG4gIH07XG4gIGRyYWdnYWJsZT86IHtcbiAgICBlbmFibGVkPzogYm9vbGVhbjsgLy8gYWxsb3cgbW92ZXMgJiBwcmVtb3ZlcyB0byB1c2UgZHJhZyduIGRyb3BcbiAgICBkaXN0YW5jZT86IG51bWJlcjsgLy8gbWluaW11bSBkaXN0YW5jZSB0byBpbml0aWF0ZSBhIGRyYWc7IGluIHBpeGVsc1xuICAgIGF1dG9EaXN0YW5jZT86IGJvb2xlYW47IC8vIGxldHMgY2hlc3Nncm91bmQgc2V0IGRpc3RhbmNlIHRvIHplcm8gd2hlbiB1c2VyIGRyYWdzIHBpZWNlc1xuICAgIGNlbnRlclBpZWNlPzogYm9vbGVhbjsgLy8gY2VudGVyIHRoZSBwaWVjZSBvbiBjdXJzb3IgYXQgZHJhZyBzdGFydFxuICAgIHNob3dHaG9zdD86IGJvb2xlYW47IC8vIHNob3cgZ2hvc3Qgb2YgcGllY2UgYmVpbmcgZHJhZ2dlZFxuICAgIGRlbGV0ZU9uRHJvcE9mZj86IGJvb2xlYW47IC8vIGRlbGV0ZSBhIHBpZWNlIHdoZW4gaXQgaXMgZHJvcHBlZCBvZmYgdGhlIGJvYXJkXG4gIH07XG4gIHNlbGVjdGFibGU/OiB7XG4gICAgLy8gZGlzYWJsZSB0byBlbmZvcmNlIGRyYWdnaW5nIG92ZXIgY2xpY2stY2xpY2sgbW92ZVxuICAgIGVuYWJsZWQ/OiBib29sZWFuXG4gIH07XG4gIGV2ZW50cz86IHtcbiAgICBjaGFuZ2U/OiAoKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHNpdHVhdGlvbiBjaGFuZ2VzIG9uIHRoZSBib2FyZFxuICAgIC8vIGNhbGxlZCBhZnRlciBhIHBpZWNlIGhhcyBiZWVuIG1vdmVkLlxuICAgIC8vIGNhcHR1cmVkUGllY2UgaXMgdW5kZWZpbmVkIG9yIGxpa2Uge2NvbG9yOiAnd2hpdGUnOyAncm9sZSc6ICdxdWVlbid9XG4gICAgbW92ZT86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgY2FwdHVyZWRQaWVjZT86IGNnLlBpZWNlKSA9PiB2b2lkO1xuICAgIGRyb3BOZXdQaWVjZT86IChwaWVjZTogY2cuUGllY2UsIGtleTogY2cuS2V5KSA9PiB2b2lkO1xuICAgIHNlbGVjdD86IChrZXk6IGNnLktleSkgPT4gdm9pZDsgLy8gY2FsbGVkIHdoZW4gYSBzcXVhcmUgaXMgc2VsZWN0ZWRcbiAgICBpbnNlcnQ/OiAoZWxlbWVudHM6IGNnLkVsZW1lbnRzKSA9PiB2b2lkOyAvLyB3aGVuIHRoZSBib2FyZCBET00gaGFzIGJlZW4gKHJlKWluc2VydGVkXG4gIH07XG4gIGRyYXdhYmxlPzoge1xuICAgIGVuYWJsZWQ/OiBib29sZWFuOyAvLyBjYW4gZHJhd1xuICAgIHZpc2libGU/OiBib29sZWFuOyAvLyBjYW4gdmlld1xuICAgIGVyYXNlT25DbGljaz86IGJvb2xlYW47XG4gICAgc2hhcGVzPzogRHJhd1NoYXBlW107XG4gICAgYXV0b1NoYXBlcz86IERyYXdTaGFwZVtdO1xuICAgIGJydXNoZXM/OiBEcmF3QnJ1c2hbXTtcbiAgICBwaWVjZXM/OiB7XG4gICAgICBiYXNlVXJsPzogc3RyaW5nO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlKHN0YXRlOiBTdGF0ZSwgY29uZmlnOiBDb25maWcpIHtcblxuICAvLyBkb24ndCBtZXJnZSBkZXN0aW5hdGlvbnMuIEp1c3Qgb3ZlcnJpZGUuXG4gIGlmIChjb25maWcubW92YWJsZSAmJiBjb25maWcubW92YWJsZS5kZXN0cykgc3RhdGUubW92YWJsZS5kZXN0cyA9IHVuZGVmaW5lZDtcblxuICBtZXJnZShzdGF0ZSwgY29uZmlnKTtcblxuICAvLyBpZiBhIGZlbiB3YXMgcHJvdmlkZWQsIHJlcGxhY2UgdGhlIHBpZWNlc1xuICBpZiAoY29uZmlnLmZlbikge1xuICAgIHN0YXRlLnBpZWNlcyA9IGZlblJlYWQoY29uZmlnLmZlbik7XG4gICAgc3RhdGUuZHJhd2FibGUuc2hhcGVzID0gW107XG4gIH1cblxuICAvLyBhcHBseSBjb25maWcgdmFsdWVzIHRoYXQgY291bGQgYmUgdW5kZWZpbmVkIHlldCBtZWFuaW5nZnVsXG4gIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkoJ2NoZWNrJykpIHNldENoZWNrKHN0YXRlLCBjb25maWcuY2hlY2sgfHwgZmFsc2UpO1xuICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KCdsYXN0TW92ZScpICYmICFjb25maWcubGFzdE1vdmUpIHN0YXRlLmxhc3RNb3ZlID0gdW5kZWZpbmVkO1xuICAvLyBpbiBjYXNlIG9mIFpIIGRyb3AgbGFzdCBtb3ZlLCB0aGVyZSdzIGEgc2luZ2xlIHNxdWFyZS5cbiAgLy8gaWYgdGhlIHByZXZpb3VzIGxhc3QgbW92ZSBoYWQgdHdvIHNxdWFyZXMsXG4gIC8vIHRoZSBtZXJnZSBhbGdvcml0aG0gd2lsbCBpbmNvcnJlY3RseSBrZWVwIHRoZSBzZWNvbmQgc3F1YXJlLlxuICBlbHNlIGlmIChjb25maWcubGFzdE1vdmUpIHN0YXRlLmxhc3RNb3ZlID0gY29uZmlnLmxhc3RNb3ZlO1xuXG4gIC8vIGZpeCBtb3ZlL3ByZW1vdmUgZGVzdHNcbiAgaWYgKHN0YXRlLnNlbGVjdGVkKSBzZXRTZWxlY3RlZChzdGF0ZSwgc3RhdGUuc2VsZWN0ZWQpO1xuXG4gIC8vIG5vIG5lZWQgZm9yIHN1Y2ggc2hvcnQgYW5pbWF0aW9uc1xuICBpZiAoIXN0YXRlLmFuaW1hdGlvbi5kdXJhdGlvbiB8fCBzdGF0ZS5hbmltYXRpb24uZHVyYXRpb24gPCAxMDApIHN0YXRlLmFuaW1hdGlvbi5lbmFibGVkID0gZmFsc2U7XG5cbiAgaWYgKCFzdGF0ZS5tb3ZhYmxlLnJvb2tDYXN0bGUgJiYgc3RhdGUubW92YWJsZS5kZXN0cykge1xuICAgIGNvbnN0IHJhbmsgPSBzdGF0ZS5tb3ZhYmxlLmNvbG9yID09PSAnd2hpdGUnID8gMSA6IDgsXG4gICAga2luZ1N0YXJ0UG9zID0gJ2UnICsgcmFuayxcbiAgICBkZXN0cyA9IHN0YXRlLm1vdmFibGUuZGVzdHNba2luZ1N0YXJ0UG9zXSxcbiAgICBraW5nID0gc3RhdGUucGllY2VzW2tpbmdTdGFydFBvc107XG4gICAgaWYgKCFkZXN0cyB8fCAha2luZyB8fCBraW5nLnJvbGUgIT09ICdraW5nJykgcmV0dXJuO1xuICAgIHN0YXRlLm1vdmFibGUuZGVzdHNba2luZ1N0YXJ0UG9zXSA9IGRlc3RzLmZpbHRlcihkID0+XG4gICAgICAhKChkID09PSAnYScgKyByYW5rKSAmJiBkZXN0cy5pbmRleE9mKCdjJyArIHJhbmsgYXMgY2cuS2V5KSAhPT0gLTEpICYmXG4gICAgICAgICEoKGQgPT09ICdoJyArIHJhbmspICYmIGRlc3RzLmluZGV4T2YoJ2cnICsgcmFuayBhcyBjZy5LZXkpICE9PSAtMSlcbiAgICApO1xuICB9XG59O1xuXG5mdW5jdGlvbiBtZXJnZShiYXNlOiBhbnksIGV4dGVuZDogYW55KSB7XG4gIGZvciAobGV0IGtleSBpbiBleHRlbmQpIHtcbiAgICBpZiAoaXNPYmplY3QoYmFzZVtrZXldKSAmJiBpc09iamVjdChleHRlbmRba2V5XSkpIG1lcmdlKGJhc2Vba2V5XSwgZXh0ZW5kW2tleV0pO1xuICAgIGVsc2UgYmFzZVtrZXldID0gZXh0ZW5kW2tleV07XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNPYmplY3QobzogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCc7XG59XG4iLCJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgKiBhcyBib2FyZCBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBjbGVhciBhcyBkcmF3Q2xlYXIgfSBmcm9tICcuL2RyYXcnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgYW5pbSB9IGZyb20gJy4vYW5pbSdcblxuZXhwb3J0IGludGVyZmFjZSBEcmFnQ3VycmVudCB7XG4gIG9yaWc6IGNnLktleTsgLy8gb3JpZyBrZXkgb2YgZHJhZ2dpbmcgcGllY2VcbiAgb3JpZ1BvczogY2cuUG9zO1xuICBwaWVjZTogY2cuUGllY2U7XG4gIHJlbDogY2cuTnVtYmVyUGFpcjsgLy8geDsgeSBvZiB0aGUgcGllY2UgYXQgb3JpZ2luYWwgcG9zaXRpb25cbiAgZXBvczogY2cuTnVtYmVyUGFpcjsgLy8gaW5pdGlhbCBldmVudCBwb3NpdGlvblxuICBwb3M6IGNnLk51bWJlclBhaXI7IC8vIHJlbGF0aXZlIGN1cnJlbnQgcG9zaXRpb25cbiAgZGVjOiBjZy5OdW1iZXJQYWlyOyAvLyBwaWVjZSBjZW50ZXIgZGVjYXlcbiAgc3RhcnRlZDogYm9vbGVhbjsgLy8gd2hldGhlciB0aGUgZHJhZyBoYXMgc3RhcnRlZDsgYXMgcGVyIHRoZSBkaXN0YW5jZSBzZXR0aW5nXG4gIGVsZW1lbnQ6IGNnLlBpZWNlTm9kZSB8ICgoKSA9PiBjZy5QaWVjZU5vZGUgfCB1bmRlZmluZWQpO1xuICBuZXdQaWVjZT86IGJvb2xlYW47IC8vIGl0IGl0IGEgbmV3IHBpZWNlIGZyb20gb3V0c2lkZSB0aGUgYm9hcmRcbiAgZm9yY2U/OiBib29sZWFuOyAvLyBjYW4gdGhlIG5ldyBwaWVjZSByZXBsYWNlIGFuIGV4aXN0aW5nIG9uZSAoZWRpdG9yKVxuICBwcmV2aW91c2x5U2VsZWN0ZWQ/OiBjZy5LZXk7XG4gIG9yaWdpblRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnQoczogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgaWYgKGUuYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b24gIT09IDApIHJldHVybjsgLy8gb25seSB0b3VjaCBvciBsZWZ0IGNsaWNrXG4gIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpIHJldHVybjsgLy8gc3VwcG9ydCBvbmUgZmluZ2VyIHRvdWNoIG9ubHlcbiAgY29uc3QgYm91bmRzID0gcy5kb20uYm91bmRzKCksXG4gIHBvc2l0aW9uID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpIGFzIGNnLk51bWJlclBhaXIsXG4gIG9yaWcgPSBib2FyZC5nZXRLZXlBdERvbVBvcyhwb3NpdGlvbiwgYm9hcmQud2hpdGVQb3YocyksIGJvdW5kcyk7XG4gIGlmICghb3JpZykgcmV0dXJuO1xuICBjb25zdCBwaWVjZSA9IHMucGllY2VzW29yaWddO1xuICBjb25zdCBwcmV2aW91c2x5U2VsZWN0ZWQgPSBzLnNlbGVjdGVkO1xuICBpZiAoIXByZXZpb3VzbHlTZWxlY3RlZCAmJiBzLmRyYXdhYmxlLmVuYWJsZWQgJiYgKFxuICAgIHMuZHJhd2FibGUuZXJhc2VPbkNsaWNrIHx8ICghcGllY2UgfHwgcGllY2UuY29sb3IgIT09IHMudHVybkNvbG9yKVxuICApKSBkcmF3Q2xlYXIocyk7XG4gIC8vIFByZXZlbnQgdG91Y2ggc2Nyb2xsIGFuZCBjcmVhdGUgbm8gY29ycmVzcG9uZGluZyBtb3VzZSBldmVudCwgaWYgdGhlcmVcbiAgLy8gaXMgYW4gaW50ZW50IHRvIGludGVyYWN0IHdpdGggdGhlIGJvYXJkLiBJZiBubyBjb2xvciBpcyBtb3ZhYmxlXG4gIC8vIChhbmQgdGhlIGJvYXJkIGlzIG5vdCBmb3Igdmlld2luZyBvbmx5KSwgdG91Y2hlcyBhcmUgbGlrZWx5IGludGVuZGVkIHRvXG4gIC8vIHNlbGVjdCBzcXVhcmVzLlxuICBpZiAoZS5jYW5jZWxhYmxlICE9PSBmYWxzZSAmJlxuICAgICAgKCFlLnRvdWNoZXMgfHwgIXMubW92YWJsZS5jb2xvciB8fCBwaWVjZSB8fCBwcmV2aW91c2x5U2VsZWN0ZWQgfHwgcGllY2VDbG9zZVRvKHMsIHBvc2l0aW9uKSkpXG4gICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBoYWRQcmVtb3ZlID0gISFzLnByZW1vdmFibGUuY3VycmVudDtcbiAgY29uc3QgaGFkUHJlZHJvcCA9ICEhcy5wcmVkcm9wcGFibGUuY3VycmVudDtcbiAgcy5zdGF0cy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuICBpZiAocy5zZWxlY3RlZCAmJiBib2FyZC5jYW5Nb3ZlKHMsIHMuc2VsZWN0ZWQsIG9yaWcpKSB7XG4gICAgYW5pbShzdGF0ZSA9PiBib2FyZC5zZWxlY3RTcXVhcmUoc3RhdGUsIG9yaWcpLCBzKTtcbiAgfSBlbHNlIHtcbiAgICBib2FyZC5zZWxlY3RTcXVhcmUocywgb3JpZyk7XG4gIH1cbiAgY29uc3Qgc3RpbGxTZWxlY3RlZCA9IHMuc2VsZWN0ZWQgPT09IG9yaWc7XG4gIGNvbnN0IGVsZW1lbnQgPSBwaWVjZUVsZW1lbnRCeUtleShzLCBvcmlnKTtcbiAgaWYgKHBpZWNlICYmIGVsZW1lbnQgJiYgc3RpbGxTZWxlY3RlZCAmJiBib2FyZC5pc0RyYWdnYWJsZShzLCBvcmlnKSkge1xuICAgIGNvbnN0IHNxdWFyZUJvdW5kcyA9IGNvbXB1dGVTcXVhcmVCb3VuZHMob3JpZywgYm9hcmQud2hpdGVQb3YocyksIGJvdW5kcyk7XG4gICAgcy5kcmFnZ2FibGUuY3VycmVudCA9IHtcbiAgICAgIG9yaWcsXG4gICAgICBvcmlnUG9zOiB1dGlsLmtleTJwb3Mob3JpZyksXG4gICAgICBwaWVjZSxcbiAgICAgIHJlbDogcG9zaXRpb24sXG4gICAgICBlcG9zOiBwb3NpdGlvbixcbiAgICAgIHBvczogWzAsIDBdLFxuICAgICAgZGVjOiBzLmRyYWdnYWJsZS5jZW50ZXJQaWVjZSA/IFtcbiAgICAgICAgcG9zaXRpb25bMF0gLSAoc3F1YXJlQm91bmRzLmxlZnQgKyBzcXVhcmVCb3VuZHMud2lkdGggLyAyKSxcbiAgICAgICAgcG9zaXRpb25bMV0gLSAoc3F1YXJlQm91bmRzLnRvcCArIHNxdWFyZUJvdW5kcy5oZWlnaHQgLyAyKVxuICAgICAgXSA6IFswLCAwXSxcbiAgICAgIHN0YXJ0ZWQ6IHMuZHJhZ2dhYmxlLmF1dG9EaXN0YW5jZSAmJiBzLnN0YXRzLmRyYWdnZWQsXG4gICAgICBlbGVtZW50LFxuICAgICAgcHJldmlvdXNseVNlbGVjdGVkLFxuICAgICAgb3JpZ2luVGFyZ2V0OiBlLnRhcmdldFxuICAgIH07XG4gICAgZWxlbWVudC5jZ0RyYWdnaW5nID0gdHJ1ZTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgLy8gcGxhY2UgZ2hvc3RcbiAgICBjb25zdCBnaG9zdCA9IHMuZG9tLmVsZW1lbnRzLmdob3N0O1xuICAgIGlmIChnaG9zdCkge1xuICAgICAgZ2hvc3QuY2xhc3NOYW1lID0gYGdob3N0ICR7cGllY2UuY29sb3J9ICR7cGllY2Uucm9sZX1gO1xuICAgICAgdXRpbC50cmFuc2xhdGVBYnMoZ2hvc3QsIHV0aWwucG9zVG9UcmFuc2xhdGVBYnMoYm91bmRzKSh1dGlsLmtleTJwb3Mob3JpZyksIGJvYXJkLndoaXRlUG92KHMpKSk7XG4gICAgICB1dGlsLnNldFZpc2libGUoZ2hvc3QsIHRydWUpO1xuICAgIH1cbiAgICBwcm9jZXNzRHJhZyhzKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoaGFkUHJlbW92ZSkgYm9hcmQudW5zZXRQcmVtb3ZlKHMpO1xuICAgIGlmIChoYWRQcmVkcm9wKSBib2FyZC51bnNldFByZWRyb3Aocyk7XG4gIH1cbiAgcy5kb20ucmVkcmF3KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwaWVjZUNsb3NlVG8oczogU3RhdGUsIHBvczogY2cuTnVtYmVyUGFpcik6IGJvb2xlYW4ge1xuICBjb25zdCBhc1doaXRlID0gYm9hcmQud2hpdGVQb3YocyksXG4gIGJvdW5kcyA9IHMuZG9tLmJvdW5kcygpLFxuICByYWRpdXNTcSA9IE1hdGgucG93KGJvdW5kcy53aWR0aCAvIDgsIDIpO1xuICBmb3IgKGxldCBrZXkgaW4gcy5waWVjZXMpIHtcbiAgICBjb25zdCBzcXVhcmVCb3VuZHMgPSBjb21wdXRlU3F1YXJlQm91bmRzKGtleSBhcyBjZy5LZXksIGFzV2hpdGUsIGJvdW5kcyksXG4gICAgY2VudGVyOiBjZy5OdW1iZXJQYWlyID0gW1xuICAgICAgc3F1YXJlQm91bmRzLmxlZnQgKyBzcXVhcmVCb3VuZHMud2lkdGggLyAyLFxuICAgICAgc3F1YXJlQm91bmRzLnRvcCArIHNxdWFyZUJvdW5kcy5oZWlnaHQgLyAyXG4gICAgXTtcbiAgICBpZiAodXRpbC5kaXN0YW5jZVNxKGNlbnRlciwgcG9zKSA8PSByYWRpdXNTcSkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhZ05ld1BpZWNlKHM6IFN0YXRlLCBwaWVjZTogY2cuUGllY2UsIGU6IGNnLk1vdWNoRXZlbnQsIGZvcmNlPzogYm9vbGVhbik6IHZvaWQge1xuXG4gIGNvbnN0IGtleTogY2cuS2V5ID0gJ2EwJztcblxuICBzLnBpZWNlc1trZXldID0gcGllY2U7XG5cbiAgcy5kb20ucmVkcmF3KCk7XG5cbiAgY29uc3QgcG9zaXRpb24gPSB1dGlsLmV2ZW50UG9zaXRpb24oZSkgYXMgY2cuTnVtYmVyUGFpcixcbiAgYXNXaGl0ZSA9IGJvYXJkLndoaXRlUG92KHMpLFxuICBib3VuZHMgPSBzLmRvbS5ib3VuZHMoKSxcbiAgc3F1YXJlQm91bmRzID0gY29tcHV0ZVNxdWFyZUJvdW5kcyhrZXksIGFzV2hpdGUsIGJvdW5kcyk7XG5cbiAgY29uc3QgcmVsOiBjZy5OdW1iZXJQYWlyID0gW1xuICAgIChhc1doaXRlID8gMCA6IDcpICogc3F1YXJlQm91bmRzLndpZHRoICsgYm91bmRzLmxlZnQsXG4gICAgKGFzV2hpdGUgPyA4IDogLTEpICogc3F1YXJlQm91bmRzLmhlaWdodCArIGJvdW5kcy50b3BcbiAgXTtcblxuICBzLmRyYWdnYWJsZS5jdXJyZW50ID0ge1xuICAgIG9yaWc6IGtleSxcbiAgICBvcmlnUG9zOiB1dGlsLmtleTJwb3Moa2V5KSxcbiAgICBwaWVjZSxcbiAgICByZWwsXG4gICAgZXBvczogcG9zaXRpb24sXG4gICAgcG9zOiBbcG9zaXRpb25bMF0gLSByZWxbMF0sIHBvc2l0aW9uWzFdIC0gcmVsWzFdXSxcbiAgICBkZWM6IFstc3F1YXJlQm91bmRzLndpZHRoIC8gMiwgLXNxdWFyZUJvdW5kcy5oZWlnaHQgLyAyXSxcbiAgICBzdGFydGVkOiB0cnVlLFxuICAgIGVsZW1lbnQ6ICgpID0+IHBpZWNlRWxlbWVudEJ5S2V5KHMsIGtleSksXG4gICAgb3JpZ2luVGFyZ2V0OiBlLnRhcmdldCxcbiAgICBuZXdQaWVjZTogdHJ1ZSxcbiAgICBmb3JjZTogISFmb3JjZVxuICB9O1xuICBwcm9jZXNzRHJhZyhzKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0RyYWcoczogU3RhdGUpOiB2b2lkIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBjb25zdCBjdXIgPSBzLmRyYWdnYWJsZS5jdXJyZW50O1xuICAgIGlmICghY3VyKSByZXR1cm47XG4gICAgLy8gY2FuY2VsIGFuaW1hdGlvbnMgd2hpbGUgZHJhZ2dpbmdcbiAgICBpZiAocy5hbmltYXRpb24uY3VycmVudCAmJiBzLmFuaW1hdGlvbi5jdXJyZW50LnBsYW4uYW5pbXNbY3VyLm9yaWddKSBzLmFuaW1hdGlvbi5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgIC8vIGlmIG1vdmluZyBwaWVjZSBpcyBnb25lLCBjYW5jZWxcbiAgICBjb25zdCBvcmlnUGllY2UgPSBzLnBpZWNlc1tjdXIub3JpZ107XG4gICAgaWYgKCFvcmlnUGllY2UgfHwgIXV0aWwuc2FtZVBpZWNlKG9yaWdQaWVjZSwgY3VyLnBpZWNlKSkgY2FuY2VsKHMpO1xuICAgIGVsc2Uge1xuICAgICAgaWYgKCFjdXIuc3RhcnRlZCAmJiB1dGlsLmRpc3RhbmNlU3EoY3VyLmVwb3MsIGN1ci5yZWwpID49IE1hdGgucG93KHMuZHJhZ2dhYmxlLmRpc3RhbmNlLCAyKSkgY3VyLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGN1ci5zdGFydGVkKSB7XG5cbiAgICAgICAgLy8gc3VwcG9ydCBsYXp5IGVsZW1lbnRzXG4gICAgICAgIGlmICh0eXBlb2YgY3VyLmVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb25zdCBmb3VuZCA9IGN1ci5lbGVtZW50KCk7XG4gICAgICAgICAgaWYgKCFmb3VuZCkgcmV0dXJuO1xuICAgICAgICAgIGZvdW5kLmNnRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgIGZvdW5kLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgY3VyLmVsZW1lbnQgPSBmb3VuZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ci5wb3MgPSBbXG4gICAgICAgICAgY3VyLmVwb3NbMF0gLSBjdXIucmVsWzBdLFxuICAgICAgICAgIGN1ci5lcG9zWzFdIC0gY3VyLnJlbFsxXVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIG1vdmUgcGllY2VcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB1dGlsLnBvc1RvVHJhbnNsYXRlQWJzKHMuZG9tLmJvdW5kcygpKShjdXIub3JpZ1BvcywgYm9hcmQud2hpdGVQb3YocykpO1xuICAgICAgICB0cmFuc2xhdGlvblswXSArPSBjdXIucG9zWzBdICsgY3VyLmRlY1swXTtcbiAgICAgICAgdHJhbnNsYXRpb25bMV0gKz0gY3VyLnBvc1sxXSArIGN1ci5kZWNbMV07XG4gICAgICAgIHV0aWwudHJhbnNsYXRlQWJzKGN1ci5lbGVtZW50LCB0cmFuc2xhdGlvbik7XG4gICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NEcmFnKHMpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmUoczogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgLy8gc3VwcG9ydCBvbmUgZmluZ2VyIHRvdWNoIG9ubHlcbiAgaWYgKHMuZHJhZ2dhYmxlLmN1cnJlbnQgJiYgKCFlLnRvdWNoZXMgfHwgZS50b3VjaGVzLmxlbmd0aCA8IDIpKSB7XG4gICAgcy5kcmFnZ2FibGUuY3VycmVudC5lcG9zID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpIGFzIGNnLk51bWJlclBhaXI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZChzOiBTdGF0ZSwgZTogY2cuTW91Y2hFdmVudCk6IHZvaWQge1xuICBjb25zdCBjdXIgPSBzLmRyYWdnYWJsZS5jdXJyZW50O1xuICBpZiAoIWN1cikgcmV0dXJuO1xuICAvLyBjcmVhdGUgbm8gY29ycmVzcG9uZGluZyBtb3VzZSBldmVudFxuICBpZiAoZS50eXBlID09PSAndG91Y2hlbmQnICYmIGUuY2FuY2VsYWJsZSAhPT0gZmFsc2UpIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gY29tcGFyaW5nIHdpdGggdGhlIG9yaWdpbiB0YXJnZXQgaXMgYW4gZWFzeSB3YXkgdG8gdGVzdCB0aGF0IHRoZSBlbmQgZXZlbnRcbiAgLy8gaGFzIHRoZSBzYW1lIHRvdWNoIG9yaWdpblxuICBpZiAoZS50eXBlID09PSAndG91Y2hlbmQnICYmIGN1ciAmJiBjdXIub3JpZ2luVGFyZ2V0ICE9PSBlLnRhcmdldCAmJiAhY3VyLm5ld1BpZWNlKSB7XG4gICAgcy5kcmFnZ2FibGUuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm47XG4gIH1cbiAgYm9hcmQudW5zZXRQcmVtb3ZlKHMpO1xuICBib2FyZC51bnNldFByZWRyb3Aocyk7XG4gIC8vIHRvdWNoZW5kIGhhcyBubyBwb3NpdGlvbjsgc28gdXNlIHRoZSBsYXN0IHRvdWNobW92ZSBwb3NpdGlvbiBpbnN0ZWFkXG4gIGNvbnN0IGV2ZW50UG9zOiBjZy5OdW1iZXJQYWlyID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpIHx8IGN1ci5lcG9zO1xuICBjb25zdCBkZXN0ID0gYm9hcmQuZ2V0S2V5QXREb21Qb3MoZXZlbnRQb3MsIGJvYXJkLndoaXRlUG92KHMpLCBzLmRvbS5ib3VuZHMoKSk7XG4gIGlmIChkZXN0ICYmIGN1ci5zdGFydGVkICYmIGN1ci5vcmlnICE9PSBkZXN0KSB7XG4gICAgaWYgKGN1ci5uZXdQaWVjZSkgYm9hcmQuZHJvcE5ld1BpZWNlKHMsIGN1ci5vcmlnLCBkZXN0LCBjdXIuZm9yY2UpO1xuICAgIGVsc2Uge1xuICAgICAgcy5zdGF0cy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuICAgICAgaWYgKGJvYXJkLnVzZXJNb3ZlKHMsIGN1ci5vcmlnLCBkZXN0KSkgcy5zdGF0cy5kcmFnZ2VkID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoY3VyLm5ld1BpZWNlKSB7XG4gICAgZGVsZXRlIHMucGllY2VzW2N1ci5vcmlnXTtcbiAgfSBlbHNlIGlmIChzLmRyYWdnYWJsZS5kZWxldGVPbkRyb3BPZmYgJiYgIWRlc3QpIHtcbiAgICBkZWxldGUgcy5waWVjZXNbY3VyLm9yaWddO1xuICAgIGJvYXJkLmNhbGxVc2VyRnVuY3Rpb24ocy5ldmVudHMuY2hhbmdlKTtcbiAgfVxuICBpZiAoY3VyICYmIGN1ci5vcmlnID09PSBjdXIucHJldmlvdXNseVNlbGVjdGVkICYmIChjdXIub3JpZyA9PT0gZGVzdCB8fCAhZGVzdCkpXG4gICAgYm9hcmQudW5zZWxlY3Qocyk7XG4gIGVsc2UgaWYgKCFzLnNlbGVjdGFibGUuZW5hYmxlZCkgYm9hcmQudW5zZWxlY3Qocyk7XG5cbiAgcmVtb3ZlRHJhZ0VsZW1lbnRzKHMpO1xuXG4gIHMuZHJhZ2dhYmxlLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gIHMuZG9tLnJlZHJhdygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsKHM6IFN0YXRlKTogdm9pZCB7XG4gIGNvbnN0IGN1ciA9IHMuZHJhZ2dhYmxlLmN1cnJlbnQ7XG4gIGlmIChjdXIpIHtcbiAgICBpZiAoY3VyLm5ld1BpZWNlKSBkZWxldGUgcy5waWVjZXNbY3VyLm9yaWddO1xuICAgIHMuZHJhZ2dhYmxlLmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgYm9hcmQudW5zZWxlY3Qocyk7XG4gICAgcmVtb3ZlRHJhZ0VsZW1lbnRzKHMpO1xuICAgIHMuZG9tLnJlZHJhdygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZURyYWdFbGVtZW50cyhzOiBTdGF0ZSkge1xuICBjb25zdCBlID0gcy5kb20uZWxlbWVudHM7XG4gIGlmIChlLmdob3N0KSB1dGlsLnNldFZpc2libGUoZS5naG9zdCwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlU3F1YXJlQm91bmRzKGtleTogY2cuS2V5LCBhc1doaXRlOiBib29sZWFuLCBib3VuZHM6IENsaWVudFJlY3QpIHtcbiAgY29uc3QgcG9zID0gdXRpbC5rZXkycG9zKGtleSk7XG4gIGlmICghYXNXaGl0ZSkge1xuICAgIHBvc1swXSA9IDkgLSBwb3NbMF07XG4gICAgcG9zWzFdID0gOSAtIHBvc1sxXTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoICogKHBvc1swXSAtIDEpIC8gOCxcbiAgICB0b3A6IGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0ICogKDggLSBwb3NbMV0pIC8gOCxcbiAgICB3aWR0aDogYm91bmRzLndpZHRoIC8gOCxcbiAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQgLyA4XG4gIH07XG59XG5cbmZ1bmN0aW9uIHBpZWNlRWxlbWVudEJ5S2V5KHM6IFN0YXRlLCBrZXk6IGNnLktleSk6IGNnLlBpZWNlTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGxldCBlbCA9IHMuZG9tLmVsZW1lbnRzLmJvYXJkLmZpcnN0Q2hpbGQgYXMgY2cuUGllY2VOb2RlO1xuICB3aGlsZSAoZWwpIHtcbiAgICBpZiAoZWwuY2dLZXkgPT09IGtleSAmJiBlbC50YWdOYW1lID09PSAnUElFQ0UnKSByZXR1cm4gZWw7XG4gICAgZWwgPSBlbC5uZXh0U2libGluZyBhcyBjZy5QaWVjZU5vZGU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbiIsImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IHVuc2VsZWN0LCBjYW5jZWxNb3ZlLCBnZXRLZXlBdERvbVBvcywgd2hpdGVQb3YgfSBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0IHsgZXZlbnRQb3NpdGlvbiwgaXNSaWdodEJ1dHRvbiB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhd1NoYXBlIHtcbiAgb3JpZzogY2cuS2V5O1xuICBkZXN0PzogY2cuS2V5O1xuICBicnVzaDogc3RyaW5nO1xuICBtb2RpZmllcnM/OiBEcmF3TW9kaWZpZXJzO1xuICBwaWVjZT86IERyYXdTaGFwZVBpZWNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdTaGFwZVBpZWNlIHtcbiAgcm9sZTogY2cuUm9sZTtcbiAgY29sb3I6IGNnLkNvbG9yO1xuICBzY2FsZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmF3QnJ1c2gge1xuICBrZXk6IHN0cmluZztcbiAgY29sb3I6IHN0cmluZztcbiAgb3BhY2l0eTogbnVtYmVyO1xuICBsaW5lV2lkdGg6IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdCcnVzaGVzIHtcbiAgW25hbWU6IHN0cmluZ106IERyYXdCcnVzaDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmF3TW9kaWZpZXJzIHtcbiAgbGluZVdpZHRoPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdhYmxlIHtcbiAgZW5hYmxlZDogYm9vbGVhbjsgLy8gY2FuIGRyYXdcbiAgdmlzaWJsZTogYm9vbGVhbjsgLy8gY2FuIHZpZXdcbiAgZXJhc2VPbkNsaWNrOiBib29sZWFuO1xuICBvbkNoYW5nZT86IChzaGFwZXM6IERyYXdTaGFwZVtdKSA9PiB2b2lkO1xuICBzaGFwZXM6IERyYXdTaGFwZVtdOyAvLyB1c2VyIHNoYXBlc1xuICBhdXRvU2hhcGVzOiBEcmF3U2hhcGVbXTsgLy8gY29tcHV0ZXIgc2hhcGVzXG4gIGN1cnJlbnQ/OiBEcmF3Q3VycmVudDtcbiAgYnJ1c2hlczogRHJhd0JydXNoZXM7XG4gIC8vIGRyYXdhYmxlIFNWRyBwaWVjZXM7IHVzZWQgZm9yIGNyYXp5aG91c2UgZHJvcFxuICBwaWVjZXM6IHtcbiAgICBiYXNlVXJsOiBzdHJpbmdcbiAgfSxcbiAgcHJldlN2Z0hhc2g6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdDdXJyZW50IHtcbiAgb3JpZzogY2cuS2V5OyAvLyBvcmlnIGtleSBvZiBkcmF3aW5nXG4gIGRlc3Q/OiBjZy5LZXk7IC8vIHNoYXBlIGRlc3QsIG9yIHVuZGVmaW5lZCBmb3IgY2lyY2xlXG4gIG1vdXNlU3E/OiBjZy5LZXk7IC8vIHNxdWFyZSBiZWluZyBtb3VzZWQgb3ZlclxuICBwb3M6IGNnLk51bWJlclBhaXI7IC8vIHJlbGF0aXZlIGN1cnJlbnQgcG9zaXRpb25cbiAgYnJ1c2g6IHN0cmluZzsgLy8gYnJ1c2ggbmFtZSBmb3Igc2hhcGVcbn1cblxuY29uc3QgYnJ1c2hlcyA9IFsnZ3JlZW4nLCAncmVkJywgJ2JsdWUnLCAneWVsbG93J107XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydChzdGF0ZTogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID4gMSkgcmV0dXJuOyAvLyBzdXBwb3J0IG9uZSBmaW5nZXIgdG91Y2ggb25seVxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGUuY3RybEtleSA/IHVuc2VsZWN0KHN0YXRlKSA6IGNhbmNlbE1vdmUoc3RhdGUpO1xuICBjb25zdCBwb3MgPSBldmVudFBvc2l0aW9uKGUpIGFzIGNnLk51bWJlclBhaXIsXG4gIG9yaWcgPSBnZXRLZXlBdERvbVBvcyhwb3MsIHdoaXRlUG92KHN0YXRlKSwgc3RhdGUuZG9tLmJvdW5kcygpKTtcbiAgaWYgKCFvcmlnKSByZXR1cm47XG4gIHN0YXRlLmRyYXdhYmxlLmN1cnJlbnQgPSB7XG4gICAgb3JpZyxcbiAgICBwb3MsXG4gICAgYnJ1c2g6IGV2ZW50QnJ1c2goZSlcbiAgfTtcbiAgcHJvY2Vzc0RyYXcoc3RhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc0RyYXcoc3RhdGU6IFN0YXRlKTogdm9pZCB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgY29uc3QgY3VyID0gc3RhdGUuZHJhd2FibGUuY3VycmVudDtcbiAgICBpZiAoY3VyKSB7XG4gICAgICBjb25zdCBtb3VzZVNxID0gZ2V0S2V5QXREb21Qb3MoY3VyLnBvcywgd2hpdGVQb3Yoc3RhdGUpLCBzdGF0ZS5kb20uYm91bmRzKCkpO1xuICAgICAgaWYgKG1vdXNlU3EgIT09IGN1ci5tb3VzZVNxKSB7XG4gICAgICAgIGN1ci5tb3VzZVNxID0gbW91c2VTcTtcbiAgICAgICAgY3VyLmRlc3QgPSBtb3VzZVNxICE9PSBjdXIub3JpZyA/IG1vdXNlU3EgOiB1bmRlZmluZWQ7XG4gICAgICAgIHN0YXRlLmRvbS5yZWRyYXdOb3coKTtcbiAgICAgIH1cbiAgICAgIHByb2Nlc3NEcmF3KHN0YXRlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW92ZShzdGF0ZTogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgaWYgKHN0YXRlLmRyYXdhYmxlLmN1cnJlbnQpIHN0YXRlLmRyYXdhYmxlLmN1cnJlbnQucG9zID0gZXZlbnRQb3NpdGlvbihlKSBhcyBjZy5OdW1iZXJQYWlyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5kKHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBjb25zdCBjdXIgPSBzdGF0ZS5kcmF3YWJsZS5jdXJyZW50O1xuICBpZiAoY3VyKSB7XG4gICAgaWYgKGN1ci5tb3VzZVNxKSBhZGRTaGFwZShzdGF0ZS5kcmF3YWJsZSwgY3VyKTtcbiAgICBjYW5jZWwoc3RhdGUpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5jZWwoc3RhdGU6IFN0YXRlKTogdm9pZCB7XG4gIGlmIChzdGF0ZS5kcmF3YWJsZS5jdXJyZW50KSB7XG4gICAgc3RhdGUuZHJhd2FibGUuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKHN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICBpZiAoc3RhdGUuZHJhd2FibGUuc2hhcGVzLmxlbmd0aCkge1xuICAgIHN0YXRlLmRyYXdhYmxlLnNoYXBlcyA9IFtdO1xuICAgIHN0YXRlLmRvbS5yZWRyYXcoKTtcbiAgICBvbkNoYW5nZShzdGF0ZS5kcmF3YWJsZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRCcnVzaChlOiBjZy5Nb3VjaEV2ZW50KTogc3RyaW5nIHtcbiAgcmV0dXJuIGJydXNoZXNbKChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSkgJiYgaXNSaWdodEJ1dHRvbihlKSA/IDEgOiAwKSArIChlLmFsdEtleSA/IDIgOiAwKV07XG59XG5cbmZ1bmN0aW9uIGFkZFNoYXBlKGRyYXdhYmxlOiBEcmF3YWJsZSwgY3VyOiBEcmF3Q3VycmVudCk6IHZvaWQge1xuICBjb25zdCBzYW1lU2hhcGUgPSAoczogRHJhd1NoYXBlKSA9PiBzLm9yaWcgPT09IGN1ci5vcmlnICYmIHMuZGVzdCA9PT0gY3VyLmRlc3Q7XG4gIGNvbnN0IHNpbWlsYXIgPSBkcmF3YWJsZS5zaGFwZXMuZmlsdGVyKHNhbWVTaGFwZSlbMF07XG4gIGlmIChzaW1pbGFyKSBkcmF3YWJsZS5zaGFwZXMgPSBkcmF3YWJsZS5zaGFwZXMuZmlsdGVyKHMgPT4gIXNhbWVTaGFwZShzKSk7XG4gIGlmICghc2ltaWxhciB8fCBzaW1pbGFyLmJydXNoICE9PSBjdXIuYnJ1c2gpIGRyYXdhYmxlLnNoYXBlcy5wdXNoKGN1cik7XG4gIG9uQ2hhbmdlKGRyYXdhYmxlKTtcbn1cblxuZnVuY3Rpb24gb25DaGFuZ2UoZHJhd2FibGU6IERyYXdhYmxlKTogdm9pZCB7XG4gIGlmIChkcmF3YWJsZS5vbkNoYW5nZSkgZHJhd2FibGUub25DaGFuZ2UoZHJhd2FibGUuc2hhcGVzKTtcbn1cbiIsImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgKiBhcyBib2FyZCBmcm9tICcuL2JvYXJkJ1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBjYW5jZWwgYXMgY2FuY2VsRHJhZyB9IGZyb20gJy4vZHJhZydcblxuZXhwb3J0IGZ1bmN0aW9uIHNldERyb3BNb2RlKHM6IFN0YXRlLCBwaWVjZT86IGNnLlBpZWNlKTogdm9pZCB7XG4gIHMuZHJvcG1vZGUgPSB7XG4gICAgYWN0aXZlOiB0cnVlLFxuICAgIHBpZWNlXG4gIH07XG4gIGNhbmNlbERyYWcocyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5jZWxEcm9wTW9kZShzOiBTdGF0ZSk6IHZvaWQge1xuICBzLmRyb3Btb2RlID0ge1xuICAgIGFjdGl2ZTogZmFsc2VcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyb3AoczogU3RhdGUsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgaWYgKCFzLmRyb3Btb2RlLmFjdGl2ZSkgcmV0dXJuO1xuXG4gIGJvYXJkLnVuc2V0UHJlbW92ZShzKTtcbiAgYm9hcmQudW5zZXRQcmVkcm9wKHMpO1xuXG4gIGNvbnN0IHBpZWNlID0gcy5kcm9wbW9kZS5waWVjZTtcblxuICBpZiAocGllY2UpIHtcbiAgICBzLnBpZWNlcy5hMCA9IHBpZWNlO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gdXRpbC5ldmVudFBvc2l0aW9uKGUpO1xuICAgIGNvbnN0IGRlc3QgPSBwb3NpdGlvbiAmJiBib2FyZC5nZXRLZXlBdERvbVBvcyhcbiAgICAgIHBvc2l0aW9uLCBib2FyZC53aGl0ZVBvdihzKSwgcy5kb20uYm91bmRzKCkpO1xuICAgIGlmIChkZXN0KSBib2FyZC5kcm9wTmV3UGllY2UocywgJ2EwJywgZGVzdCk7XG4gIH1cbiAgcy5kb20ucmVkcmF3KCk7XG59XG4iLCJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgKiBhcyBkcmFnIGZyb20gJy4vZHJhZydcbmltcG9ydCAqIGFzIGRyYXcgZnJvbSAnLi9kcmF3J1xuaW1wb3J0IHsgZHJvcCB9IGZyb20gJy4vZHJvcCdcbmltcG9ydCB7IGlzUmlnaHRCdXR0b24gfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJ1xuXG50eXBlIE1vdWNoQmluZCA9IChlOiBjZy5Nb3VjaEV2ZW50KSA9PiB2b2lkO1xudHlwZSBTdGF0ZU1vdWNoQmluZCA9IChkOiBTdGF0ZSwgZTogY2cuTW91Y2hFdmVudCkgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRCb2FyZChzOiBTdGF0ZSk6IHZvaWQge1xuXG4gIGlmIChzLnZpZXdPbmx5KSByZXR1cm47XG5cbiAgY29uc3QgYm9hcmRFbCA9IHMuZG9tLmVsZW1lbnRzLmJvYXJkLFxuICBvblN0YXJ0ID0gc3RhcnREcmFnT3JEcmF3KHMpO1xuXG4gIC8vIENhbm5vdCBiZSBwYXNzaXZlLCBiZWNhdXNlIHdlIHByZXZlbnQgdG91Y2ggc2Nyb2xsaW5nIGFuZCBkcmFnZ2luZyBvZlxuICAvLyBzZWxlY3RlZCBlbGVtZW50cy5cbiAgYm9hcmRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25TdGFydCBhcyBFdmVudExpc3RlbmVyLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICBib2FyZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uU3RhcnQgYXMgRXZlbnRMaXN0ZW5lciwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcblxuICBpZiAocy5kaXNhYmxlQ29udGV4dE1lbnUgfHwgcy5kcmF3YWJsZS5lbmFibGVkKSB7XG4gICAgYm9hcmRFbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgfVxufVxuXG4vLyByZXR1cm5zIHRoZSB1bmJpbmQgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBiaW5kRG9jdW1lbnQoczogU3RhdGUsIHJlZHJhd0FsbDogY2cuUmVkcmF3KTogY2cuVW5iaW5kIHtcblxuICBjb25zdCB1bmJpbmRzOiBjZy5VbmJpbmRbXSA9IFtdO1xuXG4gIGlmICghcy5kb20ucmVsYXRpdmUgJiYgcy5yZXNpemFibGUpIHtcbiAgICBjb25zdCBvblJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIHMuZG9tLmJvdW5kcy5jbGVhcigpO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlZHJhd0FsbCk7XG4gICAgfTtcbiAgICB1bmJpbmRzLnB1c2godW5iaW5kYWJsZShkb2N1bWVudC5ib2R5LCAnY2hlc3Nncm91bmQucmVzaXplJywgb25SZXNpemUpKTtcbiAgfVxuXG4gIGlmICghcy52aWV3T25seSkge1xuXG4gICAgY29uc3Qgb25tb3ZlOiBNb3VjaEJpbmQgPSBkcmFnT3JEcmF3KHMsIGRyYWcubW92ZSwgZHJhdy5tb3ZlKTtcbiAgICBjb25zdCBvbmVuZDogTW91Y2hCaW5kID0gZHJhZ09yRHJhdyhzLCBkcmFnLmVuZCwgZHJhdy5lbmQpO1xuXG4gICAgWyd0b3VjaG1vdmUnLCAnbW91c2Vtb3ZlJ10uZm9yRWFjaChldiA9PiB1bmJpbmRzLnB1c2godW5iaW5kYWJsZShkb2N1bWVudCwgZXYsIG9ubW92ZSkpKTtcbiAgICBbJ3RvdWNoZW5kJywgJ21vdXNldXAnXS5mb3JFYWNoKGV2ID0+IHVuYmluZHMucHVzaCh1bmJpbmRhYmxlKGRvY3VtZW50LCBldiwgb25lbmQpKSk7XG5cbiAgICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHMuZG9tLmJvdW5kcy5jbGVhcigpO1xuICAgIHVuYmluZHMucHVzaCh1bmJpbmRhYmxlKHdpbmRvdywgJ3Njcm9sbCcsIG9uU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSkpO1xuICAgIHVuYmluZHMucHVzaCh1bmJpbmRhYmxlKHdpbmRvdywgJ3Jlc2l6ZScsIG9uU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSkpO1xuICB9XG5cbiAgcmV0dXJuICgpID0+IHVuYmluZHMuZm9yRWFjaChmID0+IGYoKSk7XG59XG5cbmZ1bmN0aW9uIHVuYmluZGFibGUoZWw6IEV2ZW50VGFyZ2V0LCBldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IE1vdWNoQmluZCwgb3B0aW9ucz86IGFueSk6IGNnLlVuYmluZCB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayBhcyBFdmVudExpc3RlbmVyLCBvcHRpb25zKTtcbiAgcmV0dXJuICgpID0+IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayBhcyBFdmVudExpc3RlbmVyKTtcbn1cblxuZnVuY3Rpb24gc3RhcnREcmFnT3JEcmF3KHM6IFN0YXRlKTogTW91Y2hCaW5kIHtcbiAgcmV0dXJuIGUgPT4ge1xuICAgIGlmIChzLmRyYWdnYWJsZS5jdXJyZW50KSBkcmFnLmNhbmNlbChzKTtcbiAgICBlbHNlIGlmIChzLmRyYXdhYmxlLmN1cnJlbnQpIGRyYXcuY2FuY2VsKHMpO1xuICAgIGVsc2UgaWYgKGUuc2hpZnRLZXkgfHwgaXNSaWdodEJ1dHRvbihlKSkgeyBpZiAocy5kcmF3YWJsZS5lbmFibGVkKSBkcmF3LnN0YXJ0KHMsIGUpOyB9XG4gICAgZWxzZSBpZiAoIXMudmlld09ubHkpIHtcbiAgICAgIGlmIChzLmRyb3Btb2RlLmFjdGl2ZSkgZHJvcChzLCBlKTtcbiAgICAgIGVsc2UgZHJhZy5zdGFydChzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRyYWdPckRyYXcoczogU3RhdGUsIHdpdGhEcmFnOiBTdGF0ZU1vdWNoQmluZCwgd2l0aERyYXc6IFN0YXRlTW91Y2hCaW5kKTogTW91Y2hCaW5kIHtcbiAgcmV0dXJuIGUgPT4ge1xuICAgIGlmIChlLnNoaWZ0S2V5IHx8IGlzUmlnaHRCdXR0b24oZSkpIHsgaWYgKHMuZHJhd2FibGUuZW5hYmxlZCkgd2l0aERyYXcocywgZSk7IH1cbiAgICBlbHNlIGlmICghcy52aWV3T25seSkgd2l0aERyYWcocywgZSk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyBLZXkgfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBleHBsb3Npb24oc3RhdGU6IFN0YXRlLCBrZXlzOiBLZXlbXSk6IHZvaWQge1xuICBzdGF0ZS5leHBsb2RpbmcgPSB7IHN0YWdlOiAxLCBrZXlzIH07XG4gIHN0YXRlLmRvbS5yZWRyYXcoKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgc2V0U3RhZ2Uoc3RhdGUsIDIpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0U3RhZ2Uoc3RhdGUsIHVuZGVmaW5lZCksIDEyMCk7XG4gIH0sIDEyMCk7XG59XG5cbmZ1bmN0aW9uIHNldFN0YWdlKHN0YXRlOiBTdGF0ZSwgc3RhZ2U6IG51bWJlciB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICBpZiAoc3RhdGUuZXhwbG9kaW5nKSB7XG4gICAgaWYgKHN0YWdlKSBzdGF0ZS5leHBsb2Rpbmcuc3RhZ2UgPSBzdGFnZTtcbiAgICBlbHNlIHN0YXRlLmV4cGxvZGluZyA9IHVuZGVmaW5lZDtcbiAgICBzdGF0ZS5kb20ucmVkcmF3KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IHBvczJrZXksIGludlJhbmtzIH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0ICogYXMgY2cgZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IGluaXRpYWw6IGNnLkZFTiA9ICdybmJxa2Juci9wcHBwcHBwcC84LzgvOC84L1BQUFBQUFBQL1JOQlFLQk5SJztcblxuY29uc3Qgcm9sZXM6IHsgW2xldHRlcjogc3RyaW5nXTogY2cuUm9sZSB9ID0geyBwOiAncGF3bicsIHI6ICdyb29rJywgbjogJ2tuaWdodCcsIGI6ICdiaXNob3AnLCBxOiAncXVlZW4nLCBrOiAna2luZycgfTtcblxuY29uc3QgbGV0dGVycyA9IHsgcGF3bjogJ3AnLCByb29rOiAncicsIGtuaWdodDogJ24nLCBiaXNob3A6ICdiJywgcXVlZW46ICdxJywga2luZzogJ2snIH07XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkKGZlbjogY2cuRkVOKTogY2cuUGllY2VzIHtcbiAgaWYgKGZlbiA9PT0gJ3N0YXJ0JykgZmVuID0gaW5pdGlhbDtcbiAgY29uc3QgcGllY2VzOiBjZy5QaWVjZXMgPSB7fTtcbiAgbGV0IHJvdzogbnVtYmVyID0gOCwgY29sOiBudW1iZXIgPSAwO1xuICBmb3IgKGNvbnN0IGMgb2YgZmVuKSB7XG4gICAgc3dpdGNoIChjKSB7XG4gICAgICBjYXNlICcgJzogcmV0dXJuIHBpZWNlcztcbiAgICAgIGNhc2UgJy8nOlxuICAgICAgICAtLXJvdztcbiAgICAgICAgaWYgKHJvdyA9PT0gMCkgcmV0dXJuIHBpZWNlcztcbiAgICAgICAgY29sID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd+JzpcbiAgICAgICAgY29uc3QgcGllY2UgPSBwaWVjZXNbcG9zMmtleShbY29sLCByb3ddKV07XG4gICAgICAgIGlmIChwaWVjZSkgcGllY2UucHJvbW90ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnN0IG5iID0gYy5jaGFyQ29kZUF0KDApO1xuICAgICAgICBpZiAobmIgPCA1NykgY29sICs9IG5iIC0gNDg7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICsrY29sO1xuICAgICAgICAgIGNvbnN0IHJvbGUgPSBjLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgcGllY2VzW3BvczJrZXkoW2NvbCwgcm93XSldID0ge1xuICAgICAgICAgICAgcm9sZTogcm9sZXNbcm9sZV0sXG4gICAgICAgICAgICBjb2xvcjogKGMgPT09IHJvbGUgPyAnYmxhY2snIDogJ3doaXRlJykgYXMgY2cuQ29sb3JcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBwaWVjZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZShwaWVjZXM6IGNnLlBpZWNlcyk6IGNnLkZFTiB7XG4gIHJldHVybiBpbnZSYW5rcy5tYXAoeSA9PiBjZy5yYW5rcy5tYXAoeCA9PiB7XG4gICAgICBjb25zdCBwaWVjZSA9IHBpZWNlc1twb3Mya2V5KFt4LCB5XSldO1xuICAgICAgaWYgKHBpZWNlKSB7XG4gICAgICAgIGNvbnN0IGxldHRlciA9IGxldHRlcnNbcGllY2Uucm9sZV07XG4gICAgICAgIHJldHVybiBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/IGxldHRlci50b1VwcGVyQ2FzZSgpIDogbGV0dGVyO1xuICAgICAgfSBlbHNlIHJldHVybiAnMSc7XG4gICAgfSkuam9pbignJylcbiAgKS5qb2luKCcvJykucmVwbGFjZSgvMXsyLH0vZywgcyA9PiBzLmxlbmd0aC50b1N0cmluZygpKTtcbn1cbiIsImltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJ1xuaW1wb3J0ICogYXMgY2cgZnJvbSAnLi90eXBlcydcblxudHlwZSBNb2JpbGl0eSA9ICh4MTpudW1iZXIsIHkxOm51bWJlciwgeDI6bnVtYmVyLCB5MjpudW1iZXIpID0+IGJvb2xlYW47XG5cbmZ1bmN0aW9uIGRpZmYoYTogbnVtYmVyLCBiOm51bWJlcik6bnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKTtcbn1cblxuZnVuY3Rpb24gcGF3bihjb2xvcjogY2cuQ29sb3IpOiBNb2JpbGl0eSB7XG4gIHJldHVybiAoeDEsIHkxLCB4MiwgeTIpID0+IGRpZmYoeDEsIHgyKSA8IDIgJiYgKFxuICAgIGNvbG9yID09PSAnd2hpdGUnID8gKFxuICAgICAgLy8gYWxsb3cgMiBzcXVhcmVzIGZyb20gMSBhbmQgOCwgZm9yIGhvcmRlXG4gICAgICB5MiA9PT0geTEgKyAxIHx8ICh5MSA8PSAyICYmIHkyID09PSAoeTEgKyAyKSAmJiB4MSA9PT0geDIpXG4gICAgKSA6IChcbiAgICAgIHkyID09PSB5MSAtIDEgfHwgKHkxID49IDcgJiYgeTIgPT09ICh5MSAtIDIpICYmIHgxID09PSB4MilcbiAgICApXG4gICk7XG59XG5cbmNvbnN0IGtuaWdodDogTW9iaWxpdHkgPSAoeDEsIHkxLCB4MiwgeTIpID0+IHtcbiAgY29uc3QgeGQgPSBkaWZmKHgxLCB4Mik7XG4gIGNvbnN0IHlkID0gZGlmZih5MSwgeTIpO1xuICByZXR1cm4gKHhkID09PSAxICYmIHlkID09PSAyKSB8fCAoeGQgPT09IDIgJiYgeWQgPT09IDEpO1xufVxuXG5jb25zdCBiaXNob3A6IE1vYmlsaXR5ID0gKHgxLCB5MSwgeDIsIHkyKSA9PiB7XG4gIHJldHVybiBkaWZmKHgxLCB4MikgPT09IGRpZmYoeTEsIHkyKTtcbn1cblxuY29uc3Qgcm9vazogTW9iaWxpdHkgPSAoeDEsIHkxLCB4MiwgeTIpID0+IHtcbiAgcmV0dXJuIHgxID09PSB4MiB8fCB5MSA9PT0geTI7XG59XG5cbmNvbnN0IHF1ZWVuOiBNb2JpbGl0eSA9ICh4MSwgeTEsIHgyLCB5MikgPT4ge1xuICByZXR1cm4gYmlzaG9wKHgxLCB5MSwgeDIsIHkyKSB8fCByb29rKHgxLCB5MSwgeDIsIHkyKTtcbn1cblxuZnVuY3Rpb24ga2luZyhjb2xvcjogY2cuQ29sb3IsIHJvb2tGaWxlczogbnVtYmVyW10sIGNhbkNhc3RsZTogYm9vbGVhbik6IE1vYmlsaXR5IHtcbiAgcmV0dXJuICh4MSwgeTEsIHgyLCB5MikgID0+IChcbiAgICBkaWZmKHgxLCB4MikgPCAyICYmIGRpZmYoeTEsIHkyKSA8IDJcbiAgKSB8fCAoXG4gICAgY2FuQ2FzdGxlICYmIHkxID09PSB5MiAmJiB5MSA9PT0gKGNvbG9yID09PSAnd2hpdGUnID8gMSA6IDgpICYmIChcbiAgICAgICh4MSA9PT0gNSAmJiAoKHV0aWwuY29udGFpbnNYKHJvb2tGaWxlcywgMSkgJiYgeDIgPT09IDMpIHx8ICh1dGlsLmNvbnRhaW5zWChyb29rRmlsZXMsIDgpICYmIHgyID09PSA3KSkpIHx8XG4gICAgICB1dGlsLmNvbnRhaW5zWChyb29rRmlsZXMsIHgyKVxuICAgIClcbiAgKTtcbn1cblxuZnVuY3Rpb24gcm9va0ZpbGVzT2YocGllY2VzOiBjZy5QaWVjZXMsIGNvbG9yOiBjZy5Db2xvcikge1xuICBjb25zdCBiYWNrcmFuayA9IGNvbG9yID09ICd3aGl0ZScgPyAnMScgOiAnOCc7XG4gIHJldHVybiBPYmplY3Qua2V5cyhwaWVjZXMpLmZpbHRlcihrZXkgPT4ge1xuICAgIGNvbnN0IHBpZWNlID0gcGllY2VzW2tleV07XG4gICAgcmV0dXJuIGtleVsxXSA9PT0gYmFja3JhbmsgJiYgcGllY2UgJiYgcGllY2UuY29sb3IgPT09IGNvbG9yICYmIHBpZWNlLnJvbGUgPT09ICdyb29rJztcbiAgfSkubWFwKChrZXk6IHN0cmluZyApID0+IHV0aWwua2V5MnBvcyhrZXkgYXMgY2cuS2V5KVswXSk7XG59XG5cbmNvbnN0IGFsbFBvcyA9IHV0aWwuYWxsS2V5cy5tYXAodXRpbC5rZXkycG9zKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJlbW92ZShwaWVjZXM6IGNnLlBpZWNlcywga2V5OiBjZy5LZXksIGNhbkNhc3RsZTogYm9vbGVhbik6IGNnLktleVtdIHtcbiAgY29uc3QgcGllY2UgPSBwaWVjZXNba2V5XSEsXG4gICAgcG9zID0gdXRpbC5rZXkycG9zKGtleSksXG4gICAgciA9IHBpZWNlLnJvbGUsXG4gICAgbW9iaWxpdHk6IE1vYmlsaXR5ID0gciA9PT0gJ3Bhd24nID8gcGF3bihwaWVjZS5jb2xvcikgOiAoXG4gICAgICByID09PSAna25pZ2h0JyA/IGtuaWdodCA6IChcbiAgICAgICAgciA9PT0gJ2Jpc2hvcCcgPyBiaXNob3AgOiAoXG4gICAgICAgICAgciA9PT0gJ3Jvb2snID8gcm9vayA6IChcbiAgICAgICAgICAgIHIgPT09ICdxdWVlbicgPyBxdWVlbiA6IGtpbmcocGllY2UuY29sb3IsIHJvb2tGaWxlc09mKHBpZWNlcywgcGllY2UuY29sb3IpLCBjYW5DYXN0bGUpXG4gICAgICAgICAgKSkpKTtcbiAgcmV0dXJuIGFsbFBvcy5maWx0ZXIocG9zMiA9PlxuICAgIChwb3NbMF0gIT09IHBvczJbMF0gfHwgcG9zWzFdICE9PSBwb3MyWzFdKSAmJiBtb2JpbGl0eShwb3NbMF0sIHBvc1sxXSwgcG9zMlswXSwgcG9zMlsxXSlcbiAgKS5tYXAodXRpbC5wb3Mya2V5KTtcbn07XG4iLCJpbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyBrZXkycG9zLCBjcmVhdGVFbCB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCB7IHdoaXRlUG92IH0gZnJvbSAnLi9ib2FyZCdcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJ1xuaW1wb3J0IHsgQW5pbUN1cnJlbnQsIEFuaW1WZWN0b3JzLCBBbmltVmVjdG9yLCBBbmltRmFkaW5ncyB9IGZyb20gJy4vYW5pbSdcbmltcG9ydCB7IERyYWdDdXJyZW50IH0gZnJvbSAnLi9kcmFnJ1xuaW1wb3J0ICogYXMgY2cgZnJvbSAnLi90eXBlcydcblxuLy8gYCRjb2xvciAkcm9sZWBcbnR5cGUgUGllY2VOYW1lID0gc3RyaW5nO1xuXG5pbnRlcmZhY2UgU2FtZVBpZWNlcyB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfVxuaW50ZXJmYWNlIFNhbWVTcXVhcmVzIHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9XG5pbnRlcmZhY2UgTW92ZWRQaWVjZXMgeyBbcGllY2VOYW1lOiBzdHJpbmddOiBjZy5QaWVjZU5vZGVbXSB9XG5pbnRlcmZhY2UgTW92ZWRTcXVhcmVzIHsgW2NsYXNzTmFtZTogc3RyaW5nXTogY2cuU3F1YXJlTm9kZVtdIH1cbmludGVyZmFjZSBTcXVhcmVDbGFzc2VzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cblxuLy8gcG9ydGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3ZlbG9jZS9saWNob2JpbGUvYmxvYi9tYXN0ZXIvc3JjL2pzL2NoZXNzZ3JvdW5kL3ZpZXcuanNcbi8vIGluIGNhc2Ugb2YgYnVncywgYmxhbWUgQHZlbG9jZVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVuZGVyKHM6IFN0YXRlKTogdm9pZCB7XG4gIGNvbnN0IGFzV2hpdGU6IGJvb2xlYW4gPSB3aGl0ZVBvdihzKSxcbiAgcG9zVG9UcmFuc2xhdGUgPSBzLmRvbS5yZWxhdGl2ZSA/IHV0aWwucG9zVG9UcmFuc2xhdGVSZWwgOiB1dGlsLnBvc1RvVHJhbnNsYXRlQWJzKHMuZG9tLmJvdW5kcygpKSxcbiAgdHJhbnNsYXRlID0gcy5kb20ucmVsYXRpdmUgPyB1dGlsLnRyYW5zbGF0ZVJlbCA6IHV0aWwudHJhbnNsYXRlQWJzLFxuICBib2FyZEVsOiBIVE1MRWxlbWVudCA9IHMuZG9tLmVsZW1lbnRzLmJvYXJkLFxuICBwaWVjZXM6IGNnLlBpZWNlcyA9IHMucGllY2VzLFxuICBjdXJBbmltOiBBbmltQ3VycmVudCB8IHVuZGVmaW5lZCA9IHMuYW5pbWF0aW9uLmN1cnJlbnQsXG4gIGFuaW1zOiBBbmltVmVjdG9ycyA9IGN1ckFuaW0gPyBjdXJBbmltLnBsYW4uYW5pbXMgOiB7fSxcbiAgZmFkaW5nczogQW5pbUZhZGluZ3MgPSBjdXJBbmltID8gY3VyQW5pbS5wbGFuLmZhZGluZ3MgOiB7fSxcbiAgY3VyRHJhZzogRHJhZ0N1cnJlbnQgfCB1bmRlZmluZWQgPSBzLmRyYWdnYWJsZS5jdXJyZW50LFxuICBzcXVhcmVzOiBTcXVhcmVDbGFzc2VzID0gY29tcHV0ZVNxdWFyZUNsYXNzZXMocyksXG4gIHNhbWVQaWVjZXM6IFNhbWVQaWVjZXMgPSB7fSxcbiAgc2FtZVNxdWFyZXM6IFNhbWVTcXVhcmVzID0ge30sXG4gIG1vdmVkUGllY2VzOiBNb3ZlZFBpZWNlcyA9IHt9LFxuICBtb3ZlZFNxdWFyZXM6IE1vdmVkU3F1YXJlcyA9IHt9LFxuICBwaWVjZXNLZXlzOiBjZy5LZXlbXSA9IE9iamVjdC5rZXlzKHBpZWNlcykgYXMgY2cuS2V5W107XG4gIGxldCBrOiBjZy5LZXksXG4gIHA6IGNnLlBpZWNlIHwgdW5kZWZpbmVkLFxuICBlbDogY2cuUGllY2VOb2RlIHwgY2cuU3F1YXJlTm9kZSxcbiAgcGllY2VBdEtleTogY2cuUGllY2UgfCB1bmRlZmluZWQsXG4gIGVsUGllY2VOYW1lOiBQaWVjZU5hbWUsXG4gIGFuaW06IEFuaW1WZWN0b3IgfCB1bmRlZmluZWQsXG4gIGZhZGluZzogY2cuUGllY2UgfCB1bmRlZmluZWQsXG4gIHBNdmRzZXQ6IGNnLlBpZWNlTm9kZVtdLFxuICBwTXZkOiBjZy5QaWVjZU5vZGUgfCB1bmRlZmluZWQsXG4gIHNNdmRzZXQ6IGNnLlNxdWFyZU5vZGVbXSxcbiAgc012ZDogY2cuU3F1YXJlTm9kZSB8IHVuZGVmaW5lZDtcblxuICAvLyB3YWxrIG92ZXIgYWxsIGJvYXJkIGRvbSBlbGVtZW50cywgYXBwbHkgYW5pbWF0aW9ucyBhbmQgZmxhZyBtb3ZlZCBwaWVjZXNcbiAgZWwgPSBib2FyZEVsLmZpcnN0Q2hpbGQgYXMgY2cuUGllY2VOb2RlIHwgY2cuU3F1YXJlTm9kZTtcbiAgd2hpbGUgKGVsKSB7XG4gICAgayA9IGVsLmNnS2V5O1xuICAgIGlmIChpc1BpZWNlTm9kZShlbCkpIHtcbiAgICAgIHBpZWNlQXRLZXkgPSBwaWVjZXNba107XG4gICAgICBhbmltID0gYW5pbXNba107XG4gICAgICBmYWRpbmcgPSBmYWRpbmdzW2tdO1xuICAgICAgZWxQaWVjZU5hbWUgPSBlbC5jZ1BpZWNlO1xuICAgICAgLy8gaWYgcGllY2Ugbm90IGJlaW5nIGRyYWdnZWQgYW55bW9yZSwgcmVtb3ZlIGRyYWdnaW5nIHN0eWxlXG4gICAgICBpZiAoZWwuY2dEcmFnZ2luZyAmJiAoIWN1ckRyYWcgfHwgY3VyRHJhZy5vcmlnICE9PSBrKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuICAgICAgICB0cmFuc2xhdGUoZWwsIHBvc1RvVHJhbnNsYXRlKGtleTJwb3MoayksIGFzV2hpdGUpKTtcbiAgICAgICAgZWwuY2dEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIGZhZGluZyBjbGFzcyBpZiBpdCBzdGlsbCByZW1haW5zXG4gICAgICBpZiAoIWZhZGluZyAmJiBlbC5jZ0ZhZGluZykge1xuICAgICAgICBlbC5jZ0ZhZGluZyA9IGZhbHNlO1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRpbmcnKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZXJlIGlzIG5vdyBhIHBpZWNlIGF0IHRoaXMgZG9tIGtleVxuICAgICAgaWYgKHBpZWNlQXRLZXkpIHtcbiAgICAgICAgLy8gY29udGludWUgYW5pbWF0aW9uIGlmIGFscmVhZHkgYW5pbWF0aW5nIGFuZCBzYW1lIHBpZWNlXG4gICAgICAgIC8vIChvdGhlcndpc2UgaXQgY291bGQgYW5pbWF0ZSBhIGNhcHR1cmVkIHBpZWNlKVxuICAgICAgICBpZiAoYW5pbSAmJiBlbC5jZ0FuaW1hdGluZyAmJiBlbFBpZWNlTmFtZSA9PT0gcGllY2VOYW1lT2YocGllY2VBdEtleSkpIHtcbiAgICAgICAgICBjb25zdCBwb3MgPSBrZXkycG9zKGspO1xuICAgICAgICAgIHBvc1swXSArPSBhbmltWzJdO1xuICAgICAgICAgIHBvc1sxXSArPSBhbmltWzNdO1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FuaW0nKTtcbiAgICAgICAgICB0cmFuc2xhdGUoZWwsIHBvc1RvVHJhbnNsYXRlKHBvcywgYXNXaGl0ZSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsLmNnQW5pbWF0aW5nKSB7XG4gICAgICAgICAgZWwuY2dBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhbmltJyk7XG4gICAgICAgICAgdHJhbnNsYXRlKGVsLCBwb3NUb1RyYW5zbGF0ZShrZXkycG9zKGspLCBhc1doaXRlKSk7XG4gICAgICAgICAgaWYgKHMuYWRkUGllY2VaSW5kZXgpIGVsLnN0eWxlLnpJbmRleCA9IHBvc1pJbmRleChrZXkycG9zKGspLCBhc1doaXRlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYW1lIHBpZWNlOiBmbGFnIGFzIHNhbWVcbiAgICAgICAgaWYgKGVsUGllY2VOYW1lID09PSBwaWVjZU5hbWVPZihwaWVjZUF0S2V5KSAmJiAoIWZhZGluZyB8fCAhZWwuY2dGYWRpbmcpKSB7XG4gICAgICAgICAgc2FtZVBpZWNlc1trXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGlmZmVyZW50IHBpZWNlOiBmbGFnIGFzIG1vdmVkIHVubGVzcyBpdCBpcyBhIGZhZGluZyBwaWVjZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBpZiAoZmFkaW5nICYmIGVsUGllY2VOYW1lID09PSBwaWVjZU5hbWVPZihmYWRpbmcpKSB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmYWRpbmcnKTtcbiAgICAgICAgICAgIGVsLmNnRmFkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1vdmVkUGllY2VzW2VsUGllY2VOYW1lXSkgbW92ZWRQaWVjZXNbZWxQaWVjZU5hbWVdLnB1c2goZWwpO1xuICAgICAgICAgICAgZWxzZSBtb3ZlZFBpZWNlc1tlbFBpZWNlTmFtZV0gPSBbZWxdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gbm8gcGllY2U6IGZsYWcgYXMgbW92ZWRcbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAobW92ZWRQaWVjZXNbZWxQaWVjZU5hbWVdKSBtb3ZlZFBpZWNlc1tlbFBpZWNlTmFtZV0ucHVzaChlbCk7XG4gICAgICAgIGVsc2UgbW92ZWRQaWVjZXNbZWxQaWVjZU5hbWVdID0gW2VsXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTcXVhcmVOb2RlKGVsKSkge1xuICAgICAgY29uc3QgY24gPSBlbC5jbGFzc05hbWU7XG4gICAgICBpZiAoc3F1YXJlc1trXSA9PT0gY24pIHNhbWVTcXVhcmVzW2tdID0gdHJ1ZTtcbiAgICAgIGVsc2UgaWYgKG1vdmVkU3F1YXJlc1tjbl0pIG1vdmVkU3F1YXJlc1tjbl0ucHVzaChlbCk7XG4gICAgICBlbHNlIG1vdmVkU3F1YXJlc1tjbl0gPSBbZWxdO1xuICAgIH1cbiAgICBlbCA9IGVsLm5leHRTaWJsaW5nIGFzIGNnLlBpZWNlTm9kZSB8IGNnLlNxdWFyZU5vZGU7XG4gIH1cblxuICAvLyB3YWxrIG92ZXIgYWxsIHNxdWFyZXMgaW4gY3VycmVudCBzZXQsIGFwcGx5IGRvbSBjaGFuZ2VzIHRvIG1vdmVkIHNxdWFyZXNcbiAgLy8gb3IgYXBwZW5kIG5ldyBzcXVhcmVzXG4gIGZvciAoY29uc3Qgc2sgaW4gc3F1YXJlcykge1xuICAgIGlmICghc2FtZVNxdWFyZXNbc2tdKSB7XG4gICAgICBzTXZkc2V0ID0gbW92ZWRTcXVhcmVzW3NxdWFyZXNbc2tdXTtcbiAgICAgIHNNdmQgPSBzTXZkc2V0ICYmIHNNdmRzZXQucG9wKCk7XG4gICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHBvc1RvVHJhbnNsYXRlKGtleTJwb3Moc2sgYXMgY2cuS2V5KSwgYXNXaGl0ZSk7XG4gICAgICBpZiAoc012ZCkge1xuICAgICAgICBzTXZkLmNnS2V5ID0gc2sgYXMgY2cuS2V5O1xuICAgICAgICB0cmFuc2xhdGUoc012ZCwgdHJhbnNsYXRpb24pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHNxdWFyZU5vZGUgPSBjcmVhdGVFbCgnc3F1YXJlJywgc3F1YXJlc1tza10pIGFzIGNnLlNxdWFyZU5vZGU7XG4gICAgICAgIHNxdWFyZU5vZGUuY2dLZXkgPSBzayBhcyBjZy5LZXk7XG4gICAgICAgIHRyYW5zbGF0ZShzcXVhcmVOb2RlLCB0cmFuc2xhdGlvbik7XG4gICAgICAgIGJvYXJkRWwuaW5zZXJ0QmVmb3JlKHNxdWFyZU5vZGUsIGJvYXJkRWwuZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gd2FsayBvdmVyIGFsbCBwaWVjZXMgaW4gY3VycmVudCBzZXQsIGFwcGx5IGRvbSBjaGFuZ2VzIHRvIG1vdmVkIHBpZWNlc1xuICAvLyBvciBhcHBlbmQgbmV3IHBpZWNlc1xuICBmb3IgKGNvbnN0IGogaW4gcGllY2VzS2V5cykge1xuICAgIGsgPSBwaWVjZXNLZXlzW2pdO1xuICAgIHAgPSBwaWVjZXNba10hO1xuICAgIGFuaW0gPSBhbmltc1trXTtcbiAgICBpZiAoIXNhbWVQaWVjZXNba10pIHtcbiAgICAgIHBNdmRzZXQgPSBtb3ZlZFBpZWNlc1twaWVjZU5hbWVPZihwKV07XG4gICAgICBwTXZkID0gcE12ZHNldCAmJiBwTXZkc2V0LnBvcCgpO1xuICAgICAgLy8gYSBzYW1lIHBpZWNlIHdhcyBtb3ZlZFxuICAgICAgaWYgKHBNdmQpIHtcbiAgICAgICAgLy8gYXBwbHkgZG9tIGNoYW5nZXNcbiAgICAgICAgcE12ZC5jZ0tleSA9IGs7XG4gICAgICAgIGlmIChwTXZkLmNnRmFkaW5nKSB7XG4gICAgICAgICAgcE12ZC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRpbmcnKTtcbiAgICAgICAgICBwTXZkLmNnRmFkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zID0ga2V5MnBvcyhrKTtcbiAgICAgICAgaWYgKHMuYWRkUGllY2VaSW5kZXgpIHBNdmQuc3R5bGUuekluZGV4ID0gcG9zWkluZGV4KHBvcywgYXNXaGl0ZSk7XG4gICAgICAgIGlmIChhbmltKSB7XG4gICAgICAgICAgcE12ZC5jZ0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgcE12ZC5jbGFzc0xpc3QuYWRkKCdhbmltJyk7XG4gICAgICAgICAgcG9zWzBdICs9IGFuaW1bMl07XG4gICAgICAgICAgcG9zWzFdICs9IGFuaW1bM107XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNsYXRlKHBNdmQsIHBvc1RvVHJhbnNsYXRlKHBvcywgYXNXaGl0ZSkpO1xuICAgICAgfVxuICAgICAgLy8gbm8gcGllY2UgaW4gbW92ZWQgb2JqOiBpbnNlcnQgdGhlIG5ldyBwaWVjZVxuICAgICAgLy8gYXNzdW1lcyB0aGUgbmV3IHBpZWNlIGlzIG5vdCBiZWluZyBkcmFnZ2VkXG4gICAgICBlbHNlIHtcblxuICAgICAgICBjb25zdCBwaWVjZU5hbWUgPSBwaWVjZU5hbWVPZihwKSxcbiAgICAgICAgcGllY2VOb2RlID0gY3JlYXRlRWwoJ3BpZWNlJywgcGllY2VOYW1lKSBhcyBjZy5QaWVjZU5vZGUsXG4gICAgICAgIHBvcyA9IGtleTJwb3Moayk7XG5cbiAgICAgICAgcGllY2VOb2RlLmNnUGllY2UgPSBwaWVjZU5hbWU7XG4gICAgICAgIHBpZWNlTm9kZS5jZ0tleSA9IGs7XG4gICAgICAgIGlmIChhbmltKSB7XG4gICAgICAgICAgcGllY2VOb2RlLmNnQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICBwb3NbMF0gKz0gYW5pbVsyXTtcbiAgICAgICAgICBwb3NbMV0gKz0gYW5pbVszXTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2xhdGUocGllY2VOb2RlLCBwb3NUb1RyYW5zbGF0ZShwb3MsIGFzV2hpdGUpKTtcblxuICAgICAgICBpZiAocy5hZGRQaWVjZVpJbmRleCkgcGllY2VOb2RlLnN0eWxlLnpJbmRleCA9IHBvc1pJbmRleChwb3MsIGFzV2hpdGUpO1xuXG4gICAgICAgIGJvYXJkRWwuYXBwZW5kQ2hpbGQocGllY2VOb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyByZW1vdmUgYW55IGVsZW1lbnQgdGhhdCByZW1haW5zIGluIHRoZSBtb3ZlZCBzZXRzXG4gIGZvciAoY29uc3QgaSBpbiBtb3ZlZFBpZWNlcykgcmVtb3ZlTm9kZXMocywgbW92ZWRQaWVjZXNbaV0pO1xuICBmb3IgKGNvbnN0IGkgaW4gbW92ZWRTcXVhcmVzKSByZW1vdmVOb2RlcyhzLCBtb3ZlZFNxdWFyZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBpc1BpZWNlTm9kZShlbDogY2cuUGllY2VOb2RlIHwgY2cuU3F1YXJlTm9kZSk6IGVsIGlzIGNnLlBpZWNlTm9kZSB7XG4gIHJldHVybiBlbC50YWdOYW1lID09PSAnUElFQ0UnO1xufVxuZnVuY3Rpb24gaXNTcXVhcmVOb2RlKGVsOiBjZy5QaWVjZU5vZGUgfCBjZy5TcXVhcmVOb2RlKTogZWwgaXMgY2cuU3F1YXJlTm9kZSB7XG4gIHJldHVybiBlbC50YWdOYW1lID09PSAnU1FVQVJFJztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTm9kZXMoczogU3RhdGUsIG5vZGVzOiBIVE1MRWxlbWVudFtdKTogdm9pZCB7XG4gIGZvciAoY29uc3QgaSBpbiBub2Rlcykgcy5kb20uZWxlbWVudHMuYm9hcmQucmVtb3ZlQ2hpbGQobm9kZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBwb3NaSW5kZXgocG9zOiBjZy5Qb3MsIGFzV2hpdGU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBsZXQgeiA9IDIgKyAocG9zWzFdIC0gMSkgKiA4ICsgKDggLSBwb3NbMF0pO1xuICBpZiAoYXNXaGl0ZSkgeiA9IDY3IC0gejtcbiAgcmV0dXJuIHogKyAnJztcbn1cblxuZnVuY3Rpb24gcGllY2VOYW1lT2YocGllY2U6IGNnLlBpZWNlKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke3BpZWNlLmNvbG9yfSAke3BpZWNlLnJvbGV9YDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVNxdWFyZUNsYXNzZXMoczogU3RhdGUpOiBTcXVhcmVDbGFzc2VzIHtcbiAgY29uc3Qgc3F1YXJlczogU3F1YXJlQ2xhc3NlcyA9IHt9O1xuICBsZXQgaTogYW55LCBrOiBjZy5LZXk7XG4gIGlmIChzLmxhc3RNb3ZlICYmIHMuaGlnaGxpZ2h0Lmxhc3RNb3ZlKSBmb3IgKGkgaW4gcy5sYXN0TW92ZSkge1xuICAgIGFkZFNxdWFyZShzcXVhcmVzLCBzLmxhc3RNb3ZlW2ldLCAnbGFzdC1tb3ZlJyk7XG4gIH1cbiAgaWYgKHMuY2hlY2sgJiYgcy5oaWdobGlnaHQuY2hlY2spIGFkZFNxdWFyZShzcXVhcmVzLCBzLmNoZWNrLCAnY2hlY2snKTtcbiAgaWYgKHMuc2VsZWN0ZWQpIHtcbiAgICBhZGRTcXVhcmUoc3F1YXJlcywgcy5zZWxlY3RlZCwgJ3NlbGVjdGVkJyk7XG4gICAgaWYgKHMubW92YWJsZS5zaG93RGVzdHMpIHtcbiAgICAgIGNvbnN0IGRlc3RzID0gcy5tb3ZhYmxlLmRlc3RzICYmIHMubW92YWJsZS5kZXN0c1tzLnNlbGVjdGVkXTtcbiAgICAgIGlmIChkZXN0cykgZm9yIChpIGluIGRlc3RzKSB7XG4gICAgICAgIGsgPSBkZXN0c1tpXTtcbiAgICAgICAgYWRkU3F1YXJlKHNxdWFyZXMsIGssICdtb3ZlLWRlc3QnICsgKHMucGllY2VzW2tdID8gJyBvYycgOiAnJykpO1xuICAgICAgfVxuICAgICAgY29uc3QgcERlc3RzID0gcy5wcmVtb3ZhYmxlLmRlc3RzO1xuICAgICAgaWYgKHBEZXN0cykgZm9yIChpIGluIHBEZXN0cykge1xuICAgICAgICBrID0gcERlc3RzW2ldO1xuICAgICAgICBhZGRTcXVhcmUoc3F1YXJlcywgaywgJ3ByZW1vdmUtZGVzdCcgKyAocy5waWVjZXNba10gPyAnIG9jJyA6ICcnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IHByZW1vdmUgPSBzLnByZW1vdmFibGUuY3VycmVudDtcbiAgaWYgKHByZW1vdmUpIGZvciAoaSBpbiBwcmVtb3ZlKSBhZGRTcXVhcmUoc3F1YXJlcywgcHJlbW92ZVtpXSwgJ2N1cnJlbnQtcHJlbW92ZScpO1xuICBlbHNlIGlmIChzLnByZWRyb3BwYWJsZS5jdXJyZW50KSBhZGRTcXVhcmUoc3F1YXJlcywgcy5wcmVkcm9wcGFibGUuY3VycmVudC5rZXksICdjdXJyZW50LXByZW1vdmUnKTtcblxuICBjb25zdCBvID0gcy5leHBsb2Rpbmc7XG4gIGlmIChvKSBmb3IgKGkgaW4gby5rZXlzKSBhZGRTcXVhcmUoc3F1YXJlcywgby5rZXlzW2ldLCAnZXhwbG9kaW5nJyArIG8uc3RhZ2UpO1xuXG4gIHJldHVybiBzcXVhcmVzO1xufVxuXG5mdW5jdGlvbiBhZGRTcXVhcmUoc3F1YXJlczogU3F1YXJlQ2xhc3Nlcywga2V5OiBjZy5LZXksIGtsYXNzOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKHNxdWFyZXNba2V5XSkgc3F1YXJlc1trZXldICs9ICcgJyArIGtsYXNzO1xuICBlbHNlIHNxdWFyZXNba2V5XSA9IGtsYXNzO1xufVxuIiwiaW1wb3J0ICogYXMgZmVuIGZyb20gJy4vZmVuJ1xuaW1wb3J0IHsgQW5pbUN1cnJlbnQgfSBmcm9tICcuL2FuaW0nXG5pbXBvcnQgeyBEcmFnQ3VycmVudCB9IGZyb20gJy4vZHJhZydcbmltcG9ydCB7IERyYXdhYmxlIH0gZnJvbSAnLi9kcmF3J1xuaW1wb3J0IHsgdGltZXIgfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgKiBhcyBjZyBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZSB7XG4gIHBpZWNlczogY2cuUGllY2VzO1xuICBvcmllbnRhdGlvbjogY2cuQ29sb3I7IC8vIGJvYXJkIG9yaWVudGF0aW9uLiB3aGl0ZSB8IGJsYWNrXG4gIHR1cm5Db2xvcjogY2cuQ29sb3I7IC8vIHR1cm4gdG8gcGxheS4gd2hpdGUgfCBibGFja1xuICBjaGVjaz86IGNnLktleTsgLy8gc3F1YXJlIGN1cnJlbnRseSBpbiBjaGVjayBcImEyXCJcbiAgbGFzdE1vdmU/OiBjZy5LZXlbXTsgLy8gc3F1YXJlcyBwYXJ0IG9mIHRoZSBsYXN0IG1vdmUgW1wiYzNcIjsgXCJjNFwiXVxuICBzZWxlY3RlZD86IGNnLktleTsgLy8gc3F1YXJlIGN1cnJlbnRseSBzZWxlY3RlZCBcImExXCJcbiAgY29vcmRpbmF0ZXM6IGJvb2xlYW47IC8vIGluY2x1ZGUgY29vcmRzIGF0dHJpYnV0ZXNcbiAgYXV0b0Nhc3RsZTogYm9vbGVhbjsgLy8gaW1tZWRpYXRlbHkgY29tcGxldGUgdGhlIGNhc3RsZSBieSBtb3ZpbmcgdGhlIHJvb2sgYWZ0ZXIga2luZyBtb3ZlXG4gIHZpZXdPbmx5OiBib29sZWFuOyAvLyBkb24ndCBiaW5kIGV2ZW50czogdGhlIHVzZXIgd2lsbCBuZXZlciBiZSBhYmxlIHRvIG1vdmUgcGllY2VzIGFyb3VuZFxuICBkaXNhYmxlQ29udGV4dE1lbnU6IGJvb2xlYW47IC8vIGJlY2F1c2Ugd2hvIG5lZWRzIGEgY29udGV4dCBtZW51IG9uIGEgY2hlc3Nib2FyZFxuICByZXNpemFibGU6IGJvb2xlYW47IC8vIGxpc3RlbnMgdG8gY2hlc3Nncm91bmQucmVzaXplIG9uIGRvY3VtZW50LmJvZHkgdG8gY2xlYXIgYm91bmRzIGNhY2hlXG4gIGFkZFBpZWNlWkluZGV4OiBib29sZWFuOyAvLyBhZGRzIHotaW5kZXggdmFsdWVzIHRvIHBpZWNlcyAoZm9yIDNEKVxuICBwaWVjZUtleTogYm9vbGVhbjsgLy8gYWRkIGEgZGF0YS1rZXkgYXR0cmlidXRlIHRvIHBpZWNlIGVsZW1lbnRzXG4gIGhpZ2hsaWdodDoge1xuICAgIGxhc3RNb3ZlOiBib29sZWFuOyAvLyBhZGQgbGFzdC1tb3ZlIGNsYXNzIHRvIHNxdWFyZXNcbiAgICBjaGVjazogYm9vbGVhbjsgLy8gYWRkIGNoZWNrIGNsYXNzIHRvIHNxdWFyZXNcbiAgfTtcbiAgYW5pbWF0aW9uOiB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICBkdXJhdGlvbjogbnVtYmVyO1xuICAgIGN1cnJlbnQ/OiBBbmltQ3VycmVudDtcbiAgfTtcbiAgbW92YWJsZToge1xuICAgIGZyZWU6IGJvb2xlYW47IC8vIGFsbCBtb3ZlcyBhcmUgdmFsaWQgLSBib2FyZCBlZGl0b3JcbiAgICBjb2xvcj86IGNnLkNvbG9yIHwgJ2JvdGgnOyAvLyBjb2xvciB0aGF0IGNhbiBtb3ZlLiB3aGl0ZSB8IGJsYWNrIHwgYm90aFxuICAgIGRlc3RzPzogY2cuRGVzdHM7IC8vIHZhbGlkIG1vdmVzLiB7XCJhMlwiIFtcImEzXCIgXCJhNFwiXSBcImIxXCIgW1wiYTNcIiBcImMzXCJdfVxuICAgIHNob3dEZXN0czogYm9vbGVhbjsgLy8gd2hldGhlciB0byBhZGQgdGhlIG1vdmUtZGVzdCBjbGFzcyBvbiBzcXVhcmVzXG4gICAgZXZlbnRzOiB7XG4gICAgICBhZnRlcj86IChvcmlnOiBjZy5LZXksIGRlc3Q6IGNnLktleSwgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBtb3ZlIGhhcyBiZWVuIHBsYXllZFxuICAgICAgYWZ0ZXJOZXdQaWVjZT86IChyb2xlOiBjZy5Sb2xlLCBrZXk6IGNnLktleSwgbWV0YWRhdGE6IGNnLk1vdmVNZXRhZGF0YSkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIGEgbmV3IHBpZWNlIGlzIGRyb3BwZWQgb24gdGhlIGJvYXJkXG4gICAgfTtcbiAgICByb29rQ2FzdGxlOiBib29sZWFuIC8vIGNhc3RsZSBieSBtb3ZpbmcgdGhlIGtpbmcgdG8gdGhlIHJvb2tcbiAgfTtcbiAgcHJlbW92YWJsZToge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47IC8vIGFsbG93IHByZW1vdmVzIGZvciBjb2xvciB0aGF0IGNhbiBub3QgbW92ZVxuICAgIHNob3dEZXN0czogYm9vbGVhbjsgLy8gd2hldGhlciB0byBhZGQgdGhlIHByZW1vdmUtZGVzdCBjbGFzcyBvbiBzcXVhcmVzXG4gICAgY2FzdGxlOiBib29sZWFuOyAvLyB3aGV0aGVyIHRvIGFsbG93IGtpbmcgY2FzdGxlIHByZW1vdmVzXG4gICAgZGVzdHM/OiBjZy5LZXlbXTsgLy8gcHJlbW92ZSBkZXN0aW5hdGlvbnMgZm9yIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgIGN1cnJlbnQ/OiBjZy5LZXlQYWlyOyAvLyBrZXlzIG9mIHRoZSBjdXJyZW50IHNhdmVkIHByZW1vdmUgW1wiZTJcIiBcImU0XCJdXG4gICAgZXZlbnRzOiB7XG4gICAgICBzZXQ/OiAob3JpZzogY2cuS2V5LCBkZXN0OiBjZy5LZXksIG1ldGFkYXRhPzogY2cuU2V0UHJlbW92ZU1ldGFkYXRhKSA9PiB2b2lkOyAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHByZW1vdmUgaGFzIGJlZW4gc2V0XG4gICAgICB1bnNldD86ICgpID0+IHZvaWQ7ICAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHByZW1vdmUgaGFzIGJlZW4gdW5zZXRcbiAgICB9XG4gIH07XG4gIHByZWRyb3BwYWJsZToge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47IC8vIGFsbG93IHByZWRyb3BzIGZvciBjb2xvciB0aGF0IGNhbiBub3QgbW92ZVxuICAgIGN1cnJlbnQ/OiB7IC8vIGN1cnJlbnQgc2F2ZWQgcHJlZHJvcCB7cm9sZTogJ2tuaWdodCc7IGtleTogJ2U0J31cbiAgICAgIHJvbGU6IGNnLlJvbGU7XG4gICAgICBrZXk6IGNnLktleVxuICAgIH07XG4gICAgZXZlbnRzOiB7XG4gICAgICBzZXQ/OiAocm9sZTogY2cuUm9sZSwga2V5OiBjZy5LZXkpID0+IHZvaWQ7IC8vIGNhbGxlZCBhZnRlciB0aGUgcHJlZHJvcCBoYXMgYmVlbiBzZXRcbiAgICAgIHVuc2V0PzogKCkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBwcmVkcm9wIGhhcyBiZWVuIHVuc2V0XG4gICAgfVxuICB9O1xuICBkcmFnZ2FibGU6IHtcbiAgICBlbmFibGVkOiBib29sZWFuOyAvLyBhbGxvdyBtb3ZlcyAmIHByZW1vdmVzIHRvIHVzZSBkcmFnJ24gZHJvcFxuICAgIGRpc3RhbmNlOiBudW1iZXI7IC8vIG1pbmltdW0gZGlzdGFuY2UgdG8gaW5pdGlhdGUgYSBkcmFnOyBpbiBwaXhlbHNcbiAgICBhdXRvRGlzdGFuY2U6IGJvb2xlYW47IC8vIGxldHMgY2hlc3Nncm91bmQgc2V0IGRpc3RhbmNlIHRvIHplcm8gd2hlbiB1c2VyIGRyYWdzIHBpZWNlc1xuICAgIGNlbnRlclBpZWNlOiBib29sZWFuOyAvLyBjZW50ZXIgdGhlIHBpZWNlIG9uIGN1cnNvciBhdCBkcmFnIHN0YXJ0XG4gICAgc2hvd0dob3N0OiBib29sZWFuOyAvLyBzaG93IGdob3N0IG9mIHBpZWNlIGJlaW5nIGRyYWdnZWRcbiAgICBkZWxldGVPbkRyb3BPZmY6IGJvb2xlYW47IC8vIGRlbGV0ZSBhIHBpZWNlIHdoZW4gaXQgaXMgZHJvcHBlZCBvZmYgdGhlIGJvYXJkXG4gICAgY3VycmVudD86IERyYWdDdXJyZW50O1xuICB9O1xuICBkcm9wbW9kZToge1xuICAgIGFjdGl2ZTogYm9vbGVhbjtcbiAgICBwaWVjZT86IGNnLlBpZWNlO1xuICB9XG4gIHNlbGVjdGFibGU6IHtcbiAgICAvLyBkaXNhYmxlIHRvIGVuZm9yY2UgZHJhZ2dpbmcgb3ZlciBjbGljay1jbGljayBtb3ZlXG4gICAgZW5hYmxlZDogYm9vbGVhblxuICB9O1xuICBzdGF0czoge1xuICAgIC8vIHdhcyBsYXN0IHBpZWNlIGRyYWdnZWQgb3IgY2xpY2tlZD9cbiAgICAvLyBuZWVkcyBkZWZhdWx0IHRvIGZhbHNlIGZvciB0b3VjaFxuICAgIGRyYWdnZWQ6IGJvb2xlYW4sXG4gICAgY3RybEtleT86IGJvb2xlYW5cbiAgfTtcbiAgZXZlbnRzOiB7XG4gICAgY2hhbmdlPzogKCkgPT4gdm9pZDsgLy8gY2FsbGVkIGFmdGVyIHRoZSBzaXR1YXRpb24gY2hhbmdlcyBvbiB0aGUgYm9hcmRcbiAgICAvLyBjYWxsZWQgYWZ0ZXIgYSBwaWVjZSBoYXMgYmVlbiBtb3ZlZC5cbiAgICAvLyBjYXB0dXJlZFBpZWNlIGlzIHVuZGVmaW5lZCBvciBsaWtlIHtjb2xvcjogJ3doaXRlJzsgJ3JvbGUnOiAncXVlZW4nfVxuICAgIG1vdmU/OiAob3JpZzogY2cuS2V5LCBkZXN0OiBjZy5LZXksIGNhcHR1cmVkUGllY2U/OiBjZy5QaWVjZSkgPT4gdm9pZDtcbiAgICBkcm9wTmV3UGllY2U/OiAocGllY2U6IGNnLlBpZWNlLCBrZXk6IGNnLktleSkgPT4gdm9pZDtcbiAgICBzZWxlY3Q/OiAoa2V5OiBjZy5LZXkpID0+IHZvaWQgLy8gY2FsbGVkIHdoZW4gYSBzcXVhcmUgaXMgc2VsZWN0ZWRcbiAgICBpbnNlcnQ/OiAoZWxlbWVudHM6IGNnLkVsZW1lbnRzKSA9PiB2b2lkOyAvLyB3aGVuIHRoZSBib2FyZCBET00gaGFzIGJlZW4gKHJlKWluc2VydGVkXG4gIH07XG4gIGRyYXdhYmxlOiBEcmF3YWJsZSxcbiAgZXhwbG9kaW5nPzogY2cuRXhwbG9kaW5nO1xuICBkb206IGNnLkRvbSxcbiAgaG9sZDogY2cuVGltZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKCk6IFBhcnRpYWw8U3RhdGU+IHtcbiAgcmV0dXJuIHtcbiAgICBwaWVjZXM6IGZlbi5yZWFkKGZlbi5pbml0aWFsKSxcbiAgICBvcmllbnRhdGlvbjogJ3doaXRlJyxcbiAgICB0dXJuQ29sb3I6ICd3aGl0ZScsXG4gICAgY29vcmRpbmF0ZXM6IHRydWUsXG4gICAgYXV0b0Nhc3RsZTogdHJ1ZSxcbiAgICB2aWV3T25seTogZmFsc2UsXG4gICAgZGlzYWJsZUNvbnRleHRNZW51OiBmYWxzZSxcbiAgICByZXNpemFibGU6IHRydWUsXG4gICAgYWRkUGllY2VaSW5kZXg6IGZhbHNlLFxuICAgIHBpZWNlS2V5OiBmYWxzZSxcbiAgICBoaWdobGlnaHQ6IHtcbiAgICAgIGxhc3RNb3ZlOiB0cnVlLFxuICAgICAgY2hlY2s6IHRydWVcbiAgICB9LFxuICAgIGFuaW1hdGlvbjoge1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGR1cmF0aW9uOiAyMDBcbiAgICB9LFxuICAgIG1vdmFibGU6IHtcbiAgICAgIGZyZWU6IHRydWUsXG4gICAgICBjb2xvcjogJ2JvdGgnLFxuICAgICAgc2hvd0Rlc3RzOiB0cnVlLFxuICAgICAgZXZlbnRzOiB7fSxcbiAgICAgIHJvb2tDYXN0bGU6IHRydWVcbiAgICB9LFxuICAgIHByZW1vdmFibGU6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBzaG93RGVzdHM6IHRydWUsXG4gICAgICBjYXN0bGU6IHRydWUsXG4gICAgICBldmVudHM6IHt9XG4gICAgfSxcbiAgICBwcmVkcm9wcGFibGU6IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgZXZlbnRzOiB7fVxuICAgIH0sXG4gICAgZHJhZ2dhYmxlOiB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgZGlzdGFuY2U6IDMsXG4gICAgICBhdXRvRGlzdGFuY2U6IHRydWUsXG4gICAgICBjZW50ZXJQaWVjZTogdHJ1ZSxcbiAgICAgIHNob3dHaG9zdDogdHJ1ZSxcbiAgICAgIGRlbGV0ZU9uRHJvcE9mZjogZmFsc2VcbiAgICB9LFxuICAgIGRyb3Btb2RlOiB7XG4gICAgICBhY3RpdmU6IGZhbHNlXG4gICAgfSxcbiAgICBzZWxlY3RhYmxlOiB7XG4gICAgICBlbmFibGVkOiB0cnVlXG4gICAgfSxcbiAgICBzdGF0czoge1xuICAgICAgLy8gb24gdG91Y2hzY3JlZW4sIGRlZmF1bHQgdG8gXCJ0YXAtdGFwXCIgbW92ZXNcbiAgICAgIC8vIGluc3RlYWQgb2YgZHJhZ1xuICAgICAgZHJhZ2dlZDogISgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpXG4gICAgfSxcbiAgICBldmVudHM6IHt9LFxuICAgIGRyYXdhYmxlOiB7XG4gICAgICBlbmFibGVkOiB0cnVlLCAvLyBjYW4gZHJhd1xuICAgICAgdmlzaWJsZTogdHJ1ZSwgLy8gY2FuIHZpZXdcbiAgICAgIGVyYXNlT25DbGljazogdHJ1ZSxcbiAgICAgIHNoYXBlczogW10sXG4gICAgICBhdXRvU2hhcGVzOiBbXSxcbiAgICAgIGJydXNoZXM6IHtcbiAgICAgICAgZ3JlZW46IHsga2V5OiAnZycsIGNvbG9yOiAnIzE1NzgxQicsIG9wYWNpdHk6IDEsIGxpbmVXaWR0aDogMTAgfSxcbiAgICAgICAgcmVkOiB7IGtleTogJ3InLCBjb2xvcjogJyM4ODIwMjAnLCBvcGFjaXR5OiAxLCBsaW5lV2lkdGg6IDEwIH0sXG4gICAgICAgIGJsdWU6IHsga2V5OiAnYicsIGNvbG9yOiAnIzAwMzA4OCcsIG9wYWNpdHk6IDEsIGxpbmVXaWR0aDogMTAgfSxcbiAgICAgICAgeWVsbG93OiB7IGtleTogJ3knLCBjb2xvcjogJyNlNjhmMDAnLCBvcGFjaXR5OiAxLCBsaW5lV2lkdGg6IDEwIH0sXG4gICAgICAgIHBhbGVCbHVlOiB7IGtleTogJ3BiJywgY29sb3I6ICcjMDAzMDg4Jywgb3BhY2l0eTogMC40LCBsaW5lV2lkdGg6IDE1IH0sXG4gICAgICAgIHBhbGVHcmVlbjogeyBrZXk6ICdwZycsIGNvbG9yOiAnIzE1NzgxQicsIG9wYWNpdHk6IDAuNCwgbGluZVdpZHRoOiAxNSB9LFxuICAgICAgICBwYWxlUmVkOiB7IGtleTogJ3ByJywgY29sb3I6ICcjODgyMDIwJywgb3BhY2l0eTogMC40LCBsaW5lV2lkdGg6IDE1IH0sXG4gICAgICAgIHBhbGVHcmV5OiB7IGtleTogJ3BncicsIGNvbG9yOiAnIzRhNGE0YScsIG9wYWNpdHk6IDAuMzUsIGxpbmVXaWR0aDogMTUgfVxuICAgICAgfSxcbiAgICAgIHBpZWNlczoge1xuICAgICAgICBiYXNlVXJsOiAnaHR0cHM6Ly9saWNoZXNzMS5vcmcvYXNzZXRzL3BpZWNlL2NidXJuZXR0LydcbiAgICAgIH0sXG4gICAgICBwcmV2U3ZnSGFzaDogJydcbiAgICB9LFxuICAgIGhvbGQ6IHRpbWVyKClcbiAgfTtcbn1cbiIsImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IGtleTJwb3MgfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBEcmF3YWJsZSwgRHJhd1NoYXBlLCBEcmF3U2hhcGVQaWVjZSwgRHJhd0JydXNoLCBEcmF3QnJ1c2hlcywgRHJhd01vZGlmaWVycyB9IGZyb20gJy4vZHJhdydcbmltcG9ydCAqIGFzIGNnIGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWU6IHN0cmluZyk6IFNWR0VsZW1lbnQge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHRhZ05hbWUpO1xufVxuXG5pbnRlcmZhY2UgU2hhcGUge1xuICBzaGFwZTogRHJhd1NoYXBlO1xuICBjdXJyZW50OiBib29sZWFuO1xuICBoYXNoOiBIYXNoO1xufVxuXG5pbnRlcmZhY2UgQ3VzdG9tQnJ1c2hlcyB7XG4gIFtoYXNoOiBzdHJpbmddOiBEcmF3QnJ1c2hcbn1cblxuaW50ZXJmYWNlIEFycm93RGVzdHMge1xuICBba2V5OiBzdHJpbmddOiBudW1iZXI7IC8vIGhvdyBtYW55IGFycm93cyBsYW5kIG9uIGEgc3F1YXJlXG59XG5cbnR5cGUgSGFzaCA9IHN0cmluZztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN2ZyhzdGF0ZTogU3RhdGUsIHJvb3Q6IFNWR0VsZW1lbnQpOiB2b2lkIHtcblxuICBjb25zdCBkID0gc3RhdGUuZHJhd2FibGUsXG4gIGN1ckQgPSBkLmN1cnJlbnQsXG4gIGN1ciA9IGN1ckQgJiYgY3VyRC5tb3VzZVNxID8gY3VyRCBhcyBEcmF3U2hhcGUgOiB1bmRlZmluZWQsXG4gIGFycm93RGVzdHM6IEFycm93RGVzdHMgPSB7fTtcblxuICBkLnNoYXBlcy5jb25jYXQoZC5hdXRvU2hhcGVzKS5jb25jYXQoY3VyID8gW2N1cl0gOiBbXSkuZm9yRWFjaChzID0+IHtcbiAgICBpZiAocy5kZXN0KSBhcnJvd0Rlc3RzW3MuZGVzdF0gPSAoYXJyb3dEZXN0c1tzLmRlc3RdIHx8IDApICsgMTtcbiAgfSk7XG5cbiAgY29uc3Qgc2hhcGVzOiBTaGFwZVtdID0gZC5zaGFwZXMuY29uY2F0KGQuYXV0b1NoYXBlcykubWFwKChzOiBEcmF3U2hhcGUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgc2hhcGU6IHMsXG4gICAgICBjdXJyZW50OiBmYWxzZSxcbiAgICAgIGhhc2g6IHNoYXBlSGFzaChzLCBhcnJvd0Rlc3RzLCBmYWxzZSlcbiAgICB9O1xuICB9KTtcbiAgaWYgKGN1cikgc2hhcGVzLnB1c2goe1xuICAgIHNoYXBlOiBjdXIsXG4gICAgY3VycmVudDogdHJ1ZSxcbiAgICBoYXNoOiBzaGFwZUhhc2goY3VyLCBhcnJvd0Rlc3RzLCB0cnVlKVxuICB9KTtcblxuICBjb25zdCBmdWxsSGFzaCA9IHNoYXBlcy5tYXAoc2MgPT4gc2MuaGFzaCkuam9pbignJyk7XG4gIGlmIChmdWxsSGFzaCA9PT0gc3RhdGUuZHJhd2FibGUucHJldlN2Z0hhc2gpIHJldHVybjtcbiAgc3RhdGUuZHJhd2FibGUucHJldlN2Z0hhc2ggPSBmdWxsSGFzaDtcblxuICBjb25zdCBkZWZzRWwgPSByb290LmZpcnN0Q2hpbGQgYXMgU1ZHRWxlbWVudDtcblxuICBzeW5jRGVmcyhkLCBzaGFwZXMsIGRlZnNFbCk7XG4gIHN5bmNTaGFwZXMoc3RhdGUsIHNoYXBlcywgZC5icnVzaGVzLCBhcnJvd0Rlc3RzLCByb290LCBkZWZzRWwpO1xufVxuXG4vLyBhcHBlbmQgb25seS4gRG9uJ3QgdHJ5IHRvIHVwZGF0ZS9yZW1vdmUuXG5mdW5jdGlvbiBzeW5jRGVmcyhkOiBEcmF3YWJsZSwgc2hhcGVzOiBTaGFwZVtdLCBkZWZzRWw6IFNWR0VsZW1lbnQpIHtcbiAgY29uc3QgYnJ1c2hlczogQ3VzdG9tQnJ1c2hlcyA9IHt9O1xuICBsZXQgYnJ1c2g6IERyYXdCcnVzaDtcbiAgc2hhcGVzLmZvckVhY2gocyA9PiB7XG4gICAgaWYgKHMuc2hhcGUuZGVzdCkge1xuICAgICAgYnJ1c2ggPSBkLmJydXNoZXNbcy5zaGFwZS5icnVzaF07XG4gICAgICBpZiAocy5zaGFwZS5tb2RpZmllcnMpIGJydXNoID0gbWFrZUN1c3RvbUJydXNoKGJydXNoLCBzLnNoYXBlLm1vZGlmaWVycyk7XG4gICAgICBicnVzaGVzW2JydXNoLmtleV0gPSBicnVzaDtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBrZXlzSW5Eb206IHtba2V5OiBzdHJpbmddOiBib29sZWFufSA9IHt9O1xuICBsZXQgZWw6IFNWR0VsZW1lbnQgPSBkZWZzRWwuZmlyc3RDaGlsZCBhcyBTVkdFbGVtZW50O1xuICB3aGlsZShlbCkge1xuICAgIGtleXNJbkRvbVtlbC5nZXRBdHRyaWJ1dGUoJ2NnS2V5JykgYXMgc3RyaW5nXSA9IHRydWU7XG4gICAgZWwgPSBlbC5uZXh0U2libGluZyBhcyBTVkdFbGVtZW50O1xuICB9XG4gIGZvciAobGV0IGtleSBpbiBicnVzaGVzKSB7XG4gICAgaWYgKCFrZXlzSW5Eb21ba2V5XSkgZGVmc0VsLmFwcGVuZENoaWxkKHJlbmRlck1hcmtlcihicnVzaGVzW2tleV0pKTtcbiAgfVxufVxuXG4vLyBhcHBlbmQgYW5kIHJlbW92ZSBvbmx5LiBObyB1cGRhdGVzLlxuZnVuY3Rpb24gc3luY1NoYXBlcyhzdGF0ZTogU3RhdGUsIHNoYXBlczogU2hhcGVbXSwgYnJ1c2hlczogRHJhd0JydXNoZXMsIGFycm93RGVzdHM6IEFycm93RGVzdHMsIHJvb3Q6IFNWR0VsZW1lbnQsIGRlZnNFbDogU1ZHRWxlbWVudCk6IHZvaWQge1xuICBjb25zdCBib3VuZHMgPSBzdGF0ZS5kb20uYm91bmRzKCksXG4gIGhhc2hlc0luRG9tOiB7W2hhc2g6IHN0cmluZ106IGJvb2xlYW59ID0ge30sXG4gIHRvUmVtb3ZlOiBTVkdFbGVtZW50W10gPSBbXTtcbiAgc2hhcGVzLmZvckVhY2goc2MgPT4geyBoYXNoZXNJbkRvbVtzYy5oYXNoXSA9IGZhbHNlOyB9KTtcbiAgbGV0IGVsOiBTVkdFbGVtZW50ID0gZGVmc0VsLm5leHRTaWJsaW5nIGFzIFNWR0VsZW1lbnQsIGVsSGFzaDogSGFzaDtcbiAgd2hpbGUoZWwpIHtcbiAgICBlbEhhc2ggPSBlbC5nZXRBdHRyaWJ1dGUoJ2NnSGFzaCcpIGFzIEhhc2g7XG4gICAgLy8gZm91bmQgYSBzaGFwZSBlbGVtZW50IHRoYXQncyBoZXJlIHRvIHN0YXlcbiAgICBpZiAoaGFzaGVzSW5Eb20uaGFzT3duUHJvcGVydHkoZWxIYXNoKSkgaGFzaGVzSW5Eb21bZWxIYXNoXSA9IHRydWU7XG4gICAgLy8gb3IgcmVtb3ZlIGl0XG4gICAgZWxzZSB0b1JlbW92ZS5wdXNoKGVsKTtcbiAgICBlbCA9IGVsLm5leHRTaWJsaW5nIGFzIFNWR0VsZW1lbnQ7XG4gIH1cbiAgLy8gcmVtb3ZlIG9sZCBzaGFwZXNcbiAgdG9SZW1vdmUuZm9yRWFjaChlbCA9PiByb290LnJlbW92ZUNoaWxkKGVsKSk7XG4gIC8vIGluc2VydCBzaGFwZXMgdGhhdCBhcmUgbm90IHlldCBpbiBkb21cbiAgc2hhcGVzLmZvckVhY2goc2MgPT4ge1xuICAgIGlmICghaGFzaGVzSW5Eb21bc2MuaGFzaF0pIHJvb3QuYXBwZW5kQ2hpbGQocmVuZGVyU2hhcGUoc3RhdGUsIHNjLCBicnVzaGVzLCBhcnJvd0Rlc3RzLCBib3VuZHMpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNoYXBlSGFzaCh7b3JpZywgZGVzdCwgYnJ1c2gsIHBpZWNlLCBtb2RpZmllcnN9OiBEcmF3U2hhcGUsIGFycm93RGVzdHM6IEFycm93RGVzdHMsIGN1cnJlbnQ6IGJvb2xlYW4pOiBIYXNoIHtcbiAgcmV0dXJuIFtjdXJyZW50LCBvcmlnLCBkZXN0LCBicnVzaCwgZGVzdCAmJiBhcnJvd0Rlc3RzW2Rlc3RdID4gMSxcbiAgICBwaWVjZSAmJiBwaWVjZUhhc2gocGllY2UpLFxuICAgIG1vZGlmaWVycyAmJiBtb2RpZmllcnNIYXNoKG1vZGlmaWVycylcbiAgXS5maWx0ZXIoeCA9PiB4KS5qb2luKCcnKTtcbn1cblxuZnVuY3Rpb24gcGllY2VIYXNoKHBpZWNlOiBEcmF3U2hhcGVQaWVjZSk6IEhhc2gge1xuICByZXR1cm4gW3BpZWNlLmNvbG9yLCBwaWVjZS5yb2xlLCBwaWVjZS5zY2FsZV0uZmlsdGVyKHggPT4geCkuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIG1vZGlmaWVyc0hhc2gobTogRHJhd01vZGlmaWVycyk6IEhhc2gge1xuICByZXR1cm4gJycgKyAobS5saW5lV2lkdGggfHwgJycpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJTaGFwZShzdGF0ZTogU3RhdGUsIHtzaGFwZSwgY3VycmVudCwgaGFzaH06IFNoYXBlLCBicnVzaGVzOiBEcmF3QnJ1c2hlcywgYXJyb3dEZXN0czogQXJyb3dEZXN0cywgYm91bmRzOiBDbGllbnRSZWN0KTogU1ZHRWxlbWVudCB7XG4gIGxldCBlbDogU1ZHRWxlbWVudDtcbiAgaWYgKHNoYXBlLnBpZWNlKSBlbCA9IHJlbmRlclBpZWNlKFxuICAgIHN0YXRlLmRyYXdhYmxlLnBpZWNlcy5iYXNlVXJsLFxuICAgIG9yaWVudChrZXkycG9zKHNoYXBlLm9yaWcpLCBzdGF0ZS5vcmllbnRhdGlvbiksXG4gICAgc2hhcGUucGllY2UsXG4gICAgYm91bmRzKTtcbiAgZWxzZSB7XG4gICAgY29uc3Qgb3JpZyA9IG9yaWVudChrZXkycG9zKHNoYXBlLm9yaWcpLCBzdGF0ZS5vcmllbnRhdGlvbik7XG4gICAgaWYgKHNoYXBlLm9yaWcgJiYgc2hhcGUuZGVzdCkge1xuICAgICAgbGV0IGJydXNoOiBEcmF3QnJ1c2ggPSBicnVzaGVzW3NoYXBlLmJydXNoXTtcbiAgICAgIGlmIChzaGFwZS5tb2RpZmllcnMpIGJydXNoID0gbWFrZUN1c3RvbUJydXNoKGJydXNoLCBzaGFwZS5tb2RpZmllcnMpO1xuICAgICAgZWwgPSByZW5kZXJBcnJvdyhcbiAgICAgICAgYnJ1c2gsXG4gICAgICAgIG9yaWcsXG4gICAgICAgIG9yaWVudChrZXkycG9zKHNoYXBlLmRlc3QpLCBzdGF0ZS5vcmllbnRhdGlvbiksXG4gICAgICAgIGN1cnJlbnQsXG4gICAgICAgIGFycm93RGVzdHNbc2hhcGUuZGVzdF0gPiAxLFxuICAgICAgICBib3VuZHMpO1xuICAgIH1cbiAgICBlbHNlIGVsID0gcmVuZGVyQ2lyY2xlKGJydXNoZXNbc2hhcGUuYnJ1c2hdLCBvcmlnLCBjdXJyZW50LCBib3VuZHMpO1xuICB9XG4gIGVsLnNldEF0dHJpYnV0ZSgnY2dIYXNoJywgaGFzaCk7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2lyY2xlKGJydXNoOiBEcmF3QnJ1c2gsIHBvczogY2cuUG9zLCBjdXJyZW50OiBib29sZWFuLCBib3VuZHM6IENsaWVudFJlY3QpOiBTVkdFbGVtZW50IHtcbiAgY29uc3QgbyA9IHBvczJweChwb3MsIGJvdW5kcyksXG4gIHdpZHRocyA9IGNpcmNsZVdpZHRoKGJvdW5kcyksXG4gIHJhZGl1cyA9IChib3VuZHMud2lkdGggKyBib3VuZHMuaGVpZ2h0KSAvIDMyO1xuICByZXR1cm4gc2V0QXR0cmlidXRlcyhjcmVhdGVFbGVtZW50KCdjaXJjbGUnKSwge1xuICAgIHN0cm9rZTogYnJ1c2guY29sb3IsXG4gICAgJ3N0cm9rZS13aWR0aCc6IHdpZHRoc1tjdXJyZW50ID8gMCA6IDFdLFxuICAgIGZpbGw6ICdub25lJyxcbiAgICBvcGFjaXR5OiBvcGFjaXR5KGJydXNoLCBjdXJyZW50KSxcbiAgICBjeDogb1swXSxcbiAgICBjeTogb1sxXSxcbiAgICByOiByYWRpdXMgLSB3aWR0aHNbMV0gLyAyXG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBcnJvdyhicnVzaDogRHJhd0JydXNoLCBvcmlnOiBjZy5Qb3MsIGRlc3Q6IGNnLlBvcywgY3VycmVudDogYm9vbGVhbiwgc2hvcnRlbjogYm9vbGVhbiwgYm91bmRzOiBDbGllbnRSZWN0KTogU1ZHRWxlbWVudCB7XG4gIGNvbnN0IG0gPSBhcnJvd01hcmdpbihib3VuZHMsIHNob3J0ZW4gJiYgIWN1cnJlbnQpLFxuICBhID0gcG9zMnB4KG9yaWcsIGJvdW5kcyksXG4gIGIgPSBwb3MycHgoZGVzdCwgYm91bmRzKSxcbiAgZHggPSBiWzBdIC0gYVswXSxcbiAgZHkgPSBiWzFdIC0gYVsxXSxcbiAgYW5nbGUgPSBNYXRoLmF0YW4yKGR5LCBkeCksXG4gIHhvID0gTWF0aC5jb3MoYW5nbGUpICogbSxcbiAgeW8gPSBNYXRoLnNpbihhbmdsZSkgKiBtO1xuICByZXR1cm4gc2V0QXR0cmlidXRlcyhjcmVhdGVFbGVtZW50KCdsaW5lJyksIHtcbiAgICBzdHJva2U6IGJydXNoLmNvbG9yLFxuICAgICdzdHJva2Utd2lkdGgnOiBsaW5lV2lkdGgoYnJ1c2gsIGN1cnJlbnQsIGJvdW5kcyksXG4gICAgJ3N0cm9rZS1saW5lY2FwJzogJ3JvdW5kJyxcbiAgICAnbWFya2VyLWVuZCc6ICd1cmwoI2Fycm93aGVhZC0nICsgYnJ1c2gua2V5ICsgJyknLFxuICAgIG9wYWNpdHk6IG9wYWNpdHkoYnJ1c2gsIGN1cnJlbnQpLFxuICAgIHgxOiBhWzBdLFxuICAgIHkxOiBhWzFdLFxuICAgIHgyOiBiWzBdIC0geG8sXG4gICAgeTI6IGJbMV0gLSB5b1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyUGllY2UoYmFzZVVybDogc3RyaW5nLCBwb3M6IGNnLlBvcywgcGllY2U6IERyYXdTaGFwZVBpZWNlLCBib3VuZHM6IENsaWVudFJlY3QpOiBTVkdFbGVtZW50IHtcbiAgY29uc3QgbyA9IHBvczJweChwb3MsIGJvdW5kcyksXG4gIHNpemUgPSBib3VuZHMud2lkdGggLyA4ICogKHBpZWNlLnNjYWxlIHx8IDEpLFxuICBuYW1lID0gcGllY2UuY29sb3JbMF0gKyAocGllY2Uucm9sZSA9PT0gJ2tuaWdodCcgPyAnbicgOiBwaWVjZS5yb2xlWzBdKS50b1VwcGVyQ2FzZSgpO1xuICByZXR1cm4gc2V0QXR0cmlidXRlcyhjcmVhdGVFbGVtZW50KCdpbWFnZScpLCB7XG4gICAgY2xhc3NOYW1lOiBgJHtwaWVjZS5yb2xlfSAke3BpZWNlLmNvbG9yfWAsXG4gICAgeDogb1swXSAtIHNpemUgLyAyLFxuICAgIHk6IG9bMV0gLSBzaXplIC8gMixcbiAgICB3aWR0aDogc2l6ZSxcbiAgICBoZWlnaHQ6IHNpemUsXG4gICAgaHJlZjogYmFzZVVybCArIG5hbWUgKyAnLnN2ZydcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlck1hcmtlcihicnVzaDogRHJhd0JydXNoKTogU1ZHRWxlbWVudCB7XG4gIGNvbnN0IG1hcmtlciA9IHNldEF0dHJpYnV0ZXMoY3JlYXRlRWxlbWVudCgnbWFya2VyJyksIHtcbiAgICBpZDogJ2Fycm93aGVhZC0nICsgYnJ1c2gua2V5LFxuICAgIG9yaWVudDogJ2F1dG8nLFxuICAgIG1hcmtlcldpZHRoOiA0LFxuICAgIG1hcmtlckhlaWdodDogOCxcbiAgICByZWZYOiAyLjA1LFxuICAgIHJlZlk6IDIuMDFcbiAgfSk7XG4gIG1hcmtlci5hcHBlbmRDaGlsZChzZXRBdHRyaWJ1dGVzKGNyZWF0ZUVsZW1lbnQoJ3BhdGgnKSwge1xuICAgIGQ6ICdNMCwwIFY0IEwzLDIgWicsXG4gICAgZmlsbDogYnJ1c2guY29sb3JcbiAgfSkpO1xuICBtYXJrZXIuc2V0QXR0cmlidXRlKCdjZ0tleScsIGJydXNoLmtleSk7XG4gIHJldHVybiBtYXJrZXI7XG59XG5cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoZWw6IFNWR0VsZW1lbnQsIGF0dHJzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KTogU1ZHRWxlbWVudCB7XG4gIGZvciAobGV0IGtleSBpbiBhdHRycykgZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gb3JpZW50KHBvczogY2cuUG9zLCBjb2xvcjogY2cuQ29sb3IpOiBjZy5Qb3Mge1xuICByZXR1cm4gY29sb3IgPT09ICd3aGl0ZScgPyBwb3MgOiBbOSAtIHBvc1swXSwgOSAtIHBvc1sxXV07XG59XG5cbmZ1bmN0aW9uIG1ha2VDdXN0b21CcnVzaChiYXNlOiBEcmF3QnJ1c2gsIG1vZGlmaWVyczogRHJhd01vZGlmaWVycyk6IERyYXdCcnVzaCB7XG4gIGNvbnN0IGJydXNoOiBQYXJ0aWFsPERyYXdCcnVzaD4gPSB7XG4gICAgY29sb3I6IGJhc2UuY29sb3IsXG4gICAgb3BhY2l0eTogTWF0aC5yb3VuZChiYXNlLm9wYWNpdHkgKiAxMCkgLyAxMCxcbiAgICBsaW5lV2lkdGg6IE1hdGgucm91bmQobW9kaWZpZXJzLmxpbmVXaWR0aCB8fCBiYXNlLmxpbmVXaWR0aClcbiAgfTtcbiAgYnJ1c2gua2V5ID0gW2Jhc2Uua2V5LCBtb2RpZmllcnMubGluZVdpZHRoXS5maWx0ZXIoeCA9PiB4KS5qb2luKCcnKTtcbiAgcmV0dXJuIGJydXNoIGFzIERyYXdCcnVzaDtcbn1cblxuZnVuY3Rpb24gY2lyY2xlV2lkdGgoYm91bmRzOiBDbGllbnRSZWN0KTogW251bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IGJhc2UgPSBib3VuZHMud2lkdGggLyA1MTI7XG4gIHJldHVybiBbMyAqIGJhc2UsIDQgKiBiYXNlXTtcbn1cblxuZnVuY3Rpb24gbGluZVdpZHRoKGJydXNoOiBEcmF3QnJ1c2gsIGN1cnJlbnQ6IGJvb2xlYW4sIGJvdW5kczogQ2xpZW50UmVjdCk6IG51bWJlciB7XG4gIHJldHVybiAoYnJ1c2gubGluZVdpZHRoIHx8IDEwKSAqIChjdXJyZW50ID8gMC44NSA6IDEpIC8gNTEyICogYm91bmRzLndpZHRoO1xufVxuXG5mdW5jdGlvbiBvcGFjaXR5KGJydXNoOiBEcmF3QnJ1c2gsIGN1cnJlbnQ6IGJvb2xlYW4pOiBudW1iZXIge1xuICByZXR1cm4gKGJydXNoLm9wYWNpdHkgfHwgMSkgKiAoY3VycmVudCA/IDAuOSA6IDEpO1xufVxuXG5mdW5jdGlvbiBhcnJvd01hcmdpbihib3VuZHM6IENsaWVudFJlY3QsIHNob3J0ZW46IGJvb2xlYW4pOiBudW1iZXIge1xuICByZXR1cm4gKHNob3J0ZW4gPyAyMCA6IDEwKSAvIDUxMiAqIGJvdW5kcy53aWR0aDtcbn1cblxuZnVuY3Rpb24gcG9zMnB4KHBvczogY2cuUG9zLCBib3VuZHM6IENsaWVudFJlY3QpOiBjZy5OdW1iZXJQYWlyIHtcbiAgcmV0dXJuIFsocG9zWzBdIC0gMC41KSAqIGJvdW5kcy53aWR0aCAvIDgsICg4LjUgLSBwb3NbMV0pICogYm91bmRzLmhlaWdodCAvIDhdO1xufVxuIiwiZXhwb3J0IHR5cGUgQ29sb3IgPSAnd2hpdGUnIHwgJ2JsYWNrJztcbmV4cG9ydCB0eXBlIFJvbGUgPSAna2luZycgfCAncXVlZW4nIHwgJ3Jvb2snIHwgJ2Jpc2hvcCcgfCAna25pZ2h0JyB8ICdwYXduJztcbmV4cG9ydCB0eXBlIEtleSA9ICdhMCcgfCAnYTEnIHwgJ2IxJyB8ICdjMScgfCAnZDEnIHwgJ2UxJyB8ICdmMScgfCAnZzEnIHwgJ2gxJyB8ICdhMicgfCAnYjInIHwgJ2MyJyB8ICdkMicgfCAnZTInIHwgJ2YyJyB8ICdnMicgfCAnaDInIHwgJ2EzJyB8ICdiMycgfCAnYzMnIHwgJ2QzJyB8ICdlMycgfCAnZjMnIHwgJ2czJyB8ICdoMycgfCAnYTQnIHwgJ2I0JyB8ICdjNCcgfCAnZDQnIHwgJ2U0JyB8ICdmNCcgfCAnZzQnIHwgJ2g0JyB8ICdhNScgfCAnYjUnIHwgJ2M1JyB8ICdkNScgfCAnZTUnIHwgJ2Y1JyB8ICdnNScgfCAnaDUnIHwgJ2E2JyB8ICdiNicgfCAnYzYnIHwgJ2Q2JyB8ICdlNicgfCAnZjYnIHwgJ2c2JyB8ICdoNicgfCAnYTcnIHwgJ2I3JyB8ICdjNycgfCAnZDcnIHwgJ2U3JyB8ICdmNycgfCAnZzcnIHwgJ2g3JyB8ICdhOCcgfCAnYjgnIHwgJ2M4JyB8ICdkOCcgfCAnZTgnIHwgJ2Y4JyB8ICdnOCcgfCAnaDgnO1xuZXhwb3J0IHR5cGUgRmlsZSA9ICdhJyB8ICdiJyB8ICdjJyB8ICdkJyB8ICdlJyB8ICdmJyB8ICdnJyB8ICdoJztcbmV4cG9ydCB0eXBlIFJhbmsgPSAxIHwgMiB8IDMgfCA0IHwgNSB8IDYgfCA3IHwgODtcbmV4cG9ydCB0eXBlIEZFTiA9IHN0cmluZztcbmV4cG9ydCB0eXBlIFBvcyA9IFtudW1iZXIsIG51bWJlcl07XG5leHBvcnQgaW50ZXJmYWNlIFBpZWNlIHtcbiAgcm9sZTogUm9sZTtcbiAgY29sb3I6IENvbG9yO1xuICBwcm9tb3RlZD86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIERyb3Age1xuICByb2xlOiBSb2xlO1xuICBrZXk6IEtleTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2VzIHtcbiAgW2tleTogc3RyaW5nXTogUGllY2UgfCB1bmRlZmluZWQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIFBpZWNlc0RpZmYge1xuICBba2V5OiBzdHJpbmddOiBQaWVjZSB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IHR5cGUgS2V5UGFpciA9IFtLZXksIEtleV07XG5cbmV4cG9ydCB0eXBlIE51bWJlclBhaXIgPSBbbnVtYmVyLCBudW1iZXJdO1xuXG5leHBvcnQgdHlwZSBOdW1iZXJRdWFkID0gW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVzdHMge1xuICBba2V5OiBzdHJpbmddOiBLZXlbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRzIHtcbiAgYm9hcmQ6IEhUTUxFbGVtZW50O1xuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBnaG9zdD86IEhUTUxFbGVtZW50O1xuICBzdmc/OiBTVkdFbGVtZW50O1xufVxuZXhwb3J0IGludGVyZmFjZSBEb20ge1xuICBlbGVtZW50czogRWxlbWVudHMsXG4gIGJvdW5kczogTWVtbzxDbGllbnRSZWN0PjtcbiAgcmVkcmF3OiAoKSA9PiB2b2lkO1xuICByZWRyYXdOb3c6IChza2lwU3ZnPzogYm9vbGVhbikgPT4gdm9pZDtcbiAgdW5iaW5kPzogVW5iaW5kO1xuICBkZXN0cm95ZWQ/OiBib29sZWFuO1xuICByZWxhdGl2ZT86IGJvb2xlYW47IC8vIGRvbid0IGNvbXB1dGUgYm91bmRzLCB1c2UgcmVsYXRpdmUgJSB0byBwbGFjZSBwaWVjZXNcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRXhwbG9kaW5nIHtcbiAgc3RhZ2U6IG51bWJlcjtcbiAga2V5czogS2V5W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW92ZU1ldGFkYXRhIHtcbiAgcHJlbW92ZTogYm9vbGVhbjtcbiAgY3RybEtleT86IGJvb2xlYW47XG4gIGhvbGRUaW1lPzogbnVtYmVyO1xuICBjYXB0dXJlZD86IFBpZWNlO1xuICBwcmVkcm9wPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU2V0UHJlbW92ZU1ldGFkYXRhIHtcbiAgY3RybEtleT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIFdpbmRvd0V2ZW50ID0gJ29uc2Nyb2xsJyB8ICdvbnJlc2l6ZSc7XG5cbmV4cG9ydCB0eXBlIE1vdWNoRXZlbnQgPSBNb3VzZUV2ZW50ICYgVG91Y2hFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBLZXllZE5vZGUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNnS2V5OiBLZXk7XG59XG5leHBvcnQgaW50ZXJmYWNlIFBpZWNlTm9kZSBleHRlbmRzIEtleWVkTm9kZSB7XG4gIGNnUGllY2U6IHN0cmluZztcbiAgY2dBbmltYXRpbmc/OiBib29sZWFuO1xuICBjZ0ZhZGluZz86IGJvb2xlYW47XG4gIGNnRHJhZ2dpbmc/OiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBTcXVhcmVOb2RlIGV4dGVuZHMgS2V5ZWROb2RlIHsgfVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lbW88QT4geyAoKTogQTsgY2xlYXI6ICgpID0+IHZvaWQ7IH1cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lciB7XG4gIHN0YXJ0OiAoKSA9PiB2b2lkO1xuICBjYW5jZWw6ICgpID0+IHZvaWQ7XG4gIHN0b3A6ICgpID0+IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgUmVkcmF3ID0gKCkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIFVuYmluZCA9ICgpID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBNaWxsaXNlY29uZHMgPSBudW1iZXI7XG5leHBvcnQgdHlwZSBLSHogPSBudW1iZXI7XG5cbmV4cG9ydCBjb25zdCBmaWxlczogRmlsZVtdID0gWydhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnXTtcbmV4cG9ydCBjb25zdCByYW5rczogUmFua1tdID0gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDhdO1xuIiwiaW1wb3J0ICogYXMgY2cgZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBjb2xvcnM6IGNnLkNvbG9yW10gPSBbJ3doaXRlJywgJ2JsYWNrJ107XG5cbmV4cG9ydCBjb25zdCBpbnZSYW5rczogY2cuUmFua1tdID0gWzgsIDcsIDYsIDUsIDQsIDMsIDIsIDFdO1xuXG5leHBvcnQgY29uc3QgYWxsS2V5czogY2cuS2V5W10gPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmNnLmZpbGVzLm1hcChjID0+IGNnLnJhbmtzLm1hcChyID0+IGMrcikpKTtcblxuZXhwb3J0IGNvbnN0IHBvczJrZXkgPSAocG9zOiBjZy5Qb3MpID0+IGFsbEtleXNbOCAqIHBvc1swXSArIHBvc1sxXSAtIDldO1xuXG5leHBvcnQgY29uc3Qga2V5MnBvcyA9IChrOiBjZy5LZXkpID0+IFtrLmNoYXJDb2RlQXQoMCkgLSA5Niwgay5jaGFyQ29kZUF0KDEpIC0gNDhdIGFzIGNnLlBvcztcblxuZXhwb3J0IGZ1bmN0aW9uIG1lbW88QT4oZjogKCkgPT4gQSk6IGNnLk1lbW88QT4ge1xuICBsZXQgdjogQSB8IHVuZGVmaW5lZDtcbiAgY29uc3QgcmV0OiBhbnkgPSAoKSA9PiB7XG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgdiA9IGYoKTtcbiAgICByZXR1cm4gdjtcbiAgfTtcbiAgcmV0LmNsZWFyID0gKCkgPT4geyB2ID0gdW5kZWZpbmVkIH07XG4gIHJldHVybiByZXQ7XG59XG5cbmV4cG9ydCBjb25zdCB0aW1lcjogKCkgPT4gY2cuVGltZXIgPSAoKSA9PiB7XG4gIGxldCBzdGFydEF0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHJldHVybiB7XG4gICAgc3RhcnQoKSB7IHN0YXJ0QXQgPSBwZXJmb3JtYW5jZS5ub3coKSB9LFxuICAgIGNhbmNlbCgpIHsgc3RhcnRBdCA9IHVuZGVmaW5lZCB9LFxuICAgIHN0b3AoKSB7XG4gICAgICBpZiAoIXN0YXJ0QXQpIHJldHVybiAwO1xuICAgICAgY29uc3QgdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRBdDtcbiAgICAgIHN0YXJ0QXQgPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gdGltZTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBvcHBvc2l0ZSA9IChjOiBjZy5Db2xvcikgPT4gYyA9PT0gJ3doaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNYPFg+KHhzOiBYW10gfCB1bmRlZmluZWQsIHg6IFgpOiBib29sZWFuIHtcbiAgcmV0dXJuIHhzICE9PSB1bmRlZmluZWQgJiYgeHMuaW5kZXhPZih4KSAhPT0gLTE7XG59XG5cbmV4cG9ydCBjb25zdCBkaXN0YW5jZVNxOiAocG9zMTogY2cuUG9zLCBwb3MyOiBjZy5Qb3MpID0+IG51bWJlciA9IChwb3MxLCBwb3MyKSA9PiB7XG4gIHJldHVybiBNYXRoLnBvdyhwb3MxWzBdIC0gcG9zMlswXSwgMikgKyBNYXRoLnBvdyhwb3MxWzFdIC0gcG9zMlsxXSwgMik7XG59XG5cbmV4cG9ydCBjb25zdCBzYW1lUGllY2U6IChwMTogY2cuUGllY2UsIHAyOiBjZy5QaWVjZSkgPT4gYm9vbGVhbiA9IChwMSwgcDIpID0+XG4gIHAxLnJvbGUgPT09IHAyLnJvbGUgJiYgcDEuY29sb3IgPT09IHAyLmNvbG9yO1xuXG5jb25zdCBwb3NUb1RyYW5zbGF0ZUJhc2U6IChwb3M6IGNnLlBvcywgYXNXaGl0ZTogYm9vbGVhbiwgeEZhY3RvcjogbnVtYmVyLCB5RmFjdG9yOiBudW1iZXIpID0+IGNnLk51bWJlclBhaXIgPVxuKHBvcywgYXNXaGl0ZSwgeEZhY3RvciwgeUZhY3RvcikgPT4gW1xuICAoYXNXaGl0ZSA/IHBvc1swXSAtIDEgOiA4IC0gcG9zWzBdKSAqIHhGYWN0b3IsXG4gIChhc1doaXRlID8gOCAtIHBvc1sxXSA6IHBvc1sxXSAtIDEpICogeUZhY3RvclxuXTtcblxuZXhwb3J0IGNvbnN0IHBvc1RvVHJhbnNsYXRlQWJzID0gKGJvdW5kczogQ2xpZW50UmVjdCkgPT4ge1xuICBjb25zdCB4RmFjdG9yID0gYm91bmRzLndpZHRoIC8gOCxcbiAgeUZhY3RvciA9IGJvdW5kcy5oZWlnaHQgLyA4O1xuICByZXR1cm4gKHBvczogY2cuUG9zLCBhc1doaXRlOiBib29sZWFuKSA9PiBwb3NUb1RyYW5zbGF0ZUJhc2UocG9zLCBhc1doaXRlLCB4RmFjdG9yLCB5RmFjdG9yKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwb3NUb1RyYW5zbGF0ZVJlbDogKHBvczogY2cuUG9zLCBhc1doaXRlOiBib29sZWFuKSA9PiBjZy5OdW1iZXJQYWlyID1cbiAgKHBvcywgYXNXaGl0ZSkgPT4gcG9zVG9UcmFuc2xhdGVCYXNlKHBvcywgYXNXaGl0ZSwgMTAwLCAxMDApO1xuXG5leHBvcnQgY29uc3QgdHJhbnNsYXRlQWJzID0gKGVsOiBIVE1MRWxlbWVudCwgcG9zOiBjZy5OdW1iZXJQYWlyKSA9PiB7XG4gIGVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtwb3NbMF19cHgsJHtwb3NbMV19cHgpYDtcbn1cblxuZXhwb3J0IGNvbnN0IHRyYW5zbGF0ZVJlbCA9IChlbDogSFRNTEVsZW1lbnQsIHBlcmNlbnRzOiBjZy5OdW1iZXJQYWlyKSA9PiB7XG4gIGVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtwZXJjZW50c1swXX0lLCR7cGVyY2VudHNbMV19JSlgO1xufVxuXG5leHBvcnQgY29uc3Qgc2V0VmlzaWJsZSA9IChlbDogSFRNTEVsZW1lbnQsIHY6IGJvb2xlYW4pID0+IHtcbiAgZWwuc3R5bGUudmlzaWJpbGl0eSA9IHYgPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbn1cblxuLy8gdG91Y2hlbmQgaGFzIG5vIHBvc2l0aW9uIVxuZXhwb3J0IGNvbnN0IGV2ZW50UG9zaXRpb246IChlOiBjZy5Nb3VjaEV2ZW50KSA9PiBjZy5OdW1iZXJQYWlyIHwgdW5kZWZpbmVkID0gZSA9PiB7XG4gIGlmIChlLmNsaWVudFggfHwgZS5jbGllbnRYID09PSAwKSByZXR1cm4gW2UuY2xpZW50WCwgZS5jbGllbnRZXTtcbiAgaWYgKGUudG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXNbMF0pIHJldHVybiBbZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFgsIGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZXTtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmlnaHRCdXR0b24gPSAoZTogTW91c2VFdmVudCkgPT4gZS5idXR0b25zID09PSAyIHx8IGUuYnV0dG9uID09PSAyO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRWwgPSAodGFnTmFtZTogc3RyaW5nLCBjbGFzc05hbWU/OiBzdHJpbmcpID0+IHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICBpZiAoY2xhc3NOYW1lKSBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIHJldHVybiBlbDtcbn1cbiIsImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IGNvbG9ycywgc2V0VmlzaWJsZSwgY3JlYXRlRWwgfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBmaWxlcywgcmFua3MgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCBhcyBjcmVhdGVTVkcgfSBmcm9tICcuL3N2ZydcbmltcG9ydCB7IEVsZW1lbnRzIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd3JhcChlbGVtZW50OiBIVE1MRWxlbWVudCwgczogU3RhdGUsIHJlbGF0aXZlOiBib29sZWFuKTogRWxlbWVudHMge1xuXG4gIC8vIC5jZy13cmFwIChlbGVtZW50IHBhc3NlZCB0byBDaGVzc2dyb3VuZClcbiAgLy8gICBjZy1oZWxwZXIgKDEyLjUlKVxuICAvLyAgICAgY2ctY29udGFpbmVyICg4MDAlKVxuICAvLyAgICAgICBjZy1ib2FyZFxuICAvLyAgICAgICBzdmdcbiAgLy8gICAgICAgY29vcmRzLnJhbmtzXG4gIC8vICAgICAgIGNvb3Jkcy5maWxlc1xuICAvLyAgICAgICBwaWVjZS5naG9zdFxuXG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgLy8gZW5zdXJlIHRoZSBjZy13cmFwIGNsYXNzIGlzIHNldFxuICAvLyBzbyBib3VuZHMgY2FsY3VsYXRpb24gY2FuIHVzZSB0aGUgQ1NTIHdpZHRoL2hlaWdodCB2YWx1ZXNcbiAgLy8gYWRkIHRoYXQgY2xhc3MgeW91cnNlbGYgdG8gdGhlIGVsZW1lbnQgYmVmb3JlIGNhbGxpbmcgY2hlc3Nncm91bmRcbiAgLy8gZm9yIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50ISAoYXZvaWRzIHJlY29tcHV0aW5nIHN0eWxlKVxuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NnLXdyYXAnKTtcblxuICBjb2xvcnMuZm9yRWFjaChjID0+IGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnb3JpZW50YXRpb24tJyArIGMsIHMub3JpZW50YXRpb24gPT09IGMpKTtcbiAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdtYW5pcHVsYWJsZScsICFzLnZpZXdPbmx5KTtcblxuICBjb25zdCBoZWxwZXIgPSBjcmVhdGVFbCgnY2ctaGVscGVyJyk7XG4gIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVscGVyKTtcbiAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlRWwoJ2NnLWNvbnRhaW5lcicpO1xuICBoZWxwZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICBjb25zdCBib2FyZCA9IGNyZWF0ZUVsKCdjZy1ib2FyZCcpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYm9hcmQpO1xuXG4gIGxldCBzdmc6IFNWR0VsZW1lbnQgfCB1bmRlZmluZWQ7XG4gIGlmIChzLmRyYXdhYmxlLnZpc2libGUgJiYgIXJlbGF0aXZlKSB7XG4gICAgc3ZnID0gY3JlYXRlU1ZHKCdzdmcnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoY3JlYXRlU1ZHKCdkZWZzJykpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmcpO1xuICB9XG5cbiAgaWYgKHMuY29vcmRpbmF0ZXMpIHtcbiAgICBjb25zdCBvcmllbnRDbGFzcyA9IHMub3JpZW50YXRpb24gPT09ICdibGFjaycgPyAnIGJsYWNrJyA6ICcnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb29yZHMocmFua3MsICdyYW5rcycgKyBvcmllbnRDbGFzcykpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb29yZHMoZmlsZXMsICdmaWxlcycgKyBvcmllbnRDbGFzcykpO1xuICB9XG5cbiAgbGV0IGdob3N0OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgaWYgKHMuZHJhZ2dhYmxlLnNob3dHaG9zdCAmJiAhcmVsYXRpdmUpIHtcbiAgICBnaG9zdCA9IGNyZWF0ZUVsKCdwaWVjZScsICdnaG9zdCcpO1xuICAgIHNldFZpc2libGUoZ2hvc3QsIGZhbHNlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ2hvc3QpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBib2FyZCxcbiAgICBjb250YWluZXIsXG4gICAgZ2hvc3QsXG4gICAgc3ZnXG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNvb3JkcyhlbGVtczogYW55W10sIGNsYXNzTmFtZTogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICBjb25zdCBlbCA9IGNyZWF0ZUVsKCdjb29yZHMnLCBjbGFzc05hbWUpO1xuICBsZXQgZjogSFRNTEVsZW1lbnQ7XG4gIGZvciAobGV0IGkgaW4gZWxlbXMpIHtcbiAgICBmID0gY3JlYXRlRWwoJ2Nvb3JkJyk7XG4gICAgZi50ZXh0Q29udGVudCA9IGVsZW1zW2ldO1xuICAgIGVsLmFwcGVuZENoaWxkKGYpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbmNvbnN0IHNxdWFyZVNldF8xID0gcmVxdWlyZShcIi4vc3F1YXJlU2V0XCIpO1xuZnVuY3Rpb24gY29tcHV0ZVJhbmdlKHNxdWFyZSwgZGVsdGFzLCBzdGVwcGVyKSB7XG4gICAgbGV0IHJhbmdlID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgZm9yIChjb25zdCBkZWx0YSBvZiBkZWx0YXMpIHtcbiAgICAgICAgZm9yIChsZXQgc3EgPSBzcXVhcmUgKyBkZWx0YTsgMCA8PSBzcSAmJiBzcSA8IDY0ICYmIHV0aWxfMS5zcXVhcmVEaXN0KHNxLCBzcSAtIGRlbHRhKSA8PSAyOyBzcSArPSBkZWx0YSkge1xuICAgICAgICAgICAgcmFuZ2UgPSByYW5nZS53aXRoKHNxKTtcbiAgICAgICAgICAgIGlmIChzdGVwcGVyKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByYW5nZTtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVUYWJsZShkZWx0YXMsIHN0ZXBwZXIpIHtcbiAgICBjb25zdCB0YWJsZSA9IFtdO1xuICAgIGZvciAobGV0IHNxdWFyZSA9IDA7IHNxdWFyZSA8IDY0OyBzcXVhcmUrKykge1xuICAgICAgICB0YWJsZVtzcXVhcmVdID0gY29tcHV0ZVJhbmdlKHNxdWFyZSwgZGVsdGFzLCBzdGVwcGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhYmxlO1xufVxuY29uc3QgS0lOR19BVFRBQ0tTID0gY29tcHV0ZVRhYmxlKFstOSwgLTgsIC03LCAtMSwgMSwgNywgOCwgOV0sIHRydWUpO1xuY29uc3QgS05JR0hUX0FUVEFDS1MgPSBjb21wdXRlVGFibGUoWy0xNywgLTE1LCAtMTAsIC02LCA2LCAxMCwgMTUsIDE3XSwgdHJ1ZSk7XG5jb25zdCBQQVdOX0FUVEFDS1MgPSB7XG4gICAgd2hpdGU6IGNvbXB1dGVUYWJsZShbNywgOV0sIHRydWUpLFxuICAgIGJsYWNrOiBjb21wdXRlVGFibGUoWy03LCAtOV0sIHRydWUpLFxufTtcbmZ1bmN0aW9uIGtpbmdBdHRhY2tzKHNxdWFyZSkge1xuICAgIHJldHVybiBLSU5HX0FUVEFDS1Nbc3F1YXJlXTtcbn1cbmV4cG9ydHMua2luZ0F0dGFja3MgPSBraW5nQXR0YWNrcztcbmZ1bmN0aW9uIGtuaWdodEF0dGFja3Moc3F1YXJlKSB7XG4gICAgcmV0dXJuIEtOSUdIVF9BVFRBQ0tTW3NxdWFyZV07XG59XG5leHBvcnRzLmtuaWdodEF0dGFja3MgPSBrbmlnaHRBdHRhY2tzO1xuZnVuY3Rpb24gcGF3bkF0dGFja3MoY29sb3IsIHNxdWFyZSkge1xuICAgIHJldHVybiBQQVdOX0FUVEFDS1NbY29sb3JdW3NxdWFyZV07XG59XG5leHBvcnRzLnBhd25BdHRhY2tzID0gcGF3bkF0dGFja3M7XG5jb25zdCBGSUxFX1JBTkdFID0gY29tcHV0ZVRhYmxlKFstOCwgOF0sIGZhbHNlKTtcbmNvbnN0IFJBTktfUkFOR0UgPSBjb21wdXRlVGFibGUoWy0xLCAxXSwgZmFsc2UpO1xuY29uc3QgRElBR19SQU5HRSA9IGNvbXB1dGVUYWJsZShbLTksIDldLCBmYWxzZSk7XG5jb25zdCBBTlRJX0RJQUdfUkFOR0UgPSBjb21wdXRlVGFibGUoWy03LCA3XSwgZmFsc2UpO1xuZnVuY3Rpb24gaHlwZXJib2xhKGJpdCwgcmFuZ2UsIG9jY3VwaWVkKSB7XG4gICAgbGV0IGZvcndhcmQgPSBvY2N1cGllZC5pbnRlcnNlY3QocmFuZ2UpO1xuICAgIGxldCByZXZlcnNlID0gZm9yd2FyZC5ic3dhcDY0KCk7IC8vIEFzc3VtZXMgbm8gbW9yZSB0aGFuIDEgYml0IHBlciByYW5rXG4gICAgZm9yd2FyZCA9IGZvcndhcmQubWludXM2NChiaXQpO1xuICAgIHJldmVyc2UgPSByZXZlcnNlLm1pbnVzNjQoYml0LmJzd2FwNjQoKSk7XG4gICAgZm9yd2FyZCA9IGZvcndhcmQueG9yKHJldmVyc2UuYnN3YXA2NCgpKTtcbiAgICByZXR1cm4gZm9yd2FyZC5pbnRlcnNlY3QocmFuZ2UpO1xufVxuZnVuY3Rpb24gZmlsZUF0dGFja3Moc3F1YXJlLCBvY2N1cGllZCkge1xuICAgIHJldHVybiBoeXBlcmJvbGEoc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmZyb21TcXVhcmUoc3F1YXJlKSwgRklMRV9SQU5HRVtzcXVhcmVdLCBvY2N1cGllZCk7XG59XG5mdW5jdGlvbiByYW5rQXR0YWNrcyhzcXVhcmUsIG9jY3VwaWVkKSB7XG4gICAgY29uc3QgcmFuZ2UgPSBSQU5LX1JBTkdFW3NxdWFyZV07XG4gICAgbGV0IGZvcndhcmQgPSBvY2N1cGllZC5pbnRlcnNlY3QocmFuZ2UpO1xuICAgIGxldCByZXZlcnNlID0gZm9yd2FyZC5yYml0NjQoKTtcbiAgICBmb3J3YXJkID0gZm9yd2FyZC5taW51czY0KHNxdWFyZVNldF8xLlNxdWFyZVNldC5mcm9tU3F1YXJlKHNxdWFyZSkpO1xuICAgIHJldmVyc2UgPSByZXZlcnNlLm1pbnVzNjQoc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmZyb21TcXVhcmUoNjMgLSBzcXVhcmUpKTtcbiAgICBmb3J3YXJkID0gZm9yd2FyZC54b3IocmV2ZXJzZS5yYml0NjQoKSk7XG4gICAgcmV0dXJuIGZvcndhcmQuaW50ZXJzZWN0KHJhbmdlKTtcbn1cbmZ1bmN0aW9uIGRpYWdBdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpIHtcbiAgICByZXR1cm4gaHlwZXJib2xhKHNxdWFyZVNldF8xLlNxdWFyZVNldC5mcm9tU3F1YXJlKHNxdWFyZSksIERJQUdfUkFOR0Vbc3F1YXJlXSwgb2NjdXBpZWQpO1xufVxuZnVuY3Rpb24gYW50aURpYWdBdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpIHtcbiAgICByZXR1cm4gaHlwZXJib2xhKHNxdWFyZVNldF8xLlNxdWFyZVNldC5mcm9tU3F1YXJlKHNxdWFyZSksIEFOVElfRElBR19SQU5HRVtzcXVhcmVdLCBvY2N1cGllZCk7XG59XG5mdW5jdGlvbiBiaXNob3BBdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpIHtcbiAgICBjb25zdCBiaXQgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZShzcXVhcmUpO1xuICAgIHJldHVybiBoeXBlcmJvbGEoYml0LCBESUFHX1JBTkdFW3NxdWFyZV0sIG9jY3VwaWVkKS54b3IoaHlwZXJib2xhKGJpdCwgQU5USV9ESUFHX1JBTkdFW3NxdWFyZV0sIG9jY3VwaWVkKSk7XG59XG5leHBvcnRzLmJpc2hvcEF0dGFja3MgPSBiaXNob3BBdHRhY2tzO1xuZnVuY3Rpb24gcm9va0F0dGFja3Moc3F1YXJlLCBvY2N1cGllZCkge1xuICAgIHJldHVybiBmaWxlQXR0YWNrcyhzcXVhcmUsIG9jY3VwaWVkKS54b3IocmFua0F0dGFja3Moc3F1YXJlLCBvY2N1cGllZCkpO1xufVxuZXhwb3J0cy5yb29rQXR0YWNrcyA9IHJvb2tBdHRhY2tzO1xuZnVuY3Rpb24gcXVlZW5BdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpIHtcbiAgICByZXR1cm4gYmlzaG9wQXR0YWNrcyhzcXVhcmUsIG9jY3VwaWVkKS54b3Iocm9va0F0dGFja3Moc3F1YXJlLCBvY2N1cGllZCkpO1xufVxuZXhwb3J0cy5xdWVlbkF0dGFja3MgPSBxdWVlbkF0dGFja3M7XG5mdW5jdGlvbiBhdHRhY2tzKHBpZWNlLCBzcXVhcmUsIG9jY3VwaWVkKSB7XG4gICAgc3dpdGNoIChwaWVjZS5yb2xlKSB7XG4gICAgICAgIGNhc2UgJ3Bhd24nOiByZXR1cm4gcGF3bkF0dGFja3MocGllY2UuY29sb3IsIHNxdWFyZSk7XG4gICAgICAgIGNhc2UgJ2tuaWdodCc6IHJldHVybiBrbmlnaHRBdHRhY2tzKHNxdWFyZSk7XG4gICAgICAgIGNhc2UgJ2Jpc2hvcCc6IHJldHVybiBiaXNob3BBdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpO1xuICAgICAgICBjYXNlICdyb29rJzogcmV0dXJuIHJvb2tBdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpO1xuICAgICAgICBjYXNlICdxdWVlbic6IHJldHVybiBxdWVlbkF0dGFja3Moc3F1YXJlLCBvY2N1cGllZCk7XG4gICAgICAgIGNhc2UgJ2tpbmcnOiByZXR1cm4ga2luZ0F0dGFja3Moc3F1YXJlKTtcbiAgICB9XG59XG5leHBvcnRzLmF0dGFja3MgPSBhdHRhY2tzO1xuZnVuY3Rpb24gcmF5VGFibGVzKCkge1xuICAgIGNvbnN0IHJheSA9IFtdO1xuICAgIGNvbnN0IGJldHdlZW4gPSBbXTtcbiAgICBjb25zdCB6ZXJvID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgZm9yIChsZXQgYSA9IDA7IGEgPCA2NDsgYSsrKSB7XG4gICAgICAgIHJheVthXSA9IFtdO1xuICAgICAgICBiZXR3ZWVuW2FdID0gW107XG4gICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgNjQ7IGIrKykge1xuICAgICAgICAgICAgcmF5W2FdW2JdID0gemVybztcbiAgICAgICAgICAgIGJldHdlZW5bYV1bYl0gPSB6ZXJvO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYiBvZiBESUFHX1JBTkdFW2FdKSB7XG4gICAgICAgICAgICByYXlbYV1bYl0gPSBESUFHX1JBTkdFW2FdLndpdGgoYSk7XG4gICAgICAgICAgICBiZXR3ZWVuW2FdW2JdID0gZGlhZ0F0dGFja3MoYSwgc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmZyb21TcXVhcmUoYikpLmludGVyc2VjdChkaWFnQXR0YWNrcyhiLCBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZShhKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYiBvZiBBTlRJX0RJQUdfUkFOR0VbYV0pIHtcbiAgICAgICAgICAgIHJheVthXVtiXSA9IEFOVElfRElBR19SQU5HRVthXS53aXRoKGEpO1xuICAgICAgICAgICAgYmV0d2VlblthXVtiXSA9IGFudGlEaWFnQXR0YWNrcyhhLCBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZShiKSkuaW50ZXJzZWN0KGFudGlEaWFnQXR0YWNrcyhiLCBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZShhKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYiBvZiBGSUxFX1JBTkdFW2FdKSB7XG4gICAgICAgICAgICByYXlbYV1bYl0gPSBGSUxFX1JBTkdFW2FdLndpdGgoYSk7XG4gICAgICAgICAgICBiZXR3ZWVuW2FdW2JdID0gZmlsZUF0dGFja3MoYSwgc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmZyb21TcXVhcmUoYikpLmludGVyc2VjdChmaWxlQXR0YWNrcyhiLCBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZShhKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYiBvZiBSQU5LX1JBTkdFW2FdKSB7XG4gICAgICAgICAgICByYXlbYV1bYl0gPSBSQU5LX1JBTkdFW2FdLndpdGgoYSk7XG4gICAgICAgICAgICBiZXR3ZWVuW2FdW2JdID0gcmFua0F0dGFja3MoYSwgc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmZyb21TcXVhcmUoYikpLmludGVyc2VjdChyYW5rQXR0YWNrcyhiLCBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZShhKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbcmF5LCBiZXR3ZWVuXTtcbn1cbmNvbnN0IFtSQVksIEJFVFdFRU5dID0gcmF5VGFibGVzKCk7XG5mdW5jdGlvbiByYXkoYSwgYikge1xuICAgIHJldHVybiBSQVlbYV1bYl07XG59XG5leHBvcnRzLnJheSA9IHJheTtcbmZ1bmN0aW9uIGJldHdlZW4oYSwgYikge1xuICAgIHJldHVybiBCRVRXRUVOW2FdW2JdO1xufVxuZXhwb3J0cy5iZXR3ZWVuID0gYmV0d2VlbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3Qgc3F1YXJlU2V0XzEgPSByZXF1aXJlKFwiLi9zcXVhcmVTZXRcIik7XG5jbGFzcyBCb2FyZCB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzdGF0aWMgZGVmYXVsdCgpIHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBuZXcgQm9hcmQoKTtcbiAgICAgICAgYm9hcmQucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIGJvYXJkO1xuICAgIH1cbiAgICBzdGF0aWMgcmFjaW5nS2luZ3MoKSB7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKCk7XG4gICAgICAgIGJvYXJkLm9jY3VwaWVkID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweGZmZmYsIDApO1xuICAgICAgICBib2FyZC5wcm9tb3RlZCA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBib2FyZC53aGl0ZSA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMHhmMGYwLCAwKTtcbiAgICAgICAgYm9hcmQuYmxhY2sgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4MGYwZiwgMCk7XG4gICAgICAgIGJvYXJkLnBhd24gPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgYm9hcmQua25pZ2h0ID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweDE4MTgsIDApO1xuICAgICAgICBib2FyZC5iaXNob3AgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4MjQyNCwgMCk7XG4gICAgICAgIGJvYXJkLnJvb2sgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4NDI0MiwgMCk7XG4gICAgICAgIGJvYXJkLnF1ZWVuID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweDAwODEsIDApO1xuICAgICAgICBib2FyZC5raW5nID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweDgxMDAsIDApO1xuICAgICAgICByZXR1cm4gYm9hcmQ7XG4gICAgfVxuICAgIHN0YXRpYyBob3JkZSgpIHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBuZXcgQm9hcmQoKTtcbiAgICAgICAgYm9hcmQub2NjdXBpZWQgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDQyOTQ5NjcyOTUsIDQyOTQ5MDE4NjIpO1xuICAgICAgICBib2FyZC5wcm9tb3RlZCA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBib2FyZC53aGl0ZSA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoNDI5NDk2NzI5NSwgMTAyKTtcbiAgICAgICAgYm9hcmQuYmxhY2sgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDAsIDQyOTQ5MDE3NjApO1xuICAgICAgICBib2FyZC5wYXduID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCg0Mjk0OTY3Mjk1LCAxNjcxMTc4Mik7XG4gICAgICAgIGJvYXJkLmtuaWdodCA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMCwgMTEwNzI5NjI1Nik7XG4gICAgICAgIGJvYXJkLmJpc2hvcCA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMCwgNjAzOTc5Nzc2KTtcbiAgICAgICAgYm9hcmQucm9vayA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMCwgMjE2NDI2MDg2NCk7XG4gICAgICAgIGJvYXJkLnF1ZWVuID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgwLCAxMzQyMTc3MjgpO1xuICAgICAgICBib2FyZC5raW5nID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgwLCAyNjg0MzU0NTYpO1xuICAgICAgICByZXR1cm4gYm9hcmQ7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLm9jY3VwaWVkID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweGZmZmYsIDQyOTQ5MDE3NjApO1xuICAgICAgICB0aGlzLnByb21vdGVkID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIHRoaXMud2hpdGUgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4ZmZmZiwgMCk7XG4gICAgICAgIHRoaXMuYmxhY2sgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDAsIDQyOTQ5MDE3NjApO1xuICAgICAgICB0aGlzLnBhd24gPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4ZmYwMCwgMTY3MTE2ODApO1xuICAgICAgICB0aGlzLmtuaWdodCA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMHg0MiwgMTEwNzI5NjI1Nik7XG4gICAgICAgIHRoaXMuYmlzaG9wID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweDI0LCA2MDM5Nzk3NzYpO1xuICAgICAgICB0aGlzLnJvb2sgPSBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4ODEsIDIxNjQyNjA4NjQpO1xuICAgICAgICB0aGlzLnF1ZWVuID0gbmV3IHNxdWFyZVNldF8xLlNxdWFyZVNldCgweDgsIDEzNDIxNzcyOCk7XG4gICAgICAgIHRoaXMua2luZyA9IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMHgxMCwgMjY4NDM1NDU2KTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICBjb25zdCBib2FyZCA9IG5ldyBCb2FyZCgpO1xuICAgICAgICBib2FyZC5jbGVhcigpO1xuICAgICAgICByZXR1cm4gYm9hcmQ7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLm9jY3VwaWVkID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIHRoaXMucHJvbW90ZWQgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgZm9yIChjb25zdCBjb2xvciBvZiB0eXBlc18xLkNPTE9SUylcbiAgICAgICAgICAgIHRoaXNbY29sb3JdID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIGZvciAoY29uc3Qgcm9sZSBvZiB0eXBlc18xLlJPTEVTKVxuICAgICAgICAgICAgdGhpc1tyb2xlXSA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBuZXcgQm9hcmQoKTtcbiAgICAgICAgYm9hcmQub2NjdXBpZWQgPSB0aGlzLm9jY3VwaWVkO1xuICAgICAgICBib2FyZC5wcm9tb3RlZCA9IHRoaXMucHJvbW90ZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY29sb3Igb2YgdHlwZXNfMS5DT0xPUlMpXG4gICAgICAgICAgICBib2FyZFtjb2xvcl0gPSB0aGlzW2NvbG9yXTtcbiAgICAgICAgZm9yIChjb25zdCByb2xlIG9mIHR5cGVzXzEuUk9MRVMpXG4gICAgICAgICAgICBib2FyZFtyb2xlXSA9IHRoaXNbcm9sZV07XG4gICAgICAgIHJldHVybiBib2FyZDtcbiAgICB9XG4gICAgZ2V0Q29sb3Ioc3F1YXJlKSB7XG4gICAgICAgIGlmICh0aGlzLndoaXRlLmhhcyhzcXVhcmUpKVxuICAgICAgICAgICAgcmV0dXJuICd3aGl0ZSc7XG4gICAgICAgIGlmICh0aGlzLmJsYWNrLmhhcyhzcXVhcmUpKVxuICAgICAgICAgICAgcmV0dXJuICdibGFjayc7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2V0Um9sZShzcXVhcmUpIHtcbiAgICAgICAgZm9yIChjb25zdCByb2xlIG9mIHR5cGVzXzEuUk9MRVMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzW3JvbGVdLmhhcyhzcXVhcmUpKVxuICAgICAgICAgICAgICAgIHJldHVybiByb2xlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2V0KHNxdWFyZSkge1xuICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuZ2V0Q29sb3Ioc3F1YXJlKTtcbiAgICAgICAgaWYgKCFjb2xvcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcHJvbW90ZWQgPSB0aGlzLnByb21vdGVkLmhhcyhzcXVhcmUpO1xuICAgICAgICBjb25zdCByb2xlID0gdGhpcy5nZXRSb2xlKHNxdWFyZSk7XG4gICAgICAgIHJldHVybiB7IGNvbG9yLCByb2xlLCBwcm9tb3RlZCB9O1xuICAgIH1cbiAgICB0YWtlKHNxdWFyZSkge1xuICAgICAgICBjb25zdCBwaWVjZSA9IHRoaXMuZ2V0KHNxdWFyZSk7XG4gICAgICAgIGlmIChwaWVjZSkge1xuICAgICAgICAgICAgdGhpcy5vY2N1cGllZCA9IHRoaXMub2NjdXBpZWQud2l0aG91dChzcXVhcmUpO1xuICAgICAgICAgICAgdGhpc1twaWVjZS5jb2xvcl0gPSB0aGlzW3BpZWNlLmNvbG9yXS53aXRob3V0KHNxdWFyZSk7XG4gICAgICAgICAgICB0aGlzW3BpZWNlLnJvbGVdID0gdGhpc1twaWVjZS5yb2xlXS53aXRob3V0KHNxdWFyZSk7XG4gICAgICAgICAgICBpZiAocGllY2UucHJvbW90ZWQpXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9tb3RlZCA9IHRoaXMucHJvbW90ZWQud2l0aG91dChzcXVhcmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwaWVjZTtcbiAgICB9XG4gICAgc2V0KHNxdWFyZSwgcGllY2UpIHtcbiAgICAgICAgY29uc3Qgb2xkID0gdGhpcy50YWtlKHNxdWFyZSk7XG4gICAgICAgIHRoaXMub2NjdXBpZWQgPSB0aGlzLm9jY3VwaWVkLndpdGgoc3F1YXJlKTtcbiAgICAgICAgdGhpc1twaWVjZS5jb2xvcl0gPSB0aGlzW3BpZWNlLmNvbG9yXS53aXRoKHNxdWFyZSk7XG4gICAgICAgIHRoaXNbcGllY2Uucm9sZV0gPSB0aGlzW3BpZWNlLnJvbGVdLndpdGgoc3F1YXJlKTtcbiAgICAgICAgaWYgKHBpZWNlLnByb21vdGVkKVxuICAgICAgICAgICAgdGhpcy5wcm9tb3RlZCA9IHRoaXMucHJvbW90ZWQud2l0aChzcXVhcmUpO1xuICAgICAgICByZXR1cm4gb2xkO1xuICAgIH1cbiAgICBoYXMoc3F1YXJlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9jY3VwaWVkLmhhcyhzcXVhcmUpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IHRoaXMub2NjdXBpZWRbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBjb25zdCBuZXh0ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBrZXlzLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChlbnRyeS5kb25lKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBbZW50cnkudmFsdWUsIHRoaXMuZ2V0KGVudHJ5LnZhbHVlKV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7IG5leHQgfTtcbiAgICB9XG4gICAgcGllY2VzKGNvbG9yLCByb2xlKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2NvbG9yXS5pbnRlcnNlY3QodGhpc1tyb2xlXSk7XG4gICAgfVxuICAgIHJvb2tzQW5kUXVlZW5zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb29rLnVuaW9uKHRoaXMucXVlZW4pO1xuICAgIH1cbiAgICBiaXNob3BzQW5kUXVlZW5zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaXNob3AudW5pb24odGhpcy5xdWVlbik7XG4gICAgfVxuICAgIGtpbmdPZihjb2xvcikge1xuICAgICAgICByZXR1cm4gdGhpcy5raW5nLmludGVyc2VjdCh0aGlzW2NvbG9yXSkuZGlmZih0aGlzLnByb21vdGVkKS5zaW5nbGVTcXVhcmUoKTtcbiAgICB9XG59XG5leHBvcnRzLkJvYXJkID0gQm9hcmQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHJlc3VsdF8xID0gcmVxdWlyZShcIkBiYWRyYXAvcmVzdWx0XCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3Qgc3F1YXJlU2V0XzEgPSByZXF1aXJlKFwiLi9zcXVhcmVTZXRcIik7XG5jb25zdCBib2FyZF8xID0gcmVxdWlyZShcIi4vYm9hcmRcIik7XG5jb25zdCBhdHRhY2tzXzEgPSByZXF1aXJlKFwiLi9hdHRhY2tzXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbnZhciBJbGxlZ2FsU2V0dXA7XG4oZnVuY3Rpb24gKElsbGVnYWxTZXR1cCkge1xuICAgIElsbGVnYWxTZXR1cFtcIkVtcHR5XCJdID0gXCJFUlJfRU1QVFlcIjtcbiAgICBJbGxlZ2FsU2V0dXBbXCJPcHBvc2l0ZUNoZWNrXCJdID0gXCJFUlJfT1BQT1NJVEVfQ0hFQ0tcIjtcbiAgICBJbGxlZ2FsU2V0dXBbXCJQYXduc09uQmFja3JhbmtcIl0gPSBcIkVSUl9QQVdOU19PTl9CQUNLUkFOS1wiO1xuICAgIElsbGVnYWxTZXR1cFtcIktpbmdzXCJdID0gXCJFUlJfS0lOR1NcIjtcbiAgICBJbGxlZ2FsU2V0dXBbXCJWYXJpYW50XCJdID0gXCJFUlJfVkFSSUFOVFwiO1xufSkoSWxsZWdhbFNldHVwID0gZXhwb3J0cy5JbGxlZ2FsU2V0dXAgfHwgKGV4cG9ydHMuSWxsZWdhbFNldHVwID0ge30pKTtcbmNsYXNzIFBvc2l0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5leHBvcnRzLlBvc2l0aW9uRXJyb3IgPSBQb3NpdGlvbkVycm9yO1xuZnVuY3Rpb24gYXR0YWNrc1RvKHNxdWFyZSwgYXR0YWNrZXIsIGJvYXJkLCBvY2N1cGllZCkge1xuICAgIHJldHVybiBib2FyZFthdHRhY2tlcl0uaW50ZXJzZWN0KGF0dGFja3NfMS5yb29rQXR0YWNrcyhzcXVhcmUsIG9jY3VwaWVkKS5pbnRlcnNlY3QoYm9hcmQucm9va3NBbmRRdWVlbnMoKSlcbiAgICAgICAgLnVuaW9uKGF0dGFja3NfMS5iaXNob3BBdHRhY2tzKHNxdWFyZSwgb2NjdXBpZWQpLmludGVyc2VjdChib2FyZC5iaXNob3BzQW5kUXVlZW5zKCkpKVxuICAgICAgICAudW5pb24oYXR0YWNrc18xLmtuaWdodEF0dGFja3Moc3F1YXJlKS5pbnRlcnNlY3QoYm9hcmQua25pZ2h0KSlcbiAgICAgICAgLnVuaW9uKGF0dGFja3NfMS5raW5nQXR0YWNrcyhzcXVhcmUpLmludGVyc2VjdChib2FyZC5raW5nKSlcbiAgICAgICAgLnVuaW9uKGF0dGFja3NfMS5wYXduQXR0YWNrcyh1dGlsXzEub3Bwb3NpdGUoYXR0YWNrZXIpLCBzcXVhcmUpLmludGVyc2VjdChib2FyZC5wYXduKSkpO1xufVxuZnVuY3Rpb24ga2luZ0Nhc3RsZXNUbyhjb2xvciwgc2lkZSkge1xuICAgIHJldHVybiBjb2xvciA9PT0gJ3doaXRlJyA/IChzaWRlID09PSAnYScgPyAyIDogNikgOiAoc2lkZSA9PT0gJ2EnID8gNTggOiA2Mik7XG59XG5mdW5jdGlvbiByb29rQ2FzdGxlc1RvKGNvbG9yLCBzaWRlKSB7XG4gICAgcmV0dXJuIGNvbG9yID09PSAnd2hpdGUnID8gKHNpZGUgPT09ICdhJyA/IDMgOiA1KSA6IChzaWRlID09PSAnYScgPyA1OSA6IDYxKTtcbn1cbmNsYXNzIENhc3RsZXMge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgc3RhdGljIGRlZmF1bHQoKSB7XG4gICAgICAgIGNvbnN0IGNhc3RsZXMgPSBuZXcgQ2FzdGxlcygpO1xuICAgICAgICBjYXN0bGVzLnVubW92ZWRSb29rcyA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5jb3JuZXJzKCk7XG4gICAgICAgIGNhc3RsZXMucm9vayA9IHtcbiAgICAgICAgICAgIHdoaXRlOiB7IGE6IDAsIGg6IDcgfSxcbiAgICAgICAgICAgIGJsYWNrOiB7IGE6IDU2LCBoOiA2MyB9LFxuICAgICAgICB9O1xuICAgICAgICBjYXN0bGVzLnBhdGggPSB7XG4gICAgICAgICAgICB3aGl0ZTogeyBhOiBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDB4NjAsIDApLCBoOiBuZXcgc3F1YXJlU2V0XzEuU3F1YXJlU2V0KDAsIDB4ZSkgfSxcbiAgICAgICAgICAgIGJsYWNrOiB7IGE6IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMCwgMHg2MDAwMDAwMCksIGg6IG5ldyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQoMCwgMHgwZTAwMDAwMCkgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNhc3RsZXM7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgY29uc3QgY2FzdGxlcyA9IG5ldyBDYXN0bGVzKCk7XG4gICAgICAgIGNhc3RsZXMudW5tb3ZlZFJvb2tzID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIGNhc3RsZXMucm9vayA9IHtcbiAgICAgICAgICAgIHdoaXRlOiB7IGE6IHVuZGVmaW5lZCwgaDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICBibGFjazogeyBhOiB1bmRlZmluZWQsIGg6IHVuZGVmaW5lZCB9LFxuICAgICAgICB9O1xuICAgICAgICBjYXN0bGVzLnBhdGggPSB7XG4gICAgICAgICAgICB3aGl0ZTogeyBhOiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKSwgaDogc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCkgfSxcbiAgICAgICAgICAgIGJsYWNrOiB7IGE6IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpLCBoOiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKSB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2FzdGxlcztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGNhc3RsZXMgPSBuZXcgQ2FzdGxlcygpO1xuICAgICAgICBjYXN0bGVzLnVubW92ZWRSb29rcyA9IHRoaXMudW5tb3ZlZFJvb2tzO1xuICAgICAgICBjYXN0bGVzLnJvb2sgPSB7XG4gICAgICAgICAgICB3aGl0ZTogeyBhOiB0aGlzLnJvb2sud2hpdGUuYSwgaDogdGhpcy5yb29rLndoaXRlLmggfSxcbiAgICAgICAgICAgIGJsYWNrOiB7IGE6IHRoaXMucm9vay5ibGFjay5hLCBoOiB0aGlzLnJvb2suYmxhY2suaCB9LFxuICAgICAgICB9O1xuICAgICAgICBjYXN0bGVzLnBhdGggPSB7XG4gICAgICAgICAgICB3aGl0ZTogeyBhOiB0aGlzLnBhdGgud2hpdGUuYSwgaDogdGhpcy5wYXRoLndoaXRlLmggfSxcbiAgICAgICAgICAgIGJsYWNrOiB7IGE6IHRoaXMucGF0aC5ibGFjay5hLCBoOiB0aGlzLnBhdGguYmxhY2suaCB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2FzdGxlcztcbiAgICB9XG4gICAgYWRkKGNvbG9yLCBzaWRlLCBraW5nLCByb29rKSB7XG4gICAgICAgIGNvbnN0IGtpbmdUbyA9IGtpbmdDYXN0bGVzVG8oY29sb3IsIHNpZGUpO1xuICAgICAgICBjb25zdCByb29rVG8gPSByb29rQ2FzdGxlc1RvKGNvbG9yLCBzaWRlKTtcbiAgICAgICAgdGhpcy51bm1vdmVkUm9va3MgPSB0aGlzLnVubW92ZWRSb29rcy53aXRoKHJvb2spO1xuICAgICAgICB0aGlzLnJvb2tbY29sb3JdW3NpZGVdID0gcm9vaztcbiAgICAgICAgdGhpcy5wYXRoW2NvbG9yXVtzaWRlXSA9IGF0dGFja3NfMS5iZXR3ZWVuKHJvb2ssIHJvb2tUbykud2l0aChyb29rVG8pXG4gICAgICAgICAgICAudW5pb24oYXR0YWNrc18xLmJldHdlZW4oa2luZywga2luZ1RvKS53aXRoKGtpbmdUbykpXG4gICAgICAgICAgICAud2l0aG91dChraW5nKS53aXRob3V0KHJvb2spO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIGNvbnN0IGNhc3RsZXMgPSBDYXN0bGVzLmVtcHR5KCk7XG4gICAgICAgIGNvbnN0IHJvb2tzID0gc2V0dXAudW5tb3ZlZFJvb2tzLmludGVyc2VjdChzZXR1cC5ib2FyZC5yb29rKTtcbiAgICAgICAgZm9yIChjb25zdCBjb2xvciBvZiB0eXBlc18xLkNPTE9SUykge1xuICAgICAgICAgICAgY29uc3QgYmFja3JhbmsgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuYmFja3JhbmsoY29sb3IpO1xuICAgICAgICAgICAgY29uc3Qga2luZyA9IHNldHVwLmJvYXJkLmtpbmdPZihjb2xvcik7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKGtpbmcpIHx8ICFiYWNrcmFuay5oYXMoa2luZykpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBzaWRlID0gcm9va3MuaW50ZXJzZWN0KHNldHVwLmJvYXJkW2NvbG9yXSkuaW50ZXJzZWN0KGJhY2tyYW5rKTtcbiAgICAgICAgICAgIGNvbnN0IGFTaWRlID0gc2lkZS5maXJzdCgpO1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5kZWZpbmVkKGFTaWRlKSAmJiBhU2lkZSA8IGtpbmcpXG4gICAgICAgICAgICAgICAgY2FzdGxlcy5hZGQoY29sb3IsICdhJywga2luZywgYVNpZGUpO1xuICAgICAgICAgICAgY29uc3QgaFNpZGUgPSBzaWRlLmxhc3QoKTtcbiAgICAgICAgICAgIGlmICh1dGlsXzEuZGVmaW5lZChoU2lkZSkgJiYga2luZyA8IGhTaWRlKVxuICAgICAgICAgICAgICAgIGNhc3RsZXMuYWRkKGNvbG9yLCAnaCcsIGtpbmcsIGhTaWRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FzdGxlcztcbiAgICB9XG4gICAgZGlzY2FyZFJvb2soc3F1YXJlKSB7XG4gICAgICAgIGlmICh0aGlzLnVubW92ZWRSb29rcy5oYXMoc3F1YXJlKSkge1xuICAgICAgICAgICAgdGhpcy51bm1vdmVkUm9va3MgPSB0aGlzLnVubW92ZWRSb29rcy53aXRob3V0KHNxdWFyZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbG9yIG9mIHR5cGVzXzEuQ09MT1JTKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzaWRlIG9mIHR5cGVzXzEuQ0FTVExJTkdfU0lERVMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm9va1tjb2xvcl1bc2lkZV0gPT09IHNxdWFyZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9va1tjb2xvcl1bc2lkZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2NhcmRTaWRlKGNvbG9yKSB7XG4gICAgICAgIHRoaXMudW5tb3ZlZFJvb2tzID0gdGhpcy51bm1vdmVkUm9va3MuZGlmZihzcXVhcmVTZXRfMS5TcXVhcmVTZXQuYmFja3JhbmsoY29sb3IpKTtcbiAgICAgICAgdGhpcy5yb29rW2NvbG9yXS5hID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJvb2tbY29sb3JdLmggPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5DYXN0bGVzID0gQ2FzdGxlcztcbmNsYXNzIFBvc2l0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihydWxlcykge1xuICAgICAgICB0aGlzLnJ1bGVzID0gcnVsZXM7XG4gICAgfVxuICAgIGtpbmdBdHRhY2tlcnMoc3F1YXJlLCBhdHRhY2tlciwgb2NjdXBpZWQpIHtcbiAgICAgICAgcmV0dXJuIGF0dGFja3NUbyhzcXVhcmUsIGF0dGFja2VyLCB0aGlzLmJvYXJkLCBvY2N1cGllZCk7XG4gICAgfVxuICAgIGRyb3BEZXN0cyhfY3R4KSB7XG4gICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICB9XG4gICAgcGxheUNhcHR1cmVBdChzcXVhcmUsIGNhcHR1cmVkKSB7XG4gICAgICAgIHRoaXMuaGFsZm1vdmVzID0gMDtcbiAgICAgICAgaWYgKGNhcHR1cmVkLnJvbGUgPT09ICdyb29rJylcbiAgICAgICAgICAgIHRoaXMuY2FzdGxlcy5kaXNjYXJkUm9vayhzcXVhcmUpO1xuICAgICAgICBpZiAodGhpcy5wb2NrZXRzKVxuICAgICAgICAgICAgdGhpcy5wb2NrZXRzW3V0aWxfMS5vcHBvc2l0ZShjYXB0dXJlZC5jb2xvcildW2NhcHR1cmVkLnJvbGVdKys7XG4gICAgfVxuICAgIGN0eCgpIHtcbiAgICAgICAgY29uc3QgdmFyaWFudEVuZCA9IHRoaXMuaXNWYXJpYW50RW5kKCk7XG4gICAgICAgIGNvbnN0IGtpbmcgPSB0aGlzLmJvYXJkLmtpbmdPZih0aGlzLnR1cm4pO1xuICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKGtpbmcpKVxuICAgICAgICAgICAgcmV0dXJuIHsga2luZywgYmxvY2tlcnM6IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpLCBjaGVja2Vyczogc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCksIHZhcmlhbnRFbmQsIG11c3RDYXB0dXJlOiBmYWxzZSB9O1xuICAgICAgICBjb25zdCBzbmlwZXJzID0gYXR0YWNrc18xLnJvb2tBdHRhY2tzKGtpbmcsIHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpKS5pbnRlcnNlY3QodGhpcy5ib2FyZC5yb29rc0FuZFF1ZWVucygpKVxuICAgICAgICAgICAgLnVuaW9uKGF0dGFja3NfMS5iaXNob3BBdHRhY2tzKGtpbmcsIHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpKS5pbnRlcnNlY3QodGhpcy5ib2FyZC5iaXNob3BzQW5kUXVlZW5zKCkpKVxuICAgICAgICAgICAgLmludGVyc2VjdCh0aGlzLmJvYXJkW3V0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pXSk7XG4gICAgICAgIGxldCBibG9ja2VycyA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHNuaXBlciBvZiBzbmlwZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBiID0gYXR0YWNrc18xLmJldHdlZW4oa2luZywgc25pcGVyKS5pbnRlcnNlY3QodGhpcy5ib2FyZC5vY2N1cGllZCk7XG4gICAgICAgICAgICBpZiAoIWIubW9yZVRoYW5PbmUoKSlcbiAgICAgICAgICAgICAgICBibG9ja2VycyA9IGJsb2NrZXJzLnVuaW9uKGIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoZWNrZXJzID0gdGhpcy5raW5nQXR0YWNrZXJzKGtpbmcsIHV0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pLCB0aGlzLmJvYXJkLm9jY3VwaWVkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmcsXG4gICAgICAgICAgICBibG9ja2VycyxcbiAgICAgICAgICAgIGNoZWNrZXJzLFxuICAgICAgICAgICAgdmFyaWFudEVuZCxcbiAgICAgICAgICAgIG11c3RDYXB0dXJlOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gVGhlIGZvbGxvd2luZyBzaG91bGQgYmUgaWRlbnRpY2FsIGluIGFsbCBzdWJjbGFzc2VzXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IHBvcyA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKCk7XG4gICAgICAgIHBvcy5ib2FyZCA9IHRoaXMuYm9hcmQuY2xvbmUoKTtcbiAgICAgICAgcG9zLnBvY2tldHMgPSB0aGlzLnBvY2tldHMgJiYgdGhpcy5wb2NrZXRzLmNsb25lKCk7XG4gICAgICAgIHBvcy50dXJuID0gdGhpcy50dXJuO1xuICAgICAgICBwb3MuY2FzdGxlcyA9IHRoaXMuY2FzdGxlcy5jbG9uZSgpO1xuICAgICAgICBwb3MuZXBTcXVhcmUgPSB0aGlzLmVwU3F1YXJlO1xuICAgICAgICBwb3MucmVtYWluaW5nQ2hlY2tzID0gdGhpcy5yZW1haW5pbmdDaGVja3MgJiYgdGhpcy5yZW1haW5pbmdDaGVja3MuY2xvbmUoKTtcbiAgICAgICAgcG9zLmhhbGZtb3ZlcyA9IHRoaXMuaGFsZm1vdmVzO1xuICAgICAgICBwb3MuZnVsbG1vdmVzID0gdGhpcy5mdWxsbW92ZXM7XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIHRvU2V0dXAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib2FyZDogdGhpcy5ib2FyZC5jbG9uZSgpLFxuICAgICAgICAgICAgcG9ja2V0czogdGhpcy5wb2NrZXRzICYmIHRoaXMucG9ja2V0cy5jbG9uZSgpLFxuICAgICAgICAgICAgdHVybjogdGhpcy50dXJuLFxuICAgICAgICAgICAgdW5tb3ZlZFJvb2tzOiB0aGlzLmNhc3RsZXMudW5tb3ZlZFJvb2tzLFxuICAgICAgICAgICAgZXBTcXVhcmU6IHRoaXMuaGFzTGVnYWxFcCgpID8gdGhpcy5lcFNxdWFyZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlbWFpbmluZ0NoZWNrczogdGhpcy5yZW1haW5pbmdDaGVja3MgJiYgdGhpcy5yZW1haW5pbmdDaGVja3MuY2xvbmUoKSxcbiAgICAgICAgICAgIGhhbGZtb3ZlczogTWF0aC5taW4odGhpcy5oYWxmbW92ZXMsIDE1MCksXG4gICAgICAgICAgICBmdWxsbW92ZXM6IE1hdGgubWluKE1hdGgubWF4KHRoaXMuZnVsbG1vdmVzLCAxKSwgOTk5OSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlzSW5zdWZmaWNpZW50TWF0ZXJpYWwoKSB7XG4gICAgICAgIHJldHVybiB0eXBlc18xLkNPTE9SUy5ldmVyeShjb2xvciA9PiB0aGlzLmhhc0luc3VmZmljaWVudE1hdGVyaWFsKGNvbG9yKSk7XG4gICAgfVxuICAgIGhhc0Rlc3RzKGN0eCkge1xuICAgICAgICBmb3IgKGNvbnN0IHNxdWFyZSBvZiB0aGlzLmJvYXJkW3RoaXMudHVybl0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlc3RzKHNxdWFyZSwgY3R4KS5ub25FbXB0eSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRyb3BEZXN0cyhjdHgpLm5vbkVtcHR5KCk7XG4gICAgfVxuICAgIGlzTGVnYWwodWNpLCBjdHgpIHtcbiAgICAgICAgaWYgKHR5cGVzXzEuaXNEcm9wKHVjaSkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wb2NrZXRzIHx8IHRoaXMucG9ja2V0c1t0aGlzLnR1cm5dW3VjaS5yb2xlXSA8PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmICh1Y2kucm9sZSA9PT0gJ3Bhd24nICYmIHNxdWFyZVNldF8xLlNxdWFyZVNldC5iYWNrcmFua3MoKS5oYXModWNpLnRvKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kcm9wRGVzdHMoY3R4KS5oYXModWNpLnRvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh1Y2kucHJvbW90aW9uID09PSAncGF3bicpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKHVjaS5wcm9tb3Rpb24gPT09ICdraW5nJyAmJiB0aGlzLnJ1bGVzICE9PSAnYW50aWNoZXNzJylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXVjaS5wcm9tb3Rpb24gJiYgdGhpcy5ib2FyZC5wYXduLmhhcyh1Y2kuZnJvbSkgJiYgc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmJhY2tyYW5rcygpLmhhcyh1Y2kudG8pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3RzKHVjaS5mcm9tLCBjdHgpLmhhcyh1Y2kudG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzQ2hlY2soKSB7XG4gICAgICAgIGNvbnN0IGtpbmcgPSB0aGlzLmJvYXJkLmtpbmdPZih0aGlzLnR1cm4pO1xuICAgICAgICByZXR1cm4gdXRpbF8xLmRlZmluZWQoa2luZykgJiYgdGhpcy5raW5nQXR0YWNrZXJzKGtpbmcsIHV0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pLCB0aGlzLmJvYXJkLm9jY3VwaWVkKS5ub25FbXB0eSgpO1xuICAgIH1cbiAgICBpc0VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYXJpYW50RW5kKCkgfHwgdGhpcy5pc0luc3VmZmljaWVudE1hdGVyaWFsKCkgfHwgIXRoaXMuaGFzRGVzdHModGhpcy5jdHgoKSk7XG4gICAgfVxuICAgIGlzQ2hlY2ttYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhcmlhbnRFbmQoKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHgoKTtcbiAgICAgICAgcmV0dXJuIGN0eC5jaGVja2Vycy5ub25FbXB0eSgpICYmICF0aGlzLmhhc0Rlc3RzKGN0eCk7XG4gICAgfVxuICAgIGlzU3RhbGVtYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhcmlhbnRFbmQoKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHgoKTtcbiAgICAgICAgcmV0dXJuIGN0eC5jaGVja2Vycy5pc0VtcHR5KCkgJiYgIXRoaXMuaGFzRGVzdHMoY3R4KTtcbiAgICB9XG4gICAgb3V0Y29tZSgpIHtcbiAgICAgICAgY29uc3QgdmFyaWFudE91dGNvbWUgPSB0aGlzLnZhcmlhbnRPdXRjb21lKCk7XG4gICAgICAgIGlmICh2YXJpYW50T3V0Y29tZSlcbiAgICAgICAgICAgIHJldHVybiB2YXJpYW50T3V0Y29tZTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc0NoZWNrbWF0ZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHsgd2lubmVyOiB1dGlsXzEub3Bwb3NpdGUodGhpcy50dXJuKSB9O1xuICAgICAgICBlbHNlIGlmICh0aGlzLmlzSW5zdWZmaWNpZW50TWF0ZXJpYWwoKSB8fCB0aGlzLmlzU3RhbGVtYXRlKCkpXG4gICAgICAgICAgICByZXR1cm4geyB3aW5uZXI6IHVuZGVmaW5lZCB9O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFsbERlc3RzKCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eCgpO1xuICAgICAgICBjb25zdCBkID0gbmV3IE1hcCgpO1xuICAgICAgICBpZiAoY3R4LnZhcmlhbnRFbmQpXG4gICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgZm9yIChjb25zdCBzcXVhcmUgb2YgdGhpcy5ib2FyZFt0aGlzLnR1cm5dKSB7XG4gICAgICAgICAgICBkLnNldChzcXVhcmUsIHRoaXMuZGVzdHMoc3F1YXJlLCBjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZDtcbiAgICB9XG4gICAgcGxheSh1Y2kpIHtcbiAgICAgICAgY29uc3QgdHVybiA9IHRoaXMudHVybiwgZXBTcXVhcmUgPSB0aGlzLmVwU3F1YXJlO1xuICAgICAgICB0aGlzLmVwU3F1YXJlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhbGZtb3ZlcyArPSAxO1xuICAgICAgICBpZiAodHVybiA9PT0gJ2JsYWNrJylcbiAgICAgICAgICAgIHRoaXMuZnVsbG1vdmVzICs9IDE7XG4gICAgICAgIHRoaXMudHVybiA9IHV0aWxfMS5vcHBvc2l0ZSh0dXJuKTtcbiAgICAgICAgaWYgKHR5cGVzXzEuaXNEcm9wKHVjaSkpIHtcbiAgICAgICAgICAgIHRoaXMuYm9hcmQuc2V0KHVjaS50bywgeyByb2xlOiB1Y2kucm9sZSwgY29sb3I6IHR1cm4gfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wb2NrZXRzKVxuICAgICAgICAgICAgICAgIHRoaXMucG9ja2V0c1t0dXJuXVt1Y2kucm9sZV0tLTtcbiAgICAgICAgICAgIGlmICh1Y2kucm9sZSA9PT0gJ3Bhd24nKVxuICAgICAgICAgICAgICAgIHRoaXMuaGFsZm1vdmVzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy5ib2FyZC50YWtlKHVjaS5mcm9tKTtcbiAgICAgICAgICAgIGlmICghcGllY2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGVwQ2FwdHVyZTtcbiAgICAgICAgICAgIGlmIChwaWVjZS5yb2xlID09PSAncGF3bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbGZtb3ZlcyA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHVjaS50byA9PT0gZXBTcXVhcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXBDYXB0dXJlID0gdGhpcy5ib2FyZC50YWtlKHVjaS50byArICh0dXJuID09PSAnd2hpdGUnID8gLTggOiA4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gdWNpLmZyb20gLSB1Y2kudG87XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhKSA9PT0gMTYgJiYgOCA8PSB1Y2kuZnJvbSAmJiB1Y2kuZnJvbSA8PSA1NSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVwU3F1YXJlID0gKHVjaS5mcm9tICsgdWNpLnRvKSA+PiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodWNpLnByb21vdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBwaWVjZS5yb2xlID0gdWNpLnByb21vdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcGllY2UucHJvbW90ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBpZWNlLnJvbGUgPT09ICdyb29rJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FzdGxlcy5kaXNjYXJkUm9vayh1Y2kuZnJvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwaWVjZS5yb2xlID09PSAna2luZycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IHVjaS50byAtIHVjaS5mcm9tO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2FzdGxpbmcgPSBNYXRoLmFicyhkZWx0YSkgPT09IDIgfHwgdGhpcy5ib2FyZFt0dXJuXS5oYXModWNpLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNDYXN0bGluZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWRlID0gZGVsdGEgPiAwID8gJ2gnIDogJ2EnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb29rRnJvbSA9IHRoaXMuY2FzdGxlcy5yb29rW3R1cm5dW3NpZGVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbF8xLmRlZmluZWQocm9va0Zyb20pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb29rID0gdGhpcy5ib2FyZC50YWtlKHJvb2tGcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmQuc2V0KGtpbmdDYXN0bGVzVG8odHVybiwgc2lkZSksIHBpZWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb29rKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmQuc2V0KHJvb2tDYXN0bGVzVG8odHVybiwgc2lkZSksIHJvb2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2FzdGxlcy5kaXNjYXJkU2lkZSh0dXJuKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNDYXN0bGluZylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FwdHVyZSA9IHRoaXMuYm9hcmQuc2V0KHVjaS50bywgcGllY2UpIHx8IGVwQ2FwdHVyZTtcbiAgICAgICAgICAgIGlmIChjYXB0dXJlKVxuICAgICAgICAgICAgICAgIHRoaXMucGxheUNhcHR1cmVBdCh1Y2kudG8sIGNhcHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhc0xlZ2FsRXAoKSB7XG4gICAgICAgIGlmICghdGhpcy5lcFNxdWFyZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHgoKTtcbiAgICAgICAgY29uc3Qgb3VyUGF3bnMgPSB0aGlzLmJvYXJkLnBpZWNlcyh0aGlzLnR1cm4sICdwYXduJyk7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBvdXJQYXducy5pbnRlcnNlY3QoYXR0YWNrc18xLnBhd25BdHRhY2tzKHV0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pLCB0aGlzLmVwU3F1YXJlKSk7XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlc3RzKGNhbmRpZGF0ZSwgY3R4KS5oYXModGhpcy5lcFNxdWFyZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmV4cG9ydHMuUG9zaXRpb24gPSBQb3NpdGlvbjtcbmNsYXNzIENoZXNzIGV4dGVuZHMgUG9zaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHJ1bGVzKSB7XG4gICAgICAgIHN1cGVyKHJ1bGVzIHx8ICdjaGVzcycpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdCgpIHtcbiAgICAgICAgY29uc3QgcG9zID0gbmV3IHRoaXMoKTtcbiAgICAgICAgcG9zLmJvYXJkID0gYm9hcmRfMS5Cb2FyZC5kZWZhdWx0KCk7XG4gICAgICAgIHBvcy5wb2NrZXRzID0gdW5kZWZpbmVkO1xuICAgICAgICBwb3MudHVybiA9ICd3aGl0ZSc7XG4gICAgICAgIHBvcy5jYXN0bGVzID0gQ2FzdGxlcy5kZWZhdWx0KCk7XG4gICAgICAgIHBvcy5lcFNxdWFyZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9zLnJlbWFpbmluZ0NoZWNrcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9zLmhhbGZtb3ZlcyA9IDA7XG4gICAgICAgIHBvcy5mdWxsbW92ZXMgPSAxO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIGNvbnN0IHBvcyA9IG5ldyB0aGlzKCk7XG4gICAgICAgIHBvcy5ib2FyZCA9IHNldHVwLmJvYXJkLmNsb25lKCk7XG4gICAgICAgIHBvcy5wb2NrZXRzID0gdW5kZWZpbmVkO1xuICAgICAgICBwb3MudHVybiA9IHNldHVwLnR1cm47XG4gICAgICAgIHBvcy5jYXN0bGVzID0gQ2FzdGxlcy5mcm9tU2V0dXAoc2V0dXApO1xuICAgICAgICBwb3MuZXBTcXVhcmUgPSBwb3MudmFsaWRFcFNxdWFyZShzZXR1cC5lcFNxdWFyZSk7XG4gICAgICAgIHBvcy5yZW1haW5pbmdDaGVja3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBvcy5oYWxmbW92ZXMgPSBzZXR1cC5oYWxmbW92ZXM7XG4gICAgICAgIHBvcy5mdWxsbW92ZXMgPSBzZXR1cC5mdWxsbW92ZXM7XG4gICAgICAgIHJldHVybiBwb3MudmFsaWRhdGUoKS5tYXAoXyA9PiBwb3MpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmNsb25lKCk7XG4gICAgfVxuICAgIHZhbGlkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5ib2FyZC5vY2N1cGllZC5pc0VtcHR5KCkpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgUG9zaXRpb25FcnJvcihJbGxlZ2FsU2V0dXAuRW1wdHkpKTtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmQua2luZy5zaXplKCkgIT09IDIpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgUG9zaXRpb25FcnJvcihJbGxlZ2FsU2V0dXAuS2luZ3MpKTtcbiAgICAgICAgaWYgKCF1dGlsXzEuZGVmaW5lZCh0aGlzLmJvYXJkLmtpbmdPZih0aGlzLnR1cm4pKSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBQb3NpdGlvbkVycm9yKElsbGVnYWxTZXR1cC5LaW5ncykpO1xuICAgICAgICBjb25zdCBvdGhlcktpbmcgPSB0aGlzLmJvYXJkLmtpbmdPZih1dGlsXzEub3Bwb3NpdGUodGhpcy50dXJuKSk7XG4gICAgICAgIGlmICghdXRpbF8xLmRlZmluZWQob3RoZXJLaW5nKSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBQb3NpdGlvbkVycm9yKElsbGVnYWxTZXR1cC5LaW5ncykpO1xuICAgICAgICBpZiAodGhpcy5raW5nQXR0YWNrZXJzKG90aGVyS2luZywgdGhpcy50dXJuLCB0aGlzLmJvYXJkLm9jY3VwaWVkKS5ub25FbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgUG9zaXRpb25FcnJvcihJbGxlZ2FsU2V0dXAuT3Bwb3NpdGVDaGVjaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcXVhcmVTZXRfMS5TcXVhcmVTZXQuYmFja3JhbmtzKCkuaW50ZXJzZWN0cyh0aGlzLmJvYXJkLnBhd24pKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgUG9zaXRpb25FcnJvcihJbGxlZ2FsU2V0dXAuUGF3bnNPbkJhY2tyYW5rKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayh1bmRlZmluZWQpO1xuICAgIH1cbiAgICB2YWxpZEVwU3F1YXJlKHNxdWFyZSkge1xuICAgICAgICBpZiAoIXNxdWFyZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgZXBSYW5rID0gdGhpcy50dXJuID09PSAnd2hpdGUnID8gNSA6IDI7XG4gICAgICAgIGNvbnN0IGZvcndhcmQgPSB0aGlzLnR1cm4gPT09ICd3aGl0ZScgPyA4IDogLTg7XG4gICAgICAgIGlmICgoc3F1YXJlID4+IDMpICE9PSBlcFJhbmspXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmJvYXJkLm9jY3VwaWVkLmhhcyhzcXVhcmUgKyBmb3J3YXJkKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcGF3biA9IHNxdWFyZSAtIGZvcndhcmQ7XG4gICAgICAgIGlmICghdGhpcy5ib2FyZC5wYXduLmhhcyhwYXduKSB8fCAhdGhpcy5ib2FyZFt1dGlsXzEub3Bwb3NpdGUodGhpcy50dXJuKV0uaGFzKHBhd24pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gc3F1YXJlO1xuICAgIH1cbiAgICBjYXN0bGluZ0Rlc3Qoc2lkZSwgY3R4KSB7XG4gICAgICAgIGlmICghdXRpbF8xLmRlZmluZWQoY3R4LmtpbmcpIHx8IGN0eC5jaGVja2Vycy5ub25FbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBjb25zdCByb29rID0gdGhpcy5jYXN0bGVzLnJvb2tbdGhpcy50dXJuXVtzaWRlXTtcbiAgICAgICAgaWYgKCF1dGlsXzEuZGVmaW5lZChyb29rKSlcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FzdGxlcy5wYXRoW3RoaXMudHVybl1bc2lkZV0uaW50ZXJzZWN0cyh0aGlzLmJvYXJkLm9jY3VwaWVkKSlcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgY29uc3Qga2luZ1RvID0ga2luZ0Nhc3RsZXNUbyh0aGlzLnR1cm4sIHNpZGUpO1xuICAgICAgICBjb25zdCBraW5nUGF0aCA9IGF0dGFja3NfMS5iZXR3ZWVuKGN0eC5raW5nLCBraW5nVG8pO1xuICAgICAgICBjb25zdCBvY2MgPSB0aGlzLmJvYXJkLm9jY3VwaWVkLndpdGhvdXQoY3R4LmtpbmcpO1xuICAgICAgICBmb3IgKGNvbnN0IHNxIG9mIGtpbmdQYXRoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5raW5nQXR0YWNrZXJzKHNxLCB1dGlsXzEub3Bwb3NpdGUodGhpcy50dXJuKSwgb2NjKS5ub25FbXB0eSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb29rVG8gPSByb29rQ2FzdGxlc1RvKHRoaXMudHVybiwgc2lkZSk7XG4gICAgICAgIGNvbnN0IGFmdGVyID0gdGhpcy5ib2FyZC5vY2N1cGllZC50b2dnbGUoY3R4LmtpbmcpLnRvZ2dsZShyb29rKS50b2dnbGUocm9va1RvKTtcbiAgICAgICAgaWYgKHRoaXMua2luZ0F0dGFja2VycyhraW5nVG8sIHV0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pLCBhZnRlcikubm9uRW1wdHkoKSlcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgcmV0dXJuIHNxdWFyZVNldF8xLlNxdWFyZVNldC5mcm9tU3F1YXJlKHJvb2spO1xuICAgIH1cbiAgICBjYW5DYXB0dXJlRXAocGF3biwgY3R4KSB7XG4gICAgICAgIGlmICghdXRpbF8xLmRlZmluZWQodGhpcy5lcFNxdWFyZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghYXR0YWNrc18xLnBhd25BdHRhY2tzKHRoaXMudHVybiwgcGF3bikuaGFzKHRoaXMuZXBTcXVhcmUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKGN0eC5raW5nKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjb25zdCBjYXB0dXJlZCA9IHRoaXMuZXBTcXVhcmUgKyAoKHRoaXMudHVybiA9PT0gJ3doaXRlJykgPyAtOCA6IDgpO1xuICAgICAgICBjb25zdCBvY2N1cGllZCA9IHRoaXMuYm9hcmQub2NjdXBpZWQudG9nZ2xlKHBhd24pLnRvZ2dsZSh0aGlzLmVwU3F1YXJlKS50b2dnbGUoY2FwdHVyZWQpO1xuICAgICAgICByZXR1cm4gIXRoaXMua2luZ0F0dGFja2VycyhjdHgua2luZywgdXRpbF8xLm9wcG9zaXRlKHRoaXMudHVybiksIG9jY3VwaWVkKS5pbnRlcnNlY3RzKG9jY3VwaWVkKTtcbiAgICB9XG4gICAgcHNldWRvRGVzdHMoc3F1YXJlLCBjdHgpIHtcbiAgICAgICAgaWYgKGN0eC52YXJpYW50RW5kKVxuICAgICAgICAgICAgcmV0dXJuIHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBjb25zdCBwaWVjZSA9IHRoaXMuYm9hcmQuZ2V0KHNxdWFyZSk7XG4gICAgICAgIGlmICghcGllY2UgfHwgcGllY2UuY29sb3IgIT09IHRoaXMudHVybilcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgbGV0IHBzZXVkbyA9IGF0dGFja3NfMS5hdHRhY2tzKHBpZWNlLCBzcXVhcmUsIHRoaXMuYm9hcmQub2NjdXBpZWQpO1xuICAgICAgICBpZiAocGllY2Uucm9sZSA9PT0gJ3Bhd24nKSB7XG4gICAgICAgICAgICBsZXQgY2FwdHVyZVRhcmdldHMgPSB0aGlzLmJvYXJkW3V0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pXTtcbiAgICAgICAgICAgIGlmICh1dGlsXzEuZGVmaW5lZCh0aGlzLmVwU3F1YXJlKSlcbiAgICAgICAgICAgICAgICBjYXB0dXJlVGFyZ2V0cyA9IGNhcHR1cmVUYXJnZXRzLndpdGgodGhpcy5lcFNxdWFyZSk7XG4gICAgICAgICAgICBwc2V1ZG8gPSBwc2V1ZG8uaW50ZXJzZWN0KGNhcHR1cmVUYXJnZXRzKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gdGhpcy50dXJuID09PSAnd2hpdGUnID8gOCA6IC04O1xuICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHNxdWFyZSArIGRlbHRhO1xuICAgICAgICAgICAgaWYgKDAgPD0gc3RlcCAmJiBzdGVwIDwgNjQgJiYgIXRoaXMuYm9hcmQub2NjdXBpZWQuaGFzKHN0ZXApKSB7XG4gICAgICAgICAgICAgICAgcHNldWRvID0gcHNldWRvLndpdGgoc3RlcCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuRG91YmxlU3RlcCA9IHRoaXMudHVybiA9PT0gJ3doaXRlJyA/IChzcXVhcmUgPCAxNikgOiAoc3F1YXJlID49IDY0IC0gMTYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvdWJsZVN0ZXAgPSBzdGVwICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgaWYgKGNhbkRvdWJsZVN0ZXAgJiYgIXRoaXMuYm9hcmQub2NjdXBpZWQuaGFzKGRvdWJsZVN0ZXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHBzZXVkbyA9IHBzZXVkby53aXRoKGRvdWJsZVN0ZXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwc2V1ZG87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwc2V1ZG8gPSBwc2V1ZG8uZGlmZih0aGlzLmJvYXJkW3RoaXMudHVybl0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcXVhcmUgPT09IGN0eC5raW5nKVxuICAgICAgICAgICAgcmV0dXJuIHBzZXVkby51bmlvbih0aGlzLmNhc3RsaW5nRGVzdCgnYScsIGN0eCkpLnVuaW9uKHRoaXMuY2FzdGxpbmdEZXN0KCdoJywgY3R4KSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBwc2V1ZG87XG4gICAgfVxuICAgIGRlc3RzKHNxdWFyZSwgY3R4KSB7XG4gICAgICAgIGlmIChjdHgudmFyaWFudEVuZClcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgY29uc3QgcGllY2UgPSB0aGlzLmJvYXJkLmdldChzcXVhcmUpO1xuICAgICAgICBpZiAoIXBpZWNlIHx8IHBpZWNlLmNvbG9yICE9PSB0aGlzLnR1cm4pXG4gICAgICAgICAgICByZXR1cm4gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIGxldCBwc2V1ZG8sIGxlZ2FsO1xuICAgICAgICBpZiAocGllY2Uucm9sZSA9PT0gJ3Bhd24nKSB7XG4gICAgICAgICAgICBwc2V1ZG8gPSBhdHRhY2tzXzEucGF3bkF0dGFja3ModGhpcy50dXJuLCBzcXVhcmUpLmludGVyc2VjdCh0aGlzLmJvYXJkW3V0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pXSk7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IHRoaXMudHVybiA9PT0gJ3doaXRlJyA/IDggOiAtODtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBzcXVhcmUgKyBkZWx0YTtcbiAgICAgICAgICAgIGlmICgwIDw9IHN0ZXAgJiYgc3RlcCA8IDY0ICYmICF0aGlzLmJvYXJkLm9jY3VwaWVkLmhhcyhzdGVwKSkge1xuICAgICAgICAgICAgICAgIHBzZXVkbyA9IHBzZXVkby53aXRoKHN0ZXApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbkRvdWJsZVN0ZXAgPSB0aGlzLnR1cm4gPT09ICd3aGl0ZScgPyAoc3F1YXJlIDwgMTYpIDogKHNxdWFyZSA+PSA2NCAtIDE2KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkb3VibGVTdGVwID0gc3RlcCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIGlmIChjYW5Eb3VibGVTdGVwICYmICF0aGlzLmJvYXJkLm9jY3VwaWVkLmhhcyhkb3VibGVTdGVwKSkge1xuICAgICAgICAgICAgICAgICAgICBwc2V1ZG8gPSBwc2V1ZG8ud2l0aChkb3VibGVTdGVwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmRlZmluZWQodGhpcy5lcFNxdWFyZSkgJiYgdGhpcy5jYW5DYXB0dXJlRXAoc3F1YXJlLCBjdHgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF3biA9IHRoaXMuZXBTcXVhcmUgLSBkZWx0YTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmNoZWNrZXJzLmlzRW1wdHkoKSB8fCBjdHguY2hlY2tlcnMuc2luZ2xlU3F1YXJlKCkgPT09IHBhd24pIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnYWwgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVNxdWFyZSh0aGlzLmVwU3F1YXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGllY2Uucm9sZSA9PT0gJ2Jpc2hvcCcpXG4gICAgICAgICAgICBwc2V1ZG8gPSBhdHRhY2tzXzEuYmlzaG9wQXR0YWNrcyhzcXVhcmUsIHRoaXMuYm9hcmQub2NjdXBpZWQpO1xuICAgICAgICBlbHNlIGlmIChwaWVjZS5yb2xlID09PSAna25pZ2h0JylcbiAgICAgICAgICAgIHBzZXVkbyA9IGF0dGFja3NfMS5rbmlnaHRBdHRhY2tzKHNxdWFyZSk7XG4gICAgICAgIGVsc2UgaWYgKHBpZWNlLnJvbGUgPT09ICdyb29rJylcbiAgICAgICAgICAgIHBzZXVkbyA9IGF0dGFja3NfMS5yb29rQXR0YWNrcyhzcXVhcmUsIHRoaXMuYm9hcmQub2NjdXBpZWQpO1xuICAgICAgICBlbHNlIGlmIChwaWVjZS5yb2xlID09PSAncXVlZW4nKVxuICAgICAgICAgICAgcHNldWRvID0gYXR0YWNrc18xLnF1ZWVuQXR0YWNrcyhzcXVhcmUsIHRoaXMuYm9hcmQub2NjdXBpZWQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBwc2V1ZG8gPSBhdHRhY2tzXzEua2luZ0F0dGFja3Moc3F1YXJlKTtcbiAgICAgICAgcHNldWRvID0gcHNldWRvLmRpZmYodGhpcy5ib2FyZFt0aGlzLnR1cm5dKTtcbiAgICAgICAgaWYgKHV0aWxfMS5kZWZpbmVkKGN0eC5raW5nKSkge1xuICAgICAgICAgICAgaWYgKHBpZWNlLnJvbGUgPT09ICdraW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9jYyA9IHRoaXMuYm9hcmQub2NjdXBpZWQud2l0aG91dChzcXVhcmUpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdG8gb2YgcHNldWRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtpbmdBdHRhY2tlcnModG8sIHV0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pLCBvY2MpLm5vbkVtcHR5KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBwc2V1ZG8gPSBwc2V1ZG8ud2l0aG91dCh0byk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwc2V1ZG8udW5pb24odGhpcy5jYXN0bGluZ0Rlc3QoJ2EnLCBjdHgpKS51bmlvbih0aGlzLmNhc3RsaW5nRGVzdCgnaCcsIGN0eCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN0eC5jaGVja2Vycy5ub25FbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlciA9IGN0eC5jaGVja2Vycy5zaW5nbGVTcXVhcmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKGNoZWNrZXIpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgcHNldWRvID0gcHNldWRvLmludGVyc2VjdChhdHRhY2tzXzEuYmV0d2VlbihjaGVja2VyLCBjdHgua2luZykud2l0aChjaGVja2VyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3R4LmJsb2NrZXJzLmhhcyhzcXVhcmUpKVxuICAgICAgICAgICAgICAgIHBzZXVkbyA9IHBzZXVkby5pbnRlcnNlY3QoYXR0YWNrc18xLnJheShzcXVhcmUsIGN0eC5raW5nKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZ2FsKVxuICAgICAgICAgICAgcHNldWRvID0gcHNldWRvLnVuaW9uKGxlZ2FsKTtcbiAgICAgICAgcmV0dXJuIHBzZXVkbztcbiAgICB9XG4gICAgaXNWYXJpYW50RW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhcmlhbnRPdXRjb21lKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhc0luc3VmZmljaWVudE1hdGVyaWFsKGNvbG9yKSB7XG4gICAgICAgIGlmICh0aGlzLmJvYXJkW2NvbG9yXS5pbnRlcnNlY3QodGhpcy5ib2FyZC5wYXduLnVuaW9uKHRoaXMuYm9hcmQucm9va3NBbmRRdWVlbnMoKSkpLm5vbkVtcHR5KCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmJvYXJkW2NvbG9yXS5pbnRlcnNlY3RzKHRoaXMuYm9hcmQua25pZ2h0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmRbY29sb3JdLnNpemUoKSA8PSAyICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFt1dGlsXzEub3Bwb3NpdGUoY29sb3IpXS5kaWZmKHRoaXMuYm9hcmQua2luZykuZGlmZih0aGlzLmJvYXJkLnF1ZWVuKS5pc0VtcHR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbY29sb3JdLmludGVyc2VjdHModGhpcy5ib2FyZC5iaXNob3ApKSB7XG4gICAgICAgICAgICBjb25zdCBzYW1lQ29sb3IgPSAhdGhpcy5ib2FyZC5iaXNob3AuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZGFya1NxdWFyZXMoKSkgfHxcbiAgICAgICAgICAgICAgICAhdGhpcy5ib2FyZC5iaXNob3AuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQubGlnaHRTcXVhcmVzKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHNhbWVDb2xvciAmJiB0aGlzLmJvYXJkW3V0aWxfMS5vcHBvc2l0ZShjb2xvcildLmRpZmYodGhpcy5ib2FyZC5raW5nKS5kaWZmKHRoaXMuYm9hcmQucm9vaykuZGlmZih0aGlzLmJvYXJkLnF1ZWVuKS5pc0VtcHR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZXhwb3J0cy5DaGVzcyA9IENoZXNzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCByZXN1bHRfMSA9IHJlcXVpcmUoXCJAYmFkcmFwL3Jlc3VsdFwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IHNxdWFyZVNldF8xID0gcmVxdWlyZShcIi4vc3F1YXJlU2V0XCIpO1xuY29uc3QgYm9hcmRfMSA9IHJlcXVpcmUoXCIuL2JvYXJkXCIpO1xuY29uc3Qgc2V0dXBfMSA9IHJlcXVpcmUoXCIuL3NldHVwXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbmV4cG9ydHMuSU5JVElBTF9CT0FSRF9GRU4gPSAncm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUic7XG5leHBvcnRzLklOSVRJQUxfRVBEID0gZXhwb3J0cy5JTklUSUFMX0JPQVJEX0ZFTiArICcgdyBLUWtxIC0nO1xuZXhwb3J0cy5JTklUSUFMX0ZFTiA9IGV4cG9ydHMuSU5JVElBTF9FUEQgKyAnIDAgMSc7XG5leHBvcnRzLkVNUFRZX0JPQVJEX0ZFTiA9ICc4LzgvOC84LzgvOC84LzgnO1xuZXhwb3J0cy5FTVBUWV9FUEQgPSBleHBvcnRzLkVNUFRZX0JPQVJEX0ZFTiArICcgdyAtIC0nO1xuZXhwb3J0cy5FTVBUWV9GRU4gPSBleHBvcnRzLkVNUFRZX0VQRCArICcgMCAxJztcbnZhciBJbnZhbGlkRmVuO1xuKGZ1bmN0aW9uIChJbnZhbGlkRmVuKSB7XG4gICAgSW52YWxpZEZlbltcIkZlblwiXSA9IFwiRVJSX0ZFTlwiO1xuICAgIEludmFsaWRGZW5bXCJCb2FyZFwiXSA9IFwiRVJSX0JPQVJEXCI7XG4gICAgSW52YWxpZEZlbltcIlBvY2tldHNcIl0gPSBcIkVSUl9QT0NLRVRTXCI7XG4gICAgSW52YWxpZEZlbltcIlR1cm5cIl0gPSBcIkVSUl9UVVJOXCI7XG4gICAgSW52YWxpZEZlbltcIkNhc3RsaW5nXCJdID0gXCJFUlJfQ0FTVExJTkdcIjtcbiAgICBJbnZhbGlkRmVuW1wiRXBTcXVhcmVcIl0gPSBcIkVSUl9FUF9TUVVBUkVcIjtcbiAgICBJbnZhbGlkRmVuW1wiUmVtYWluaW5nQ2hlY2tzXCJdID0gXCJFUlJfUkVNQUlOSU5HX0NIRUNLU1wiO1xuICAgIEludmFsaWRGZW5bXCJIYWxmbW92ZXNcIl0gPSBcIkVSUl9IQUxGTU9WRVNcIjtcbiAgICBJbnZhbGlkRmVuW1wiRnVsbG1vdmVzXCJdID0gXCJFUlJfRlVMTE1PVkVTXCI7XG59KShJbnZhbGlkRmVuID0gZXhwb3J0cy5JbnZhbGlkRmVuIHx8IChleHBvcnRzLkludmFsaWRGZW4gPSB7fSkpO1xuY2xhc3MgRmVuRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5leHBvcnRzLkZlbkVycm9yID0gRmVuRXJyb3I7XG5mdW5jdGlvbiBudGhJbmRleE9mKGhheXN0YWNrLCBuZWVkbGUsIG4pIHtcbiAgICBsZXQgaW5kZXggPSBoYXlzdGFjay5pbmRleE9mKG5lZWRsZSk7XG4gICAgd2hpbGUgKG4tLSA+IDApIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpbmRleCA9IGhheXN0YWNrLmluZGV4T2YobmVlZGxlLCBpbmRleCArIG5lZWRsZS5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gaW5kZXg7XG59XG5mdW5jdGlvbiBwYXJzZVNtYWxsVWludChzdHIpIHtcbiAgICByZXR1cm4gL15cXGR7MSw0fSQvLnRlc3Qoc3RyKSA/IHBhcnNlSW50KHN0ciwgMTApIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gY2hhclRvUGllY2UoY2gpIHtcbiAgICBjb25zdCByb2xlID0gdXRpbF8xLmNoYXJUb1JvbGUoY2gpO1xuICAgIHJldHVybiByb2xlICYmIHsgcm9sZSwgY29sb3I6IGNoLnRvTG93ZXJDYXNlKCkgPT09IGNoID8gJ2JsYWNrJyA6ICd3aGl0ZScgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlQm9hcmRGZW4oYm9hcmRQYXJ0KSB7XG4gICAgY29uc3QgYm9hcmQgPSBib2FyZF8xLkJvYXJkLmVtcHR5KCk7XG4gICAgbGV0IHJhbmsgPSA3O1xuICAgIGxldCBmaWxlID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkUGFydC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjID0gYm9hcmRQYXJ0W2ldO1xuICAgICAgICBpZiAoYyA9PT0gJy8nICYmIGZpbGUgPT09IDgpIHtcbiAgICAgICAgICAgIGZpbGUgPSAwO1xuICAgICAgICAgICAgcmFuay0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHBhcnNlSW50KGMsIDEwKTtcbiAgICAgICAgICAgIGlmIChzdGVwKVxuICAgICAgICAgICAgICAgIGZpbGUgKz0gc3RlcDtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlID49IDggfHwgcmFuayA8IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLkJvYXJkKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZmlsZSArIHJhbmsgKiA4O1xuICAgICAgICAgICAgICAgIGNvbnN0IHBpZWNlID0gY2hhclRvUGllY2UoYyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwaWVjZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IEZlbkVycm9yKEludmFsaWRGZW4uQm9hcmQpKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9hcmRQYXJ0W2kgKyAxXSA9PT0gJ34nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBpZWNlLnByb21vdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib2FyZC5zZXQoc3F1YXJlLCBwaWVjZSk7XG4gICAgICAgICAgICAgICAgZmlsZSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyYW5rICE9PSAwIHx8IGZpbGUgIT09IDgpXG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLkJvYXJkKSk7XG4gICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayhib2FyZCk7XG59XG5leHBvcnRzLnBhcnNlQm9hcmRGZW4gPSBwYXJzZUJvYXJkRmVuO1xuZnVuY3Rpb24gcGFyc2VQb2NrZXRzKHBvY2tldFBhcnQpIHtcbiAgICBpZiAocG9ja2V0UGFydC5sZW5ndGggPiA2NClcbiAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IEZlbkVycm9yKEludmFsaWRGZW4uUG9ja2V0cykpO1xuICAgIGNvbnN0IHBvY2tldHMgPSBzZXR1cF8xLk1hdGVyaWFsLmVtcHR5KCk7XG4gICAgZm9yIChjb25zdCBjIG9mIHBvY2tldFBhcnQpIHtcbiAgICAgICAgY29uc3QgcGllY2UgPSBjaGFyVG9QaWVjZShjKTtcbiAgICAgICAgaWYgKCFwaWVjZSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLlBvY2tldHMpKTtcbiAgICAgICAgcG9ja2V0c1twaWVjZS5jb2xvcl1bcGllY2Uucm9sZV0rKztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayhwb2NrZXRzKTtcbn1cbmV4cG9ydHMucGFyc2VQb2NrZXRzID0gcGFyc2VQb2NrZXRzO1xuZnVuY3Rpb24gcGFyc2VDYXN0bGluZ0Zlbihib2FyZCwgY2FzdGxpbmdQYXJ0KSB7XG4gICAgbGV0IHVubW92ZWRSb29rcyA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgIGlmIChjYXN0bGluZ1BhcnQgPT09ICctJylcbiAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayh1bm1vdmVkUm9va3MpO1xuICAgIGlmICghL15bS1FBQkNERUZHSF17MCwyfVtrcWFiY2RlZmdoXXswLDJ9JC8udGVzdChjYXN0bGluZ1BhcnQpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLkNhc3RsaW5nKSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYyBvZiBjYXN0bGluZ1BhcnQpIHtcbiAgICAgICAgY29uc3QgbG93ZXIgPSBjLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gYyA9PT0gbG93ZXIgPyAnYmxhY2snIDogJ3doaXRlJztcbiAgICAgICAgY29uc3QgYmFja3JhbmsgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuYmFja3JhbmsoY29sb3IpLmludGVyc2VjdChib2FyZFtjb2xvcl0pO1xuICAgICAgICBsZXQgY2FuZGlkYXRlcztcbiAgICAgICAgaWYgKGxvd2VyID09PSAncScpXG4gICAgICAgICAgICBjYW5kaWRhdGVzID0gYmFja3Jhbms7XG4gICAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnaycpXG4gICAgICAgICAgICBjYW5kaWRhdGVzID0gYmFja3JhbmsucmV2ZXJzZWQoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2FuZGlkYXRlcyA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5mcm9tU3F1YXJlKGxvd2VyLmNoYXJDb2RlQXQoMCkgLSAnYScuY2hhckNvZGVBdCgwKSkuaW50ZXJzZWN0KGJhY2tyYW5rKTtcbiAgICAgICAgZm9yIChjb25zdCBzcXVhcmUgb2YgY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgaWYgKGJvYXJkLmtpbmcuaGFzKHNxdWFyZSkgJiYgIWJvYXJkLnByb21vdGVkLmhhcyhzcXVhcmUpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKGJvYXJkLnJvb2suaGFzKHNxdWFyZSkpIHtcbiAgICAgICAgICAgICAgICB1bm1vdmVkUm9va3MgPSB1bm1vdmVkUm9va3Mud2l0aChzcXVhcmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQub2sodW5tb3ZlZFJvb2tzKTtcbn1cbmV4cG9ydHMucGFyc2VDYXN0bGluZ0ZlbiA9IHBhcnNlQ2FzdGxpbmdGZW47XG5mdW5jdGlvbiBwYXJzZVJlbWFpbmluZ0NoZWNrcyhwYXJ0KSB7XG4gICAgY29uc3QgcGFydHMgPSBwYXJ0LnNwbGl0KCcrJyk7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMyAmJiBwYXJ0c1swXSA9PT0gJycpIHtcbiAgICAgICAgY29uc3Qgd2hpdGUgPSBwYXJzZVNtYWxsVWludChwYXJ0c1sxXSk7XG4gICAgICAgIGNvbnN0IGJsYWNrID0gcGFyc2VTbWFsbFVpbnQocGFydHNbMl0pO1xuICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKHdoaXRlKSB8fCB3aGl0ZSA+IDMgfHwgIXV0aWxfMS5kZWZpbmVkKGJsYWNrKSB8fCBibGFjayA+IDMpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgRmVuRXJyb3IoSW52YWxpZEZlbi5SZW1haW5pbmdDaGVja3MpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayhuZXcgc2V0dXBfMS5SZW1haW5pbmdDaGVja3MoMyAtIHdoaXRlLCAzIC0gYmxhY2spKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGNvbnN0IHdoaXRlID0gcGFyc2VTbWFsbFVpbnQocGFydHNbMF0pO1xuICAgICAgICBjb25zdCBibGFjayA9IHBhcnNlU21hbGxVaW50KHBhcnRzWzFdKTtcbiAgICAgICAgaWYgKCF1dGlsXzEuZGVmaW5lZCh3aGl0ZSkgfHwgd2hpdGUgPiAzIHx8ICF1dGlsXzEuZGVmaW5lZChibGFjaykgfHwgYmxhY2sgPiAzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IEZlbkVycm9yKEludmFsaWRGZW4uUmVtYWluaW5nQ2hlY2tzKSk7XG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQub2sobmV3IHNldHVwXzEuUmVtYWluaW5nQ2hlY2tzKHdoaXRlLCBibGFjaykpO1xuICAgIH1cbiAgICBlbHNlXG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLlJlbWFpbmluZ0NoZWNrcykpO1xufVxuZXhwb3J0cy5wYXJzZVJlbWFpbmluZ0NoZWNrcyA9IHBhcnNlUmVtYWluaW5nQ2hlY2tzO1xuZnVuY3Rpb24gcGFyc2VGZW4oZmVuKSB7XG4gICAgY29uc3QgcGFydHMgPSBmZW4uc3BsaXQoJyAnKTtcbiAgICBjb25zdCBib2FyZFBhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgIC8vIEJvYXJkIGFuZCBwb2NrZXRzXG4gICAgbGV0IGJvYXJkLCBwb2NrZXRzID0gcmVzdWx0XzEuUmVzdWx0Lm9rKHVuZGVmaW5lZCk7XG4gICAgaWYgKGJvYXJkUGFydC5lbmRzV2l0aCgnXScpKSB7XG4gICAgICAgIGNvbnN0IHBvY2tldFN0YXJ0ID0gYm9hcmRQYXJ0LmluZGV4T2YoJ1snKTtcbiAgICAgICAgaWYgKHBvY2tldFN0YXJ0ID09PSAtMSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLkZlbikpO1xuICAgICAgICBib2FyZCA9IHBhcnNlQm9hcmRGZW4oYm9hcmRQYXJ0LnN1YnN0cigwLCBwb2NrZXRTdGFydCkpO1xuICAgICAgICBwb2NrZXRzID0gcGFyc2VQb2NrZXRzKGJvYXJkUGFydC5zdWJzdHIocG9ja2V0U3RhcnQgKyAxLCBib2FyZFBhcnQubGVuZ3RoIC0gMSAtIHBvY2tldFN0YXJ0IC0gMSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgcG9ja2V0U3RhcnQgPSBudGhJbmRleE9mKGJvYXJkUGFydCwgJy8nLCA3KTtcbiAgICAgICAgaWYgKHBvY2tldFN0YXJ0ID09PSAtMSlcbiAgICAgICAgICAgIGJvYXJkID0gcGFyc2VCb2FyZEZlbihib2FyZFBhcnQpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJvYXJkID0gcGFyc2VCb2FyZEZlbihib2FyZFBhcnQuc3Vic3RyKDAsIHBvY2tldFN0YXJ0KSk7XG4gICAgICAgICAgICBwb2NrZXRzID0gcGFyc2VQb2NrZXRzKGJvYXJkUGFydC5zdWJzdHIocG9ja2V0U3RhcnQgKyAxKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVHVyblxuICAgIGxldCB0dXJuO1xuICAgIGNvbnN0IHR1cm5QYXJ0ID0gcGFydHMuc2hpZnQoKTtcbiAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKHR1cm5QYXJ0KSB8fCB0dXJuUGFydCA9PT0gJ3cnKVxuICAgICAgICB0dXJuID0gJ3doaXRlJztcbiAgICBlbHNlIGlmICh0dXJuUGFydCA9PT0gJ2InKVxuICAgICAgICB0dXJuID0gJ2JsYWNrJztcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBGZW5FcnJvcihJbnZhbGlkRmVuLlR1cm4pKTtcbiAgICByZXR1cm4gYm9hcmQuY2hhaW4oYm9hcmQgPT4ge1xuICAgICAgICAvLyBDYXN0bGluZ1xuICAgICAgICBjb25zdCBjYXN0bGluZ1BhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBjb25zdCB1bm1vdmVkUm9va3MgPSB1dGlsXzEuZGVmaW5lZChjYXN0bGluZ1BhcnQpID8gcGFyc2VDYXN0bGluZ0Zlbihib2FyZCwgY2FzdGxpbmdQYXJ0KSA6IHJlc3VsdF8xLlJlc3VsdC5vayhzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKSk7XG4gICAgICAgIC8vIEVuIHBhc3NhbnQgc3F1YXJlXG4gICAgICAgIGNvbnN0IGVwUGFydCA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICAgIGxldCBlcFNxdWFyZTtcbiAgICAgICAgaWYgKHV0aWxfMS5kZWZpbmVkKGVwUGFydCkgJiYgZXBQYXJ0ICE9PSAnLScpIHtcbiAgICAgICAgICAgIGVwU3F1YXJlID0gdXRpbF8xLnBhcnNlU3F1YXJlKGVwUGFydCk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKGVwU3F1YXJlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgRmVuRXJyb3IoSW52YWxpZEZlbi5FcFNxdWFyZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhhbGZtb3ZlcyBvciByZW1haW5pbmcgY2hlY2tzXG4gICAgICAgIGxldCBoYWxmbW92ZVBhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBsZXQgZWFybHlSZW1haW5pbmdDaGVja3M7XG4gICAgICAgIGlmICh1dGlsXzEuZGVmaW5lZChoYWxmbW92ZVBhcnQpICYmIGhhbGZtb3ZlUGFydC5pbmNsdWRlcygnKycpKSB7XG4gICAgICAgICAgICBlYXJseVJlbWFpbmluZ0NoZWNrcyA9IHBhcnNlUmVtYWluaW5nQ2hlY2tzKGhhbGZtb3ZlUGFydCk7XG4gICAgICAgICAgICBoYWxmbW92ZVBhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhbGZtb3ZlcyA9IHV0aWxfMS5kZWZpbmVkKGhhbGZtb3ZlUGFydCkgPyBwYXJzZVNtYWxsVWludChoYWxmbW92ZVBhcnQpIDogMDtcbiAgICAgICAgaWYgKCF1dGlsXzEuZGVmaW5lZChoYWxmbW92ZXMpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IEZlbkVycm9yKEludmFsaWRGZW4uSGFsZm1vdmVzKSk7XG4gICAgICAgIGNvbnN0IGZ1bGxtb3Zlc1BhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBjb25zdCBmdWxsbW92ZXMgPSB1dGlsXzEuZGVmaW5lZChmdWxsbW92ZXNQYXJ0KSA/IHBhcnNlU21hbGxVaW50KGZ1bGxtb3Zlc1BhcnQpIDogMTtcbiAgICAgICAgaWYgKCF1dGlsXzEuZGVmaW5lZChmdWxsbW92ZXMpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IEZlbkVycm9yKEludmFsaWRGZW4uRnVsbG1vdmVzKSk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0NoZWNrc1BhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBsZXQgcmVtYWluaW5nQ2hlY2tzID0gcmVzdWx0XzEuUmVzdWx0Lm9rKHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh1dGlsXzEuZGVmaW5lZChyZW1haW5pbmdDaGVja3NQYXJ0KSkge1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5kZWZpbmVkKGVhcmx5UmVtYWluaW5nQ2hlY2tzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgRmVuRXJyb3IoSW52YWxpZEZlbi5SZW1haW5pbmdDaGVja3MpKTtcbiAgICAgICAgICAgIHJlbWFpbmluZ0NoZWNrcyA9IHBhcnNlUmVtYWluaW5nQ2hlY2tzKHJlbWFpbmluZ0NoZWNrc1BhcnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHV0aWxfMS5kZWZpbmVkKGVhcmx5UmVtYWluaW5nQ2hlY2tzKSkge1xuICAgICAgICAgICAgcmVtYWluaW5nQ2hlY2tzID0gZWFybHlSZW1haW5pbmdDaGVja3M7XG4gICAgICAgIH1cbiAgICAgICAgO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IEZlbkVycm9yKEludmFsaWRGZW4uRmVuKSk7XG4gICAgICAgIHJldHVybiBwb2NrZXRzLmNoYWluKHBvY2tldHMgPT4gdW5tb3ZlZFJvb2tzLmNoYWluKHVubW92ZWRSb29rcyA9PiByZW1haW5pbmdDaGVja3MubWFwKHJlbWFpbmluZ0NoZWNrcyA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJvYXJkLFxuICAgICAgICAgICAgICAgIHBvY2tldHMsXG4gICAgICAgICAgICAgICAgdHVybixcbiAgICAgICAgICAgICAgICB1bm1vdmVkUm9va3MsXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nQ2hlY2tzLFxuICAgICAgICAgICAgICAgIGVwU3F1YXJlLFxuICAgICAgICAgICAgICAgIGhhbGZtb3ZlcyxcbiAgICAgICAgICAgICAgICBmdWxsbW92ZXM6IE1hdGgubWF4KDEsIGZ1bGxtb3ZlcylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSk7XG4gICAgfSk7XG59XG5leHBvcnRzLnBhcnNlRmVuID0gcGFyc2VGZW47XG5mdW5jdGlvbiBwYXJzZVBpZWNlKHN0cikge1xuICAgIGlmICghc3RyKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgcGllY2UgPSBjaGFyVG9QaWVjZShzdHJbMF0pO1xuICAgIGlmICghcGllY2UpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMiAmJiBzdHJbMV0gPT09ICd+JylcbiAgICAgICAgcGllY2UucHJvbW90ZWQgPSB0cnVlO1xuICAgIGVsc2UgaWYgKHN0ci5sZW5ndGggPiAxKVxuICAgICAgICByZXR1cm47XG4gICAgcmV0dXJuIHBpZWNlO1xufVxuZXhwb3J0cy5wYXJzZVBpZWNlID0gcGFyc2VQaWVjZTtcbmZ1bmN0aW9uIG1ha2VQaWVjZShwaWVjZSwgb3B0cykge1xuICAgIGxldCByID0gdXRpbF8xLnJvbGVUb0NoYXIocGllY2Uucm9sZSk7XG4gICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKVxuICAgICAgICByID0gci50b1VwcGVyQ2FzZSgpO1xuICAgIGlmIChvcHRzICYmIG9wdHMucHJvbW90ZWQgJiYgcGllY2UucHJvbW90ZWQpXG4gICAgICAgIHIgKz0gJ34nO1xuICAgIHJldHVybiByO1xufVxuZXhwb3J0cy5tYWtlUGllY2UgPSBtYWtlUGllY2U7XG5mdW5jdGlvbiBtYWtlQm9hcmRGZW4oYm9hcmQsIG9wdHMpIHtcbiAgICBsZXQgZmVuID0gJyc7XG4gICAgbGV0IGVtcHR5ID0gMDtcbiAgICBmb3IgKGxldCByYW5rID0gNzsgcmFuayA+PSAwOyByYW5rLS0pIHtcbiAgICAgICAgZm9yIChsZXQgZmlsZSA9IDA7IGZpbGUgPCA4OyBmaWxlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNxdWFyZSA9IGZpbGUgKyByYW5rICogODtcbiAgICAgICAgICAgIGNvbnN0IHBpZWNlID0gYm9hcmQuZ2V0KHNxdWFyZSk7XG4gICAgICAgICAgICBpZiAoIXBpZWNlKVxuICAgICAgICAgICAgICAgIGVtcHR5Kys7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVuICs9IGVtcHR5O1xuICAgICAgICAgICAgICAgICAgICBlbXB0eSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZlbiArPSBtYWtlUGllY2UocGllY2UsIG9wdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbGUgPT09IDcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVuICs9IGVtcHR5O1xuICAgICAgICAgICAgICAgICAgICBlbXB0eSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyYW5rICE9PSAwKVxuICAgICAgICAgICAgICAgICAgICBmZW4gKz0gJy8nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmZW47XG59XG5leHBvcnRzLm1ha2VCb2FyZEZlbiA9IG1ha2VCb2FyZEZlbjtcbmZ1bmN0aW9uIG1ha2VQb2NrZXQobWF0ZXJpYWwpIHtcbiAgICByZXR1cm4gdHlwZXNfMS5ST0xFUy5tYXAocm9sZSA9PiB1dGlsXzEucm9sZVRvQ2hhcihyb2xlKS5yZXBlYXQobWF0ZXJpYWxbcm9sZV0pKS5qb2luKCcnKTtcbn1cbmZ1bmN0aW9uIG1ha2VQb2NrZXRzKHBvY2tldCkge1xuICAgIHJldHVybiBtYWtlUG9ja2V0KHBvY2tldC53aGl0ZSkudG9VcHBlckNhc2UoKSArIG1ha2VQb2NrZXQocG9ja2V0LmJsYWNrKTtcbn1cbmV4cG9ydHMubWFrZVBvY2tldHMgPSBtYWtlUG9ja2V0cztcbmZ1bmN0aW9uIG1ha2VDYXN0bGluZ0Zlbihib2FyZCwgdW5tb3ZlZFJvb2tzLCBvcHRzKSB7XG4gICAgY29uc3Qgc2hyZWRkZXIgPSBvcHRzICYmIG9wdHMuc2hyZWRkZXI7XG4gICAgbGV0IGZlbiA9ICcnO1xuICAgIGZvciAoY29uc3QgY29sb3Igb2YgdHlwZXNfMS5DT0xPUlMpIHtcbiAgICAgICAgY29uc3QgYmFja3JhbmsgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuYmFja3JhbmsoY29sb3IpO1xuICAgICAgICBjb25zdCBraW5nID0gYm9hcmQua2luZ09mKGNvbG9yKTtcbiAgICAgICAgaWYgKCF1dGlsXzEuZGVmaW5lZChraW5nKSB8fCAhYmFja3JhbmsuaGFzKGtpbmcpKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBib2FyZC5waWVjZXMoY29sb3IsICdyb29rJykuaW50ZXJzZWN0KGJhY2tyYW5rKTtcbiAgICAgICAgZm9yIChjb25zdCByb29rIG9mIHVubW92ZWRSb29rcy5pbnRlcnNlY3QoY2FuZGlkYXRlcykucmV2ZXJzZWQoKSkge1xuICAgICAgICAgICAgaWYgKCFzaHJlZGRlciAmJiByb29rID09PSBjYW5kaWRhdGVzLmZpcnN0KCkgJiYgcm9vayA8IGtpbmcpIHtcbiAgICAgICAgICAgICAgICBmZW4gKz0gY29sb3IgPT09ICd3aGl0ZScgPyAnUScgOiAncSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghc2hyZWRkZXIgJiYgcm9vayA9PT0gY2FuZGlkYXRlcy5sYXN0KCkgJiYga2luZyA8IHJvb2spIHtcbiAgICAgICAgICAgICAgICBmZW4gKz0gY29sb3IgPT09ICd3aGl0ZScgPyAnSycgOiAnayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmZW4gKz0gKGNvbG9yID09PSAnd2hpdGUnID8gJ0FCQ0RFRkdIJyA6ICdhYmNkZWZnaCcpW3Jvb2sgJiAweDddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmZW4gfHwgJy0nO1xufVxuZXhwb3J0cy5tYWtlQ2FzdGxpbmdGZW4gPSBtYWtlQ2FzdGxpbmdGZW47XG5mdW5jdGlvbiBtYWtlUmVtYWluaW5nQ2hlY2tzKGNoZWNrcykge1xuICAgIHJldHVybiBgJHtjaGVja3Mud2hpdGV9KyR7Y2hlY2tzLmJsYWNrfWA7XG59XG5leHBvcnRzLm1ha2VSZW1haW5pbmdDaGVja3MgPSBtYWtlUmVtYWluaW5nQ2hlY2tzO1xuZnVuY3Rpb24gbWFrZUZlbihzZXR1cCwgb3B0cykge1xuICAgIHJldHVybiBbXG4gICAgICAgIG1ha2VCb2FyZEZlbihzZXR1cC5ib2FyZCwgb3B0cykgKyAoc2V0dXAucG9ja2V0cyA/IGBbJHttYWtlUG9ja2V0cyhzZXR1cC5wb2NrZXRzKX1dYCA6ICcnKSxcbiAgICAgICAgc2V0dXAudHVyblswXSxcbiAgICAgICAgbWFrZUNhc3RsaW5nRmVuKHNldHVwLmJvYXJkLCBzZXR1cC51bm1vdmVkUm9va3MsIG9wdHMpLFxuICAgICAgICB1dGlsXzEuZGVmaW5lZChzZXR1cC5lcFNxdWFyZSkgPyB1dGlsXzEubWFrZVNxdWFyZShzZXR1cC5lcFNxdWFyZSkgOiAnLScsXG4gICAgICAgIC4uLihzZXR1cC5yZW1haW5pbmdDaGVja3MgPyBbbWFrZVJlbWFpbmluZ0NoZWNrcyhzZXR1cC5yZW1haW5pbmdDaGVja3MpXSA6IFtdKSxcbiAgICAgICAgLi4uKG9wdHMgJiYgb3B0cy5lcGQgPyBbXSA6IFtzZXR1cC5oYWxmbW92ZXMsIHNldHVwLmZ1bGxtb3Zlc10pXG4gICAgXS5qb2luKCcgJyk7XG59XG5leHBvcnRzLm1ha2VGZW4gPSBtYWtlRmVuO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3Qgc3F1YXJlU2V0XzEgPSByZXF1aXJlKFwiLi9zcXVhcmVTZXRcIik7XG5jb25zdCBhdHRhY2tzXzEgPSByZXF1aXJlKFwiLi9hdHRhY2tzXCIpO1xuZnVuY3Rpb24gbWFrZVNhbldpdGhvdXRTdWZmaXgocG9zLCB1Y2kpIHtcbiAgICBsZXQgc2FuID0gJyc7XG4gICAgaWYgKHR5cGVzXzEuaXNEcm9wKHVjaSkpIHtcbiAgICAgICAgaWYgKHVjaS5yb2xlICE9PSAncGF3bicpXG4gICAgICAgICAgICBzYW4gPSB1dGlsXzEucm9sZVRvQ2hhcih1Y2kucm9sZSkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgc2FuICs9ICdAJyArIHV0aWxfMS5tYWtlU3F1YXJlKHVjaS50byk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCByb2xlID0gcG9zLmJvYXJkLmdldFJvbGUodWNpLmZyb20pO1xuICAgICAgICBpZiAoIXJvbGUpXG4gICAgICAgICAgICByZXR1cm4gJy0tJztcbiAgICAgICAgaWYgKHJvbGUgPT09ICdraW5nJyAmJiAocG9zLmJvYXJkW3Bvcy50dXJuXS5oYXModWNpLnRvKSB8fCBNYXRoLmFicyh1Y2kudG8gLSB1Y2kuZnJvbSkgPT09IDIpKSB7XG4gICAgICAgICAgICBzYW4gPSB1Y2kudG8gPiB1Y2kuZnJvbSA/ICdPLU8nIDogJ08tTy1PJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmUgPSBwb3MuYm9hcmQub2NjdXBpZWQuaGFzKHVjaS50bykgfHwgKHJvbGUgPT09ICdwYXduJyAmJiAodWNpLmZyb20gJiAweDcpICE9PSAodWNpLnRvICYgMHg3KSk7XG4gICAgICAgICAgICBpZiAocm9sZSAhPT0gJ3Bhd24nKSB7XG4gICAgICAgICAgICAgICAgc2FuID0gdXRpbF8xLnJvbGVUb0NoYXIocm9sZSkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBEaXNhbWJpZ3VhdGlvblxuICAgICAgICAgICAgICAgIGxldCBvdGhlcnM7XG4gICAgICAgICAgICAgICAgaWYgKHJvbGUgPT09ICdraW5nJylcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJzID0gYXR0YWNrc18xLmtpbmdBdHRhY2tzKHVjaS50bykuaW50ZXJzZWN0KHBvcy5ib2FyZC5raW5nKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb2xlID09PSAncXVlZW4nKVxuICAgICAgICAgICAgICAgICAgICBvdGhlcnMgPSBhdHRhY2tzXzEucXVlZW5BdHRhY2tzKHVjaS50bywgcG9zLmJvYXJkLm9jY3VwaWVkKS5pbnRlcnNlY3QocG9zLmJvYXJkLnF1ZWVuKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb2xlID09PSAncm9vaycpXG4gICAgICAgICAgICAgICAgICAgIG90aGVycyA9IGF0dGFja3NfMS5yb29rQXR0YWNrcyh1Y2kudG8sIHBvcy5ib2FyZC5vY2N1cGllZCkuaW50ZXJzZWN0KHBvcy5ib2FyZC5yb29rKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb2xlID09PSAnYmlzaG9wJylcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJzID0gYXR0YWNrc18xLmJpc2hvcEF0dGFja3ModWNpLnRvLCBwb3MuYm9hcmQub2NjdXBpZWQpLmludGVyc2VjdChwb3MuYm9hcmQuYmlzaG9wKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG90aGVycyA9IGF0dGFja3NfMS5rbmlnaHRBdHRhY2tzKHVjaS50bykuaW50ZXJzZWN0KHBvcy5ib2FyZC5rbmlnaHQpO1xuICAgICAgICAgICAgICAgIG90aGVycyA9IG90aGVycy5pbnRlcnNlY3QocG9zLmJvYXJkW3Bvcy50dXJuXSkud2l0aG91dCh1Y2kuZnJvbSk7XG4gICAgICAgICAgICAgICAgaWYgKG90aGVycy5ub25FbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHBvcy5jdHgoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmcm9tIG9mIG90aGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3MuZGVzdHMoZnJvbSwgY3R4KS5oYXModWNpLnRvKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdGhlcnMgPSBvdGhlcnMud2l0aG91dChmcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3RoZXJzLm5vbkVtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByb3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW4gPSBvdGhlcnMuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVJhbmsodWNpLmZyb20gPj4gMykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG90aGVycy5pbnRlcnNlY3RzKHNxdWFyZVNldF8xLlNxdWFyZVNldC5mcm9tRmlsZSh1Y2kuZnJvbSAmIDB4NykpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FuICs9ICdhYmNkZWZnaCdbdWNpLmZyb20gJiAweDddO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW4gKz0gJzEyMzQ1Njc4J1t1Y2kuZnJvbSA+PiAzXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNhcHR1cmUpXG4gICAgICAgICAgICAgICAgc2FuID0gJ2FiY2RlZmdoJ1t1Y2kuZnJvbSAmIDB4N107XG4gICAgICAgICAgICBpZiAoY2FwdHVyZSlcbiAgICAgICAgICAgICAgICBzYW4gKz0gJ3gnO1xuICAgICAgICAgICAgc2FuICs9IHV0aWxfMS5tYWtlU3F1YXJlKHVjaS50byk7XG4gICAgICAgICAgICBpZiAodWNpLnByb21vdGlvbilcbiAgICAgICAgICAgICAgICBzYW4gKz0gJz0nICsgdXRpbF8xLnJvbGVUb0NoYXIodWNpLnByb21vdGlvbikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2FuO1xufVxuZnVuY3Rpb24gbWFrZVNhbkFuZFBsYXkocG9zLCB1Y2kpIHtcbiAgICBjb25zdCBzYW4gPSBtYWtlU2FuV2l0aG91dFN1ZmZpeChwb3MsIHVjaSk7XG4gICAgcG9zLnBsYXkodWNpKTtcbiAgICBjb25zdCBvdXRjb21lID0gcG9zLm91dGNvbWUoKTtcbiAgICBpZiAob3V0Y29tZSAmJiBvdXRjb21lLndpbm5lcilcbiAgICAgICAgcmV0dXJuIHNhbiArICcjJztcbiAgICBlbHNlIGlmIChwb3MuaXNDaGVjaygpKVxuICAgICAgICByZXR1cm4gc2FuICsgJysnO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHNhbjtcbn1cbmV4cG9ydHMubWFrZVNhbkFuZFBsYXkgPSBtYWtlU2FuQW5kUGxheTtcbmZ1bmN0aW9uIG1ha2VTYW5WYXJpYXRpb24ocG9zLCB2YXJpYXRpb24pIHtcbiAgICBwb3MgPSBwb3MuY2xvbmUoKTtcbiAgICBsZXQgbGluZSA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFyaWF0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9PSAwKVxuICAgICAgICAgICAgbGluZSArPSAnICc7XG4gICAgICAgIGlmIChwb3MudHVybiA9PT0gJ3doaXRlJylcbiAgICAgICAgICAgIGxpbmUgKz0gcG9zLmZ1bGxtb3ZlcyArICcuICc7XG4gICAgICAgIGVsc2UgaWYgKGkgPT09IDApXG4gICAgICAgICAgICBsaW5lID0gcG9zLmZ1bGxtb3ZlcyArICcuLi4gJztcbiAgICAgICAgY29uc3Qgc2FuID0gbWFrZVNhbldpdGhvdXRTdWZmaXgocG9zLCB2YXJpYXRpb25baV0pO1xuICAgICAgICBwb3MucGxheSh2YXJpYXRpb25baV0pO1xuICAgICAgICBsaW5lICs9IHNhbjtcbiAgICAgICAgaWYgKHNhbiA9PT0gJy0tJylcbiAgICAgICAgICAgIHJldHVybiBsaW5lO1xuICAgICAgICBsZXQgb3ZlciA9IGZhbHNlO1xuICAgICAgICBpZiAoaSA9PT0gdmFyaWF0aW9uLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dGNvbWUgPSBwb3Mub3V0Y29tZSgpO1xuICAgICAgICAgICAgb3ZlciA9ICEhKG91dGNvbWUgJiYgb3V0Y29tZS53aW5uZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdmVyKVxuICAgICAgICAgICAgbGluZSArPSAnIyc7XG4gICAgICAgIGVsc2UgaWYgKHBvcy5pc0NoZWNrKCkpXG4gICAgICAgICAgICBsaW5lICs9ICcrJztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmU7XG59XG5leHBvcnRzLm1ha2VTYW5WYXJpYXRpb24gPSBtYWtlU2FuVmFyaWF0aW9uO1xuZnVuY3Rpb24gbWFrZVNhbihwb3MsIHVjaSkge1xuICAgIHJldHVybiBtYWtlU2FuQW5kUGxheShwb3MuY2xvbmUoKSwgdWNpKTtcbn1cbmV4cG9ydHMubWFrZVNhbiA9IG1ha2VTYW47XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IHNxdWFyZVNldF8xID0gcmVxdWlyZShcIi4vc3F1YXJlU2V0XCIpO1xuY29uc3QgYm9hcmRfMSA9IHJlcXVpcmUoXCIuL2JvYXJkXCIpO1xuY2xhc3MgTWF0ZXJpYWxTaWRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgY29uc3QgbSA9IG5ldyBNYXRlcmlhbFNpZGUoKTtcbiAgICAgICAgZm9yIChjb25zdCByb2xlIG9mIHR5cGVzXzEuUk9MRVMpXG4gICAgICAgICAgICBtW3JvbGVdID0gMDtcbiAgICAgICAgcmV0dXJuIG07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICBjb25zdCBtID0gbmV3IE1hdGVyaWFsU2lkZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHJvbGUgb2YgdHlwZXNfMS5ST0xFUylcbiAgICAgICAgICAgIG1bcm9sZV0gPSB0aGlzW3JvbGVdO1xuICAgICAgICByZXR1cm4gbTtcbiAgICB9XG4gICAgbm9uRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0eXBlc18xLlJPTEVTLnNvbWUocm9sZSA9PiB0aGlzW3JvbGVdID4gMCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5ub25FbXB0eSgpO1xuICAgIH1cbiAgICBoYXNQYXducygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF3biA+IDA7XG4gICAgfVxuICAgIGhhc05vblBhd25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rbmlnaHQgPiAwIHx8IHRoaXMuYmlzaG9wID4gMCB8fCB0aGlzLnJvb2sgPiAwIHx8IHRoaXMucXVlZW4gPiAwIHx8IHRoaXMua2luZyA+IDA7XG4gICAgfVxuICAgIGNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXduICsgdGhpcy5rbmlnaHQgKyB0aGlzLmJpc2hvcCArIHRoaXMucm9vayArIHRoaXMucXVlZW4gKyB0aGlzLmtpbmc7XG4gICAgfVxufVxuZXhwb3J0cy5NYXRlcmlhbFNpZGUgPSBNYXRlcmlhbFNpZGU7XG5jbGFzcyBNYXRlcmlhbCB7XG4gICAgY29uc3RydWN0b3Iod2hpdGUsIGJsYWNrKSB7XG4gICAgICAgIHRoaXMud2hpdGUgPSB3aGl0ZTtcbiAgICAgICAgdGhpcy5ibGFjayA9IGJsYWNrO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0ZXJpYWwoTWF0ZXJpYWxTaWRlLmVtcHR5KCksIE1hdGVyaWFsU2lkZS5lbXB0eSgpKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0ZXJpYWwodGhpcy53aGl0ZS5jbG9uZSgpLCB0aGlzLmJsYWNrLmNsb25lKCkpO1xuICAgIH1cbiAgICBjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2hpdGUuY291bnQoKSArIHRoaXMuYmxhY2suY291bnQoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2hpdGUuaXNFbXB0eSgpICYmIHRoaXMuYmxhY2suaXNFbXB0eSgpO1xuICAgIH1cbiAgICBub25FbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaGFzUGF3bnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndoaXRlLmhhc1Bhd25zKCkgfHwgdGhpcy5ibGFjay5oYXNQYXducygpO1xuICAgIH1cbiAgICBoYXNOb25QYXducygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2hpdGUuaGFzTm9uUGF3bnMoKSB8fCB0aGlzLmJsYWNrLmhhc05vblBhd25zKCk7XG4gICAgfVxufVxuZXhwb3J0cy5NYXRlcmlhbCA9IE1hdGVyaWFsO1xuY2xhc3MgUmVtYWluaW5nQ2hlY2tzIHtcbiAgICBjb25zdHJ1Y3Rvcih3aGl0ZSwgYmxhY2spIHtcbiAgICAgICAgdGhpcy53aGl0ZSA9IHdoaXRlO1xuICAgICAgICB0aGlzLmJsYWNrID0gYmxhY2s7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlbWFpbmluZ0NoZWNrcygzLCAzKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVtYWluaW5nQ2hlY2tzKHRoaXMud2hpdGUsIHRoaXMuYmxhY2spO1xuICAgIH1cbn1cbmV4cG9ydHMuUmVtYWluaW5nQ2hlY2tzID0gUmVtYWluaW5nQ2hlY2tzO1xuZnVuY3Rpb24gZGVmYXVsdFNldHVwKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJvYXJkOiBib2FyZF8xLkJvYXJkLmRlZmF1bHQoKSxcbiAgICAgICAgcG9ja2V0czogdW5kZWZpbmVkLFxuICAgICAgICB0dXJuOiAnd2hpdGUnLFxuICAgICAgICB1bm1vdmVkUm9va3M6IHNxdWFyZVNldF8xLlNxdWFyZVNldC5jb3JuZXJzKCksXG4gICAgICAgIGVwU3F1YXJlOiB1bmRlZmluZWQsXG4gICAgICAgIHJlbWFpbmluZ0NoZWNrczogdW5kZWZpbmVkLFxuICAgICAgICBoYWxmbW92ZXM6IDAsXG4gICAgICAgIGZ1bGxtb3ZlczogMSxcbiAgICB9O1xufVxuZXhwb3J0cy5kZWZhdWx0U2V0dXAgPSBkZWZhdWx0U2V0dXA7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHBvcGNudDMyKG4pIHtcbiAgICBuID0gbiAtICgobiA+Pj4gMSkgJiAxNDMxNjU1NzY1KTtcbiAgICBuID0gKG4gJiA4NTg5OTM0NTkpICsgKChuID4+PiAyKSAmIDg1ODk5MzQ1OSk7XG4gICAgcmV0dXJuICgobiArIChuID4+PiA0KSAmIDI1MjY0NTEzNSkgKiAxNjg0MzAwOSkgPj4gMjQ7XG59XG5mdW5jdGlvbiBic3dhcDMyKG4pIHtcbiAgICBuID0gKG4gPj4+IDgpICYgMTY3MTE5MzUgfCAoKG4gJiAxNjcxMTkzNSkgPDwgOCk7XG4gICAgcmV0dXJuIChuID4+PiAxNikgJiAweGZmZmYgfCAoKG4gJiAweGZmZmYpIDw8IDE2KTtcbn1cbmZ1bmN0aW9uIHJiaXQzMihuKSB7XG4gICAgbiA9ICgobiA+Pj4gMSkgJiAxNDMxNjU1NzY1KSB8ICgobiAmIDE0MzE2NTU3NjUpIDw8IDEpO1xuICAgIG4gPSAoKG4gPj4+IDIpICYgODU4OTkzNDU5KSB8ICgobiAmIDg1ODk5MzQ1OSkgPDwgMik7XG4gICAgbiA9ICgobiA+Pj4gNCkgJiAyNTI2NDUxMzUpIHwgKChuICYgMjUyNjQ1MTM1KSA8PCA0KTtcbiAgICBuID0gKChuID4+PiA4KSAmIDE2NzExOTM1KSB8ICgobiAmIDE2NzExOTM1KSA8PCA4KTtcbiAgICBuID0gKChuID4+PiAxNikgJiA2NTUzNSkgfCAoKG4gJiA2NTUzNSkgPDwgMTYpO1xuICAgIHJldHVybiBuO1xufVxuY2xhc3MgU3F1YXJlU2V0IHtcbiAgICBjb25zdHJ1Y3RvcihsbywgaGkpIHtcbiAgICAgICAgdGhpcy5sbyA9IGxvO1xuICAgICAgICB0aGlzLmhpID0gaGk7XG4gICAgICAgIHRoaXMubG8gPSBsbyB8IDA7XG4gICAgICAgIHRoaXMuaGkgPSBoaSB8IDA7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3F1YXJlKHNxdWFyZSkge1xuICAgICAgICByZXR1cm4gc3F1YXJlID49IDMyID9cbiAgICAgICAgICAgIG5ldyBTcXVhcmVTZXQoMCwgMSA8PCAoc3F1YXJlIC0gMzIpKSA6XG4gICAgICAgICAgICBuZXcgU3F1YXJlU2V0KDEgPDwgc3F1YXJlLCAwKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21SYW5rKHJhbmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVhcmVTZXQoMHhmZiwgMCkuc2hsNjQoOCAqIHJhbmspO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUZpbGUoZmlsZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCgxNjg0MzAwOSA8PCBmaWxlLCAxNjg0MzAwOSA8PCBmaWxlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCgwLCAwKTtcbiAgICB9XG4gICAgc3RhdGljIGZ1bGwoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlU2V0KDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUpO1xuICAgIH1cbiAgICBzdGF0aWMgY29ybmVycygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVhcmVTZXQoMHg4MSwgMjE2NDI2MDg2NCk7XG4gICAgfVxuICAgIHN0YXRpYyBjZW50ZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlU2V0KDQwMjY1MzE4NCwgMHgxOCk7XG4gICAgfVxuICAgIHN0YXRpYyBiYWNrcmFua3MoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlU2V0KDB4ZmYsIDQyNzgxOTAwODApO1xuICAgIH1cbiAgICBzdGF0aWMgYmFja3JhbmsoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yID09PSAnd2hpdGUnID8gbmV3IFNxdWFyZVNldCgweGZmLCAwKSA6IG5ldyBTcXVhcmVTZXQoMCwgNDI3ODE5MDA4MCk7XG4gICAgfVxuICAgIHN0YXRpYyBsaWdodFNxdWFyZXMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlU2V0KDE0MzcyMjY0MTAsIDE0MzcyMjY0MTApO1xuICAgIH1cbiAgICBzdGF0aWMgZGFya1NxdWFyZXMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3F1YXJlU2V0KDI4NTc3NDA4ODUsIDI4NTc3NDA4ODUpO1xuICAgIH1cbiAgICBjb21wbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCh+dGhpcy5sbywgfnRoaXMuaGkpO1xuICAgIH1cbiAgICB4b3Iob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVhcmVTZXQodGhpcy5sbyBeIG90aGVyLmxvLCB0aGlzLmhpIF4gb3RoZXIuaGkpO1xuICAgIH1cbiAgICB1bmlvbihvdGhlcikge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCh0aGlzLmxvIHwgb3RoZXIubG8sIHRoaXMuaGkgfCBvdGhlci5oaSk7XG4gICAgfVxuICAgIGludGVyc2VjdChvdGhlcikge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCh0aGlzLmxvICYgb3RoZXIubG8sIHRoaXMuaGkgJiBvdGhlci5oaSk7XG4gICAgfVxuICAgIGRpZmYob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVhcmVTZXQodGhpcy5sbyAmIH5vdGhlci5sbywgdGhpcy5oaSAmIH5vdGhlci5oaSk7XG4gICAgfVxuICAgIGludGVyc2VjdHMob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0KG90aGVyKS5ub25FbXB0eSgpO1xuICAgIH1cbiAgICBpc0Rpc2pvaW50KG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdChvdGhlcikuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBzdXBlcnNldE9mKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlci5kaWZmKHRoaXMpLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgc3Vic2V0T2Yob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlmZihvdGhlcikuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBzaHI2NChzaGlmdCkge1xuICAgICAgICBpZiAoc2hpZnQgPj0gNjQpXG4gICAgICAgICAgICByZXR1cm4gU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIGlmIChzaGlmdCA+PSAzMilcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3F1YXJlU2V0KHRoaXMuaGkgPj4+IChzaGlmdCAtIDMyKSwgMCk7XG4gICAgICAgIGlmIChzaGlmdCA+IDApXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCgodGhpcy5sbyA+Pj4gc2hpZnQpIF4gKHRoaXMuaGkgPDwgKDMyIC0gc2hpZnQpKSwgdGhpcy5oaSA+Pj4gc2hpZnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2hsNjQoc2hpZnQpIHtcbiAgICAgICAgaWYgKHNoaWZ0ID49IDY0KVxuICAgICAgICAgICAgcmV0dXJuIFNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBpZiAoc2hpZnQgPj0gMzIpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCgwLCB0aGlzLmxvIDw8IChzaGlmdCAtIDMyKSk7XG4gICAgICAgIGlmIChzaGlmdCA+IDApXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldCh0aGlzLmxvIDw8IHNoaWZ0LCAodGhpcy5oaSA8PCBzaGlmdCkgXiAodGhpcy5sbyA+Pj4gKDMyIC0gc2hpZnQpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBic3dhcDY0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldChic3dhcDMyKHRoaXMuaGkpLCBic3dhcDMyKHRoaXMubG8pKTtcbiAgICB9XG4gICAgcmJpdDY0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVNldChyYml0MzIodGhpcy5oaSksIHJiaXQzMih0aGlzLmxvKSk7XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5sbyA9PT0gb3RoZXIubG8gJiYgdGhpcy5oaSA9PT0gb3RoZXIuaGk7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiBwb3BjbnQzMih0aGlzLmxvKSArIHBvcGNudDMyKHRoaXMuaGkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sbyA9PT0gMCAmJiB0aGlzLmhpID09PSAwO1xuICAgIH1cbiAgICBub25FbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG8gIT09IDAgfHwgdGhpcy5oaSAhPT0gMDtcbiAgICB9XG4gICAgaGFzKHNxdWFyZSkge1xuICAgICAgICByZXR1cm4gISEoc3F1YXJlID49IDMyID8gdGhpcy5oaSAmICgxIDw8IChzcXVhcmUgLSAzMikpIDogdGhpcy5sbyAmICgxIDw8IHNxdWFyZSkpO1xuICAgIH1cbiAgICBzZXQoc3F1YXJlLCBvbikge1xuICAgICAgICByZXR1cm4gb24gPyB0aGlzLndpdGgoc3F1YXJlKSA6IHRoaXMud2l0aG91dChzcXVhcmUpO1xuICAgIH1cbiAgICB3aXRoKHNxdWFyZSkge1xuICAgICAgICByZXR1cm4gc3F1YXJlID49IDMyID9cbiAgICAgICAgICAgIG5ldyBTcXVhcmVTZXQodGhpcy5sbywgdGhpcy5oaSB8ICgxIDw8IChzcXVhcmUgLSAzMikpKSA6XG4gICAgICAgICAgICBuZXcgU3F1YXJlU2V0KHRoaXMubG8gfCAoMSA8PCBzcXVhcmUpLCB0aGlzLmhpKTtcbiAgICB9XG4gICAgd2l0aG91dChzcXVhcmUpIHtcbiAgICAgICAgcmV0dXJuIHNxdWFyZSA+PSAzMiA/XG4gICAgICAgICAgICBuZXcgU3F1YXJlU2V0KHRoaXMubG8sIHRoaXMuaGkgJiB+KDEgPDwgKHNxdWFyZSAtIDMyKSkpIDpcbiAgICAgICAgICAgIG5ldyBTcXVhcmVTZXQodGhpcy5sbyAmIH4oMSA8PCBzcXVhcmUpLCB0aGlzLmhpKTtcbiAgICB9XG4gICAgdG9nZ2xlKHNxdWFyZSkge1xuICAgICAgICByZXR1cm4gc3F1YXJlID49IDMyID9cbiAgICAgICAgICAgIG5ldyBTcXVhcmVTZXQodGhpcy5sbywgdGhpcy5oaSBeICgxIDw8IChzcXVhcmUgLSAzMikpKSA6XG4gICAgICAgICAgICBuZXcgU3F1YXJlU2V0KHRoaXMubG8gXiAoMSA8PCBzcXVhcmUpLCB0aGlzLmhpKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGkgIT09IDApXG4gICAgICAgICAgICByZXR1cm4gNjMgLSBNYXRoLmNsejMyKHRoaXMuaGkpO1xuICAgICAgICBpZiAodGhpcy5sbyAhPT0gMClcbiAgICAgICAgICAgIHJldHVybiAzMSAtIE1hdGguY2x6MzIodGhpcy5sbyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIGlmICh0aGlzLmxvICE9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIDMxIC0gTWF0aC5jbHozMih0aGlzLmxvICYgLXRoaXMubG8pO1xuICAgICAgICBpZiAodGhpcy5oaSAhPT0gMClcbiAgICAgICAgICAgIHJldHVybiA2MyAtIE1hdGguY2x6MzIodGhpcy5oaSAmIC10aGlzLmhpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtb3JlVGhhbk9uZSgpIHtcbiAgICAgICAgcmV0dXJuICEhKCh0aGlzLmhpICYmIHRoaXMubG8pIHx8IHRoaXMubG8gJiAodGhpcy5sbyAtIDEpIHx8IHRoaXMuaGkgJiAodGhpcy5oaSAtIDEpKTtcbiAgICB9XG4gICAgc2luZ2xlU3F1YXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb3JlVGhhbk9uZSgpID8gdW5kZWZpbmVkIDogdGhpcy5sYXN0KCk7XG4gICAgfVxuICAgIGlzU2luZ2xlU3F1YXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub25FbXB0eSgpICYmICF0aGlzLm1vcmVUaGFuT25lKCk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBsZXQgbG8gPSB0aGlzLmxvO1xuICAgICAgICBsZXQgaGkgPSB0aGlzLmhpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgICAgICBpZiAobG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gMzEgLSBNYXRoLmNsejMyKGxvICYgLWxvKTtcbiAgICAgICAgICAgICAgICAgICAgbG8gXj0gMSA8PCBpZHg7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBpZHgsIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChoaSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSAzMSAtIE1hdGguY2x6MzIoaGkgJiAtaGkpO1xuICAgICAgICAgICAgICAgICAgICBoaSBePSAxIDw8IGlkeDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IDMyICsgaWR4LCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldmVyc2VkKCkge1xuICAgICAgICBsZXQgbG8gPSB0aGlzLmxvO1xuICAgICAgICBsZXQgaGkgPSB0aGlzLmhpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IDMxIC0gTWF0aC5jbHozMihoaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGkgXj0gMSA8PCBpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IDMyICsgaWR4LCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gMzEgLSBNYXRoLmNsejMyKGxvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsbyBePSAxIDw8IGlkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogaWR4LCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgbWludXM2NChvdGhlcikge1xuICAgICAgICBjb25zdCBsbyA9IHRoaXMubG8gLSBvdGhlci5sbztcbiAgICAgICAgY29uc3QgYyA9ICgobG8gJiBvdGhlci5sbyAmIDEpICsgKG90aGVyLmxvID4+PiAxKSArIChsbyA+Pj4gMSkpID4+PiAzMTtcbiAgICAgICAgcmV0dXJuIG5ldyBTcXVhcmVTZXQobG8sIHRoaXMuaGkgLSAob3RoZXIuaGkgKyBjKSk7XG4gICAgfVxufVxuZXhwb3J0cy5TcXVhcmVTZXQgPSBTcXVhcmVTZXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ09MT1JTID0gWyd3aGl0ZScsICdibGFjayddO1xuZXhwb3J0cy5ST0xFUyA9IFsncGF3bicsICdrbmlnaHQnLCAnYmlzaG9wJywgJ3Jvb2snLCAncXVlZW4nLCAna2luZyddO1xuZXhwb3J0cy5DQVNUTElOR19TSURFUyA9IFsnYScsICdoJ107XG5mdW5jdGlvbiBpc0Ryb3Aodikge1xuICAgIHJldHVybiAncm9sZScgaW4gdjtcbn1cbmV4cG9ydHMuaXNEcm9wID0gaXNEcm9wO1xuZnVuY3Rpb24gaXNNb3ZlKHYpIHtcbiAgICByZXR1cm4gJ2Zyb20nIGluIHY7XG59XG5leHBvcnRzLmlzTW92ZSA9IGlzTW92ZTtcbmV4cG9ydHMuUlVMRVMgPSBbJ2NoZXNzJywgJ2FudGljaGVzcycsICdraW5nb2Z0aGVoaWxsJywgJzNjaGVjaycsICdhdG9taWMnLCAnaG9yZGUnLCAncmFjaW5na2luZ3MnLCAnY3Jhenlob3VzZSddO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5mdW5jdGlvbiBkZWZpbmVkKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgIT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5kZWZpbmVkID0gZGVmaW5lZDtcbmZ1bmN0aW9uIG9wcG9zaXRlKGNvbG9yKSB7XG4gICAgcmV0dXJuIGNvbG9yID09PSAnd2hpdGUnID8gJ2JsYWNrJyA6ICd3aGl0ZSc7XG59XG5leHBvcnRzLm9wcG9zaXRlID0gb3Bwb3NpdGU7XG5mdW5jdGlvbiBzcXVhcmVEaXN0KGEsIGIpIHtcbiAgICBjb25zdCB4MSA9IGEgJiAweDcsIHgyID0gYiAmIDB4NztcbiAgICBjb25zdCB5MSA9IGEgPj4gMywgeTIgPSBiID4+IDM7XG4gICAgcmV0dXJuIE1hdGgubWF4KE1hdGguYWJzKHgxIC0geDIpLCBNYXRoLmFicyh5MSAtIHkyKSk7XG59XG5leHBvcnRzLnNxdWFyZURpc3QgPSBzcXVhcmVEaXN0O1xuZnVuY3Rpb24gc3F1YXJlUmFuayhzcXVhcmUpIHtcbiAgICByZXR1cm4gc3F1YXJlID4+IDM7XG59XG5leHBvcnRzLnNxdWFyZVJhbmsgPSBzcXVhcmVSYW5rO1xuZnVuY3Rpb24gc3F1YXJlRmlsZShzcXVhcmUpIHtcbiAgICByZXR1cm4gc3F1YXJlICYgMHg3O1xufVxuZXhwb3J0cy5zcXVhcmVGaWxlID0gc3F1YXJlRmlsZTtcbmZ1bmN0aW9uIHJvbGVUb0NoYXIocm9sZSkge1xuICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgICBjYXNlICdwYXduJzogcmV0dXJuICdwJztcbiAgICAgICAgY2FzZSAna25pZ2h0JzogcmV0dXJuICduJztcbiAgICAgICAgY2FzZSAnYmlzaG9wJzogcmV0dXJuICdiJztcbiAgICAgICAgY2FzZSAncm9vayc6IHJldHVybiAncic7XG4gICAgICAgIGNhc2UgJ3F1ZWVuJzogcmV0dXJuICdxJztcbiAgICAgICAgY2FzZSAna2luZyc6IHJldHVybiAnayc7XG4gICAgfVxufVxuZXhwb3J0cy5yb2xlVG9DaGFyID0gcm9sZVRvQ2hhcjtcbmZ1bmN0aW9uIGNoYXJUb1JvbGUoY2gpIHtcbiAgICBzd2l0Y2ggKGNoKSB7XG4gICAgICAgIGNhc2UgJ1AnOlxuICAgICAgICBjYXNlICdwJzogcmV0dXJuICdwYXduJztcbiAgICAgICAgY2FzZSAnTic6XG4gICAgICAgIGNhc2UgJ24nOiByZXR1cm4gJ2tuaWdodCc7XG4gICAgICAgIGNhc2UgJ0InOlxuICAgICAgICBjYXNlICdiJzogcmV0dXJuICdiaXNob3AnO1xuICAgICAgICBjYXNlICdSJzpcbiAgICAgICAgY2FzZSAncic6IHJldHVybiAncm9vayc7XG4gICAgICAgIGNhc2UgJ1EnOlxuICAgICAgICBjYXNlICdxJzogcmV0dXJuICdxdWVlbic7XG4gICAgICAgIGNhc2UgJ0snOlxuICAgICAgICBjYXNlICdrJzogcmV0dXJuICdraW5nJztcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuO1xuICAgIH1cbn1cbmV4cG9ydHMuY2hhclRvUm9sZSA9IGNoYXJUb1JvbGU7XG5mdW5jdGlvbiBwYXJzZVNxdWFyZShzdHIpIHtcbiAgICBpZiAoIS9eW2EtaF1bMS04XSQvLnRlc3Qoc3RyKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiBzdHIuY2hhckNvZGVBdCgwKSAtICdhJy5jaGFyQ29kZUF0KDApICsgOCAqIChzdHIuY2hhckNvZGVBdCgxKSAtICcxJy5jaGFyQ29kZUF0KDApKTtcbn1cbmV4cG9ydHMucGFyc2VTcXVhcmUgPSBwYXJzZVNxdWFyZTtcbmZ1bmN0aW9uIG1ha2VTcXVhcmUoc3F1YXJlKSB7XG4gICAgcmV0dXJuICdhYmNkZWZnaCdbc3F1YXJlICYgMHg3XSArICcxMjM0NTY3OCdbc3F1YXJlID4+IDNdO1xufVxuZXhwb3J0cy5tYWtlU3F1YXJlID0gbWFrZVNxdWFyZTtcbmZ1bmN0aW9uIHBhcnNlVWNpKHN0cikge1xuICAgIGlmIChzdHJbMV0gPT09ICdAJyAmJiBzdHIubGVuZ3RoID09PSA0KSB7XG4gICAgICAgIGNvbnN0IHJvbGUgPSBjaGFyVG9Sb2xlKHN0clswXSk7XG4gICAgICAgIGNvbnN0IHRvID0gcGFyc2VTcXVhcmUoc3RyLnNsaWNlKDIpKTtcbiAgICAgICAgaWYgKHJvbGUgJiYgZGVmaW5lZCh0bykpXG4gICAgICAgICAgICByZXR1cm4geyByb2xlLCB0byB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChzdHIubGVuZ3RoID09PSA0IHx8IHN0ci5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgY29uc3QgZnJvbSA9IHBhcnNlU3F1YXJlKHN0ci5zbGljZSgwLCAyKSk7XG4gICAgICAgIGNvbnN0IHRvID0gcGFyc2VTcXVhcmUoc3RyLnNsaWNlKDIsIDQpKTtcbiAgICAgICAgbGV0IHByb21vdGlvbjtcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIHByb21vdGlvbiA9IGNoYXJUb1JvbGUoc3RyWzRdKTtcbiAgICAgICAgICAgIGlmICghcHJvbW90aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmaW5lZChmcm9tKSAmJiBkZWZpbmVkKHRvKSlcbiAgICAgICAgICAgIHJldHVybiB7IGZyb20sIHRvLCBwcm9tb3Rpb24gfTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuZXhwb3J0cy5wYXJzZVVjaSA9IHBhcnNlVWNpO1xuZnVuY3Rpb24gbWFrZVVjaSh1Y2kpIHtcbiAgICBpZiAodHlwZXNfMS5pc0Ryb3AodWNpKSlcbiAgICAgICAgcmV0dXJuIGAke3JvbGVUb0NoYXIodWNpLnJvbGUpLnRvVXBwZXJDYXNlKCl9QCR7bWFrZVNxdWFyZSh1Y2kudG8pfWA7XG4gICAgcmV0dXJuIG1ha2VTcXVhcmUodWNpLmZyb20pICsgbWFrZVNxdWFyZSh1Y2kudG8pICsgKHVjaS5wcm9tb3Rpb24gPyByb2xlVG9DaGFyKHVjaS5wcm9tb3Rpb24pIDogJycpO1xufVxuZXhwb3J0cy5tYWtlVWNpID0gbWFrZVVjaTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgcmVzdWx0XzEgPSByZXF1aXJlKFwiQGJhZHJhcC9yZXN1bHRcIik7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3QgYXR0YWNrc18xID0gcmVxdWlyZShcIi4vYXR0YWNrc1wiKTtcbmNvbnN0IHNxdWFyZVNldF8xID0gcmVxdWlyZShcIi4vc3F1YXJlU2V0XCIpO1xuY29uc3QgYm9hcmRfMSA9IHJlcXVpcmUoXCIuL2JvYXJkXCIpO1xuY29uc3Qgc2V0dXBfMSA9IHJlcXVpcmUoXCIuL3NldHVwXCIpO1xuY29uc3QgY2hlc3NfMSA9IHJlcXVpcmUoXCIuL2NoZXNzXCIpO1xuZXhwb3J0cy5Qb3NpdGlvbkVycm9yID0gY2hlc3NfMS5Qb3NpdGlvbkVycm9yO1xuZXhwb3J0cy5Qb3NpdGlvbiA9IGNoZXNzXzEuUG9zaXRpb247XG5leHBvcnRzLklsbGVnYWxTZXR1cCA9IGNoZXNzXzEuSWxsZWdhbFNldHVwO1xuZXhwb3J0cy5DYXN0bGVzID0gY2hlc3NfMS5DYXN0bGVzO1xuZXhwb3J0cy5DaGVzcyA9IGNoZXNzXzEuQ2hlc3M7XG5jbGFzcyBDcmF6eWhvdXNlIGV4dGVuZHMgY2hlc3NfMS5DaGVzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdjcmF6eWhvdXNlJyk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0KCkge1xuICAgICAgICBjb25zdCBwb3MgPSBzdXBlci5kZWZhdWx0KCk7XG4gICAgICAgIHBvcy5wb2NrZXRzID0gc2V0dXBfMS5NYXRlcmlhbC5lbXB0eSgpO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5mcm9tU2V0dXAoc2V0dXApLm1hcChwb3MgPT4ge1xuICAgICAgICAgICAgcG9zLnBvY2tldHMgPSBzZXR1cC5wb2NrZXRzID8gc2V0dXAucG9ja2V0cy5jbG9uZSgpIDogc2V0dXBfMS5NYXRlcmlhbC5lbXB0eSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhbGlkYXRlKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIudmFsaWRhdGUoKS5jaGFpbihfID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvY2tldHMgJiYgKHRoaXMucG9ja2V0cy53aGl0ZS5raW5nID4gMCB8fCB0aGlzLnBvY2tldHMuYmxhY2sua2luZyA+IDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5LaW5ncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh0aGlzLnBvY2tldHMgPyB0aGlzLnBvY2tldHMuY291bnQoKSA6IDApICsgdGhpcy5ib2FyZC5vY2N1cGllZC5zaXplKCkgPiA2NCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBjaGVzc18xLlBvc2l0aW9uRXJyb3IoY2hlc3NfMS5JbGxlZ2FsU2V0dXAuVmFyaWFudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayh1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jbG9uZSgpO1xuICAgIH1cbiAgICBoYXNJbnN1ZmZpY2llbnRNYXRlcmlhbChjb2xvcikge1xuICAgICAgICAvLyBObyBtYXRlcmlhbCBjYW4gbGVhdmUgdGhlIGdhbWUsIGJ1dCB3ZSBjYW4gZWFzaWx5IGNoZWNrIHRoaXMgZm9yXG4gICAgICAgIC8vIGN1c3RvbSBwb3NpdGlvbnMuXG4gICAgICAgIGlmICghdGhpcy5wb2NrZXRzKVxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmhhc0luc3VmZmljaWVudE1hdGVyaWFsKGNvbG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQub2NjdXBpZWQuc2l6ZSgpICsgdGhpcy5wb2NrZXRzLmNvdW50KCkgPD0gMyAmJlxuICAgICAgICAgICAgdGhpcy5ib2FyZC5wYXduLmlzRW1wdHkoKSAmJlxuICAgICAgICAgICAgdGhpcy5ib2FyZC5wcm9tb3RlZC5pc0VtcHR5KCkgJiZcbiAgICAgICAgICAgIHRoaXMuYm9hcmQucm9va3NBbmRRdWVlbnMoKS5pc0VtcHR5KCkgJiZcbiAgICAgICAgICAgIHRoaXMucG9ja2V0cy53aGl0ZS5wYXduIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMucG9ja2V0cy5ibGFjay5wYXduIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMucG9ja2V0cy53aGl0ZS5yb29rIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMucG9ja2V0cy5ibGFjay5yb29rIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMucG9ja2V0cy53aGl0ZS5xdWVlbiA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnBvY2tldHMuYmxhY2sucXVlZW4gPD0gMDtcbiAgICB9XG4gICAgZHJvcERlc3RzKGN0eCkge1xuICAgICAgICBjb25zdCBtYXNrID0gdGhpcy5ib2FyZC5vY2N1cGllZC5jb21wbGVtZW50KCkuaW50ZXJzZWN0KCh0aGlzLnBvY2tldHMgJiYgdGhpcy5wb2NrZXRzW3RoaXMudHVybl0uaGFzTm9uUGF3bnMoKSkgPyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnVsbCgpIDpcbiAgICAgICAgICAgICh0aGlzLnBvY2tldHMgJiYgdGhpcy5wb2NrZXRzW3RoaXMudHVybl0ucGF3bikgPyBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuYmFja3JhbmtzKCkuY29tcGxlbWVudCgpIDpcbiAgICAgICAgICAgICAgICBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKSk7XG4gICAgICAgIGlmICh1dGlsXzEuZGVmaW5lZChjdHgua2luZykgJiYgY3R4LmNoZWNrZXJzLm5vbkVtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZXIgPSBjdHguY2hlY2tlcnMuc2luZ2xlU3F1YXJlKCk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5kZWZpbmVkKGNoZWNrZXIpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZW1wdHkoKTtcbiAgICAgICAgICAgIHJldHVybiBtYXNrLmludGVyc2VjdChhdHRhY2tzXzEuYmV0d2VlbihjaGVja2VyLCBjdHgua2luZykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBtYXNrO1xuICAgIH1cbn1cbmV4cG9ydHMuQ3Jhenlob3VzZSA9IENyYXp5aG91c2U7XG5jbGFzcyBBdG9taWMgZXh0ZW5kcyBjaGVzc18xLkNoZXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ2F0b21pYycpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdCgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHQoKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TZXR1cChzZXR1cCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZnJvbVNldHVwKHNldHVwKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jbG9uZSgpO1xuICAgIH1cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgLy8gTGlrZSBjaGVzcywgYnV0IGFsbG93IG91ciBraW5nIHRvIGJlIG1pc3NpbmcuXG4gICAgICAgIGlmICh0aGlzLmJvYXJkLm9jY3VwaWVkLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBjaGVzc18xLlBvc2l0aW9uRXJyb3IoY2hlc3NfMS5JbGxlZ2FsU2V0dXAuRW1wdHkpKTtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmQua2luZy5zaXplKCkgPiAyKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5LaW5ncykpO1xuICAgICAgICBjb25zdCBvdGhlcktpbmcgPSB0aGlzLmJvYXJkLmtpbmdPZih1dGlsXzEub3Bwb3NpdGUodGhpcy50dXJuKSk7XG4gICAgICAgIGlmICghdXRpbF8xLmRlZmluZWQob3RoZXJLaW5nKSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBjaGVzc18xLlBvc2l0aW9uRXJyb3IoY2hlc3NfMS5JbGxlZ2FsU2V0dXAuS2luZ3MpKTtcbiAgICAgICAgaWYgKHRoaXMua2luZ0F0dGFja2VycyhvdGhlcktpbmcsIHRoaXMudHVybiwgdGhpcy5ib2FyZC5vY2N1cGllZCkubm9uRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5PcHBvc2l0ZUNoZWNrKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNxdWFyZVNldF8xLlNxdWFyZVNldC5iYWNrcmFua3MoKS5pbnRlcnNlY3RzKHRoaXMuYm9hcmQucGF3bikpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBjaGVzc18xLlBvc2l0aW9uRXJyb3IoY2hlc3NfMS5JbGxlZ2FsU2V0dXAuUGF3bnNPbkJhY2tyYW5rKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5vayh1bmRlZmluZWQpO1xuICAgIH1cbiAgICBraW5nQXR0YWNrZXJzKHNxdWFyZSwgYXR0YWNrZXIsIG9jY3VwaWVkKSB7XG4gICAgICAgIGlmIChhdHRhY2tzXzEua2luZ0F0dGFja3Moc3F1YXJlKS5pbnRlcnNlY3RzKHRoaXMuYm9hcmQucGllY2VzKGF0dGFja2VyLCAna2luZycpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5raW5nQXR0YWNrZXJzKHNxdWFyZSwgYXR0YWNrZXIsIG9jY3VwaWVkKTtcbiAgICB9XG4gICAgcGxheUNhcHR1cmVBdChzcXVhcmUsIGNhcHR1cmVkKSB7XG4gICAgICAgIHN1cGVyLnBsYXlDYXB0dXJlQXQoc3F1YXJlLCBjYXB0dXJlZCk7XG4gICAgICAgIHRoaXMuYm9hcmQudGFrZShzcXVhcmUpO1xuICAgICAgICBmb3IgKGNvbnN0IGV4cGxvZGUgb2YgYXR0YWNrc18xLmtpbmdBdHRhY2tzKHNxdWFyZSkuaW50ZXJzZWN0KHRoaXMuYm9hcmQub2NjdXBpZWQpLmRpZmYodGhpcy5ib2FyZC5wYXduKSkge1xuICAgICAgICAgICAgY29uc3QgcGllY2UgPSB0aGlzLmJvYXJkLnRha2UoZXhwbG9kZSk7XG4gICAgICAgICAgICBpZiAocGllY2UgJiYgcGllY2Uucm9sZSA9PT0gJ3Jvb2snKVxuICAgICAgICAgICAgICAgIHRoaXMuY2FzdGxlcy5kaXNjYXJkUm9vayhleHBsb2RlKTtcbiAgICAgICAgICAgIGlmIChwaWVjZSAmJiBwaWVjZS5yb2xlID09PSAna2luZycpXG4gICAgICAgICAgICAgICAgdGhpcy5jYXN0bGVzLmRpc2NhcmRTaWRlKHBpZWNlLmNvbG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNJbnN1ZmZpY2llbnRNYXRlcmlhbChjb2xvcikge1xuICAgICAgICAvLyBSZW1haW5pbmcgbWF0ZXJpYWwgZG9lcyBub3QgbWF0dGVyIGlmIHRoZSBlbmVteSBraW5nIGlzIGFscmVhZHlcbiAgICAgICAgLy8gZXhwbG9kZWQuXG4gICAgICAgIGlmICh0aGlzLmJvYXJkLnBpZWNlcyh1dGlsXzEub3Bwb3NpdGUoY29sb3IpLCAna2luZycpLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQmFyZSBraW5nIGNhbm5vdCBtYXRlLlxuICAgICAgICBpZiAodGhpcy5ib2FyZFtjb2xvcl0uZGlmZih0aGlzLmJvYXJkLmtpbmcpLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBBcyBsb25nIGFzIHRoZSBlbmVteSBraW5nIGlzIG5vdCBhbG9uZSwgdGhlcmUgaXMgYWx3YXlzIGEgY2hhbmNlIHRoZWlyXG4gICAgICAgIC8vIG93biBwaWVjZXMgZXhwbG9kZSBuZXh0IHRvIGl0LlxuICAgICAgICBpZiAodGhpcy5ib2FyZFt1dGlsXzEub3Bwb3NpdGUoY29sb3IpXS5kaWZmKHRoaXMuYm9hcmQua2luZykubm9uRW1wdHkoKSkge1xuICAgICAgICAgICAgLy8gVW5sZXNzIHRoZXJlIGFyZSBvbmx5IGJpc2hvcHMgdGhhdCBjYW5ub3QgZXhwbG9kZSBlYWNoIG90aGVyLlxuICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmQub2NjdXBpZWQuZXF1YWxzKHRoaXMuYm9hcmQuYmlzaG9wLnVuaW9uKHRoaXMuYm9hcmQua2luZykpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmJvYXJkLmJpc2hvcC5pbnRlcnNlY3QodGhpcy5ib2FyZC53aGl0ZSkuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZGFya1NxdWFyZXMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmJvYXJkLmJpc2hvcC5pbnRlcnNlY3QodGhpcy5ib2FyZC5ibGFjaykuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQubGlnaHRTcXVhcmVzKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYm9hcmQuYmlzaG9wLmludGVyc2VjdCh0aGlzLmJvYXJkLndoaXRlKS5pbnRlcnNlY3RzKHNxdWFyZVNldF8xLlNxdWFyZVNldC5saWdodFNxdWFyZXMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmJvYXJkLmJpc2hvcC5pbnRlcnNlY3QodGhpcy5ib2FyZC5ibGFjaykuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZGFya1NxdWFyZXMoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFF1ZWVuIG9yIHBhd24gKGZ1dHVyZSBxdWVlbikgY2FuIGdpdmUgbWF0ZSBhZ2FpbnN0IGJhcmUga2luZy5cbiAgICAgICAgaWYgKHRoaXMuYm9hcmQucXVlZW4ubm9uRW1wdHkoKSB8fCB0aGlzLmJvYXJkLnBhd24ubm9uRW1wdHkoKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gU2luZ2xlIGtuaWdodCwgYmlzaG9wIG9yIHJvb2sgY2Fubm90IG1hdGUgYWdhaW5zdCBiYXJlIGtpbmcuXG4gICAgICAgIGlmICh0aGlzLmJvYXJkLmtuaWdodC51bmlvbih0aGlzLmJvYXJkLmJpc2hvcCkudW5pb24odGhpcy5ib2FyZC5yb29rKS5pc1NpbmdsZVNxdWFyZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIElmIG9ubHkga25pZ2h0cywgbW9yZSB0aGFuIHR3byBhcmUgcmVxdWlyZWQgdG8gbWF0ZSBiYXJlIGtpbmcuXG4gICAgICAgIGlmICh0aGlzLmJvYXJkLm9jY3VwaWVkLmVxdWFscyh0aGlzLmJvYXJkLmtuaWdodC51bmlvbih0aGlzLmJvYXJkLmtpbmcpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQua25pZ2h0LnNpemUoKSA8PSAyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVzdHMoc3F1YXJlLCBjdHgpIHtcbiAgICAgICAgbGV0IGRlc3RzID0gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgICAgIGZvciAoY29uc3QgdG8gb2YgdGhpcy5wc2V1ZG9EZXN0cyhzcXVhcmUsIGN0eCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGFmdGVyID0gdGhpcy5jbG9uZSgpO1xuICAgICAgICAgICAgYWZ0ZXIucGxheSh7IGZyb206IHNxdWFyZSwgdG8gfSk7XG4gICAgICAgICAgICBjb25zdCBvdXJLaW5nID0gYWZ0ZXIuYm9hcmQua2luZ09mKHRoaXMudHVybik7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmRlZmluZWQob3VyS2luZykgJiYgKCF1dGlsXzEuZGVmaW5lZChhZnRlci5ib2FyZC5raW5nT2YoYWZ0ZXIudHVybikpIHx8IGFmdGVyLmtpbmdBdHRhY2tlcnMob3VyS2luZywgYWZ0ZXIudHVybiwgYWZ0ZXIuYm9hcmQub2NjdXBpZWQpLmlzRW1wdHkoKSkpIHtcbiAgICAgICAgICAgICAgICBkZXN0cyA9IGRlc3RzLndpdGgodG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXN0cztcbiAgICB9XG4gICAgaXNWYXJpYW50RW5kKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnZhcmlhbnRPdXRjb21lKCk7XG4gICAgfVxuICAgIHZhcmlhbnRPdXRjb21lKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbG9yIG9mIHR5cGVzXzEuQ09MT1JTKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib2FyZC5waWVjZXMoY29sb3IsICdraW5nJykuaXNFbXB0eSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHdpbm5lcjogdXRpbF8xLm9wcG9zaXRlKGNvbG9yKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5leHBvcnRzLkF0b21pYyA9IEF0b21pYztcbmNsYXNzIEFudGljaGVzcyBleHRlbmRzIGNoZXNzXzEuQ2hlc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignYW50aWNoZXNzJyk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0KCkge1xuICAgICAgICBjb25zdCBwb3MgPSBuZXcgdGhpcygpO1xuICAgICAgICBwb3MuYm9hcmQgPSBib2FyZF8xLkJvYXJkLmRlZmF1bHQoKTtcbiAgICAgICAgcG9zLnR1cm4gPSAnd2hpdGUnO1xuICAgICAgICBwb3MuY2FzdGxlcyA9IGNoZXNzXzEuQ2FzdGxlcy5lbXB0eSgpO1xuICAgICAgICBwb3MuZXBTcXVhcmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBvcy5yZW1haW5pbmdDaGVja3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBvcy5oYWxmbW92ZXMgPSAwO1xuICAgICAgICBwb3MuZnVsbG1vdmVzID0gMTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgc3RhdGljIGZyb21TZXR1cChzZXR1cCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZnJvbVNldHVwKHNldHVwKS5tYXAocG9zID0+IHtcbiAgICAgICAgICAgIHBvcy5jYXN0bGVzID0gY2hlc3NfMS5DYXN0bGVzLmVtcHR5KCk7XG4gICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jbG9uZSgpO1xuICAgIH1cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmQub2NjdXBpZWQuaXNFbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5FbXB0eSkpO1xuICAgICAgICBpZiAoc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmJhY2tyYW5rcygpLmludGVyc2VjdHModGhpcy5ib2FyZC5wYXduKSlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQuZXJyKG5ldyBjaGVzc18xLlBvc2l0aW9uRXJyb3IoY2hlc3NfMS5JbGxlZ2FsU2V0dXAuUGF3bnNPbkJhY2tyYW5rKSk7XG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQub2sodW5kZWZpbmVkKTtcbiAgICB9XG4gICAga2luZ0F0dGFja2Vycyhfc3F1YXJlLCBfYXR0YWNrZXIsIF9vY2N1cGllZCkge1xuICAgICAgICByZXR1cm4gc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmVtcHR5KCk7XG4gICAgfVxuICAgIGN0eCgpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gc3VwZXIuY3R4KCk7XG4gICAgICAgIGNvbnN0IGVuZW15ID0gdGhpcy5ib2FyZFt1dGlsXzEub3Bwb3NpdGUodGhpcy50dXJuKV07XG4gICAgICAgIGZvciAoY29uc3QgZnJvbSBvZiB0aGlzLmJvYXJkW3RoaXMudHVybl0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBzZXVkb0Rlc3RzKGZyb20sIGN0eCkuaW50ZXJzZWN0cyhlbmVteSkpIHtcbiAgICAgICAgICAgICAgICBjdHgubXVzdENhcHR1cmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfVxuICAgIGRlc3RzKHNxdWFyZSwgY3R4KSB7XG4gICAgICAgIGNvbnN0IGRlc3RzID0gdGhpcy5wc2V1ZG9EZXN0cyhzcXVhcmUsIGN0eCk7XG4gICAgICAgIGlmICghY3R4Lm11c3RDYXB0dXJlKVxuICAgICAgICAgICAgcmV0dXJuIGRlc3RzO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gZGVzdHMuaW50ZXJzZWN0KHRoaXMuYm9hcmRbdXRpbF8xLm9wcG9zaXRlKHRoaXMudHVybildKTtcbiAgICB9XG4gICAgaGFzSW5zdWZmaWNpZW50TWF0ZXJpYWwoY29sb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmQub2NjdXBpZWQuZXF1YWxzKHRoaXMuYm9hcmQuYmlzaG9wKSkge1xuICAgICAgICAgICAgY29uc3Qgd2VTb21lT25MaWdodCA9IHRoaXMuYm9hcmRbY29sb3JdLmludGVyc2VjdHMoc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmxpZ2h0U3F1YXJlcygpKTtcbiAgICAgICAgICAgIGNvbnN0IHdlU29tZU9uRGFyayA9IHRoaXMuYm9hcmRbY29sb3JdLmludGVyc2VjdHMoc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmRhcmtTcXVhcmVzKCkpO1xuICAgICAgICAgICAgY29uc3QgdGhleUFsbE9uRGFyayA9IHRoaXMuYm9hcmRbdXRpbF8xLm9wcG9zaXRlKGNvbG9yKV0uaXNEaXNqb2ludChzcXVhcmVTZXRfMS5TcXVhcmVTZXQubGlnaHRTcXVhcmVzKCkpO1xuICAgICAgICAgICAgY29uc3QgdGhleUFsbE9uTGlnaHQgPSB0aGlzLmJvYXJkW3V0aWxfMS5vcHBvc2l0ZShjb2xvcildLmlzRGlzam9pbnQoc3F1YXJlU2V0XzEuU3F1YXJlU2V0LmRhcmtTcXVhcmVzKCkpO1xuICAgICAgICAgICAgcmV0dXJuICh3ZVNvbWVPbkxpZ2h0ICYmIHRoZXlBbGxPbkRhcmspIHx8ICh3ZVNvbWVPbkRhcmsgJiYgdGhleUFsbE9uTGlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaXNWYXJpYW50RW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZFt0aGlzLnR1cm5dLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdmFyaWFudE91dGNvbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFyaWFudEVuZCgpIHx8IHRoaXMuaXNTdGFsZW1hdGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgd2lubmVyOiB0aGlzLnR1cm4gfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuZXhwb3J0cy5BbnRpY2hlc3MgPSBBbnRpY2hlc3M7XG5jbGFzcyBLaW5nT2ZUaGVIaWxsIGV4dGVuZHMgY2hlc3NfMS5DaGVzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdraW5nb2Z0aGVoaWxsJyk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdCgpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5mcm9tU2V0dXAoc2V0dXApO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmNsb25lKCk7XG4gICAgfVxuICAgIGhhc0luc3VmZmljaWVudE1hdGVyaWFsKF9jb2xvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlzVmFyaWFudEVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQua2luZy5pbnRlcnNlY3RzKHNxdWFyZVNldF8xLlNxdWFyZVNldC5jZW50ZXIoKSk7XG4gICAgfVxuICAgIHZhcmlhbnRPdXRjb21lKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbG9yIG9mIHR5cGVzXzEuQ09MT1JTKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib2FyZC5waWVjZXMoY29sb3IsICdraW5nJykuaW50ZXJzZWN0cyhzcXVhcmVTZXRfMS5TcXVhcmVTZXQuY2VudGVyKCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHdpbm5lcjogY29sb3IgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuZXhwb3J0cy5LaW5nT2ZUaGVIaWxsID0gS2luZ09mVGhlSGlsbDtcbmNsYXNzIFRocmVlQ2hlY2sgZXh0ZW5kcyBjaGVzc18xLkNoZXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJzNjaGVjaycpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdCgpIHtcbiAgICAgICAgY29uc3QgcG9zID0gc3VwZXIuZGVmYXVsdCgpO1xuICAgICAgICBwb3MucmVtYWluaW5nQ2hlY2tzID0gc2V0dXBfMS5SZW1haW5pbmdDaGVja3MuZGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5mcm9tU2V0dXAoc2V0dXApLm1hcChwb3MgPT4ge1xuICAgICAgICAgICAgcG9zLnJlbWFpbmluZ0NoZWNrcyA9IHNldHVwLnJlbWFpbmluZ0NoZWNrcyA/IHNldHVwLnJlbWFpbmluZ0NoZWNrcy5jbG9uZSgpIDogc2V0dXBfMS5SZW1haW5pbmdDaGVja3MuZGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuY2xvbmUoKTtcbiAgICB9XG4gICAgaGFzSW5zdWZmaWNpZW50TWF0ZXJpYWwoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQucGllY2VzKGNvbG9yLCAna2luZycpLmVxdWFscyh0aGlzLmJvYXJkW2NvbG9yXSk7XG4gICAgfVxuICAgIGlzVmFyaWFudEVuZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5yZW1haW5pbmdDaGVja3MgJiYgKHRoaXMucmVtYWluaW5nQ2hlY2tzLndoaXRlIDw9IDAgfHwgdGhpcy5yZW1haW5pbmdDaGVja3MuYmxhY2sgPD0gMCk7XG4gICAgfVxuICAgIHZhcmlhbnRPdXRjb21lKCkge1xuICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdDaGVja3MpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY29sb3Igb2YgdHlwZXNfMS5DT0xPUlMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdDaGVja3NbY29sb3JdIDw9IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdpbm5lcjogY29sb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuZXhwb3J0cy5UaHJlZUNoZWNrID0gVGhyZWVDaGVjaztcbmNsYXNzIFJhY2luZ0tpbmdzIGV4dGVuZHMgY2hlc3NfMS5DaGVzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdyYWNpbmdraW5ncycpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdCgpIHtcbiAgICAgICAgY29uc3QgcG9zID0gbmV3IHRoaXMoKTtcbiAgICAgICAgcG9zLmJvYXJkID0gYm9hcmRfMS5Cb2FyZC5yYWNpbmdLaW5ncygpO1xuICAgICAgICBwb3MudHVybiA9ICd3aGl0ZSc7XG4gICAgICAgIHBvcy5jYXN0bGVzID0gY2hlc3NfMS5DYXN0bGVzLmVtcHR5KCk7XG4gICAgICAgIHBvcy5lcFNxdWFyZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9zLnJlbWFpbmluZ0NoZWNrcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9zLmhhbGZtb3ZlcyA9IDA7XG4gICAgICAgIHBvcy5mdWxsbW92ZXMgPSAxO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5mcm9tU2V0dXAoc2V0dXApLm1hcChwb3MgPT4ge1xuICAgICAgICAgICAgcG9zLmNhc3RsZXMgPSBjaGVzc18xLkNhc3RsZXMuZW1wdHkoKTtcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmQucGF3bi5ub25FbXB0eSgpIHx8IHRoaXMuaXNDaGVjaygpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgY2hlc3NfMS5Qb3NpdGlvbkVycm9yKGNoZXNzXzEuSWxsZWdhbFNldHVwLlZhcmlhbnQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIudmFsaWRhdGUoKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jbG9uZSgpO1xuICAgIH1cbiAgICBkZXN0cyhzcXVhcmUsIGN0eCkge1xuICAgICAgICAvLyBLaW5ncyBjYW5ub3QgZ2l2ZSBjaGVjay5cbiAgICAgICAgaWYgKHNxdWFyZSA9PT0gY3R4LmtpbmcpXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVzdHMoc3F1YXJlLCBjdHgpO1xuICAgICAgICAvLyBUT0RPOiBUaGlzIGNvdWxkIGJlIG9wdGltaXplZCBjb25zaWRlcmFibHkuXG4gICAgICAgIGxldCBkZXN0cyA9IHNxdWFyZVNldF8xLlNxdWFyZVNldC5lbXB0eSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHRvIG9mIHN1cGVyLmRlc3RzKHNxdWFyZSwgY3R4KSkge1xuICAgICAgICAgICAgLy8gVmFsaWQsIGJlY2F1c2UgdGhlcmUgYXJlIG5vIHByb21vdGlvbnMgKG9yIGV2ZW4gcGF3bnMpLlxuICAgICAgICAgICAgY29uc3QgdWNpID0geyBmcm9tOiBzcXVhcmUsIHRvIH07XG4gICAgICAgICAgICBjb25zdCBhZnRlciA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgICAgIGFmdGVyLnBsYXkodWNpKTtcbiAgICAgICAgICAgIGlmICghYWZ0ZXIuaXNDaGVjaygpKVxuICAgICAgICAgICAgICAgIGRlc3RzID0gZGVzdHMud2l0aCh0byk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlc3RzO1xuICAgIH1cbiAgICBoYXNJbnN1ZmZpY2llbnRNYXRlcmlhbChfY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpc1ZhcmlhbnRFbmQoKSB7XG4gICAgICAgIGNvbnN0IGdvYWwgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVJhbmsoNyk7XG4gICAgICAgIGNvbnN0IGluR29hbCA9IHRoaXMuYm9hcmQua2luZy5pbnRlcnNlY3QoZ29hbCk7XG4gICAgICAgIGlmIChpbkdvYWwuaXNFbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy50dXJuID09PSAnd2hpdGUnIHx8IGluR29hbC5pbnRlcnNlY3RzKHRoaXMuYm9hcmQuYmxhY2spKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIFdoaXRlIGhhcyByZWFjaGVkIHRoZSBiYWNrcmFuay4gQ2hlY2sgaWYgYmxhY2sgY2FuIGNhdGNoIHVwLlxuICAgICAgICBjb25zdCBibGFja0tpbmcgPSB0aGlzLmJvYXJkLmtpbmdPZignYmxhY2snKTtcbiAgICAgICAgaWYgKHV0aWxfMS5kZWZpbmVkKGJsYWNrS2luZykpIHtcbiAgICAgICAgICAgIGNvbnN0IG9jYyA9IHRoaXMuYm9hcmQub2NjdXBpZWQud2l0aG91dChibGFja0tpbmcpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2YgYXR0YWNrc18xLmtpbmdBdHRhY2tzKGJsYWNrS2luZykuaW50ZXJzZWN0KGdvYWwpLmRpZmYodGhpcy5ib2FyZC5ibGFjaykpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5raW5nQXR0YWNrZXJzKHRhcmdldCwgdXRpbF8xLm9wcG9zaXRlKHRoaXMudHVybiksIG9jYykuaXNFbXB0eSgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhcmlhbnRPdXRjb21lKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNWYXJpYW50RW5kKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGdvYWwgPSBzcXVhcmVTZXRfMS5TcXVhcmVTZXQuZnJvbVJhbmsoNyk7XG4gICAgICAgIGNvbnN0IGJsYWNrSW5Hb2FsID0gdGhpcy5ib2FyZC5waWVjZXMoJ2JsYWNrJywgJ2tpbmcnKS5pbnRlcnNlY3RzKGdvYWwpO1xuICAgICAgICBjb25zdCB3aGl0ZUluR29hbCA9IHRoaXMuYm9hcmQucGllY2VzKCd3aGl0ZScsICdraW5nJykuaW50ZXJzZWN0cyhnb2FsKTtcbiAgICAgICAgaWYgKGJsYWNrSW5Hb2FsICYmICF3aGl0ZUluR29hbClcbiAgICAgICAgICAgIHJldHVybiB7IHdpbm5lcjogJ2JsYWNrJyB9O1xuICAgICAgICBpZiAod2hpdGVJbkdvYWwgJiYgIWJsYWNrSW5Hb2FsKVxuICAgICAgICAgICAgcmV0dXJuIHsgd2lubmVyOiAnd2hpdGUnIH07XG4gICAgICAgIHJldHVybiB7IHdpbm5lcjogdW5kZWZpbmVkIH07XG4gICAgfVxufVxuY2xhc3MgSG9yZGUgZXh0ZW5kcyBjaGVzc18xLkNoZXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ2hvcmRlJyk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0KCkge1xuICAgICAgICBjb25zdCBwb3MgPSBuZXcgdGhpcygpO1xuICAgICAgICBwb3MuYm9hcmQgPSBib2FyZF8xLkJvYXJkLmhvcmRlKCk7XG4gICAgICAgIHBvcy5wb2NrZXRzID0gdW5kZWZpbmVkO1xuICAgICAgICBwb3MudHVybiA9ICd3aGl0ZSc7XG4gICAgICAgIHBvcy5jYXN0bGVzID0gY2hlc3NfMS5DYXN0bGVzLmRlZmF1bHQoKTtcbiAgICAgICAgcG9zLmNhc3RsZXMuZGlzY2FyZFNpZGUoJ3doaXRlJyk7XG4gICAgICAgIHBvcy5lcFNxdWFyZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9zLnJlbWFpbmluZ0NoZWNrcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgcG9zLmhhbGZtb3ZlcyA9IDA7XG4gICAgICAgIHBvcy5mdWxsbW92ZXMgPSAxO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVNldHVwKHNldHVwKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5mcm9tU2V0dXAoc2V0dXApO1xuICAgIH1cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmQub2NjdXBpZWQuaXNFbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5FbXB0eSkpO1xuICAgICAgICBpZiAoIXRoaXMuYm9hcmQua2luZy5pc1NpbmdsZVNxdWFyZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5LaW5ncykpO1xuICAgICAgICBpZiAoIXRoaXMuYm9hcmQua2luZy5kaWZmKHRoaXMuYm9hcmQucHJvbW90ZWQpLmlzU2luZ2xlU3F1YXJlKCkpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgY2hlc3NfMS5Qb3NpdGlvbkVycm9yKGNoZXNzXzEuSWxsZWdhbFNldHVwLktpbmdzKSk7XG4gICAgICAgIGNvbnN0IG90aGVyS2luZyA9IHRoaXMuYm9hcmQua2luZ09mKHV0aWxfMS5vcHBvc2l0ZSh0aGlzLnR1cm4pKTtcbiAgICAgICAgaWYgKHV0aWxfMS5kZWZpbmVkKG90aGVyS2luZykgJiYgdGhpcy5raW5nQXR0YWNrZXJzKG90aGVyS2luZywgdGhpcy50dXJuLCB0aGlzLmJvYXJkLm9jY3VwaWVkKS5ub25FbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xLlJlc3VsdC5lcnIobmV3IGNoZXNzXzEuUG9zaXRpb25FcnJvcihjaGVzc18xLklsbGVnYWxTZXR1cC5PcHBvc2l0ZUNoZWNrKSk7XG4gICAgICAgIGZvciAoY29uc3QgY29sb3Igb2YgdHlwZXNfMS5DT0xPUlMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkLnBpZWNlcyhjb2xvciwgJ3Bhd24nKS5pbnRlcnNlY3RzKHNxdWFyZVNldF8xLlNxdWFyZVNldC5iYWNrcmFuayh1dGlsXzEub3Bwb3NpdGUoY29sb3IpKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XzEuUmVzdWx0LmVycihuZXcgY2hlc3NfMS5Qb3NpdGlvbkVycm9yKGNoZXNzXzEuSWxsZWdhbFNldHVwLlBhd25zT25CYWNrcmFuaykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRfMS5SZXN1bHQub2sodW5kZWZpbmVkKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jbG9uZSgpO1xuICAgIH1cbiAgICBoYXNJbnN1ZmZpY2llbnRNYXRlcmlhbChfY29sb3IpIHtcbiAgICAgICAgLy8gVE9ETzogQ291bGQgZGV0ZWN0IGNhc2VzIHdoZXJlIHRoZSBob3JkZSBjYW5ub3QgbWF0ZS5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpc1ZhcmlhbnRFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvYXJkLndoaXRlLmlzRW1wdHkoKSB8fCB0aGlzLmJvYXJkLmJsYWNrLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdmFyaWFudE91dGNvbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmJvYXJkLndoaXRlLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHJldHVybiB7IHdpbm5lcjogJ2JsYWNrJyB9O1xuICAgICAgICBpZiAodGhpcy5ib2FyZC5ibGFjay5pc0VtcHR5KCkpXG4gICAgICAgICAgICByZXR1cm4geyB3aW5uZXI6ICd3aGl0ZScgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cbmV4cG9ydHMuSG9yZGUgPSBIb3JkZTtcbmZ1bmN0aW9uIGRlZmF1bHRQb3NpdGlvbihydWxlcykge1xuICAgIHN3aXRjaCAocnVsZXMpIHtcbiAgICAgICAgY2FzZSAnY2hlc3MnOiByZXR1cm4gY2hlc3NfMS5DaGVzcy5kZWZhdWx0KCk7XG4gICAgICAgIGNhc2UgJ2FudGljaGVzcyc6IHJldHVybiBBbnRpY2hlc3MuZGVmYXVsdCgpO1xuICAgICAgICBjYXNlICdhdG9taWMnOiByZXR1cm4gQXRvbWljLmRlZmF1bHQoKTtcbiAgICAgICAgY2FzZSAnaG9yZGUnOiByZXR1cm4gSG9yZGUuZGVmYXVsdCgpO1xuICAgICAgICBjYXNlICdyYWNpbmdraW5ncyc6IHJldHVybiBSYWNpbmdLaW5ncy5kZWZhdWx0KCk7XG4gICAgICAgIGNhc2UgJ2tpbmdvZnRoZWhpbGwnOiByZXR1cm4gS2luZ09mVGhlSGlsbC5kZWZhdWx0KCk7XG4gICAgICAgIGNhc2UgJzNjaGVjayc6IHJldHVybiBUaHJlZUNoZWNrLmRlZmF1bHQoKTtcbiAgICAgICAgY2FzZSAnY3Jhenlob3VzZSc6IHJldHVybiBDcmF6eWhvdXNlLmRlZmF1bHQoKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHRQb3NpdGlvbiA9IGRlZmF1bHRQb3NpdGlvbjtcbmZ1bmN0aW9uIHNldHVwUG9zaXRpb24ocnVsZXMsIHNldHVwKSB7XG4gICAgc3dpdGNoIChydWxlcykge1xuICAgICAgICBjYXNlICdjaGVzcyc6IHJldHVybiBjaGVzc18xLkNoZXNzLmZyb21TZXR1cChzZXR1cCk7XG4gICAgICAgIGNhc2UgJ2FudGljaGVzcyc6IHJldHVybiBBbnRpY2hlc3MuZnJvbVNldHVwKHNldHVwKTtcbiAgICAgICAgY2FzZSAnYXRvbWljJzogcmV0dXJuIEF0b21pYy5mcm9tU2V0dXAoc2V0dXApO1xuICAgICAgICBjYXNlICdob3JkZSc6IHJldHVybiBIb3JkZS5mcm9tU2V0dXAoc2V0dXApO1xuICAgICAgICBjYXNlICdyYWNpbmdraW5ncyc6IHJldHVybiBSYWNpbmdLaW5ncy5mcm9tU2V0dXAoc2V0dXApO1xuICAgICAgICBjYXNlICdraW5nb2Z0aGVoaWxsJzogcmV0dXJuIEtpbmdPZlRoZUhpbGwuZnJvbVNldHVwKHNldHVwKTtcbiAgICAgICAgY2FzZSAnM2NoZWNrJzogcmV0dXJuIFRocmVlQ2hlY2suZnJvbVNldHVwKHNldHVwKTtcbiAgICAgICAgY2FzZSAnY3Jhenlob3VzZSc6IHJldHVybiBDcmF6eWhvdXNlLmZyb21TZXR1cChzZXR1cCk7XG4gICAgfVxufVxuZXhwb3J0cy5zZXR1cFBvc2l0aW9uID0gc2V0dXBQb3NpdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHZub2RlXzEgPSByZXF1aXJlKFwiLi92bm9kZVwiKTtcbnZhciBpcyA9IHJlcXVpcmUoXCIuL2lzXCIpO1xuZnVuY3Rpb24gYWRkTlMoZGF0YSwgY2hpbGRyZW4sIHNlbCkge1xuICAgIGRhdGEubnMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuICAgIGlmIChzZWwgIT09ICdmb3JlaWduT2JqZWN0JyAmJiBjaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBjaGlsZHJlbltpXS5kYXRhO1xuICAgICAgICAgICAgaWYgKGNoaWxkRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYWRkTlMoY2hpbGREYXRhLCBjaGlsZHJlbltpXS5jaGlsZHJlbiwgY2hpbGRyZW5baV0uc2VsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGgoc2VsLCBiLCBjKSB7XG4gICAgdmFyIGRhdGEgPSB7fSwgY2hpbGRyZW4sIHRleHQsIGk7XG4gICAgaWYgKGMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkYXRhID0gYjtcbiAgICAgICAgaWYgKGlzLmFycmF5KGMpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IGM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXMucHJpbWl0aXZlKGMpKSB7XG4gICAgICAgICAgICB0ZXh0ID0gYztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjICYmIGMuc2VsKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChiICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGlzLmFycmF5KGIpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IGI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXMucHJpbWl0aXZlKGIpKSB7XG4gICAgICAgICAgICB0ZXh0ID0gYjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiICYmIGIuc2VsKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtiXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSBiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpcy5hcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaXMucHJpbWl0aXZlKGNoaWxkcmVuW2ldKSlcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltpXSA9IHZub2RlXzEudm5vZGUodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY2hpbGRyZW5baV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWxbMF0gPT09ICdzJyAmJiBzZWxbMV0gPT09ICd2JyAmJiBzZWxbMl0gPT09ICdnJyAmJlxuICAgICAgICAoc2VsLmxlbmd0aCA9PT0gMyB8fCBzZWxbM10gPT09ICcuJyB8fCBzZWxbM10gPT09ICcjJykpIHtcbiAgICAgICAgYWRkTlMoZGF0YSwgY2hpbGRyZW4sIHNlbCk7XG4gICAgfVxuICAgIHJldHVybiB2bm9kZV8xLnZub2RlKHNlbCwgZGF0YSwgY2hpbGRyZW4sIHRleHQsIHVuZGVmaW5lZCk7XG59XG5leHBvcnRzLmggPSBoO1xuO1xuZXhwb3J0cy5kZWZhdWx0ID0gaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2VVUkksIHF1YWxpZmllZE5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgcXVhbGlmaWVkTmFtZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVUZXh0Tm9kZSh0ZXh0KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xufVxuZnVuY3Rpb24gaW5zZXJ0QmVmb3JlKHBhcmVudE5vZGUsIG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHtcbiAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkKG5vZGUsIGNoaWxkKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG59XG5mdW5jdGlvbiBhcHBlbmRDaGlsZChub2RlLCBjaGlsZCkge1xuICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGQpO1xufVxuZnVuY3Rpb24gcGFyZW50Tm9kZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZTtcbn1cbmZ1bmN0aW9uIG5leHRTaWJsaW5nKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZztcbn1cbmZ1bmN0aW9uIHRhZ05hbWUoZWxtKSB7XG4gICAgcmV0dXJuIGVsbS50YWdOYW1lO1xufVxuZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQobm9kZSwgdGV4dCkge1xuICAgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xufVxuZnVuY3Rpb24gZ2V0VGV4dENvbnRlbnQobm9kZSkge1xuICAgIHJldHVybiBub2RlLnRleHRDb250ZW50O1xufVxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMTtcbn1cbmZ1bmN0aW9uIGlzVGV4dChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDM7XG59XG5leHBvcnRzLmh0bWxEb21BcGkgPSB7XG4gICAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCxcbiAgICBjcmVhdGVFbGVtZW50TlM6IGNyZWF0ZUVsZW1lbnROUyxcbiAgICBjcmVhdGVUZXh0Tm9kZTogY3JlYXRlVGV4dE5vZGUsXG4gICAgaW5zZXJ0QmVmb3JlOiBpbnNlcnRCZWZvcmUsXG4gICAgcmVtb3ZlQ2hpbGQ6IHJlbW92ZUNoaWxkLFxuICAgIGFwcGVuZENoaWxkOiBhcHBlbmRDaGlsZCxcbiAgICBwYXJlbnROb2RlOiBwYXJlbnROb2RlLFxuICAgIG5leHRTaWJsaW5nOiBuZXh0U2libGluZyxcbiAgICB0YWdOYW1lOiB0YWdOYW1lLFxuICAgIHNldFRleHRDb250ZW50OiBzZXRUZXh0Q29udGVudCxcbiAgICBnZXRUZXh0Q29udGVudDogZ2V0VGV4dENvbnRlbnQsXG4gICAgaXNFbGVtZW50OiBpc0VsZW1lbnQsXG4gICAgaXNUZXh0OiBpc1RleHQsXG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5odG1sRG9tQXBpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHRtbGRvbWFwaS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZnVuY3Rpb24gcHJpbWl0aXZlKHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHMgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBzID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydHMucHJpbWl0aXZlID0gcHJpbWl0aXZlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiB1cGRhdGVBdHRycyhvbGRWbm9kZSwgdm5vZGUpIHtcbiAgICB2YXIga2V5LCBlbG0gPSB2bm9kZS5lbG0sIG9sZEF0dHJzID0gb2xkVm5vZGUuZGF0YS5hdHRycywgYXR0cnMgPSB2bm9kZS5kYXRhLmF0dHJzO1xuICAgIGlmICghb2xkQXR0cnMgJiYgIWF0dHJzKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKG9sZEF0dHJzID09PSBhdHRycylcbiAgICAgICAgcmV0dXJuO1xuICAgIG9sZEF0dHJzID0gb2xkQXR0cnMgfHwge307XG4gICAgYXR0cnMgPSBhdHRycyB8fCB7fTtcbiAgICAvLyB1cGRhdGUgbW9kaWZpZWQgYXR0cmlidXRlcywgYWRkIG5ldyBhdHRyaWJ1dGVzXG4gICAgZm9yIChrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgdmFyIGN1ciA9IGF0dHJzW2tleV07XG4gICAgICAgIHZhciBvbGQgPSBvbGRBdHRyc1trZXldO1xuICAgICAgICBpZiAob2xkICE9PSBjdXIpIHtcbiAgICAgICAgICAgIGlmIChjdXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBlbG0uc2V0QXR0cmlidXRlKGtleSwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxtLnNldEF0dHJpYnV0ZShrZXksIGN1cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlbW92ZWQgYXR0cmlidXRlc1xuICAgIC8vIHVzZSBgaW5gIG9wZXJhdG9yIHNpbmNlIHRoZSBwcmV2aW91cyBgZm9yYCBpdGVyYXRpb24gdXNlcyBpdCAoLmkuZS4gYWRkIGV2ZW4gYXR0cmlidXRlcyB3aXRoIHVuZGVmaW5lZCB2YWx1ZSlcbiAgICAvLyB0aGUgb3RoZXIgb3B0aW9uIGlzIHRvIHJlbW92ZSBhbGwgYXR0cmlidXRlcyB3aXRoIHZhbHVlID09IHVuZGVmaW5lZFxuICAgIGZvciAoa2V5IGluIG9sZEF0dHJzKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBhdHRycykpIHtcbiAgICAgICAgICAgIGVsbS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuYXR0cmlidXRlc01vZHVsZSA9IHsgY3JlYXRlOiB1cGRhdGVBdHRycywgdXBkYXRlOiB1cGRhdGVBdHRycyB9O1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5hdHRyaWJ1dGVzTW9kdWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXR0cmlidXRlcy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHVwZGF0ZUNsYXNzKG9sZFZub2RlLCB2bm9kZSkge1xuICAgIHZhciBjdXIsIG5hbWUsIGVsbSA9IHZub2RlLmVsbSwgb2xkQ2xhc3MgPSBvbGRWbm9kZS5kYXRhLmNsYXNzLCBrbGFzcyA9IHZub2RlLmRhdGEuY2xhc3M7XG4gICAgaWYgKCFvbGRDbGFzcyAmJiAha2xhc3MpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAob2xkQ2xhc3MgPT09IGtsYXNzKVxuICAgICAgICByZXR1cm47XG4gICAgb2xkQ2xhc3MgPSBvbGRDbGFzcyB8fCB7fTtcbiAgICBrbGFzcyA9IGtsYXNzIHx8IHt9O1xuICAgIGZvciAobmFtZSBpbiBvbGRDbGFzcykge1xuICAgICAgICBpZiAoIWtsYXNzW25hbWVdKSB7XG4gICAgICAgICAgICBlbG0uY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKG5hbWUgaW4ga2xhc3MpIHtcbiAgICAgICAgY3VyID0ga2xhc3NbbmFtZV07XG4gICAgICAgIGlmIChjdXIgIT09IG9sZENsYXNzW25hbWVdKSB7XG4gICAgICAgICAgICBlbG0uY2xhc3NMaXN0W2N1ciA/ICdhZGQnIDogJ3JlbW92ZSddKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5jbGFzc01vZHVsZSA9IHsgY3JlYXRlOiB1cGRhdGVDbGFzcywgdXBkYXRlOiB1cGRhdGVDbGFzcyB9O1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5jbGFzc01vZHVsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsYXNzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHZub2RlXzEgPSByZXF1aXJlKFwiLi92bm9kZVwiKTtcbnZhciBpcyA9IHJlcXVpcmUoXCIuL2lzXCIpO1xudmFyIGh0bWxkb21hcGlfMSA9IHJlcXVpcmUoXCIuL2h0bWxkb21hcGlcIik7XG5mdW5jdGlvbiBpc1VuZGVmKHMpIHsgcmV0dXJuIHMgPT09IHVuZGVmaW5lZDsgfVxuZnVuY3Rpb24gaXNEZWYocykgeyByZXR1cm4gcyAhPT0gdW5kZWZpbmVkOyB9XG52YXIgZW1wdHlOb2RlID0gdm5vZGVfMS5kZWZhdWx0KCcnLCB7fSwgW10sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbmZ1bmN0aW9uIHNhbWVWbm9kZSh2bm9kZTEsIHZub2RlMikge1xuICAgIHJldHVybiB2bm9kZTEua2V5ID09PSB2bm9kZTIua2V5ICYmIHZub2RlMS5zZWwgPT09IHZub2RlMi5zZWw7XG59XG5mdW5jdGlvbiBpc1Zub2RlKHZub2RlKSB7XG4gICAgcmV0dXJuIHZub2RlLnNlbCAhPT0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gY3JlYXRlS2V5VG9PbGRJZHgoY2hpbGRyZW4sIGJlZ2luSWR4LCBlbmRJZHgpIHtcbiAgICB2YXIgaSwgbWFwID0ge30sIGtleSwgY2g7XG4gICAgZm9yIChpID0gYmVnaW5JZHg7IGkgPD0gZW5kSWR4OyArK2kpIHtcbiAgICAgICAgY2ggPSBjaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKGNoICE9IG51bGwpIHtcbiAgICAgICAgICAgIGtleSA9IGNoLmtleTtcbiAgICAgICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBtYXBba2V5XSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbnZhciBob29rcyA9IFsnY3JlYXRlJywgJ3VwZGF0ZScsICdyZW1vdmUnLCAnZGVzdHJveScsICdwcmUnLCAncG9zdCddO1xudmFyIGhfMSA9IHJlcXVpcmUoXCIuL2hcIik7XG5leHBvcnRzLmggPSBoXzEuaDtcbnZhciB0aHVua18xID0gcmVxdWlyZShcIi4vdGh1bmtcIik7XG5leHBvcnRzLnRodW5rID0gdGh1bmtfMS50aHVuaztcbmZ1bmN0aW9uIGluaXQobW9kdWxlcywgZG9tQXBpKSB7XG4gICAgdmFyIGksIGosIGNicyA9IHt9O1xuICAgIHZhciBhcGkgPSBkb21BcGkgIT09IHVuZGVmaW5lZCA/IGRvbUFwaSA6IGh0bWxkb21hcGlfMS5kZWZhdWx0O1xuICAgIGZvciAoaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjYnNbaG9va3NbaV1dID0gW107XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBtb2R1bGVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICB2YXIgaG9vayA9IG1vZHVsZXNbal1baG9va3NbaV1dO1xuICAgICAgICAgICAgaWYgKGhvb2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNic1tob29rc1tpXV0ucHVzaChob29rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBlbXB0eU5vZGVBdChlbG0pIHtcbiAgICAgICAgdmFyIGlkID0gZWxtLmlkID8gJyMnICsgZWxtLmlkIDogJyc7XG4gICAgICAgIHZhciBjID0gZWxtLmNsYXNzTmFtZSA/ICcuJyArIGVsbS5jbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCcuJykgOiAnJztcbiAgICAgICAgcmV0dXJuIHZub2RlXzEuZGVmYXVsdChhcGkudGFnTmFtZShlbG0pLnRvTG93ZXJDYXNlKCkgKyBpZCArIGMsIHt9LCBbXSwgdW5kZWZpbmVkLCBlbG0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVSbUNiKGNoaWxkRWxtLCBsaXN0ZW5lcnMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJtQ2IoKSB7XG4gICAgICAgICAgICBpZiAoLS1saXN0ZW5lcnMgPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBhcGkucGFyZW50Tm9kZShjaGlsZEVsbSk7XG4gICAgICAgICAgICAgICAgYXBpLnJlbW92ZUNoaWxkKHBhcmVudF8xLCBjaGlsZEVsbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVsbSh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7XG4gICAgICAgIHZhciBpLCBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7XG4gICAgICAgICAgICAgICAgaSh2bm9kZSk7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHZub2RlLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW4sIHNlbCA9IHZub2RlLnNlbDtcbiAgICAgICAgaWYgKHNlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBQYXJzZSBzZWxlY3RvclxuICAgICAgICAgICAgdmFyIGhhc2hJZHggPSBzZWwuaW5kZXhPZignIycpO1xuICAgICAgICAgICAgdmFyIGRvdElkeCA9IHNlbC5pbmRleE9mKCcuJywgaGFzaElkeCk7XG4gICAgICAgICAgICB2YXIgaGFzaCA9IGhhc2hJZHggPiAwID8gaGFzaElkeCA6IHNlbC5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZG90ID0gZG90SWR4ID4gMCA/IGRvdElkeCA6IHNlbC5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdGFnID0gaGFzaElkeCAhPT0gLTEgfHwgZG90SWR4ICE9PSAtMSA/IHNlbC5zbGljZSgwLCBNYXRoLm1pbihoYXNoLCBkb3QpKSA6IHNlbDtcbiAgICAgICAgICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBpc0RlZihkYXRhKSAmJiBpc0RlZihpID0gZGF0YS5ucykgPyBhcGkuY3JlYXRlRWxlbWVudE5TKGksIHRhZylcbiAgICAgICAgICAgICAgICA6IGFwaS5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICAgICAgICBpZiAoaGFzaCA8IGRvdClcbiAgICAgICAgICAgICAgICBlbG0uc2V0QXR0cmlidXRlKCdpZCcsIHNlbC5zbGljZShoYXNoICsgMSwgZG90KSk7XG4gICAgICAgICAgICBpZiAoZG90SWR4ID4gMClcbiAgICAgICAgICAgICAgICBlbG0uc2V0QXR0cmlidXRlKCdjbGFzcycsIHNlbC5zbGljZShkb3QgKyAxKS5yZXBsYWNlKC9cXC4vZywgJyAnKSk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmNyZWF0ZS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBjYnMuY3JlYXRlW2ldKGVtcHR5Tm9kZSwgdm5vZGUpO1xuICAgICAgICAgICAgaWYgKGlzLmFycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2ggPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5hcHBlbmRDaGlsZChlbG0sIGNyZWF0ZUVsbShjaCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpcy5wcmltaXRpdmUodm5vZGUudGV4dCkpIHtcbiAgICAgICAgICAgICAgICBhcGkuYXBwZW5kQ2hpbGQoZWxtLCBhcGkuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSA9IHZub2RlLmRhdGEuaG9vazsgLy8gUmV1c2UgdmFyaWFibGVcbiAgICAgICAgICAgIGlmIChpc0RlZihpKSkge1xuICAgICAgICAgICAgICAgIGlmIChpLmNyZWF0ZSlcbiAgICAgICAgICAgICAgICAgICAgaS5jcmVhdGUoZW1wdHlOb2RlLCB2bm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKGkuaW5zZXJ0KVxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2bm9kZS5lbG0gPSBhcGkuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZub2RlLmVsbTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkVm5vZGVzKHBhcmVudEVsbSwgYmVmb3JlLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgICAgICBmb3IgKDsgc3RhcnRJZHggPD0gZW5kSWR4OyArK3N0YXJ0SWR4KSB7XG4gICAgICAgICAgICB2YXIgY2ggPSB2bm9kZXNbc3RhcnRJZHhdO1xuICAgICAgICAgICAgaWYgKGNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhcGkuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgY3JlYXRlRWxtKGNoLCBpbnNlcnRlZFZub2RlUXVldWUpLCBiZWZvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludm9rZURlc3Ryb3lIb29rKHZub2RlKSB7XG4gICAgICAgIHZhciBpLCBqLCBkYXRhID0gdm5vZGUuZGF0YTtcbiAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmRlc3Ryb3kpKVxuICAgICAgICAgICAgICAgIGkodm5vZGUpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGNicy5kZXN0cm95W2ldKHZub2RlKTtcbiAgICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSB2bm9kZS5jaGlsZHJlbltqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gbnVsbCAmJiB0eXBlb2YgaSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52b2tlRGVzdHJveUhvb2soaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4KSB7XG4gICAgICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcbiAgICAgICAgICAgIHZhciBpXzEgPSB2b2lkIDAsIGxpc3RlbmVycyA9IHZvaWQgMCwgcm0gPSB2b2lkIDAsIGNoID0gdm5vZGVzW3N0YXJ0SWR4XTtcbiAgICAgICAgICAgIGlmIChjaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGVmKGNoLnNlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlRGVzdHJveUhvb2soY2gpO1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgPSBjYnMucmVtb3ZlLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgICAgIHJtID0gY3JlYXRlUm1DYihjaC5lbG0sIGxpc3RlbmVycyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaV8xID0gMDsgaV8xIDwgY2JzLnJlbW92ZS5sZW5ndGg7ICsraV8xKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2JzLnJlbW92ZVtpXzFdKGNoLCBybSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZihpXzEgPSBjaC5kYXRhKSAmJiBpc0RlZihpXzEgPSBpXzEuaG9vaykgJiYgaXNEZWYoaV8xID0gaV8xLnJlbW92ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlfMShjaCwgcm0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLnJlbW92ZUNoaWxkKHBhcmVudEVsbSwgY2guZWxtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4ocGFyZW50RWxtLCBvbGRDaCwgbmV3Q2gsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgICAgICB2YXIgb2xkU3RhcnRJZHggPSAwLCBuZXdTdGFydElkeCA9IDA7XG4gICAgICAgIHZhciBvbGRFbmRJZHggPSBvbGRDaC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdO1xuICAgICAgICB2YXIgb2xkRW5kVm5vZGUgPSBvbGRDaFtvbGRFbmRJZHhdO1xuICAgICAgICB2YXIgbmV3RW5kSWR4ID0gbmV3Q2gubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTtcbiAgICAgICAgdmFyIG5ld0VuZFZub2RlID0gbmV3Q2hbbmV3RW5kSWR4XTtcbiAgICAgICAgdmFyIG9sZEtleVRvSWR4O1xuICAgICAgICB2YXIgaWR4SW5PbGQ7XG4gICAgICAgIHZhciBlbG1Ub01vdmU7XG4gICAgICAgIHZhciBiZWZvcmU7XG4gICAgICAgIHdoaWxlIChvbGRTdGFydElkeCA8PSBvbGRFbmRJZHggJiYgbmV3U3RhcnRJZHggPD0gbmV3RW5kSWR4KSB7XG4gICAgICAgICAgICBpZiAob2xkU3RhcnRWbm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdOyAvLyBWbm9kZSBtaWdodCBoYXZlIGJlZW4gbW92ZWQgbGVmdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob2xkRW5kVm5vZGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobmV3U3RhcnRWbm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobmV3RW5kVm5vZGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld1N0YXJ0Vm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcbiAgICAgICAgICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuICAgICAgICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgICAgICAgICAgYXBpLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtLCBhcGkubmV4dFNpYmxpbmcob2xkRW5kVm5vZGUuZWxtKSk7XG4gICAgICAgICAgICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdO1xuICAgICAgICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgICAgICAgICAgYXBpLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZEVuZFZub2RlLmVsbSwgb2xkU3RhcnRWbm9kZS5lbG0pO1xuICAgICAgICAgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xuICAgICAgICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvbGRLZXlUb0lkeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZEtleVRvSWR4ID0gY3JlYXRlS2V5VG9PbGRJZHgob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZHhJbk9sZCA9IG9sZEtleVRvSWR4W25ld1N0YXJ0Vm5vZGUua2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNVbmRlZihpZHhJbk9sZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpLCBvbGRTdGFydFZub2RlLmVsbSk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsbVRvTW92ZSA9IG9sZENoW2lkeEluT2xkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsbVRvTW92ZS5zZWwgIT09IG5ld1N0YXJ0Vm5vZGUuc2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSksIG9sZFN0YXJ0Vm5vZGUuZWxtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUoZWxtVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkQ2hbaWR4SW5PbGRdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIGVsbVRvTW92ZS5lbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvbGRTdGFydElkeCA+IG9sZEVuZElkeCkge1xuICAgICAgICAgICAgYmVmb3JlID0gbmV3Q2hbbmV3RW5kSWR4ICsgMV0gPT0gbnVsbCA/IG51bGwgOiBuZXdDaFtuZXdFbmRJZHggKyAxXS5lbG07XG4gICAgICAgICAgICBhZGRWbm9kZXMocGFyZW50RWxtLCBiZWZvcmUsIG5ld0NoLCBuZXdTdGFydElkeCwgbmV3RW5kSWR4LCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1N0YXJ0SWR4ID4gbmV3RW5kSWR4KSB7XG4gICAgICAgICAgICByZW1vdmVWbm9kZXMocGFyZW50RWxtLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcGF0Y2hWbm9kZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xuICAgICAgICB2YXIgaSwgaG9vaztcbiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5kYXRhKSAmJiBpc0RlZihob29rID0gaS5ob29rKSAmJiBpc0RlZihpID0gaG9vay5wcmVwYXRjaCkpIHtcbiAgICAgICAgICAgIGkob2xkVm5vZGUsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxtID0gdm5vZGUuZWxtID0gb2xkVm5vZGUuZWxtO1xuICAgICAgICB2YXIgb2xkQ2ggPSBvbGRWbm9kZS5jaGlsZHJlbjtcbiAgICAgICAgdmFyIGNoID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh2bm9kZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMudXBkYXRlLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIGNicy51cGRhdGVbaV0ob2xkVm5vZGUsIHZub2RlKTtcbiAgICAgICAgICAgIGkgPSB2bm9kZS5kYXRhLmhvb2s7XG4gICAgICAgICAgICBpZiAoaXNEZWYoaSkgJiYgaXNEZWYoaSA9IGkudXBkYXRlKSlcbiAgICAgICAgICAgICAgICBpKG9sZFZub2RlLCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVW5kZWYodm5vZGUudGV4dCkpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZihvbGRDaCkgJiYgaXNEZWYoY2gpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZENoICE9PSBjaClcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0RlZihjaCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIGFwaS5zZXRUZXh0Q29udGVudChlbG0sICcnKTtcbiAgICAgICAgICAgICAgICBhZGRWbm9kZXMoZWxtLCBudWxsLCBjaCwgMCwgY2gubGVuZ3RoIC0gMSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzRGVmKG9sZENoKSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZVZub2RlcyhlbG0sIG9sZENoLCAwLCBvbGRDaC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7XG4gICAgICAgICAgICAgICAgYXBpLnNldFRleHRDb250ZW50KGVsbSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9sZFZub2RlLnRleHQgIT09IHZub2RlLnRleHQpIHtcbiAgICAgICAgICAgIGFwaS5zZXRUZXh0Q29udGVudChlbG0sIHZub2RlLnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0RlZihob29rKSAmJiBpc0RlZihpID0gaG9vay5wb3N0cGF0Y2gpKSB7XG4gICAgICAgICAgICBpKG9sZFZub2RlLCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBhdGNoKG9sZFZub2RlLCB2bm9kZSkge1xuICAgICAgICB2YXIgaSwgZWxtLCBwYXJlbnQ7XG4gICAgICAgIHZhciBpbnNlcnRlZFZub2RlUXVldWUgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5wcmUubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICBjYnMucHJlW2ldKCk7XG4gICAgICAgIGlmICghaXNWbm9kZShvbGRWbm9kZSkpIHtcbiAgICAgICAgICAgIG9sZFZub2RlID0gZW1wdHlOb2RlQXQob2xkVm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzYW1lVm5vZGUob2xkVm5vZGUsIHZub2RlKSkge1xuICAgICAgICAgICAgcGF0Y2hWbm9kZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbG0gPSBvbGRWbm9kZS5lbG07XG4gICAgICAgICAgICBwYXJlbnQgPSBhcGkucGFyZW50Tm9kZShlbG0pO1xuICAgICAgICAgICAgY3JlYXRlRWxtKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFwaS5pbnNlcnRCZWZvcmUocGFyZW50LCB2bm9kZS5lbG0sIGFwaS5uZXh0U2libGluZyhlbG0pKTtcbiAgICAgICAgICAgICAgICByZW1vdmVWbm9kZXMocGFyZW50LCBbb2xkVm5vZGVdLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpbnNlcnRlZFZub2RlUXVldWVbaV0uZGF0YS5ob29rLmluc2VydChpbnNlcnRlZFZub2RlUXVldWVbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMucG9zdC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIGNicy5wb3N0W2ldKCk7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9O1xufVxuZXhwb3J0cy5pbml0ID0gaW5pdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNuYWJiZG9tLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGhfMSA9IHJlcXVpcmUoXCIuL2hcIik7XG5mdW5jdGlvbiBjb3B5VG9UaHVuayh2bm9kZSwgdGh1bmspIHtcbiAgICB0aHVuay5lbG0gPSB2bm9kZS5lbG07XG4gICAgdm5vZGUuZGF0YS5mbiA9IHRodW5rLmRhdGEuZm47XG4gICAgdm5vZGUuZGF0YS5hcmdzID0gdGh1bmsuZGF0YS5hcmdzO1xuICAgIHRodW5rLmRhdGEgPSB2bm9kZS5kYXRhO1xuICAgIHRodW5rLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gICAgdGh1bmsudGV4dCA9IHZub2RlLnRleHQ7XG4gICAgdGh1bmsuZWxtID0gdm5vZGUuZWxtO1xufVxuZnVuY3Rpb24gaW5pdCh0aHVuaykge1xuICAgIHZhciBjdXIgPSB0aHVuay5kYXRhO1xuICAgIHZhciB2bm9kZSA9IGN1ci5mbi5hcHBseSh1bmRlZmluZWQsIGN1ci5hcmdzKTtcbiAgICBjb3B5VG9UaHVuayh2bm9kZSwgdGh1bmspO1xufVxuZnVuY3Rpb24gcHJlcGF0Y2gob2xkVm5vZGUsIHRodW5rKSB7XG4gICAgdmFyIGksIG9sZCA9IG9sZFZub2RlLmRhdGEsIGN1ciA9IHRodW5rLmRhdGE7XG4gICAgdmFyIG9sZEFyZ3MgPSBvbGQuYXJncywgYXJncyA9IGN1ci5hcmdzO1xuICAgIGlmIChvbGQuZm4gIT09IGN1ci5mbiB8fCBvbGRBcmdzLmxlbmd0aCAhPT0gYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY29weVRvVGh1bmsoY3VyLmZuLmFwcGx5KHVuZGVmaW5lZCwgYXJncyksIHRodW5rKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAob2xkQXJnc1tpXSAhPT0gYXJnc1tpXSkge1xuICAgICAgICAgICAgY29weVRvVGh1bmsoY3VyLmZuLmFwcGx5KHVuZGVmaW5lZCwgYXJncyksIHRodW5rKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5VG9UaHVuayhvbGRWbm9kZSwgdGh1bmspO1xufVxuZXhwb3J0cy50aHVuayA9IGZ1bmN0aW9uIHRodW5rKHNlbCwga2V5LCBmbiwgYXJncykge1xuICAgIGlmIChhcmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXJncyA9IGZuO1xuICAgICAgICBmbiA9IGtleTtcbiAgICAgICAga2V5ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gaF8xLmgoc2VsLCB7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBob29rOiB7IGluaXQ6IGluaXQsIHByZXBhdGNoOiBwcmVwYXRjaCB9LFxuICAgICAgICBmbjogZm4sXG4gICAgICAgIGFyZ3M6IGFyZ3NcbiAgICB9KTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzLnRodW5rO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGh1bmsuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiB2bm9kZShzZWwsIGRhdGEsIGNoaWxkcmVuLCB0ZXh0LCBlbG0pIHtcbiAgICB2YXIga2V5ID0gZGF0YSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogZGF0YS5rZXk7XG4gICAgcmV0dXJuIHsgc2VsOiBzZWwsIGRhdGE6IGRhdGEsIGNoaWxkcmVuOiBjaGlsZHJlbixcbiAgICAgICAgdGV4dDogdGV4dCwgZWxtOiBlbG0sIGtleToga2V5IH07XG59XG5leHBvcnRzLnZub2RlID0gdm5vZGU7XG5leHBvcnRzLmRlZmF1bHQgPSB2bm9kZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZub2RlLmpzLm1hcCIsImltcG9ydCB7IGgsIHRodW5rIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSwgVk5vZGVEYXRhIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCB7IGZpbmRUYWcgfSBmcm9tICcuL3N0dWR5L3N0dWR5Q2hhcHRlcnMnO1xuaW1wb3J0ICogYXMgZ2FtZSBmcm9tICdnYW1lJztcbmltcG9ydCB7IGRlZmluZWQgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgYmluZCwgZGF0YUljb24gfSBmcm9tICcuL3V0aWwnO1xuXG5mdW5jdGlvbiByZW5kZXJSYXRpbmdEaWZmKHJkOiBudW1iZXIgfCB1bmRlZmluZWQpOiBWTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGlmIChyZCA9PT0gMCkgcmV0dXJuIGgoJ3NwYW4nLCAnwrEwJyk7XG4gIGlmIChyZCAmJiByZCA+IDApIHJldHVybiBoKCdnb29kJywgJysnICsgcmQpO1xuICBpZiAocmQgJiYgcmQgPCAwKSByZXR1cm4gaCgnYmFkJywgJ+KIkicgKyAoLXJkKSk7XG4gIHJldHVybjtcbn1cblxuZnVuY3Rpb24gcmVuZGVyUGxheWVyKGN0cmw6IEFuYWx5c2VDdHJsLCBjb2xvcjogQ29sb3IpOiBWTm9kZSB7XG4gIGNvbnN0IHAgPSBnYW1lLmdldFBsYXllcihjdHJsLmRhdGEsIGNvbG9yKTtcbiAgaWYgKHAudXNlcikgcmV0dXJuIGgoJ2EudXNlci1saW5rLnVscHQnLCB7XG4gICAgYXR0cnM6IHsgaHJlZjogJy9ALycgKyBwLnVzZXIudXNlcm5hbWUgfVxuICB9LCBbXG4gICAgcC51c2VyLnVzZXJuYW1lLCAnICcsXG4gICAgcmVuZGVyUmF0aW5nRGlmZihwLnJhdGluZ0RpZmYpXG4gIF0pO1xuICByZXR1cm4gaCgnc3BhbicsXG4gICAgcC5uYW1lIHx8XG4gICAgKHAuYWkgJiYgJ1N0b2NrZmlzaCBsZXZlbCAnICsgcC5haSkgfHxcbiAgICAoY3RybC5zdHVkeSAmJiBmaW5kVGFnKGN0cmwuc3R1ZHkuZGF0YS5jaGFwdGVyLnRhZ3MsIGNvbG9yKSkgfHxcbiAgICAnQW5vbnltb3VzJyk7XG59XG5cbmNvbnN0IGFkdmljZXMgPSBbXG4gIFsnaW5hY2N1cmFjeScsICdpbmFjY3VyYWNpZXMnLCAnPyEnXSxcbiAgWydtaXN0YWtlJywgJ21pc3Rha2VzJywgJz8nXSxcbiAgWydibHVuZGVyJywgJ2JsdW5kZXJzJywgJz8/J11cbl07XG5cbmZ1bmN0aW9uIHBsYXllclRhYmxlKGN0cmw6IEFuYWx5c2VDdHJsLCBjb2xvcjogQ29sb3IpOiBWTm9kZSB7XG4gIGNvbnN0IGQgPSBjdHJsLmRhdGEsIHRyYW5zID0gY3RybC50cmFucy5ub2FyZztcbiAgY29uc3QgYWNwbCA9IGQuYW5hbHlzaXMhW2NvbG9yXS5hY3BsO1xuICByZXR1cm4gaCgndGFibGUnLCB7XG4gICAgaG9vazoge1xuICAgICAgaW5zZXJ0KHZub2RlKSB7XG4gICAgICAgIHdpbmRvdy5saWNoZXNzLnBvd2VydGlwLm1hbnVhbFVzZXJJbih2bm9kZS5lbG0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW1xuICAgIGgoJ3RoZWFkJywgaCgndHInLCBbXG4gICAgICBoKCd0ZCcsIGgoJ2kuaXMuY29sb3ItaWNvbi4nICsgY29sb3IpKSxcbiAgICAgIGgoJ3RoJywgcmVuZGVyUGxheWVyKGN0cmwsIGNvbG9yKSlcbiAgICBdKSksXG4gICAgaCgndGJvZHknLFxuICAgICAgYWR2aWNlcy5tYXAoYSA9PiB7XG4gICAgICAgIGNvbnN0IG5iOiBudW1iZXIgPSBkLmFuYWx5c2lzIVtjb2xvcl1bYVswXV07XG4gICAgICAgIGNvbnN0IGF0dHJzOiBWTm9kZURhdGEgPSBuYiA/IHtcbiAgICAgICAgICAnZGF0YS1jb2xvcic6IGNvbG9yLFxuICAgICAgICAgICdkYXRhLXN5bWJvbCc6IGFbMl1cbiAgICAgICAgfSA6IHt9O1xuICAgICAgICByZXR1cm4gaCgndHInICsgKG5iID8gJy5zeW1ib2wnIDogJycpLCB7IGF0dHJzIH0sIFtcbiAgICAgICAgICBoKCd0ZCcsICcnICsgbmIpLFxuICAgICAgICAgIGgoJ3RoJywgdHJhbnMoYVsxXSkpXG4gICAgICAgIF0pO1xuICAgICAgfSkuY29uY2F0KFxuICAgICAgICBoKCd0cicsIFtcbiAgICAgICAgICBoKCd0ZCcsICcnICsgKGRlZmluZWQoYWNwbCkgPyBhY3BsIDogJz8nKSksXG4gICAgICAgICAgaCgndGgnLCB0cmFucygnYXZlcmFnZUNlbnRpcGF3bkxvc3MnKSlcbiAgICAgICAgXSlcbiAgICAgICkpXG4gIF0pXG59XG5cbmZ1bmN0aW9uIGRvUmVuZGVyKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2LmFkdmljZS1zdW1tYXJ5Jywge1xuICAgIGhvb2s6IHtcbiAgICAgIGluc2VydDogdm5vZGUgPT4ge1xuICAgICAgICAkKHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCkub24oJ2NsaWNrJywgJ3RyLnN5bWJvbCcsIGZ1bmN0aW9uKHRoaXM6IEVsZW1lbnQpIHtcbiAgICAgICAgICBjdHJsLmp1bXBUb0dseXBoU3ltYm9sKCQodGhpcykuZGF0YSgnY29sb3InKSwgJCh0aGlzKS5kYXRhKCdzeW1ib2wnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW1xuICAgIHBsYXllclRhYmxlKGN0cmwsICd3aGl0ZScpLFxuICAgIGN0cmwuc3R1ZHkgPyBudWxsIDogaCgnYS5idXR0b24udGV4dCcsIHtcbiAgICAgIGNsYXNzOiB7IGFjdGl2ZTogISFjdHJsLnJldHJvIH0sXG4gICAgICBhdHRyczogZGF0YUljb24oJ0cnKSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgY3RybC50b2dnbGVSZXRybywgY3RybC5yZWRyYXcpXG4gICAgfSwgY3RybC50cmFucy5ub2FyZygnbGVhcm5Gcm9tWW91ck1pc3Rha2VzJykpLFxuICAgIHBsYXllclRhYmxlKGN0cmwsICdibGFjaycpXG4gIF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUgfCB1bmRlZmluZWQge1xuXG4gIGlmIChjdHJsLnN0dWR5UHJhY3RpY2UgfHwgY3RybC5lbWJlZCkgcmV0dXJuO1xuXG4gIGlmICghY3RybC5kYXRhLmFuYWx5c2lzIHx8ICFjdHJsLnNob3dDb21wdXRlcigpIHx8IChjdHJsLnN0dWR5ICYmIGN0cmwuc3R1ZHkudm0udG9vbFRhYigpICE9PSAnc2VydmVyRXZhbCcpKVxuICAgIHJldHVybiBoKCdkaXYuYW5hbHlzZV9fYWNwbCcpO1xuXG4gIC8vIGRvbid0IGNhY2hlIHVudGlsIHRoZSBhbmFseXNpcyBpcyBjb21wbGV0ZSFcbiAgY29uc3QgYnVzdGVyID0gY3RybC5kYXRhLmFuYWx5c2lzLnBhcnRpYWwgPyBNYXRoLnJhbmRvbSgpIDogJyc7XG4gIGxldCBjYWNoZUtleSA9ICcnICsgYnVzdGVyICsgISFjdHJsLnJldHJvO1xuICBpZiAoY3RybC5zdHVkeSkgY2FjaGVLZXkgKz0gY3RybC5zdHVkeS5kYXRhLmNoYXB0ZXIuaWQ7XG5cbiAgcmV0dXJuIGgoJ2Rpdi5hbmFseXNlX19hY3BsJywgdGh1bmsoJ2Rpdi5hZHZpY2Utc3VtbWFyeScsIGRvUmVuZGVyLCBbY3RybCwgY2FjaGVLZXldKSk7XG59XG4iLCJpbXBvcnQgeyBlbXB0eSB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgSG9va3MgfSBmcm9tICdzbmFiYmRvbS9ob29rcydcbmltcG9ydCB7IE1heWJlVk5vZGVzIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IEF1dG9wbGF5RGVsYXkgfSBmcm9tICcuL2F1dG9wbGF5JztcbmltcG9ydCB7IGJvb2xTZXR0aW5nLCBCb29sU2V0dGluZyB9IGZyb20gJy4vYm9vbFNldHRpbmcnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4vY3RybCc7XG5pbXBvcnQgeyBjb250IGFzIGNvbnRSb3V0ZSB9IGZyb20gJ2dhbWUvcm91dGVyJztcbmltcG9ydCB7IGJpbmQsIGRhdGFJY29uIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCAqIGFzIHBnbkV4cG9ydCBmcm9tICcuL3BnbkV4cG9ydCc7XG5cbmludGVyZmFjZSBBdXRvcGxheVNwZWVkIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZWxheTogQXV0b3BsYXlEZWxheTtcbn1cblxuY29uc3QgYmFzZVNwZWVkczogQXV0b3BsYXlTcGVlZFtdID0gW3tcbiAgbmFtZTogJ2Zhc3QnLFxuICBkZWxheTogMTAwMFxufSwge1xuICBuYW1lOiAnc2xvdycsXG4gIGRlbGF5OiA1MDAwXG59XTtcblxuY29uc3QgcmVhbHRpbWVTcGVlZDogQXV0b3BsYXlTcGVlZCA9IHtcbiAgbmFtZTogJ3JlYWx0aW1lUmVwbGF5JyxcbiAgZGVsYXk6ICdyZWFsdGltZSdcbn07XG5cbmNvbnN0IGNwbFNwZWVkOiBBdXRvcGxheVNwZWVkID0ge1xuICBuYW1lOiAnYnlDUEwnLFxuICBkZWxheTogJ2NwbCdcbn07XG5cbmZ1bmN0aW9uIGRlbGV0ZUJ1dHRvbihjdHJsOiBBbmFseXNlQ3RybCwgdXNlcklkOiBzdHJpbmcgfCBudWxsKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICBjb25zdCBnID0gY3RybC5kYXRhLmdhbWU7XG4gIGlmIChnLnNvdXJjZSA9PT0gJ2ltcG9ydCcgJiZcbiAgICBnLmltcG9ydGVkQnkgJiYgZy5pbXBvcnRlZEJ5ID09PSB1c2VySWQpXG4gICAgcmV0dXJuIGgoJ2Zvcm0uZGVsZXRlJywge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgIGFjdGlvbjogJy8nICsgZy5pZCArICcvZGVsZXRlJ1xuICAgICAgfSxcbiAgICAgIGhvb2s6IGJpbmQoJ3N1Ym1pdCcsIF8gPT4gY29uZmlybShjdHJsLnRyYW5zLm5vYXJnKCdkZWxldGVUaGlzSW1wb3J0ZWRHYW1lJykpKVxuICAgIH0sIFtcbiAgICAgIGgoJ2J1dHRvbi5idXR0b24udGV4dC50aGluJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICAgICdkYXRhLWljb24nOiAncSdcbiAgICAgICAgfVxuICAgICAgfSwgY3RybC50cmFucy5ub2FyZygnZGVsZXRlJykpXG4gICAgXSk7XG4gIHJldHVybjtcbn1cblxuZnVuY3Rpb24gYXV0b3BsYXlCdXR0b25zKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICBjb25zdCBkID0gY3RybC5kYXRhO1xuICBjb25zdCBzcGVlZHMgPSBbXG4gICAgLi4uYmFzZVNwZWVkcyxcbiAgICAuLi4oZC5nYW1lLnNwZWVkICE9PSAnY29ycmVzcG9uZGVuY2UnICYmICFlbXB0eShkLmdhbWUubW92ZUNlbnRpcykgPyBbcmVhbHRpbWVTcGVlZF0gOiBbXSksXG4gICAgLi4uKGQuYW5hbHlzaXMgPyBbY3BsU3BlZWRdIDogW10pXG4gIF07XG4gIHJldHVybiBoKCdkaXYuYXV0b3BsYXknLCBzcGVlZHMubWFwKHNwZWVkID0+IHtcbiAgICByZXR1cm4gaCgnYS5idXR0b24uYnV0dG9uLWVtcHR5Jywge1xuICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiBjdHJsLnRvZ2dsZVBsYXkoc3BlZWQuZGVsYXkpLCBjdHJsLnJlZHJhdylcbiAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKHNwZWVkLm5hbWUpKTtcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiByYW5nZUNvbmZpZyhyZWFkOiAoKSA9PiBudW1iZXIsIHdyaXRlOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZCk6IEhvb2tzIHtcbiAgcmV0dXJuIHtcbiAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgIGNvbnN0IGVsID0gdm5vZGUuZWxtIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICBlbC52YWx1ZSA9ICcnICsgcmVhZCgpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBfID0+IHdyaXRlKHBhcnNlSW50KGVsLnZhbHVlKSkpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBfID0+IGVsLmJsdXIoKSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRIYXNoU2l6ZSh2OiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAodiA8IDEwMDApIHJldHVybiB2ICsgJ01CJztcbiAgZWxzZSByZXR1cm4gTWF0aC5yb3VuZCh2IC8gMTAyNCkgKyAnR0InO1xufVxuXG5mdW5jdGlvbiBoaWRkZW5JbnB1dChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGgoJ2lucHV0Jywge1xuICAgIGF0dHJzOiB7ICd0eXBlJzogJ2hpZGRlbicsIG5hbWUsIHZhbHVlIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHN0dWR5QnV0dG9uKGN0cmw6IEFuYWx5c2VDdHJsKSB7XG4gIGlmIChjdHJsLnN0dWR5ICYmIGN0cmwuZW1iZWQgJiYgIWN0cmwub25nb2luZykgcmV0dXJuIGgoJ2EuYnV0dG9uLmJ1dHRvbi1lbXB0eScsIHtcbiAgICBhdHRyczoge1xuICAgICAgaHJlZjogJy9zdHVkeS8nICsgY3RybC5zdHVkeS5kYXRhLmlkICsgJyMnICsgY3RybC5zdHVkeS5jdXJyZW50Q2hhcHRlcigpLmlkLFxuICAgICAgdGFyZ2V0OiAnX2JsYW5rJyxcbiAgICAgICdkYXRhLWljb24nOiAnNCdcbiAgICB9XG4gIH0sIGN0cmwudHJhbnMubm9hcmcoJ29wZW5TdHVkeScpKTtcbiAgaWYgKGN0cmwuc3R1ZHkgfHwgY3RybC5vbmdvaW5nIHx8IGN0cmwuZW1iZWQpIHJldHVybjtcbiAgcmV0dXJuIGgoJ2Zvcm0nLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgYWN0aW9uOiAnL3N0dWR5L2FzJ1xuICAgIH0sXG4gICAgaG9vazogYmluZCgnc3VibWl0JywgZSA9PiB7XG4gICAgICBjb25zdCBwZ25JbnB1dCA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1wZ25dJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIGlmIChwZ25JbnB1dCkgcGduSW5wdXQudmFsdWUgPSBwZ25FeHBvcnQucmVuZGVyRnVsbFR4dChjdHJsKTtcbiAgICB9KVxuICB9LCBbXG4gICAgIWN0cmwuc3ludGhldGljID8gaGlkZGVuSW5wdXQoJ2dhbWVJZCcsIGN0cmwuZGF0YS5nYW1lLmlkKSA6IGhpZGRlbklucHV0KCdwZ24nLCAnJyksXG4gICAgaGlkZGVuSW5wdXQoJ29yaWVudGF0aW9uJywgY3RybC5jaGVzc2dyb3VuZC5zdGF0ZS5vcmllbnRhdGlvbiksXG4gICAgaGlkZGVuSW5wdXQoJ3ZhcmlhbnQnLCBjdHJsLmRhdGEuZ2FtZS52YXJpYW50LmtleSksXG4gICAgaGlkZGVuSW5wdXQoJ2ZlbicsIGN0cmwudHJlZS5yb290LmZlbiksXG4gICAgaCgnYnV0dG9uLmJ1dHRvbi5idXR0b24tZW1wdHknLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICB0eXBlOiAnc3VibWl0JyxcbiAgICAgICAgJ2RhdGEtaWNvbic6ICc0J1xuICAgICAgfVxuICAgIH0sIGN0cmwudHJhbnMubm9hcmcoJ3RvU3R1ZHknKSlcbiAgXSk7XG59XG5cbmV4cG9ydCBjbGFzcyBDdHJsIHtcbiAgb3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICB0b2dnbGUgPSAoKSA9PiB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBBbmFseXNlQ3RybCk6IFZOb2RlIHtcbiAgY29uc3QgZCA9IGN0cmwuZGF0YSxcbiAgICBub2FyZyA9IGN0cmwudHJhbnMubm9hcmcsXG4gICAgY2FuQ29udGludWUgPSAhY3RybC5vbmdvaW5nICYmICFjdHJsLmVtYmVkICYmIGQuZ2FtZS52YXJpYW50LmtleSA9PT0gJ3N0YW5kYXJkJyxcbiAgICBjZXZhbCA9IGN0cmwuZ2V0Q2V2YWwoKSxcbiAgICBtYW5kYXRvcnlDZXZhbCA9IGN0cmwubWFuZGF0b3J5Q2V2YWwoKTtcblxuICBjb25zdCB0b29sczogTWF5YmVWTm9kZXMgPSBbXG4gICAgaCgnZGl2LmFjdGlvbi1tZW51X190b29scycsIFtcbiAgICAgIGgoJ2EuYnV0dG9uLmJ1dHRvbi1lbXB0eScsIHtcbiAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLmZsaXApLFxuICAgICAgICBhdHRyczogZGF0YUljb24oJ0InKVxuICAgICAgfSwgbm9hcmcoJ2ZsaXBCb2FyZCcpKSxcbiAgICAgIGN0cmwub25nb2luZyA/IG51bGwgOiBoKCdhLmJ1dHRvbi5idXR0b24tZW1wdHknLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgaHJlZjogZC51c2VyQW5hbHlzaXMgPyAnL2VkaXRvcj9mZW49JyArIGN0cmwubm9kZS5mZW4gOiAnLycgKyBkLmdhbWUuaWQgKyAnL2VkaXQ/ZmVuPScgKyBjdHJsLm5vZGUuZmVuLFxuICAgICAgICAgIHJlbDogJ25vZm9sbG93JyxcbiAgICAgICAgICB0YXJnZXQ6IGN0cmwuZW1iZWQgPyAnX2JsYW5rJyA6ICcnLFxuICAgICAgICAgICdkYXRhLWljb24nOiAnbSdcbiAgICAgICAgfVxuICAgICAgfSwgbm9hcmcoJ2JvYXJkRWRpdG9yJykpLFxuICAgICAgY2FuQ29udGludWUgPyBoKCdhLmJ1dHRvbi5idXR0b24tZW1wdHknLCB7XG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiAkLm1vZGFsKCQoJy5jb250aW51ZS13aXRoLmdfJyArIGQuZ2FtZS5pZCkpKSxcbiAgICAgICAgYXR0cnM6IGRhdGFJY29uKCdVJylcbiAgICAgIH0sIG5vYXJnKCdjb250aW51ZUZyb21IZXJlJykpIDogbnVsbCxcbiAgICAgIHN0dWR5QnV0dG9uKGN0cmwpXG4gICAgXSlcbiAgXTtcblxuICBjb25zdCBjZXZhbENvbmZpZzogTWF5YmVWTm9kZXMgPSAoY2V2YWwgJiYgY2V2YWwucG9zc2libGUgJiYgY2V2YWwuYWxsb3dlZCgpKSA/IChbXG4gICAgaCgnaDInLCBub2FyZygnY29tcHV0ZXJBbmFseXNpcycpKVxuICBdIGFzIE1heWJlVk5vZGVzKS5jb25jYXQoW1xuICAgIGN0cmxCb29sU2V0dGluZyh7XG4gICAgICBuYW1lOiAnZW5hYmxlJyxcbiAgICAgIHRpdGxlOiAoXG4gICAgICAgIG1hbmRhdG9yeUNldmFsID8gXCJSZXF1aXJlZCBieSBwcmFjdGljZSBtb2RlXCIgOiB3aW5kb3cubGljaGVzcy5lbmdpbmVOYW1lXG4gICAgICApICsgJyAoSG90a2V5OiB6KScsXG4gICAgICBpZDogJ2FsbCcsXG4gICAgICBjaGVja2VkOiBjdHJsLnNob3dDb21wdXRlcigpLFxuICAgICAgZGlzYWJsZWQ6IG1hbmRhdG9yeUNldmFsLFxuICAgICAgY2hhbmdlOiBjdHJsLnRvZ2dsZUNvbXB1dGVyXG4gICAgfSwgY3RybClcbiAgXSkuY29uY2F0KFxuICAgIGN0cmwuc2hvd0NvbXB1dGVyKCkgPyBbXG4gICAgICBjdHJsQm9vbFNldHRpbmcoe1xuICAgICAgICBuYW1lOiAnYmVzdE1vdmVBcnJvdycsXG4gICAgICAgIHRpdGxlOiAnSG90a2V5OiBhJyxcbiAgICAgICAgaWQ6ICdzaGFwZXMnLFxuICAgICAgICBjaGVja2VkOiBjdHJsLnNob3dBdXRvU2hhcGVzKCksXG4gICAgICAgIGNoYW5nZTogY3RybC50b2dnbGVBdXRvU2hhcGVzXG4gICAgICB9LCBjdHJsKSxcbiAgICAgIGN0cmxCb29sU2V0dGluZyh7XG4gICAgICAgIG5hbWU6ICdldmFsdWF0aW9uR2F1Z2UnLFxuICAgICAgICBpZDogJ2dhdWdlJyxcbiAgICAgICAgY2hlY2tlZDogY3RybC5zaG93R2F1Z2UoKSxcbiAgICAgICAgY2hhbmdlOiBjdHJsLnRvZ2dsZUdhdWdlXG4gICAgICB9LCBjdHJsKSxcbiAgICAgIGN0cmxCb29sU2V0dGluZyh7XG4gICAgICAgIG5hbWU6ICdpbmZpbml0ZUFuYWx5c2lzJyxcbiAgICAgICAgdGl0bGU6ICdyZW1vdmVzVGhlRGVwdGhMaW1pdCcsXG4gICAgICAgIGlkOiAnaW5maW5pdGUnLFxuICAgICAgICBjaGVja2VkOiBjZXZhbC5pbmZpbml0ZSgpLFxuICAgICAgICBjaGFuZ2U6IGN0cmwuY2V2YWxTZXRJbmZpbml0ZVxuICAgICAgfSwgY3RybCksXG4gICAgICAoaWQgPT4ge1xuICAgICAgICBjb25zdCBtYXggPSA1O1xuICAgICAgICByZXR1cm4gaCgnZGl2LnNldHRpbmcnLCBbXG4gICAgICAgICAgaCgnbGFiZWwnLCB7IGF0dHJzOiB7ICdmb3InOiBpZCB9IH0sIG5vYXJnKCdtdWx0aXBsZUxpbmVzJykpLFxuICAgICAgICAgIGgoJ2lucHV0IycgKyBpZCwge1xuICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3JhbmdlJyxcbiAgICAgICAgICAgICAgbWluOiAxLFxuICAgICAgICAgICAgICBtYXgsXG4gICAgICAgICAgICAgIHN0ZXA6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBob29rOiByYW5nZUNvbmZpZyhcbiAgICAgICAgICAgICAgKCkgPT4gcGFyc2VJbnQoY2V2YWwhLm11bHRpUHYoKSksXG4gICAgICAgICAgICAgIGN0cmwuY2V2YWxTZXRNdWx0aVB2KVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGgoJ2Rpdi5yYW5nZV92YWx1ZScsIGNldmFsLm11bHRpUHYoKSArICcgLyAnICsgbWF4KVxuICAgICAgICBdKTtcbiAgICAgIH0pKCdhbmFseXNlLW11bHRpcHYnKSxcbiAgICAgIGNldmFsLnRocmVhZHMgPyAoaWQgPT4ge1xuICAgICAgICByZXR1cm4gaCgnZGl2LnNldHRpbmcnLCBbXG4gICAgICAgICAgaCgnbGFiZWwnLCB7IGF0dHJzOiB7ICdmb3InOiBpZCB9IH0sIG5vYXJnKCdjcHVzJykpLFxuICAgICAgICAgIGgoJ2lucHV0IycgKyBpZCwge1xuICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3JhbmdlJyxcbiAgICAgICAgICAgICAgbWluOiAxLFxuICAgICAgICAgICAgICBtYXg6IGNldmFsLm1heFRocmVhZHMsXG4gICAgICAgICAgICAgIHN0ZXA6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBob29rOiByYW5nZUNvbmZpZyhcbiAgICAgICAgICAgICAgKCkgPT4gcGFyc2VJbnQoY2V2YWwudGhyZWFkcyEoKSksXG4gICAgICAgICAgICAgIGN0cmwuY2V2YWxTZXRUaHJlYWRzKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGgoJ2Rpdi5yYW5nZV92YWx1ZScsIGAke2NldmFsLnRocmVhZHMoKX0gLyAke2NldmFsLm1heFRocmVhZHN9YClcbiAgICAgICAgXSk7XG4gICAgICB9KSgnYW5hbHlzZS10aHJlYWRzJykgOiBudWxsLFxuICAgICAgY2V2YWwuaGFzaFNpemUgPyAoaWQgPT4gaCgnZGl2LnNldHRpbmcnLCBbXG4gICAgICAgIGgoJ2xhYmVsJywgeyBhdHRyczogeyAnZm9yJzogaWQgfSB9LCBub2FyZygnbWVtb3J5JykpLFxuICAgICAgICBoKCdpbnB1dCMnICsgaWQsIHtcbiAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogJ3JhbmdlJyxcbiAgICAgICAgICAgIG1pbjogNCxcbiAgICAgICAgICAgIG1heDogTWF0aC5mbG9vcihNYXRoLmxvZzIoY2V2YWwubWF4SGFzaFNpemUpKSxcbiAgICAgICAgICAgIHN0ZXA6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhvb2s6IHJhbmdlQ29uZmlnKFxuICAgICAgICAgICAgKCkgPT4gTWF0aC5mbG9vcihNYXRoLmxvZzIocGFyc2VJbnQoY2V2YWwuaGFzaFNpemUhKCkpKSksXG4gICAgICAgICAgICB2ID0+IGN0cmwuY2V2YWxTZXRIYXNoU2l6ZShNYXRoLnBvdygyLCB2KSkpXG4gICAgICAgIH0pLFxuICAgICAgICBoKCdkaXYucmFuZ2VfdmFsdWUnLCBmb3JtYXRIYXNoU2l6ZShwYXJzZUludChjZXZhbC5oYXNoU2l6ZSgpKSkpXG4gICAgICBdKSkoJ2FuYWx5c2UtbWVtb3J5JykgOiBudWxsXG4gICAgXSA6IFtdKSA6IFtdO1xuXG4gIGNvbnN0IG5vdGF0aW9uQ29uZmlnID0gW1xuICAgIGN0cmxCb29sU2V0dGluZyh7XG4gICAgICBuYW1lOiBub2FyZygnaW5saW5lTm90YXRpb24nKSxcbiAgICAgIHRpdGxlOiAnU2hpZnQrSScsXG4gICAgICBpZDogJ2lubGluZScsXG4gICAgICBjaGVja2VkOiBjdHJsLnRyZWVWaWV3LmlubGluZSgpLFxuICAgICAgY2hhbmdlKHYpIHtcbiAgICAgICAgY3RybC50cmVlVmlldy5zZXQodik7XG4gICAgICAgIGN0cmwuYWN0aW9uTWVudS50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9LCBjdHJsKVxuICBdO1xuXG4gIHJldHVybiBoKCdkaXYuYWN0aW9uLW1lbnUnLFxuICAgIHRvb2xzXG4gICAgLmNvbmNhdChub3RhdGlvbkNvbmZpZylcbiAgICAuY29uY2F0KGNldmFsQ29uZmlnKVxuICAgIC5jb25jYXQoY3RybC5tYWlubGluZS5sZW5ndGggPiA0ID8gW2goJ2gyJywgbm9hcmcoJ3JlcGxheU1vZGUnKSksIGF1dG9wbGF5QnV0dG9ucyhjdHJsKV0gOiBbXSlcbiAgICAuY29uY2F0KFtcbiAgICAgIGRlbGV0ZUJ1dHRvbihjdHJsLCBjdHJsLm9wdHMudXNlcklkKSxcbiAgICAgIGNhbkNvbnRpbnVlID8gaCgnZGl2LmNvbnRpbnVlLXdpdGgubm9uZS5nXycgKyBkLmdhbWUuaWQsIFtcbiAgICAgICAgaCgnYS5idXR0b24nLCB7XG4gICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGhyZWY6IGQudXNlckFuYWx5c2lzID8gJy8/ZmVuPScgKyBjdHJsLmVuY29kZU5vZGVGZW4oKSArICcjYWknIDogY29udFJvdXRlKGQsICdhaScpICsgJz9mZW49JyArIGN0cmwubm9kZS5mZW4sXG4gICAgICAgICAgICByZWw6ICdub2ZvbGxvdydcbiAgICAgICAgICB9XG4gICAgICAgIH0sIG5vYXJnKCdwbGF5V2l0aFRoZU1hY2hpbmUnKSksXG4gICAgICAgIGgoJ2EuYnV0dG9uJywge1xuICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBocmVmOiBkLnVzZXJBbmFseXNpcyA/ICcvP2Zlbj0nICsgY3RybC5lbmNvZGVOb2RlRmVuKCkgKyAnI2ZyaWVuZCcgOiBjb250Um91dGUoZCwgJ2ZyaWVuZCcpICsgJz9mZW49JyArIGN0cmwubm9kZS5mZW4sXG4gICAgICAgICAgICByZWw6ICdub2ZvbGxvdydcbiAgICAgICAgICB9XG4gICAgICAgIH0sIG5vYXJnKCdwbGF5V2l0aEFGcmllbmQnKSlcbiAgICAgIF0pIDogbnVsbFxuICAgIF0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIGN0cmxCb29sU2V0dGluZyhvOiBCb29sU2V0dGluZywgY3RybDogQW5hbHlzZUN0cmwpIHtcbiAgcmV0dXJuIGJvb2xTZXR0aW5nKG8sIGN0cmwudHJhbnMsIGN0cmwucmVkcmF3KTtcbn1cbiIsImltcG9ydCB7IHdpbm5pbmdDaGFuY2VzIH0gZnJvbSAnY2V2YWwnO1xuaW1wb3J0IHsgZGVjb21wb3NlVWNpLCBzYW5Ub1JvbGUgfSBmcm9tICdjaGVzcyc7XG5pbXBvcnQgKiBhcyBjZyBmcm9tICdjaGVzc2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgeyBvcHBvc2l0ZSB9IGZyb20gJ2NoZXNzZ3JvdW5kL3V0aWwnO1xuaW1wb3J0IHsgRHJhd1NoYXBlIH0gZnJvbSAnY2hlc3Nncm91bmQvZHJhdyc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi9jdHJsJztcblxuZnVuY3Rpb24gcGllY2VEcm9wKGtleTogY2cuS2V5LCByb2xlOiBjZy5Sb2xlLCBjb2xvcjogQ29sb3IpOiBEcmF3U2hhcGUge1xuICByZXR1cm4ge1xuICAgIG9yaWc6IGtleSxcbiAgICBwaWVjZToge1xuICAgICAgY29sb3IsXG4gICAgICByb2xlLFxuICAgICAgc2NhbGU6IDAuOFxuICAgIH0sXG4gICAgYnJ1c2g6ICdncmVlbidcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTaGFwZXNGcm9tVWNpKGNvbG9yOiBDb2xvciwgdWNpOiBVY2ksIGJydXNoOiBzdHJpbmcsIG1vZGlmaWVycz86IGFueSk6IERyYXdTaGFwZVtdIHtcbiAgY29uc3QgbW92ZSA9IGRlY29tcG9zZVVjaSh1Y2kpO1xuICBpZiAodWNpWzFdID09PSAnQCcpIHJldHVybiBbXG4gICAge1xuICAgICAgb3JpZzogbW92ZVsxXSxcbiAgICAgIGJydXNoXG4gICAgfSxcbiAgICBwaWVjZURyb3AobW92ZVsxXSBhcyBjZy5LZXksIHNhblRvUm9sZVt1Y2lbMF0udG9VcHBlckNhc2UoKV0sIGNvbG9yKVxuICBdO1xuICBjb25zdCBzaGFwZXM6IERyYXdTaGFwZVtdID0gW3tcbiAgICBvcmlnOiBtb3ZlWzBdLFxuICAgIGRlc3Q6IG1vdmVbMV0sXG4gICAgYnJ1c2gsXG4gICAgbW9kaWZpZXJzXG4gIH1dO1xuICBpZiAobW92ZVsyXSkgc2hhcGVzLnB1c2gocGllY2VEcm9wKG1vdmVbMV0hLCBtb3ZlWzJdIGFzIGNnLlJvbGUsIGNvbG9yKSk7XG4gIHJldHVybiBzaGFwZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlKGN0cmw6IEFuYWx5c2VDdHJsKTogRHJhd1NoYXBlW10ge1xuICBjb25zdCBjb2xvcjogQ29sb3IgPSBjdHJsLmNoZXNzZ3JvdW5kLnN0YXRlLm1vdmFibGUuY29sb3IgYXMgQ29sb3I7XG4gIGNvbnN0IHJjb2xvcjogQ29sb3IgPSBvcHBvc2l0ZShjb2xvcik7XG4gIGlmIChjdHJsLnByYWN0aWNlKSB7XG4gICAgaWYgKGN0cmwucHJhY3RpY2UuaG92ZXJpbmcoKSkgcmV0dXJuIG1ha2VTaGFwZXNGcm9tVWNpKGNvbG9yLCBjdHJsLnByYWN0aWNlLmhvdmVyaW5nKCkudWNpLCAnZ3JlZW4nKTtcbiAgICBjb25zdCBoaW50ID0gY3RybC5wcmFjdGljZS5oaW50aW5nKCk7XG4gICAgaWYgKGhpbnQpIHtcbiAgICAgIGlmIChoaW50Lm1vZGUgPT09ICdtb3ZlJykgcmV0dXJuIG1ha2VTaGFwZXNGcm9tVWNpKGNvbG9yLCBoaW50LnVjaSwgJ3BhbGVCbHVlJyk7XG4gICAgICBlbHNlIHJldHVybiBbe1xuICAgICAgICBvcmlnOiBoaW50LnVjaVsxXSA9PT0gJ0AnID8gaGludC51Y2kuc2xpY2UoMiwgNCkgOiBoaW50LnVjaS5zbGljZSgwLCAyKSxcbiAgICAgICAgYnJ1c2g6ICdwYWxlQmx1ZSdcbiAgICAgIH1dO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgaW5zdGFuY2UgPSBjdHJsLmdldENldmFsKCk7XG4gIGNvbnN0IGhvdmVyaW5nID0gY3RybC5leHBsb3Jlci5ob3ZlcmluZygpIHx8IGluc3RhbmNlLmhvdmVyaW5nKCk7XG4gIGNvbnN0IHtcbiAgICBldmFsOiBuRXZhbCA9IHt9LFxuICAgIGZlbjogbkZlbixcbiAgICBjZXZhbDogbkNldmFsLFxuICAgIHRocmVhdDogblRocmVhdFxuICB9ID0gY3RybC5ub2RlO1xuXG4gIGxldCBzaGFwZXM6IERyYXdTaGFwZVtdID0gW107XG4gIGlmIChjdHJsLnJldHJvICYmIGN0cmwucmV0cm8uc2hvd0JhZE5vZGUoKSkge1xuICAgIHJldHVybiBtYWtlU2hhcGVzRnJvbVVjaShjb2xvciwgY3RybC5yZXRyby5zaG93QmFkTm9kZSgpLnVjaSwgJ3BhbGVSZWQnLCB7XG4gICAgICBsaW5lV2lkdGg6IDhcbiAgICB9KTtcbiAgfVxuICBpZiAoaG92ZXJpbmcgJiYgaG92ZXJpbmcuZmVuID09PSBuRmVuKSBzaGFwZXMgPSBzaGFwZXMuY29uY2F0KG1ha2VTaGFwZXNGcm9tVWNpKGNvbG9yLCBob3ZlcmluZy51Y2ksICdwYWxlQmx1ZScpKTtcbiAgaWYgKGN0cmwuc2hvd0F1dG9TaGFwZXMoKSAmJiBjdHJsLnNob3dDb21wdXRlcigpKSB7XG4gICAgaWYgKG5FdmFsLmJlc3QpIHNoYXBlcyA9IHNoYXBlcy5jb25jYXQobWFrZVNoYXBlc0Zyb21VY2kocmNvbG9yLCBuRXZhbC5iZXN0LCAncGFsZUdyZWVuJykpO1xuICAgIGlmICghaG92ZXJpbmcpIHtcbiAgICAgIGxldCBuZXh0QmVzdCA9IGN0cmwubmV4dE5vZGVCZXN0KCk7XG4gICAgICBpZiAoIW5leHRCZXN0ICYmIGluc3RhbmNlLmVuYWJsZWQoKSAmJiBuQ2V2YWwpIG5leHRCZXN0ID0gbkNldmFsLnB2c1swXS5tb3Zlc1swXTtcbiAgICAgIGlmIChuZXh0QmVzdCkgc2hhcGVzID0gc2hhcGVzLmNvbmNhdChtYWtlU2hhcGVzRnJvbVVjaShjb2xvciwgbmV4dEJlc3QsICdwYWxlQmx1ZScpKTtcbiAgICAgIGlmIChpbnN0YW5jZS5lbmFibGVkKCkgJiYgbkNldmFsICYmIG5DZXZhbC5wdnNbMV0gJiYgIShjdHJsLnRocmVhdE1vZGUoKSAmJiBuVGhyZWF0ICYmIG5UaHJlYXQucHZzLmxlbmd0aCA+IDIpKSB7XG4gICAgICAgIG5DZXZhbC5wdnMuZm9yRWFjaChmdW5jdGlvbihwdikge1xuICAgICAgICAgIGlmIChwdi5tb3Zlc1swXSA9PT0gbmV4dEJlc3QpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBzaGlmdCA9IHdpbm5pbmdDaGFuY2VzLnBvdkRpZmYoY29sb3IsIG5DZXZhbC5wdnNbMF0sIHB2KTtcbiAgICAgICAgICBpZiAoc2hpZnQgPj0gMCAmJiBzaGlmdCA8IDAuMikge1xuICAgICAgICAgICAgc2hhcGVzID0gc2hhcGVzLmNvbmNhdChtYWtlU2hhcGVzRnJvbVVjaShjb2xvciwgcHYubW92ZXNbMF0sICdwYWxlR3JleScsIHtcbiAgICAgICAgICAgICAgbGluZVdpZHRoOiBNYXRoLnJvdW5kKDEyIC0gc2hpZnQgKiA1MCkgLy8gMTIgdG8gMlxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChpbnN0YW5jZS5lbmFibGVkKCkgJiYgY3RybC50aHJlYXRNb2RlKCkgJiYgblRocmVhdCkge1xuICAgIGNvbnN0IFtwdjAsIC4uLnB2MXNdID0gblRocmVhdC5wdnM7XG5cbiAgICBzaGFwZXMgPSBzaGFwZXMuY29uY2F0KG1ha2VTaGFwZXNGcm9tVWNpKHJjb2xvciwgcHYwLm1vdmVzWzBdLFxuICAgICAgcHYxcy5sZW5ndGggPiAwID8gJ3BhbGVSZWQnIDogJ3JlZCcpKTtcblxuICAgIHB2MXMuZm9yRWFjaChmdW5jdGlvbihwdikge1xuICAgICAgY29uc3Qgc2hpZnQgPSB3aW5uaW5nQ2hhbmNlcy5wb3ZEaWZmKHJjb2xvciwgcHYsIHB2MCk7XG4gICAgICBpZiAoc2hpZnQgPj0gMCAmJiBzaGlmdCA8IDAuMikge1xuICAgICAgICBzaGFwZXMgPSBzaGFwZXMuY29uY2F0KG1ha2VTaGFwZXNGcm9tVWNpKHJjb2xvciwgcHYubW92ZXNbMF0sICdwYWxlUmVkJywge1xuICAgICAgICAgIGxpbmVXaWR0aDogTWF0aC5yb3VuZCgxMSAtIHNoaWZ0ICogNDUpIC8vIDExIHRvIDJcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBzaGFwZXM7XG59XG4iLCJpbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi9jdHJsJztcblxuaW1wb3J0ICogYXMgY29udHJvbCBmcm9tICcuL2NvbnRyb2wnO1xuXG5leHBvcnQgdHlwZSBBdXRvcGxheURlbGF5ID0gbnVtYmVyIHwgJ3JlYWx0aW1lJyB8ICdjcGwnO1xuXG5leHBvcnQgY2xhc3MgQXV0b3BsYXkge1xuXG4gIHByaXZhdGUgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIGRlbGF5OiBBdXRvcGxheURlbGF5IHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY3RybDogQW5hbHlzZUN0cmwpIHsgfVxuXG4gIHByaXZhdGUgbW92ZSgpOiBib29sZWFuIHtcbiAgICBpZiAoY29udHJvbC5jYW5Hb0ZvcndhcmQodGhpcy5jdHJsKSkge1xuICAgICAgY29udHJvbC5uZXh0KHRoaXMuY3RybCk7XG4gICAgICB0aGlzLmN0cmwucmVkcmF3KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy5jdHJsLnJlZHJhdygpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgZXZhbFRvQ3Aobm9kZTogVHJlZS5Ob2RlKTogbnVtYmVyIHtcbiAgICBpZiAoIW5vZGUuZXZhbCkgcmV0dXJuIG5vZGUucGx5ICUgMiA/IDk5MCA6IC05OTA7IC8vIGdhbWUgb3ZlclxuICAgIGlmIChub2RlLmV2YWwubWF0ZSkgcmV0dXJuIChub2RlLmV2YWwubWF0ZSA+IDApID8gOTkwIDogLTk5MDtcbiAgICByZXR1cm4gbm9kZS5ldmFsLmNwITtcbiAgfVxuXG4gIHByaXZhdGUgbmV4dERlbGF5KCk6IG51bWJlciB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRlbGF5ID09PSAnc3RyaW5nJyAmJiAhdGhpcy5jdHJsLm9uTWFpbmxpbmUpIHJldHVybiAxNTAwO1xuICAgIGVsc2UgaWYgKHRoaXMuZGVsYXkgPT09ICdyZWFsdGltZScpIHtcbiAgICAgIGlmICh0aGlzLmN0cmwubm9kZS5wbHkgPCAyKSByZXR1cm4gMTAwMDtcbiAgICAgIGNvbnN0IGNlbnRpcyA9IHRoaXMuY3RybC5kYXRhLmdhbWUubW92ZUNlbnRpcztcbiAgICAgIGlmICghY2VudGlzKSByZXR1cm4gMTUwMDtcbiAgICAgIGNvbnN0IHRpbWUgPSBjZW50aXNbdGhpcy5jdHJsLm5vZGUucGx5IC0gdGhpcy5jdHJsLnRyZWUucm9vdC5wbHldO1xuICAgICAgLy8gZXN0aW1hdGUgMTMwbXMgb2YgbGFnIHRvIGltcHJvdmUgcGxheWJhY2suXG4gICAgICByZXR1cm4gdGltZSAqIDEwICsgMTMwIHx8IDIwMDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGVsYXkgPT09ICdjcGwnKSB7XG4gICAgICBjb25zdCBzbG93RG93biA9IDMwO1xuICAgICAgaWYgKHRoaXMuY3RybC5ub2RlLnBseSA+PSB0aGlzLmN0cmwubWFpbmxpbmUubGVuZ3RoIC0gMSkgcmV0dXJuIDA7XG4gICAgICBjb25zdCBjdXJyUGx5Q3AgPSB0aGlzLmV2YWxUb0NwKHRoaXMuY3RybC5ub2RlKTtcbiAgICAgIGNvbnN0IG5leHRQbHlDcCA9IHRoaXMuZXZhbFRvQ3AodGhpcy5jdHJsLm5vZGUuY2hpbGRyZW5bMF0pO1xuICAgICAgcmV0dXJuIE1hdGgubWF4KDUwMCxcbiAgICAgICAgTWF0aC5taW4oMTAwMDAsXG4gICAgICAgICAgTWF0aC5hYnMoY3VyclBseUNwIC0gbmV4dFBseUNwKSAqIHNsb3dEb3duKSk7XG4gICAgfVxuICAgIGVsc2UgcmV0dXJuIHRoaXMuZGVsYXkhO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vdmUoKSkgdGhpcy5zY2hlZHVsZSgpO1xuICAgIH0sIHRoaXMubmV4dERlbGF5KCkpO1xuICB9XG5cbiAgc3RhcnQoZGVsYXk6IEF1dG9wbGF5RGVsYXkpOiB2b2lkIHtcbiAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy5zY2hlZHVsZSgpO1xuICB9XG5cbiAgc3RvcCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgIHRoaXMudGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICB0b2dnbGUoZGVsYXk6IEF1dG9wbGF5RGVsYXkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hY3RpdmUoZGVsYXkpKSB0aGlzLnN0b3AoKTtcbiAgICBlbHNlIHtcbiAgICAgIGlmICghdGhpcy5hY3RpdmUoKSAmJiAhdGhpcy5tb3ZlKCkpIHRoaXMuY3RybC5qdW1wKCcnKTtcbiAgICAgIHRoaXMuc3RhcnQoZGVsYXkpO1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2ZShkZWxheT86IEF1dG9wbGF5RGVsYXkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKCFkZWxheSB8fCBkZWxheSA9PT0gdGhpcy5kZWxheSkgJiYgISF0aGlzLnRpbWVvdXQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFJlZHJhdyB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBiaW5kIH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IGludGVyZmFjZSBCb29sU2V0dGluZyB7XG4gIG5hbWU6IHN0cmluZyxcbiAgdGl0bGU/OiBzdHJpbmcsXG4gIGlkOiBzdHJpbmcsXG4gIGNoZWNrZWQ6IGJvb2xlYW47XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgY2hhbmdlKHY6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYm9vbFNldHRpbmcobzogQm9vbFNldHRpbmcsIHRyYW5zOiBUcmFucywgcmVkcmF3OiBSZWRyYXcpIHtcbiAgY29uc3QgZnVsbElkID0gJ2Fic2V0LScgKyBvLmlkO1xuICByZXR1cm4gaCgnZGl2LnNldHRpbmcuJyArIGZ1bGxJZCwgby50aXRsZSA/IHtcbiAgICBhdHRyczogeyB0aXRsZTogdHJhbnMubm9hcmcoby50aXRsZSkgfVxuICB9IDoge30sIFtcbiAgICBoKCdsYWJlbCcsIHsgYXR0cnM6IHsgJ2Zvcic6IGZ1bGxJZCB9IH0sIHRyYW5zLm5vYXJnKG8ubmFtZSkpLFxuICAgIGgoJ2Rpdi5zd2l0Y2gnLCBbXG4gICAgICBoKCdpbnB1dCMnICsgZnVsbElkICsgJy5jbW4tdG9nZ2xlJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgY2hlY2tlZDogby5jaGVja2VkXG4gICAgICAgIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NoYW5nZScsIGUgPT4gby5jaGFuZ2UoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpLCByZWRyYXcpXG4gICAgICB9KSxcbiAgICAgIGgoJ2xhYmVsJywgeyBhdHRyczogeyAnZm9yJzogZnVsbElkIH0gfSlcbiAgICBdKVxuICBdKTtcbn1cbiIsImltcG9ydCB7IEFuYWx5c2VBcGksIEFuYWx5c2VPcHRzIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IHN0YXJ0IH0gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2ZnOiBBbmFseXNlT3B0cykge1xuICBjb25zdCBsaSA9IHdpbmRvdy5saWNoZXNzLCBkYXRhID0gY2ZnLmRhdGE7XG4gIGxldCBhbmFseXNlOiBBbmFseXNlQXBpO1xuXG4gIGxpLnNvY2tldCA9IGxpLlN0cm9uZ1NvY2tldChcbiAgICBkYXRhLnVybC5zb2NrZXQsXG4gICAgZGF0YS5wbGF5ZXIudmVyc2lvbiwge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBuYW1lOiAnYW5hbHlzZSdcbiAgICAgIH0sXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgdXNlclR2OiBkYXRhLnVzZXJUdiAmJiBkYXRhLnVzZXJUdi5pZFxuICAgICAgfSxcbiAgICAgIHJlY2VpdmU6IGZ1bmN0aW9uKHQsIGQpIHtcbiAgICAgICAgYW5hbHlzZS5zb2NrZXRSZWNlaXZlKHQsIGQpO1xuICAgICAgfSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgfVxuICAgIH0pO1xuICBjZmcuJHNpZGUgPSAkKCcuYW5hbHlzZV9fc2lkZScpLmNsb25lKCk7XG4gIGNmZy4kdW5kZXJib2FyZCA9ICQoJy5hbmFseXNlX191bmRlcmJvYXJkJykuY2xvbmUoKTtcbiAgY2ZnLnRyYW5zID0gbGkudHJhbnMoY2ZnLmkxOG4pO1xuICBjZmcuaW5pdGlhbFBseSA9ICd1cmwnO1xuICBjZmcuc29ja2V0U2VuZCA9IGxpLnNvY2tldC5zZW5kO1xuICBhbmFseXNlID0gc3RhcnQoY2ZnKTtcbn07XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4vY3RybCc7XG5pbXBvcnQgeyBpc0ZpbmlzaGVkIH0gZnJvbSAnLi9zdHVkeS9zdHVkeUNoYXB0ZXJzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVuZGVyQ2xvY2tzKGN0cmw6IEFuYWx5c2VDdHJsKTogW1ZOb2RlLCBWTm9kZV0gfCB1bmRlZmluZWQge1xuICBpZiAoY3RybC5lbWJlZCkgcmV0dXJuO1xuXG4gIGNvbnN0IG5vZGUgPSBjdHJsLm5vZGUsIGNsb2NrID0gbm9kZS5jbG9jaztcbiAgaWYgKCFjbG9jayAmJiBjbG9jayAhPT0gMCkgcmV0dXJuO1xuXG4gIGNvbnN0IHdoaXRlUG92ID0gY3RybC5ib3R0b21Jc1doaXRlKCksXG4gICAgcGFyZW50Q2xvY2sgPSBjdHJsLnRyZWUuZ2V0UGFyZW50Q2xvY2sobm9kZSwgY3RybC5wYXRoKSxcbiAgICBpc1doaXRlVHVybiA9IG5vZGUucGx5ICUgMiA9PT0gMCxcbiAgICBjZW50aXM6IEFycmF5PG51bWJlciB8IHVuZGVmaW5lZD4gPSBbcGFyZW50Q2xvY2ssIGNsb2NrXTtcblxuICBpZiAoIWlzV2hpdGVUdXJuKSBjZW50aXMucmV2ZXJzZSgpO1xuXG4gIGNvbnN0IHN0dWR5ID0gY3RybC5zdHVkeSxcbiAgICByZWxheSA9IHN0dWR5ICYmIHN0dWR5LmRhdGEuY2hhcHRlci5yZWxheTtcbiAgaWYgKHJlbGF5ICYmIHJlbGF5Lmxhc3RNb3ZlQXQgJiYgcmVsYXkucGF0aCA9PT0gY3RybC5wYXRoICYmIGN0cmwucGF0aCAhPT0gJycgJiYgIWlzRmluaXNoZWQoc3R1ZHkhLmRhdGEuY2hhcHRlcikpIHtcbiAgICBjb25zdCBzcGVudCA9IChEYXRlLm5vdygpIC0gcmVsYXkubGFzdE1vdmVBdCkgLyAxMDtcbiAgICBjb25zdCBpID0gaXNXaGl0ZVR1cm4gPyAwIDogMTtcbiAgICBpZiAoY2VudGlzW2ldKSBjZW50aXNbaV0gPSBNYXRoLm1heCgwLCBjZW50aXNbaV0hIC0gc3BlbnQpO1xuICB9XG5cbiAgY29uc3Qgc2hvd1RlbnRocyA9ICFjdHJsLnN0dWR5IHx8ICFjdHJsLnN0dWR5LnJlbGF5O1xuXG4gIHJldHVybiBbXG4gICAgcmVuZGVyQ2xvY2soY2VudGlzWzBdLCBpc1doaXRlVHVybiwgd2hpdGVQb3YgPyAnYm90dG9tJyA6ICd0b3AnLCBzaG93VGVudGhzKSxcbiAgICByZW5kZXJDbG9jayhjZW50aXNbMV0sICFpc1doaXRlVHVybiwgIHdoaXRlUG92ID8gJ3RvcCcgOiAnYm90dG9tJywgc2hvd1RlbnRocylcbiAgXTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2xvY2soY2VudGlzOiBudW1iZXIgfCB1bmRlZmluZWQsIGFjdGl2ZTogYm9vbGVhbiwgY2xzOiBzdHJpbmcsIHNob3dUZW50aHM6IGJvb2xlYW4pOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYuYW5hbHlzZV9fY2xvY2suJyArIGNscywge1xuICAgIGNsYXNzOiB7IGFjdGl2ZSB9LFxuICB9LCBjbG9ja0NvbnRlbnQoY2VudGlzLCBzaG93VGVudGhzKSk7XG59XG5cbmZ1bmN0aW9uIGNsb2NrQ29udGVudChjZW50aXM6IG51bWJlciB8IHVuZGVmaW5lZCwgc2hvd1RlbnRoczogYm9vbGVhbik6IEFycmF5PHN0cmluZyB8IFZOb2RlPiB7XG4gIGlmICghY2VudGlzICYmIGNlbnRpcyAhPT0gMCkgcmV0dXJuIFsnLSddO1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoY2VudGlzICogMTApLFxuICBtaWxsaXMgPSBkYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpLFxuICBzZXAgPSAnOicsXG4gIGJhc2VTdHIgPSBwYWQyKGRhdGUuZ2V0VVRDTWludXRlcygpKSArIHNlcCArIHBhZDIoZGF0ZS5nZXRVVENTZWNvbmRzKCkpO1xuICBpZiAoIXNob3dUZW50aHMgfHwgY2VudGlzID49IDM2MDAwMCkgcmV0dXJuIFtNYXRoLmZsb29yKGNlbnRpcyAvIDM2MDAwMCkgKyBzZXAgKyBiYXNlU3RyXTtcbiAgcmV0dXJuIGNlbnRpcyA+PSA2MDAwID8gW2Jhc2VTdHJdIDogW1xuICAgIGJhc2VTdHIsXG4gICAgaCgndGVudGhzJywgJy4nICsgTWF0aC5mbG9vcihtaWxsaXMgLyAxMDApLnRvU3RyaW5nKCkpXG4gIF07XG59XG5cbmZ1bmN0aW9uIHBhZDIobnVtOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gKG51bSA8IDEwID8gJzAnIDogJycpICsgbnVtO1xufVxuIiwiaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4vY3RybCc7XG5cbmltcG9ydCB7IHBhdGggYXMgdHJlZVBhdGggfSBmcm9tICd0cmVlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbkdvRm9yd2FyZChjdHJsOiBBbmFseXNlQ3RybCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY3RybC5ub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXh0KGN0cmw6IEFuYWx5c2VDdHJsKTogdm9pZCB7XG4gIGNvbnN0IGNoaWxkID0gY3RybC5ub2RlLmNoaWxkcmVuWzBdO1xuICBpZiAoY2hpbGQpIGN0cmwudXNlckp1bXBJZkNhbihjdHJsLnBhdGggKyBjaGlsZC5pZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2KGN0cmw6IEFuYWx5c2VDdHJsKTogdm9pZCB7XG4gIGN0cmwudXNlckp1bXBJZkNhbih0cmVlUGF0aC5pbml0KGN0cmwucGF0aCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGFzdChjdHJsOiBBbmFseXNlQ3RybCk6IHZvaWQge1xuICBjdHJsLnVzZXJKdW1wSWZDYW4odHJlZVBhdGguZnJvbU5vZGVMaXN0KGN0cmwubWFpbmxpbmUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0KGN0cmw6IEFuYWx5c2VDdHJsKTogdm9pZCB7XG4gIGN0cmwudXNlckp1bXAodHJlZVBhdGgucm9vdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnRlclZhcmlhdGlvbihjdHJsOiBBbmFseXNlQ3RybCk6IHZvaWQge1xuICBsZXQgY2hpbGQgPSBjdHJsLm5vZGUuY2hpbGRyZW5bMV07XG4gIGlmIChjaGlsZCkgY3RybC51c2VySnVtcChjdHJsLnBhdGggKyBjaGlsZC5pZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGl0VmFyaWF0aW9uKGN0cmw6IEFuYWx5c2VDdHJsKTogdm9pZCB7XG4gIGlmIChjdHJsLm9uTWFpbmxpbmUpIHJldHVybjtcbiAgbGV0IGZvdW5kLCBwYXRoID0gdHJlZVBhdGgucm9vdDtcbiAgY3RybC5ub2RlTGlzdC5zbGljZSgxLCAtMSkuZm9yRWFjaChmdW5jdGlvbihuOiBUcmVlLk5vZGUpIHtcbiAgICBwYXRoICs9IG4uaWQ7XG4gICAgaWYgKG4uY2hpbGRyZW5bMV0pIGZvdW5kID0gcGF0aDtcbiAgfSk7XG4gIGlmIChmb3VuZCkgY3RybC51c2VySnVtcChmb3VuZCk7XG59XG4iLCJpbXBvcnQgeyBkcmFnTmV3UGllY2UgfSBmcm9tICdjaGVzc2dyb3VuZC9kcmFnJztcbmltcG9ydCB7IHJlYWREcm9wcyB9IGZyb20gJ2NoZXNzJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCAqIGFzIGNnIGZyb20gJ2NoZXNzZ3JvdW5kL3R5cGVzJztcbmltcG9ydCB7IEFwaSBhcyBDaGVzc2dyb3VuZEFwaSB9IGZyb20gJ2NoZXNzZ3JvdW5kL2FwaSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmFnKGN0cmw6IEFuYWx5c2VDdHJsLCBjb2xvcjogQ29sb3IsIGU6IGNnLk1vdWNoRXZlbnQpOiB2b2lkIHtcbiAgaWYgKGUuYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b24gIT09IDApIHJldHVybjsgLy8gb25seSB0b3VjaCBvciBsZWZ0IGNsaWNrXG4gIGlmIChjdHJsLmNoZXNzZ3JvdW5kLnN0YXRlLm1vdmFibGUuY29sb3IgIT09IGNvbG9yKSByZXR1cm47XG4gIGNvbnN0IGVsID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gIGNvbnN0IHJvbGUgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcm9sZScpIGFzIGNnLlJvbGUsXG4gICAgbnVtYmVyID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW5iJyk7XG4gIGlmICghcm9sZSB8fCAhY29sb3IgfHwgbnVtYmVyID09PSAnMCcpIHJldHVybjtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBkcmFnTmV3UGllY2UoY3RybC5jaGVzc2dyb3VuZC5zdGF0ZSwgeyBjb2xvciwgcm9sZSB9LCBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkKGNoZXNzZ3JvdW5kOiBDaGVzc2dyb3VuZEFwaSwgcG9zc2libGVEcm9wczogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCwgcGllY2U6IGNnLlBpZWNlLCBwb3M6IEtleSk6IGJvb2xlYW4ge1xuXG4gIGlmIChwaWVjZS5jb2xvciAhPT0gY2hlc3Nncm91bmQuc3RhdGUubW92YWJsZS5jb2xvcikgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChwaWVjZS5yb2xlID09PSAncGF3bicgJiYgKHBvc1sxXSA9PT0gJzEnIHx8IHBvc1sxXSA9PT0gJzgnKSkgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IGRyb3BzID0gcmVhZERyb3BzKHBvc3NpYmxlRHJvcHMpO1xuXG4gIGlmIChkcm9wcyA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgcmV0dXJuIGRyb3BzLmluY2x1ZGVzKHBvcyk7XG59XG4iLCJpbXBvcnQgeyBkcmFnIH0gZnJvbSAnLi9jcmF6eUN0cmwnO1xuaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgTW91Y2hFdmVudCB9IGZyb20gJ2NoZXNzZ3JvdW5kL3R5cGVzJztcbmltcG9ydCB7IG9uSW5zZXJ0IH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5cbmNvbnN0IGV2ZW50TmFtZXMgPSBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J107XG5jb25zdCBvS2V5cyA9IFsncGF3bicsICdrbmlnaHQnLCAnYmlzaG9wJywgJ3Jvb2snLCAncXVlZW4nXTtcblxudHlwZSBQb3NpdGlvbiA9ICd0b3AnIHwgJ2JvdHRvbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGN0cmw6IEFuYWx5c2VDdHJsLCBjb2xvcjogQ29sb3IsIHBvc2l0aW9uOiBQb3NpdGlvbikge1xuICBpZiAoIWN0cmwubm9kZS5jcmF6eSkgcmV0dXJuO1xuICBjb25zdCBwb2NrZXQgPSBjdHJsLm5vZGUuY3JhenkucG9ja2V0c1tjb2xvciA9PT0gJ3doaXRlJyA/IDAgOiAxXTtcbiAgY29uc3QgZHJvcHBlZCA9IGN0cmwuanVzdERyb3BwZWQ7XG4gIGxldCBjYXB0dXJlZCA9IGN0cmwuanVzdENhcHR1cmVkO1xuICBpZiAoY2FwdHVyZWQpIGNhcHR1cmVkLnJvbGUgPSBjYXB0dXJlZC5wcm9tb3RlZCA/ICdwYXduJyA6IGNhcHR1cmVkLnJvbGU7XG4gIGNvbnN0IGFjdGl2ZUNvbG9yID0gY29sb3IgPT09IGN0cmwudHVybkNvbG9yKCk7XG4gIGNvbnN0IHVzYWJsZSA9ICFjdHJsLmVtYmVkICYmIGFjdGl2ZUNvbG9yO1xuICByZXR1cm4gaChgZGl2LnBvY2tldC5pczJkLnBvY2tldC0ke3Bvc2l0aW9ufS5wb3MtJHtjdHJsLmJvdHRvbUNvbG9yKCl9YCwge1xuICAgIGNsYXNzOiB7IHVzYWJsZSB9LFxuICAgIGhvb2s6IG9uSW5zZXJ0KGVsID0+IHtcbiAgICAgIGlmIChjdHJsLmVtYmVkKSByZXR1cm47XG4gICAgICBldmVudE5hbWVzLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZSA9PiBkcmFnKGN0cmwsIGNvbG9yLCBlIGFzIE1vdWNoRXZlbnQpKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH0sIG9LZXlzLm1hcChyb2xlID0+IHtcbiAgICBsZXQgbmIgPSBwb2NrZXRbcm9sZV0gfHwgMDtcbiAgICBpZiAoYWN0aXZlQ29sb3IpIHtcbiAgICAgIGlmIChkcm9wcGVkID09PSByb2xlKSBuYi0tO1xuICAgICAgaWYgKGNhcHR1cmVkICYmIGNhcHR1cmVkLnJvbGUgPT09IHJvbGUpIG5iKys7XG4gICAgfVxuICAgIHJldHVybiBoKCdkaXYucG9ja2V0LWMxJywgaCgnZGl2LnBvY2tldC1jMicsIGgoJ3BpZWNlLicgKyByb2xlICsgJy4nICsgY29sb3IsIHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgICdkYXRhLXJvbGUnOiByb2xlLFxuICAgICAgICAnZGF0YS1jb2xvcic6IGNvbG9yLFxuICAgICAgICAnZGF0YS1uYic6IG5iXG4gICAgICB9XG4gICAgfSkpKTtcbiAgfSkpO1xufVxuIiwiaW1wb3J0IHsgb3Bwb3NpdGUgfSBmcm9tICdjaGVzc2dyb3VuZC91dGlsJztcbmltcG9ydCB7IHZhcmlhbnRUb1J1bGVzIH0gZnJvbSAnY2hlc3MnO1xuaW1wb3J0IHsgUG9zaXRpb24sIFBvc2l0aW9uRXJyb3IgfSBmcm9tICdjaGVzc29wcy9jaGVzcyc7XG5pbXBvcnQgeyBwYXJzZUZlbiB9IGZyb20gJ2NoZXNzb3BzL2Zlbic7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tICdAYmFkcmFwL3Jlc3VsdCc7XG5pbXBvcnQgeyBzZXR1cFBvc2l0aW9uIH0gZnJvbSAnY2hlc3NvcHMvdmFyaWFudCc7XG5pbXBvcnQgeyBBcGkgYXMgQ2hlc3Nncm91bmRBcGkgfSBmcm9tICdjaGVzc2dyb3VuZC9hcGknO1xuaW1wb3J0IHsgRHJhd1NoYXBlIH0gZnJvbSAnY2hlc3Nncm91bmQvZHJhdyc7XG5pbXBvcnQgKiBhcyBjZyBmcm9tICdjaGVzc2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgeyBDb25maWcgYXMgQ2hlc3Nncm91bmRDb25maWcgfSBmcm9tICdjaGVzc2dyb3VuZC9jb25maWcnO1xuaW1wb3J0IHsgYnVpbGQgYXMgbWFrZVRyZWUsIHBhdGggYXMgdHJlZVBhdGgsIG9wcyBhcyB0cmVlT3BzLCBUcmVlV3JhcHBlciB9IGZyb20gJ3RyZWUnO1xuaW1wb3J0ICogYXMga2V5Ym9hcmQgZnJvbSAnLi9rZXlib2FyZCc7XG5pbXBvcnQgeyBDdHJsIGFzIEFjdGlvbk1lbnVDdHJsIH0gZnJvbSAnLi9hY3Rpb25NZW51JztcbmltcG9ydCB7IEF1dG9wbGF5LCBBdXRvcGxheURlbGF5IH0gZnJvbSAnLi9hdXRvcGxheSc7XG5pbXBvcnQgKiBhcyBwcm9tb3Rpb24gZnJvbSAnLi9wcm9tb3Rpb24nO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnO1xuaW1wb3J0ICogYXMgY2hlc3NVdGlsIGZyb20gJ2NoZXNzJztcbmltcG9ydCB7IGRlZmluZWQsIHByb3AsIFByb3AgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHRocm90dGxlIGZyb20gJ2NvbW1vbi90aHJvdHRsZSc7XG5pbXBvcnQgeyBzdG9yZWRQcm9wLCBTdG9yZWRCb29sZWFuUHJvcCB9IGZyb20gJ2NvbW1vbi9zdG9yYWdlJztcbmltcG9ydCB7IG1ha2UgYXMgbWFrZVNvY2tldCwgU29ja2V0IH0gZnJvbSAnLi9zb2NrZXQnO1xuaW1wb3J0IHsgRm9yZWNhc3RDdHJsIH0gZnJvbSAnLi9mb3JlY2FzdC9pbnRlcmZhY2VzJztcbmltcG9ydCB7IG1ha2UgYXMgbWFrZUZvcmVjYXN0IH0gZnJvbSAnLi9mb3JlY2FzdC9mb3JlY2FzdEN0cmwnO1xuaW1wb3J0IHsgY3RybCBhcyBjZXZhbEN0cmwsIGlzRXZhbEJldHRlciwgQ2V2YWxDdHJsLCBXb3JrIGFzIENldmFsV29yaywgQ2V2YWxPcHRzIH0gZnJvbSAnY2V2YWwnO1xuaW1wb3J0IGV4cGxvcmVyQ3RybCBmcm9tICcuL2V4cGxvcmVyL2V4cGxvcmVyQ3RybCc7XG5pbXBvcnQgeyBFeHBsb3JlckN0cmwgfSBmcm9tICcuL2V4cGxvcmVyL2ludGVyZmFjZXMnO1xuaW1wb3J0ICogYXMgZ2FtZSBmcm9tICdnYW1lJztcbmltcG9ydCB7IHZhbGlkIGFzIGNyYXp5VmFsaWQgfSBmcm9tICcuL2NyYXp5L2NyYXp5Q3RybCc7XG5pbXBvcnQgbWFrZVN0dWR5IGZyb20gJy4vc3R1ZHkvc3R1ZHlDdHJsJztcbmltcG9ydCB7IFN0dWR5Q3RybCB9IGZyb20gJy4vc3R1ZHkvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTdHVkeVByYWN0aWNlQ3RybCB9IGZyb20gJy4vc3R1ZHkvcHJhY3RpY2UvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBtYWtlIGFzIG1ha2VGb3JrLCBGb3JrQ3RybCB9IGZyb20gJy4vZm9yayc7XG5pbXBvcnQgeyBtYWtlIGFzIG1ha2VSZXRybywgUmV0cm9DdHJsIH0gZnJvbSAnLi9yZXRyb3NwZWN0L3JldHJvQ3RybCc7XG5pbXBvcnQgeyBtYWtlIGFzIG1ha2VQcmFjdGljZSwgUHJhY3RpY2VDdHJsIH0gZnJvbSAnLi9wcmFjdGljZS9wcmFjdGljZUN0cmwnO1xuaW1wb3J0IHsgbWFrZSBhcyBtYWtlRXZhbENhY2hlLCBFdmFsQ2FjaGUgfSBmcm9tICcuL2V2YWxDYWNoZSc7XG5pbXBvcnQgeyBjb21wdXRlIGFzIGNvbXB1dGVBdXRvU2hhcGVzIH0gZnJvbSAnLi9hdXRvU2hhcGUnO1xuaW1wb3J0IHsgbmV4dEdseXBoU3ltYm9sIH0gZnJvbSAnLi9ub2RlRmluZGVyJztcbmltcG9ydCAqIGFzIHNwZWVjaCBmcm9tICcuL3NwZWVjaCc7XG5pbXBvcnQgeyBBbmFseXNlT3B0cywgQW5hbHlzZURhdGEsIFNlcnZlckV2YWxEYXRhLCBLZXksIENnRGVzdHMsIEp1c3RDYXB0dXJlZCwgTnZ1aVBsdWdpbiwgUmVkcmF3IH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCBHYW1lYm9va1BsYXlDdHJsIGZyb20gJy4vc3R1ZHkvZ2FtZWJvb2svZ2FtZWJvb2tQbGF5Q3RybCc7XG5pbXBvcnQgeyBjdHJsIGFzIHRyZWVWaWV3Q3RybCwgVHJlZVZpZXcgfSBmcm9tICcuL3RyZWVWaWV3L3RyZWVWaWV3JztcblxuY29uc3QgbGkgPSB3aW5kb3cubGljaGVzcztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5hbHlzZUN0cmwge1xuXG4gIGRhdGE6IEFuYWx5c2VEYXRhO1xuICBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICB0cmVlOiBUcmVlV3JhcHBlcjtcbiAgc29ja2V0OiBTb2NrZXQ7XG4gIGNoZXNzZ3JvdW5kOiBDaGVzc2dyb3VuZEFwaTtcbiAgdHJhbnM6IFRyYW5zO1xuICBjZXZhbDogQ2V2YWxDdHJsO1xuICBldmFsQ2FjaGU6IEV2YWxDYWNoZTtcblxuICAvLyBjdXJyZW50IHRyZWUgc3RhdGUsIGN1cnNvciwgYW5kIGRlbm9ybWFsaXplZCBub2RlIGxpc3RzXG4gIHBhdGg6IFRyZWUuUGF0aDtcbiAgbm9kZTogVHJlZS5Ob2RlO1xuICBub2RlTGlzdDogVHJlZS5Ob2RlW107XG4gIG1haW5saW5lOiBUcmVlLk5vZGVbXTtcblxuICAvLyBzdWIgY29udHJvbGxlcnNcbiAgYWN0aW9uTWVudTogQWN0aW9uTWVudUN0cmw7XG4gIGF1dG9wbGF5OiBBdXRvcGxheTtcbiAgZXhwbG9yZXI6IEV4cGxvcmVyQ3RybDtcbiAgZm9yZWNhc3Q/OiBGb3JlY2FzdEN0cmw7XG4gIHJldHJvPzogUmV0cm9DdHJsO1xuICBmb3JrOiBGb3JrQ3RybDtcbiAgcHJhY3RpY2U/OiBQcmFjdGljZUN0cmw7XG4gIHN0dWR5PzogU3R1ZHlDdHJsO1xuICBzdHVkeVByYWN0aWNlPzogU3R1ZHlQcmFjdGljZUN0cmw7XG5cbiAgLy8gc3RhdGUgZmxhZ3NcbiAganVzdFBsYXllZD86IHN0cmluZzsgLy8gcG9zXG4gIGp1c3REcm9wcGVkPzogc3RyaW5nOyAvLyByb2xlXG4gIGp1c3RDYXB0dXJlZD86IEp1c3RDYXB0dXJlZDtcbiAgYXV0b1Njcm9sbFJlcXVlc3RlZDogYm9vbGVhbiA9IGZhbHNlO1xuICByZWRpcmVjdGluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBvbk1haW5saW5lOiBib29sZWFuID0gdHJ1ZTtcbiAgc3ludGhldGljOiBib29sZWFuOyAvLyBmYWxzZSBpZiBjb21pbmcgZnJvbSBhIHJlYWwgZ2FtZVxuICBvbmdvaW5nOiBib29sZWFuOyAvLyB0cnVlIGlmIHJlYWwgZ2FtZSBpcyBvbmdvaW5nXG5cbiAgLy8gZGlzcGxheSBmbGFnc1xuICBmbGlwcGVkOiBib29sZWFuID0gZmFsc2U7XG4gIGVtYmVkOiBib29sZWFuO1xuICBzaG93Q29tbWVudHM6IGJvb2xlYW4gPSB0cnVlOyAvLyB3aGV0aGVyIHRvIGRpc3BsYXkgY29tbWVudHMgaW4gdGhlIG1vdmUgdHJlZVxuICBzaG93QXV0b1NoYXBlczogU3RvcmVkQm9vbGVhblByb3AgPSBzdG9yZWRQcm9wKCdzaG93LWF1dG8tc2hhcGVzJywgdHJ1ZSk7XG4gIHNob3dHYXVnZTogU3RvcmVkQm9vbGVhblByb3AgPSBzdG9yZWRQcm9wKCdzaG93LWdhdWdlJywgdHJ1ZSk7XG4gIHNob3dDb21wdXRlcjogU3RvcmVkQm9vbGVhblByb3AgPSBzdG9yZWRQcm9wKCdzaG93LWNvbXB1dGVyJywgdHJ1ZSk7XG4gIGtleWJvYXJkSGVscDogYm9vbGVhbiA9IGxvY2F0aW9uLmhhc2ggPT09ICcja2V5Ym9hcmQnO1xuICB0aHJlYXRNb2RlOiBQcm9wPGJvb2xlYW4+ID0gcHJvcChmYWxzZSk7XG4gIHRyZWVWaWV3OiBUcmVlVmlldztcbiAgY2dWZXJzaW9uID0ge1xuICAgIGpzOiAxLCAvLyBpbmNyZW1lbnQgdG8gcmVjcmVhdGUgY2hlc3Nncm91bmRcbiAgICBkb206IDFcbiAgfTtcblxuICAvLyBvdGhlciBwYXRoc1xuICBpbml0aWFsUGF0aDogVHJlZS5QYXRoO1xuICBjb250ZXh0TWVudVBhdGg/OiBUcmVlLlBhdGg7XG4gIGdhbWVQYXRoPzogVHJlZS5QYXRoO1xuXG4gIC8vIG1pc2NcbiAgY2dDb25maWc6IGFueTsgLy8gbGF0ZXN0IGNoZXNzZ3JvdW5kIGNvbmZpZyAodXNlZnVsIGZvciByZXZlcnQpXG4gIG11c2ljPzogYW55O1xuICBudnVpPzogTnZ1aVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihyZWFkb25seSBvcHRzOiBBbmFseXNlT3B0cywgcmVhZG9ubHkgcmVkcmF3OiBSZWRyYXcpIHtcblxuICAgIHRoaXMuZGF0YSA9IG9wdHMuZGF0YTtcbiAgICB0aGlzLmVsZW1lbnQgPSBvcHRzLmVsZW1lbnQ7XG4gICAgdGhpcy5lbWJlZCA9IG9wdHMuZW1iZWQ7XG4gICAgdGhpcy50cmFucyA9IG9wdHMudHJhbnM7XG4gICAgdGhpcy50cmVlVmlldyA9IHRyZWVWaWV3Q3RybChvcHRzLmVtYmVkID8gJ2lubGluZScgOiAnY29sdW1uJyk7XG5cbiAgICBpZiAodGhpcy5kYXRhLmZvcmVjYXN0KSB0aGlzLmZvcmVjYXN0ID0gbWFrZUZvcmVjYXN0KHRoaXMuZGF0YS5mb3JlY2FzdCwgdGhpcy5kYXRhLCByZWRyYXcpO1xuXG4gICAgaWYgKGxpLkFuYWx5c2VOVlVJKSB0aGlzLm52dWkgPSBsaS5BbmFseXNlTlZVSShyZWRyYXcpIGFzIE52dWlQbHVnaW47XG5cbiAgICB0aGlzLmluc3RhbmNpYXRlRXZhbENhY2hlKCk7XG5cbiAgICB0aGlzLmluaXRpYWxpemUodGhpcy5kYXRhLCBmYWxzZSk7XG5cbiAgICB0aGlzLmluc3RhbmNpYXRlQ2V2YWwoKTtcblxuICAgIHRoaXMuaW5pdGlhbFBhdGggPSB0cmVlUGF0aC5yb290O1xuXG4gICAgaWYgKG9wdHMuaW5pdGlhbFBseSkge1xuICAgICAgY29uc3QgbG9jID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBpbnRIYXNoID0gbG9jLmhhc2ggPT09ICcjbGFzdCcgPyB0aGlzLnRyZWUubGFzdFBseSgpIDogcGFyc2VJbnQobG9jLmhhc2guc3Vic3RyKDEpKSxcbiAgICAgICAgcGx5U3RyID0gb3B0cy5pbml0aWFsUGx5ID09PSAndXJsJyA/IChpbnRIYXNoIHx8ICcnKSA6IG9wdHMuaW5pdGlhbFBseTtcbiAgICAgIC8vIHJlbW92ZSBsb2NhdGlvbiBoYXNoIC0gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMzk3MzI5L2hvdy10by1yZW1vdmUtdGhlLWhhc2gtZnJvbS13aW5kb3ctbG9jYXRpb24td2l0aC1qYXZhc2NyaXB0LXdpdGhvdXQtcGFnZS1yZWZyZXNoLzUyOTg2ODQjNTI5ODY4NFxuICAgICAgaWYgKGludEhhc2gpIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcIlwiLCBkb2N1bWVudC50aXRsZSwgbG9jLnBhdGhuYW1lICsgbG9jLnNlYXJjaCk7XG4gICAgICBjb25zdCBtYWlubGluZSA9IHRyZWVPcHMubWFpbmxpbmVOb2RlTGlzdCh0aGlzLnRyZWUucm9vdCk7XG4gICAgICBpZiAocGx5U3RyID09PSAnbGFzdCcpIHRoaXMuaW5pdGlhbFBhdGggPSB0cmVlUGF0aC5mcm9tTm9kZUxpc3QobWFpbmxpbmUpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHBseSA9IHBhcnNlSW50KHBseVN0ciBhcyBzdHJpbmcpO1xuICAgICAgICBpZiAocGx5KSB0aGlzLmluaXRpYWxQYXRoID0gdHJlZU9wcy50YWtlUGF0aFdoaWxlKG1haW5saW5lLCBuID0+IG4ucGx5IDw9IHBseSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRQYXRoKHRoaXMuaW5pdGlhbFBhdGgpO1xuXG4gICAgdGhpcy5zaG93R3JvdW5kKCk7XG4gICAgdGhpcy5vblRvZ2dsZUNvbXB1dGVyKCk7XG4gICAgdGhpcy5zdGFydENldmFsKCk7XG4gICAgdGhpcy5leHBsb3Jlci5zZXROb2RlKCk7XG4gICAgdGhpcy5zdHVkeSA9IG9wdHMuc3R1ZHkgPyBtYWtlU3R1ZHkob3B0cy5zdHVkeSwgdGhpcywgKG9wdHMudGFnVHlwZXMgfHwgJycpLnNwbGl0KCcsJyksIG9wdHMucHJhY3RpY2UsIG9wdHMucmVsYXkpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuc3R1ZHlQcmFjdGljZSA9IHRoaXMuc3R1ZHkgPyB0aGlzLnN0dWR5LnByYWN0aWNlIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09ICcjcHJhY3RpY2UnIHx8ICh0aGlzLnN0dWR5ICYmIHRoaXMuc3R1ZHkuZGF0YS5jaGFwdGVyLnByYWN0aWNlKSkgdGhpcy50b2dnbGVQcmFjdGljZSgpO1xuICAgIGVsc2UgaWYgKGxvY2F0aW9uLmhhc2ggPT09ICcjbWVudScpIGxpLnJlcXVlc3RJZGxlQ2FsbGJhY2sodGhpcy5hY3Rpb25NZW51LnRvZ2dsZSk7XG5cbiAgICBrZXlib2FyZC5iaW5kKHRoaXMpO1xuXG4gICAgbGkucHVic3ViLm9uKCdqdW1wJywgKHBseTogYW55KSA9PiB7XG4gICAgICB0aGlzLmp1bXBUb01haW4ocGFyc2VJbnQocGx5KSk7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH0pO1xuXG4gICAgbGkucHVic3ViLm9uKCdzb3VuZF9zZXQnLCAoc2V0OiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICghdGhpcy5tdXNpYyAmJiBzZXQgPT09ICdtdXNpYycpXG4gICAgICAgIGxpLmxvYWRTY3JpcHQoJ2phdmFzY3JpcHRzL211c2ljL3JlcGxheS5qcycpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMubXVzaWMgPSB3aW5kb3cubGljaGVzc1JlcGxheU11c2ljKCk7XG4gICAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMubXVzaWMgJiYgc2V0ICE9PSAnbXVzaWMnKSB0aGlzLm11c2ljID0gbnVsbDtcbiAgICB9KTtcblxuICAgIGxpLnB1YnN1Yi5vbignYW5hbHlzaXMuY2hhbmdlLnRyaWdnZXInLCB0aGlzLm9uQ2hhbmdlKTtcbiAgICBsaS5wdWJzdWIub24oJ2FuYWx5c2lzLmNoYXJ0LmNsaWNrJywgaW5kZXggPT4ge1xuICAgICAgdGhpcy5qdW1wVG9JbmRleChpbmRleCk7XG4gICAgICB0aGlzLnJlZHJhdygpXG4gICAgfSk7XG5cbiAgICBsaS5zb3VuZCAmJiBzcGVlY2guc2V0dXAoKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoZGF0YTogQW5hbHlzZURhdGEsIG1lcmdlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnN5bnRoZXRpYyA9IGRhdGEuZ2FtZS5pZCA9PT0gJ3N5bnRoZXRpYyc7XG4gICAgdGhpcy5vbmdvaW5nID0gIXRoaXMuc3ludGhldGljICYmIGdhbWUucGxheWFibGUoZGF0YSk7XG5cbiAgICBjb25zdCBwcmV2VHJlZSA9IG1lcmdlICYmIHRoaXMudHJlZS5yb290O1xuICAgIHRoaXMudHJlZSA9IG1ha2VUcmVlKHRyZWVPcHMucmVjb25zdHJ1Y3QodGhpcy5kYXRhLnRyZWVQYXJ0cykpO1xuICAgIGlmIChwcmV2VHJlZSkgdGhpcy50cmVlLm1lcmdlKHByZXZUcmVlKTtcblxuICAgIHRoaXMuYWN0aW9uTWVudSA9IG5ldyBBY3Rpb25NZW51Q3RybCgpO1xuICAgIHRoaXMuYXV0b3BsYXkgPSBuZXcgQXV0b3BsYXkodGhpcyk7XG4gICAgaWYgKHRoaXMuc29ja2V0KSB0aGlzLnNvY2tldC5jbGVhckNhY2hlKCk7XG4gICAgZWxzZSB0aGlzLnNvY2tldCA9IG1ha2VTb2NrZXQodGhpcy5vcHRzLnNvY2tldFNlbmQsIHRoaXMpO1xuICAgIHRoaXMuZXhwbG9yZXIgPSBleHBsb3JlckN0cmwodGhpcywgdGhpcy5vcHRzLmV4cGxvcmVyLCB0aGlzLmV4cGxvcmVyID8gdGhpcy5leHBsb3Jlci5hbGxvd2VkKCkgOiAhdGhpcy5lbWJlZCk7XG4gICAgdGhpcy5nYW1lUGF0aCA9IHRoaXMuc3ludGhldGljIHx8IHRoaXMub25nb2luZyA/IHVuZGVmaW5lZCA6XG4gICAgdHJlZVBhdGguZnJvbU5vZGVMaXN0KHRyZWVPcHMubWFpbmxpbmVOb2RlTGlzdCh0aGlzLnRyZWUucm9vdCkpO1xuICAgIHRoaXMuZm9yayA9IG1ha2VGb3JrKHRoaXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRQYXRoID0gKHBhdGg6IFRyZWUuUGF0aCk6IHZvaWQgPT4ge1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy5ub2RlTGlzdCA9IHRoaXMudHJlZS5nZXROb2RlTGlzdChwYXRoKTtcbiAgICB0aGlzLm5vZGUgPSB0cmVlT3BzLmxhc3QodGhpcy5ub2RlTGlzdCkgYXMgVHJlZS5Ob2RlO1xuICAgIHRoaXMubWFpbmxpbmUgPSB0cmVlT3BzLm1haW5saW5lTm9kZUxpc3QodGhpcy50cmVlLnJvb3QpO1xuICAgIHRoaXMub25NYWlubGluZSA9IHRoaXMudHJlZS5wYXRoSXNNYWlubGluZShwYXRoKVxuICB9XG5cbiAgZmxpcCA9ICgpID0+IHtcbiAgICB0aGlzLmZsaXBwZWQgPSAhdGhpcy5mbGlwcGVkO1xuICAgIHRoaXMuY2hlc3Nncm91bmQuc2V0KHtcbiAgICAgIG9yaWVudGF0aW9uOiB0aGlzLmJvdHRvbUNvbG9yKClcbiAgICB9KTtcbiAgICBpZiAodGhpcy5yZXRybykge1xuICAgICAgdGhpcy5yZXRybyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMudG9nZ2xlUmV0cm8oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJhY3RpY2UpIHRoaXMucmVzdGFydFByYWN0aWNlKCk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxuXG4gIHRvcENvbG9yKCk6IENvbG9yIHtcbiAgICByZXR1cm4gb3Bwb3NpdGUodGhpcy5ib3R0b21Db2xvcigpKTtcbiAgfVxuXG4gIGJvdHRvbUNvbG9yKCk6IENvbG9yIHtcbiAgICByZXR1cm4gdGhpcy5mbGlwcGVkID8gb3Bwb3NpdGUodGhpcy5kYXRhLm9yaWVudGF0aW9uKSA6IHRoaXMuZGF0YS5vcmllbnRhdGlvbjtcbiAgfVxuXG4gIGJvdHRvbUlzV2hpdGUgPSAoKSA9PiB0aGlzLmJvdHRvbUNvbG9yKCkgPT09ICd3aGl0ZSc7XG5cbiAgZ2V0T3JpZW50YXRpb24oKTogQ29sb3IgeyAvLyByZXF1aXJlZCBieSB1aS9jZXZhbFxuICAgIHJldHVybiB0aGlzLmJvdHRvbUNvbG9yKCk7XG4gIH1cbiAgZ2V0Tm9kZSgpOiBUcmVlLk5vZGUgeyAvLyByZXF1aXJlZCBieSB1aS9jZXZhbFxuICAgIHJldHVybiB0aGlzLm5vZGU7XG4gIH1cblxuICB0dXJuQ29sb3IoKTogQ29sb3Ige1xuICAgIHJldHVybiB1dGlsLnBseUNvbG9yKHRoaXMubm9kZS5wbHkpO1xuICB9XG5cbiAgdG9nZ2xlUGxheShkZWxheTogQXV0b3BsYXlEZWxheSk6IHZvaWQge1xuICAgIHRoaXMuYXV0b3BsYXkudG9nZ2xlKGRlbGF5KTtcbiAgICB0aGlzLmFjdGlvbk1lbnUub3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1Y2lUb0xhc3RNb3ZlKHVjaT86IFVjaSk6IEtleVtdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXVjaSkgcmV0dXJuO1xuICAgIGlmICh1Y2lbMV0gPT09ICdAJykgcmV0dXJuIFt1Y2kuc3Vic3RyKDIsIDIpLCB1Y2kuc3Vic3RyKDIsIDIpXSBhcyBLZXlbXTtcbiAgICByZXR1cm4gW3VjaS5zdWJzdHIoMCwgMiksIHVjaS5zdWJzdHIoMiwgMildIGFzIEtleVtdO1xuICB9O1xuXG4gIHByaXZhdGUgc2hvd0dyb3VuZCgpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlKCk7XG4gICAgaWYgKCFkZWZpbmVkKHRoaXMubm9kZS5kZXN0cykpIHRoaXMuZ2V0RGVzdHMoKTtcbiAgICB0aGlzLndpdGhDZyhjZyA9PiB7XG4gICAgICBjZy5zZXQodGhpcy5tYWtlQ2dPcHRzKCkpO1xuICAgICAgdGhpcy5zZXRBdXRvU2hhcGVzKCk7XG4gICAgICBpZiAodGhpcy5ub2RlLnNoYXBlcykgY2cuc2V0U2hhcGVzKHRoaXMubm9kZS5zaGFwZXMgYXMgRHJhd1NoYXBlW10pO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RGVzdHM6ICgpID0+IHZvaWQgPSB0aHJvdHRsZSg4MDAsICgpID0+IHtcbiAgICBpZiAoIXRoaXMuZW1iZWQgJiYgIWRlZmluZWQodGhpcy5ub2RlLmRlc3RzKSkgdGhpcy5zb2NrZXQuc2VuZEFuYURlc3RzKHtcbiAgICAgIHZhcmlhbnQ6IHRoaXMuZGF0YS5nYW1lLnZhcmlhbnQua2V5LFxuICAgICAgZmVuOiB0aGlzLm5vZGUuZmVuLFxuICAgICAgcGF0aDogdGhpcy5wYXRoXG4gICAgfSk7XG4gIH0pO1xuXG4gIG1ha2VDZ09wdHMoKTogQ2hlc3Nncm91bmRDb25maWcge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGUsXG4gICAgICBjb2xvciA9IHRoaXMudHVybkNvbG9yKCksXG4gICAgICBkZXN0cyA9IGNoZXNzVXRpbC5yZWFkRGVzdHModGhpcy5ub2RlLmRlc3RzKSxcbiAgICAgIGRyb3BzID0gY2hlc3NVdGlsLnJlYWREcm9wcyh0aGlzLm5vZGUuZHJvcHMpLFxuICAgICAgbW92YWJsZUNvbG9yID0gKHRoaXMucHJhY3RpY2UgfHwgdGhpcy5nYW1lYm9va1BsYXkoKSkgPyB0aGlzLmJvdHRvbUNvbG9yKCkgOiAoXG4gICAgICAgICF0aGlzLmVtYmVkICYmIChcbiAgICAgICAgICAoZGVzdHMgJiYgT2JqZWN0LmtleXMoZGVzdHMpLmxlbmd0aCA+IDApIHx8XG4gICAgICAgICAgZHJvcHMgPT09IG51bGwgfHwgZHJvcHMubGVuZ3RoXG4gICAgICAgICkgPyBjb2xvciA6IHVuZGVmaW5lZCksXG4gICAgICBjb25maWc6IENoZXNzZ3JvdW5kQ29uZmlnID0ge1xuICAgICAgICBmZW46IG5vZGUuZmVuLFxuICAgICAgICB0dXJuQ29sb3I6IGNvbG9yLFxuICAgICAgICBtb3ZhYmxlOiB0aGlzLmVtYmVkID8ge1xuICAgICAgICAgIGNvbG9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgZGVzdHM6IHt9IGFzIENnRGVzdHNcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICBjb2xvcjogbW92YWJsZUNvbG9yLFxuICAgICAgICAgIGRlc3RzOiAobW92YWJsZUNvbG9yID09PSBjb2xvciA/IChkZXN0cyB8fCB7fSkgOiB7fSkgYXMgQ2dEZXN0c1xuICAgICAgICB9LFxuICAgICAgICBjaGVjazogISFub2RlLmNoZWNrLFxuICAgICAgICBsYXN0TW92ZTogdGhpcy51Y2lUb0xhc3RNb3ZlKG5vZGUudWNpKVxuICAgICAgfTtcbiAgICBpZiAoIWRlc3RzICYmICFub2RlLmNoZWNrKSB7XG4gICAgICAvLyBwcmVtb3ZlIHdoaWxlIGRlc3RzIGFyZSBsb2FkaW5nIGZyb20gc2VydmVyXG4gICAgICAvLyBjYW4ndCB1c2Ugd2hlbiBpbiBjaGVjayBiZWNhdXNlIGl0IGhpZ2hsaWdodHMgdGhlIHdyb25nIGtpbmdcbiAgICAgIGNvbmZpZy50dXJuQ29sb3IgPSBvcHBvc2l0ZShjb2xvcik7XG4gICAgICBjb25maWcubW92YWJsZSEuY29sb3IgPSBjb2xvcjtcbiAgICB9XG4gICAgY29uZmlnLnByZW1vdmFibGUgPSB7XG4gICAgICBlbmFibGVkOiBjb25maWcubW92YWJsZSEuY29sb3IgJiYgY29uZmlnLnR1cm5Db2xvciAhPT0gY29uZmlnLm1vdmFibGUhLmNvbG9yXG4gICAgfTtcbiAgICB0aGlzLmNnQ29uZmlnID0gY29uZmlnO1xuICAgIHJldHVybiBjb25maWc7XG4gIH1cblxuICBwcml2YXRlIHNvdW5kID0gbGkuc291bmQgPyB7XG4gICAgbW92ZTogdGhyb3R0bGUoNTAsIGxpLnNvdW5kLm1vdmUpLFxuICAgIGNhcHR1cmU6IHRocm90dGxlKDUwLCBsaS5zb3VuZC5jYXB0dXJlKSxcbiAgICBjaGVjazogdGhyb3R0bGUoNTAsIGxpLnNvdW5kLmNoZWNrKVxuICB9IDoge1xuICAgIG1vdmU6ICQubm9vcCxcbiAgICBjYXB0dXJlOiAkLm5vb3AsXG4gICAgY2hlY2s6ICQubm9vcFxuICB9O1xuXG4gIHByaXZhdGUgb25DaGFuZ2U6ICgpID0+IHZvaWQgPSB0aHJvdHRsZSgzMDAsICgpID0+IHtcbiAgICBsaS5wdWJzdWIuZW1pdCgnYW5hbHlzaXMuY2hhbmdlJywgdGhpcy5ub2RlLmZlbiwgdGhpcy5wYXRoLCB0aGlzLm9uTWFpbmxpbmUgPyB0aGlzLm5vZGUucGx5IDogZmFsc2UpO1xuICB9KTtcblxuICBwcml2YXRlIHVwZGF0ZUhyZWY6ICgpID0+IHZvaWQgPSBsaS5kZWJvdW5jZSgoKSA9PiB7XG4gICAgaWYgKCF0aGlzLm9wdHMuc3R1ZHkpIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgJyMnICsgdGhpcy5ub2RlLnBseSk7XG4gIH0sIDc1MCk7XG5cbiAgYXV0b1Njcm9sbCgpOiB2b2lkIHtcbiAgICB0aGlzLmF1dG9TY3JvbGxSZXF1ZXN0ZWQgPSB0cnVlO1xuICB9XG5cbiAgcGxheWVkTGFzdE1vdmVNeXNlbGYgPSAoKSA9PlxuICAgICEhdGhpcy5qdXN0UGxheWVkICYmICEhdGhpcy5ub2RlLnVjaSAmJiB0aGlzLm5vZGUudWNpLnN0YXJ0c1dpdGgodGhpcy5qdXN0UGxheWVkKTtcblxuICBqdW1wKHBhdGg6IFRyZWUuUGF0aCk6IHZvaWQge1xuICAgIGNvbnN0IHBhdGhDaGFuZ2VkID0gcGF0aCAhPT0gdGhpcy5wYXRoLFxuICAgIGlzRm9yd2FyZFN0ZXAgPSBwYXRoQ2hhbmdlZCAmJiBwYXRoLmxlbmd0aCA9PSB0aGlzLnBhdGgubGVuZ3RoICsgMjtcbiAgICB0aGlzLnNldFBhdGgocGF0aCk7XG4gICAgdGhpcy5zaG93R3JvdW5kKCk7XG4gICAgaWYgKHBhdGhDaGFuZ2VkKSB7XG4gICAgICBjb25zdCBwbGF5ZWRNeXNlbGYgPSB0aGlzLnBsYXllZExhc3RNb3ZlTXlzZWxmKCk7XG4gICAgICBpZiAodGhpcy5zdHVkeSkgdGhpcy5zdHVkeS5zZXRQYXRoKHBhdGgsIHRoaXMubm9kZSwgcGxheWVkTXlzZWxmKTtcbiAgICAgIGlmIChpc0ZvcndhcmRTdGVwKSB7XG4gICAgICAgIGlmICghdGhpcy5ub2RlLnVjaSkgdGhpcy5zb3VuZC5tb3ZlKCk7IC8vIGluaXRpYWwgcG9zaXRpb25cbiAgICAgICAgZWxzZSBpZiAoIXBsYXllZE15c2VsZikge1xuICAgICAgICAgIGlmICh0aGlzLm5vZGUuc2FuIS5pbmNsdWRlcygneCcpKSB0aGlzLnNvdW5kLmNhcHR1cmUoKTtcbiAgICAgICAgICBlbHNlIHRoaXMuc291bmQubW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgvXFwrfFxcIy8udGVzdCh0aGlzLm5vZGUuc2FuISkpIHRoaXMuc291bmQuY2hlY2soKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGhyZWF0TW9kZShmYWxzZSk7XG4gICAgICB0aGlzLmNldmFsLnN0b3AoKTtcbiAgICAgIHRoaXMuc3RhcnRDZXZhbCgpO1xuICAgICAgc3BlZWNoLm5vZGUodGhpcy5ub2RlKTtcbiAgICB9XG4gICAgdGhpcy5qdXN0UGxheWVkID0gdGhpcy5qdXN0RHJvcHBlZCA9IHRoaXMuanVzdENhcHR1cmVkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZXhwbG9yZXIuc2V0Tm9kZSgpO1xuICAgIHRoaXMudXBkYXRlSHJlZigpO1xuICAgIHRoaXMuYXV0b1Njcm9sbCgpO1xuICAgIHByb21vdGlvbi5jYW5jZWwodGhpcyk7XG4gICAgaWYgKHBhdGhDaGFuZ2VkKSB7XG4gICAgICBpZiAodGhpcy5yZXRybykgdGhpcy5yZXRyby5vbkp1bXAoKTtcbiAgICAgIGlmICh0aGlzLnByYWN0aWNlKSB0aGlzLnByYWN0aWNlLm9uSnVtcCgpO1xuICAgICAgaWYgKHRoaXMuc3R1ZHkpIHRoaXMuc3R1ZHkub25KdW1wKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm11c2ljKSB0aGlzLm11c2ljLmp1bXAodGhpcy5ub2RlKTtcbiAgICBsaS5wdWJzdWIuZW1pdCgncGx5JywgdGhpcy5ub2RlLnBseSk7XG4gIH1cblxuICB1c2VySnVtcCA9IChwYXRoOiBUcmVlLlBhdGgpOiB2b2lkID0+IHtcblxuICAgIHRoaXMuYXV0b3BsYXkuc3RvcCgpO1xuICAgIHRoaXMud2l0aENnKGNnID0+IGNnLnNlbGVjdFNxdWFyZShudWxsKSk7XG4gICAgaWYgKHRoaXMucHJhY3RpY2UpIHtcbiAgICAgIGNvbnN0IHByZXYgPSB0aGlzLnBhdGg7XG4gICAgICB0aGlzLnByYWN0aWNlLnByZVVzZXJKdW1wKHByZXYsIHBhdGgpO1xuICAgICAgdGhpcy5qdW1wKHBhdGgpO1xuICAgICAgdGhpcy5wcmFjdGljZS5wb3N0VXNlckp1bXAocHJldiwgdGhpcy5wYXRoKTtcbiAgICB9IGVsc2UgdGhpcy5qdW1wKHBhdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5KdW1wVG8ocGF0aDogVHJlZS5QYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLnN0dWR5IHx8IHRoaXMuc3R1ZHkuY2FuSnVtcFRvKHBhdGgpO1xuICB9XG5cbiAgdXNlckp1bXBJZkNhbihwYXRoOiBUcmVlLlBhdGgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jYW5KdW1wVG8ocGF0aCkpIHRoaXMudXNlckp1bXAocGF0aCk7XG4gIH1cblxuICBtYWlubGluZVBhdGhUb1BseShwbHk6IFBseSk6IFRyZWUuUGF0aCB7XG4gICAgcmV0dXJuIHRyZWVPcHMudGFrZVBhdGhXaGlsZSh0aGlzLm1haW5saW5lLCBuID0+IG4ucGx5IDw9IHBseSk7XG4gIH1cblxuICBqdW1wVG9NYWluID0gKHBseTogUGx5KTogdm9pZCA9PiB7XG4gICAgdGhpcy51c2VySnVtcCh0aGlzLm1haW5saW5lUGF0aFRvUGx5KHBseSkpO1xuICB9XG5cbiAganVtcFRvSW5kZXggPSAoaW5kZXg6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMuanVtcFRvTWFpbihpbmRleCArIDEgKyB0aGlzLnRyZWUucm9vdC5wbHkpO1xuICB9XG5cbiAganVtcFRvR2x5cGhTeW1ib2woY29sb3I6IENvbG9yLCBzeW1ib2w6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vZGUgPSBuZXh0R2x5cGhTeW1ib2woY29sb3IsIHN5bWJvbCwgdGhpcy5tYWlubGluZSwgdGhpcy5ub2RlLnBseSk7XG4gICAgaWYgKG5vZGUpIHRoaXMuanVtcFRvTWFpbihub2RlLnBseSk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxuXG4gIHJlbG9hZERhdGEoZGF0YTogQW5hbHlzZURhdGEsIG1lcmdlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5pbml0aWFsaXplKGRhdGEsIG1lcmdlKTtcbiAgICB0aGlzLnJlZGlyZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5zZXRQYXRoKHRyZWVQYXRoLnJvb3QpO1xuICAgIHRoaXMuaW5zdGFuY2lhdGVDZXZhbCgpO1xuICAgIHRoaXMuaW5zdGFuY2lhdGVFdmFsQ2FjaGUoKTtcbiAgICB0aGlzLmNnVmVyc2lvbi5qcysrO1xuICB9XG5cbiAgY2hhbmdlUGduKHBnbjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5yZWRpcmVjdGluZyA9IHRydWU7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJy9hbmFseXNpcy9wZ24nLFxuICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICBkYXRhOiB7IHBnbiB9LFxuICAgICAgc3VjY2VzczogKGRhdGE6IEFuYWx5c2VEYXRhKSA9PiB7XG4gICAgICAgIHRoaXMucmVsb2FkRGF0YShkYXRhLCBmYWxzZSk7XG4gICAgICAgIHRoaXMudXNlckp1bXAodGhpcy5tYWlubGluZVBhdGhUb1BseSh0aGlzLnRyZWUubGFzdFBseSgpKSk7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB0aGlzLnJlZGlyZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjaGFuZ2VGZW4oZmVuOiBGZW4pOiB2b2lkIHtcbiAgICB0aGlzLnJlZGlyZWN0aW5nID0gdHJ1ZTtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYW5hbHlzaXMvJyArIHRoaXMuZGF0YS5nYW1lLnZhcmlhbnQua2V5ICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGZlbikucmVwbGFjZSgvJTIwL2csICdfJykucmVwbGFjZSgvJTJGL2csICcvJyk7XG4gIH1cblxuICB1c2VyTmV3UGllY2UgPSAocGllY2U6IGNnLlBpZWNlLCBwb3M6IEtleSk6IHZvaWQgPT4ge1xuICAgIGlmIChjcmF6eVZhbGlkKHRoaXMuY2hlc3Nncm91bmQsIHRoaXMubm9kZS5kcm9wcywgcGllY2UsIHBvcykpIHtcbiAgICAgIHRoaXMuanVzdFBsYXllZCA9IGNoZXNzVXRpbC5yb2xlVG9TYW5bcGllY2Uucm9sZV0gKyAnQCcgKyBwb3M7XG4gICAgICB0aGlzLmp1c3REcm9wcGVkID0gcGllY2Uucm9sZTtcbiAgICAgIHRoaXMuanVzdENhcHR1cmVkID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zb3VuZC5tb3ZlKCk7XG4gICAgICBjb25zdCBkcm9wID0ge1xuICAgICAgICByb2xlOiBwaWVjZS5yb2xlLFxuICAgICAgICBwb3MsXG4gICAgICAgIHZhcmlhbnQ6IHRoaXMuZGF0YS5nYW1lLnZhcmlhbnQua2V5LFxuICAgICAgICBmZW46IHRoaXMubm9kZS5mZW4sXG4gICAgICAgIHBhdGg6IHRoaXMucGF0aFxuICAgICAgfTtcbiAgICAgIHRoaXMuc29ja2V0LnNlbmRBbmFEcm9wKGRyb3ApO1xuICAgICAgdGhpcy5wcmVwYXJlUHJlbW92aW5nKCk7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH0gZWxzZSB0aGlzLmp1bXAodGhpcy5wYXRoKTtcbiAgfVxuXG4gIHVzZXJNb3ZlID0gKG9yaWc6IEtleSwgZGVzdDogS2V5LCBjYXB0dXJlPzogSnVzdENhcHR1cmVkKTogdm9pZCA9PiB7XG4gICAgdGhpcy5qdXN0UGxheWVkID0gb3JpZztcbiAgICB0aGlzLmp1c3REcm9wcGVkID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBpZWNlID0gdGhpcy5jaGVzc2dyb3VuZC5zdGF0ZS5waWVjZXNbZGVzdF07XG4gICAgY29uc3QgaXNDYXB0dXJlID0gY2FwdHVyZSB8fCAocGllY2UgJiYgcGllY2Uucm9sZSA9PSAncGF3bicgJiYgb3JpZ1swXSAhPSBkZXN0WzBdKTtcbiAgICB0aGlzLnNvdW5kW2lzQ2FwdHVyZSA/ICdjYXB0dXJlJyA6ICdtb3ZlJ10oKTtcbiAgICBpZiAoIXByb21vdGlvbi5zdGFydCh0aGlzLCBvcmlnLCBkZXN0LCBjYXB0dXJlLCB0aGlzLnNlbmRNb3ZlKSkgdGhpcy5zZW5kTW92ZShvcmlnLCBkZXN0LCBjYXB0dXJlKTtcbiAgfVxuXG4gIHNlbmRNb3ZlID0gKG9yaWc6IEtleSwgZGVzdDogS2V5LCBjYXB0dXJlPzogSnVzdENhcHR1cmVkLCBwcm9tPzogY2cuUm9sZSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IG1vdmU6IGFueSA9IHtcbiAgICAgIG9yaWcsXG4gICAgICBkZXN0LFxuICAgICAgdmFyaWFudDogdGhpcy5kYXRhLmdhbWUudmFyaWFudC5rZXksXG4gICAgICBmZW46IHRoaXMubm9kZS5mZW4sXG4gICAgICBwYXRoOiB0aGlzLnBhdGhcbiAgICB9O1xuICAgIGlmIChjYXB0dXJlKSB0aGlzLmp1c3RDYXB0dXJlZCA9IGNhcHR1cmU7XG4gICAgaWYgKHByb20pIG1vdmUucHJvbW90aW9uID0gcHJvbTtcbiAgICBpZiAodGhpcy5wcmFjdGljZSkgdGhpcy5wcmFjdGljZS5vblVzZXJNb3ZlKCk7XG4gICAgdGhpcy5zb2NrZXQuc2VuZEFuYU1vdmUobW92ZSk7XG4gICAgdGhpcy5wcmVwYXJlUHJlbW92aW5nKCk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJlcGFyZVByZW1vdmluZygpOiB2b2lkIHtcbiAgICB0aGlzLmNoZXNzZ3JvdW5kLnNldCh7XG4gICAgICB0dXJuQ29sb3I6IHRoaXMuY2hlc3Nncm91bmQuc3RhdGUubW92YWJsZS5jb2xvciBhcyBjZy5Db2xvcixcbiAgICAgIG1vdmFibGU6IHtcbiAgICAgICAgY29sb3I6IG9wcG9zaXRlKHRoaXMuY2hlc3Nncm91bmQuc3RhdGUubW92YWJsZS5jb2xvciBhcyBjZy5Db2xvcilcbiAgICAgIH0sXG4gICAgICBwcmVtb3ZhYmxlOiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uUHJlbW92ZVNldCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdHVkeSkgdGhpcy5zdHVkeS5vblByZW1vdmVTZXQoKTtcbiAgfVxuXG4gIGFkZE5vZGUobm9kZTogVHJlZS5Ob2RlLCBwYXRoOiBUcmVlLlBhdGgpIHtcbiAgICBjb25zdCBuZXdQYXRoID0gdGhpcy50cmVlLmFkZE5vZGUobm9kZSwgcGF0aCk7XG4gICAgaWYgKCFuZXdQYXRoKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhbid0IGFkZE5vZGVcIiwgbm9kZSwgcGF0aCk7XG4gICAgICByZXR1cm4gdGhpcy5yZWRyYXcoKTtcbiAgICB9XG4gICAgdGhpcy5qdW1wKG5ld1BhdGgpO1xuICAgIHRoaXMucmVkcmF3KCk7XG4gICAgdGhpcy5jaGVzc2dyb3VuZC5wbGF5UHJlbW92ZSgpO1xuICB9XG5cbiAgYWRkRGVzdHMoZGVzdHM6IHN0cmluZywgcGF0aDogVHJlZS5QYXRoLCBvcGVuaW5nPzogVHJlZS5PcGVuaW5nKTogdm9pZCB7XG4gICAgdGhpcy50cmVlLmFkZERlc3RzKGRlc3RzLCBwYXRoLCBvcGVuaW5nKTtcbiAgICBpZiAocGF0aCA9PT0gdGhpcy5wYXRoKSB7XG4gICAgICB0aGlzLnNob3dHcm91bmQoKTtcbiAgICAgIC8vIHRoaXMucmVkcmF3KCk7XG4gICAgICBpZiAodGhpcy5nYW1lT3ZlcigpKSB0aGlzLmNldmFsLnN0b3AoKTtcbiAgICB9XG4gICAgdGhpcy53aXRoQ2coY2cgPT4gY2cucGxheVByZW1vdmUoKSk7XG4gIH1cblxuICBkZWxldGVOb2RlKHBhdGg6IFRyZWUuUGF0aCk6IHZvaWQge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLnRyZWUubm9kZUF0UGF0aChwYXRoKTtcbiAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICBjb25zdCBjb3VudCA9IHRyZWVPcHMuY291bnRDaGlsZHJlbkFuZENvbW1lbnRzKG5vZGUpO1xuICAgIGlmICgoY291bnQubm9kZXMgPj0gMTAgfHwgY291bnQuY29tbWVudHMgPiAwKSAmJiAhY29uZmlybShcbiAgICAgICdEZWxldGUgJyArIHV0aWwucGx1cmFsKCdtb3ZlJywgY291bnQubm9kZXMpICsgKGNvdW50LmNvbW1lbnRzID8gJyBhbmQgJyArIHV0aWwucGx1cmFsKCdjb21tZW50JywgY291bnQuY29tbWVudHMpIDogJycpICsgJz8nXG4gICAgKSkgcmV0dXJuO1xuICAgIHRoaXMudHJlZS5kZWxldGVOb2RlQXQocGF0aCk7XG4gICAgaWYgKHRyZWVQYXRoLmNvbnRhaW5zKHRoaXMucGF0aCwgcGF0aCkpIHRoaXMudXNlckp1bXAodHJlZVBhdGguaW5pdChwYXRoKSk7XG4gICAgZWxzZSB0aGlzLmp1bXAodGhpcy5wYXRoKTtcbiAgICBpZiAodGhpcy5zdHVkeSkgdGhpcy5zdHVkeS5kZWxldGVOb2RlKHBhdGgpO1xuICB9XG5cbiAgcHJvbW90ZShwYXRoOiBUcmVlLlBhdGgsIHRvTWFpbmxpbmU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnRyZWUucHJvbW90ZUF0KHBhdGgsIHRvTWFpbmxpbmUpO1xuICAgIHRoaXMuanVtcChwYXRoKTtcbiAgICBpZiAodGhpcy5zdHVkeSkgdGhpcy5zdHVkeS5wcm9tb3RlKHBhdGgsIHRvTWFpbmxpbmUpO1xuICB9XG5cbiAgZm9yY2VWYXJpYXRpb24ocGF0aDogVHJlZS5QYXRoLCBmb3JjZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMudHJlZS5mb3JjZVZhcmlhdGlvbkF0KHBhdGgsIGZvcmNlKTtcbiAgICB0aGlzLmp1bXAocGF0aCk7XG4gICAgaWYgKHRoaXMuc3R1ZHkpIHRoaXMuc3R1ZHkuZm9yY2VWYXJpYXRpb24ocGF0aCwgZm9yY2UpO1xuICB9XG5cbiAgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5zaG93R3JvdW5kKCk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxuXG4gIGVuY29kZU5vZGVGZW4oKTogRmVuIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlLmZlbi5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgfVxuXG4gIGN1cnJlbnRFdmFscygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VydmVyOiB0aGlzLm5vZGUuZXZhbCxcbiAgICAgIGNsaWVudDogdGhpcy5ub2RlLmNldmFsXG4gICAgfTtcbiAgfVxuXG4gIG5leHROb2RlQmVzdCgpIHtcbiAgICByZXR1cm4gdHJlZU9wcy53aXRoTWFpbmxpbmVDaGlsZCh0aGlzLm5vZGUsIChuOiBUcmVlLk5vZGUpID0+IG4uZXZhbCA/IG4uZXZhbC5iZXN0IDogdW5kZWZpbmVkKTtcbiAgfVxuXG4gIHNldEF1dG9TaGFwZXMgPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy53aXRoQ2coY2cgPT4gY2cuc2V0QXV0b1NoYXBlcyhjb21wdXRlQXV0b1NoYXBlcyh0aGlzKSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbk5ld0NldmFsID0gKGV2OiBUcmVlLkNsaWVudEV2YWwsIHBhdGg6IFRyZWUuUGF0aCwgaXNUaHJlYXQ6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICB0aGlzLnRyZWUudXBkYXRlQXQocGF0aCwgKG5vZGU6IFRyZWUuTm9kZSkgPT4ge1xuICAgICAgaWYgKG5vZGUuZmVuICE9PSBldi5mZW4gJiYgIWlzVGhyZWF0KSByZXR1cm47XG4gICAgICBpZiAoaXNUaHJlYXQpIHtcbiAgICAgICAgaWYgKCFub2RlLnRocmVhdCB8fCBpc0V2YWxCZXR0ZXIoZXYsIG5vZGUudGhyZWF0KSB8fCBub2RlLnRocmVhdC5tYXhEZXB0aCA8IGV2Lm1heERlcHRoKVxuICAgICAgICAgIG5vZGUudGhyZWF0ID0gZXY7XG4gICAgICB9IGVsc2UgaWYgKGlzRXZhbEJldHRlcihldiwgbm9kZS5jZXZhbCkpIG5vZGUuY2V2YWwgPSBldjtcbiAgICAgIGVsc2UgaWYgKG5vZGUuY2V2YWwgJiYgZXYubWF4RGVwdGggPiBub2RlLmNldmFsLm1heERlcHRoKSBub2RlLmNldmFsLm1heERlcHRoID0gZXYubWF4RGVwdGg7XG5cbiAgICAgIGlmIChwYXRoID09PSB0aGlzLnBhdGgpIHtcbiAgICAgICAgdGhpcy5zZXRBdXRvU2hhcGVzKCk7XG4gICAgICAgIGlmICghaXNUaHJlYXQpIHtcbiAgICAgICAgICBpZiAodGhpcy5yZXRybykgdGhpcy5yZXRyby5vbkNldmFsKCk7XG4gICAgICAgICAgaWYgKHRoaXMucHJhY3RpY2UpIHRoaXMucHJhY3RpY2Uub25DZXZhbCgpO1xuICAgICAgICAgIGlmICh0aGlzLnN0dWR5UHJhY3RpY2UpIHRoaXMuc3R1ZHlQcmFjdGljZS5vbkNldmFsKCk7XG4gICAgICAgICAgdGhpcy5ldmFsQ2FjaGUub25DZXZhbCgpO1xuICAgICAgICAgIGlmIChldi5jbG91ZCAmJiBldi5kZXB0aCA+PSB0aGlzLmNldmFsLmVmZmVjdGl2ZU1heERlcHRoKCkpIHRoaXMuY2V2YWwuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGluc3RhbmNpYXRlQ2V2YWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2V2YWwpIHRoaXMuY2V2YWwuZGVzdHJveSgpO1xuICAgIGNvbnN0IGNmZzogQ2V2YWxPcHRzID0ge1xuICAgICAgdmFyaWFudDogdGhpcy5kYXRhLmdhbWUudmFyaWFudCxcbiAgICAgIHBvc3NpYmxlOiAhdGhpcy5lbWJlZCAmJiAoXG4gICAgICAgIHRoaXMuc3ludGhldGljIHx8ICFnYW1lLnBsYXlhYmxlKHRoaXMuZGF0YSlcbiAgICAgICksXG4gICAgICBlbWl0OiAoZXY6IFRyZWUuQ2xpZW50RXZhbCwgd29yazogQ2V2YWxXb3JrKSA9PiB7XG4gICAgICAgIHRoaXMub25OZXdDZXZhbChldiwgd29yay5wYXRoLCB3b3JrLnRocmVhdE1vZGUpO1xuICAgICAgfSxcbiAgICAgIHNldEF1dG9TaGFwZXM6IHRoaXMuc2V0QXV0b1NoYXBlcyxcbiAgICAgIHJlZHJhdzogdGhpcy5yZWRyYXdcbiAgICB9O1xuICAgIGlmICh0aGlzLm9wdHMuc3R1ZHkgJiYgdGhpcy5vcHRzLnByYWN0aWNlKSB7XG4gICAgICBjZmcuc3RvcmFnZUtleVByZWZpeCA9ICdwcmFjdGljZSc7XG4gICAgICBjZmcubXVsdGlQdkRlZmF1bHQgPSAxO1xuICAgIH1cbiAgICB0aGlzLmNldmFsID0gY2V2YWxDdHJsKGNmZyk7XG4gIH1cblxuICBnZXRDZXZhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5jZXZhbDtcbiAgfVxuXG4gIGdhbWVPdmVyKG5vZGU/OiBUcmVlLk5vZGUpOiAnZHJhdycgfCAnY2hlY2ttYXRlJyB8IGZhbHNlIHtcbiAgICBjb25zdCBuID0gbm9kZSB8fCB0aGlzLm5vZGU7XG4gICAgaWYgKG4uZGVzdHMgIT09ICcnIHx8IG4uZHJvcHMpIHJldHVybiBmYWxzZTtcbiAgICBpZiAobi5jaGVjaykgcmV0dXJuICdjaGVja21hdGUnO1xuICAgIHJldHVybiAnZHJhdyc7XG4gIH1cblxuICBwb3NpdGlvbihub2RlOiBUcmVlLk5vZGUpOiBSZXN1bHQ8UG9zaXRpb24sIFBvc2l0aW9uRXJyb3I+IHtcbiAgICBjb25zdCBzZXR1cCA9IHBhcnNlRmVuKG5vZGUuZmVuKS51bndyYXAoKTtcbiAgICByZXR1cm4gc2V0dXBQb3NpdGlvbih2YXJpYW50VG9SdWxlcyh0aGlzLmRhdGEuZ2FtZS52YXJpYW50LmtleSksIHNldHVwKTtcbiAgfVxuXG4gIGNhblVzZUNldmFsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5nYW1lT3ZlcigpICYmICF0aGlzLm5vZGUudGhyZWVmb2xkO1xuICB9XG5cbiAgc3RhcnRDZXZhbCA9IHRocm90dGxlKDgwMCwgKCkgPT4ge1xuICAgIGlmICh0aGlzLmNldmFsLmVuYWJsZWQoKSkge1xuICAgICAgaWYgKHRoaXMuY2FuVXNlQ2V2YWwoKSkge1xuICAgICAgICB0aGlzLmNldmFsLnN0YXJ0KHRoaXMucGF0aCwgdGhpcy5ub2RlTGlzdCwgdGhpcy50aHJlYXRNb2RlKCksIGZhbHNlKTtcbiAgICAgICAgdGhpcy5ldmFsQ2FjaGUuZmV0Y2godGhpcy5wYXRoLCBwYXJzZUludCh0aGlzLmNldmFsLm11bHRpUHYoKSkpO1xuICAgICAgfSBlbHNlIHRoaXMuY2V2YWwuc3RvcCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgdG9nZ2xlQ2V2YWwgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnNob3dDb21wdXRlcigpKSByZXR1cm47XG4gICAgdGhpcy5jZXZhbC50b2dnbGUoKTtcbiAgICB0aGlzLnNldEF1dG9TaGFwZXMoKTtcbiAgICB0aGlzLnN0YXJ0Q2V2YWwoKTtcbiAgICBpZiAoIXRoaXMuY2V2YWwuZW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLnRocmVhdE1vZGUoZmFsc2UpO1xuICAgICAgaWYgKHRoaXMucHJhY3RpY2UpIHRoaXMudG9nZ2xlUHJhY3RpY2UoKTtcbiAgICB9XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxuXG4gIHRvZ2dsZVRocmVhdE1vZGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMubm9kZS5jaGVjaykgcmV0dXJuO1xuICAgIGlmICghdGhpcy5jZXZhbC5lbmFibGVkKCkpIHRoaXMuY2V2YWwudG9nZ2xlKCk7XG4gICAgaWYgKCF0aGlzLmNldmFsLmVuYWJsZWQoKSkgcmV0dXJuO1xuICAgIHRoaXMudGhyZWF0TW9kZSghdGhpcy50aHJlYXRNb2RlKCkpO1xuICAgIGlmICh0aGlzLnRocmVhdE1vZGUoKSAmJiB0aGlzLnByYWN0aWNlKSB0aGlzLnRvZ2dsZVByYWN0aWNlKCk7XG4gICAgdGhpcy5zZXRBdXRvU2hhcGVzKCk7XG4gICAgdGhpcy5zdGFydENldmFsKCk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxuXG4gIGRpc2FibGVUaHJlYXRNb2RlID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiAhIXRoaXMucHJhY3RpY2U7XG4gIH1cblxuICBtYW5kYXRvcnlDZXZhbCA9ICgpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gISF0aGlzLnN0dWR5UHJhY3RpY2U7XG4gIH1cblxuICBwcml2YXRlIGNldmFsUmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5jZXZhbC5zdG9wKCk7XG4gICAgaWYgKCF0aGlzLmNldmFsLmVuYWJsZWQoKSkgdGhpcy5jZXZhbC50b2dnbGUoKTtcbiAgICB0aGlzLnN0YXJ0Q2V2YWwoKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG5cbiAgY2V2YWxTZXRNdWx0aVB2ID0gKHY6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY2V2YWwubXVsdGlQdih2KTtcbiAgICB0aGlzLnRyZWUucmVtb3ZlQ2V2YWwoKTtcbiAgICB0aGlzLmNldmFsUmVzZXQoKTtcbiAgfVxuXG4gIGNldmFsU2V0VGhyZWFkcyA9ICh2OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBpZiAoIXRoaXMuY2V2YWwudGhyZWFkcykgcmV0dXJuO1xuICAgIHRoaXMuY2V2YWwudGhyZWFkcyh2KTtcbiAgICB0aGlzLmNldmFsUmVzZXQoKTtcbiAgfVxuXG4gIGNldmFsU2V0SGFzaFNpemUgPSAodjogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgaWYgKCF0aGlzLmNldmFsLmhhc2hTaXplKSByZXR1cm47XG4gICAgdGhpcy5jZXZhbC5oYXNoU2l6ZSh2KTtcbiAgICB0aGlzLmNldmFsUmVzZXQoKTtcbiAgfVxuXG4gIGNldmFsU2V0SW5maW5pdGUgPSAodjogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY2V2YWwuaW5maW5pdGUodik7XG4gICAgdGhpcy5jZXZhbFJlc2V0KCk7XG4gIH1cblxuICBzaG93RXZhbEdhdWdlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhhc0FueUNvbXB1dGVyQW5hbHlzaXMoKSAmJiB0aGlzLnNob3dHYXVnZSgpICYmICF0aGlzLmdhbWVPdmVyKCkgJiYgdGhpcy5zaG93Q29tcHV0ZXIoKTtcbiAgfVxuXG4gIGhhc0FueUNvbXB1dGVyQW5hbHlzaXMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5hbmFseXNpcyA/IHRydWUgOiB0aGlzLmNldmFsLmVuYWJsZWQoKTtcbiAgfVxuXG4gIGhhc0Z1bGxDb21wdXRlckFuYWx5c2lzID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1haW5saW5lWzBdLmV2YWwgfHwge30pLmxlbmd0aCA+IDA7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0QXV0b1NoYXBlcygpIHtcbiAgICBpZiAodGhpcy5zaG93QXV0b1NoYXBlcygpKSB0aGlzLnNldEF1dG9TaGFwZXMoKTtcbiAgICBlbHNlIHRoaXMuY2hlc3Nncm91bmQgJiYgdGhpcy5jaGVzc2dyb3VuZC5zZXRBdXRvU2hhcGVzKFtdKTtcbiAgfVxuXG4gIHRvZ2dsZUF1dG9TaGFwZXMgPSAodjogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgIHRoaXMuc2hvd0F1dG9TaGFwZXModik7XG4gICAgdGhpcy5yZXNldEF1dG9TaGFwZXMoKTtcbiAgfVxuXG4gIHRvZ2dsZUdhdWdlID0gKCkgPT4ge1xuICAgIHRoaXMuc2hvd0dhdWdlKCF0aGlzLnNob3dHYXVnZSgpKTtcbiAgfVxuXG4gIHByaXZhdGUgb25Ub2dnbGVDb21wdXRlcigpIHtcbiAgICBpZiAoIXRoaXMuc2hvd0NvbXB1dGVyKCkpIHtcbiAgICAgIHRoaXMudHJlZS5yZW1vdmVDb21wdXRlclZhcmlhdGlvbnMoKTtcbiAgICAgIGlmICh0aGlzLmNldmFsLmVuYWJsZWQoKSkgdGhpcy50b2dnbGVDZXZhbCgpO1xuICAgICAgdGhpcy5jaGVzc2dyb3VuZCAmJiB0aGlzLmNoZXNzZ3JvdW5kLnNldEF1dG9TaGFwZXMoW10pO1xuICAgIH0gZWxzZSB0aGlzLnJlc2V0QXV0b1NoYXBlcygpO1xuICB9XG5cbiAgdG9nZ2xlQ29tcHV0ZXIgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuY2V2YWwuZW5hYmxlZCgpKSB0aGlzLnRvZ2dsZUNldmFsKCk7XG4gICAgY29uc3QgdmFsdWUgPSAhdGhpcy5zaG93Q29tcHV0ZXIoKTtcbiAgICB0aGlzLnNob3dDb21wdXRlcih2YWx1ZSk7XG4gICAgaWYgKCF2YWx1ZSAmJiB0aGlzLnByYWN0aWNlKSB0aGlzLnRvZ2dsZVByYWN0aWNlKCk7XG4gICAgdGhpcy5vblRvZ2dsZUNvbXB1dGVyKCk7XG4gICAgbGkucHVic3ViLmVtaXQoJ2FuYWx5c2lzLmNvbXAudG9nZ2xlJywgdmFsdWUpO1xuICB9XG5cbiAgbWVyZ2VBbmFseXNpc0RhdGEoZGF0YTogU2VydmVyRXZhbERhdGEpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdHVkeSAmJiB0aGlzLnN0dWR5LmRhdGEuY2hhcHRlci5pZCAhPT0gZGF0YS5jaCkgcmV0dXJuO1xuICAgIHRoaXMudHJlZS5tZXJnZShkYXRhLnRyZWUpO1xuICAgIGlmICghdGhpcy5zaG93Q29tcHV0ZXIoKSkgdGhpcy50cmVlLnJlbW92ZUNvbXB1dGVyVmFyaWF0aW9ucygpO1xuICAgIHRoaXMuZGF0YS5hbmFseXNpcyA9IGRhdGEuYW5hbHlzaXM7XG4gICAgaWYgKGRhdGEuYW5hbHlzaXMpIGRhdGEuYW5hbHlzaXMucGFydGlhbCA9ICEhdHJlZU9wcy5maW5kSW5NYWlubGluZShkYXRhLnRyZWUsIG4gPT4gIW4uZXZhbCAmJiAhIW4uY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICBpZiAoZGF0YS5kaXZpc2lvbikgdGhpcy5kYXRhLmdhbWUuZGl2aXNpb24gPSBkYXRhLmRpdmlzaW9uO1xuICAgIGlmICh0aGlzLnJldHJvKSB0aGlzLnJldHJvLm9uTWVyZ2VBbmFseXNpc0RhdGEoKTtcbiAgICBpZiAodGhpcy5zdHVkeSkgdGhpcy5zdHVkeS5zZXJ2ZXJFdmFsLm9uTWVyZ2VBbmFseXNpc0RhdGEoKTtcbiAgICBsaS5wdWJzdWIuZW1pdCgnYW5hbHlzaXMuc2VydmVyLnByb2dyZXNzJywgdGhpcy5kYXRhKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG5cbiAgcGxheVVjaSh1Y2k6IFVjaSk6IHZvaWQge1xuICAgIGNvbnN0IG1vdmUgPSBjaGVzc1V0aWwuZGVjb21wb3NlVWNpKHVjaSk7XG4gICAgaWYgKHVjaVsxXSA9PT0gJ0AnKSB0aGlzLmNoZXNzZ3JvdW5kLm5ld1BpZWNlKHtcbiAgICAgIGNvbG9yOiB0aGlzLmNoZXNzZ3JvdW5kLnN0YXRlLm1vdmFibGUuY29sb3IgYXMgQ29sb3IsXG4gICAgICByb2xlOiBjaGVzc1V0aWwuc2FuVG9Sb2xlW3VjaVswXV1cbiAgICB9LCBtb3ZlWzFdKTtcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGNhcHR1cmUgPSB0aGlzLmNoZXNzZ3JvdW5kLnN0YXRlLnBpZWNlc1ttb3ZlWzFdXTtcbiAgICAgIGNvbnN0IHByb21vdGlvbiA9IG1vdmVbMl0gJiYgY2hlc3NVdGlsLnNhblRvUm9sZVttb3ZlWzJdLnRvVXBwZXJDYXNlKCldO1xuICAgICAgdGhpcy5zZW5kTW92ZShtb3ZlWzBdLCBtb3ZlWzFdLCBjYXB0dXJlLCBwcm9tb3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGV4cGxvcmVyTW92ZSh1Y2k6IFVjaSkge1xuICAgIHRoaXMucGxheVVjaSh1Y2kpO1xuICAgIHRoaXMuZXhwbG9yZXIubG9hZGluZyh0cnVlKTtcbiAgfVxuXG4gIHBsYXlCZXN0TW92ZSgpIHtcbiAgICBjb25zdCB1Y2kgPSB0aGlzLm5leHROb2RlQmVzdCgpIHx8ICh0aGlzLm5vZGUuY2V2YWwgJiYgdGhpcy5ub2RlLmNldmFsLnB2c1swXS5tb3Zlc1swXSk7XG4gICAgaWYgKHVjaSkgdGhpcy5wbGF5VWNpKHVjaSk7XG4gIH1cblxuICBjYW5FdmFsR2V0ID0gKG5vZGU6IFRyZWUuTm9kZSk6IGJvb2xlYW4gPT4gdGhpcy5vcHRzLnN0dWR5IHx8IG5vZGUucGx5IDwgMTU7XG5cbiAgaW5zdGFuY2lhdGVFdmFsQ2FjaGUoKSB7XG4gICAgdGhpcy5ldmFsQ2FjaGUgPSBtYWtlRXZhbENhY2hlKHtcbiAgICAgIHZhcmlhbnQ6IHRoaXMuZGF0YS5nYW1lLnZhcmlhbnQua2V5LFxuICAgICAgY2FuR2V0OiB0aGlzLmNhbkV2YWxHZXQsXG4gICAgICBjYW5QdXQ6IChub2RlOiBUcmVlLk5vZGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5ldmFsUHV0ICYmIHRoaXMuY2FuRXZhbEdldChub2RlKSAmJiAoXG4gICAgICAgICAgLy8gaWYgbm90IGluIHN0dWR5LCBvbmx5IHB1dCBkZWNlbnQgb3BlbmluZyBtb3Zlc1xuICAgICAgICAgIHRoaXMub3B0cy5zdHVkeSB8fCAoIW5vZGUuY2V2YWwhLm1hdGUgJiYgTWF0aC5hYnMobm9kZS5jZXZhbCEuY3AhKSA8IDk5KVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIGdldE5vZGU6ICgpID0+IHRoaXMubm9kZSxcbiAgICAgIHNlbmQ6IHRoaXMub3B0cy5zb2NrZXRTZW5kLFxuICAgICAgcmVjZWl2ZTogdGhpcy5vbk5ld0NldmFsXG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVSZXRybyA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5yZXRybykgdGhpcy5yZXRybyA9IHVuZGVmaW5lZDtcbiAgICBlbHNlIHtcbiAgICAgIHRoaXMucmV0cm8gPSBtYWtlUmV0cm8odGhpcyk7XG4gICAgICBpZiAodGhpcy5wcmFjdGljZSkgdGhpcy50b2dnbGVQcmFjdGljZSgpO1xuICAgICAgaWYgKHRoaXMuZXhwbG9yZXIuZW5hYmxlZCgpKSB0aGlzLnRvZ2dsZUV4cGxvcmVyKCk7XG4gICAgfVxuICAgIHRoaXMuc2V0QXV0b1NoYXBlcygpO1xuICB9XG5cbiAgdG9nZ2xlRXhwbG9yZXIgPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMucHJhY3RpY2UpIHRoaXMudG9nZ2xlUHJhY3RpY2UoKTtcbiAgICB0aGlzLmV4cGxvcmVyLnRvZ2dsZSgpO1xuICB9XG5cbiAgdG9nZ2xlUHJhY3RpY2UgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucHJhY3RpY2UgfHwgIXRoaXMuY2V2YWwucG9zc2libGUpIHRoaXMucHJhY3RpY2UgPSB1bmRlZmluZWQ7XG4gICAgZWxzZSB7XG4gICAgICBpZiAodGhpcy5yZXRybykgdGhpcy50b2dnbGVSZXRybygpO1xuICAgICAgaWYgKHRoaXMuZXhwbG9yZXIuZW5hYmxlZCgpKSB0aGlzLnRvZ2dsZUV4cGxvcmVyKCk7XG4gICAgICB0aGlzLnByYWN0aWNlID0gbWFrZVByYWN0aWNlKHRoaXMsICgpID0+IHtcbiAgICAgICAgLy8gcHVzaCB0byAyMCB0byBzdG9yZSBBSSBtb3ZlcyBpbiB0aGUgY2xvdWRcbiAgICAgICAgLy8gbG93ZXIgdG8gMTggYWZ0ZXIgdGFzayBjb21wbGV0aW9uIChvciBmYWlsdXJlKVxuICAgICAgICByZXR1cm4gdGhpcy5zdHVkeVByYWN0aWNlICYmIHRoaXMuc3R1ZHlQcmFjdGljZS5zdWNjZXNzKCkgPT09IG51bGwgPyAyMCA6IDE4O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc2V0QXV0b1NoYXBlcygpO1xuICB9O1xuXG4gIHJlc3RhcnRQcmFjdGljZSgpIHtcbiAgICB0aGlzLnByYWN0aWNlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudG9nZ2xlUHJhY3RpY2UoKTtcbiAgfVxuXG4gIGdhbWVib29rUGxheSA9ICgpOiBHYW1lYm9va1BsYXlDdHJsIHwgdW5kZWZpbmVkID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHVkeSAmJiB0aGlzLnN0dWR5LmdhbWVib29rUGxheSgpO1xuICB9XG5cbiAgaXNHYW1lYm9vayA9ICgpOiBib29sZWFuID0+ICEhKHRoaXMuc3R1ZHkgJiYgdGhpcy5zdHVkeS5kYXRhLmNoYXB0ZXIuZ2FtZWJvb2spO1xuXG4gIHdpdGhDZzxBPihmOiAoY2c6IENoZXNzZ3JvdW5kQXBpKSA9PiBBKTogQSB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuY2hlc3Nncm91bmQgJiYgdGhpcy5jZ1ZlcnNpb24uanMgPT09IHRoaXMuY2dWZXJzaW9uLmRvbSlcbiAgICAgIHJldHVybiBmKHRoaXMuY2hlc3Nncm91bmQpO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgZGVmaW5lZCwgcHJvcCwgUHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnY29tbW9uL3Rocm90dGxlJztcblxuZXhwb3J0IGludGVyZmFjZSBFdmFsQ2FjaGUge1xuICBvbkNldmFsKCk6IHZvaWRcbiAgZmV0Y2gocGF0aDogVHJlZS5QYXRoLCBtdWx0aVB2OiBudW1iZXIpOiB2b2lkXG4gIG9uQ2xvdWRFdmFsKHNlcnZlckV2YWwpOiB2b2lkXG4gIHVwZ3JhZGFibGU6IFByb3A8Ym9vbGVhbj5cbn1cblxuY29uc3QgZXZhbFB1dE1pbkRlcHRoID0gMjA7XG5jb25zdCBldmFsUHV0TWluTm9kZXMgPSAzZTY7XG5jb25zdCBldmFsUHV0TWF4TW92ZXMgPSAxMDtcblxuZnVuY3Rpb24gcXVhbGl0eUNoZWNrKGV2KTogYm9vbGVhbiB7XG4gIC8vIGJlbG93IDUwMGsgbm9kZXMsIHRoZSBldmFsIG1pZ2h0IGNvbWUgZnJvbSBhbiBpbW1pbmVudCB0aHJlZWZvbGQgcmVwZXRpdGlvblxuICAvLyBhbmQgc2hvdWxkIHRoZXJlZm9yZSBiZSBpZ25vcmVkXG4gIHJldHVybiBldi5ub2RlcyA+IDUwMDAwMCAmJiAoXG4gICAgZXYuZGVwdGggPj0gZXZhbFB1dE1pbkRlcHRoIHx8IGV2Lm5vZGVzID4gZXZhbFB1dE1pbk5vZGVzXG4gICk7XG59XG5cbi8vIGZyb20gY2xpZW50IGV2YWwgdG8gc2VydmVyIGV2YWxcbmZ1bmN0aW9uIHRvUHV0RGF0YSh2YXJpYW50LCBldikge1xuICBjb25zdCBkYXRhOiBhbnkgPSB7XG4gICAgZmVuOiBldi5mZW4sXG4gICAga25vZGVzOiBNYXRoLnJvdW5kKGV2Lm5vZGVzIC8gMTAwMCksXG4gICAgZGVwdGg6IGV2LmRlcHRoLFxuICAgIHB2czogZXYucHZzLm1hcChwdiA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjcDogcHYuY3AsXG4gICAgICAgIG1hdGU6IHB2Lm1hdGUsXG4gICAgICAgIG1vdmVzOiBwdi5tb3Zlcy5zbGljZSgwLCBldmFsUHV0TWF4TW92ZXMpLmpvaW4oJyAnKVxuICAgICAgfTtcbiAgICB9KVxuICB9O1xuICBpZiAodmFyaWFudCAhPT0gJ3N0YW5kYXJkJykgZGF0YS52YXJpYW50ID0gdmFyaWFudDtcbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8vIGZyb20gc2VydmVyIGV2YWwgdG8gY2xpZW50IGV2YWxcbmZ1bmN0aW9uIHRvQ2V2YWwoZSkge1xuICBjb25zdCByZXM6IGFueSA9IHtcbiAgICBmZW46IGUuZmVuLFxuICAgIG5vZGVzOiBlLmtub2RlcyAqIDEwMDAsXG4gICAgZGVwdGg6IGUuZGVwdGgsXG4gICAgcHZzOiBlLnB2cy5tYXAoZnVuY3Rpb24oZnJvbSkge1xuICAgICAgY29uc3QgdG86IGFueSA9IHtcbiAgICAgICAgbW92ZXM6IGZyb20ubW92ZXMuc3BsaXQoJyAnKVxuICAgICAgfTtcbiAgICAgIGlmIChkZWZpbmVkKGZyb20uY3ApKSB0by5jcCA9IGZyb20uY3A7XG4gICAgICBlbHNlIHRvLm1hdGUgPSBmcm9tLm1hdGU7XG4gICAgICByZXR1cm4gdG87XG4gICAgfSksXG4gICAgY2xvdWQ6IHRydWVcbiAgfTtcbiAgaWYgKGRlZmluZWQocmVzLnB2c1swXS5jcCkpIHJlcy5jcCA9IHJlcy5wdnNbMF0uY3A7XG4gIGVsc2UgcmVzLm1hdGUgPSByZXMucHZzWzBdLm1hdGU7XG4gIHJlcy5jbG91ZCA9IHRydWU7XG4gIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlKG9wdHMpOiBFdmFsQ2FjaGUge1xuICBjb25zdCBmZW5GZXRjaGVkOiBzdHJpbmdbXSA9IFtdO1xuICBmdW5jdGlvbiBoYXNGZXRjaGVkKG5vZGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmVuRmV0Y2hlZC5pbmNsdWRlcyhub2RlLmZlbik7XG4gIH07XG4gIGxldCB1cGdyYWRhYmxlID0gcHJvcChmYWxzZSk7XG4gIHJldHVybiB7XG4gICAgb25DZXZhbDogdGhyb3R0bGUoNTAwLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBvcHRzLmdldE5vZGUoKSwgZXYgPSBub2RlLmNldmFsO1xuICAgICAgaWYgKGV2ICYmICFldi5jbG91ZCAmJiBoYXNGZXRjaGVkKG5vZGUpICYmIHF1YWxpdHlDaGVjayhldikgJiYgb3B0cy5jYW5QdXQobm9kZSkpIHtcbiAgICAgICAgb3B0cy5zZW5kKFwiZXZhbFB1dFwiLCB0b1B1dERhdGEob3B0cy52YXJpYW50LCBldikpO1xuICAgICAgfVxuICAgIH0pLFxuICAgIGZldGNoKHBhdGg6IFRyZWUuUGF0aCwgbXVsdGlQdjogbnVtYmVyKTogdm9pZCB7XG4gICAgICBjb25zdCBub2RlID0gb3B0cy5nZXROb2RlKCk7XG4gICAgICBpZiAoKG5vZGUuY2V2YWwgJiYgbm9kZS5jZXZhbC5jbG91ZCkgfHwgIW9wdHMuY2FuR2V0KG5vZGUpKSByZXR1cm47XG4gICAgICBpZiAoaGFzRmV0Y2hlZChub2RlKSkgcmV0dXJuO1xuICAgICAgZmVuRmV0Y2hlZC5wdXNoKG5vZGUuZmVuKTtcbiAgICAgIGNvbnN0IG9iajogYW55ID0ge1xuICAgICAgICBmZW46IG5vZGUuZmVuLFxuICAgICAgICBwYXRoXG4gICAgICB9O1xuICAgICAgaWYgKG9wdHMudmFyaWFudCAhPT0gJ3N0YW5kYXJkJykgb2JqLnZhcmlhbnQgPSBvcHRzLnZhcmlhbnQ7XG4gICAgICBpZiAobXVsdGlQdiA+IDEpIG9iai5tcHYgPSBtdWx0aVB2O1xuICAgICAgaWYgKHVwZ3JhZGFibGUoKSkgb2JqLnVwID0gdHJ1ZTtcbiAgICAgIG9wdHMuc2VuZChcImV2YWxHZXRcIiwgb2JqKTtcbiAgICB9LFxuICAgIG9uQ2xvdWRFdmFsKHNlcnZlckV2YWwpOiB2b2lkIHtcbiAgICAgIG9wdHMucmVjZWl2ZSh0b0NldmFsKHNlcnZlckV2YWwpLCBzZXJ2ZXJFdmFsLnBhdGgpO1xuICAgIH0sXG4gICAgdXBncmFkYWJsZVxuICB9O1xufTtcbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSc7XG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgcHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyBzdG9yZWRQcm9wLCBzdG9yZWRKc29uUHJvcCB9IGZyb20gJ2NvbW1vbi9zdG9yYWdlJztcbmltcG9ydCB7IGJpbmQsIGRhdGFJY29uIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBFeHBsb3JlckRiLCBFeHBsb3JlclNwZWVkLCBFeHBsb3JlckNvbmZpZ0RhdGEsIEV4cGxvcmVyQ29uZmlnQ3RybCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmNvbnN0IGFsbFNwZWVkczogRXhwbG9yZXJTcGVlZFtdID0gWydidWxsZXQnLCAnYmxpdHonLCAncmFwaWQnLCAnY2xhc3NpY2FsJ107XG5jb25zdCBhbGxSYXRpbmdzID0gWzE2MDAsIDE4MDAsIDIwMDAsIDIyMDAsIDI1MDBdO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udHJvbGxlcihnYW1lOiBHYW1lLCBvbkNsb3NlOiAoKSA9PiB2b2lkLCB0cmFuczogVHJhbnMsIHJlZHJhdzogKCkgPT4gdm9pZCk6IEV4cGxvcmVyQ29uZmlnQ3RybCB7XG5cbiAgY29uc3QgdmFyaWFudCA9IChnYW1lLnZhcmlhbnQua2V5ID09PSAnZnJvbVBvc2l0aW9uJykgPyAnc3RhbmRhcmQnIDogZ2FtZS52YXJpYW50LmtleTtcblxuICBjb25zdCBhdmFpbGFibGU6IEV4cGxvcmVyRGJbXSA9IFsnbGljaGVzcyddO1xuICBpZiAodmFyaWFudCA9PT0gJ3N0YW5kYXJkJykgYXZhaWxhYmxlLnVuc2hpZnQoJ21hc3RlcnMnKTtcblxuICBjb25zdCBkYXRhOiBFeHBsb3JlckNvbmZpZ0RhdGEgPSB7XG4gICAgb3BlbjogcHJvcChmYWxzZSksXG4gICAgZGI6IHtcbiAgICAgIGF2YWlsYWJsZSxcbiAgICAgIHNlbGVjdGVkOiBhdmFpbGFibGUubGVuZ3RoID4gMSA/IHN0b3JlZFByb3AoJ2V4cGxvcmVyLmRiLicgKyB2YXJpYW50LCBhdmFpbGFibGVbMF0pIDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhdmFpbGFibGVbMF07XG4gICAgICB9XG4gICAgfSxcbiAgICByYXRpbmc6IHtcbiAgICAgIGF2YWlsYWJsZTogYWxsUmF0aW5ncyxcbiAgICAgIHNlbGVjdGVkOiBzdG9yZWRKc29uUHJvcCgnZXhwbG9yZXIucmF0aW5nJywgYWxsUmF0aW5ncylcbiAgICB9LFxuICAgIHNwZWVkOiB7XG4gICAgICBhdmFpbGFibGU6IGFsbFNwZWVkcyxcbiAgICAgIHNlbGVjdGVkOiBzdG9yZWRKc29uUHJvcDxFeHBsb3JlclNwZWVkW10+KCdleHBsb3Jlci5zcGVlZCcsIGFsbFNwZWVkcylcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlTWFueSA9IGZ1bmN0aW9uKGMsIHZhbHVlKSB7XG4gICAgaWYgKCFjKCkuaW5jbHVkZXModmFsdWUpKSBjKGMoKS5jb25jYXQoW3ZhbHVlXSkpO1xuICAgIGVsc2UgaWYgKGMoKS5sZW5ndGggPiAxKSBjKGMoKS5maWx0ZXIodiA9PiB2ICE9PSB2YWx1ZSkpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgdHJhbnMsXG4gICAgcmVkcmF3LFxuICAgIGRhdGEsXG4gICAgdG9nZ2xlT3BlbigpIHtcbiAgICAgIGRhdGEub3BlbighZGF0YS5vcGVuKCkpO1xuICAgICAgaWYgKCFkYXRhLm9wZW4oKSkgb25DbG9zZSgpO1xuICAgIH0sXG4gICAgdG9nZ2xlRGIoZGIpIHtcbiAgICAgIGRhdGEuZGIuc2VsZWN0ZWQoZGIpO1xuICAgIH0sXG4gICAgdG9nZ2xlUmF0aW5nKHYpIHsgdG9nZ2xlTWFueShkYXRhLnJhdGluZy5zZWxlY3RlZCwgdikgfSxcbiAgICB0b2dnbGVTcGVlZCh2KSB7IHRvZ2dsZU1hbnkoZGF0YS5zcGVlZC5zZWxlY3RlZCwgdikgfSxcbiAgICBmdWxsSG91c2UoKSB7XG4gICAgICByZXR1cm4gZGF0YS5kYi5zZWxlY3RlZCgpID09PSAnbWFzdGVycycgfHwgKFxuICAgICAgICBkYXRhLnJhdGluZy5zZWxlY3RlZCgpLmxlbmd0aCA9PT0gZGF0YS5yYXRpbmcuYXZhaWxhYmxlLmxlbmd0aCAmJlxuICAgICAgICAgIGRhdGEuc3BlZWQuc2VsZWN0ZWQoKS5sZW5ndGggPT09IGRhdGEuc3BlZWQuYXZhaWxhYmxlLmxlbmd0aFxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3KGN0cmw6IEV4cGxvcmVyQ29uZmlnQ3RybCk6IFZOb2RlW10ge1xuICBjb25zdCBkID0gY3RybC5kYXRhO1xuICByZXR1cm4gW1xuICAgIGgoJ3NlY3Rpb24uZGInLCBbXG4gICAgICBoKCdsYWJlbCcsIGN0cmwudHJhbnMubm9hcmcoJ2RhdGFiYXNlJykpLFxuICAgICAgaCgnZGl2LmNob2ljZXMnLCBkLmRiLmF2YWlsYWJsZS5tYXAoZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgICAgICBjbGFzczogeyBzZWxlY3RlZDogZC5kYi5zZWxlY3RlZCgpID09PSBzIH0sXG4gICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IGN0cmwudG9nZ2xlRGIocyksIGN0cmwucmVkcmF3KVxuICAgICAgICB9LCBzKTtcbiAgICAgIH0pKVxuICAgIF0pLFxuICAgIGQuZGIuc2VsZWN0ZWQoKSA9PT0gJ21hc3RlcnMnID8gaCgnZGl2Lm1hc3RlcnMubWVzc2FnZScsIFtcbiAgICAgIGgoJ2knLCB7IGF0dHJzOiBkYXRhSWNvbignQycpIH0pLFxuICAgICAgaCgncCcsIGN0cmwudHJhbnMoJ21hc3RlckRiRXhwbGFuYXRpb24nLCAyMjAwLCAnMTk1MicsICcyMDE5JykpXG4gICAgXSkgOiBoKCdkaXYnLCBbXG4gICAgICBoKCdzZWN0aW9uLnJhdGluZycsIFtcbiAgICAgICAgaCgnbGFiZWwnLCBjdHJsLnRyYW5zLm5vYXJnKCdhdmVyYWdlRWxvJykpLFxuICAgICAgICBoKCdkaXYuY2hvaWNlcycsXG4gICAgICAgICAgZC5yYXRpbmcuYXZhaWxhYmxlLm1hcChmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgY2xhc3M6IHsgc2VsZWN0ZWQ6IGQucmF0aW5nLnNlbGVjdGVkKCkuaW5jbHVkZXMocikgfSxcbiAgICAgICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IGN0cmwudG9nZ2xlUmF0aW5nKHIpLCBjdHJsLnJlZHJhdylcbiAgICAgICAgICAgIH0sIHIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgXSksXG4gICAgICBoKCdzZWN0aW9uLnNwZWVkJywgW1xuICAgICAgICBoKCdsYWJlbCcsIGN0cmwudHJhbnMubm9hcmcoJ3RpbWVDb250cm9sJykpLFxuICAgICAgICBoKCdkaXYuY2hvaWNlcycsXG4gICAgICAgICAgZC5zcGVlZC5hdmFpbGFibGUubWFwKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywge1xuICAgICAgICAgICAgICBjbGFzczogeyBzZWxlY3RlZDogZC5zcGVlZC5zZWxlY3RlZCgpLmluY2x1ZGVzKHMpIH0sXG4gICAgICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBjdHJsLnRvZ2dsZVNwZWVkKHMpLCBjdHJsLnJlZHJhdylcbiAgICAgICAgICAgIH0sIHMpO1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIF0pXG4gICAgXSksXG4gICAgaCgnc2VjdGlvbi5zYXZlJyxcbiAgICAgIGgoJ2J1dHRvbi5idXR0b24uYnV0dG9uLWdyZWVuLnRleHQnLCB7XG4gICAgICAgIGF0dHJzOiBkYXRhSWNvbignRScpLFxuICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwudG9nZ2xlT3BlbilcbiAgICAgIH0sIGN0cmwudHJhbnMubm9hcmcoJ2FsbFNldCcpKVxuICAgIClcbiAgXTtcbn1cbiIsImltcG9ydCB7IHByb3AgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgc3RvcmVkUHJvcCB9IGZyb20gJ2NvbW1vbi9zdG9yYWdlJztcbmltcG9ydCB7IG9wcG9zaXRlIH0gZnJvbSAnY2hlc3Nncm91bmQvdXRpbCc7XG5pbXBvcnQgeyBjb250cm9sbGVyIGFzIGNvbmZpZ0N0cmwgfSBmcm9tICcuL2V4cGxvcmVyQ29uZmlnJztcbmltcG9ydCB4aHIgPSByZXF1aXJlKCcuL2V4cGxvcmVyWGhyJyk7XG5pbXBvcnQgeyB3aW5uZXJPZiwgY29sb3JPZiB9IGZyb20gJy4vZXhwbG9yZXJVdGlsJztcbmltcG9ydCAqIGFzIGdhbWVVdGlsIGZyb20gJ2dhbWUnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuaW1wb3J0IHsgSG92ZXJpbmcsIEV4cGxvcmVyQ3RybCwgRXhwbG9yZXJEYXRhLCBPcGVuaW5nRGF0YSwgVGFibGViYXNlRGF0YSwgU2ltcGxlVGFibGViYXNlSGl0IH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuZnVuY3Rpb24gcGllY2VDb3VudChmZW46IEZlbikge1xuICBjb25zdCBwYXJ0cyA9IGZlbi5zcGxpdCgvXFxzLyk7XG4gIHJldHVybiBwYXJ0c1swXS5zcGxpdCgvW25icnFrcF0vaSkubGVuZ3RoIC0gMTtcbn1cblxuZnVuY3Rpb24gdGFibGViYXNlUGllY2VzKHZhcmlhbnQ6IFZhcmlhbnRLZXkpIHtcbiAgc3dpdGNoICh2YXJpYW50KSB7XG4gICAgY2FzZSAnc3RhbmRhcmQnOlxuICAgIGNhc2UgJ2Zyb21Qb3NpdGlvbic6XG4gICAgY2FzZSAnY2hlc3M5NjAnOlxuICAgICAgcmV0dXJuIDc7XG4gICAgY2FzZSAnYXRvbWljJzpcbiAgICBjYXNlICdhbnRpY2hlc3MnOlxuICAgICAgcmV0dXJuIDY7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAwO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0YWJsZWJhc2VHdWFyYW50ZWVkKHZhcmlhbnQ6IFZhcmlhbnRLZXksIGZlbjogRmVuKSB7XG4gIHJldHVybiBwaWVjZUNvdW50KGZlbikgPD0gdGFibGViYXNlUGllY2VzKHZhcmlhbnQpO1xufVxuXG5mdW5jdGlvbiB0YWJsZWJhc2VSZWxldmFudCh2YXJpYW50OiBWYXJpYW50S2V5LCBmZW46IEZlbikge1xuICByZXR1cm4gcGllY2VDb3VudChmZW4pIC0gMSA8PSB0YWJsZWJhc2VQaWVjZXModmFyaWFudCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHJvb3Q6IEFuYWx5c2VDdHJsLCBvcHRzLCBhbGxvdzogYm9vbGVhbik6IEV4cGxvcmVyQ3RybCB7XG4gIGNvbnN0IGFsbG93ZWQgPSBwcm9wKGFsbG93KSxcbiAgZW5hYmxlZCA9IHJvb3QuZW1iZWQgPyBwcm9wKGZhbHNlKSA6IHN0b3JlZFByb3AoJ2V4cGxvcmVyLmVuYWJsZWQnLCBmYWxzZSksXG4gIGxvYWRpbmcgPSBwcm9wKHRydWUpLFxuICBmYWlsaW5nID0gcHJvcChmYWxzZSksXG4gIGhvdmVyaW5nID0gcHJvcDxIb3ZlcmluZyB8IG51bGw+KG51bGwpLFxuICBtb3Zlc0F3YXkgPSBwcm9wKDApLFxuICBnYW1lTWVudSA9IHByb3A8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgaWYgKChsb2NhdGlvbi5oYXNoID09PSAnI2V4cGxvcmVyJyB8fCBsb2NhdGlvbi5oYXNoID09PSAnI29wZW5pbmcnKSAmJiAhcm9vdC5lbWJlZCkgZW5hYmxlZCh0cnVlKTtcblxuICBsZXQgY2FjaGUgPSB7fTtcbiAgZnVuY3Rpb24gb25Db25maWdDbG9zZSgpIHtcbiAgICByb290LnJlZHJhdygpO1xuICAgIGNhY2hlID0ge307XG4gICAgc2V0Tm9kZSgpO1xuICB9XG4gIGNvbnN0IGRhdGEgPSByb290LmRhdGEsXG4gIHdpdGhHYW1lcyA9IHJvb3Quc3ludGhldGljIHx8IGdhbWVVdGlsLnJlcGxheWFibGUoZGF0YSkgfHwgISFkYXRhLm9wcG9uZW50LmFpLFxuICBlZmZlY3RpdmVWYXJpYW50ID0gZGF0YS5nYW1lLnZhcmlhbnQua2V5ID09PSAnZnJvbVBvc2l0aW9uJyA/ICdzdGFuZGFyZCcgOiBkYXRhLmdhbWUudmFyaWFudC5rZXksXG4gIGNvbmZpZyA9IGNvbmZpZ0N0cmwoZGF0YS5nYW1lLCBvbkNvbmZpZ0Nsb3NlLCByb290LnRyYW5zLCByb290LnJlZHJhdyk7XG5cbiAgY29uc3QgZmV0Y2ggPSB3aW5kb3cubGljaGVzcy5kZWJvdW5jZShmdW5jdGlvbigpIHtcbiAgICBjb25zdCBmZW4gPSByb290Lm5vZGUuZmVuO1xuICAgIGNvbnN0IHJlcXVlc3Q6IEpRdWVyeVByb21pc2U8RXhwbG9yZXJEYXRhPiA9ICh3aXRoR2FtZXMgJiYgdGFibGViYXNlUmVsZXZhbnQoZWZmZWN0aXZlVmFyaWFudCwgZmVuKSkgP1xuICAgICAgeGhyLnRhYmxlYmFzZShvcHRzLnRhYmxlYmFzZUVuZHBvaW50LCBlZmZlY3RpdmVWYXJpYW50LCBmZW4pIDpcbiAgICAgIHhoci5vcGVuaW5nKG9wdHMuZW5kcG9pbnQsIGVmZmVjdGl2ZVZhcmlhbnQsIGZlbiwgY29uZmlnLmRhdGEsIHdpdGhHYW1lcyk7XG5cbiAgICByZXF1ZXN0LnRoZW4oKHJlczogRXhwbG9yZXJEYXRhKSA9PiB7XG4gICAgICBjYWNoZVtmZW5dID0gcmVzO1xuICAgICAgbW92ZXNBd2F5KHJlcy5tb3Zlcy5sZW5ndGggPyAwIDogbW92ZXNBd2F5KCkgKyAxKTtcbiAgICAgIGxvYWRpbmcoZmFsc2UpO1xuICAgICAgZmFpbGluZyhmYWxzZSk7XG4gICAgICByb290LnJlZHJhdygpO1xuICAgIH0sICgpID0+IHtcbiAgICAgIGxvYWRpbmcoZmFsc2UpO1xuICAgICAgZmFpbGluZyh0cnVlKTtcbiAgICAgIHJvb3QucmVkcmF3KCk7XG4gICAgfSk7XG4gIH0sIDI1MCwgdHJ1ZSk7XG5cbiAgY29uc3QgZW1wdHkgPSB7XG4gICAgb3BlbmluZzogdHJ1ZSxcbiAgICBtb3Zlczoge31cbiAgfTtcblxuICBmdW5jdGlvbiBzZXROb2RlKCkge1xuICAgIGlmICghZW5hYmxlZCgpKSByZXR1cm47XG4gICAgZ2FtZU1lbnUobnVsbCk7XG4gICAgY29uc3Qgbm9kZSA9IHJvb3Qubm9kZTtcbiAgICBpZiAobm9kZS5wbHkgPiA1MCAmJiAhdGFibGViYXNlUmVsZXZhbnQoZWZmZWN0aXZlVmFyaWFudCwgbm9kZS5mZW4pKSB7XG4gICAgICBjYWNoZVtub2RlLmZlbl0gPSBlbXB0eTtcbiAgICB9XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGVbcm9vdC5ub2RlLmZlbl07XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgbW92ZXNBd2F5KGNhY2hlZC5tb3Zlcy5sZW5ndGggPyAwIDogbW92ZXNBd2F5KCkgKyAxKTtcbiAgICAgIGxvYWRpbmcoZmFsc2UpO1xuICAgICAgZmFpbGluZyhmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWRpbmcodHJ1ZSk7XG4gICAgICBmZXRjaCgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFsbG93ZWQsXG4gICAgZW5hYmxlZCxcbiAgICBzZXROb2RlLFxuICAgIGxvYWRpbmcsXG4gICAgZmFpbGluZyxcbiAgICBob3ZlcmluZyxcbiAgICBtb3Zlc0F3YXksXG4gICAgY29uZmlnLFxuICAgIHdpdGhHYW1lcyxcbiAgICBnYW1lTWVudSxcbiAgICBjdXJyZW50OiAoKSA9PiBjYWNoZVtyb290Lm5vZGUuZmVuXSxcbiAgICB0b2dnbGUoKSB7XG4gICAgICBtb3Zlc0F3YXkoMCk7XG4gICAgICBlbmFibGVkKCFlbmFibGVkKCkpO1xuICAgICAgc2V0Tm9kZSgpO1xuICAgICAgcm9vdC5hdXRvU2Nyb2xsKCk7XG4gICAgfSxcbiAgICBkaXNhYmxlKCkge1xuICAgICAgaWYgKGVuYWJsZWQoKSkge1xuICAgICAgICBlbmFibGVkKGZhbHNlKTtcbiAgICAgICAgZ2FtZU1lbnUobnVsbCk7XG4gICAgICAgIHJvb3QuYXV0b1Njcm9sbCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0SG92ZXJpbmcoZmVuLCB1Y2kpIHtcbiAgICAgIGhvdmVyaW5nKHVjaSA/IHtcbiAgICAgICAgZmVuLFxuICAgICAgICB1Y2ksXG4gICAgICB9IDogbnVsbCk7XG4gICAgICByb290LnNldEF1dG9TaGFwZXMoKTtcbiAgICB9LFxuICAgIGZldGNoTWFzdGVyT3BlbmluZzogKGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgbWFzdGVyQ2FjaGUgPSB7fTtcbiAgICAgIHJldHVybiAoZmVuOiBGZW4pOiBKUXVlcnlQcm9taXNlPE9wZW5pbmdEYXRhPiA9PiB7XG4gICAgICAgIGlmIChtYXN0ZXJDYWNoZVtmZW5dKSByZXR1cm4gJC5EZWZlcnJlZCgpLnJlc29sdmUobWFzdGVyQ2FjaGVbZmVuXSkucHJvbWlzZSgpIGFzIEpRdWVyeVByb21pc2U8T3BlbmluZ0RhdGE+O1xuICAgICAgICByZXR1cm4geGhyLm9wZW5pbmcob3B0cy5lbmRwb2ludCwgJ3N0YW5kYXJkJywgZmVuLCB7XG4gICAgICAgICAgZGI6IHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBwcm9wKCdtYXN0ZXJzJylcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKChyZXM6IE9wZW5pbmdEYXRhKSA9PiB7XG4gICAgICAgICAgbWFzdGVyQ2FjaGVbZmVuXSA9IHJlcztcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSgpLFxuICAgIGZldGNoVGFibGViYXNlSGl0KGZlbjogRmVuKTogSlF1ZXJ5UHJvbWlzZTxTaW1wbGVUYWJsZWJhc2VIaXQ+IHtcbiAgICAgIHJldHVybiB4aHIudGFibGViYXNlKG9wdHMudGFibGViYXNlRW5kcG9pbnQsIGVmZmVjdGl2ZVZhcmlhbnQsIGZlbikudGhlbigocmVzOiBUYWJsZWJhc2VEYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vdmUgPSByZXMubW92ZXNbMF07XG4gICAgICAgIGlmIChtb3ZlICYmIG1vdmUuZHR6ID09IG51bGwpIHRocm93ICd1bmtub3duIHRhYmxlYmFzZSBwb3NpdGlvbic7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZmVuOiBmZW4sXG4gICAgICAgICAgYmVzdDogbW92ZSAmJiBtb3ZlLnVjaSxcbiAgICAgICAgICB3aW5uZXI6IHJlcy5jaGVja21hdGUgPyBvcHBvc2l0ZShjb2xvck9mKGZlbikpIDogKFxuICAgICAgICAgICAgcmVzLnN0YWxlbWF0ZSA/IHVuZGVmaW5lZCA6IHdpbm5lck9mKGZlbiwgbW92ZSEpXG4gICAgICAgICAgKVxuICAgICAgICB9IGFzIFNpbXBsZVRhYmxlYmFzZUhpdFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcbiIsImltcG9ydCB7IFRhYmxlYmFzZU1vdmVTdGF0cyB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb2xvck9mKGZlbjogRmVuKTogQ29sb3Ige1xuICByZXR1cm4gZmVuLnNwbGl0KCcgJylbMV0gPT09ICd3JyA/ICd3aGl0ZScgOiAnYmxhY2snO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2lubmVyT2YoZmVuOiBGZW4sIG1vdmU6IFRhYmxlYmFzZU1vdmVTdGF0cyk6IENvbG9yIHwgdW5kZWZpbmVkIHtcbiAgY29uc3Qgc3RtID0gZmVuLnNwbGl0KCcgJylbMV07XG4gIGlmICgoc3RtWzBdID09ICd3JyAmJiBtb3ZlLndkbCEgPCAwKSB8fCAoc3RtWzBdID09ICdiJyAmJiBtb3ZlLndkbCEgPiAwKSlcbiAgICByZXR1cm4gJ3doaXRlJztcbiAgaWYgKChzdG1bMF0gPT0gJ2InICYmIG1vdmUud2RsISA8IDApIHx8IChzdG1bMF0gPT0gJ3cnICYmIG1vdmUud2RsISA+IDApKVxuICAgIHJldHVybiAnYmxhY2snO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IHZpZXcgYXMgcmVuZGVyQ29uZmlnIH0gZnJvbSAnLi9leHBsb3JlckNvbmZpZyc7XG5pbXBvcnQgeyBiaW5kLCBkYXRhSWNvbiB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgd2lubmVyT2YgfSBmcm9tICcuL2V4cGxvcmVyVXRpbCc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5pbXBvcnQgeyBpc09wZW5pbmcsIGlzVGFibGViYXNlLCBUYWJsZWJhc2VNb3ZlU3RhdHMsIE9wZW5pbmdNb3ZlU3RhdHMsIE9wZW5pbmdHYW1lIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuZnVuY3Rpb24gcmVzdWx0QmFyKG1vdmU6IE9wZW5pbmdNb3ZlU3RhdHMpOiBWTm9kZSB7XG4gIGNvbnN0IHN1bSA9IG1vdmUud2hpdGUgKyBtb3ZlLmRyYXdzICsgbW92ZS5ibGFjaztcbiAgZnVuY3Rpb24gc2VjdGlvbihrZXkpIHtcbiAgICBjb25zdCBwZXJjZW50ID0gbW92ZVtrZXldICogMTAwIC8gc3VtO1xuICAgIHJldHVybiBwZXJjZW50ID09PSAwID8gbnVsbCA6IGgoJ3NwYW4uJyArIGtleSwge1xuICAgICAgYXR0cnM6IHsgc3R5bGU6ICd3aWR0aDogJyArIChNYXRoLnJvdW5kKG1vdmVba2V5XSAqIDEwMDAgLyBzdW0pIC8gMTApICsgJyUnIH0sXG4gICAgfSwgcGVyY2VudCA+IDEyID8gTWF0aC5yb3VuZChwZXJjZW50KSArIChwZXJjZW50ID4gMjAgPyAnJScgOiAnJykgOiAnJyk7XG4gIH1cbiAgcmV0dXJuIGgoJ2Rpdi5iYXInLCBbJ3doaXRlJywgJ2RyYXdzJywgJ2JsYWNrJ10ubWFwKHNlY3Rpb24pKTtcbn1cblxubGV0IGxhc3RTaG93OiBWTm9kZTtcblxuZnVuY3Rpb24gbW92ZVRhYmxlQXR0cmlidXRlcyhjdHJsOiBBbmFseXNlQ3RybCwgZmVuOiBGZW4pIHtcbiAgcmV0dXJuIHtcbiAgICBhdHRyczogeyAnZGF0YS1mZW4nOiBmZW4gfSxcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSB2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGUgPT4ge1xuICAgICAgICAgIGN0cmwuZXhwbG9yZXIuc2V0SG92ZXJpbmcoJChlbCkuYXR0cignZGF0YS1mZW4nKSwgJChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkucGFyZW50cygndHInKS5hdHRyKCdkYXRhLXVjaScpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgXyA9PiB7XG4gICAgICAgICAgY3RybC5leHBsb3Jlci5zZXRIb3ZlcmluZygkKGVsKS5hdHRyKCdkYXRhLWZlbicpLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHVjaSA9ICQoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLnBhcmVudHMoJ3RyJykuYXR0cignZGF0YS11Y2knKTtcbiAgICAgICAgICBpZiAodWNpKSBjdHJsLmV4cGxvcmVyTW92ZSh1Y2kpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwb3N0cGF0Y2g6IChfLCB2bm9kZSkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb25zdCBlbCA9IHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBjdHJsLmV4cGxvcmVyLnNldEhvdmVyaW5nKCQoZWwpLmF0dHIoJ2RhdGEtZmVuJyksICQoZWwpLmZpbmQoJ3RyOmhvdmVyJykuYXR0cignZGF0YS11Y2knKSk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBzaG93TW92ZVRhYmxlKGN0cmw6IEFuYWx5c2VDdHJsLCBtb3ZlczogT3BlbmluZ01vdmVTdGF0c1tdLCBmZW46IEZlbik6IFZOb2RlIHwgbnVsbCB7XG4gIGlmICghbW92ZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgdHJhbnMgPSBjdHJsLnRyYW5zLm5vYXJnO1xuICByZXR1cm4gaCgndGFibGUubW92ZXMnLCBbXG4gICAgaCgndGhlYWQnLCBbXG4gICAgICBoKCd0cicsIFtcbiAgICAgICAgaCgndGgudGl0bGUnLCB0cmFucygnbW92ZScpKSxcbiAgICAgICAgaCgndGgudGl0bGUnLCB0cmFucygnZ2FtZXMnKSksXG4gICAgICAgIGgoJ3RoLnRpdGxlJywgdHJhbnMoJ3doaXRlRHJhd0JsYWNrJykpXG4gICAgICBdKVxuICAgIF0pLFxuICAgIGgoJ3Rib2R5JywgbW92ZVRhYmxlQXR0cmlidXRlcyhjdHJsLCBmZW4pLCBtb3Zlcy5tYXAobW92ZSA9PiB7XG4gICAgICByZXR1cm4gaCgndHInLCB7XG4gICAgICAgIGtleTogbW92ZS51Y2ksXG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgJ2RhdGEtdWNpJzogbW92ZS51Y2ksXG4gICAgICAgICAgdGl0bGU6IGN0cmwudHJhbnMoJ2F2ZXJhZ2VSYXRpbmdYJywgbW92ZS5hdmVyYWdlUmF0aW5nKVxuICAgICAgICB9XG4gICAgICB9LCBbXG4gICAgICAgIGgoJ3RkJywgbW92ZS5zYW5bMF0gPT09ICdQJyA/IG1vdmUuc2FuLnNsaWNlKDEpIDogbW92ZS5zYW4pLFxuICAgICAgICBoKCd0ZCcsIHdpbmRvdy5saWNoZXNzLm51bWJlckZvcm1hdChtb3ZlLndoaXRlICsgbW92ZS5kcmF3cyArIG1vdmUuYmxhY2spKSxcbiAgICAgICAgaCgndGQnLCByZXN1bHRCYXIobW92ZSkpXG4gICAgICBdKTtcbiAgICB9KSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHNob3dSZXN1bHQod2lubmVyPzogQ29sb3IpOiBWTm9kZSB7XG4gIGlmICh3aW5uZXIgPT09ICd3aGl0ZScpIHJldHVybiBoKCdyZXN1bHQud2hpdGUnLCAnMS0wJyk7XG4gIGlmICh3aW5uZXIgPT09ICdibGFjaycpIHJldHVybiBoKCdyZXN1bHQuYmxhY2snLCAnMC0xJyk7XG4gIHJldHVybiBoKCdyZXN1bHQuZHJhd3MnLCAnwr0twr0nKTtcbn1cblxuZnVuY3Rpb24gc2hvd0dhbWVUYWJsZShjdHJsOiBBbmFseXNlQ3RybCwgdGl0bGU6IHN0cmluZywgZ2FtZXM6IE9wZW5pbmdHYW1lW10pOiBWTm9kZSB8IG51bGwge1xuICBpZiAoIWN0cmwuZXhwbG9yZXIud2l0aEdhbWVzIHx8ICFnYW1lcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICBjb25zdCBvcGVuZWRJZCA9IGN0cmwuZXhwbG9yZXIuZ2FtZU1lbnUoKTtcbiAgcmV0dXJuIGgoJ3RhYmxlLmdhbWVzJywgW1xuICAgIGgoJ3RoZWFkJywgW1xuICAgICAgaCgndHInLCBbXG4gICAgICAgIGgoJ3RoLnRpdGxlJywgeyBhdHRyczogeyBjb2xzcGFuOiA0IH0gfSwgdGl0bGUpXG4gICAgICBdKVxuICAgIF0pLFxuICAgIGgoJ3Rib2R5Jywge1xuICAgICAgaG9vazogYmluZCgnY2xpY2snLCBlID0+IHtcbiAgICAgICAgY29uc3QgJHRyID0gJChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkucGFyZW50cygndHInKTtcbiAgICAgICAgaWYgKCEkdHIubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGlkID0gJHRyLmRhdGEoJ2lkJyk7XG4gICAgICAgIGlmIChjdHJsLnN0dWR5ICYmIGN0cmwuc3R1ZHkubWVtYmVycy5jYW5Db250cmlidXRlKCkpIHtcbiAgICAgICAgICBjdHJsLmV4cGxvcmVyLmdhbWVNZW51KGlkKTtcbiAgICAgICAgICBjdHJsLnJlZHJhdygpO1xuICAgICAgICB9IGVsc2Ugb3BlbkdhbWUoY3RybCwgaWQpO1xuICAgICAgfSlcbiAgICB9LCBnYW1lcy5tYXAoZ2FtZSA9PiB7XG4gICAgICByZXR1cm4gb3BlbmVkSWQgPT09IGdhbWUuaWQgPyBnYW1lQWN0aW9ucyhjdHJsLCBnYW1lKSA6IGgoJ3RyJywge1xuICAgICAgICBrZXk6IGdhbWUuaWQsXG4gICAgICAgIGF0dHJzOiB7ICdkYXRhLWlkJzogZ2FtZS5pZCB9XG4gICAgICB9LCBbXG4gICAgICAgIGgoJ3RkJywgW2dhbWUud2hpdGUsIGdhbWUuYmxhY2tdLm1hcChwID0+IGgoJ3NwYW4nLCAnJyArIHAucmF0aW5nKSkpLFxuICAgICAgICBoKCd0ZCcsIFtnYW1lLndoaXRlLCBnYW1lLmJsYWNrXS5tYXAocCA9PiBoKCdzcGFuJywgcC5uYW1lKSkpLFxuICAgICAgICBoKCd0ZCcsIHNob3dSZXN1bHQoZ2FtZS53aW5uZXIpKSxcbiAgICAgICAgaCgndGQnLCBbZ2FtZS55ZWFyXSlcbiAgICAgIF0pO1xuICAgIH0pKVxuICBdKTtcbn1cblxuZnVuY3Rpb24gb3BlbkdhbWUoY3RybDogQW5hbHlzZUN0cmwsIGdhbWVJZDogc3RyaW5nKSB7XG4gIGNvbnN0IG9yaWVudGF0aW9uID0gY3RybC5jaGVzc2dyb3VuZC5zdGF0ZS5vcmllbnRhdGlvbixcbiAgZmVuUGFyYW0gPSBjdHJsLm5vZGUucGx5ID4gMCA/ICgnP2Zlbj0nICsgY3RybC5ub2RlLmZlbikgOiAnJztcbiAgbGV0IHVybCA9ICcvJyArIGdhbWVJZCArICcvJyArIG9yaWVudGF0aW9uICsgZmVuUGFyYW07XG4gIGlmIChjdHJsLmV4cGxvcmVyLmNvbmZpZy5kYXRhLmRiLnNlbGVjdGVkKCkgPT09ICdtYXN0ZXJzJykgdXJsID0gJy9pbXBvcnQvbWFzdGVyJyArIHVybDtcbiAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7XG59XG5cbmZ1bmN0aW9uIGdhbWVBY3Rpb25zKGN0cmw6IEFuYWx5c2VDdHJsLCBnYW1lOiBPcGVuaW5nR2FtZSk6IFZOb2RlIHtcbiAgZnVuY3Rpb24gc2VuZChpbnNlcnQ6IGJvb2xlYW4pIHtcbiAgICBjdHJsLnN0dWR5IS5leHBsb3JlckdhbWUoZ2FtZS5pZCwgaW5zZXJ0KTtcbiAgICBjdHJsLmV4cGxvcmVyLmdhbWVNZW51KG51bGwpO1xuICAgIGN0cmwucmVkcmF3KCk7XG4gIH1cbiAgcmV0dXJuIGgoJ3RyJywge1xuICAgIGtleTogZ2FtZS5pZCArICctbScsXG4gIH0sIFtcbiAgICBoKCd0ZC5nYW1lX21lbnUnLCB7XG4gICAgICBhdHRyczogeyBjb2xzcGFuOiA0IH0sXG4gICAgfSwgW1xuICAgICAgaCgnZGl2LmdhbWVfdGl0bGUnLCBgJHtnYW1lLndoaXRlLm5hbWV9IC0gJHtnYW1lLmJsYWNrLm5hbWV9LCAke3Nob3dSZXN1bHQoZ2FtZS53aW5uZXIpLnRleHR9LCAke2dhbWUueWVhcn1gKSxcbiAgICAgIGgoJ2Rpdi5tZW51JywgW1xuICAgICAgICBoKCdhLnRleHQnLCB7XG4gICAgICAgICAgYXR0cnM6IGRhdGFJY29uKCd2JyksXG4gICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IG9wZW5HYW1lKGN0cmwsIGdhbWUuaWQpKVxuICAgICAgICB9LCAnVmlldycpLFxuICAgICAgICAuLi4oY3RybC5zdHVkeSA/IFtcbiAgICAgICAgICBoKCdhLnRleHQnLCB7XG4gICAgICAgICAgICBhdHRyczogZGF0YUljb24oJ2MnKSxcbiAgICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBzZW5kKGZhbHNlKSwgY3RybC5yZWRyYXcpXG4gICAgICAgICAgfSwgJ0NpdGUnKSxcbiAgICAgICAgICBoKCdhLnRleHQnLCB7XG4gICAgICAgICAgICBhdHRyczogZGF0YUljb24oJ08nKSxcbiAgICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBzZW5kKHRydWUpLCBjdHJsLnJlZHJhdylcbiAgICAgICAgICB9LCAnSW5zZXJ0JylcbiAgICAgICAgXSA6IFtdKSxcbiAgICAgICAgaCgnYS50ZXh0Jywge1xuICAgICAgICAgIGF0dHJzOiBkYXRhSWNvbignTCcpLFxuICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBjdHJsLmV4cGxvcmVyLmdhbWVNZW51KG51bGwpLCBjdHJsLnJlZHJhdylcbiAgICAgICAgfSwgJ0Nsb3NlJylcbiAgICAgIF0pXG4gICAgXSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHNob3dUYWJsZWJhc2UoY3RybDogQW5hbHlzZUN0cmwsIHRpdGxlOiBzdHJpbmcsIG1vdmVzOiBUYWJsZWJhc2VNb3ZlU3RhdHNbXSwgZmVuOiBGZW4pOiBWTm9kZVtdIHtcbiAgaWYgKCFtb3Zlcy5sZW5ndGgpIHJldHVybiBbXTtcbiAgcmV0dXJuIFtcbiAgICBoKCdkaXYudGl0bGUnLCB0aXRsZSksXG4gICAgaCgndGFibGUudGFibGViYXNlJywgW1xuICAgICAgaCgndGJvZHknLCBtb3ZlVGFibGVBdHRyaWJ1dGVzKGN0cmwsIGZlbiksIG1vdmVzLm1hcChtb3ZlID0+IHtcbiAgICAgICAgcmV0dXJuIGgoJ3RyJywge1xuICAgICAgICAgIGtleTogbW92ZS51Y2ksXG4gICAgICAgICAgYXR0cnM6IHsgJ2RhdGEtdWNpJzogbW92ZS51Y2kgfVxuICAgICAgICB9LCBbXG4gICAgICAgICAgaCgndGQnLCBtb3ZlLnNhbiksXG4gICAgICAgICAgaCgndGQnLCBbc2hvd0R0eihjdHJsLCBmZW4sIG1vdmUpLCBzaG93RHRtKGN0cmwsIGZlbiwgbW92ZSldKVxuICAgICAgICBdKTtcbiAgICAgIH0pKVxuICAgIF0pXG4gIF07XG59XG5cbmZ1bmN0aW9uIHNob3dEdG0oY3RybDogQW5hbHlzZUN0cmwsIGZlbjogRmVuLCBtb3ZlOiBUYWJsZWJhc2VNb3ZlU3RhdHMpIHtcbiAgaWYgKG1vdmUuZHRtKSByZXR1cm4gaCgncmVzdWx0LicgKyB3aW5uZXJPZihmZW4sIG1vdmUpLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIHRpdGxlOiBjdHJsLnRyYW5zLnBsdXJhbCgnbWF0ZUluWEhhbGZNb3ZlcycsIE1hdGguYWJzKG1vdmUuZHRtKSkgKyAnIChEZXB0aCBUbyBNYXRlKSdcbiAgICB9XG4gIH0sICdEVE0gJyArIE1hdGguYWJzKG1vdmUuZHRtKSk7XG59XG5cbmZ1bmN0aW9uIHNob3dEdHooY3RybDogQW5hbHlzZUN0cmwsIGZlbjogRmVuLCBtb3ZlOiBUYWJsZWJhc2VNb3ZlU3RhdHMpOiBWTm9kZSB8IG51bGwge1xuICBjb25zdCB0cmFucyA9IGN0cmwudHJhbnMubm9hcmc7XG4gIGlmIChtb3ZlLmNoZWNrbWF0ZSkgcmV0dXJuIGgoJ3Jlc3VsdC4nICsgd2lubmVyT2YoZmVuLCBtb3ZlKSwgdHJhbnMoJ2NoZWNrbWF0ZScpKTtcbiAgZWxzZSBpZiAobW92ZS5zdGFsZW1hdGUpIHJldHVybiBoKCdyZXN1bHQuZHJhd3MnLCB0cmFucygnc3RhbGVtYXRlJykpO1xuICBlbHNlIGlmIChtb3ZlLnZhcmlhbnRfd2luKSByZXR1cm4gaCgncmVzdWx0LicgKyB3aW5uZXJPZihmZW4sIG1vdmUpLCB0cmFucygndmFyaWFudExvc3MnKSk7XG4gIGVsc2UgaWYgKG1vdmUudmFyaWFudF9sb3NzKSByZXR1cm4gaCgncmVzdWx0LicgKyB3aW5uZXJPZihmZW4sIG1vdmUpLCB0cmFucygndmFyaWFudFdpbicpKTtcbiAgZWxzZSBpZiAobW92ZS5pbnN1ZmZpY2llbnRfbWF0ZXJpYWwpIHJldHVybiBoKCdyZXN1bHQuZHJhd3MnLCB0cmFucygnaW5zdWZmaWNpZW50TWF0ZXJpYWwnKSk7XG4gIGVsc2UgaWYgKG1vdmUuZHR6ID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgZWxzZSBpZiAobW92ZS5kdHogPT09IDApIHJldHVybiBoKCdyZXN1bHQuZHJhd3MnLCB0cmFucygnZHJhdycpKTtcbiAgZWxzZSBpZiAobW92ZS56ZXJvaW5nKSByZXR1cm4gbW92ZS5zYW4uaW5jbHVkZXMoJ3gnKSA/XG4gIGgoJ3Jlc3VsdC4nICsgd2lubmVyT2YoZmVuLCBtb3ZlKSwgdHJhbnMoJ2NhcHR1cmUnKSkgOlxuICBoKCdyZXN1bHQuJyArIHdpbm5lck9mKGZlbiwgbW92ZSksIHRyYW5zKCdwYXduTW92ZScpKTtcbiAgcmV0dXJuIGgoJ3Jlc3VsdC4nICsgd2lubmVyT2YoZmVuLCBtb3ZlKSwge1xuICAgIGF0dHJzOiB7XG4gICAgICB0aXRsZTogY3RybC50cmFucy5wbHVyYWwoJ25leHRDYXB0dXJlT3JQYXduTW92ZUluWEhhbGZNb3ZlcycsIE1hdGguYWJzKG1vdmUuZHR6KSlcbiAgICB9XG4gIH0sICdEVFogJyArIE1hdGguYWJzKG1vdmUuZHR6KSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICByZXR1cm4gaCgnYnV0dG9uLmJ1dHRvbi5idXR0b24tZW1wdHkudGV4dCcsIHtcbiAgICBhdHRyczogZGF0YUljb24oJ0wnKSxcbiAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwudG9nZ2xlRXhwbG9yZXIsIGN0cmwucmVkcmF3KVxuICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdjbG9zZScpKTtcbn1cblxuZnVuY3Rpb24gc2hvd0VtcHR5KGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2LmRhdGEuZW1wdHknLCBbXG4gICAgaCgnZGl2LnRpdGxlJywgc2hvd1RpdGxlKGN0cmwsIGN0cmwuZGF0YS5nYW1lLnZhcmlhbnQpKSxcbiAgICBoKCdkaXYubWVzc2FnZScsIFtcbiAgICAgIGgoJ3N0cm9uZycsIGN0cmwudHJhbnMubm9hcmcoJ25vR2FtZUZvdW5kJykpLFxuICAgICAgY3RybC5leHBsb3Jlci5jb25maWcuZnVsbEhvdXNlKCkgP1xuICAgICAgbnVsbCA6XG4gICAgICBoKCdwLmV4cGxhbmF0aW9uJywgY3RybC50cmFucy5ub2FyZygnbWF5YmVJbmNsdWRlTW9yZUdhbWVzRnJvbVRoZVByZWZlcmVuY2VzTWVudScpKSxcbiAgICAgIGNsb3NlQnV0dG9uKGN0cmwpXG4gICAgXSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHNob3dHYW1lRW5kKGN0cmw6IEFuYWx5c2VDdHJsLCB0aXRsZTogc3RyaW5nKTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2LmRhdGEuZW1wdHknLCBbXG4gICAgaCgnZGl2LnRpdGxlJywgY3RybC50cmFucy5ub2FyZygnZ2FtZU92ZXInKSksXG4gICAgaCgnZGl2Lm1lc3NhZ2UnLCBbXG4gICAgICBoKCdpJywgeyBhdHRyczogZGF0YUljb24oJ+6AhScpIH0pLFxuICAgICAgaCgnaDMnLCB0aXRsZSksXG4gICAgICBjbG9zZUJ1dHRvbihjdHJsKVxuICAgIF0pXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBzaG93KGN0cmw6IEFuYWx5c2VDdHJsKSB7XG4gIGNvbnN0IHRyYW5zID0gY3RybC50cmFucy5ub2FyZyxcbiAgZGF0YSA9IGN0cmwuZXhwbG9yZXIuY3VycmVudCgpO1xuICBpZiAoZGF0YSAmJiBpc09wZW5pbmcoZGF0YSkpIHtcbiAgICBjb25zdCBtb3ZlVGFibGUgPSBzaG93TW92ZVRhYmxlKGN0cmwsIGRhdGEubW92ZXMsIGRhdGEuZmVuKSxcbiAgICByZWNlbnRUYWJsZSA9IHNob3dHYW1lVGFibGUoY3RybCwgdHJhbnMoJ3JlY2VudEdhbWVzJyksIGRhdGEucmVjZW50R2FtZXMgfHwgW10pLFxuICAgIHRvcFRhYmxlID0gc2hvd0dhbWVUYWJsZShjdHJsLCB0cmFucygndG9wR2FtZXMnKSwgZGF0YS50b3BHYW1lcyB8fCBbXSk7XG4gICAgaWYgKG1vdmVUYWJsZSB8fCByZWNlbnRUYWJsZSB8fCB0b3BUYWJsZSkgbGFzdFNob3cgPSBoKCdkaXYuZGF0YScsIFttb3ZlVGFibGUsIHRvcFRhYmxlLCByZWNlbnRUYWJsZV0pO1xuICAgIGVsc2UgbGFzdFNob3cgPSBzaG93RW1wdHkoY3RybCk7XG4gIH0gZWxzZSBpZiAoZGF0YSAmJiBpc1RhYmxlYmFzZShkYXRhKSkge1xuICAgIGNvbnN0IG1vdmVzID0gZGF0YS5tb3ZlcztcbiAgICBpZiAobW92ZXMubGVuZ3RoKSBsYXN0U2hvdyA9IGgoJ2Rpdi5kYXRhJywgKFtcbiAgICAgIFt0cmFucygnd2lubmluZycpLCBtID0+IG0ud2RsID09PSAtMl0sXG4gICAgICBbdHJhbnMoJ3Vua25vd24nKSwgbSA9PiBtLndkbCA9PT0gbnVsbF0sXG4gICAgICBbdHJhbnMoJ3dpblByZXZlbnRlZEJ5NTBNb3ZlUnVsZScpLCBtID0+IG0ud2RsID09PSAtMV0sXG4gICAgICBbdHJhbnMoJ2RyYXduJyksIG0gPT4gbS53ZGwgPT09IDBdLFxuICAgICAgW3RyYW5zKCdsb3NzU2F2ZWRCeTUwTW92ZVJ1bGUnKSwgbSA9PiBtLndkbCA9PT0gMV0sXG4gICAgICBbdHJhbnMoJ2xvc2luZycpLCBtID0+IG0ud2RsID09PSAyXSxcbiAgICBdIGFzIFtzdHJpbmcsIChtb3ZlOiBUYWJsZWJhc2VNb3ZlU3RhdHMpID0+IGJvb2xlYW5dW10pXG4gICAgICAubWFwKGEgPT4gc2hvd1RhYmxlYmFzZShjdHJsLCBhWzBdIGFzIHN0cmluZywgbW92ZXMuZmlsdGVyKGFbMV0pLCBkYXRhLmZlbikpXG4gICAgICAucmVkdWNlKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEuY29uY2F0KGIpOyB9LCBbXSkpO1xuICAgIGVsc2UgaWYgKGRhdGEuY2hlY2ttYXRlKSBsYXN0U2hvdyA9IHNob3dHYW1lRW5kKGN0cmwsIHRyYW5zKCdjaGVja21hdGUnKSlcbiAgICAgIGVsc2UgaWYgKGRhdGEuc3RhbGVtYXRlKSBsYXN0U2hvdyA9IHNob3dHYW1lRW5kKGN0cmwsIHRyYW5zKCdzdGFsZW1hdGUnKSlcbiAgICAgICAgZWxzZSBpZiAoZGF0YS52YXJpYW50X3dpbiB8fCBkYXRhLnZhcmlhbnRfbG9zcykgbGFzdFNob3cgPSBzaG93R2FtZUVuZChjdHJsLCB0cmFucygndmFyaWFudEVuZGluZycpKTtcbiAgICAgIGVsc2UgbGFzdFNob3cgPSBzaG93RW1wdHkoY3RybCk7XG4gIH1cbiAgcmV0dXJuIGxhc3RTaG93O1xufVxuXG5mdW5jdGlvbiBzaG93VGl0bGUoY3RybDogQW5hbHlzZUN0cmwsIHZhcmlhbnQ6IFZhcmlhbnQpIHtcbiAgaWYgKHZhcmlhbnQua2V5ID09PSAnc3RhbmRhcmQnIHx8IHZhcmlhbnQua2V5ID09PSAnZnJvbVBvc2l0aW9uJykgcmV0dXJuIGN0cmwudHJhbnMubm9hcmcoJ29wZW5pbmdFeHBsb3JlcicpO1xuICByZXR1cm4gY3RybC50cmFucygneE9wZW5pbmdFeHBsb3JlcicsIHZhcmlhbnQubmFtZSk7XG59XG5cbmZ1bmN0aW9uIHNob3dDb25maWcoY3RybDogQW5hbHlzZUN0cmwpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYuY29uZmlnJywgW1xuICAgIGgoJ2Rpdi50aXRsZScsIHNob3dUaXRsZShjdHJsLCBjdHJsLmRhdGEuZ2FtZS52YXJpYW50KSlcbiAgXS5jb25jYXQocmVuZGVyQ29uZmlnKGN0cmwuZXhwbG9yZXIuY29uZmlnKSkpO1xufVxuXG5mdW5jdGlvbiBzaG93RmFpbGluZyhjdHJsOiBBbmFseXNlQ3RybCkge1xuICByZXR1cm4gaCgnZGl2LmRhdGEuZW1wdHknLCBbXG4gICAgaCgnZGl2LnRpdGxlJywgc2hvd1RpdGxlKGN0cmwsIGN0cmwuZGF0YS5nYW1lLnZhcmlhbnQpKSxcbiAgICBoKCdkaXYuZmFpbGluZy5tZXNzYWdlJywgW1xuICAgICAgaCgnaDMnLCBcIk9vcHMsIHNvcnJ5IVwiKSxcbiAgICAgIGgoJ3AuZXhwbGFuYXRpb24nLCBcIlRoZSBleHBsb3JlciBpcyB0ZW1wb3JhcmlseSBvdXQgb2Ygc2VydmljZS4gVHJ5IGFnYWluIHNvb24hXCIpLFxuICAgICAgY2xvc2VCdXR0b24oY3RybClcbiAgICBdKVxuICBdKTtcbn1cblxubGV0IGxhc3RGZW46IEZlbiA9ICcnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjdHJsOiBBbmFseXNlQ3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgZXhwbG9yZXIgPSBjdHJsLmV4cGxvcmVyO1xuICBpZiAoIWV4cGxvcmVyLmVuYWJsZWQoKSkgcmV0dXJuO1xuICBjb25zdCBkYXRhID0gZXhwbG9yZXIuY3VycmVudCgpLFxuICBjb25maWcgPSBleHBsb3Jlci5jb25maWcsXG4gIGNvbmZpZ09wZW5lZCA9IGNvbmZpZy5kYXRhLm9wZW4oKSxcbiAgbG9hZGluZyA9ICFjb25maWdPcGVuZWQgJiYgKGV4cGxvcmVyLmxvYWRpbmcoKSB8fCAoIWRhdGEgJiYgIWV4cGxvcmVyLmZhaWxpbmcoKSkpLFxuICBjb250ZW50ID0gY29uZmlnT3BlbmVkID8gc2hvd0NvbmZpZyhjdHJsKSA6IChleHBsb3Jlci5mYWlsaW5nKCkgPyBzaG93RmFpbGluZyhjdHJsKSA6IHNob3coY3RybCkpO1xuICByZXR1cm4gaCgnc2VjdGlvbi5leHBsb3Jlci1ib3guc3ViLWJveCcsIHtcbiAgICBjbGFzczoge1xuICAgICAgbG9hZGluZyxcbiAgICAgIGNvbmZpZzogY29uZmlnT3BlbmVkLFxuICAgICAgcmVkdWNlZDogIWNvbmZpZ09wZW5lZCAmJiAoZXhwbG9yZXIuZmFpbGluZygpIHx8IGV4cGxvcmVyLm1vdmVzQXdheSgpID4gMilcbiAgICB9LFxuICAgIGhvb2s6IHtcbiAgICAgIGluc2VydDogdm5vZGUgPT4gKHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsVG9wID0gMCxcbiAgICAgIHBvc3RwYXRjaChfLCB2bm9kZSkge1xuICAgICAgICBpZiAoIWRhdGEgfHwgbGFzdEZlbiA9PT0gZGF0YS5mZW4pIHJldHVybjtcbiAgICAgICAgKHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgbGFzdEZlbiA9IGRhdGEuZmVuO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW1xuICAgIGgoJ2Rpdi5vdmVybGF5JyksXG4gICAgY29udGVudCwgKCFjb250ZW50IHx8IGV4cGxvcmVyLmZhaWxpbmcoKSkgPyBudWxsIDogaCgnc3Bhbi50b2NvbmYnLCB7XG4gICAgICBhdHRyczogZGF0YUljb24oY29uZmlnT3BlbmVkID8gJ0wnIDogJyUnKSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4gY3RybC5leHBsb3Jlci5jb25maWcudG9nZ2xlT3BlbigpLCBjdHJsLnJlZHJhdylcbiAgICB9KVxuICBdKTtcbn07XG4iLCJpbXBvcnQgeyBPcGVuaW5nRGF0YSwgVGFibGViYXNlRGF0YSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuaW5nKGVuZHBvaW50OiBzdHJpbmcsIHZhcmlhbnQ6IFZhcmlhbnRLZXksIGZlbjogRmVuLCBjb25maWcsIHdpdGhHYW1lczogYm9vbGVhbik6IEpRdWVyeVByb21pc2U8T3BlbmluZ0RhdGE+IHtcbiAgbGV0IHVybDogc3RyaW5nO1xuICBjb25zdCBwYXJhbXM6IGFueSA9IHtcbiAgICBmZW4sXG4gICAgbW92ZXM6IDEyXG4gIH07XG4gIGlmICghd2l0aEdhbWVzKSBwYXJhbXMudG9wR2FtZXMgPSBwYXJhbXMucmVjZW50R2FtZXMgPSAwO1xuICBpZiAoY29uZmlnLmRiLnNlbGVjdGVkKCkgPT09ICdtYXN0ZXJzJykgdXJsID0gJy9tYXN0ZXInO1xuICBlbHNlIHtcbiAgICB1cmwgPSAnL2xpY2hlc3MnO1xuICAgIHBhcmFtc1sndmFyaWFudCddID0gdmFyaWFudDtcbiAgICBwYXJhbXNbJ3NwZWVkc1tdJ10gPSBjb25maWcuc3BlZWQuc2VsZWN0ZWQoKTtcbiAgICBwYXJhbXNbJ3JhdGluZ3NbXSddID0gY29uZmlnLnJhdGluZy5zZWxlY3RlZCgpO1xuICB9XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybDogZW5kcG9pbnQgKyB1cmwsXG4gICAgZGF0YTogcGFyYW1zLFxuICAgIGNhY2hlOiB0cnVlXG4gIH0pLnRoZW4oKGRhdGE6IFBhcnRpYWw8T3BlbmluZ0RhdGE+KSA9PiB7XG4gICAgZGF0YS5vcGVuaW5nID0gdHJ1ZTtcbiAgICBkYXRhLmZlbiA9IGZlbjtcbiAgICByZXR1cm4gZGF0YSBhcyBPcGVuaW5nRGF0YTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0YWJsZWJhc2UoZW5kcG9pbnQ6IHN0cmluZywgdmFyaWFudDogVmFyaWFudEtleSwgZmVuOiBGZW4pOiBKUXVlcnlQcm9taXNlPFRhYmxlYmFzZURhdGE+IHtcbiAgY29uc3QgZWZmZWN0aXZlVmFyaWFudCA9ICh2YXJpYW50ID09PSAnZnJvbVBvc2l0aW9uJyB8fCB2YXJpYW50ID09PSAnY2hlc3M5NjAnKSA/ICdzdGFuZGFyZCcgOiB2YXJpYW50O1xuICByZXR1cm4gJC5hamF4KHtcbiAgICB1cmw6IGVuZHBvaW50ICsgJy8nICsgZWZmZWN0aXZlVmFyaWFudCxcbiAgICBkYXRhOiB7IGZlbiB9LFxuICAgIGNhY2hlOiB0cnVlXG4gIH0pLnRoZW4oKGRhdGE6IFBhcnRpYWw8VGFibGViYXNlRGF0YT4pID0+IHtcbiAgICBkYXRhLnRhYmxlYmFzZSA9IHRydWU7XG4gICAgZGF0YS5mZW4gPSBmZW47XG4gICAgcmV0dXJuIGRhdGEgYXMgVGFibGViYXNlRGF0YTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBQcm9wIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IFN0b3JlZFByb3AsIFN0b3JlZEpzb25Qcm9wIH0gZnJvbSAnY29tbW9uL3N0b3JhZ2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhvdmVyaW5nIHtcbiAgZmVuOiBGZW47XG4gIHVjaTogVWNpO1xufVxuXG5leHBvcnQgdHlwZSBFeHBsb3JlckRiID0gJ2xpY2hlc3MnIHwgJ21hc3RlcnMnO1xuXG5leHBvcnQgdHlwZSBFeHBsb3JlclNwZWVkID0gJ2J1bGxldCcgfCAnYmxpdHonIHwgJ3JhcGlkJyB8ICdjbGFzc2ljYWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEV4cGxvcmVyQ29uZmlnRGF0YSB7XG4gIG9wZW46IFByb3A8Ym9vbGVhbj47XG4gIGRiOiB7XG4gICAgYXZhaWxhYmxlOiBFeHBsb3JlckRiW107XG4gICAgc2VsZWN0ZWQ6IFN0b3JlZFByb3A8RXhwbG9yZXJEYj47XG4gIH07XG4gIHJhdGluZzoge1xuICAgIGF2YWlsYWJsZTogbnVtYmVyW107XG4gICAgc2VsZWN0ZWQ6IFN0b3JlZEpzb25Qcm9wPG51bWJlcltdPjtcbiAgfTtcbiAgc3BlZWQ6IHtcbiAgICBhdmFpbGFibGU6IEV4cGxvcmVyU3BlZWRbXTtcbiAgICBzZWxlY3RlZDogU3RvcmVkSnNvblByb3A8RXhwbG9yZXJTcGVlZFtdPjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeHBsb3JlckNvbmZpZ0N0cmwge1xuICB0cmFuczogVHJhbnM7XG4gIHJlZHJhdygpO1xuICBkYXRhOiBFeHBsb3JlckNvbmZpZ0RhdGE7XG4gIHRvZ2dsZU9wZW4oKTtcbiAgdG9nZ2xlRGIoZGI6IEV4cGxvcmVyRGIpO1xuICB0b2dnbGVSYXRpbmcocmF0aW5nOiBudW1iZXIpO1xuICB0b2dnbGVTcGVlZChzcGVlZDogc3RyaW5nKTtcbiAgZnVsbEhvdXNlKCk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXhwbG9yZXJEYXRhIHtcbiAgZmVuOiBGZW47XG4gIG1vdmVzOiBNb3ZlU3RhdHNbXTtcbiAgb3BlbmluZz86IHRydWU7XG4gIHRhYmxlYmFzZT86IHRydWU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3BlbmluZ0RhdGEgZXh0ZW5kcyBFeHBsb3JlckRhdGEge1xuICBtb3ZlczogT3BlbmluZ01vdmVTdGF0c1tdO1xuICB0b3BHYW1lcz86IE9wZW5pbmdHYW1lW107XG4gIHJlY2VudEdhbWVzPzogT3BlbmluZ0dhbWVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcGVuaW5nR2FtZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHdoaXRlOiBPcGVuaW5nUGxheWVyO1xuICBibGFjazogT3BlbmluZ1BsYXllcjtcbiAgd2lubmVyPzogQ29sb3I7XG4gIHllYXI/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBPcGVuaW5nUGxheWVyIHtcbiAgbmFtZTogc3RyaW5nO1xuICByYXRpbmc6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYWJsZWJhc2VEYXRhIGV4dGVuZHMgRXhwbG9yZXJEYXRhIHtcbiAgbW92ZXM6IFRhYmxlYmFzZU1vdmVTdGF0c1tdO1xuICB3ZGw6IG51bWJlciB8IG51bGwsXG4gIGR0ejogbnVtYmVyIHwgbnVsbCxcbiAgZHRtOiBudW1iZXIgfCBudWxsLFxuICBjaGVja21hdGU6IGJvb2xlYW47XG4gIHN0YWxlbWF0ZTogYm9vbGVhbjtcbiAgdmFyaWFudF93aW46IGJvb2xlYW47XG4gIHZhcmlhbnRfbG9zczogYm9vbGVhbjtcbiAgaW5zdWZmaWNpZW50X21hdGVyaWFsOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vdmVTdGF0cyB7XG4gIHVjaTogVWNpO1xuICBzYW46IFNhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcGVuaW5nTW92ZVN0YXRzIGV4dGVuZHMgTW92ZVN0YXRzIHtcbiAgd2hpdGU6IG51bWJlcjtcbiAgYmxhY2s6IG51bWJlcjtcbiAgZHJhd3M6IG51bWJlcjtcbiAgYXZlcmFnZVJhdGluZzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBUYWJsZWJhc2VNb3ZlU3RhdHMgZXh0ZW5kcyBNb3ZlU3RhdHMge1xuICB3ZGw6IG51bWJlciB8IG51bGw7XG4gIGR0ejogbnVtYmVyIHwgbnVsbDtcbiAgZHRtOiBudW1iZXIgfCBudWxsO1xuICBjaGVja21hdGU6IGJvb2xlYW47XG4gIHN0YWxlbWF0ZTogYm9vbGVhbjtcbiAgdmFyaWFudF93aW46IGJvb2xlYW47XG4gIHZhcmlhbnRfbG9zczogYm9vbGVhbjtcbiAgaW5zdWZmaWNpZW50X21hdGVyaWFsOiBib29sZWFuO1xuICB6ZXJvaW5nOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuaW5nKG06IEV4cGxvcmVyRGF0YSk6IG0gaXMgT3BlbmluZ0RhdGEge1xuICByZXR1cm4gISFtLm9wZW5pbmc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUYWJsZWJhc2UobTogRXhwbG9yZXJEYXRhKTogbSBpcyBUYWJsZWJhc2VEYXRhIHtcbiAgcmV0dXJuICEhbS50YWJsZWJhc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2ltcGxlVGFibGViYXNlSGl0IHtcbiAgZmVuOiBGZW47XG4gIGJlc3Q/OiBVY2k7IC8vIG5vIG1vdmUgaWYgY2hlY2ttYXRlL3N0YWxlbWF0ZVxuICB3aW5uZXI6IENvbG9yIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV4cGxvcmVyQ3RybCB7XG4gIGFsbG93ZWQ6IFByb3A8Ym9vbGVhbj47XG4gIGxvYWRpbmc6IFByb3A8Ym9vbGVhbj47XG4gIGVuYWJsZWQ6IFByb3A8Ym9vbGVhbj47XG4gIGZhaWxpbmc6IFByb3A8Ym9vbGVhbj47XG4gIG1vdmVzQXdheTogUHJvcDxudW1iZXI+O1xuICBjb25maWc6IEV4cGxvcmVyQ29uZmlnQ3RybDtcbiAgd2l0aEdhbWVzOiBib29sZWFuO1xuICBnYW1lTWVudTogUHJvcDxzdHJpbmcgfCBudWxsPjtcbiAgY3VycmVudCgpOiBFeHBsb3JlckRhdGEgfCB1bmRlZmluZWQ7XG4gIGhvdmVyaW5nOiBQcm9wPEhvdmVyaW5nIHwgbnVsbD47XG4gIHNldE5vZGUoKTtcbiAgdG9nZ2xlKCk7XG4gIGRpc2FibGUoKTtcbiAgc2V0SG92ZXJpbmcoZmVuOiBGZW4sIHVjaTogVWNpIHwgbnVsbCk7XG4gIGZldGNoTWFzdGVyT3BlbmluZyhmZW46IEZlbik6IEpRdWVyeVByb21pc2U8T3BlbmluZ0RhdGE+O1xuICBmZXRjaFRhYmxlYmFzZUhpdChmZW46IEZlbik6IEpRdWVyeVByb21pc2U8U2ltcGxlVGFibGViYXNlSGl0Pjtcbn1cbiIsImltcG9ydCB7IHByb3AgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgRm9yZWNhc3RDdHJsLCBGb3JlY2FzdERhdGEsIEZvcmVjYXN0U3RlcCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBBbmFseXNlRGF0YSB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZShjZmc6IEZvcmVjYXN0RGF0YSwgZGF0YTogQW5hbHlzZURhdGEsIHJlZHJhdzogKCkgPT4gdm9pZCk6IEZvcmVjYXN0Q3RybCB7XG5cbiAgY29uc3Qgc2F2ZVVybCA9IGAvJHtkYXRhLmdhbWUuaWR9JHtkYXRhLnBsYXllci5pZH0vZm9yZWNhc3RzYDtcblxuICBsZXQgZm9yZWNhc3RzID0gY2ZnLnN0ZXBzIHx8IFtdO1xuICBjb25zdCBsb2FkaW5nID0gcHJvcChmYWxzZSk7XG5cbiAgZnVuY3Rpb24ga2V5T2YoZmM6IEZvcmVjYXN0U3RlcFtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZmMubWFwKG5vZGUgPT4gbm9kZS5wbHkgKyAnOicgKyBub2RlLnVjaSkuam9pbignLCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29udGFpbnMoZmMxOiBGb3JlY2FzdFN0ZXBbXSwgZmMyOiBGb3JlY2FzdFN0ZXBbXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYzEubGVuZ3RoID49IGZjMi5sZW5ndGggJiYga2V5T2YoZmMxKS5zdGFydHNXaXRoKGtleU9mKGZjMikpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZFN0YXJ0aW5nV2l0aE5vZGUobm9kZTogRm9yZWNhc3RTdGVwKTogRm9yZWNhc3RTdGVwW11bXSB7XG4gICAgcmV0dXJuIGZvcmVjYXN0cy5maWx0ZXIoZnVuY3Rpb24oZmMpIHtcbiAgICAgIHJldHVybiBjb250YWlucyhmYywgW25vZGVdKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbGxpZGVzKGZjMTogRm9yZWNhc3RTdGVwW10sIGZjMjogRm9yZWNhc3RTdGVwW10pOiBib29sZWFuIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbWF4ID0gTWF0aC5taW4oZmMxLmxlbmd0aCwgZmMyLmxlbmd0aCk7IGkgPCBtYXg7IGkrKykge1xuICAgICAgaWYgKGZjMVtpXS51Y2kgIT09IGZjMltpXS51Y2kpIHtcbiAgICAgICAgaWYgKGNmZy5vbk15VHVybikgcmV0dXJuIGkgIT09IDAgJiYgaSAlIDIgPT09IDA7XG4gICAgICAgIHJldHVybiBpICUgMiA9PT0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiB0cnVuY2F0ZShmYzogRm9yZWNhc3RTdGVwW10pOiBGb3JlY2FzdFN0ZXBbXSB7XG4gICAgaWYgKGNmZy5vbk15VHVybilcbiAgICByZXR1cm4gKGZjLmxlbmd0aCAlIDIgIT09IDEgPyBmYy5zbGljZSgwLCAtMSkgOiBmYykuc2xpY2UoMCwgMzApO1xuICAgIC8vIG11c3QgZW5kIHdpdGggcGxheWVyIG1vdmVcbiAgICByZXR1cm4gKGZjLmxlbmd0aCAlIDIgIT09IDAgPyBmYy5zbGljZSgwLCAtMSkgOiBmYykuc2xpY2UoMCwgMzApO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNMb25nRW5vdWdoKGZjOiBGb3JlY2FzdFN0ZXBbXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYy5sZW5ndGggPj0gKGNmZy5vbk15VHVybiA/IDEgOiAyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpeEFsbCgpIHtcbiAgICAvLyByZW1vdmUgY29udGFpbmVkIGZvcmVjYXN0c1xuICAgIGZvcmVjYXN0cyA9IGZvcmVjYXN0cy5maWx0ZXIoZnVuY3Rpb24oZmMsIGkpIHtcbiAgICAgIHJldHVybiBmb3JlY2FzdHMuZmlsdGVyKGZ1bmN0aW9uKGYsIGopIHtcbiAgICAgICAgcmV0dXJuIGkgIT09IGogJiYgY29udGFpbnMoZiwgZmMpXG4gICAgICB9KS5sZW5ndGggPT09IDA7XG4gICAgfSk7XG4gICAgLy8gcmVtb3ZlIGNvbGxpZGluZyBmb3JlY2FzdHNcbiAgICBmb3JlY2FzdHMgPSBmb3JlY2FzdHMuZmlsdGVyKGZ1bmN0aW9uKGZjLCBpKSB7XG4gICAgICByZXR1cm4gZm9yZWNhc3RzLmZpbHRlcihmdW5jdGlvbihmLCBqKSB7XG4gICAgICAgIHJldHVybiBpIDwgaiAmJiBjb2xsaWRlcyhmLCBmYylcbiAgICAgIH0pLmxlbmd0aCA9PT0gMDtcbiAgICB9KTtcbiAgfVxuXG4gIGZpeEFsbCgpO1xuXG4gIGZ1bmN0aW9uIHJlbG9hZFRvTGFzdFBseSgpIHtcbiAgICBsb2FkaW5nKHRydWUpO1xuICAgIHJlZHJhdygpO1xuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCAnI2xhc3QnKTtcbiAgICB3aW5kb3cubGljaGVzcy5yZWxvYWQoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBpc0NhbmRpZGF0ZShmYzogRm9yZWNhc3RTdGVwW10pOiBib29sZWFuIHtcbiAgICBmYyA9IHRydW5jYXRlKGZjKTtcbiAgICBpZiAoIWlzTG9uZ0Vub3VnaChmYykpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgY29sbGlzaW9ucyA9IGZvcmVjYXN0cy5maWx0ZXIoZnVuY3Rpb24oZikge1xuICAgICAgcmV0dXJuIGNvbnRhaW5zKGYsIGZjKTtcbiAgICB9KTtcbiAgICBpZiAoY29sbGlzaW9ucy5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBmdW5jdGlvbiBzYXZlKCkge1xuICAgIGlmIChjZmcub25NeVR1cm4pIHJldHVybjtcbiAgICBsb2FkaW5nKHRydWUpO1xuICAgIHJlZHJhdygpO1xuICAgICQuYWpheCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogc2F2ZVVybCxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGZvcmVjYXN0cyksXG4gICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICBpZiAoZGF0YS5yZWxvYWQpIHJlbG9hZFRvTGFzdFBseSgpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGxvYWRpbmcoZmFsc2UpO1xuICAgICAgICBmb3JlY2FzdHMgPSBkYXRhLnN0ZXBzIHx8IFtdO1xuICAgICAgfVxuICAgICAgcmVkcmF3KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxheUFuZFNhdmUobm9kZTogRm9yZWNhc3RTdGVwKSB7XG4gICAgaWYgKCFjZmcub25NeVR1cm4pIHJldHVybjtcbiAgICBsb2FkaW5nKHRydWUpO1xuICAgIHJlZHJhdygpO1xuICAgICQuYWpheCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogc2F2ZVVybCArICcvJyArIG5vZGUudWNpLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZmluZFN0YXJ0aW5nV2l0aE5vZGUobm9kZSkuZmlsdGVyKGZ1bmN0aW9uKGZjKSB7XG4gICAgICAgIHJldHVybiBmYy5sZW5ndGggPiAxO1xuICAgICAgfSkubWFwKGZ1bmN0aW9uKGZjKSB7XG4gICAgICAgIHJldHVybiBmYy5zbGljZSgxKTtcbiAgICAgIH0pKSxcbiAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9KS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGlmIChkYXRhLnJlbG9hZCkgcmVsb2FkVG9MYXN0UGx5KCk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgbG9hZGluZyhmYWxzZSk7XG4gICAgICAgIGZvcmVjYXN0cyA9IGRhdGEuc3RlcHMgfHwgW107XG4gICAgICB9XG4gICAgICByZWRyYXcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWRkTm9kZXMoZmM6IEZvcmVjYXN0U3RlcFtdKTogdm9pZCB7XG4gICAgICBmYyA9IHRydW5jYXRlKGZjKTtcbiAgICAgIGlmICghaXNDYW5kaWRhdGUoZmMpKSByZXR1cm47XG4gICAgICBmb3JlY2FzdHMucHVzaChmYyk7XG4gICAgICBmaXhBbGwoKTtcbiAgICAgIHNhdmUoKTtcbiAgICB9LFxuICAgIGlzQ2FuZGlkYXRlLFxuICAgIHJlbW92ZUluZGV4KGluZGV4KSB7XG4gICAgICBmb3JlY2FzdHMgPSBmb3JlY2FzdHMuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleClcbiAgICAgICAgc2F2ZSgpO1xuICAgIH0sXG4gICAgbGlzdDogKCkgPT4gZm9yZWNhc3RzLFxuICAgIHRydW5jYXRlLFxuICAgIGxvYWRpbmcsXG4gICAgb25NeVR1cm46ICEhY2ZnLm9uTXlUdXJuLFxuICAgIGZpbmRTdGFydGluZ1dpdGhOb2RlLFxuICAgIHBsYXlBbmRTYXZlLFxuICAgIHJlbG9hZFRvTGFzdFBseVxuICB9O1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IEZvcmVjYXN0Q3RybCwgRm9yZWNhc3RTdGVwIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IHJlbmRlck5vZGVzSHRtbCB9IGZyb20gJy4uL3BnbkV4cG9ydCc7XG5pbXBvcnQgeyBiaW5kLCBkYXRhSWNvbiwgc3Bpbm5lciB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgZml4Q3JhenlTYW4gfSBmcm9tICdjaGVzcyc7XG5cbmZ1bmN0aW9uIG9uTXlUdXJuKGN0cmw6IEFuYWx5c2VDdHJsLCBmY3RybDogRm9yZWNhc3RDdHJsLCBjTm9kZXM6IEZvcmVjYXN0U3RlcFtdKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICB2YXIgZmlyc3ROb2RlID0gY05vZGVzWzBdO1xuICBpZiAoIWZpcnN0Tm9kZSkgcmV0dXJuO1xuICB2YXIgZmNzID0gZmN0cmwuZmluZFN0YXJ0aW5nV2l0aE5vZGUoZmlyc3ROb2RlKTtcbiAgaWYgKCFmY3MubGVuZ3RoKSByZXR1cm47XG4gIHZhciBsaW5lcyA9IGZjcy5maWx0ZXIoZnVuY3Rpb24oZmMpIHtcbiAgICByZXR1cm4gZmMubGVuZ3RoID4gMTtcbiAgfSk7XG4gIHJldHVybiBoKCdidXR0b24ub24tbXktdHVybi5idXR0b24udGV4dCcsIHtcbiAgICBhdHRyczogZGF0YUljb24oJ0UnKSxcbiAgICBob29rOiBiaW5kKCdjbGljaycsIF8gPT4gZmN0cmwucGxheUFuZFNhdmUoZmlyc3ROb2RlKSlcbiAgfSwgW1xuICAgIGgoJ3NwYW4nLCBbXG4gICAgICBoKCdzdHJvbmcnLCBjdHJsLnRyYW5zKCdwbGF5WCcsIGZpeENyYXp5U2FuKGNOb2Rlc1swXS5zYW4pKSksXG4gICAgICBsaW5lcy5sZW5ndGggP1xuICAgICAgaCgnc3BhbicsIGN0cmwudHJhbnMucGx1cmFsKCdhbmRTYXZlTmJQcmVtb3ZlTGluZXMnLCBsaW5lcy5sZW5ndGgpKSA6XG4gICAgICBoKCdzcGFuJywgY3RybC50cmFucy5ub2FyZygnbm9Db25kaXRpb25hbFByZW1vdmVzJykpXG4gICAgXSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VDbm9kZXMoY3RybDogQW5hbHlzZUN0cmwsIGZjdHJsOiBGb3JlY2FzdEN0cmwpOiBGb3JlY2FzdFN0ZXBbXSB7XG4gIGNvbnN0IGFmdGVyUGx5ID0gY3RybC50cmVlLmdldEN1cnJlbnROb2Rlc0FmdGVyUGx5KGN0cmwubm9kZUxpc3QsIGN0cmwubWFpbmxpbmUsIGN0cmwuZGF0YS5nYW1lLnR1cm5zKTtcbiAgcmV0dXJuIGZjdHJsLnRydW5jYXRlKGFmdGVyUGx5Lm1hcChub2RlID0+ICh7XG4gICAgcGx5OiBub2RlLnBseSxcbiAgICBmZW46IG5vZGUuZmVuLFxuICAgIHVjaTogbm9kZS51Y2khLFxuICAgIHNhbjogbm9kZS5zYW4hLFxuICAgIGNoZWNrOiBub2RlLmNoZWNrXG4gIH0pKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGN0cmw6IEFuYWx5c2VDdHJsLCBmY3RybDogRm9yZWNhc3RDdHJsKTogVk5vZGUge1xuICBjb25zdCBjTm9kZXMgPSBtYWtlQ25vZGVzKGN0cmwsIGZjdHJsKTtcbiAgY29uc3QgaXNDYW5kaWRhdGUgPSBmY3RybC5pc0NhbmRpZGF0ZShjTm9kZXMpO1xuICByZXR1cm4gaCgnZGl2LmZvcmVjYXN0Jywge1xuICAgIGNsYXNzOiB7IGxvYWRpbmc6IGZjdHJsLmxvYWRpbmcoKSB9XG4gIH0sIFtcbiAgICBmY3RybC5sb2FkaW5nKCkgPyBoKCdkaXYub3ZlcmxheScsIHNwaW5uZXIoKSkgOiBudWxsLFxuICAgIGgoJ2Rpdi5ib3gnLCBbXG4gICAgICBoKCdkaXYudG9wJywgY3RybC50cmFucy5ub2FyZygnY29uZGl0aW9uYWxQcmVtb3ZlcycpKSxcbiAgICAgIGgoJ2Rpdi5saXN0JywgZmN0cmwubGlzdCgpLm1hcChmdW5jdGlvbihub2RlcywgaSkge1xuICAgICAgICByZXR1cm4gaCgnZGl2LmVudHJ5LnRleHQnLCB7XG4gICAgICAgICAgYXR0cnM6IGRhdGFJY29uKCdHJylcbiAgICAgICAgfSwgW1xuICAgICAgICAgIGgoJ2EuZGVsJywge1xuICAgICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgZmN0cmwucmVtb3ZlSW5kZXgoaSk7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9LCBjdHJsLnJlZHJhdylcbiAgICAgICAgICB9LCAneCcpLFxuICAgICAgICAgIGgoJ3NhbnMnLCByZW5kZXJOb2Rlc0h0bWwobm9kZXMpKVxuICAgICAgICBdKVxuICAgICAgfSkpLFxuICAgICAgaCgnYnV0dG9uLmFkZC50ZXh0Jywge1xuICAgICAgICBjbGFzczogeyBlbmFibGVkOiBpc0NhbmRpZGF0ZSB9LFxuICAgICAgICBhdHRyczogZGF0YUljb24oaXNDYW5kaWRhdGUgPyAnTycgOiBcIu6AhVwiKSxcbiAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IGZjdHJsLmFkZE5vZGVzKG1ha2VDbm9kZXMoY3RybCwgZmN0cmwpKSwgY3RybC5yZWRyYXcpXG4gICAgICB9LCBbXG4gICAgICAgIGlzQ2FuZGlkYXRlID8gaCgnc3BhbicsIFtcbiAgICAgICAgICBoKCdzcGFuJywgY3RybC50cmFucy5ub2FyZygnYWRkQ3VycmVudFZhcmlhdGlvbicpKSxcbiAgICAgICAgICBoKCdzYW5zJywgcmVuZGVyTm9kZXNIdG1sKGNOb2RlcykpXG4gICAgICAgIF0pIDpcbiAgICAgICAgaCgnc3BhbicsIGN0cmwudHJhbnMubm9hcmcoJ3BsYXlWYXJpYXRpb25Ub0NyZWF0ZUNvbmRpdGlvbmFsUHJlbW92ZXMnKSlcbiAgICAgIF0pXG4gICAgXSksXG4gICAgZmN0cmwub25NeVR1cm4gPyBvbk15VHVybihjdHJsLCBmY3RybCwgY05vZGVzKSA6IG51bGxcbiAgXSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyByZW5kZXJJbmRleEFuZE1vdmUgfSBmcm9tICcuL21vdmVWaWV3JztcbmltcG9ydCB7IGRlZmluZWQgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgQ29uY2VhbE9mIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IG9uSW5zZXJ0IH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuL2N0cmwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvcmtDdHJsIHtcbiAgc3RhdGUoKToge1xuICAgIG5vZGU6IFRyZWUuTm9kZTtcbiAgICBzZWxlY3RlZDogbnVtYmVyO1xuICAgIGRpc3BsYXllZDogYm9vbGVhbjtcbiAgfSxcbiAgICBuZXh0OiAoKSA9PiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICBwcmV2OiAoKSA9PiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICBwcm9jZWVkOiAoaXQ/OiBudW1iZXIpID0+IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlKHJvb3Q6IEFuYWx5c2VDdHJsKTogRm9ya0N0cmwge1xuICBsZXQgcHJldjogVHJlZS5Ob2RlIHwgdW5kZWZpbmVkO1xuICBsZXQgc2VsZWN0ZWQ6IG51bWJlciA9IDA7XG4gIGZ1bmN0aW9uIGRpc3BsYXllZCgpIHtcbiAgICByZXR1cm4gcm9vdC5ub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDE7XG4gIH07XG4gIHJldHVybiB7XG4gICAgc3RhdGUoKSB7XG4gICAgICBjb25zdCBub2RlID0gcm9vdC5ub2RlO1xuICAgICAgaWYgKCFwcmV2IHx8IHByZXYhLmlkICE9PSBub2RlLmlkKSB7XG4gICAgICAgIHByZXYgPSBub2RlO1xuICAgICAgICBzZWxlY3RlZCA9IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBub2RlLFxuICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgZGlzcGxheWVkOiBkaXNwbGF5ZWQoKVxuICAgICAgfTtcbiAgICB9LFxuICAgIG5leHQoKSB7XG4gICAgICBpZiAoZGlzcGxheWVkKCkpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSBNYXRoLm1pbihyb290Lm5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgc2VsZWN0ZWQgKyAxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBwcmV2KCkge1xuICAgICAgaWYgKGRpc3BsYXllZCgpKSB7XG4gICAgICAgIHNlbGVjdGVkID0gTWF0aC5tYXgoMCwgc2VsZWN0ZWQgLSAxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBwcm9jZWVkKGl0KSB7XG4gICAgICBpZiAoZGlzcGxheWVkKCkpIHtcbiAgICAgICAgaXQgPSBkZWZpbmVkKGl0KSA/IGl0IDogc2VsZWN0ZWQ7XG4gICAgICAgIHJvb3QudXNlckp1bXBJZkNhbihyb290LnBhdGggKyByb290Lm5vZGUuY2hpbGRyZW5baXRdLmlkKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhyb290OiBBbmFseXNlQ3RybCwgY29uY2VhbE9mPzogQ29uY2VhbE9mKSB7XG4gIGlmIChyb290LmVtYmVkIHx8IHJvb3QucmV0cm8pIHJldHVybjtcbiAgY29uc3Qgc3RhdGUgPSByb290LmZvcmsuc3RhdGUoKTtcbiAgaWYgKCFzdGF0ZS5kaXNwbGF5ZWQpIHJldHVybjtcbiAgY29uc3QgaXNNYWlubGluZSA9IGNvbmNlYWxPZiAmJiByb290Lm9uTWFpbmxpbmU7XG4gIHJldHVybiBoKCdkaXYuYW5hbHlzZV9fZm9yaycsIHtcbiAgICBob29rOiBvbkluc2VydChlbCA9PiB7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICBpdCA9IHBhcnNlSW50KFxuICAgICAgICAgICAgKHRhcmdldC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50KS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXQnKSB8fFxuICAgICAgICAgICAgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pdCcpIHx8ICcnXG4gICAgICAgICAgKTtcbiAgICAgICAgcm9vdC5mb3JrLnByb2NlZWQoaXQpO1xuICAgICAgICByb290LnJlZHJhdygpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgfSxcbiAgICBzdGF0ZS5ub2RlLmNoaWxkcmVuLm1hcCgobm9kZSwgaXQpID0+IHtcbiAgICAgIGNvbnN0IGNvbmNlYWwgPSBpc01haW5saW5lICYmIGNvbmNlYWxPZiEodHJ1ZSkocm9vdC5wYXRoICsgbm9kZS5pZCwgbm9kZSk7XG4gICAgICBpZiAoIWNvbmNlYWwpIHJldHVybiBoKCdtb3ZlJywge1xuICAgICAgICBjbGFzczogeyBzZWxlY3RlZDogaXQgPT09IHN0YXRlLnNlbGVjdGVkIH0sXG4gICAgICAgIGF0dHJzOiB7ICdkYXRhLWl0JzogaXQgfVxuICAgICAgfSwgcmVuZGVySW5kZXhBbmRNb3ZlKHtcbiAgICAgICAgd2l0aERvdHM6IHRydWUsXG4gICAgICAgIHNob3dFdmFsOiByb290LnNob3dDb21wdXRlcigpLFxuICAgICAgICBzaG93R2x5cGhzOiByb290LnNob3dDb21wdXRlcigpXG4gICAgICB9LCBub2RlKSEpO1xuICAgIH0pXG4gICk7XG59XG4iLCJpbXBvcnQgKiBhcyBncmlkSGFja3MgZnJvbSAnY29tbW9uL2dyaWRIYWNrcyc7XG5cbmxldCBib290ZWQgPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblxuICAvLyBDaHJvbWUsIENocm9taXVtLCBCcmF2ZSwgT3BlcmEsIFNhZmFyaSAxMisgYXJlIE9LXG4gIGlmICh3aW5kb3cuY2hyb21lKSByZXR1cm47XG5cbiAgY29uc3QgcnVuSGFja3MgPSAoKSA9PiB7XG4gICAgaWYgKGdyaWRIYWNrcy5uZWVkc0JvYXJkSGVpZ2h0Rml4KCkpIGdyaWRIYWNrcy5maXhNYWluQm9hcmRIZWlnaHQoY29udGFpbmVyKTtcbiAgICBmaXhDaGF0SGVpZ2h0KGNvbnRhaW5lcik7XG4gIH1cblxuICBncmlkSGFja3MucnVubmVyKHJ1bkhhY2tzKTtcblxuICBncmlkSGFja3MuYmluZENoZXNzZ3JvdW5kUmVzaXplT25jZShydW5IYWNrcyk7XG5cbiAgaWYgKCFib290ZWQpIHtcbiAgICB3aW5kb3cubGljaGVzcy5wdWJzdWIub24oJ2NoYXQucmVzaXplJywgcnVuSGFja3MpO1xuICAgIGJvb3RlZCA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZml4Q2hhdEhlaWdodChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gIGNvbnN0IGNoYXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1jaGF0JykgYXMgSFRNTEVsZW1lbnQsXG4gICAgYm9hcmQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmFuYWx5c2VfX2JvYXJkIC5jZy13cmFwJykgYXMgSFRNTEVsZW1lbnQsXG4gICAgc2lkZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYW5hbHlzZV9fc2lkZScpIGFzIEhUTUxFbGVtZW50O1xuICBpZiAoY2hhdCAmJiBib2FyZCAmJiBzaWRlKSB7XG4gICAgY29uc3QgaGVpZ2h0ID0gYm9hcmQub2Zmc2V0SGVpZ2h0IC0gc2lkZS5vZmZzZXRIZWlnaHQ7XG4gICAgaWYgKGhlaWdodCkgY2hhdC5zdHlsZS5oZWlnaHQgPSBgY2FsYygke2hlaWdodH1weCAtIDJ2bWluKWA7XG4gIH1cbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgeyBDaGVzc2dyb3VuZCB9IGZyb20gJ2NoZXNzZ3JvdW5kJztcbmltcG9ydCB7IEFwaSBhcyBDZ0FwaSB9IGZyb20gJ2NoZXNzZ3JvdW5kL2FwaSc7XG5pbXBvcnQgeyBDb25maWcgYXMgQ2dDb25maWcgfSBmcm9tICdjaGVzc2dyb3VuZC9jb25maWcnO1xuaW1wb3J0ICogYXMgY2cgZnJvbSAnY2hlc3Nncm91bmQvdHlwZXMnO1xuaW1wb3J0IHsgRHJhd1NoYXBlIH0gZnJvbSAnY2hlc3Nncm91bmQvZHJhdyc7XG5pbXBvcnQgcmVzaXplSGFuZGxlIGZyb20gJ2NvbW1vbi9yZXNpemUnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4vY3RybCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoY3RybDogQW5hbHlzZUN0cmwpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYuY2ctd3JhcC5jZ3YnICsgY3RybC5jZ1ZlcnNpb24uanMsIHtcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgICAgY3RybC5jaGVzc2dyb3VuZCA9IENoZXNzZ3JvdW5kKCh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQpLCBtYWtlQ29uZmlnKGN0cmwpKTtcbiAgICAgICAgY3RybC5zZXRBdXRvU2hhcGVzKCk7XG4gICAgICAgIGlmIChjdHJsLm5vZGUuc2hhcGVzKSBjdHJsLmNoZXNzZ3JvdW5kLnNldFNoYXBlcyhjdHJsLm5vZGUuc2hhcGVzIGFzIERyYXdTaGFwZVtdKTtcbiAgICAgICAgY3RybC5jZ1ZlcnNpb24uZG9tID0gY3RybC5jZ1ZlcnNpb24uanM7XG4gICAgICB9LFxuICAgICAgZGVzdHJveTogXyA9PiBjdHJsLmNoZXNzZ3JvdW5kLmRlc3Ryb3koKVxuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9tb3RlKGdyb3VuZDogQ2dBcGksIGtleTogS2V5LCByb2xlOiBjZy5Sb2xlKSB7XG4gIGNvbnN0IHBpZWNlcyA9IHt9O1xuICBjb25zdCBwaWVjZSA9IGdyb3VuZC5zdGF0ZS5waWVjZXNba2V5XTtcbiAgaWYgKHBpZWNlICYmIHBpZWNlLnJvbGUgPT0gJ3Bhd24nKSB7XG4gICAgcGllY2VzW2tleV0gPSB7XG4gICAgICBjb2xvcjogcGllY2UuY29sb3IsXG4gICAgICByb2xlLFxuICAgICAgcHJvbW90ZWQ6IHRydWVcbiAgICB9O1xuICAgIGdyb3VuZC5zZXRQaWVjZXMocGllY2VzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNvbmZpZyhjdHJsOiBBbmFseXNlQ3RybCk6IENnQ29uZmlnIHtcbiAgY29uc3QgZCA9IGN0cmwuZGF0YSwgcHJlZiA9IGQucHJlZiwgb3B0cyA9IGN0cmwubWFrZUNnT3B0cygpO1xuICBjb25zdCBjb25maWcgPSB7XG4gICAgdHVybkNvbG9yOiBvcHRzLnR1cm5Db2xvcixcbiAgICBmZW46IG9wdHMuZmVuLFxuICAgIGNoZWNrOiBvcHRzLmNoZWNrLFxuICAgIGxhc3RNb3ZlOiBvcHRzLmxhc3RNb3ZlLFxuICAgIG9yaWVudGF0aW9uOiBjdHJsLmJvdHRvbUNvbG9yKCksXG4gICAgY29vcmRpbmF0ZXM6IHByZWYuY29vcmRzICE9PSAwICYmICFjdHJsLmVtYmVkLFxuICAgIGFkZFBpZWNlWkluZGV4OiBwcmVmLmlzM2QsXG4gICAgdmlld09ubHk6ICEhY3RybC5lbWJlZCxcbiAgICBtb3ZhYmxlOiB7XG4gICAgICBmcmVlOiBmYWxzZSxcbiAgICAgIGNvbG9yOiBvcHRzLm1vdmFibGUhLmNvbG9yLFxuICAgICAgZGVzdHM6IG9wdHMubW92YWJsZSEuZGVzdHMsXG4gICAgICBzaG93RGVzdHM6IHByZWYuZGVzdGluYXRpb24sXG4gICAgICByb29rQ2FzdGxlOiBwcmVmLnJvb2tDYXN0bGVcbiAgICB9LFxuICAgIGV2ZW50czoge1xuICAgICAgbW92ZTogY3RybC51c2VyTW92ZSxcbiAgICAgIGRyb3BOZXdQaWVjZTogY3RybC51c2VyTmV3UGllY2UsXG4gICAgICBpbnNlcnQoZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKCFjdHJsLmVtYmVkKSByZXNpemVIYW5kbGUoZWxlbWVudHMsIGN0cmwuZGF0YS5wcmVmLnJlc2l6ZUhhbmRsZSwgY3RybC5ub2RlLnBseSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBwcmVtb3ZhYmxlOiB7XG4gICAgICBlbmFibGVkOiBvcHRzLnByZW1vdmFibGUhLmVuYWJsZWQsXG4gICAgICBzaG93RGVzdHM6IHByZWYuZGVzdGluYXRpb24sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgc2V0OiBjdHJsLm9uUHJlbW92ZVNldFxuICAgICAgfVxuICAgIH0sXG4gICAgZHJhd2FibGU6IHtcbiAgICAgIGVuYWJsZWQ6ICFjdHJsLmVtYmVkLFxuICAgICAgZXJhc2VPbkNsaWNrOiAhY3RybC5vcHRzLnN0dWR5IHx8ICEhY3RybC5vcHRzLnByYWN0aWNlXG4gICAgfSxcbiAgICBoaWdobGlnaHQ6IHtcbiAgICAgIGxhc3RNb3ZlOiBwcmVmLmhpZ2hsaWdodCxcbiAgICAgIGNoZWNrOiBwcmVmLmhpZ2hsaWdodFxuICAgIH0sXG4gICAgYW5pbWF0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogcHJlZi5hbmltYXRpb25EdXJhdGlvblxuICAgIH0sXG4gICAgZGlzYWJsZUNvbnRleHRNZW51OiB0cnVlXG4gIH07XG4gIGN0cmwuc3R1ZHkgJiYgY3RybC5zdHVkeS5tdXRhdGVDZ0NvbmZpZyhjb25maWcpO1xuXG4gIHJldHVybiBjb25maWc7XG59XG4iLCJpbXBvcnQgKiBhcyBjb250cm9sIGZyb20gJy4vY29udHJvbCc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCB7IHNwaW5uZXIgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgbW9kYWwgfSBmcm9tICcuL21vZGFsJztcbmltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5cbmNvbnN0IHByZXZlbnRpbmcgPSAoZjogKCkgPT4gdm9pZCkgPT4gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBmKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kKGN0cmw6IEFuYWx5c2VDdHJsKTogdm9pZCB7XG4gIGlmICghd2luZG93Lk1vdXNldHJhcCkgcmV0dXJuO1xuICBjb25zdCBrYmQgPSB3aW5kb3cuTW91c2V0cmFwO1xuICBrYmQuYmluZChbJ2xlZnQnLCAnayddLCBwcmV2ZW50aW5nKGZ1bmN0aW9uKCkge1xuICAgIGNvbnRyb2wucHJldihjdHJsKTtcbiAgICBjdHJsLnJlZHJhdygpO1xuICB9KSk7XG4gIGtiZC5iaW5kKFsnc2hpZnQrbGVmdCcsICdzaGlmdCtrJ10sIHByZXZlbnRpbmcoZnVuY3Rpb24oKSB7XG4gICAgY29udHJvbC5leGl0VmFyaWF0aW9uKGN0cmwpO1xuICAgIGN0cmwucmVkcmF3KCk7XG4gIH0pKTtcbiAga2JkLmJpbmQoWydyaWdodCcsICdqJ10sIHByZXZlbnRpbmcoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFjdHJsLmZvcmsucHJvY2VlZCgpKSBjb250cm9sLm5leHQoY3RybCk7XG4gICAgY3RybC5yZWRyYXcoKTtcbiAgfSkpO1xuICBrYmQuYmluZChbJ3NoaWZ0K3JpZ2h0JywgJ3NoaWZ0K2onXSwgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBjb250cm9sLmVudGVyVmFyaWF0aW9uKGN0cmwpO1xuICAgIGN0cmwucmVkcmF3KCk7XG4gIH0pKTtcbiAga2JkLmJpbmQoWyd1cCcsICcwJ10sIHByZXZlbnRpbmcoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFjdHJsLmZvcmsucHJldigpKSBjb250cm9sLmZpcnN0KGN0cmwpO1xuICAgIGN0cmwucmVkcmF3KCk7XG4gIH0pKTtcbiAga2JkLmJpbmQoWydkb3duJywgJyQnXSwgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBpZiAoIWN0cmwuZm9yay5uZXh0KCkpIGNvbnRyb2wubGFzdChjdHJsKTtcbiAgICBjdHJsLnJlZHJhdygpO1xuICB9KSk7XG4gIGtiZC5iaW5kKCdzaGlmdCtjJywgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBjdHJsLnNob3dDb21tZW50cyA9ICFjdHJsLnNob3dDb21tZW50cztcbiAgICBjdHJsLmF1dG9TY3JvbGwoKTtcbiAgICBjdHJsLnJlZHJhdygpO1xuICB9KSk7XG4gIGtiZC5iaW5kKCdzaGlmdCtpJywgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBjdHJsLnRyZWVWaWV3LnRvZ2dsZSgpO1xuICAgIGN0cmwucmVkcmF3KCk7XG4gIH0pKTtcbiAga2JkLmJpbmQoJ3onLCBwcmV2ZW50aW5nKGZ1bmN0aW9uKCkge1xuICAgIGN0cmwudG9nZ2xlQ29tcHV0ZXIoKTtcbiAgICBjdHJsLnJlZHJhdygpO1xuICB9KSk7XG5cbiAgaWYgKGN0cmwuZW1iZWQpIHJldHVybjtcblxuICBrYmQuYmluZCgnc3BhY2UnLCBwcmV2ZW50aW5nKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IGdiID0gY3RybC5nYW1lYm9va1BsYXkoKTtcbiAgICBpZiAoZ2IpIGdiLm9uU3BhY2UoKTtcbiAgICBlbHNlIGlmIChjdHJsLnN0dWR5UHJhY3RpY2UpIHJldHVybjtcbiAgICBlbHNlIGlmIChjdHJsLmNldmFsLmVuYWJsZWQoKSkgY3RybC5wbGF5QmVzdE1vdmUoKTtcbiAgICBlbHNlIGN0cmwudG9nZ2xlQ2V2YWwoKTtcbiAgfSkpO1xuXG4gIGlmIChjdHJsLnN0dWR5UHJhY3RpY2UpIHJldHVybjtcblxuICBrYmQuYmluZCgnZicsIHByZXZlbnRpbmcoY3RybC5mbGlwKSk7XG4gIGtiZC5iaW5kKCc/JywgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBjdHJsLmtleWJvYXJkSGVscCA9ICFjdHJsLmtleWJvYXJkSGVscDtcbiAgICBjdHJsLnJlZHJhdygpO1xuICB9KSk7XG4gIGtiZC5iaW5kKCdsJywgcHJldmVudGluZyhjdHJsLnRvZ2dsZUNldmFsKSk7XG4gIGtiZC5iaW5kKCdhJywgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBjdHJsLnRvZ2dsZUF1dG9TaGFwZXMoIWN0cmwuc2hvd0F1dG9TaGFwZXMoKSk7XG4gICAgY3RybC5yZWRyYXcoKTtcbiAgfSkpO1xuICBrYmQuYmluZCgneCcsIHByZXZlbnRpbmcoY3RybC50b2dnbGVUaHJlYXRNb2RlKSk7XG4gIGtiZC5iaW5kKCdlJywgcHJldmVudGluZyhmdW5jdGlvbigpIHtcbiAgICBjdHJsLnRvZ2dsZUV4cGxvcmVyKCk7XG4gICAgY3RybC5yZWRyYXcoKTtcbiAgfSkpO1xuICBpZiAoY3RybC5zdHVkeSkge1xuICAgIGNvbnN0IGtleVRvTW91c2Vkb3duID0gKGtleTogc3RyaW5nLCBzZWxlY3Rvcjogc3RyaW5nKSA9PiB7XG4gICAgICBrYmQuYmluZChrZXksIHByZXZlbnRpbmcoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24odGhpczogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICB3aW5kb3cubGljaGVzcy5kaXNwYXRjaEV2ZW50KHRoaXMsICdtb3VzZWRvd24nKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSk7XG4gICAgfTtcbiAgICBrZXlUb01vdXNlZG93bignZCcsICcuc3R1ZHlfX2J1dHRvbnMgLmNvbW1lbnRzJyk7XG4gICAga2V5VG9Nb3VzZWRvd24oJ2cnLCAnLnN0dWR5X19idXR0b25zIC5nbHlwaHMnKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBBbmFseXNlQ3RybCk6IFZOb2RlIHtcbiAgcmV0dXJuIG1vZGFsKHtcbiAgICBjbGFzczogJ2tleWJvYXJkLWhlbHAnLFxuICAgIG9uSW5zZXJ0KGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgd2luZG93LmxpY2hlc3MubG9hZENzc1BhdGgoJ2FuYWx5c2Uua2V5Ym9hcmQnKVxuICAgICAgJChlbCkuZmluZCgnLnNjcm9sbGFibGUnKS5sb2FkKCcvYW5hbHlzaXMvaGVscD9zdHVkeT0nICsgKGN0cmwuc3R1ZHkgPyAxIDogMCkpO1xuICAgIH0sXG4gICAgb25DbG9zZSgpIHtcbiAgICAgIGN0cmwua2V5Ym9hcmRIZWxwID0gZmFsc2U7XG4gICAgICBjdHJsLnJlZHJhdygpO1xuICAgIH0sXG4gICAgY29udGVudDogW1xuICAgICAgaCgnZGl2LnNjcm9sbGFibGUnLCBzcGlubmVyKCkpXG4gICAgXVxuICB9KTtcbn1cbiIsImltcG9ydCB7IEFuYWx5c2VBcGksIEFuYWx5c2VPcHRzIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuL2N0cmwnO1xuXG5pbXBvcnQgbWFrZUN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCB2aWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgYm9vdCBmcm9tICcuL2Jvb3QnO1xuaW1wb3J0IHsgQ2hlc3Nncm91bmQgfSBmcm9tICdjaGVzc2dyb3VuZCc7XG5pbXBvcnQgKiBhcyBjaGF0IGZyb20gJ2NoYXQnO1xuXG5pbXBvcnQgeyBpbml0IH0gZnJvbSAnc25hYmJkb20nO1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCBrbGFzcyBmcm9tICdzbmFiYmRvbS9tb2R1bGVzL2NsYXNzJztcbmltcG9ydCBhdHRyaWJ1dGVzIGZyb20gJ3NuYWJiZG9tL21vZHVsZXMvYXR0cmlidXRlcyc7XG5pbXBvcnQgeyBtZW51SG92ZXIgfSBmcm9tICdjb21tb24vbWVudUhvdmVyJztcblxubWVudUhvdmVyKCk7XG5cbmV4cG9ydCBjb25zdCBwYXRjaCA9IGluaXQoW2tsYXNzLCBhdHRyaWJ1dGVzXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydChvcHRzOiBBbmFseXNlT3B0cyk6IEFuYWx5c2VBcGkge1xuXG4gIG9wdHMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4uYW5hbHlzZScpIGFzIEhUTUxFbGVtZW50O1xuXG4gIGxldCB2bm9kZTogVk5vZGUsIGN0cmw6IEFuYWx5c2VDdHJsO1xuXG4gIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICB2bm9kZSA9IHBhdGNoKHZub2RlLCB2aWV3KGN0cmwpKTtcbiAgfVxuXG4gIGN0cmwgPSBuZXcgbWFrZUN0cmwob3B0cywgcmVkcmF3KTtcblxuICBjb25zdCBibHVlcHJpbnQgPSB2aWV3KGN0cmwpO1xuICBvcHRzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gIHZub2RlID0gcGF0Y2gob3B0cy5lbGVtZW50LCBibHVlcHJpbnQpO1xuXG4gIHJldHVybiB7XG4gICAgc29ja2V0UmVjZWl2ZTogY3RybC5zb2NrZXQucmVjZWl2ZSxcbiAgICBwYXRoOiAoKSA9PiBjdHJsLnBhdGgsXG4gICAgc2V0Q2hhcHRlcihpZDogc3RyaW5nKSB7XG4gICAgICBpZiAoY3RybC5zdHVkeSkgY3RybC5zdHVkeS5zZXRDaGFwdGVyKGlkKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgYm9vdCB9O1xuXG4vLyB0aGF0J3MgZm9yIHRoZSByZXN0IG9mIGxpY2hlc3MgdG8gYWNjZXNzIGNoZXNzZ3JvdW5kXG4vLyB3aXRob3V0IGhhdmluZyB0byBpbmNsdWRlIGl0IGEgc2Vjb25kIHRpbWVcbndpbmRvdy5DaGVzc2dyb3VuZCA9IENoZXNzZ3JvdW5kO1xud2luZG93LkxpY2hlc3NDaGF0ID0gY2hhdDtcbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgeyBNYXliZVZOb2RlcyB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBiaW5kLCBvbkluc2VydCB9IGZyb20gJy4vdXRpbCc7XG5cbmludGVyZmFjZSBNb2RhbCB7XG4gIGNsYXNzPzogc3RyaW5nO1xuICBjb250ZW50OiBNYXliZVZOb2RlcztcbiAgb25JbnNlcnQ/OiAoZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkO1xuICBvbkNsb3NlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb2RhbChkOiBNb2RhbCk6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2RpdiNtb2RhbC1vdmVybGF5Jywge1xuICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgZC5vbkNsb3NlKVxuICB9LCBbXG4gICAgaCgnZGl2I21vZGFsLXdyYXAuc3R1ZHlfX21vZGFsLicgKyBkLmNsYXNzLCB7XG4gICAgICBob29rOiBvbkluc2VydChlbCA9PiB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICAgICAgZC5vbkluc2VydCAmJiBkLm9uSW5zZXJ0KGVsKTtcbiAgICAgIH0pXG4gICAgfSwgW1xuICAgICAgaCgnc3Bhbi5jbG9zZScsIHtcbiAgICAgICAgYXR0cnM6IHsgJ2RhdGEtaWNvbic6ICdMJyB9LFxuICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGQub25DbG9zZSlcbiAgICAgIH0pLFxuICAgICAgaCgnZGl2JywgZC5jb250ZW50KVxuICAgIF0pXG4gIF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnV0dG9uKG5hbWU6IHN0cmluZyk6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2Rpdi5mb3JtLWFjdGlvbnMuc2luZ2xlJyxcbiAgICBoKCdidXR0b24uYnV0dG9uJywge1xuICAgICAgYXR0cnM6IHsgdHlwZTogJ3N1Ym1pdCcgfSxcbiAgICB9LCBuYW1lKVxuICApO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IGZpeENyYXp5U2FuLCByZW5kZXJFdmFsIGFzIG5vcm1hbGl6ZUV2YWwgfSBmcm9tICdjaGVzcyc7XG5pbXBvcnQgeyBkZWZpbmVkIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IHZpZXcgYXMgY2V2YWxWaWV3IH0gZnJvbSAnY2V2YWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEN0eCB7XG4gIHdpdGhEb3RzPzogYm9vbGVhbjtcbiAgc2hvd0V2YWw6IGJvb2xlYW47XG4gIHNob3dHbHlwaHM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGx5VG9UdXJuKHBseTogUGx5KTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoKHBseSAtIDEpIC8gMikgKyAxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyR2x5cGhzKGdseXBocyk6IFZOb2RlW10ge1xuICByZXR1cm4gZ2x5cGhzLm1hcChnbHlwaCA9PiBoKCdnbHlwaCcsIHtcbiAgICBhdHRyczogeyB0aXRsZTogZ2x5cGgubmFtZSB9XG4gIH0sIGdseXBoLnN5bWJvbCkpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJFdmFsKGUpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdldmFsJywgZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJJbmRleFRleHQocGx5OiBQbHksIHdpdGhEb3RzPzogYm9vbGVhbik6IHN0cmluZyB7XG4gIHJldHVybiBwbHlUb1R1cm4ocGx5KSArICh3aXRoRG90cyA/IChwbHkgJSAyID09PSAxID8gJy4nIDogJy4uLicpIDogJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVySW5kZXgocGx5OiBQbHksIHdpdGhEb3RzPzogYm9vbGVhbik6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2luZGV4JywgcmVuZGVySW5kZXhUZXh0KHBseSwgd2l0aERvdHMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1vdmUoY3R4OiBDdHgsIG5vZGU6IFRyZWUuTm9kZSk6IFZOb2RlW10ge1xuICBjb25zdCBldjogYW55ID0gY2V2YWxWaWV3LmdldEJlc3RFdmFsKHtjbGllbnQ6IG5vZGUuY2V2YWwsIHNlcnZlcjogbm9kZS5ldmFsfSkgfHwge307XG4gIHJldHVybiBbaCgnc2FuJywgZml4Q3JhenlTYW4obm9kZS5zYW4hKSldXG4gICAgLmNvbmNhdCgobm9kZS5nbHlwaHMgJiYgY3R4LnNob3dHbHlwaHMpID8gcmVuZGVyR2x5cGhzKG5vZGUuZ2x5cGhzKSA6IFtdKVxuICAgIC5jb25jYXQoY3R4LnNob3dFdmFsID8gKFxuICAgICAgZGVmaW5lZChldi5jcCkgPyBbcmVuZGVyRXZhbChub3JtYWxpemVFdmFsKGV2LmNwKSldIDogKFxuICAgICAgICBkZWZpbmVkKGV2Lm1hdGUpID8gW3JlbmRlckV2YWwoJyMnICsgZXYubWF0ZSldIDogW11cbiAgICAgIClcbiAgICApIDogW10pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVySW5kZXhBbmRNb3ZlKGN0eDogQ3R4LCBub2RlKTogVk5vZGVbXSB8IHVuZGVmaW5lZCB7XG4gIGlmICghbm9kZS5zYW4pIHJldHVybjsgLy8gaW5pdGlhbCBwb3NpdGlvblxuICByZXR1cm4gW3JlbmRlckluZGV4KG5vZGUucGx5LCBjdHgud2l0aERvdHMpLCAuLi5yZW5kZXJNb3ZlKGN0eCwgbm9kZSldO1xufVxuIiwiaW1wb3J0IHsgd2lubmluZ0NoYW5jZXMgfSBmcm9tICdjZXZhbCc7XG5pbXBvcnQgeyBkZWZpbmVkIH0gZnJvbSAnY29tbW9uJztcblxuZnVuY3Rpb24gaGFzQ29tcENoaWxkKG5vZGU6IFRyZWUuTm9kZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gISFub2RlLmNoaWxkcmVuLmZpbmQoZnVuY3Rpb24oYykge1xuICAgIHJldHVybiAhIWMuY29tcDtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXh0R2x5cGhTeW1ib2woY29sb3I6IENvbG9yLCBzeW1ib2w6IHN0cmluZywgbWFpbmxpbmU6IFRyZWUuTm9kZVtdLCBmcm9tUGx5OiBudW1iZXIpOiBUcmVlLk5vZGUgfCB1bmRlZmluZWQge1xuICBjb25zdCBsZW4gPSBtYWlubGluZS5sZW5ndGg7XG4gIGlmICghbGVuKSByZXR1cm47XG4gIGNvbnN0IGZyb21JbmRleCA9IGZyb21QbHkgLSBtYWlubGluZVswXS5wbHk7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCBub2RlID0gbWFpbmxpbmVbKGZyb21JbmRleCArIGkpICUgbGVuXTtcbiAgICBjb25zdCBmb3VuZCA9IChub2RlLnBseSAlIDIgPT09IChjb2xvciA9PT0gJ3doaXRlJyA/IDEgOiAwKSkgJiYgbm9kZS5nbHlwaHMgJiYgbm9kZS5nbHlwaHMuZmluZChmdW5jdGlvbihnKSB7XG4gICAgICByZXR1cm4gZy5zeW1ib2wgPT09IHN5bWJvbDtcbiAgICB9KTtcbiAgICBpZiAoZm91bmQpIHJldHVybiBub2RlO1xuICB9XG4gIHJldHVybjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV2YWxTd2luZ3MobWFpbmxpbmU6IFRyZWUuTm9kZVtdLCBub2RlRmlsdGVyOiAobm9kZTogVHJlZS5Ob2RlKSA9PiBib29sZWFuKTogVHJlZS5Ob2RlW10ge1xuICBjb25zdCBmb3VuZDogVHJlZS5Ob2RlW10gPSBbXTtcbiAgY29uc3QgdGhyZXNob2xkID0gMC4xO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IG1haW5saW5lLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG5vZGUgPSBtYWlubGluZVtpXTtcbiAgICB2YXIgcHJldiA9IG1haW5saW5lW2kgLSAxXTtcbiAgICBpZiAobm9kZUZpbHRlcihub2RlKSAmJiBub2RlLmV2YWwgJiYgcHJldi5ldmFsKSB7XG4gICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKHdpbm5pbmdDaGFuY2VzLnBvdkRpZmYoJ3doaXRlJywgcHJldi5ldmFsLCBub2RlLmV2YWwpKTtcbiAgICAgIGlmIChkaWZmID4gdGhyZXNob2xkICYmIGhhc0NvbXBDaGlsZChwcmV2KSkgZm91bmQucHVzaChub2RlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZvdW5kO1xufVxuXG5mdW5jdGlvbiB0aHJlZWZvbGRGZW4oZmVuKSB7XG4gIHJldHVybiBmZW4uc3BsaXQoJyAnKS5zbGljZSgwLCA0KS5qb2luKCcgJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RUaHJlZWZvbGQobm9kZUxpc3QsIG5vZGUpOiB2b2lkIHtcbiAgaWYgKGRlZmluZWQobm9kZS50aHJlZWZvbGQpKSByZXR1cm47XG4gIGNvbnN0IGN1cnJlbnRGZW4gPSB0aHJlZWZvbGRGZW4obm9kZS5mZW4pO1xuICBsZXQgbmJTaW1pbGFyUG9zaXRpb25zID0gMCwgaTtcbiAgZm9yIChpIGluIG5vZGVMaXN0KVxuICAgIGlmICh0aHJlZWZvbGRGZW4obm9kZUxpc3RbaV0uZmVuKSA9PT0gY3VycmVudEZlbilcbiAgICAgIG5iU2ltaWxhclBvc2l0aW9ucysrO1xuICBub2RlLnRocmVlZm9sZCA9IG5iU2ltaWxhclBvc2l0aW9ucyA+IDI7XG59O1xuIiwiaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4vY3RybCc7XG5pbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBpbml0aWFsRmVuLCBmaXhDcmF6eVNhbiB9IGZyb20gJ2NoZXNzJztcbmltcG9ydCB7IE1heWJlVk5vZGVzIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW50ZXJmYWNlIFBnbk5vZGUge1xuICBwbHk6IFBseTtcbiAgc2FuPzogU2FuO1xufVxuXG5mdW5jdGlvbiByZW5kZXJOb2Rlc1R4dChub2RlczogUGduTm9kZVtdKTogc3RyaW5nIHtcbiAgaWYgKCFub2Rlc1swXSkgcmV0dXJuICcnO1xuICBpZiAoIW5vZGVzWzBdLnNhbikgbm9kZXMgPSBub2Rlcy5zbGljZSgxKTtcbiAgaWYgKCFub2Rlc1swXSkgcmV0dXJuICcnO1xuICB2YXIgcyA9IG5vZGVzWzBdLnBseSAlIDIgPT09IDEgPyAnJyA6IE1hdGguZmxvb3IoKG5vZGVzWzBdLnBseSArIDEpIC8gMikgKyAnLi4uICc7XG4gIG5vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSwgaSkge1xuICAgIGlmIChub2RlLnBseSA9PT0gMCkgcmV0dXJuO1xuICAgIGlmIChub2RlLnBseSAlIDIgPT09IDEpIHMgKz0gKChub2RlLnBseSArIDEpIC8gMikgKyAnLiAnXG4gICAgZWxzZSBzICs9ICcnO1xuICAgIHMgKz0gZml4Q3JhenlTYW4obm9kZS5zYW4hKSArICgoaSArIDkpICUgOCA9PT0gMCA/ICdcXG4nIDogJyAnKTtcbiAgfSk7XG4gIHJldHVybiBzLnRyaW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckZ1bGxUeHQoY3RybDogQW5hbHlzZUN0cmwpOiBzdHJpbmcge1xuICB2YXIgZyA9IGN0cmwuZGF0YS5nYW1lO1xuICB2YXIgdHh0ID0gcmVuZGVyTm9kZXNUeHQoY3RybC50cmVlLmdldE5vZGVMaXN0KGN0cmwucGF0aCkpO1xuICB2YXIgdGFnczogQXJyYXk8W3N0cmluZywgc3RyaW5nXT4gPSBbXTtcbiAgaWYgKGcudmFyaWFudC5rZXkgIT09ICdzdGFuZGFyZCcpXG4gICAgdGFncy5wdXNoKFsnVmFyaWFudCcsIGcudmFyaWFudC5uYW1lXSk7XG4gIGlmIChnLmluaXRpYWxGZW4gJiYgZy5pbml0aWFsRmVuICE9PSBpbml0aWFsRmVuKVxuICAgIHRhZ3MucHVzaChbJ0ZFTicsIGcuaW5pdGlhbEZlbl0pO1xuICBpZiAodGFncy5sZW5ndGgpXG4gICAgdHh0ID0gdGFncy5tYXAoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuICdbJyArIHRbMF0gKyAnIFwiJyArIHRbMV0gKyAnXCJdJztcbiAgICB9KS5qb2luKCdcXG4nKSArICdcXG5cXG4nICsgdHh0O1xuICByZXR1cm4gdHh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTm9kZXNIdG1sKG5vZGVzOiBQZ25Ob2RlW10pOiBNYXliZVZOb2RlcyB7XG4gIGlmICghbm9kZXNbMF0pIHJldHVybiBbXTtcbiAgaWYgKCFub2Rlc1swXS5zYW4pIG5vZGVzID0gbm9kZXMuc2xpY2UoMSk7XG4gIGlmICghbm9kZXNbMF0pIHJldHVybiBbXTtcbiAgY29uc3QgdGFnczogTWF5YmVWTm9kZXMgPSBbXTtcbiAgaWYgKG5vZGVzWzBdLnBseSAlIDIgPT09IDApIHRhZ3MucHVzaChoKCdpbmRleCcsIE1hdGguZmxvb3IoKG5vZGVzWzBdLnBseSArIDEpIC8gMikgKyAnLi4uJykpO1xuICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIGlmIChub2RlLnBseSA9PT0gMCkgcmV0dXJuO1xuICAgIGlmIChub2RlLnBseSAlIDIgPT09IDEpIHRhZ3MucHVzaChoKCdpbmRleCcsICgobm9kZS5wbHkgKyAxKSAvIDIpICsgJy4nKSk7XG4gICAgdGFncy5wdXNoKGgoJ3NhbicsIGZpeENyYXp5U2FuKG5vZGUuc2FuISkpKTtcbiAgfSk7XG4gIHJldHVybiB0YWdzO1xufVxuIiwiaW1wb3J0IHsgd2lubmluZ0NoYW5jZXMgfSBmcm9tICdjZXZhbCc7XG5pbXBvcnQgeyBFdmFsIH0gZnJvbSAnY2V2YWwnO1xuaW1wb3J0IHsgcGF0aCBhcyB0cmVlUGF0aCB9IGZyb20gJ3RyZWUnO1xuaW1wb3J0IHsgZGV0ZWN0VGhyZWVmb2xkIH0gZnJvbSAnLi4vbm9kZUZpbmRlcic7XG5pbXBvcnQgeyB0YWJsZWJhc2VHdWFyYW50ZWVkIH0gZnJvbSAnLi4vZXhwbG9yZXIvZXhwbG9yZXJDdHJsJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IFJlZHJhdyB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgZGVmaW5lZCwgcHJvcCwgUHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyBwYXJzZVVjaSB9IGZyb20gJ2NoZXNzb3BzL3V0aWwnO1xuaW1wb3J0IHsgbWFrZVNhbiB9IGZyb20gJ2NoZXNzb3BzL3Nhbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWVudCB7XG4gIHByZXY6IFRyZWUuTm9kZTtcbiAgbm9kZTogVHJlZS5Ob2RlO1xuICBwYXRoOiBUcmVlLlBhdGg7XG4gIHZlcmRpY3Q6ICdnb29kTW92ZScgfCAnaW5hY2N1cmFjeScgfCAnbWlzdGFrZScgfCAnYmx1bmRlcic7XG4gIGJlc3Q/OiB7XG4gICAgdWNpOiBVY2k7XG4gICAgc2FuOiBTYW47XG4gIH1cbn1cblxuaW50ZXJmYWNlIEhpbnRpbmcge1xuICBtb2RlOiAnbW92ZScgfCAncGllY2UnO1xuICB1Y2k6IFVjaTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmFjdGljZUN0cmwge1xuICBvbkNldmFsKCk6IHZvaWQ7XG4gIG9uSnVtcCgpOiB2b2lkO1xuICBpc015VHVybigpOiBib29sZWFuO1xuICBjb21tZW50OiBQcm9wPENvbW1lbnQgfCBudWxsPjtcbiAgcnVubmluZyxcbiAgaG92ZXJpbmcsXG4gIGhpbnRpbmcsXG4gIHJlc3VtZSxcbiAgcGxheWFibGVEZXB0aCxcbiAgcmVzZXQoKTogdm9pZDtcbiAgcHJlVXNlckp1bXAoZnJvbTogVHJlZS5QYXRoLCB0bzogVHJlZS5QYXRoKTogdm9pZDtcbiAgcG9zdFVzZXJKdW1wKGZyb206IFRyZWUuUGF0aCwgdG86IFRyZWUuUGF0aCk6IHZvaWQ7XG4gIG9uVXNlck1vdmUoKTogdm9pZDtcbiAgcGxheUNvbW1lbnRCZXN0KCk6IHZvaWQ7XG4gIGNvbW1lbnRTaGFwZShlbmFibGU6IGJvb2xlYW4pOiB2b2lkO1xuICBoaW50KCk6IHZvaWQ7XG4gIGN1cnJlbnROb2RlKCk6IFRyZWUuTm9kZTtcbiAgYm90dG9tQ29sb3IoKTogQ29sb3I7XG4gIHJlZHJhdzogUmVkcmF3XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlKHJvb3Q6IEFuYWx5c2VDdHJsLCBwbGF5YWJsZURlcHRoOiAoKSA9PiBudW1iZXIpOiBQcmFjdGljZUN0cmwge1xuXG4gIGNvbnN0IHZhcmlhbnQgPSByb290LmRhdGEuZ2FtZS52YXJpYW50LmtleSxcbiAgcnVubmluZyA9IHByb3AodHJ1ZSksXG4gIGNvbW1lbnQgPSBwcm9wPENvbW1lbnQgfCBudWxsPihudWxsKSxcbiAgaG92ZXJpbmcgPSBwcm9wPGFueT4obnVsbCksXG4gIGhpbnRpbmcgPSBwcm9wPEhpbnRpbmcgfCBudWxsPihudWxsKSxcbiAgcGxheWVkID0gcHJvcChmYWxzZSk7XG5cbiAgZnVuY3Rpb24gZW5zdXJlQ2V2YWxSdW5uaW5nKCkge1xuICAgIGlmICghcm9vdC5zaG93Q29tcHV0ZXIoKSkgcm9vdC50b2dnbGVDb21wdXRlcigpO1xuICAgIGlmICghcm9vdC5jZXZhbC5lbmFibGVkKCkpIHJvb3QudG9nZ2xlQ2V2YWwoKTtcbiAgICBpZiAocm9vdC50aHJlYXRNb2RlKCkpIHJvb3QudG9nZ2xlVGhyZWF0TW9kZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tbWVudGFibGUobm9kZTogVHJlZS5Ob2RlLCBib251czogbnVtYmVyID0gMCk6IGJvb2xlYW4ge1xuICAgIGlmIChyb290LmdhbWVPdmVyKG5vZGUpIHx8IG5vZGUudGJoaXQpIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IGNldmFsID0gbm9kZS5jZXZhbDtcbiAgICByZXR1cm4gY2V2YWwgPyAoKGNldmFsLmRlcHRoICsgYm9udXMpID49IDE1IHx8IChjZXZhbC5kZXB0aCA+PSAxMyAmJiBjZXZhbC5taWxsaXMgPiAzMDAwKSkgOiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXlhYmxlKG5vZGU6IFRyZWUuTm9kZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNldmFsID0gbm9kZS5jZXZhbDtcbiAgICByZXR1cm4gY2V2YWwgPyAoXG4gICAgICBjZXZhbC5kZXB0aCA+PSBNYXRoLm1pbihjZXZhbC5tYXhEZXB0aCB8fCA5OSwgcGxheWFibGVEZXB0aCgpKSB8fFxuICAgICAgKGNldmFsLmRlcHRoID49IDE1ICYmIChjZXZhbC5jbG91ZCB8fCBjZXZhbC5taWxsaXMgPiA1MDAwKSlcbiAgICApIDogZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgYWx0Q2FzdGxlcyA9IHtcbiAgICBlMWExOiAnZTFjMScsXG4gICAgZTFoMTogJ2UxZzEnLFxuICAgIGU4YTg6ICdlOGM4JyxcbiAgICBlOGg4OiAnZThnOCdcbiAgfTtcblxuICBmdW5jdGlvbiB0YmhpdFRvRXZhbChoaXQ6IFRyZWUuVGFibGViYXNlSGl0IHwgdW5kZWZpbmVkIHwgbnVsbCkge1xuICAgIHJldHVybiBoaXQgJiYgKFxuICAgICAgaGl0Lndpbm5lciA/IHtcbiAgICAgICAgbWF0ZTogaGl0Lndpbm5lciA9PT0gJ3doaXRlJyA/IDEwIDogLTEwXG4gICAgICB9IDogeyBjcDogMCB9XG4gICAgKTtcbiAgfVxuICBmdW5jdGlvbiBub2RlQmVzdFVjaShub2RlOiBUcmVlLk5vZGUpOiBVY2kgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiAobm9kZS50YmhpdCAmJiBub2RlLnRiaGl0LmJlc3QpIHx8IChub2RlLmNldmFsICYmIG5vZGUuY2V2YWwucHZzWzBdLm1vdmVzWzBdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2VDb21tZW50KHByZXY6IFRyZWUuTm9kZSwgbm9kZTogVHJlZS5Ob2RlLCBwYXRoOiBUcmVlLlBhdGgpOiBDb21tZW50IHtcbiAgICBsZXQgdmVyZGljdCwgYmVzdDtcbiAgICBjb25zdCBvdmVyID0gcm9vdC5nYW1lT3Zlcihub2RlKTtcblxuICAgIGlmIChvdmVyID09PSAnY2hlY2ttYXRlJykgdmVyZGljdCA9ICdnb29kTW92ZSc7XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBub2RlRXZhbDogRXZhbCA9IHRiaGl0VG9FdmFsKG5vZGUudGJoaXQpIHx8IChcbiAgICAgICAgKG5vZGUudGhyZWVmb2xkIHx8IG92ZXIgPT09ICdkcmF3JykgPyB7IGNwOiAwIH0gOiBub2RlLmNldmFsIGFzIEV2YWxcbiAgICAgICk7XG4gICAgICBjb25zdCBwcmV2RXZhbDogRXZhbCA9IHRiaGl0VG9FdmFsKHByZXYudGJoaXQpIHx8IHByZXYuY2V2YWwhO1xuICAgICAgY29uc3Qgc2hpZnQgPSAtd2lubmluZ0NoYW5jZXMucG92RGlmZihyb290LmJvdHRvbUNvbG9yKCksIG5vZGVFdmFsLCBwcmV2RXZhbCk7XG5cbiAgICAgIGJlc3QgPSBub2RlQmVzdFVjaShwcmV2KSE7XG4gICAgICBpZiAoYmVzdCA9PT0gbm9kZS51Y2kgfHwgYmVzdCA9PT0gYWx0Q2FzdGxlc1tub2RlLnVjaSFdKSBiZXN0ID0gbnVsbDtcblxuICAgICAgaWYgKCFiZXN0KSB2ZXJkaWN0ID0gJ2dvb2RNb3ZlJztcbiAgICAgIGVsc2UgaWYgKHNoaWZ0IDwgMC4wMjUpIHZlcmRpY3QgPSAnZ29vZE1vdmUnO1xuICAgICAgZWxzZSBpZiAoc2hpZnQgPCAwLjA2KSB2ZXJkaWN0ID0gJ2luYWNjdXJhY3knO1xuICAgICAgZWxzZSBpZiAoc2hpZnQgPCAwLjE0KSB2ZXJkaWN0ID0gJ21pc3Rha2UnO1xuICAgICAgZWxzZSB2ZXJkaWN0ID0gJ2JsdW5kZXInO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwcmV2LFxuICAgICAgbm9kZSxcbiAgICAgIHBhdGgsXG4gICAgICB2ZXJkaWN0LFxuICAgICAgYmVzdDogYmVzdCA/IHtcbiAgICAgICAgdWNpOiBiZXN0LFxuICAgICAgICBzYW46IHJvb3QucG9zaXRpb24ocHJldikudW53cmFwKHBvcyA9PiBtYWtlU2FuKHBvcywgcGFyc2VVY2koYmVzdCkhKSwgXyA9PiAnLS0nKSxcbiAgICAgIH0gOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNNeVR1cm4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHJvb3QudHVybkNvbG9yKCkgPT09IHJvb3QuYm90dG9tQ29sb3IoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjaGVja0NldmFsKCkge1xuICAgIGNvbnN0IG5vZGUgPSByb290Lm5vZGU7XG4gICAgaWYgKCFydW5uaW5nKCkpIHtcbiAgICAgIGNvbW1lbnQobnVsbCk7XG4gICAgICByZXR1cm4gcm9vdC5yZWRyYXcoKTtcbiAgICB9XG4gICAgaWYgKHRhYmxlYmFzZUd1YXJhbnRlZWQodmFyaWFudCwgbm9kZS5mZW4pICYmICFkZWZpbmVkKG5vZGUudGJoaXQpKSByZXR1cm47XG4gICAgZW5zdXJlQ2V2YWxSdW5uaW5nKCk7XG4gICAgaWYgKGlzTXlUdXJuKCkpIHtcbiAgICAgIGNvbnN0IGggPSBoaW50aW5nKCk7XG4gICAgICBpZiAoaCkge1xuICAgICAgICBoLnVjaSA9IG5vZGVCZXN0VWNpKG5vZGUpIHx8IGgudWNpO1xuICAgICAgICByb290LnNldEF1dG9TaGFwZXMoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29tbWVudChudWxsKTtcbiAgICAgIGlmIChub2RlLnNhbiAmJiBjb21tZW50YWJsZShub2RlKSkge1xuICAgICAgICBjb25zdCBwYXJlbnROb2RlID0gcm9vdC50cmVlLnBhcmVudE5vZGUocm9vdC5wYXRoKTtcbiAgICAgICAgaWYgKGNvbW1lbnRhYmxlKHBhcmVudE5vZGUsICsxKSkgY29tbWVudChtYWtlQ29tbWVudChwYXJlbnROb2RlLCBub2RlLCByb290LnBhdGgpKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBMb29rcyBsaWtlIHRoZSBwYXJlbnQgbm9kZSBkaWRuJ3QgZ2V0IGVub3VnaCBhbmFseXNpcyB0aW1lXG4gICAgICAgICAgICogdG8gYmUgY29tbWVudGFibGUgOi0vIGl0IGNhbiBoYXBwZW4gaWYgdGhlIHBsYXllciBwcmVtb3Zlc1xuICAgICAgICAgICAqIG9yIGp1c3QgbWFrZXMgYSBtb3ZlIGJlZm9yZSB0aGUgcG9zaXRpb24gaXMgc3VmZmljaWVudGx5IGFuYWx5c2VkLlxuICAgICAgICAgICAqIEluIHRoaXMgY2FzZSwgZmFsbCBiYWNrIHRvIGNvbXBhcmluZyB0byB0aGUgcG9zaXRpb24gYmVmb3JlLFxuICAgICAgICAgICAqIFNpbmNlIGNvbXB1dGVyIG1vdmVzIGFyZSBzdXBwb3NlZCB0byBwcmVzZXJ2ZSBldmFsIGFueXdheS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25zdCBvbGRlck5vZGUgPSByb290LnRyZWUucGFyZW50Tm9kZSh0cmVlUGF0aC5pbml0KHJvb3QucGF0aCkpO1xuICAgICAgICAgIGlmIChjb21tZW50YWJsZShvbGRlck5vZGUsICsxKSkgY29tbWVudChtYWtlQ29tbWVudChvbGRlck5vZGUsIG5vZGUsIHJvb3QucGF0aCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXBsYXllZCgpICYmIHBsYXlhYmxlKG5vZGUpKSB7XG4gICAgICAgIHJvb3QucGxheVVjaShub2RlQmVzdFVjaShub2RlKSEpO1xuICAgICAgICBwbGF5ZWQodHJ1ZSk7XG4gICAgICB9IGVsc2Ugcm9vdC5yZWRyYXcoKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gY2hlY2tDZXZhbE9yVGFibGViYXNlKCkge1xuICAgIGlmICh0YWJsZWJhc2VHdWFyYW50ZWVkKHZhcmlhbnQsIHJvb3Qubm9kZS5mZW4pKSByb290LmV4cGxvcmVyLmZldGNoVGFibGViYXNlSGl0KHJvb3Qubm9kZS5mZW4pLnRoZW4oaGl0ID0+IHtcbiAgICAgIGlmIChoaXQgJiYgcm9vdC5ub2RlLmZlbiA9PT0gaGl0LmZlbikgcm9vdC5ub2RlLnRiaGl0ID0gaGl0O1xuICAgICAgY2hlY2tDZXZhbCgpO1xuICAgIH0sICgpID0+IHtcbiAgICAgIGlmICghZGVmaW5lZChyb290Lm5vZGUudGJoaXQpKSByb290Lm5vZGUudGJoaXQgPSBudWxsO1xuICAgICAgY2hlY2tDZXZhbCgpO1xuICAgIH0pO1xuICAgIGVsc2UgY2hlY2tDZXZhbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzdW1lKCkge1xuICAgIHJ1bm5pbmcodHJ1ZSk7XG4gICAgY2hlY2tDZXZhbE9yVGFibGViYXNlKCk7XG4gIH1cblxuICB3aW5kb3cubGljaGVzcy5yZXF1ZXN0SWRsZUNhbGxiYWNrKGNoZWNrQ2V2YWxPclRhYmxlYmFzZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbkNldmFsOiBjaGVja0NldmFsLFxuICAgIG9uSnVtcCgpIHtcbiAgICAgIHBsYXllZChmYWxzZSk7XG4gICAgICBoaW50aW5nKG51bGwpO1xuICAgICAgZGV0ZWN0VGhyZWVmb2xkKHJvb3Qubm9kZUxpc3QsIHJvb3Qubm9kZSk7XG4gICAgICBjaGVja0NldmFsT3JUYWJsZWJhc2UoKTtcbiAgICB9LFxuICAgIGlzTXlUdXJuLFxuICAgIGNvbW1lbnQsXG4gICAgcnVubmluZyxcbiAgICBob3ZlcmluZyxcbiAgICBoaW50aW5nLFxuICAgIHJlc3VtZSxcbiAgICBwbGF5YWJsZURlcHRoLFxuICAgIHJlc2V0KCkge1xuICAgICAgY29tbWVudChudWxsKTtcbiAgICAgIGhpbnRpbmcobnVsbCk7XG4gICAgfSxcbiAgICBwcmVVc2VySnVtcChmcm9tOiBUcmVlLlBhdGgsIHRvOiBUcmVlLlBhdGgpIHtcbiAgICAgIGlmIChmcm9tICE9PSB0bykge1xuICAgICAgICBydW5uaW5nKGZhbHNlKTtcbiAgICAgICAgY29tbWVudChudWxsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHBvc3RVc2VySnVtcChmcm9tOiBUcmVlLlBhdGgsIHRvOiBUcmVlLlBhdGgpIHtcbiAgICAgIGlmIChmcm9tICE9PSB0byAmJiBpc015VHVybigpKSByZXN1bWUoKTtcbiAgICB9LFxuICAgIG9uVXNlck1vdmUoKSB7XG4gICAgICBydW5uaW5nKHRydWUpO1xuICAgIH0sXG4gICAgcGxheUNvbW1lbnRCZXN0KCkge1xuICAgICAgY29uc3QgYyA9IGNvbW1lbnQoKTtcbiAgICAgIGlmICghYykgcmV0dXJuO1xuICAgICAgcm9vdC5qdW1wKHRyZWVQYXRoLmluaXQoYy5wYXRoKSk7XG4gICAgICBpZiAoYy5iZXN0KSByb290LnBsYXlVY2koYy5iZXN0LnVjaSk7XG4gICAgfSxcbiAgICBjb21tZW50U2hhcGUoZW5hYmxlOiBib29sZWFuKSB7XG4gICAgICBjb25zdCBjID0gY29tbWVudCgpO1xuICAgICAgaWYgKCFlbmFibGUgfHwgIWMgfHwgIWMuYmVzdCkgaG92ZXJpbmcobnVsbCk7XG4gICAgICBlbHNlIGhvdmVyaW5nKHtcbiAgICAgICAgdWNpOiBjLmJlc3QudWNpXG4gICAgICB9KTtcbiAgICAgIHJvb3Quc2V0QXV0b1NoYXBlcygpO1xuICAgIH0sXG4gICAgaGludCgpIHtcbiAgICAgIGNvbnN0IGJlc3QgPSByb290Lm5vZGUuY2V2YWwgPyByb290Lm5vZGUuY2V2YWwucHZzWzBdLm1vdmVzWzBdIDogbnVsbCxcbiAgICAgIHByZXYgPSBoaW50aW5nKCk7XG4gICAgICBpZiAoIWJlc3QgfHwgKHByZXYgJiYgcHJldi5tb2RlID09PSAnbW92ZScpKSBoaW50aW5nKG51bGwpO1xuICAgICAgZWxzZSBoaW50aW5nKHtcbiAgICAgICAgbW9kZTogcHJldiA/ICdtb3ZlJyA6ICdwaWVjZScsXG4gICAgICAgIHVjaTogYmVzdFxuICAgICAgfSk7XG4gICAgICByb290LnNldEF1dG9TaGFwZXMoKTtcbiAgICB9LFxuICAgIGN1cnJlbnROb2RlOiAoKSA9PiByb290Lm5vZGUsXG4gICAgYm90dG9tQ29sb3I6IHJvb3QuYm90dG9tQ29sb3IsXG4gICAgcmVkcmF3OiByb290LnJlZHJhd1xuICB9O1xufTtcbiIsImltcG9ydCB7IG9wcG9zaXRlIH0gZnJvbSAnY2hlc3Nncm91bmQvdXRpbCc7XG5pbXBvcnQgeyBiaW5kIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgUHJhY3RpY2VDdHJsLCBDb21tZW50IH0gZnJvbSAnLi9wcmFjdGljZUN0cmwnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuaW1wb3J0IHsgTWF5YmVWTm9kZXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcblxuZnVuY3Rpb24gY29tbWVudEJlc3QoYzogQ29tbWVudCwgcm9vdDogQW5hbHlzZUN0cmwsIGN0cmw6IFByYWN0aWNlQ3RybCk6IE1heWJlVk5vZGVzIHtcbiAgcmV0dXJuIGMuYmVzdCA/IHJvb3QudHJhbnMudmRvbShcbiAgICBjLnZlcmRpY3QgPT09ICdnb29kTW92ZScgPyAnYW5vdGhlcldhc1gnIDogJ2Jlc3RXYXNYJyxcbiAgICBoKCdtb3ZlJywge1xuICAgICAgaG9vazoge1xuICAgICAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgICAgICBjb25zdCBlbCA9IHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGN0cmwucGxheUNvbW1lbnRCZXN0KTtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiBjdHJsLmNvbW1lbnRTaGFwZSh0cnVlKSk7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiBjdHJsLmNvbW1lbnRTaGFwZShmYWxzZSkpO1xuICAgICAgICB9LFxuICAgICAgICBkZXN0cm95OiAoKSA9PiBjdHJsLmNvbW1lbnRTaGFwZShmYWxzZSlcbiAgICAgIH1cbiAgICB9LFxuICAgIGMuYmVzdC5zYW4pXG4gICkgOiBbXTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyT2ZmVHJhY2socm9vdDogQW5hbHlzZUN0cmwsIGN0cmw6IFByYWN0aWNlQ3RybCk6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2Rpdi5wbGF5ZXIub2ZmJywgW1xuICAgIGgoJ2Rpdi5pY29uLm9mZicsICchJyksXG4gICAgaCgnZGl2Lmluc3RydWN0aW9uJywgW1xuICAgICAgaCgnc3Ryb25nJywgcm9vdC50cmFucy5ub2FyZygneW91QnJvd3NlZEF3YXknKSksXG4gICAgICBoKCdkaXYuY2hvaWNlcycsIFtcbiAgICAgICAgaCgnYScsIHsgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLnJlc3VtZSwgY3RybC5yZWRyYXcpIH0sIHJvb3QudHJhbnMubm9hcmcoJ3Jlc3VtZVByYWN0aWNlJykpXG4gICAgICBdKVxuICAgIF0pXG4gIF0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJFbmQocm9vdDogQW5hbHlzZUN0cmwsIGVuZDogc3RyaW5nKTogVk5vZGUge1xuICBjb25zdCBpc01hdGUgPSBlbmQgPT09ICdjaGVja21hdGUnO1xuICBjb25zdCBjb2xvciA9IGlzTWF0ZSA/IG9wcG9zaXRlKHJvb3QudHVybkNvbG9yKCkpIDogcm9vdC50dXJuQ29sb3IoKTtcbiAgcmV0dXJuIGgoJ2Rpdi5wbGF5ZXInLCBbXG4gICAgY29sb3IgPyBoKCdkaXYubm8tc3F1YXJlJywgaCgncGllY2Uua2luZy4nICsgY29sb3IpKSA6IGgoJ2Rpdi5pY29uLm9mZicsICchJyksXG4gICAgaCgnZGl2Lmluc3RydWN0aW9uJywgW1xuICAgICAgaCgnc3Ryb25nJywgcm9vdC50cmFucy5ub2FyZyhlbmQpKSxcbiAgICAgIGlzTWF0ZSA/XG4gICAgICAgIGgoJ2VtJywgaCgnY29sb3InLCByb290LnRyYW5zLm5vYXJnKGNvbG9yID09PSAnd2hpdGUnID8gJ3doaXRlV2luc0dhbWUnIDogJ2JsYWNrV2luc0dhbWUnKSkpIDpcbiAgICAgICAgaCgnZW0nLCByb290LnRyYW5zLm5vYXJnKCd0aGVHYW1lSXNBRHJhdycpKVxuICAgIF0pXG4gIF0pO1xufVxuXG5jb25zdCBtaW5EZXB0aCA9IDg7XG5cbmZ1bmN0aW9uIHJlbmRlckV2YWxQcm9ncmVzcyhub2RlOiBUcmVlLk5vZGUsIG1heERlcHRoOiBudW1iZXIpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYucHJvZ3Jlc3MnLCBoKCdkaXYnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIHN0eWxlOiBgd2lkdGg6ICR7bm9kZS5jZXZhbCA/ICgxMDAgKiBNYXRoLm1heCgwLCBub2RlLmNldmFsLmRlcHRoIC0gbWluRGVwdGgpIC8gKG1heERlcHRoIC0gbWluRGVwdGgpKSArICclJyA6IDB9YFxuICAgIH1cbiAgfSkpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJSdW5uaW5nKHJvb3Q6IEFuYWx5c2VDdHJsLCBjdHJsOiBQcmFjdGljZUN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IGhpbnQgPSBjdHJsLmhpbnRpbmcoKTtcbiAgcmV0dXJuIGgoJ2Rpdi5wbGF5ZXIucnVubmluZycsIFtcbiAgICBoKCdkaXYubm8tc3F1YXJlJywgaCgncGllY2Uua2luZy4nICsgcm9vdC50dXJuQ29sb3IoKSkpLFxuICAgIGgoJ2Rpdi5pbnN0cnVjdGlvbicsXG4gICAgICAoY3RybC5pc015VHVybigpID8gW2goJ3N0cm9uZycsIHJvb3QudHJhbnMubm9hcmcoJ3lvdXJUdXJuJykpXSA6IFtcbiAgICAgICAgaCgnc3Ryb25nJywgcm9vdC50cmFucy5ub2FyZygnY29tcHV0ZXJUaGlua2luZycpKSxcbiAgICAgICAgcmVuZGVyRXZhbFByb2dyZXNzKGN0cmwuY3VycmVudE5vZGUoKSwgY3RybC5wbGF5YWJsZURlcHRoKCkpXG4gICAgICBdKS5jb25jYXQoaCgnZGl2LmNob2ljZXMnLCBbXG4gICAgICAgIGN0cmwuaXNNeVR1cm4oKSA/IGgoJ2EnLCB7XG4gICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiByb290LnByYWN0aWNlIS5oaW50KCksIGN0cmwucmVkcmF3KVxuICAgICAgICB9LCByb290LnRyYW5zLm5vYXJnKGhpbnQgPyAoaGludC5tb2RlID09PSAncGllY2UnID8gJ3NlZUJlc3RNb3ZlJyA6ICdoaWRlQmVzdE1vdmUnKSA6ICdnZXRBSGludCcpKSA6ICcnXG4gICAgICBdKSkpXG4gIF0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihyb290OiBBbmFseXNlQ3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgY3RybCA9IHJvb3QucHJhY3RpY2U7XG4gIGlmICghY3RybCkgcmV0dXJuO1xuICBjb25zdCBjb21tZW50OiBDb21tZW50IHwgbnVsbCA9IGN0cmwuY29tbWVudCgpO1xuICBjb25zdCBydW5uaW5nOiBib29sZWFuID0gY3RybC5ydW5uaW5nKCk7XG4gIGNvbnN0IGVuZCA9IGN0cmwuY3VycmVudE5vZGUoKS50aHJlZWZvbGQgPyAndGhyZWVmb2xkUmVwZXRpdGlvbicgOiByb290LmdhbWVPdmVyKCk7XG4gIHJldHVybiBoKCdkaXYucHJhY3RpY2UtYm94LnRyYWluaW5nLWJveC5zdWItYm94LicgKyAoY29tbWVudCA/IGNvbW1lbnQudmVyZGljdCA6ICduby12ZXJkaWN0JyksIFtcbiAgICBoKCdkaXYudGl0bGUnLCByb290LnRyYW5zLm5vYXJnKCdwcmFjdGljZVdpdGhDb21wdXRlcicpKSxcbiAgICBoKCdkaXYuZmVlZGJhY2snLCAhcnVubmluZyA/IHJlbmRlck9mZlRyYWNrKHJvb3QsIGN0cmwpIDogKGVuZCA/IHJlbmRlckVuZChyb290LCBlbmQpIDogcmVuZGVyUnVubmluZyhyb290LCBjdHJsKSkpLFxuICAgIHJ1bm5pbmcgPyBoKCdkaXYuY29tbWVudCcsIGNvbW1lbnQgPyAoW1xuICAgICAgaCgnc3Bhbi52ZXJkaWN0Jywgcm9vdC50cmFucy5ub2FyZyhjb21tZW50LnZlcmRpY3QpKSxcbiAgICAgICcgJ1xuICAgIF0gYXMgTWF5YmVWTm9kZXMpLmNvbmNhdChjb21tZW50QmVzdChjb21tZW50LCByb290LCBjdHJsKSkgOiBbY3RybC5pc015VHVybigpIHx8IGVuZCA/ICcnIDogaCgnc3Bhbi53YWl0Jywgcm9vdC50cmFucy5ub2FyZygnZXZhbHVhdGluZ1lvdXJNb3ZlJykpXSkgOiAoXG4gICAgICBydW5uaW5nID8gaCgnZGl2LmNvbW1lbnQnKSA6IG51bGxcbiAgICApXG4gIF0pO1xufTtcbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCAqIGFzIGdyb3VuZCBmcm9tICcuL2dyb3VuZCc7XG5pbXBvcnQgeyBiaW5kLCBvbkluc2VydCB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJ2NoZXNzZ3JvdW5kL3V0aWwnO1xuaW1wb3J0IHsgUm9sZSB9IGZyb20gJ2NoZXNzZ3JvdW5kL3R5cGVzJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuL2N0cmwnO1xuaW1wb3J0IHsgSnVzdENhcHR1cmVkIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW50ZXJmYWNlIFByb21vdGluZyB7XG4gIG9yaWc6IEtleTtcbiAgZGVzdDogS2V5O1xuICBjYXB0dXJlPzogSnVzdENhcHR1cmVkO1xuICBjYWxsYmFjazogQ2FsbGJhY2tcbn1cblxudHlwZSBDYWxsYmFjayA9IChvcmlnOiBLZXksIGRlc3Q6IEtleSwgY2FwdHVyZTogSnVzdENhcHR1cmVkIHwgdW5kZWZpbmVkLCByb2xlOiBSb2xlKSA9PiB2b2lkO1xuXG5sZXQgcHJvbW90aW5nOiBQcm9tb3RpbmcgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydChjdHJsOiBBbmFseXNlQ3RybCwgb3JpZzogS2V5LCBkZXN0OiBLZXksIGNhcHR1cmU6IEp1c3RDYXB0dXJlZCB8IHVuZGVmaW5lZCwgY2FsbGJhY2s6IENhbGxiYWNrKTogYm9vbGVhbiB7XG4gIHZhciBzID0gY3RybC5jaGVzc2dyb3VuZC5zdGF0ZTtcbiAgdmFyIHBpZWNlID0gcy5waWVjZXNbZGVzdF07XG4gIGlmIChwaWVjZSAmJiBwaWVjZS5yb2xlID09ICdwYXduJyAmJiAoXG4gICAgKGRlc3RbMV0gPT0gJzgnICYmIHMudHVybkNvbG9yID09ICdibGFjaycpIHx8XG4gICAgKGRlc3RbMV0gPT0gJzEnICYmIHMudHVybkNvbG9yID09ICd3aGl0ZScpKSkge1xuICAgIHByb21vdGluZyA9IHtcbiAgICAgIG9yaWcsXG4gICAgICBkZXN0LFxuICAgICAgY2FwdHVyZSxcbiAgICAgIGNhbGxiYWNrXG4gICAgfTtcbiAgICBjdHJsLnJlZHJhdygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZmluaXNoKGN0cmw6IEFuYWx5c2VDdHJsLCByb2xlKSB7XG4gIGlmIChwcm9tb3RpbmcpIHtcbiAgICBncm91bmQucHJvbW90ZShjdHJsLmNoZXNzZ3JvdW5kLCBwcm9tb3RpbmcuZGVzdCwgcm9sZSk7XG4gICAgaWYgKHByb21vdGluZy5jYWxsYmFjaykgcHJvbW90aW5nLmNhbGxiYWNrKHByb21vdGluZy5vcmlnLCBwcm9tb3RpbmcuZGVzdCwgcHJvbW90aW5nLmNhcHR1cmUsIHJvbGUpO1xuICB9XG4gIHByb21vdGluZyA9IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbmNlbChjdHJsOiBBbmFseXNlQ3RybCkge1xuICBpZiAocHJvbW90aW5nKSB7XG4gICAgcHJvbW90aW5nID0gdW5kZWZpbmVkO1xuICAgIGN0cmwuY2hlc3Nncm91bmQuc2V0KGN0cmwuY2dDb25maWcpO1xuICAgIGN0cmwucmVkcmF3KCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyUHJvbW90aW9uKGN0cmw6IEFuYWx5c2VDdHJsLCBkZXN0OiBLZXksIHBpZWNlcywgY29sb3I6IENvbG9yLCBvcmllbnRhdGlvbjogQ29sb3IpIHtcbiAgaWYgKCFwcm9tb3RpbmcpIHJldHVybjtcblxuICBsZXQgbGVmdCA9ICg4IC0gdXRpbC5rZXkycG9zKGRlc3QpWzBdKSAqIDEyLjU7XG4gIGlmIChvcmllbnRhdGlvbiA9PT0gJ3doaXRlJykgbGVmdCA9IDg3LjUgLSBsZWZ0O1xuXG4gIGNvbnN0IHZlcnRpY2FsID0gY29sb3IgPT09IG9yaWVudGF0aW9uID8gJ3RvcCcgOiAnYm90dG9tJztcblxuICByZXR1cm4gaCgnZGl2I3Byb21vdGlvbi1jaG9pY2UuJyArIHZlcnRpY2FsLCB7XG4gICAgaG9vazogb25JbnNlcnQoZWwgPT4ge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfID0+IGNhbmNlbChjdHJsKSk7XG4gICAgICBlbC5vbmNvbnRleHRtZW51ID0gKCkgPT4gZmFsc2U7XG4gICAgfSlcbiAgfSwgcGllY2VzLm1hcChmdW5jdGlvbihzZXJ2ZXJSb2xlLCBpKSB7XG4gICAgY29uc3QgdG9wID0gKGNvbG9yID09PSBvcmllbnRhdGlvbiA/IGkgOiA3IC0gaSkgKiAxMi41O1xuICAgIHJldHVybiBoKCdzcXVhcmUnLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBzdHlsZTogJ3RvcDonICsgdG9wICsgJyU7bGVmdDonICsgbGVmdCArICclJ1xuICAgICAgfSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGZpbmlzaChjdHJsLCBzZXJ2ZXJSb2xlKTtcbiAgICAgIH0pXG4gICAgfSwgW2goJ3BpZWNlLicgKyBzZXJ2ZXJSb2xlICsgJy4nICsgY29sb3IpXSk7XG4gIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZpZXcoY3RybDogQW5hbHlzZUN0cmwpIHtcbiAgaWYgKCFwcm9tb3RpbmcpIHJldHVybjtcbiAgdmFyIHBpZWNlcyA9IFsncXVlZW4nLCAna25pZ2h0JywgJ3Jvb2snLCAnYmlzaG9wJ107XG4gIGlmIChjdHJsLmRhdGEuZ2FtZS52YXJpYW50LmtleSA9PT0gXCJhbnRpY2hlc3NcIikgcGllY2VzLnB1c2goJ2tpbmcnKTtcblxuICByZXR1cm4gcmVuZGVyUHJvbW90aW9uKGN0cmwsIHByb21vdGluZy5kZXN0LCBwaWVjZXMsXG4gICAgdXRpbC5vcHBvc2l0ZShjdHJsLmNoZXNzZ3JvdW5kLnN0YXRlLnR1cm5Db2xvciksXG4gICAgY3RybC5jaGVzc2dyb3VuZC5zdGF0ZS5vcmllbnRhdGlvbik7XG59XG4iLCJpbXBvcnQgeyBldmFsU3dpbmdzIH0gZnJvbSAnLi4vbm9kZUZpbmRlcic7XG5pbXBvcnQgeyB3aW5uaW5nQ2hhbmNlcyB9IGZyb20gJ2NldmFsJztcbmltcG9ydCB7IHBhdGggYXMgdHJlZVBhdGggfSBmcm9tICd0cmVlJztcbmltcG9ydCB7IGVtcHR5LCBwcm9wIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IE9wZW5pbmdEYXRhIH0gZnJvbSAnLi4vZXhwbG9yZXIvaW50ZXJmYWNlcyc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cm9DdHJsIHtcbiAgaXNTb2x2aW5nKCk6IGJvb2xlYW5cbiAgdHJhbnM6IFRyYW5zXG4gIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG50eXBlIEZlZWRiYWNrID0gJ2ZpbmQnIHwgJ2V2YWwnIHwgJ3dpbicgfCAnZmFpbCcgfCAndmlldyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlKHJvb3Q6IEFuYWx5c2VDdHJsKTogUmV0cm9DdHJsIHtcblxuICBjb25zdCBnYW1lID0gcm9vdC5kYXRhLmdhbWU7XG4gIGNvbnN0IGNvbG9yID0gcm9vdC5ib3R0b21Db2xvcigpO1xuICBsZXQgY2FuZGlkYXRlTm9kZXM6IFRyZWUuTm9kZVtdID0gW107XG4gIGNvbnN0IGV4cGxvcmVyQ2FuY2VsUGxpZXM6IG51bWJlcltdID0gW107XG4gIGxldCBzb2x2ZWRQbGllczogbnVtYmVyW10gPSBbXTtcbiAgY29uc3QgY3VycmVudCA9IHByb3A8YW55PihudWxsKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBwcm9wPEZlZWRiYWNrPignZmluZCcpO1xuXG4gIGNvbnN0IHJlZHJhdyA9IHJvb3QucmVkcmF3O1xuXG4gIGZ1bmN0aW9uIGlzUGx5U29sdmVkKHBseTogUGx5KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHNvbHZlZFBsaWVzLmluY2x1ZGVzKHBseSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmluZE5leHROb2RlKCk6IFRyZWUuTm9kZSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY29sb3JNb2R1bG8gPSByb290LmJvdHRvbUlzV2hpdGUoKSA/IDEgOiAwO1xuICAgIGNhbmRpZGF0ZU5vZGVzID0gZXZhbFN3aW5ncyhyb290Lm1haW5saW5lLCBuID0+IG4ucGx5ICUgMiA9PT0gY29sb3JNb2R1bG8gJiYgIWV4cGxvcmVyQ2FuY2VsUGxpZXMuaW5jbHVkZXMobi5wbHkpKTtcbiAgICByZXR1cm4gY2FuZGlkYXRlTm9kZXMuZmluZChuID0+ICFpc1BseVNvbHZlZChuLnBseSkpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGp1bXBUb05leHQoKTogdm9pZCB7XG4gICAgZmVlZGJhY2soJ2ZpbmQnKTtcbiAgICBjb25zdCBub2RlID0gZmluZE5leHROb2RlKCk7XG4gICAgaWYgKCFub2RlKSB7XG4gICAgICBjdXJyZW50KG51bGwpO1xuICAgICAgcmV0dXJuIHJlZHJhdygpO1xuICAgIH1cbiAgICBjb25zdCBmYXVsdCA9IHtcbiAgICAgIG5vZGUsXG4gICAgICBwYXRoOiByb290Lm1haW5saW5lUGF0aFRvUGx5KG5vZGUucGx5KVxuICAgIH07XG4gICAgY29uc3QgcHJldlBhdGggPSB0cmVlUGF0aC5pbml0KGZhdWx0LnBhdGgpO1xuICAgIGNvbnN0IHByZXYgPSB7XG4gICAgICBub2RlOiByb290LnRyZWUubm9kZUF0UGF0aChwcmV2UGF0aCksXG4gICAgICBwYXRoOiBwcmV2UGF0aFxuICAgIH07XG4gICAgY29uc3Qgc29sdXRpb25Ob2RlID0gcHJldi5ub2RlLmNoaWxkcmVuLmZpbmQobiA9PiAhIW4uY29tcCk7XG4gICAgY3VycmVudCh7XG4gICAgICBmYXVsdCxcbiAgICAgIHByZXYsXG4gICAgICBzb2x1dGlvbjoge1xuICAgICAgICBub2RlOiBzb2x1dGlvbk5vZGUsXG4gICAgICAgIHBhdGg6IHByZXZQYXRoICsgc29sdXRpb25Ob2RlIS5pZFxuICAgICAgfSxcbiAgICAgIG9wZW5pbmdVY2lzOiBbXVxuICAgIH0pO1xuICAgIC8vIGZldGNoIG9wZW5pbmcgZXhwbG9yZXIgbW92ZXNcbiAgICBpZiAoZ2FtZS52YXJpYW50LmtleSA9PT0gJ3N0YW5kYXJkJyAmJiBnYW1lLmRpdmlzaW9uICYmICghZ2FtZS5kaXZpc2lvbi5taWRkbGUgfHwgZmF1bHQubm9kZS5wbHkgPCBnYW1lLmRpdmlzaW9uLm1pZGRsZSkpIHtcbiAgICAgIHJvb3QuZXhwbG9yZXIuZmV0Y2hNYXN0ZXJPcGVuaW5nKHByZXYubm9kZS5mZW4pLnRoZW4oKHJlczogT3BlbmluZ0RhdGEpID0+IHtcbiAgICAgICAgY29uc3QgY3VyID0gY3VycmVudCgpO1xuICAgICAgICBjb25zdCB1Y2lzOiBVY2lbXSA9IFtdO1xuICAgICAgICByZXMhLm1vdmVzLmZvckVhY2gobSA9PiB7XG4gICAgICAgICAgaWYgKG0ud2hpdGUgKyBtLmRyYXdzICsgbS5ibGFjayA+IDEpIHVjaXMucHVzaChtLnVjaSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodWNpcy5pbmNsdWRlcyhmYXVsdC5ub2RlLnVjaSEpKSB7XG4gICAgICAgICAgZXhwbG9yZXJDYW5jZWxQbGllcy5wdXNoKGZhdWx0Lm5vZGUucGx5KTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGp1bXBUb05leHQsIDEwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VyLm9wZW5pbmdVY2lzID0gdWNpcztcbiAgICAgICAgICBjdXJyZW50KGN1cik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByb290LnVzZXJKdW1wKHByZXYucGF0aCk7XG4gICAgcmVkcmF3KCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gb25KdW1wKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vZGUgPSByb290Lm5vZGUsIGZiID0gZmVlZGJhY2soKSwgY3VyID0gY3VycmVudCgpO1xuICAgIGlmICghY3VyKSByZXR1cm47XG4gICAgaWYgKGZiID09PSAnZXZhbCcgJiYgY3VyLmZhdWx0Lm5vZGUucGx5ICE9PSBub2RlLnBseSkge1xuICAgICAgZmVlZGJhY2soJ2ZpbmQnKTtcbiAgICAgIHJvb3Quc2V0QXV0b1NoYXBlcygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNTb2x2aW5nKCkgJiYgY3VyLmZhdWx0Lm5vZGUucGx5ID09PSBub2RlLnBseSkge1xuICAgICAgaWYgKGN1ci5vcGVuaW5nVWNpcy5pbmNsdWRlcyhub2RlLnVjaSkpIG9uV2luKCk7IC8vIGZvdW5kIGluIG9wZW5pbmcgZXhwbG9yZXJcbiAgICAgIGVsc2UgaWYgKG5vZGUuY29tcCkgb25XaW4oKTsgLy8gdGhlIGNvbXB1dGVyIHNvbHV0aW9uIGxpbmVcbiAgICAgIGVsc2UgaWYgKG5vZGUuZXZhbCkgb25GYWlsKCk7IC8vIHRoZSBtb3ZlIHRoYXQgd2FzIHBsYXllZCBpbiB0aGUgZ2FtZVxuICAgICAgZWxzZSB7XG4gICAgICAgIGZlZWRiYWNrKCdldmFsJyk7XG4gICAgICAgIGlmICghcm9vdC5jZXZhbC5lbmFibGVkKCkpIHJvb3QudG9nZ2xlQ2V2YWwoKTtcbiAgICAgICAgY2hlY2tDZXZhbCgpO1xuICAgICAgfVxuICAgIH1cbiAgICByb290LnNldEF1dG9TaGFwZXMoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBpc0NldmFsUmVhZHkobm9kZTogVHJlZS5Ob2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG5vZGUuY2V2YWwgPyAoXG4gICAgICBub2RlLmNldmFsLmRlcHRoID49IDE4IHx8XG4gICAgICAobm9kZS5jZXZhbC5kZXB0aCA+PSAxNCAmJiBub2RlLmNldmFsLm1pbGxpcyA+IDcwMDApXG4gICAgKSA6IGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNoZWNrQ2V2YWwoKTogdm9pZCB7XG4gICAgdmFyIG5vZGUgPSByb290Lm5vZGUsXG4gICAgICBjdXIgPSBjdXJyZW50KCk7XG4gICAgaWYgKCFjdXIgfHwgZmVlZGJhY2soKSAhPT0gJ2V2YWwnIHx8IGN1ci5mYXVsdC5ub2RlLnBseSAhPT0gbm9kZS5wbHkpIHJldHVybjtcbiAgICBpZiAoaXNDZXZhbFJlYWR5KG5vZGUpKSB7XG4gICAgICB2YXIgZGlmZiA9IHdpbm5pbmdDaGFuY2VzLnBvdkRpZmYoY29sb3IsIG5vZGUuY2V2YWwhLCBjdXIucHJldi5ub2RlLmV2YWwpO1xuICAgICAgaWYgKGRpZmYgPiAtMC4wMzUpIG9uV2luKCk7XG4gICAgICBlbHNlIG9uRmFpbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2luKCk6IHZvaWQge1xuICAgIHNvbHZlQ3VycmVudCgpO1xuICAgIGZlZWRiYWNrKCd3aW4nKTtcbiAgICByZWRyYXcoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmFpbCgpOiB2b2lkIHtcbiAgICBmZWVkYmFjaygnZmFpbCcpO1xuICAgIGNvbnN0IGJhZCA9IHtcbiAgICAgIG5vZGU6IHJvb3Qubm9kZSxcbiAgICAgIHBhdGg6IHJvb3QucGF0aFxuICAgIH07XG4gICAgcm9vdC51c2VySnVtcChjdXJyZW50KCkucHJldi5wYXRoKTtcbiAgICBpZiAoIXJvb3QudHJlZS5wYXRoSXNNYWlubGluZShiYWQucGF0aCkgJiYgZW1wdHkoYmFkLm5vZGUuY2hpbGRyZW4pKVxuICAgICAgcm9vdC50cmVlLmRlbGV0ZU5vZGVBdChiYWQucGF0aCk7XG4gICAgcmVkcmF3KCk7XG4gIH1cblxuICBmdW5jdGlvbiB2aWV3U29sdXRpb24oKSB7XG4gICAgZmVlZGJhY2soJ3ZpZXcnKTtcbiAgICByb290LnVzZXJKdW1wKGN1cnJlbnQoKS5zb2x1dGlvbi5wYXRoKTtcbiAgICBzb2x2ZUN1cnJlbnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNraXAoKSB7XG4gICAgc29sdmVDdXJyZW50KCk7XG4gICAganVtcFRvTmV4dCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc29sdmVDdXJyZW50KCkge1xuICAgIHNvbHZlZFBsaWVzLnB1c2goY3VycmVudCgpLmZhdWx0Lm5vZGUucGx5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVDb21wdXRlckxpbmUobm9kZTogVHJlZS5Ob2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChub2RlLnBseSAlIDIgPT09IDApICE9PSAoY29sb3IgPT09ICd3aGl0ZScpICYmICFpc1BseVNvbHZlZChub2RlLnBseSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gc2hvd0JhZE5vZGUoKTogVHJlZS5Ob2RlIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjdXIgPSBjdXJyZW50KCk7XG4gICAgaWYgKGN1ciAmJiBpc1NvbHZpbmcoKSAmJiBjdXIucHJldi5wYXRoID09PSByb290LnBhdGgpIHJldHVybiBjdXIuZmF1bHQubm9kZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU29sdmluZygpOiBib29sZWFuIHtcbiAgICBjb25zdCBmYiA9IGZlZWRiYWNrKCk7XG4gICAgcmV0dXJuIGZiID09PSAnZmluZCcgfHwgZmIgPT09ICdmYWlsJztcbiAgfVxuXG4gIGp1bXBUb05leHQoKTtcblxuICBmdW5jdGlvbiBvbk1lcmdlQW5hbHlzaXNEYXRhKCkge1xuICAgIGlmIChpc1NvbHZpbmcoKSAmJiAhY3VycmVudCgpKSBqdW1wVG9OZXh0KCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGN1cnJlbnQsXG4gICAgY29sb3IsXG4gICAgaXNQbHlTb2x2ZWQsXG4gICAgb25KdW1wLFxuICAgIGp1bXBUb05leHQsXG4gICAgc2tpcCxcbiAgICB2aWV3U29sdXRpb24sXG4gICAgaGlkZUNvbXB1dGVyTGluZSxcbiAgICBzaG93QmFkTm9kZSxcbiAgICBvbkNldmFsOiBjaGVja0NldmFsLFxuICAgIG9uTWVyZ2VBbmFseXNpc0RhdGEsXG4gICAgZmVlZGJhY2ssXG4gICAgaXNTb2x2aW5nLFxuICAgIGNvbXBsZXRpb246ICgpID0+IFtzb2x2ZWRQbGllcy5sZW5ndGgsIGNhbmRpZGF0ZU5vZGVzLmxlbmd0aF0sXG4gICAgcmVzZXQoKSB7XG4gICAgICBzb2x2ZWRQbGllcyA9IFtdO1xuICAgICAganVtcFRvTmV4dCgpO1xuICAgIH0sXG4gICAgY2xvc2U6IHJvb3QudG9nZ2xlUmV0cm8sXG4gICAgdHJhbnM6IHJvb3QudHJhbnMsXG4gICAgbm9hcmc6IHJvb3QudHJhbnMubm9hcmcsXG4gICAgbm9kZTogKCkgPT4gcm9vdC5ub2RlLFxuICAgIHJlZHJhd1xuICB9O1xufTtcbiIsImltcG9ydCB7IHJlbmRlckluZGV4QW5kTW92ZSB9IGZyb20gJy4uL21vdmVWaWV3JztcbmltcG9ydCB7IFJldHJvQ3RybCB9IGZyb20gJy4vcmV0cm9DdHJsJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IGJpbmQsIGRhdGFJY29uLCBzcGlubmVyIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuXG5mdW5jdGlvbiBza2lwT3JWaWV3U29sdXRpb24oY3RybDogUmV0cm9DdHJsKSB7XG4gIHJldHVybiBoKCdkaXYuY2hvaWNlcycsIFtcbiAgICBoKCdhJywge1xuICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLnZpZXdTb2x1dGlvbiwgY3RybC5yZWRyYXcpXG4gICAgfSwgY3RybC5ub2FyZygndmlld1RoZVNvbHV0aW9uJykpLFxuICAgIGgoJ2EnLCB7XG4gICAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwuc2tpcClcbiAgICB9LCBjdHJsLm5vYXJnKCdza2lwVGhpc01vdmUnKSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIGp1bXBUb05leHQoY3RybDogUmV0cm9DdHJsKSB7XG4gIHJldHVybiBoKCdhLmhhbGYuY29udGludWUnLCB7XG4gICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLmp1bXBUb05leHQpXG4gIH0sIFtcbiAgICBoKCdpJywgeyBhdHRyczogZGF0YUljb24oJ0cnKSB9KSxcbiAgICBjdHJsLm5vYXJnKCduZXh0JylcbiAgXSk7XG59XG5cbmNvbnN0IG1pbkRlcHRoID0gODtcbmNvbnN0IG1heERlcHRoID0gMTg7XG5cbmZ1bmN0aW9uIHJlbmRlckV2YWxQcm9ncmVzcyhub2RlOiBUcmVlLk5vZGUpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYucHJvZ3Jlc3MnLCBoKCdkaXYnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIHN0eWxlOiBgd2lkdGg6ICR7bm9kZS5jZXZhbCA/ICgxMDAgKiBNYXRoLm1heCgwLCBub2RlLmNldmFsLmRlcHRoIC0gbWluRGVwdGgpIC8gKG1heERlcHRoIC0gbWluRGVwdGgpKSArICclJyA6IDB9YFxuICAgIH1cbiAgfSkpO1xufVxuXG5jb25zdCBmZWVkYmFjayA9IHtcbiAgZmluZChjdHJsOiBSZXRyb0N0cmwpOiBWTm9kZVtdIHtcbiAgICByZXR1cm4gW1xuICAgICAgaCgnZGl2LnBsYXllcicsIFtcbiAgICAgICAgaCgnZGl2Lm5vLXNxdWFyZScsIGgoJ3BpZWNlLmtpbmcuJyArIGN0cmwuY29sb3IpKSxcbiAgICAgICAgaCgnZGl2Lmluc3RydWN0aW9uJywgW1xuICAgICAgICAgIGgoJ3N0cm9uZycsIGN0cmwudHJhbnMudmRvbSgneFdhc1BsYXllZCcsIGgoJ21vdmUnLCByZW5kZXJJbmRleEFuZE1vdmUoe1xuICAgICAgICAgICAgd2l0aERvdHM6IHRydWUsXG4gICAgICAgICAgICBzaG93R2x5cGhzOiB0cnVlLFxuICAgICAgICAgICAgc2hvd0V2YWw6IGZhbHNlXG4gICAgICAgICAgfSwgY3RybC5jdXJyZW50KCkuZmF1bHQubm9kZSkhKSkpLFxuICAgICAgICAgIGgoJ2VtJywgY3RybC5ub2FyZyhjdHJsLmNvbG9yID09PSAnd2hpdGUnID8gJ2ZpbmRCZXR0ZXJNb3ZlRm9yV2hpdGUnIDogJ2ZpbmRCZXR0ZXJNb3ZlRm9yQmxhY2snKSksXG4gICAgICAgICAgc2tpcE9yVmlld1NvbHV0aW9uKGN0cmwpXG4gICAgICAgIF0pXG4gICAgICBdKVxuICAgIF07XG4gIH0sXG4gIC8vIHVzZXIgaGFzIGJyb3dzZWQgYXdheSBmcm9tIHRoZSBtb3ZlIHRvIHNvbHZlXG4gIG9mZlRyYWNrKGN0cmw6IFJldHJvQ3RybCk6IFZOb2RlW10ge1xuICAgIHJldHVybiBbXG4gICAgICBoKCdkaXYucGxheWVyJywgW1xuICAgICAgICBoKCdkaXYuaWNvbi5vZmYnLCAnIScpLFxuICAgICAgICBoKCdkaXYuaW5zdHJ1Y3Rpb24nLCBbXG4gICAgICAgICAgaCgnc3Ryb25nJywgY3RybC5ub2FyZygneW91QnJvd3NlZEF3YXknKSksXG4gICAgICAgICAgaCgnZGl2LmNob2ljZXMub2ZmJywgW1xuICAgICAgICAgICAgaCgnYScsIHtcbiAgICAgICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLmp1bXBUb05leHQpXG4gICAgICAgICAgICB9LCBjdHJsLm5vYXJnKCdyZXN1bWVMZWFybmluZycpKVxuICAgICAgICAgIF0pXG4gICAgICAgIF0pXG4gICAgICBdKVxuICAgIF07XG4gIH0sXG4gIGZhaWwoY3RybDogUmV0cm9DdHJsKTogVk5vZGVbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGgoJ2Rpdi5wbGF5ZXInLCBbXG4gICAgICAgIGgoJ2Rpdi5pY29uJywgJ+KclycpLFxuICAgICAgICBoKCdkaXYuaW5zdHJ1Y3Rpb24nLCBbXG4gICAgICAgICAgaCgnc3Ryb25nJywgY3RybC5ub2FyZygneW91Q2FuRG9CZXR0ZXInKSksXG4gICAgICAgICAgaCgnZW0nLCBjdHJsLm5vYXJnKGN0cmwuY29sb3IgPT09ICd3aGl0ZScgPyAndHJ5QW5vdGhlck1vdmVGb3JXaGl0ZScgOiAndHJ5QW5vdGhlck1vdmVGb3JCbGFjaycpKSxcbiAgICAgICAgICBza2lwT3JWaWV3U29sdXRpb24oY3RybClcbiAgICAgICAgXSlcbiAgICAgIF0pXG4gICAgXTtcbiAgfSxcbiAgd2luKGN0cmw6IFJldHJvQ3RybCk6IFZOb2RlW10ge1xuICAgIHJldHVybiBbXG4gICAgICBoKCdkaXYuaGFsZi50b3AnLFxuICAgICAgICBoKCdkaXYucGxheWVyJywgW1xuICAgICAgICAgIGgoJ2Rpdi5pY29uJywgJ+KckycpLFxuICAgICAgICAgIGgoJ2Rpdi5pbnN0cnVjdGlvbicsIGgoJ3N0cm9uZycsIGN0cmwubm9hcmcoJ2dvb2RNb3ZlJykpKVxuICAgICAgICBdKVxuICAgICAgKSxcbiAgICAgIGp1bXBUb05leHQoY3RybClcbiAgICBdO1xuICB9LFxuICB2aWV3KGN0cmw6IFJldHJvQ3RybCk6IFZOb2RlW10ge1xuICAgIHJldHVybiBbXG4gICAgICBoKCdkaXYuaGFsZi50b3AnLFxuICAgICAgICBoKCdkaXYucGxheWVyJywgW1xuICAgICAgICAgIGgoJ2Rpdi5pY29uJywgJ+KckycpLFxuICAgICAgICAgIGgoJ2Rpdi5pbnN0cnVjdGlvbicsIFtcbiAgICAgICAgICAgIGgoJ3N0cm9uZycsIGN0cmwubm9hcmcoJ3NvbHV0aW9uJykpLFxuICAgICAgICAgICAgaCgnZW0nLCBjdHJsLnRyYW5zLnZkb20oJ2Jlc3RXYXNYJywgaCgnc3Ryb25nJywgcmVuZGVySW5kZXhBbmRNb3ZlKHtcbiAgICAgICAgICAgICAgd2l0aERvdHM6IHRydWUsXG4gICAgICAgICAgICAgIHNob3dFdmFsOiBmYWxzZVxuICAgICAgICAgICAgfSwgY3RybC5jdXJyZW50KCkuc29sdXRpb24ubm9kZSkhKSkpXG4gICAgICAgICAgXSlcbiAgICAgICAgXSlcbiAgICAgICksXG4gICAgICBqdW1wVG9OZXh0KGN0cmwpXG4gICAgXTtcbiAgfSxcbiAgZXZhbChjdHJsOiBSZXRyb0N0cmwpOiBWTm9kZVtdIHtcbiAgICByZXR1cm4gW1xuICAgICAgaCgnZGl2LmhhbGYudG9wJyxcbiAgICAgICAgaCgnZGl2LnBsYXllci5jZW50ZXInLCBbXG4gICAgICAgICAgaCgnZGl2Lmluc3RydWN0aW9uJywgW1xuICAgICAgICAgICAgaCgnc3Ryb25nJywgY3RybC5ub2FyZygnZXZhbHVhdGluZ1lvdXJNb3ZlJykpLFxuICAgICAgICAgICAgcmVuZGVyRXZhbFByb2dyZXNzKGN0cmwubm9kZSgpKVxuICAgICAgICAgIF0pXG4gICAgICAgIF0pXG4gICAgICApXG4gICAgXTtcbiAgfSxcbiAgZW5kKGN0cmw6IFJldHJvQ3RybCwgZmxpcDogKCkgPT4gdm9pZCwgaGFzRnVsbENvbXB1dGVyQW5hbHlzaXM6ICgpID0+IGJvb2xlYW4pOiBWTm9kZVtdIHtcbiAgICBpZiAoIWhhc0Z1bGxDb21wdXRlckFuYWx5c2lzKCkpIHJldHVybiBbXG4gICAgICBoKCdkaXYuaGFsZi50b3AnLFxuICAgICAgICBoKCdkaXYucGxheWVyJywgW1xuICAgICAgICAgIGgoJ2Rpdi5pY29uJywgc3Bpbm5lcigpKSxcbiAgICAgICAgICBoKCdkaXYuaW5zdHJ1Y3Rpb24nLCBjdHJsLm5vYXJnKCd3YWl0aW5nRm9yQW5hbHlzaXMnKSlcbiAgICAgICAgXSlcbiAgICAgIClcbiAgICBdO1xuICAgIGNvbnN0IG5vdGhpbmcgPSAhY3RybC5jb21wbGV0aW9uKClbMV07XG4gICAgcmV0dXJuIFtcbiAgICAgIGgoJ2Rpdi5wbGF5ZXInLCBbXG4gICAgICAgIGgoJ2Rpdi5uby1zcXVhcmUnLCBoKCdwaWVjZS5raW5nLicgKyBjdHJsLmNvbG9yKSksXG4gICAgICAgIGgoJ2Rpdi5pbnN0cnVjdGlvbicsIFtcbiAgICAgICAgICBoKCdlbScsIG5vdGhpbmcgP1xuICAgICAgICAgICAgY3RybC5ub2FyZyhjdHJsLmNvbG9yID09PSAnd2hpdGUnID8gJ25vTWlzdGFrZXNGb3VuZEZvcldoaXRlJyA6ICdub01pc3Rha2VzRm91bmRGb3JCbGFjaycpIDpcbiAgICAgICAgICAgIGN0cmwubm9hcmcoY3RybC5jb2xvciA9PT0gJ3doaXRlJyA/ICdkb25lUmV2aWV3aW5nV2hpdGVNaXN0YWtlcycgOiAnZG9uZVJldmlld2luZ0JsYWNrTWlzdGFrZXMnKSksXG4gICAgICAgICAgaCgnZGl2LmNob2ljZXMuZW5kJywgW1xuICAgICAgICAgICAgbm90aGluZyA/IG51bGwgOiBoKCdhJywge1xuICAgICAgICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwucmVzZXQpXG4gICAgICAgICAgICB9LCBjdHJsLm5vYXJnKCdkb0l0QWdhaW4nKSksXG4gICAgICAgICAgICBoKCdhJywge1xuICAgICAgICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGZsaXApXG4gICAgICAgICAgICB9LCBjdHJsLm5vYXJnKGN0cmwuY29sb3IgPT09ICd3aGl0ZScgPyAncmV2aWV3QmxhY2tNaXN0YWtlcycgOiAncmV2aWV3V2hpdGVNaXN0YWtlcycpKVxuICAgICAgICAgIF0pXG4gICAgICAgIF0pXG4gICAgICBdKVxuICAgIF07XG4gIH0sXG59O1xuXG5mdW5jdGlvbiByZW5kZXJGZWVkYmFjayhyb290OiBBbmFseXNlQ3RybCwgZmIpIHtcbiAgY29uc3QgY3RybDogUmV0cm9DdHJsID0gcm9vdC5yZXRybyE7XG4gIGNvbnN0IGN1cnJlbnQgPSBjdHJsLmN1cnJlbnQoKTtcbiAgaWYgKGN0cmwuaXNTb2x2aW5nKCkgJiYgY3VycmVudCAmJiByb290LnBhdGggIT09IGN1cnJlbnQucHJldi5wYXRoKVxuICAgIHJldHVybiBmZWVkYmFjay5vZmZUcmFjayhjdHJsKTtcbiAgaWYgKGZiID09PSAnZmluZCcpIHJldHVybiBjdXJyZW50ID8gZmVlZGJhY2suZmluZChjdHJsKSA6XG4gICAgZmVlZGJhY2suZW5kKGN0cmwsIHJvb3QuZmxpcCwgcm9vdC5oYXNGdWxsQ29tcHV0ZXJBbmFseXNpcyk7XG4gIHJldHVybiBmZWVkYmFja1tmYl0oY3RybCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHJvb3Q6IEFuYWx5c2VDdHJsKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICBjb25zdCBjdHJsID0gcm9vdC5yZXRybztcbiAgaWYgKCFjdHJsKSByZXR1cm47XG4gIGNvbnN0IGZiID0gY3RybC5mZWVkYmFjaygpLFxuICAgIGNvbXBsZXRpb24gPSBjdHJsLmNvbXBsZXRpb24oKTtcbiAgcmV0dXJuIGgoJ2Rpdi5yZXRyby1ib3gudHJhaW5pbmctYm94LnN1Yi1ib3gnLCBbXG4gICAgaCgnZGl2LnRpdGxlJywgW1xuICAgICAgaCgnc3BhbicsIGN0cmwubm9hcmcoJ2xlYXJuRnJvbVlvdXJNaXN0YWtlcycpKSxcbiAgICAgIGgoJ3NwYW4nLCBNYXRoLm1pbihjb21wbGV0aW9uWzBdICsgMSwgY29tcGxldGlvblsxXSkgKyAnIC8gJyArIGNvbXBsZXRpb25bMV0pXG4gICAgXSksXG4gICAgaCgnZGl2LmZlZWRiYWNrLicgKyBmYiwgcmVuZGVyRmVlZGJhY2socm9vdCwgZmIpKVxuICBdKTtcbn07XG4iLCJpbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCB7IGRlZmluZWQgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgYmFzZVVybCB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBBbmFseXNlRGF0YSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjdHJsOiBBbmFseXNlQ3RybCkge1xuXG4gIGNvbnN0IGxpID0gd2luZG93LmxpY2hlc3M7XG5cbiAgJChlbGVtZW50KS5yZXBsYWNlV2l0aChjdHJsLm9wdHMuJHVuZGVyYm9hcmQhKTtcblxuICAkKCcjYWR2LWNoYXJ0JykuYXR0cignaWQnLCAnYWNwbC1jaGFydCcpO1xuXG4gIGNvbnN0IGRhdGEgPSBjdHJsLmRhdGEsXG4gICAgJHBhbmVscyA9ICQoJy5hbmFseXNlX191bmRlcmJvYXJkX19wYW5lbHMgPiBkaXYnKSxcbiAgICAkbWVudSA9ICQoJy5hbmFseXNlX191bmRlcmJvYXJkX19tZW51JyksXG4gICAgJHRpbWVDaGFydCA9ICQoXCIjbW92ZXRpbWVzLWNoYXJ0XCIpLFxuICAgIGlucHV0RmVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFuYWx5c2VfX3VuZGVyYm9hcmRfX2ZlbicpIGFzIEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgdW5zZWxlY3QgPSBjaGFydCA9PiB7XG4gICAgICBjaGFydC5nZXRTZWxlY3RlZFBvaW50cygpLmZvckVhY2goZnVuY3Rpb24ocG9pbnQpIHtcbiAgICAgICAgcG9pbnQuc2VsZWN0KGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIGxldCBsYXN0RmVuOiBzdHJpbmc7XG5cbiAgaWYgKCFsaS5BbmFseXNlTlZVSSkge1xuICAgIGxpLnB1YnN1Yi5vbignYW5hbHlzaXMuY29tcC50b2dnbGUnLCAodjogYm9vbGVhbikgPT4ge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgKHYgPyAkbWVudS5maW5kKCdbZGF0YS1wYW5lbD1cImNvbXB1dGVyLWFuYWx5c2lzXCJdJykgOiAkbWVudS5maW5kKCdzcGFuOmVxKDEpJykpLnRyaWdnZXIoJ21vdXNlZG93bicpO1xuICAgICAgfSwgNTApO1xuICAgIH0pO1xuICAgIGxpLnB1YnN1Yi5vbignYW5hbHlzaXMuY2hhbmdlJywgKGZlbjogRmVuLCBfLCBtYWlubGluZVBseTogUGx5IHwgZmFsc2UpID0+IHtcbiAgICAgIGxldCBjaGFydCwgcG9pbnQsICRjaGFydCA9ICQoXCIjYWNwbC1jaGFydFwiKTtcbiAgICAgIGlmIChmZW4gJiYgZmVuICE9PSBsYXN0RmVuKSB7XG4gICAgICAgIGlucHV0RmVuLnZhbHVlID0gZmVuO1xuICAgICAgICBsYXN0RmVuID0gZmVuO1xuICAgICAgfVxuICAgICAgaWYgKCRjaGFydC5sZW5ndGgpIHtcbiAgICAgICAgY2hhcnQgPSB3aW5kb3cuSGlnaGNoYXJ0cyAmJiAkY2hhcnQuaGlnaGNoYXJ0cygpO1xuICAgICAgICBpZiAoY2hhcnQpIHtcbiAgICAgICAgICBpZiAobWFpbmxpbmVQbHkgIT0gY2hhcnQubGFzdFBseSkge1xuICAgICAgICAgICAgaWYgKG1haW5saW5lUGx5ID09PSBmYWxzZSkgdW5zZWxlY3QoY2hhcnQpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHBvaW50ID0gY2hhcnQuc2VyaWVzWzBdLmRhdGFbbWFpbmxpbmVQbHkgLSAxIC0gZGF0YS5nYW1lLnN0YXJ0ZWRBdFR1cm5dO1xuICAgICAgICAgICAgICBpZiAoZGVmaW5lZChwb2ludCkpIHBvaW50LnNlbGVjdCgpO1xuICAgICAgICAgICAgICBlbHNlIHVuc2VsZWN0KGNoYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhcnQubGFzdFBseSA9IG1haW5saW5lUGx5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoJHRpbWVDaGFydC5sZW5ndGgpIHtcbiAgICAgICAgY2hhcnQgPSB3aW5kb3cuSGlnaGNoYXJ0cyAmJiAkdGltZUNoYXJ0LmhpZ2hjaGFydHMoKTtcbiAgICAgICAgaWYgKGNoYXJ0KSB7XG4gICAgICAgICAgaWYgKG1haW5saW5lUGx5ICE9IGNoYXJ0Lmxhc3RQbHkpIHtcbiAgICAgICAgICAgIGlmIChtYWlubGluZVBseSA9PT0gZmFsc2UpIHVuc2VsZWN0KGNoYXJ0KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCB3aGl0ZSA9IG1haW5saW5lUGx5ICUgMiAhPT0gMDtcbiAgICAgICAgICAgICAgY29uc3Qgc2VyaWUgPSB3aGl0ZSA/IDAgOiAxO1xuICAgICAgICAgICAgICBjb25zdCB0dXJuID0gTWF0aC5mbG9vcigobWFpbmxpbmVQbHkgLSAxIC0gZGF0YS5nYW1lLnN0YXJ0ZWRBdFR1cm4pIC8gMik7XG4gICAgICAgICAgICAgIHBvaW50ID0gY2hhcnQuc2VyaWVzW3NlcmllXS5kYXRhW3R1cm5dO1xuICAgICAgICAgICAgICBpZiAoZGVmaW5lZChwb2ludCkpIHBvaW50LnNlbGVjdCgpO1xuICAgICAgICAgICAgICBlbHNlIHVuc2VsZWN0KGNoYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhcnQubGFzdFBseSA9IG1haW5saW5lUGx5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGkucHVic3ViLm9uKCdhbmFseXNpcy5zZXJ2ZXIucHJvZ3Jlc3MnLCAoZDogQW5hbHlzZURhdGEpID0+IHtcbiAgICAgIGlmICghbGkuYWR2YW50YWdlQ2hhcnQpIHN0YXJ0QWR2YW50YWdlQ2hhcnQoKTtcbiAgICAgIGVsc2UgaWYgKGxpLmFkdmFudGFnZUNoYXJ0LnVwZGF0ZSkgbGkuYWR2YW50YWdlQ2hhcnQudXBkYXRlKGQpO1xuICAgICAgaWYgKGQuYW5hbHlzaXMgJiYgIWQuYW5hbHlzaXMucGFydGlhbCkgJChcIiNhY3BsLWNoYXJ0LWxvYWRlclwiKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYXJ0TG9hZGVyKCkge1xuICAgIHJldHVybiAnPGRpdiBpZD1cImFjcGwtY2hhcnQtbG9hZGVyXCI+JyArXG4gICAgICAnPHNwYW4+JyArIGxpLmVuZ2luZU5hbWUgKyAnPGJyPnNlcnZlciBhbmFseXNpczwvc3Bhbj4nICtcbiAgICAgIGxpLnNwaW5uZXJIdG1sICtcbiAgICAgICc8L2Rpdj4nXG4gIH07XG4gIGZ1bmN0aW9uIHN0YXJ0QWR2YW50YWdlQ2hhcnQoKSB7XG4gICAgaWYgKGxpLmFkdmFudGFnZUNoYXJ0IHx8IGxpLkFuYWx5c2VOVlVJKSByZXR1cm47XG4gICAgY29uc3QgbG9hZGluZyA9ICFkYXRhLnRyZWVQYXJ0c1swXS5ldmFsIHx8ICFPYmplY3Qua2V5cyhkYXRhLnRyZWVQYXJ0c1swXS5ldmFsKS5sZW5ndGg7XG4gICAgY29uc3QgJHBhbmVsID0gJHBhbmVscy5maWx0ZXIoJy5jb21wdXRlci1hbmFseXNpcycpO1xuICAgIGlmICghJChcIiNhY3BsLWNoYXJ0XCIpLmxlbmd0aCkgJHBhbmVsLmh0bWwoJzxkaXYgaWQ9XCJhY3BsLWNoYXJ0XCI+PC9kaXY+JyArIChsb2FkaW5nID8gY2hhcnRMb2FkZXIoKSA6ICcnKSk7XG4gICAgZWxzZSBpZiAobG9hZGluZyAmJiAhJChcIiNhY3BsLWNoYXJ0LWxvYWRlclwiKS5sZW5ndGgpICRwYW5lbC5hcHBlbmQoY2hhcnRMb2FkZXIoKSk7XG4gICAgbGkubG9hZFNjcmlwdCgnamF2YXNjcmlwdHMvY2hhcnQvYWNwbC5qcycpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBsaS5hZHZhbnRhZ2VDaGFydChkYXRhLCBjdHJsLnRyYW5zLCAkKFwiI2FjcGwtY2hhcnRcIilbMF0gYXMgSFRNTEVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHN0b3JhZ2UgPSBsaS5zdG9yYWdlLm1ha2UoJ2FuYWx5c2lzLnBhbmVsJyk7XG4gIGNvbnN0IHNldFBhbmVsID0gZnVuY3Rpb24ocGFuZWwpIHtcbiAgICAkbWVudS5jaGlsZHJlbignLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5lbmQoKS5maW5kKGBbZGF0YS1wYW5lbD1cIiR7cGFuZWx9XCJdYCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICRwYW5lbHMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZpbHRlcignLicgKyBwYW5lbCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGlmIChwYW5lbCA9PSAnbW92ZS10aW1lcycgJiYgIWxpLm1vdmV0aW1lQ2hhcnQpIHRyeSB7XG4gICAgICBsaS5sb2FkU2NyaXB0KCdqYXZhc2NyaXB0cy9jaGFydC9tb3ZldGltZS5qcycpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGxpLm1vdmV0aW1lQ2hhcnQoZGF0YSwgY3RybC50cmFucyk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIGlmIChwYW5lbCA9PSAnY29tcHV0ZXItYW5hbHlzaXMnICYmICQoXCIjYWNwbC1jaGFydFwiKS5sZW5ndGgpXG4gICAgICBzZXRUaW1lb3V0KHN0YXJ0QWR2YW50YWdlQ2hhcnQsIDIwMCk7XG4gIH07XG4gICRtZW51Lm9uKCdtb3VzZWRvd24nLCAnc3BhbicsIGZ1bmN0aW9uKHRoaXM6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcGFuZWwgPSAkKHRoaXMpLmRhdGEoJ3BhbmVsJyk7XG4gICAgc3RvcmFnZS5zZXQocGFuZWwpO1xuICAgIHNldFBhbmVsKHBhbmVsKTtcbiAgfSk7XG4gIGNvbnN0IHN0b3JlZCA9IHN0b3JhZ2UuZ2V0KCk7XG4gIGlmIChzdG9yZWQgJiYgJG1lbnUuY2hpbGRyZW4oYFtkYXRhLXBhbmVsPVwiJHtzdG9yZWR9XCJdOnZpc2libGVgKS5sZW5ndGgpIHNldFBhbmVsKHN0b3JlZCk7XG4gIGVsc2Uge1xuICAgIGNvbnN0ICRtZW51Q3QgPSAkbWVudS5jaGlsZHJlbignW2RhdGEtcGFuZWw9XCJjdGFibGVcIl0nKTtcbiAgICAoJG1lbnVDdC5sZW5ndGggPyAkbWVudUN0IDogJG1lbnUuY2hpbGRyZW4oJzpmaXJzdC1jaGlsZCcpKS50cmlnZ2VyKCdtb3VzZWRvd24nKTtcbiAgfVxuICBpZiAoIWRhdGEuYW5hbHlzaXMpIHtcbiAgICAkcGFuZWxzLmZpbmQoJ2Zvcm0uZnV0dXJlLWdhbWUtYW5hbHlzaXMnKS5zdWJtaXQoZnVuY3Rpb24odGhpczogSFRNTEVsZW1lbnQpIHtcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdtdXN0LWxvZ2luJykpIHtcbiAgICAgICAgaWYgKGNvbmZpcm0oY3RybC50cmFucygneW91TmVlZEFuQWNjb3VudFRvRG9UaGF0JykpKSBsb2NhdGlvbi5ocmVmID0gJy9zaWdudXAnO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAkLmFqYXgoe1xuICAgICAgICAuLi5saS5mb3JtQWpheCgkKHRoaXMpKSxcbiAgICAgICAgc3VjY2Vzczogc3RhcnRBZHZhbnRhZ2VDaGFydCxcbiAgICAgICAgZXJyb3I6IGxpLnJlbG9hZFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICAkcGFuZWxzLm9uKCdjbGljaycsICcucGduJywgZnVuY3Rpb24odGhpczogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksXG4gICAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHRoaXMpO1xuICAgIHNlbGVjdGlvbiEucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsZWN0aW9uIS5hZGRSYW5nZShyYW5nZSk7XG4gIH0pO1xuICAkcGFuZWxzLm9uKCdjbGljaycsICcuZW1iZWQtaG93dG8nLCBmdW5jdGlvbih0aGlzOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVcmwoKX0vZW1iZWQvJHtkYXRhLmdhbWUuaWR9JHtsb2NhdGlvbi5oYXNofWA7XG4gICAgY29uc3QgaWZyYW1lID0gJzxpZnJhbWUgc3JjPVwiJyArIHVybCArICc/dGhlbWU9YXV0byZiZz1hdXRvXCJcXG53aWR0aD02MDAgaGVpZ2h0PTM5NyBmcmFtZWJvcmRlcj0wPjwvaWZyYW1lPic7XG4gICAgJC5tb2RhbCgkKFxuICAgICAgJzxzdHJvbmcgc3R5bGU9XCJmb250LXNpemU6MS41ZW1cIj4nICsgJCh0aGlzKS5odG1sKCkgKyAnPC9zdHJvbmc+PGJyIC8+PGJyIC8+JyArXG4gICAgICAnPHByZT4nICsgbGkuZXNjYXBlSHRtbChpZnJhbWUpICsgJzwvcHJlPjxiciAvPicgK1xuICAgICAgaWZyYW1lICsgJzxiciAvPjxiciAvPicgK1xuICAgICAgJzxhIGNsYXNzPVwidGV4dFwiIGRhdGEtaWNvbj1cIu6AhVwiIGhyZWY9XCIvZGV2ZWxvcGVycyNlbWJlZC1nYW1lXCI+UmVhZCBtb3JlIGFib3V0IGVtYmVkZGluZyBnYW1lczwvYT4nXG4gICAgKSk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgaW5pdGlhbCBhcyBpbml0aWFsQm9hcmRGZW4gfSBmcm9tICdjaGVzc2dyb3VuZC9mZW4nO1xuaW1wb3J0IHsgb3BzIGFzIHRyZWVPcHMgfSBmcm9tICd0cmVlJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuL2N0cmwnO1xuXG50eXBlIERlc3RDYWNoZSA9IHtcbiAgW2Zlbjogc3RyaW5nXTogRGVzdENhY2hlRW50cnlcbn1cbnR5cGUgRGVzdENhY2hlRW50cnkgPSB7XG4gIHBhdGg6IHN0cmluZyxcbiAgZGVzdHM6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgSGFuZGxlcnMge1xuICBba2V5OiBzdHJpbmddOiBhbnk7IC8vICNUT0RPXG59XG5cbmludGVyZmFjZSBSZXEge1xuICBba2V5OiBzdHJpbmddOiBhbnk7IC8vICNUT0RPXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU29ja2V0IHtcbiAgc2VuZDogU29ja2V0U2VuZDtcbiAgcmVjZWl2ZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IGJvb2xlYW47XG4gIHNlbmRBbmFNb3ZlKHJlcTogUmVxKTogdm9pZDtcbiAgc2VuZEFuYURyb3AocmVxOiBSZXEpOiB2b2lkO1xuICBzZW5kQW5hRGVzdHMocmVxOiBSZXEpOiB2b2lkO1xuICBzZW5kRm9yZWNhc3RzKHJlcTogUmVxKTogdm9pZDtcbiAgY2xlYXJDYWNoZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZShzZW5kOiBTb2NrZXRTZW5kLCBjdHJsOiBBbmFseXNlQ3RybCk6IFNvY2tldCB7XG5cbiAgbGV0IGFuYU1vdmVUaW1lb3V0O1xuICBsZXQgYW5hRGVzdHNUaW1lb3V0O1xuXG4gIGxldCBhbmFEZXN0c0NhY2hlOiBEZXN0Q2FjaGUgPSB7fTtcblxuICBmdW5jdGlvbiBjbGVhckNhY2hlKCkge1xuICAgIGFuYURlc3RzQ2FjaGUgPSAoXG4gICAgICBjdHJsLmRhdGEuZ2FtZS52YXJpYW50LmtleSA9PT0gJ3N0YW5kYXJkJyAmJlxuICAgICAgICBjdHJsLnRyZWUucm9vdC5mZW4uc3BsaXQoJyAnLCAxKVswXSA9PT0gaW5pdGlhbEJvYXJkRmVuXG4gICAgKSA/IHtcbiAgICAgICcnOiB7XG4gICAgICAgIHBhdGg6ICcnLFxuICAgICAgICBkZXN0czogJ2lxeSBtdUMgZ3Z4IGx0QiBicXMgcHhGIGpyeiBudkQga3NBIG93RSdcbiAgICAgIH1cbiAgICB9IDoge307XG4gIH1cbiAgY2xlYXJDYWNoZSgpO1xuXG4gIC8vIGZvcmVjYXN0IG1vZGU6IHJlbG9hZCB3aGVuIG9wcG9uZW50IG1vdmVzXG4gIGlmICghY3RybC5zeW50aGV0aWMpIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgc2VuZChcInN0YXJ0V2F0Y2hpbmdcIiwgY3RybC5kYXRhLmdhbWUuaWQpO1xuICB9LCAxMDAwKTtcblxuICBmdW5jdGlvbiBjdXJyZW50Q2hhcHRlcklkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKGN0cmwuc3R1ZHkpIHJldHVybiBjdHJsLnN0dWR5LnZtLmNoYXB0ZXJJZDtcbiAgfTtcblxuICBmdW5jdGlvbiBhZGRTdHVkeURhdGEocmVxLCBpc1dyaXRlID0gZmFsc2UpOiB2b2lkIHtcbiAgICB2YXIgYyA9IGN1cnJlbnRDaGFwdGVySWQoKTtcbiAgICBpZiAoYykge1xuICAgICAgcmVxLmNoID0gYztcbiAgICAgIGlmIChpc1dyaXRlKSB7XG4gICAgICAgIGlmIChjdHJsLnN0dWR5IS5pc1dyaXRpbmcoKSkge1xuICAgICAgICAgIGlmICghY3RybC5zdHVkeSEudm0ubW9kZS5zdGlja3kpIHJlcS5zdGlja3kgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHJlcS53cml0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVyczogSGFuZGxlcnMgPSB7XG4gICAgbm9kZShkYXRhKSB7XG4gICAgICBjbGVhclRpbWVvdXQoYW5hTW92ZVRpbWVvdXQpO1xuICAgICAgLy8gbm8gc3RyaWN0IGVxdWFsaXR5IGhlcmUhXG4gICAgICBpZiAoZGF0YS5jaCA9PSBjdXJyZW50Q2hhcHRlcklkKCkpXG4gICAgICAgIGN0cmwuYWRkTm9kZShkYXRhLm5vZGUsIGRhdGEucGF0aCk7XG4gICAgICBlbHNlXG4gICAgICBjb25zb2xlLmxvZygnc29ja2V0IGhhbmRsZXIgbm9kZSBnb3Qgd3JvbmcgY2hhcHRlciBpZCcsIGRhdGEpO1xuICAgIH0sXG4gICAgc3RlcEZhaWx1cmUoKSB7XG4gICAgICBjbGVhclRpbWVvdXQoYW5hTW92ZVRpbWVvdXQpO1xuICAgICAgY3RybC5yZXNldCgpO1xuICAgIH0sXG4gICAgZGVzdHMoZGF0YSkge1xuICAgICAgY2xlYXJUaW1lb3V0KGFuYURlc3RzVGltZW91dCk7XG4gICAgICBpZiAoIWRhdGEuY2ggfHwgZGF0YS5jaCA9PT0gY3VycmVudENoYXB0ZXJJZCgpKSB7XG4gICAgICAgIGFuYURlc3RzQ2FjaGVbZGF0YS5wYXRoXSA9IGRhdGE7XG4gICAgICAgIGN0cmwuYWRkRGVzdHMoZGF0YS5kZXN0cywgZGF0YS5wYXRoLCBkYXRhLm9wZW5pbmcpO1xuICAgICAgfSBlbHNlXG4gICAgICBjb25zb2xlLmxvZygnc29ja2V0IGhhbmRsZXIgbm9kZSBnb3Qgd3JvbmcgY2hhcHRlciBpZCcsIGRhdGEpO1xuICAgIH0sXG4gICAgZGVzdHNGYWlsdXJlKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgY2xlYXJUaW1lb3V0KGFuYURlc3RzVGltZW91dCk7XG4gICAgfSxcbiAgICBmZW4oZSkge1xuICAgICAgaWYgKGN0cmwuZm9yZWNhc3QgJiZcbiAgICAgICAgZS5pZCA9PT0gY3RybC5kYXRhLmdhbWUuaWQgJiZcbiAgICAgICAgdHJlZU9wcy5sYXN0KGN0cmwubWFpbmxpbmUpIS5mZW4uaW5kZXhPZihlLmZlbikgIT09IDApIHtcbiAgICAgICAgY3RybC5mb3JlY2FzdC5yZWxvYWRUb0xhc3RQbHkoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFuYWx5c2lzUHJvZ3Jlc3MoZGF0YSkge1xuICAgICAgY3RybC5tZXJnZUFuYWx5c2lzRGF0YShkYXRhKTtcbiAgICB9LFxuICAgIGV2YWxIaXQoZSkge1xuICAgICAgY3RybC5ldmFsQ2FjaGUub25DbG91ZEV2YWwoZSk7XG4gICAgfSxcbiAgICBjcm93ZChkKSB7XG4gICAgICBjdHJsLmV2YWxDYWNoZS51cGdyYWRhYmxlKGQubmIgPiAyKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gd2l0aG91dFN0YW5kYXJkVmFyaWFudChvYmopIHtcbiAgICBpZiAob2JqLnZhcmlhbnQgPT09ICdzdGFuZGFyZCcpIGRlbGV0ZSBvYmoudmFyaWFudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbmRBbmFEZXN0cyhyZXEpIHtcbiAgICBjbGVhclRpbWVvdXQoYW5hRGVzdHNUaW1lb3V0KTtcbiAgICBpZiAoYW5hRGVzdHNDYWNoZVtyZXEucGF0aF0pIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVycy5kZXN0cyhhbmFEZXN0c0NhY2hlW3JlcS5wYXRoXSk7XG4gICAgfSwgMzAwKTtcbiAgICBlbHNlIHtcbiAgICAgIHdpdGhvdXRTdGFuZGFyZFZhcmlhbnQocmVxKTtcbiAgICAgIGFkZFN0dWR5RGF0YShyZXEpO1xuICAgICAgc2VuZCgnYW5hRGVzdHMnLCByZXEpO1xuICAgICAgYW5hRGVzdHNUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVxLCAncmVzZW5kQW5hRGVzdHMnKTtcbiAgICAgICAgc2VuZEFuYURlc3RzKHJlcSk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZW5kQW5hTW92ZShyZXEpIHtcbiAgICBjbGVhclRpbWVvdXQoYW5hTW92ZVRpbWVvdXQpO1xuICAgIHdpdGhvdXRTdGFuZGFyZFZhcmlhbnQocmVxKTtcbiAgICBhZGRTdHVkeURhdGEocmVxLCB0cnVlKTtcbiAgICBzZW5kKCdhbmFNb3ZlJywgcmVxKTtcbiAgICBhbmFNb3ZlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gc2VuZEFuYU1vdmUocmVxKSwgMzAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZW5kQW5hRHJvcChyZXEpIHtcbiAgICBjbGVhclRpbWVvdXQoYW5hTW92ZVRpbWVvdXQpO1xuICAgIHdpdGhvdXRTdGFuZGFyZFZhcmlhbnQocmVxKTtcbiAgICBhZGRTdHVkeURhdGEocmVxLCB0cnVlKTtcbiAgICBzZW5kKCdhbmFEcm9wJywgcmVxKTtcbiAgICBhbmFNb3ZlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gc2VuZEFuYURyb3AocmVxKSwgMzAwMCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlY2VpdmUodHlwZTogc3RyaW5nLCBkYXRhOiBhbnkpOiBib29sZWFuIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBoYW5kbGVyc1t0eXBlXTtcbiAgICAgIGlmIChoYW5kbGVyKSBoYW5kbGVyKGRhdGEpO1xuICAgICAgcmV0dXJuICEhY3RybC5zdHVkeSAmJiBjdHJsLnN0dWR5LnNvY2tldEhhbmRsZXIodHlwZSwgZGF0YSk7XG4gICAgfSxcbiAgICBzZW5kQW5hTW92ZSxcbiAgICBzZW5kQW5hRHJvcCxcbiAgICBzZW5kQW5hRGVzdHMsXG4gICAgc2VuZEZvcmVjYXN0cyhyZXEpIHsgc2VuZCgnZm9yZWNhc3RzJywgcmVxKTsgfSxcbiAgICBjbGVhckNhY2hlLFxuICAgIHNlbmRcbiAgfTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgd2luZG93LmxpY2hlc3MucHVic3ViLm9uKCdzcGVlY2guZW5hYmxlZCcsIG9uU3BlZWNoQ2hhbmdlKTtcbiAgb25TcGVlY2hDaGFuZ2Uod2luZG93LmxpY2hlc3Muc291bmQuc3BlZWNoKCkpO1xufVxuXG5mdW5jdGlvbiBvblNwZWVjaENoYW5nZShlbmFibGVkOiBib29sZWFuKSB7XG4gIGlmICghd2luZG93LkxpY2hlc3NTcGVlY2ggJiYgZW5hYmxlZClcbiAgICB3aW5kb3cubGljaGVzcy5sb2FkU2NyaXB0KHdpbmRvdy5saWNoZXNzLmNvbXBpbGVkU2NyaXB0KCdzcGVlY2gnKSk7XG4gIGVsc2UgaWYgKHdpbmRvdy5MaWNoZXNzU3BlZWNoICYmICFlbmFibGVkKSB3aW5kb3cuTGljaGVzc1NwZWVjaCA9IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vZGUobjogVHJlZS5Ob2RlKSB7XG4gIHdpdGhTcGVlY2gocyA9PiBzLnN0ZXAobiwgdHJ1ZSkpO1xufVxuXG5mdW5jdGlvbiB3aXRoU3BlZWNoKGY6IChzcGVlY2g6IExpY2hlc3NTcGVlY2gpID0+IHZvaWQpIHtcbiAgaWYgKHdpbmRvdy5MaWNoZXNzU3BlZWNoKSBmKHdpbmRvdy5MaWNoZXNzU3BlZWNoKTtcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgeyBkZWZpbmVkLCBwcm9wLCBQcm9wIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IFJlZHJhdyB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgYmluZCwgYmluZFN1Ym1pdCwgc3Bpbm5lciwgb3B0aW9uLCBvbkluc2VydCwgZW1wdHlSZWRCdXR0b24gfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCAqIGFzIG1vZGFsIGZyb20gJy4uL21vZGFsJztcbmltcG9ydCAqIGFzIGNoYXB0ZXJGb3JtIGZyb20gJy4vY2hhcHRlck5ld0Zvcm0nO1xuaW1wb3J0IHsgU3R1ZHlDaGFwdGVyQ29uZmlnLCBTdHVkeUNoYXB0ZXJNZXRhIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuaW50ZXJmYWNlIFN0dWR5Q2hhcHRlckVkaXRGb3JtQ3RybCB7XG4gIGN1cnJlbnQ6IFByb3A8U3R1ZHlDaGFwdGVyTWV0YSB8IFN0dWR5Q2hhcHRlckNvbmZpZyB8IG51bGw+O1xuICBvcGVuKGRhdGE6IFN0dWR5Q2hhcHRlck1ldGEpOiB2b2lkO1xuICB0b2dnbGUoZGF0YTogU3R1ZHlDaGFwdGVyTWV0YSk6IHZvaWQ7XG4gIHN1Ym1pdChkYXRhOiBhbnkpOiB2b2lkO1xuICBkZWxldGUoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gIGNsZWFyQW5ub3RhdGlvbnMoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gIGlzRWRpdGluZyhpZDogc3RyaW5nKTogYm9vbGVhbjtcbiAgcmVkcmF3OiBSZWRyYXc7XG4gIHRyYW5zOiBUcmFucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwoc2VuZDogU29ja2V0U2VuZCwgY2hhcHRlckNvbmZpZzogKHN0cmluZykgPT4gSlF1ZXJ5UHJvbWlzZTxTdHVkeUNoYXB0ZXJDb25maWc+LCB0cmFuczogVHJhbnMsIHJlZHJhdzogUmVkcmF3KTogU3R1ZHlDaGFwdGVyRWRpdEZvcm1DdHJsIHtcblxuICBjb25zdCBjdXJyZW50ID0gcHJvcDxTdHVkeUNoYXB0ZXJNZXRhIHwgU3R1ZHlDaGFwdGVyQ29uZmlnIHwgbnVsbD4obnVsbCk7XG5cbiAgZnVuY3Rpb24gb3BlbihkYXRhOiBTdHVkeUNoYXB0ZXJNZXRhKSB7XG4gICAgY3VycmVudCh7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIG5hbWU6IGRhdGEubmFtZVxuICAgIH0pO1xuICAgIGNoYXB0ZXJDb25maWcoZGF0YS5pZCkudGhlbihkID0+IHtcbiAgICAgIGN1cnJlbnQoZCEpO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaXNFZGl0aW5nKGlkKSB7XG4gICAgY29uc3QgYyA9IGN1cnJlbnQoKTtcbiAgICByZXR1cm4gYyA/IGMuaWQgPT09IGlkIDogZmFsc2U7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBvcGVuLFxuICAgIHRvZ2dsZShkYXRhKSB7XG4gICAgICBpZiAoaXNFZGl0aW5nKGRhdGEuaWQpKSBjdXJyZW50KG51bGwpO1xuICAgICAgZWxzZSBvcGVuKGRhdGEpO1xuICAgIH0sXG4gICAgY3VycmVudCxcbiAgICBzdWJtaXQoZGF0YSkge1xuICAgICAgY29uc3QgYyA9IGN1cnJlbnQoKTtcbiAgICAgIGlmIChjKSB7XG4gICAgICAgIGRhdGEuaWQgPSBjLmlkO1xuICAgICAgICBzZW5kKFwiZWRpdENoYXB0ZXJcIiwgZGF0YSlcbiAgICAgICAgY3VycmVudChudWxsKTtcbiAgICAgIH1cbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgZGVsZXRlKGlkKSB7XG4gICAgICBzZW5kKFwiZGVsZXRlQ2hhcHRlclwiLCBpZCk7XG4gICAgICBjdXJyZW50KG51bGwpO1xuICAgIH0sXG4gICAgY2xlYXJBbm5vdGF0aW9ucyhpZCkge1xuICAgICAgc2VuZChcImNsZWFyQW5ub3RhdGlvbnNcIiwgaWQpO1xuICAgICAgY3VycmVudChudWxsKTtcbiAgICB9LFxuICAgIGlzRWRpdGluZyxcbiAgICB0cmFucyxcbiAgICByZWRyYXdcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBTdHVkeUNoYXB0ZXJFZGl0Rm9ybUN0cmwpOiBWTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGRhdGEgPSBjdHJsLmN1cnJlbnQoKTtcbiAgcmV0dXJuIGRhdGEgPyBtb2RhbC5tb2RhbCh7XG4gICAgY2xhc3M6ICdlZGl0LScgKyBkYXRhLmlkLCAvLyBmdWxsIHJlZHJhdyB3aGVuIGNoYW5naW5nIGNoYXB0ZXJcbiAgICBvbkNsb3NlKCkge1xuICAgICAgY3RybC5jdXJyZW50KG51bGwpO1xuICAgICAgY3RybC5yZWRyYXcoKTtcbiAgICB9LFxuICAgIGNvbnRlbnQ6IFtcbiAgICAgIGgoJ2gyJywgY3RybC50cmFucy5ub2FyZygnZWRpdENoYXB0ZXInKSksXG4gICAgICBoKCdmb3JtLmZvcm0zJywge1xuICAgICAgICBob29rOiBiaW5kU3VibWl0KGUgPT4ge1xuICAgICAgICAgIGNvbnN0IG86IGFueSA9IHt9O1xuICAgICAgICAgICduYW1lIG1vZGUgb3JpZW50YXRpb24gZGVzY3JpcHRpb24nLnNwbGl0KCcgJykuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBvW2ZpZWxkXSA9IGNoYXB0ZXJGb3JtLmZpZWxkVmFsdWUoZSwgZmllbGQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGN0cmwuc3VibWl0KG8pO1xuICAgICAgICB9KVxuICAgICAgfSwgW1xuICAgICAgICBoKCdkaXYuZm9ybS1ncm91cCcsIFtcbiAgICAgICAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywge1xuICAgICAgICAgICAgYXR0cnM6IHsgZm9yOiAnY2hhcHRlci1uYW1lJyB9XG4gICAgICAgICAgfSwgY3RybC50cmFucy5ub2FyZygnbmFtZScpKSxcbiAgICAgICAgICBoKCdpbnB1dCNjaGFwdGVyLW5hbWUuZm9ybS1jb250cm9sJywge1xuICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgbWlubGVuZ3RoOiAyLFxuICAgICAgICAgICAgICBtYXhsZW5ndGg6IDgwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaG9vazogb25JbnNlcnQ8SFRNTElucHV0RWxlbWVudD4oZWwgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWVsLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZWwudmFsdWUgPSBkYXRhLm5hbWU7XG4gICAgICAgICAgICAgICAgZWwuc2VsZWN0KCk7XG4gICAgICAgICAgICAgICAgZWwuZm9jdXMoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICBdKSxcbiAgICAgICAgLi4uKGlzTG9hZGVkKGRhdGEpID8gdmlld0xvYWRlZChjdHJsLCBkYXRhKSA6IFtzcGlubmVyKCldKVxuICAgICAgXSksXG4gICAgICBoKCdkaXYuZGVzdHJ1Y3RpdmUnLCBbXG4gICAgICAgIGgoZW1wdHlSZWRCdXR0b24sIHtcbiAgICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIF8gPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oY3RybC50cmFucy5ub2FyZygnY2xlYXJBbGxDb21tZW50c0luVGhpc0NoYXB0ZXInKSkpXG4gICAgICAgICAgICAgIGN0cmwuY2xlYXJBbm5vdGF0aW9ucyhkYXRhLmlkKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdjbGVhckFubm90YXRpb25zJykpLFxuICAgICAgICBoKGVtcHR5UmVkQnV0dG9uLCB7XG4gICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maXJtKGN0cmwudHJhbnMubm9hcmcoJ2RlbGV0ZVRoaXNDaGFwdGVyJykpKVxuICAgICAgICAgICAgICBjdHJsLmRlbGV0ZShkYXRhLmlkKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdkZWxldGVDaGFwdGVyJykpXG4gICAgICBdKVxuICAgIF1cbiAgfSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzTG9hZGVkKGRhdGE6IFN0dWR5Q2hhcHRlck1ldGEgfCBTdHVkeUNoYXB0ZXJDb25maWcpOiBkYXRhIGlzIFN0dWR5Q2hhcHRlckNvbmZpZyB7XG4gIHJldHVybiAhIWRhdGFbJ29yaWVudGF0aW9uJ107XG59XG5cbmZ1bmN0aW9uIHZpZXdMb2FkZWQoY3RybDogU3R1ZHlDaGFwdGVyRWRpdEZvcm1DdHJsLCBkYXRhOiBTdHVkeUNoYXB0ZXJDb25maWcpOiBWTm9kZVtdIHtcbiAgY29uc3QgbW9kZSA9IGRhdGEucHJhY3RpY2UgPyAncHJhY3RpY2UnIDogKGRlZmluZWQoZGF0YS5jb25jZWFsKSA/ICdjb25jZWFsJyA6IChkYXRhLmdhbWVib29rID8gJ2dhbWVib29rJyA6ICdub3JtYWwnKSk7XG4gIHJldHVybiBbXG4gICAgaCgnZGl2LmZvcm0tc3BsaXQnLCBbXG4gICAgICBoKCdkaXYuZm9ybS1ncm91cC5mb3JtLWhhbGYnLCBbXG4gICAgICAgIGgoJ2xhYmVsLmZvcm0tbGFiZWwnLCB7XG4gICAgICAgICAgYXR0cnM6IHsgZm9yOiAnY2hhcHRlci1vcmllbnRhdGlvbicgfVxuICAgICAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdvcmllbnRhdGlvbicpKSxcbiAgICAgICAgaCgnc2VsZWN0I2NoYXB0ZXItb3JpZW50YXRpb24uZm9ybS1jb250cm9sJywgWyd3aGl0ZScsICdibGFjayddLm1hcChmdW5jdGlvbihjb2xvcikge1xuICAgICAgICAgIHJldHVybiBvcHRpb24oY29sb3IsIGRhdGEub3JpZW50YXRpb24sIGN0cmwudHJhbnMubm9hcmcoY29sb3IpKTtcbiAgICAgICAgfSkpXG4gICAgICBdKSxcbiAgICAgIGgoJ2Rpdi5mb3JtLWdyb3VwLmZvcm0taGFsZicsIFtcbiAgICAgICAgaCgnbGFiZWwuZm9ybS1sYWJlbCcsIHtcbiAgICAgICAgICBhdHRyczogeyBmb3I6ICdjaGFwdGVyLW1vZGUnIH1cbiAgICAgICAgfSwgY3RybC50cmFucy5ub2FyZygnYW5hbHlzaXNNb2RlJykpLFxuICAgICAgICBoKCdzZWxlY3QjY2hhcHRlci1tb2RlLmZvcm0tY29udHJvbCcsIGNoYXB0ZXJGb3JtLm1vZGVDaG9pY2VzLm1hcChjID0+IHtcbiAgICAgICAgICByZXR1cm4gb3B0aW9uKGNbMF0sIG1vZGUsIGN0cmwudHJhbnMubm9hcmcoY1sxXSkpO1xuICAgICAgICB9KSlcbiAgICAgIF0pXG4gICAgXSksXG4gICAgaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywge1xuICAgICAgICBhdHRyczogeyBmb3I6ICdjaGFwdGVyLWRlc2NyaXB0aW9uJyB9XG4gICAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdwaW5uZWRDaGFwdGVyQ29tbWVudCcpKSxcbiAgICAgIGgoJ3NlbGVjdCNjaGFwdGVyLWRlc2NyaXB0aW9uLmZvcm0tY29udHJvbCcsIFtcbiAgICAgICAgWycnLCBjdHJsLnRyYW5zLm5vYXJnKCdub1Bpbm5lZENvbW1lbnQnKV0sXG4gICAgICAgIFsnMScsIGN0cmwudHJhbnMubm9hcmcoJ3JpZ2h0VW5kZXJUaGVCb2FyZCcpXVxuICAgICAgXS5tYXAodiA9PiBvcHRpb24odlswXSwgZGF0YS5kZXNjcmlwdGlvbiA/ICcxJyA6ICcnLCB2WzFdKSkpXG4gICAgXSksXG4gICAgbW9kYWwuYnV0dG9uKGN0cmwudHJhbnMubm9hcmcoJ3NhdmVDaGFwdGVyJykpXG4gIF07XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgZGVmaW5lZCwgcHJvcCwgUHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyBzdG9yZWRQcm9wLCBTdG9yZWRQcm9wIH0gZnJvbSAnY29tbW9uL3N0b3JhZ2UnO1xuaW1wb3J0IHsgYmluZCwgYmluZFN1Ym1pdCwgc3Bpbm5lciwgb3B0aW9uLCBvbkluc2VydCB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgdmFyaWFudHMgYXMgeGhyVmFyaWFudHMsIGltcG9ydFBnbiB9IGZyb20gJy4vc3R1ZHlYaHInO1xuaW1wb3J0ICogYXMgbW9kYWwgZnJvbSAnLi4vbW9kYWwnO1xuaW1wb3J0IHsgY2hhcHRlciBhcyBjaGFwdGVyVG91ciB9IGZyb20gJy4vc3R1ZHlUb3VyJztcbmltcG9ydCB7IFN0dWR5Q2hhcHRlck1ldGEgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgUmVkcmF3IH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5cbmV4cG9ydCBjb25zdCBtb2RlQ2hvaWNlcyA9IFtcbiAgWydub3JtYWwnLCAnbm9ybWFsQW5hbHlzaXMnXSxcbiAgWydwcmFjdGljZScsICdwcmFjdGljZVdpdGhDb21wdXRlciddLFxuICBbJ2NvbmNlYWwnLCAnaGlkZU5leHRNb3ZlcyddLFxuICBbJ2dhbWVib29rJywgJ2ludGVyYWN0aXZlTGVzc29uJ11cbl07XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWVsZFZhbHVlKGU6IEV2ZW50LCBpZDogc3RyaW5nKSB7XG4gIGNvbnN0IGVsID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yKCcjY2hhcHRlci0nICsgaWQpO1xuICByZXR1cm4gZWwgPyAoZWwgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgOiBudWxsO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBTdHVkeUNoYXB0ZXJOZXdGb3JtQ3RybCB7XG4gIHJvb3Q6IEFuYWx5c2VDdHJsO1xuICB2bToge1xuICAgIHZhcmlhbnRzOiBWYXJpYW50W107XG4gICAgb3BlbjogYm9vbGVhbjtcbiAgICBpbml0aWFsOiBQcm9wPGJvb2xlYW4+O1xuICAgIHRhYjogU3RvcmVkUHJvcDxzdHJpbmc+O1xuICAgIGVkaXRvcjogYW55O1xuICAgIGVkaXRvckZlbjogUHJvcDxGZW4gfCBudWxsPjtcbiAgfTtcbiAgb3BlbigpOiB2b2lkO1xuICBvcGVuSW5pdGlhbCgpOiB2b2lkO1xuICBjbG9zZSgpOiB2b2lkO1xuICB0b2dnbGUoKTogdm9pZDtcbiAgc3VibWl0KGQ6IGFueSk6IHZvaWQ7XG4gIGNoYXB0ZXJzOiBQcm9wPFN0dWR5Q2hhcHRlck1ldGFbXT47XG4gIHN0YXJ0VG91cigpOiB2b2lkO1xuICBtdWx0aVBnbk1heDogbnVtYmVyO1xuICByZWRyYXc6IFJlZHJhdztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwoc2VuZDogU29ja2V0U2VuZCwgY2hhcHRlcnM6IFByb3A8U3R1ZHlDaGFwdGVyTWV0YVtdPiwgc2V0VGFiOiAoKSA9PiB2b2lkLCByb290OiBBbmFseXNlQ3RybCk6IFN0dWR5Q2hhcHRlck5ld0Zvcm1DdHJsIHtcblxuICBjb25zdCBtdWx0aVBnbk1heCA9IDIwO1xuXG4gIGNvbnN0IHZtID0ge1xuICAgIHZhcmlhbnRzOiBbXSxcbiAgICBvcGVuOiBmYWxzZSxcbiAgICBpbml0aWFsOiBwcm9wKGZhbHNlKSxcbiAgICB0YWI6IHN0b3JlZFByb3AoJ3N0dWR5LmZvcm0udGFiJywgJ2luaXQnKSxcbiAgICBlZGl0b3I6IG51bGwsXG4gICAgZWRpdG9yRmVuOiBwcm9wKG51bGwpXG4gIH07XG5cbiAgZnVuY3Rpb24gbG9hZFZhcmlhbnRzKCkge1xuICAgIGlmICghdm0udmFyaWFudHMubGVuZ3RoKSB4aHJWYXJpYW50cygpLnRoZW4oZnVuY3Rpb24odnMpIHtcbiAgICAgIHZtLnZhcmlhbnRzID0gdnM7XG4gICAgICByb290LnJlZHJhdygpO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgdm0ub3BlbiA9IHRydWU7XG4gICAgbG9hZFZhcmlhbnRzKCk7XG4gICAgdm0uaW5pdGlhbChmYWxzZSk7XG4gIH1cbiAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgdm0ub3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2bSxcbiAgICBvcGVuLFxuICAgIHJvb3QsXG4gICAgb3BlbkluaXRpYWwoKSB7XG4gICAgICBvcGVuKCk7XG4gICAgICB2bS5pbml0aWFsKHRydWUpO1xuICAgIH0sXG4gICAgY2xvc2UsXG4gICAgdG9nZ2xlKCkge1xuICAgICAgaWYgKHZtLm9wZW4pIGNsb3NlKCk7XG4gICAgICBlbHNlIG9wZW4oKTtcbiAgICB9LFxuICAgIHN1Ym1pdChkKSB7XG4gICAgICBjb25zdCBzdHVkeSA9IHJvb3Quc3R1ZHkhO1xuICAgICAgZC5pbml0aWFsID0gdm0uaW5pdGlhbCgpO1xuICAgICAgZC5zdGlja3kgPSBzdHVkeS52bS5tb2RlLnN0aWNreTtcbiAgICAgIGlmICghZC5wZ24pIHNlbmQoXCJhZGRDaGFwdGVyXCIsIGQpO1xuICAgICAgZWxzZSBpbXBvcnRQZ24oc3R1ZHkuZGF0YS5pZCwgZCk7XG4gICAgICBjbG9zZSgpO1xuICAgICAgc2V0VGFiKCk7XG4gICAgfSxcbiAgICBjaGFwdGVycyxcbiAgICBzdGFydFRvdXI6ICgpID0+IGNoYXB0ZXJUb3VyKHRhYiA9PiB7XG4gICAgICB2bS50YWIodGFiKTtcbiAgICAgIHJvb3QucmVkcmF3KCk7XG4gICAgfSksXG4gICAgbXVsdGlQZ25NYXgsXG4gICAgcmVkcmF3OiByb290LnJlZHJhd1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3KGN0cmw6IFN0dWR5Q2hhcHRlck5ld0Zvcm1DdHJsKTogVk5vZGUge1xuXG4gIGNvbnN0IHRyYW5zID0gY3RybC5yb290LnRyYW5zO1xuICBjb25zdCBhY3RpdmVUYWIgPSBjdHJsLnZtLnRhYigpO1xuICBjb25zdCBtYWtlVGFiID0gZnVuY3Rpb24oa2V5OiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdGl0bGU6IHN0cmluZykge1xuICAgIHJldHVybiBoKCdzcGFuLicgKyBrZXksIHtcbiAgICAgIGNsYXNzOiB7IGFjdGl2ZTogYWN0aXZlVGFiID09PSBrZXkgfSxcbiAgICAgIGF0dHJzOiB7IHRpdGxlIH0sXG4gICAgICBob29rOiBiaW5kKCdjbGljaycsICgpID0+IGN0cmwudm0udGFiKGtleSksIGN0cmwucm9vdC5yZWRyYXcpXG4gICAgfSwgbmFtZSk7XG4gIH07XG4gIGNvbnN0IGdhbWVPclBnbiA9IGFjdGl2ZVRhYiA9PT0gJ2dhbWUnIHx8IGFjdGl2ZVRhYiA9PT0gJ3Bnbic7XG4gIGNvbnN0IGN1cnJlbnRDaGFwdGVyID0gY3RybC5yb290LnN0dWR5IS5kYXRhLmNoYXB0ZXI7XG4gIGNvbnN0IG1vZGUgPSBjdXJyZW50Q2hhcHRlci5wcmFjdGljZSA/ICdwcmFjdGljZScgOiAoZGVmaW5lZChjdXJyZW50Q2hhcHRlci5jb25jZWFsKSA/ICdjb25jZWFsJyA6IChjdXJyZW50Q2hhcHRlci5nYW1lYm9vayA/ICdnYW1lYm9vaycgOiAnbm9ybWFsJykpO1xuXG4gIHJldHVybiBtb2RhbC5tb2RhbCh7XG4gICAgY2xhc3M6ICdjaGFwdGVyLW5ldycsXG4gICAgb25DbG9zZSgpIHtcbiAgICAgIGN0cmwuY2xvc2UoKTtcbiAgICAgIGN0cmwucmVkcmF3KCk7XG4gICAgfSxcbiAgICBjb250ZW50OiBbXG4gICAgICBhY3RpdmVUYWIgPT09ICdlZGl0JyA/IG51bGwgOiBoKCdoMicsIFtcbiAgICAgICAgdHJhbnMubm9hcmcoJ25ld0NoYXB0ZXInKSxcbiAgICAgICAgaCgnaS5oZWxwJywge1xuICAgICAgICAgIGF0dHJzOiB7ICdkYXRhLWljb24nOiAn7oCFJyB9LFxuICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgY3RybC5zdGFydFRvdXIpXG4gICAgICAgIH0pXG4gICAgICBdKSxcbiAgICAgIGgoJ2Zvcm0uZm9ybTMnLCB7XG4gICAgICAgIGhvb2s6IGJpbmRTdWJtaXQoZSA9PiB7XG4gICAgICAgICAgY29uc3QgbzogYW55ID0ge1xuICAgICAgICAgICAgZmVuOiBmaWVsZFZhbHVlKGUsICdmZW4nKSB8fCAoY3RybC52bS50YWIoKSA9PT0gJ2VkaXQnID8gY3RybC52bS5lZGl0b3JGZW4oKSA6IG51bGwpXG4gICAgICAgICAgfTtcbiAgICAgICAgICAnbmFtZSBnYW1lIHZhcmlhbnQgcGduIG9yaWVudGF0aW9uIG1vZGUnLnNwbGl0KCcgJykuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBvW2ZpZWxkXSA9IGZpZWxkVmFsdWUoZSwgZmllbGQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGN0cmwuc3VibWl0KG8pO1xuICAgICAgICB9LCBjdHJsLnJlZHJhdylcbiAgICAgIH0sIFtcbiAgICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICAgICAgaCgnbGFiZWwuZm9ybS1sYWJlbCcsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7Zm9yOiAnY2hhcHRlci1uYW1lJyB9XG4gICAgICAgICAgfSwgdHJhbnMubm9hcmcoJ25hbWUnKSksXG4gICAgICAgICAgaCgnaW5wdXQjY2hhcHRlci1uYW1lLmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgIG1pbmxlbmd0aDogMixcbiAgICAgICAgICAgICAgbWF4bGVuZ3RoOiA4MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhvb2s6IG9uSW5zZXJ0PEhUTUxJbnB1dEVsZW1lbnQ+KGVsID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFlbC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGVsLnZhbHVlID0gdHJhbnMoJ2NoYXB0ZXJYJywgKGN0cmwudm0uaW5pdGlhbCgpID8gMSA6IChjdHJsLmNoYXB0ZXJzKCkubGVuZ3RoICsgMSkpKTtcbiAgICAgICAgICAgICAgICBlbC5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICBlbC5mb2N1cygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pLFxuICAgICAgICBoKCdkaXYudGFicy1ob3JpeicsIFtcbiAgICAgICAgICBtYWtlVGFiKCdpbml0JywgdHJhbnMubm9hcmcoJ2VtcHR5JyksIHRyYW5zLm5vYXJnKCdzdGFydEZyb21Jbml0aWFsUG9zaXRpb24nKSksXG4gICAgICAgICAgbWFrZVRhYignZWRpdCcsIHRyYW5zLm5vYXJnKCdlZGl0b3InKSwgdHJhbnMubm9hcmcoJ3N0YXJ0RnJvbUN1c3RvbVBvc2l0aW9uJykpLFxuICAgICAgICAgIG1ha2VUYWIoJ2dhbWUnLCAnVVJMJywgdHJhbnMubm9hcmcoJ2xvYWRBR2FtZUJ5VXJsJykpLFxuICAgICAgICAgIG1ha2VUYWIoJ2ZlbicsICdGRU4nLCB0cmFucy5ub2FyZygnbG9hZEFQb3NpdGlvbkZyb21GZW4nKSksXG4gICAgICAgICAgbWFrZVRhYigncGduJywgJ1BHTicsIHRyYW5zLm5vYXJnKCdsb2FkQUdhbWVGcm9tUGduJykpXG4gICAgICAgIF0pLFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdlZGl0JyA/IGgoJ2Rpdi5ib2FyZC1lZGl0b3Itd3JhcCcsIHtcbiAgICAgICAgICBob29rOiB7XG4gICAgICAgICAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgICAgICAgICAgJC53aGVuKFxuICAgICAgICAgICAgICAgIHdpbmRvdy5saWNoZXNzLmxvYWRTY3JpcHQoJ2NvbXBpbGVkL2xpY2hlc3MuZWRpdG9yLm1pbi5qcycpLFxuICAgICAgICAgICAgICAgICQuZ2V0KCcvZWRpdG9yLmpzb24nLCB7XG4gICAgICAgICAgICAgICAgICBmZW46IGN0cmwucm9vdC5ub2RlLmZlblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICkudGhlbihmdW5jdGlvbihfLCBiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGJbMF07XG4gICAgICAgICAgICAgICAgZGF0YS5lbWJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGF0YS5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgaW5saW5lQ2FzdGxpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZTogY3RybC52bS5lZGl0b3JGZW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGN0cmwudm0uZWRpdG9yID0gd2luZG93WydMaWNoZXNzRWRpdG9yJ10odm5vZGUuZWxtIGFzIEhUTUxFbGVtZW50LCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjdHJsLnZtLmVkaXRvckZlbihjdHJsLnZtLmVkaXRvci5nZXRGZW4oKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IF8gPT4ge1xuICAgICAgICAgICAgICBjdHJsLnZtLmVkaXRvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBbc3Bpbm5lcigpXSkgOiBudWxsLFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdnYW1lJyA/IGgoJ2Rpdi5mb3JtLWdyb3VwJywgW1xuICAgICAgICAgIGgoJ2xhYmVsLmZvcm0tbGFiZWwnLCB7XG4gICAgICAgICAgICBhdHRyczogeyAnZm9yJzogJ2NoYXB0ZXItZ2FtZScgfVxuICAgICAgICAgIH0sIHRyYW5zKCdsb2FkQUdhbWVGcm9tWE9yWScsICdsaWNoZXNzLm9yZycsICdjaGVzc2dhbWVzLmNvbScpKSxcbiAgICAgICAgICBoKCdpbnB1dCNjaGFwdGVyLWdhbWUuZm9ybS1jb250cm9sJywge1xuICAgICAgICAgICAgYXR0cnM6IHsgcGxhY2Vob2xkZXI6IHRyYW5zLm5vYXJnKCd1cmxPZlRoZUdhbWUnKSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgXSkgOiBudWxsLFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdmZW4nID8gaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICAgICAgaCgnaW5wdXQjY2hhcHRlci1mZW4uZm9ybS1jb250cm9sJywge1xuICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgdmFsdWU6IGN0cmwucm9vdC5ub2RlLmZlbixcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRyYW5zLm5vYXJnKCdsb2FkQVBvc2l0aW9uRnJvbUZlbicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgXSkgOiBudWxsLFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdwZ24nID8gaCgnZGl2LmZvcm0tZ3JvdXBhYmVsJywgW1xuICAgICAgICAgIGgoJ3RleHRhcmVhI2NoYXB0ZXItcGduLmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7IHBsYWNlaG9sZGVyOiB0cmFucy5wbHVyYWwoJ3Bhc3RlWW91clBnblRleHRIZXJlVXBUb05iR2FtZXMnLCBjdHJsLm11bHRpUGduTWF4KSB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgd2luZG93LkZpbGVSZWFkZXIgPyBoKCdpbnB1dCNjaGFwdGVyLXBnbi1maWxlLmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgICAgYWNjZXB0OiAnLnBnbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBob29rOiBiaW5kKCdjaGFuZ2UnLCBlID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5maWxlcyFbMF07XG4gICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFwdGVyLXBnbicpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpLnZhbHVlID0gcmVhZGVyLnJlc3VsdCBhcyBzdHJpbmc7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KSA6IG51bGxcbiAgICAgICAgXSkgOiBudWxsLFxuICAgICAgICBoKCdkaXYuZm9ybS1zcGxpdCcsIFtcbiAgICAgICAgICBoKCdkaXYuZm9ybS1ncm91cC5mb3JtLWhhbGYnLCBbXG4gICAgICAgICAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywge1xuICAgICAgICAgICAgICBhdHRyczogeyAnZm9yJzogJ2NoYXB0ZXItdmFyaWFudCcgfVxuICAgICAgICAgICAgfSwgdHJhbnMubm9hcmcoJ1ZhcmlhbnQnKSksXG4gICAgICAgICAgICBoKCdzZWxlY3QjY2hhcHRlci12YXJpYW50LmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICAgICAgYXR0cnM6IHsgZGlzYWJsZWQ6IGdhbWVPclBnbiB9XG4gICAgICAgICAgICB9LCBnYW1lT3JQZ24gPyBbXG4gICAgICAgICAgICAgIGgoJ29wdGlvbicsIHRyYW5zLm5vYXJnKCdhdXRvbWF0aWMnKSlcbiAgICAgICAgICAgIF0gOlxuICAgICAgICAgICAgY3RybC52bS52YXJpYW50cy5tYXAodiA9PiBvcHRpb24odi5rZXksIGN1cnJlbnRDaGFwdGVyLnNldHVwLnZhcmlhbnQua2V5LCB2Lm5hbWUpKSlcbiAgICAgICAgICBdKSxcbiAgICAgICAgICBoKCdkaXYuZm9ybS1ncm91cC5mb3JtLWhhbGYnLCBbXG4gICAgICAgICAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywge1xuICAgICAgICAgICAgICBhdHRyczogeyAnZm9yJzogJ2NoYXB0ZXItb3JpZW50YXRpb24nIH1cbiAgICAgICAgICAgIH0sIHRyYW5zLm5vYXJnKCdvcmllbnRhdGlvbicpKSxcbiAgICAgICAgICAgIGgoJ3NlbGVjdCNjaGFwdGVyLW9yaWVudGF0aW9uLmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICAgICAgaG9vazogYmluZCgnY2hhbmdlJywgZSA9PiB7XG4gICAgICAgICAgICAgICAgY3RybC52bS5lZGl0b3IgJiYgY3RybC52bS5lZGl0b3Iuc2V0T3JpZW50YXRpb24oKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sIFsnd2hpdGUnLCAnYmxhY2snXS5tYXAoZnVuY3Rpb24oY29sb3IpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbihjb2xvciwgY3VycmVudENoYXB0ZXIuc2V0dXAub3JpZW50YXRpb24sIHRyYW5zLm5vYXJnKGNvbG9yKSk7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICBdKVxuICAgICAgICBdKSxcbiAgICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICAgICAgaCgnbGFiZWwuZm9ybS1sYWJlbCcsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7ICdmb3InOiAnY2hhcHRlci1tb2RlJyB9XG4gICAgICAgICAgfSwgdHJhbnMubm9hcmcoJ2FuYWx5c2lzTW9kZScpKSxcbiAgICAgICAgICBoKCdzZWxlY3QjY2hhcHRlci1tb2RlLmZvcm0tY29udHJvbCcsIG1vZGVDaG9pY2VzLm1hcChjID0+IG9wdGlvbihjWzBdLCBtb2RlLCB0cmFucy5ub2FyZyhjWzFdKSkpKVxuICAgICAgICBdKSxcbiAgICAgICAgbW9kYWwuYnV0dG9uKHRyYW5zLm5vYXJnKCdjcmVhdGVDaGFwdGVyJykpXG4gICAgICBdKVxuICAgIF1cbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgY3VycmVudENvbW1lbnRzIH0gZnJvbSAnLi9zdHVkeUNvbW1lbnRzJztcbmltcG9ydCB7IG5vZGVGdWxsTmFtZSwgYmluZCB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgcHJvcCwgUHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnY29tbW9uL3Rocm90dGxlJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcblxuaW50ZXJmYWNlIEN1cnJlbnQge1xuICBjaGFwdGVySWQ6IHN0cmluZztcbiAgcGF0aDogVHJlZS5QYXRoO1xuICBub2RlOiBUcmVlLk5vZGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWVudEZvcm0ge1xuICByb290OiBBbmFseXNlQ3RybDtcbiAgY3VycmVudDogUHJvcDxDdXJyZW50IHwgbnVsbD47XG4gIGZvY3VzOiBQcm9wPGJvb2xlYW4+O1xuICBvcGVuaW5nOiBQcm9wPGJvb2xlYW4+O1xuICBzdWJtaXQodGV4dDogc3RyaW5nKTogdm9pZDtcbiAgc3RhcnQoY2hhcHRlcklkOiBzdHJpbmcsIHBhdGg6IFRyZWUuUGF0aCwgbm9kZTogVHJlZS5Ob2RlKTogdm9pZDtcbiAgb25TZXRQYXRoKGNoYXB0ZXJJZDogc3RyaW5nLCBwYXRoOiBUcmVlLlBhdGgsIG5vZGU6IFRyZWUuTm9kZSwgcGxheWVkTXlzZWxmOiBib29sZWFuKTogdm9pZDtcbiAgcmVkcmF3KCk6IHZvaWQ7XG4gIGRlbGV0ZShjaGFwdGVySWQ6IHN0cmluZywgcGF0aDogVHJlZS5QYXRoLCBpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwocm9vdDogQW5hbHlzZUN0cmwpOiBDb21tZW50Rm9ybSB7XG5cbiAgY29uc3QgY3VycmVudCA9IHByb3A8Q3VycmVudCB8IG51bGw+KG51bGwpLFxuICAgIGZvY3VzID0gcHJvcChmYWxzZSksXG4gICAgb3BlbmluZyA9IHByb3AoZmFsc2UpO1xuXG4gIGZ1bmN0aW9uIHN1Ym1pdCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIWN1cnJlbnQoKSkgcmV0dXJuO1xuICAgIGRvU3VibWl0KHRleHQpO1xuICB9O1xuXG4gIGNvbnN0IGRvU3VibWl0ID0gdGhyb3R0bGUoNTAwLCAodGV4dDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgY3VyID0gY3VycmVudCgpO1xuICAgIGlmIChjdXIpIHJvb3Quc3R1ZHkhLm1ha2VDaGFuZ2UoJ3NldENvbW1lbnQnLCB7XG4gICAgICBjaDogY3VyLmNoYXB0ZXJJZCxcbiAgICAgIHBhdGg6IGN1ci5wYXRoLFxuICAgICAgdGV4dFxuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBzdGFydChjaGFwdGVySWQ6IHN0cmluZywgcGF0aDogVHJlZS5QYXRoLCBub2RlOiBUcmVlLk5vZGUpOiB2b2lkIHtcbiAgICBvcGVuaW5nKHRydWUpO1xuICAgIGN1cnJlbnQoe1xuICAgICAgY2hhcHRlcklkLFxuICAgICAgcGF0aCxcbiAgICAgIG5vZGVcbiAgICB9KTtcbiAgICByb290LnVzZXJKdW1wKHBhdGgpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcm9vdCxcbiAgICBjdXJyZW50LFxuICAgIGZvY3VzLFxuICAgIG9wZW5pbmcsXG4gICAgc3VibWl0LFxuICAgIHN0YXJ0LFxuICAgIG9uU2V0UGF0aChjaGFwdGVySWQ6IHN0cmluZywgcGF0aDogVHJlZS5QYXRoLCBub2RlOiBUcmVlLk5vZGUsIHBsYXllZE15c2VsZjogYm9vbGVhbik6IHZvaWQge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1ciA9IGN1cnJlbnQoKTtcbiAgICAgICAgaWYgKGN1ciAmJiAocGF0aCAhPT0gY3VyLnBhdGggfHwgY2hhcHRlcklkICE9PSBjdXIuY2hhcHRlcklkKSAmJiAoIWZvY3VzKCkgfHwgcGxheWVkTXlzZWxmKSkge1xuICAgICAgICAgIGN1ci5jaGFwdGVySWQgPSBjaGFwdGVySWQ7XG4gICAgICAgICAgY3VyLnBhdGggPSBwYXRoO1xuICAgICAgICAgIGN1ci5ub2RlID0gbm9kZTtcbiAgICAgICAgICByb290LnJlZHJhdygpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH0sXG4gICAgcmVkcmF3OiByb290LnJlZHJhdyxcbiAgICBkZWxldGUoY2hhcHRlcklkOiBzdHJpbmcsIHBhdGg6IFRyZWUuUGF0aCwgaWQ6IHN0cmluZykge1xuICAgICAgcm9vdC5zdHVkeSEubWFrZUNoYW5nZSgnZGVsZXRlQ29tbWVudCcsIHtcbiAgICAgICAgY2g6IGNoYXB0ZXJJZCxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgaWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZpZXdEaXNhYmxlZChyb290OiBBbmFseXNlQ3RybCwgd2h5OiBzdHJpbmcpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYuc3R1ZHlfX2NvbW1lbnRzJywgW1xuICAgIGN1cnJlbnRDb21tZW50cyhyb290LCB0cnVlKSxcbiAgICBoKCdkaXYuc3R1ZHlfX21lc3NhZ2UnLCB3aHkpXG4gIF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhyb290OiBBbmFseXNlQ3RybCk6IFZOb2RlIHtcblxuICBjb25zdCBzdHVkeSA9IHJvb3Quc3R1ZHkhLCBjdHJsID0gc3R1ZHkuY29tbWVudEZvcm0sIGN1cnJlbnQgPSBjdHJsLmN1cnJlbnQoKTtcbiAgaWYgKCFjdXJyZW50KSByZXR1cm4gdmlld0Rpc2FibGVkKHJvb3QsICdTZWxlY3QgYSBtb3ZlIHRvIGNvbW1lbnQnKTtcblxuICBmdW5jdGlvbiBzZXR1cFRleHRhcmVhKHZub2RlOiBWTm9kZSkge1xuICAgIGNvbnN0IGVsID0gdm5vZGUuZWxtIGFzIEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgICBtaW5lID0gKGN1cnJlbnQhLm5vZGUuY29tbWVudHMgfHwgW10pLmZpbmQoZnVuY3Rpb24oYzogYW55KSB7XG4gICAgICAgIHJldHVybiBjLmJ5ICYmIGMuYnkuaWQgJiYgYy5ieS5pZCA9PT0gY3RybC5yb290Lm9wdHMudXNlcklkO1xuICAgICAgfSk7XG4gICAgZWwudmFsdWUgPSBtaW5lID8gbWluZS50ZXh0IDogJyc7XG4gICAgaWYgKGN0cmwub3BlbmluZygpIHx8IGN0cmwuZm9jdXMoKSkgd2luZG93LmxpY2hlc3MucmFmKCgpID0+IGVsLmZvY3VzKCkpO1xuICAgIGN0cmwub3BlbmluZyhmYWxzZSk7XG4gIH1cblxuICByZXR1cm4gaCgnZGl2LnN0dWR5X19jb21tZW50cycsIFtcbiAgICBjdXJyZW50Q29tbWVudHMocm9vdCwgIXN0dWR5Lm1lbWJlcnMuY2FuQ29udHJpYnV0ZSgpKSxcbiAgICBoKCdmb3JtLmZvcm0zJywgW1xuICAgICAgY3RybC5mb2N1cygpICYmIGN0cmwucm9vdC5wYXRoICE9PSBjdXJyZW50LnBhdGggPyBoKCdwJywgW1xuICAgICAgICAnQ29tbWVudGluZyBwb3NpdGlvbiBhZnRlciAnLFxuICAgICAgICBoKCdhJywge1xuICAgICAgICAgIGhvb2s6IGJpbmQoJ21vdXNlZG93bicsICgpID0+IGN0cmwucm9vdC51c2VySnVtcChjdXJyZW50LnBhdGgpLCBjdHJsLnJlZHJhdylcbiAgICAgICAgfSwgbm9kZUZ1bGxOYW1lKGN1cnJlbnQubm9kZSkpXG4gICAgICBdKSA6IG51bGwsXG4gICAgICBoKCdkaXYuZm9ybS1ncm91cCcsIFtcbiAgICAgICAgaCgndGV4dGFyZWEjY29tbWVudC10ZXh0LmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICBob29rOiB7XG4gICAgICAgICAgICBpbnNlcnQodm5vZGUpIHtcbiAgICAgICAgICAgICAgc2V0dXBUZXh0YXJlYSh2bm9kZSk7XG4gICAgICAgICAgICAgIGNvbnN0IGVsID0gdm5vZGUuZWxtIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgIGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBjdHJsLnN1Ym1pdChlbC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsLm9ua2V5dXAgPSBlbC5vbnBhc3RlID0gb25DaGFuZ2U7XG4gICAgICAgICAgICAgIGVsLm9uZm9jdXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjdHJsLmZvY3VzKHRydWUpO1xuICAgICAgICAgICAgICAgIGN0cmwucmVkcmF3KCk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGVsLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGN0cmwuZm9jdXMoZmFsc2UpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB2bm9kZS5kYXRhIS5oYXNoID0gY3VycmVudC5jaGFwdGVySWQgKyBjdXJyZW50LnBhdGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zdHBhdGNoKG9sZCwgdm5vZGUpIHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3S2V5ID0gY3VycmVudC5jaGFwdGVySWQgKyBjdXJyZW50LnBhdGg7XG4gICAgICAgICAgICAgIGlmIChvbGQuZGF0YSEucGF0aCAhPT0gbmV3S2V5KSBzZXR1cFRleHRhcmVhKHZub2RlKTtcbiAgICAgICAgICAgICAgdm5vZGUuZGF0YSEucGF0aCA9IG5ld0tleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBdKVxuICAgIF0pXG4gIF0pO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IFN0dWR5Q3RybCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBiaW5kLCByaWNoSFRNTCwgb25JbnNlcnQgfSBmcm9tICcuLi91dGlsJztcblxuZXhwb3J0IHR5cGUgU2F2ZSA9IChzdHJpbmcpID0+IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBEZXNjcmlwdGlvbkN0cmwge1xuXG4gIGVkaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdGV4dDogc3RyaW5nIHwgdW5kZWZpbmVkLCByZWFkb25seSBkb1NhdmU6IFNhdmUsIHJlYWRvbmx5IHJlZHJhdzogKCkgPT4gdm9pZCkgeyB9XG5cbiAgc2F2ZSh0OiBzdHJpbmcpIHtcbiAgICB0aGlzLnRleHQgPSB0O1xuICAgIHRoaXMuZG9TYXZlKHQpO1xuICAgIHRoaXMucmVkcmF3KCk7XG4gIH1cblxuICBzZXQodDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy50ZXh0ID0gdCA/IHQgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlc2NUaXRsZShjaGFwdGVyOiBib29sZWFuKSB7XG4gIHJldHVybiBgJHtjaGFwdGVyID8gJ0NoYXB0ZXInIDogJ1N0dWR5J30gcGlubmVkIGNvbW1lbnRgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhzdHVkeTogU3R1ZHlDdHJsLCBjaGFwdGVyOiBib29sZWFuKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICBjb25zdCBkZXNjID0gY2hhcHRlciA/IHN0dWR5LmNoYXB0ZXJEZXNjIDogc3R1ZHkuc3R1ZHlEZXNjLFxuICAgIGNvbnRyaWIgPSBzdHVkeS5tZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKSAmJiAhc3R1ZHkuZ2FtZWJvb2tQbGF5KCk7XG4gIGlmIChkZXNjLmVkaXQpIHJldHVybiBlZGl0KGRlc2MsIGNoYXB0ZXIgPyBzdHVkeS5kYXRhLmNoYXB0ZXIuaWQgOiBzdHVkeS5kYXRhLmlkLCBjaGFwdGVyKTtcbiAgY29uc3QgaXNFbXB0eSA9IGRlc2MudGV4dCA9PT0gJy0nO1xuICBpZiAoIWRlc2MudGV4dCB8fCAoaXNFbXB0eSAmJiAhY29udHJpYikpIHJldHVybjtcbiAgcmV0dXJuIGgoYGRpdi5zdHVkeS1kZXNjJHtjaGFwdGVyID8gJy5jaGFwdGVyLWRlc2MnIDogJyd9JHtpc0VtcHR5ID8gJy5lbXB0eScgOiAnJ31gLCBbXG4gICAgY29udHJpYiAmJiAhaXNFbXB0eSA/IGgoJ2Rpdi5jb250cmliJywgW1xuICAgICAgaCgnc3BhbicsIGRlc2NUaXRsZShjaGFwdGVyKSksXG4gICAgICBpc0VtcHR5ID8gbnVsbCA6IGgoJ2EnLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgJ2RhdGEtaWNvbic6ICdtJyxcbiAgICAgICAgICB0aXRsZTogJ0VkaXQnXG4gICAgICAgIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiB7IGRlc2MuZWRpdCA9IHRydWU7IH0sIGRlc2MucmVkcmF3KVxuICAgICAgfSksXG4gICAgICBoKCdhJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICdkYXRhLWljb24nOiAncScsXG4gICAgICAgICAgdGl0bGU6ICdEZWxldGUnXG4gICAgICAgIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIGlmIChjb25maXJtKCdEZWxldGUgcGVybWFuZW50IGRlc2NyaXB0aW9uPycpKSBkZXNjLnNhdmUoJycpO1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICBdKSA6IG51bGwsXG4gICAgaXNFbXB0eSA/IGgoJ2EudGV4dC5idXR0b24nLCB7XG4gICAgICBob29rOiBiaW5kKCdjbGljaycsIF8gPT4geyBkZXNjLmVkaXQgPSB0cnVlOyB9LCBkZXNjLnJlZHJhdylcbiAgICB9LCBkZXNjVGl0bGUoY2hhcHRlcikpIDogaCgnZGl2LnRleHQnLCB7IGhvb2s6IHJpY2hIVE1MKGRlc2MudGV4dCkgfSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIGVkaXQoY3RybDogRGVzY3JpcHRpb25DdHJsLCBpZDogc3RyaW5nLCBjaGFwdGVyOiBib29sZWFuKTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2LnN0dWR5LWRlc2MtZm9ybScsIFtcbiAgICBoKCdkaXYudGl0bGUnLCBbXG4gICAgICBkZXNjVGl0bGUoY2hhcHRlciksXG4gICAgICBoKCdidXR0b24uYnV0dG9uLmJ1dHRvbi1lbXB0eS5idXR0b24tcmVkJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICdkYXRhLWljb24nOiAnTCcsXG4gICAgICAgICAgdGl0bGU6ICdDbG9zZSdcbiAgICAgICAgfSxcbiAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiBjdHJsLmVkaXQgPSBmYWxzZSwgY3RybC5yZWRyYXcpXG4gICAgICB9KVxuICAgIF0pLFxuICAgIGgoJ2Zvcm0uZm9ybTMnLCBbXG4gICAgICBoKCdkaXYuZm9ybS1ncm91cCcsIFtcbiAgICAgICAgaCgndGV4dGFyZWEjZm9ybS1jb250cm9sLmRlc2MtdGV4dC4nICsgaWQsIHtcbiAgICAgICAgICBob29rOiBvbkluc2VydDxIVE1MSW5wdXRFbGVtZW50PihlbCA9PiB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9IGN0cmwudGV4dCA9PT0gJy0nID8gJycgOiAoY3RybC50ZXh0IHx8ICcnKTtcbiAgICAgICAgICAgIGVsLm9ua2V5dXAgPSBlbC5vbnBhc3RlID0gKCkgPT4ge1xuICAgICAgICAgICAgICBjdHJsLnNhdmUoZWwudmFsdWUudHJpbSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbC5mb2N1cygpO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICBdKVxuICAgIF0pXG4gIF0pO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IGJpbmQsIGRhdGFJY29uIH0gZnJvbSAnLi4vLi4vdXRpbCc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vLi4vY3RybCc7XG5pbXBvcnQgeyBTdHVkeUN0cmwgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlCdXR0b25zKHJvb3Q6IEFuYWx5c2VDdHJsKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICBjb25zdCBzdHVkeSA9IHJvb3Quc3R1ZHkhLFxuICAgIGN0cmwgPSBzdHVkeS5nYW1lYm9va1BsYXkoKTtcbiAgaWYgKCFjdHJsKSByZXR1cm47XG4gIGNvbnN0IHN0YXRlID0gY3RybC5zdGF0ZSxcbiAgICBmYiA9IHN0YXRlLmZlZWRiYWNrLFxuICAgIG15VHVybiA9IGZiID09PSAncGxheSc7XG4gIHJldHVybiBoKCdkaXYuZ2FtZWJvb2stYnV0dG9ucycsIFtcbiAgICByb290LnBhdGggPyBoKCdhLmZidC50ZXh0LmJhY2snLCB7XG4gICAgICBhdHRyczogZGF0YUljb24oJ0knKSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4gcm9vdC51c2VySnVtcCgnJyksIGN0cmwucmVkcmF3KVxuICAgIH0sICdCYWNrJykgOiBudWxsLFxuICAgIG15VHVybiA/IGgoJ2EuZmJ0LnRleHQuc29sdXRpb24nLCB7XG4gICAgICBhdHRyczogZGF0YUljb24oJ0cnKSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgY3RybC5zb2x1dGlvbiwgY3RybC5yZWRyYXcpXG4gICAgfSwgJ1ZpZXcgdGhlIHNvbHV0aW9uJykgOiB1bmRlZmluZWQsXG4gICAgb3ZlcnJpZGVCdXR0b24oc3R1ZHkpXG4gIF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3ZlcnJpZGVCdXR0b24oc3R1ZHk6IFN0dWR5Q3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgaWYgKHN0dWR5LmRhdGEuY2hhcHRlci5nYW1lYm9vaykge1xuICAgIGNvbnN0IG8gPSBzdHVkeS52bS5nYW1lYm9va092ZXJyaWRlO1xuICAgIGlmIChzdHVkeS5tZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKSkgcmV0dXJuIGgoJ2EuZmJ0LnRleHQucHJldmlldycsIHtcbiAgICAgIGNsYXNzOiB7IGFjdGl2ZTogbyA9PT0gJ3BsYXknIH0sXG4gICAgICBhdHRyczogZGF0YUljb24oJ3YnKSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBzdHVkeS5zZXRHYW1lYm9va092ZXJyaWRlKG8gPT09ICdwbGF5JyA/IHVuZGVmaW5lZCA6ICdwbGF5Jyk7XG4gICAgICB9LCBzdHVkeS5yZWRyYXcpXG4gICAgfSwgJ1ByZXZpZXcnKTtcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzQW5hbHlzZSA9IG8gPT09ICdhbmFseXNlJyxcbiAgICAgICAgY3RybCA9IHN0dWR5LmdhbWVib29rUGxheSgpO1xuICAgICAgaWYgKGlzQW5hbHlzZSB8fCAoY3RybCAmJiBjdHJsLnN0YXRlLmZlZWRiYWNrID09PSAnZW5kJykpIHJldHVybiBoKCdhLmZidC50ZXh0LnByZXZpZXcnLCB7XG4gICAgICAgIGNsYXNzOiB7IGFjdGl2ZTogaXNBbmFseXNlIH0sXG4gICAgICAgIGF0dHJzOiBkYXRhSWNvbignQScpLFxuICAgICAgICBob29rOiBiaW5kKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICBzdHVkeS5zZXRHYW1lYm9va092ZXJyaWRlKGlzQW5hbHlzZSA/IHVuZGVmaW5lZCA6ICdhbmFseXNlJyk7XG4gICAgICAgIH0sIHN0dWR5LnJlZHJhdylcbiAgICAgIH0sICdBbmFseXNlJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBIb29rcyB9IGZyb20gJ3NuYWJiZG9tL2hvb2tzJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi8uLi9jdHJsJztcbmltcG9ydCB7IGJpbmQsIGljb25UYWcgfSBmcm9tICcuLi8uLi91dGlsJztcbmltcG9ydCB7IE1heWJlVk5vZGVzIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnY29tbW9uL3Rocm90dGxlJztcbmltcG9ydCAqIGFzIGNvbnRyb2wgZnJvbSAnLi4vLi4vY29udHJvbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBydW5uaW5nKGN0cmw6IEFuYWx5c2VDdHJsKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIWN0cmwuc3R1ZHkgJiYgY3RybC5zdHVkeS5kYXRhLmNoYXB0ZXIuZ2FtZWJvb2sgJiZcbiAgIWN0cmwuZ2FtZWJvb2tQbGF5KCkgJiYgY3RybC5zdHVkeS52bS5nYW1lYm9va092ZXJyaWRlICE9PSAnYW5hbHlzZSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoY3RybDogQW5hbHlzZUN0cmwpOiBWTm9kZSB7XG5cbiAgY29uc3Qgc3R1ZHkgPSBjdHJsLnN0dWR5ISxcbiAgaXNNeU1vdmUgPSBjdHJsLnR1cm5Db2xvcigpID09PSBjdHJsLmRhdGEub3JpZW50YXRpb24sXG4gIGlzQ29tbWVudGVkID0gISEoY3RybC5ub2RlLmNvbW1lbnRzIHx8IFtdKS5maW5kKGMgPT4gYy50ZXh0Lmxlbmd0aCA+IDIpLFxuICBoYXNWYXJpYXRpb24gPSBjdHJsLnRyZWUucGFyZW50Tm9kZShjdHJsLnBhdGgpLmNoaWxkcmVuLmxlbmd0aCA+IDE7XG5cbiAgbGV0IGNvbnRlbnQ6IE1heWJlVk5vZGVzO1xuXG4gIGNvbnN0IGNvbW1lbnRIb29rOiBIb29rcyA9IGJpbmQoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHN0dWR5LmNvbW1lbnRGb3JtLnN0YXJ0KHN0dWR5LnZtLmNoYXB0ZXJJZCwgY3RybC5wYXRoLCBjdHJsLm5vZGUpO1xuICAgIHN0dWR5LnZtLnRvb2xUYWIoJ2NvbW1lbnRzJyk7XG4gICAgd2luZG93LmxpY2hlc3MucmVxdWVzdElkbGVDYWxsYmFjaygoKSA9PiAkKCcjY29tbWVudC10ZXh0JykuZm9jdXMoKSk7XG4gIH0sIGN0cmwucmVkcmF3KTtcblxuICBpZiAoIWN0cmwucGF0aCkge1xuICAgIGlmIChpc015TW92ZSkgY29udGVudCA9IFtcbiAgICAgIGgoJ2Rpdi5sZWdlbmQudG9kby5jbGlja2FibGUnLCB7XG4gICAgICAgIGhvb2s6IGNvbW1lbnRIb29rLFxuICAgICAgICBjbGFzczogeyBkb25lOiBpc0NvbW1lbnRlZCB9XG4gICAgICB9LCBbXG4gICAgICAgIGljb25UYWcoJ2MnKSxcbiAgICAgICAgaCgncCcsICdIZWxwIHRoZSBwbGF5ZXIgZmluZCB0aGUgaW5pdGlhbCBtb3ZlLCB3aXRoIGEgY29tbWVudC4nKVxuICAgICAgXSksXG4gICAgICByZW5kZXJIaW50KGN0cmwpXG4gICAgXTtcbiAgICBlbHNlIGNvbnRlbnQgPSBbXG4gICAgICBoKCdkaXYubGVnZW5kLmNsaWNrYWJsZScsIHtcbiAgICAgICAgaG9vazogY29tbWVudEhvb2tcbiAgICAgIH0sIFtcbiAgICAgICAgaWNvblRhZygnYycpLFxuICAgICAgICBoKCdwJywgJ0ludHJvZHVjZSB0aGUgZ2FtZWJvb2sgd2l0aCBhIGNvbW1lbnQnKVxuICAgICAgXSksXG4gICAgICBoKCdkaXYubGVnZW5kLnRvZG8nLCB7IGNsYXNzOiB7IGRvbmU6ICEhY3RybC5ub2RlLmNoaWxkcmVuWzBdIH19LCBbXG4gICAgICAgIGljb25UYWcoJ0cnKSxcbiAgICAgICAgaCgncCcsICdQdXQgdGhlIG9wcG9uZW50XFwncyBmaXJzdCBtb3ZlIG9uIHRoZSBib2FyZC4nKVxuICAgICAgXSlcbiAgICBdO1xuICB9XG4gIGVsc2UgaWYgKGN0cmwub25NYWlubGluZSkge1xuICAgIGlmIChpc015TW92ZSkgY29udGVudCA9IFtcbiAgICAgIGgoJ2Rpdi5sZWdlbmQudG9kby5jbGlja2FibGUnLCB7XG4gICAgICAgIGhvb2s6IGNvbW1lbnRIb29rLFxuICAgICAgICBjbGFzczogeyBkb25lOiBpc0NvbW1lbnRlZCB9XG4gICAgICB9LCBbXG4gICAgICAgIGljb25UYWcoJ2MnKSxcbiAgICAgICAgaCgncCcsICdFeHBsYWluIHRoZSBvcHBvbmVudCBtb3ZlLCBhbmQgaGVscCB0aGUgcGxheWVyIGZpbmQgdGhlIG5leHQgbW92ZSwgd2l0aCBhIGNvbW1lbnQuJylcbiAgICAgIF0pLFxuICAgICAgcmVuZGVySGludChjdHJsKVxuICAgIF07XG4gICAgZWxzZSBjb250ZW50ID0gW1xuICAgICAgaCgnZGl2LmxlZ2VuZC5jbGlja2FibGUnLCB7XG4gICAgICAgIGhvb2s6IGNvbW1lbnRIb29rLFxuICAgICAgfSwgW1xuICAgICAgICBpY29uVGFnKCdjJyksXG4gICAgICAgIGgoJ3AnLCAnWW91IG1heSByZWZsZWN0IG9uIHRoZSBwbGF5ZXJcXCdzIGNvcnJlY3QgbW92ZSwgd2l0aCBhIGNvbW1lbnQ7IG9yIGxlYXZlIGVtcHR5IHRvIGp1bXAgaW1tZWRpYXRlbHkgdG8gdGhlIG5leHQgbW92ZS4nKVxuICAgICAgXSksXG4gICAgICBoYXNWYXJpYXRpb24gPyBudWxsIDogaCgnZGl2LmxlZ2VuZC5jbGlja2FibGUnLCB7XG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4gY29udHJvbC5wcmV2KGN0cmwpLCBjdHJsLnJlZHJhdylcbiAgICAgIH0sIFtcbiAgICAgICAgaWNvblRhZygnRycpLFxuICAgICAgICBoKCdwJywgJ0FkZCB2YXJpYXRpb24gbW92ZXMgdG8gZXhwbGFpbiB3aHkgc3BlY2lmaWMgb3RoZXIgbW92ZXMgYXJlIHdyb25nLicpXG4gICAgICBdKSxcbiAgICAgIHJlbmRlckRldmlhdGlvbihjdHJsKVxuICAgIF07XG4gIH1cbiAgZWxzZSBjb250ZW50ID0gW1xuICAgIGgoJ2Rpdi5sZWdlbmQudG9kby5jbGlja2FibGUnLCB7XG4gICAgICBob29rOiBjb21tZW50SG9vayxcbiAgICAgIGNsYXNzOiB7IGRvbmU6IGlzQ29tbWVudGVkIH1cbiAgICB9LCBbXG4gICAgICBpY29uVGFnKCdjJyksXG4gICAgICBoKCdwJywgJ0V4cGxhaW4gd2h5IHRoaXMgbW92ZSBpcyB3cm9uZyBpbiBhIGNvbW1lbnQnKVxuICAgIF0pLFxuICAgIGgoJ2Rpdi5sZWdlbmQnLCBbXG4gICAgICBoKCdwJywgJ09yIHByb21vdGUgaXQgYXMgdGhlIG1haW5saW5lIGlmIGl0IGlzIHRoZSByaWdodCBtb3ZlLicpXG4gICAgXSlcbiAgXTtcblxuICByZXR1cm4gaCgnZGl2LmdhbWVib29rLWVkaXQnLCB7XG4gICAgaG9vazogeyBpbnNlcnQ6IF8gPT4gd2luZG93LmxpY2hlc3MubG9hZENzc1BhdGgoJ2FuYWx5c2UuZ2FtZWJvb2suZWRpdCcpIH1cbiAgfSwgY29udGVudCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckRldmlhdGlvbihjdHJsOiBBbmFseXNlQ3RybCk6IFZOb2RlIHtcbiAgY29uc3QgZmllbGQgPSAnZGV2aWF0aW9uJztcbiAgcmV0dXJuIGgoJ2Rpdi5kZXZpYXRpb24nLCBbXG4gICAgaCgnZGl2LmxlZ2VuZC50b2RvJywgeyBjbGFzczogeyBkb25lOiBub2RlR2FtZWJvb2tWYWx1ZShjdHJsLm5vZGUsIGZpZWxkKS5sZW5ndGggPiAyIH0gfSwgW1xuICAgICAgaWNvblRhZygnYycpLFxuICAgICAgaCgncCcsICdXaGVuIGFueSBvdGhlciB3cm9uZyBtb3ZlIGlzIHBsYXllZDonKVxuICAgIF0pLFxuICAgIGgoJ3RleHRhcmVhJywge1xuICAgICAgYXR0cnM6IHsgcGxhY2Vob2xkZXI6ICdFeHBsYWluIHdoeSBhbGwgb3RoZXIgbW92ZXMgYXJlIHdyb25nJyB9LFxuICAgICAgaG9vazogdGV4dGFyZWFIb29rKGN0cmwsIGZpZWxkKVxuICAgIH0pXG4gIF0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJIaW50KGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICBjb25zdCBmaWVsZCA9ICdoaW50JztcbiAgcmV0dXJuIGgoJ2Rpdi5oaW50JywgW1xuICAgIGgoJ2Rpdi5sZWdlbmQnLCBbXG4gICAgICBpY29uVGFnKCfugIUnKSxcbiAgICAgIGgoJ3AnLCAnT3B0aW9uYWwsIG9uLWRlbWFuZCBoaW50IGZvciB0aGUgcGxheWVyOicpXG4gICAgXSksXG4gICAgaCgndGV4dGFyZWEnLCB7XG4gICAgICBhdHRyczogeyBwbGFjZWhvbGRlcjogJ0dpdmUgdGhlIHBsYXllciBhIHRpcCBzbyB0aGV5IGNhbiBmaW5kIHRoZSByaWdodCBtb3ZlJyB9LFxuICAgICAgaG9vazogdGV4dGFyZWFIb29rKGN0cmwsIGZpZWxkKVxuICAgIH0pXG4gIF0pO1xufVxuXG5jb25zdCBzYXZlTm9kZSA9IHRocm90dGxlKDUwMCwgKGN0cmw6IEFuYWx5c2VDdHJsLCBnYW1lYm9vazogVHJlZS5HYW1lYm9vaykgPT4ge1xuICBjdHJsLnNvY2tldC5zZW5kKCdzZXRHYW1lYm9vaycsIHtcbiAgICBwYXRoOiBjdHJsLnBhdGgsXG4gICAgY2g6IGN0cmwuc3R1ZHkhLnZtLmNoYXB0ZXJJZCxcbiAgICBnYW1lYm9vazogZ2FtZWJvb2tcbiAgfSk7XG4gIGN0cmwucmVkcmF3KCk7XG59KTtcblxuZnVuY3Rpb24gbm9kZUdhbWVib29rVmFsdWUobm9kZTogVHJlZS5Ob2RlLCBmaWVsZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIChub2RlLmdhbWVib29rICYmIG5vZGUuZ2FtZWJvb2tbZmllbGRdKSB8fCAnJztcbn1cblxuZnVuY3Rpb24gdGV4dGFyZWFIb29rKGN0cmw6IEFuYWx5c2VDdHJsLCBmaWVsZDogc3RyaW5nKTogSG9va3Mge1xuICBjb25zdCB2YWx1ZSA9IG5vZGVHYW1lYm9va1ZhbHVlKGN0cmwubm9kZSwgZmllbGQpO1xuICByZXR1cm4ge1xuICAgIGluc2VydCh2bm9kZTogVk5vZGUpIHtcbiAgICAgIGNvbnN0IGVsID0gdm5vZGUuZWxtIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICBlbC52YWx1ZSA9IHZhbHVlO1xuICAgICAgZWwub25rZXl1cCA9IGVsLm9ucGFzdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBjdHJsLm5vZGU7XG4gICAgICAgIG5vZGUuZ2FtZWJvb2sgPSBub2RlLmdhbWVib29rIHx8IHt9O1xuICAgICAgICBub2RlLmdhbWVib29rW2ZpZWxkXSA9IGVsLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgc2F2ZU5vZGUoY3RybCwgbm9kZS5nYW1lYm9vaywgNTApO1xuICAgICAgfTtcbiAgICAgIHZub2RlLmRhdGEhLnBhdGggPSBjdHJsLnBhdGg7XG4gICAgfSxcbiAgICBwb3N0cGF0Y2gob2xkOiBWTm9kZSwgdm5vZGU6IFZOb2RlKSB7XG4gICAgICBpZiAob2xkLmRhdGEhLnBhdGggIT09IGN0cmwucGF0aCkgKHZub2RlLmVsbSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHZhbHVlO1xuICAgICAgdm5vZGUuZGF0YSEucGF0aCA9IGN0cmwucGF0aDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi8uLi9jdHJsJztcbmltcG9ydCB7IHBhdGggYXMgdHJlZVBhdGgsIG9wcyBhcyB0cmVlT3BzIH0gZnJvbSAndHJlZSc7XG5pbXBvcnQgeyBtYWtlU2hhcGVzRnJvbVVjaSB9IGZyb20gJy4uLy4uL2F1dG9TaGFwZSc7XG5cbnR5cGUgRmVlZGJhY2sgPSAncGxheScgfCAnZ29vZCcgfCAnYmFkJyB8ICdlbmQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgZmVlZGJhY2s6IEZlZWRiYWNrO1xuICBjb21tZW50Pzogc3RyaW5nO1xuICBoaW50Pzogc3RyaW5nO1xuICBzaG93SGludDogYm9vbGVhbjtcbiAgaW5pdDogYm9vbGVhbjsgLy8gb24gcm9vdCBwYXRoXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVib29rUGxheUN0cmwge1xuXG4gIHN0YXRlOiBTdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSByb290OiBBbmFseXNlQ3RybCxcbiAgICByZWFkb25seSBjaGFwdGVySWQ6IHN0cmluZyxcbiAgICByZWFkb25seSB0cmFuczogVHJhbnMsXG4gICAgcmVhZG9ubHkgcmVkcmF3OiAoKSA9PiB2b2lkKSB7XG5cbiAgICAvLyBlbnN1cmUgYWxsIG9yaWdpbmFsIG5vZGVzIGhhdmUgYSBnYW1lYm9vayBlbnRyeSxcbiAgICAvLyBzbyB3ZSBjYW4gZGlmZmVyZW50aWF0ZSBvcmlnaW5hbCBub2RlcyBmcm9tIHVzZXItbWFkZSBvbmVzXG4gICAgdHJlZU9wcy51cGRhdGVBbGwocm9vdC50cmVlLnJvb3QsIG4gPT4ge1xuICAgICAgbi5nYW1lYm9vayA9IG4uZ2FtZWJvb2sgfHwge307XG4gICAgICBpZiAobi5zaGFwZXMpIG4uZ2FtZWJvb2suc2hhcGVzID0gbi5zaGFwZXMuc2xpY2UoMCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm1ha2VTdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBtYWtlU3RhdGUgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3Qgbm9kZSA9IHRoaXMucm9vdC5ub2RlLFxuICAgIG5vZGVDb21tZW50ID0gKG5vZGUuY29tbWVudHMgfHwgW10pWzBdLFxuICAgIHN0YXRlOiBQYXJ0aWFsPFN0YXRlPiA9IHtcbiAgICAgIGluaXQ6IHRoaXMucm9vdC5wYXRoID09PSAnJyxcbiAgICAgIGNvbW1lbnQ6IG5vZGVDb21tZW50ID8gbm9kZUNvbW1lbnQudGV4dCA6IHVuZGVmaW5lZCxcbiAgICAgIHNob3dIaW50OiBmYWxzZSxcbiAgICB9LFxuICAgIHBhclBhdGggPSB0cmVlUGF0aC5pbml0KHRoaXMucm9vdC5wYXRoKSxcbiAgICBwYXJOb2RlID0gdGhpcy5yb290LnRyZWUubm9kZUF0UGF0aChwYXJQYXRoKTtcbiAgICBpZiAoIXRoaXMucm9vdC5vbk1haW5saW5lICYmICF0aGlzLnJvb3QudHJlZS5wYXRoSXNNYWlubGluZShwYXJQYXRoKSkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnJvb3Qub25NYWlubGluZSAmJiAhbm9kZS5jaGlsZHJlblswXSkge1xuICAgICAgc3RhdGUuZmVlZGJhY2sgPSAnZW5kJztcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5pc015TW92ZSgpKSB7XG4gICAgICBzdGF0ZS5mZWVkYmFjayA9ICdwbGF5JztcbiAgICAgIHN0YXRlLmhpbnQgPSAobm9kZS5nYW1lYm9vayB8fCB7fSkuaGludDtcbiAgICB9IGVsc2UgaWYgKHRoaXMucm9vdC5vbk1haW5saW5lKSB7XG4gICAgICBzdGF0ZS5mZWVkYmFjayA9ICdnb29kJztcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuZmVlZGJhY2sgPSAnYmFkJztcbiAgICAgIGlmICghc3RhdGUuY29tbWVudCkge1xuICAgICAgICBzdGF0ZS5jb21tZW50ID0gcGFyTm9kZS5jaGlsZHJlblswXS5nYW1lYm9vayEuZGV2aWF0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnN0YXRlID0gc3RhdGUgYXMgU3RhdGU7XG4gICAgaWYgKCFzdGF0ZS5jb21tZW50KSB7XG4gICAgICBpZiAoc3RhdGUuZmVlZGJhY2sgPT09ICdnb29kJykgc2V0VGltZW91dCh0aGlzLm5leHQsIHRoaXMucm9vdC5wYXRoID8gMTAwMCA6IDMwMCk7XG4gICAgICBlbHNlIGlmIChzdGF0ZS5mZWVkYmFjayA9PT0gJ2JhZCcpIHNldFRpbWVvdXQodGhpcy5yZXRyeSwgODAwKTtcbiAgICB9XG4gIH1cblxuICBpc015TW92ZSA9ICgpID0+IHRoaXMucm9vdC50dXJuQ29sb3IoKSA9PT0gdGhpcy5yb290LmRhdGEub3JpZW50YXRpb247XG5cbiAgcmV0cnkgPSAoKSA9PiB7XG4gICAgbGV0IHBhdGggPSB0aGlzLnJvb3QucGF0aDtcbiAgICB3aGlsZSAocGF0aCAmJiAhdGhpcy5yb290LnRyZWUucGF0aElzTWFpbmxpbmUocGF0aCkpIHBhdGggPSB0cmVlUGF0aC5pbml0KHBhdGgpO1xuICAgIHRoaXMucm9vdC51c2VySnVtcChwYXRoKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG5cbiAgbmV4dCA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMuaXNNeU1vdmUoKSkge1xuICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLnJvb3Qubm9kZS5jaGlsZHJlblswXTtcbiAgICAgIGlmIChjaGlsZCkgdGhpcy5yb290LnVzZXJKdW1wKHRoaXMucm9vdC5wYXRoICsgY2hpbGQuaWQpO1xuICAgIH1cbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG5cbiAgb25TcGFjZSA9ICgpID0+IHtcbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuZmVlZGJhY2spIHtcbiAgICAgIGNhc2UgJ2JhZCc6XG4gICAgICAgIHRoaXMucmV0cnkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlbmQnOlxuICAgICAgICBjb25zdCBzID0gdGhpcy5yb290LnN0dWR5ISxcbiAgICAgICAgYyA9IHMubmV4dENoYXB0ZXIoKTtcbiAgICAgICAgaWYgKGMpIHMuc2V0Q2hhcHRlcihjLmlkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9XG4gIH1cblxuICBvblByZW1vdmVTZXQgPSAoKSA9PiB7XG4gICAgdGhpcy5uZXh0KCk7XG4gIH1cblxuICBoaW50ID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLmhpbnQpIHRoaXMuc3RhdGUuc2hvd0hpbnQgPSAhdGhpcy5zdGF0ZS5zaG93SGludDtcbiAgfVxuXG4gIHNvbHV0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMucm9vdC5jaGVzc2dyb3VuZC5zZXRTaGFwZXMoXG4gICAgICBtYWtlU2hhcGVzRnJvbVVjaSh0aGlzLnJvb3QudHVybkNvbG9yKCksIHRoaXMucm9vdC5ub2RlLmNoaWxkcmVuWzBdLnVjaSEsICdncmVlbicpKTtcbiAgfVxuXG4gIGNhbkp1bXBUbyA9IChwYXRoOiBUcmVlLlBhdGgpID0+IHRyZWVQYXRoLmNvbnRhaW5zKHRoaXMucm9vdC5wYXRoLCBwYXRoKTtcblxuICBvbkp1bXAgPSAoKSA9PiB7XG4gICAgdGhpcy5tYWtlU3RhdGUoKTtcbiAgICAvLyB3YWl0IGZvciB0aGUgcm9vdCBjdHJsIHRvIG1ha2UgdGhlIG1vdmVcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucm9vdC53aXRoQ2coY2cgPT4gY2cucGxheVByZW1vdmUoKSksIDEwMCk7XG4gIH1cblxuICBvblNoYXBlQ2hhbmdlID0gc2hhcGVzID0+IHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5yb290Lm5vZGU7XG4gICAgaWYgKG5vZGUuZ2FtZWJvb2sgJiYgbm9kZS5nYW1lYm9vay5zaGFwZXMgJiYgIXNoYXBlcy5sZW5ndGgpIHtcbiAgICAgIG5vZGUuc2hhcGVzID0gbm9kZS5nYW1lYm9vay5zaGFwZXMuc2xpY2UoMCk7XG4gICAgICB0aGlzLnJvb3QuanVtcCh0aGlzLnJvb3QucGF0aCk7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCBHYW1lYm9va1BsYXlDdHJsIGZyb20gJy4vZ2FtZWJvb2tQbGF5Q3RybCc7XG5pbXBvcnQgeyBiaW5kLCBkYXRhSWNvbiwgaWNvblRhZywgcmljaEhUTUwgfSBmcm9tICcuLi8uLi91dGlsJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9nYW1lYm9va1BsYXlDdHJsJztcblxuY29uc3QgZGVmYXVsdENvbW1lbnRzID0ge1xuICBwbGF5OiAnV2hhdCB3b3VsZCB5b3UgcGxheSBpbiB0aGlzIHBvc2l0aW9uPycsXG4gIGVuZDogJ0NvbmdyYXR1bGF0aW9ucyEgWW91IGNvbXBsZXRlZCB0aGlzIGxlc3Nvbi4nXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKGN0cmw6IEdhbWVib29rUGxheUN0cmwpOiBWTm9kZSB7XG5cbiAgY29uc3Qgc3RhdGUgPSBjdHJsLnN0YXRlLFxuICBjb21tZW50ID0gc3RhdGUuY29tbWVudCB8fCBkZWZhdWx0Q29tbWVudHNbc3RhdGUuZmVlZGJhY2tdO1xuXG4gIHJldHVybiBoKCdkaXYuZ2FtZWJvb2snLCB7XG4gICAgaG9vazogeyBpbnNlcnQ6IF8gPT4gd2luZG93LmxpY2hlc3MubG9hZENzc1BhdGgoJ2FuYWx5c2UuZ2FtZWJvb2sucGxheScpIH1cbiAgfSwgW1xuICAgIGNvbW1lbnQgPyBoKCdkaXYuY29tbWVudCcsIHtcbiAgICAgIGNsYXNzOiB7IGhpbnRlZDogc3RhdGUuc2hvd0hpbnQgfVxuICAgIH0sIFtcbiAgICAgIGgoJ2Rpdi5jb250ZW50JywgeyBob29rOiByaWNoSFRNTChjb21tZW50KSB9KSxcbiAgICAgIGhpbnRab25lKGN0cmwpXG4gICAgXSkgOiB1bmRlZmluZWQsXG4gICAgaCgnZGl2LmZsb29yJywgW1xuICAgICAgcmVuZGVyRmVlZGJhY2soY3RybCwgc3RhdGUpLFxuICAgICAgaCgnaW1nLm1hc2NvdCcsIHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICB3aWR0aDogMTIwLFxuICAgICAgICAgIGhlaWdodDogMTIwLFxuICAgICAgICAgIHNyYzogd2luZG93LmxpY2hlc3MuYXNzZXRVcmwoJ2ltYWdlcy9tYXNjb3Qvb2N0b3B1cy5zdmcnKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIF0pXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBoaW50Wm9uZShjdHJsOiBHYW1lYm9va1BsYXlDdHJsKSB7XG4gIGNvbnN0IHN0YXRlID0gY3RybC5zdGF0ZSxcbiAgY2xpY2tIb29rID0gKCkgPT4gKHtcbiAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwuaGludCwgY3RybC5yZWRyYXcpXG4gIH0pO1xuICBpZiAoc3RhdGUuc2hvd0hpbnQpIHJldHVybiBoKCdkaXYnLCBjbGlja0hvb2soKSwgW1xuICAgIGgoJ2Rpdi5oaW50JywgeyBob29rOiByaWNoSFRNTChzdGF0ZS5oaW50ISkgfSlcbiAgXSk7XG4gIGlmIChzdGF0ZS5oaW50KSByZXR1cm4gaCgnYS5oaW50JywgY2xpY2tIb29rKCksICdHZXQgYSBoaW50Jyk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckZlZWRiYWNrKGN0cmw6IEdhbWVib29rUGxheUN0cmwsIHN0YXRlOiBTdGF0ZSkge1xuICBjb25zdCBmYiA9IHN0YXRlLmZlZWRiYWNrLFxuICBjb2xvciA9IGN0cmwucm9vdC50dXJuQ29sb3IoKTtcbiAgaWYgKGZiID09PSAnYmFkJykgcmV0dXJuIGgoJ2Rpdi5mZWVkYmFjay5hY3QuYmFkJyArIChzdGF0ZS5jb21tZW50ID8gJy5jb20nIDogJycpLCB7XG4gICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLnJldHJ5KVxuICB9LCBbXG4gICAgaWNvblRhZygnUCcpLFxuICAgIGgoJ3NwYW4nLCAnUmV0cnknKVxuICBdKTtcbiAgaWYgKGZiID09PSAnZ29vZCcgJiYgc3RhdGUuY29tbWVudCkgcmV0dXJuIGgoJ2Rpdi5mZWVkYmFjay5hY3QuZ29vZC5jb20nLCB7XG4gICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLm5leHQpXG4gIH0sIFtcbiAgICBoKCdzcGFuLnRleHQnLCB7IGF0dHJzOiBkYXRhSWNvbignRycpIH0sICdOZXh0JyksXG4gICAgaCgna2JkJywgJzxzcGFjZT4nKVxuICBdKTtcbiAgaWYgKGZiID09PSAnZW5kJykgcmV0dXJuIHJlbmRlckVuZChjdHJsKTtcbiAgcmV0dXJuIGgoJ2Rpdi5mZWVkYmFjay5pbmZvLicgKyBmYiArIChzdGF0ZS5pbml0ID8gJy5pbml0JyA6ICcnKSxcbiAgICBoKCdkaXYnLCBmYiA9PT0gJ3BsYXknID8gW1xuICAgICAgaCgnZGl2Lm5vLXNxdWFyZScsIGgoJ3BpZWNlLmtpbmcuJyArIGNvbG9yKSksXG4gICAgICBoKCdkaXYuaW5zdHJ1Y3Rpb24nLCBbXG4gICAgICAgIGgoJ3N0cm9uZycsIGN0cmwudHJhbnMubm9hcmcoJ3lvdXJUdXJuJykpLFxuICAgICAgICBoKCdlbScsIGN0cmwudHJhbnMubm9hcmcoY29sb3IgPT09ICd3aGl0ZScgPyAnZmluZFRoZUJlc3RNb3ZlRm9yV2hpdGUnIDogJ2ZpbmRUaGVCZXN0TW92ZUZvckJsYWNrJykpXG4gICAgICBdKVxuICAgIF0gOiBbICdHb29kIG1vdmUhJyBdKVxuICApO1xufVxuXG5mdW5jdGlvbiByZW5kZXJFbmQoY3RybDogR2FtZWJvb2tQbGF5Q3RybCkge1xuICBjb25zdCBzdHVkeSA9IGN0cmwucm9vdC5zdHVkeSEsXG4gIG5leHRDaGFwdGVyID0gc3R1ZHkubmV4dENoYXB0ZXIoKTtcbiAgcmV0dXJuIGgoJ2Rpdi5mZWVkYmFjay5lbmQnLCBbXG4gICAgbmV4dENoYXB0ZXIgPyBoKCdhLm5leHQudGV4dCcsIHtcbiAgICAgIGF0dHJzOiBkYXRhSWNvbignRycpLFxuICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiBzdHVkeS5zZXRDaGFwdGVyKG5leHRDaGFwdGVyLmlkKSlcbiAgICB9LCAnTmV4dCBjaGFwdGVyJykgOiB1bmRlZmluZWQsXG4gICAgaCgnYS5yZXRyeScsIHtcbiAgICAgIGF0dHJzOiBkYXRhSWNvbignUCcpLFxuICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiBjdHJsLnJvb3QudXNlckp1bXAoJycpLCBjdHJsLnJlZHJhdylcbiAgICB9LCAnUGxheSBhZ2FpbicpLFxuICAgIGgoJ2EuYW5hbHlzZScsIHtcbiAgICAgIGF0dHJzOiBkYXRhSWNvbignQScpLFxuICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiBzdHVkeS5zZXRHYW1lYm9va092ZXJyaWRlKCdhbmFseXNlJyksIGN0cmwucmVkcmF3KVxuICAgIH0sICdBbmFseXNlJylcbiAgXSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgYmluZCwgdGl0bGVOYW1lVG9JZCwgb25JbnNlcnQgfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IHByb3AsIFByb3AgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgbW9kYWwgfSBmcm9tICcuLi9tb2RhbCc7XG5pbXBvcnQgeyBTdHVkeU1lbWJlck1hcCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjdHJsKHNlbmQ6IFNvY2tldFNlbmQsIG1lbWJlcnM6IFByb3A8U3R1ZHlNZW1iZXJNYXA+LCBzZXRUYWI6ICgpID0+IHZvaWQsIHJlZHJhdzogKCkgPT4gdm9pZCwgdHJhbnM6IFRyYW5zKSB7XG4gIGNvbnN0IG9wZW4gPSBwcm9wKGZhbHNlKTtcbiAgbGV0IGZvbGxvd2luZ3MgPSBbXTtcbiAgbGV0IHNwZWN0YXRvcnMgPSBbXTtcbiAgZnVuY3Rpb24gdXBkYXRlRm9sbG93aW5ncyhmKSB7XG4gICAgZm9sbG93aW5ncyA9IGYoZm9sbG93aW5ncyk7XG4gICAgaWYgKG9wZW4oKSkgcmVkcmF3KCk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgb3BlbixcbiAgICBjYW5kaWRhdGVzKCkge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBtZW1iZXJzKCk7XG4gICAgICByZXR1cm4gZm9sbG93aW5ncy5jb25jYXQoc3BlY3RhdG9ycykuZmlsdGVyKGZ1bmN0aW9uKGVsZW0sIGlkeCwgYXJyKSB7XG4gICAgICAgIHJldHVybiBhcnIuaW5kZXhPZihlbGVtKSA+PSBpZHggJiYgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAhZXhpc3RpbmcuaGFzT3duUHJvcGVydHkodGl0bGVOYW1lVG9JZChlbGVtKSk7IC8vIHJlbW92ZSBleGlzdGluZyBtZW1iZXJzXG4gICAgICB9KS5zb3J0KCk7XG4gICAgfSxcbiAgICBtZW1iZXJzLFxuICAgIHNldFNwZWN0YXRvcnModXNlcm5hbWVzKSB7XG4gICAgICBzcGVjdGF0b3JzID0gdXNlcm5hbWVzO1xuICAgIH0sXG4gICAgc2V0Rm9sbG93aW5ncyh1c2VybmFtZXMpIHtcbiAgICAgIHVwZGF0ZUZvbGxvd2luZ3MoXyA9PiB1c2VybmFtZXMpXG4gICAgfSxcbiAgICBkZWxGb2xsb3dpbmcodXNlcm5hbWUpIHtcbiAgICAgIHVwZGF0ZUZvbGxvd2luZ3MoZnVuY3Rpb24ocHJldnMpIHtcbiAgICAgICAgcmV0dXJuIHByZXZzLmZpbHRlcihmdW5jdGlvbih1KSB7XG4gICAgICAgICAgcmV0dXJuIHVzZXJuYW1lICE9PSB1O1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYWRkRm9sbG93aW5nKHVzZXJuYW1lKSB7XG4gICAgICB1cGRhdGVGb2xsb3dpbmdzKGZ1bmN0aW9uKHByZXZzKSB7XG4gICAgICAgIHJldHVybiBwcmV2cy5jb25jYXQoW3VzZXJuYW1lXSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZSgpIHtcbiAgICAgIG9wZW4oIW9wZW4oKSk7XG4gICAgICBpZiAob3BlbigpKSBzZW5kKCdmb2xsb3dpbmdfb25saW5lcycpO1xuICAgIH0sXG4gICAgaW52aXRlKHRpdGxlTmFtZSkge1xuICAgICAgc2VuZChcImludml0ZVwiLCB0aXRsZU5hbWVUb0lkKHRpdGxlTmFtZSkpO1xuICAgICAgc2V0VGFiKCk7XG4gICAgfSxcbiAgICByZWRyYXcsXG4gICAgdHJhbnNcbiAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3KGN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IGNhbmRpZGF0ZXMgPSBjdHJsLmNhbmRpZGF0ZXMoKTtcbiAgcmV0dXJuIG1vZGFsKHtcbiAgICBjbGFzczogJ3N0dWR5X19pbnZpdGUnLFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICBjdHJsLm9wZW4oZmFsc2UpO1xuICAgICAgY3RybC5yZWRyYXcoKTtcbiAgICB9LFxuICAgIGNvbnRlbnQ6IFtcbiAgICAgIGgoJ2gyJywgY3RybC50cmFucy5ub2FyZygnaW52aXRlVG9UaGVTdHVkeScpKSxcbiAgICAgIGgoJ3AuaW5mbycsIHsgYXR0cnM6IHsgJ2RhdGEtaWNvbic6ICfugIUnIH0gfSwgY3RybC50cmFucy5ub2FyZygncGxlYXNlT25seUludml0ZVBlb3BsZVlvdUtub3cnKSksXG4gICAgICBoKCdkaXYuaW5wdXQtd3JhcHBlcicsIFsgLy8gYmVjYXVzZSB0eXBlYWhlYWQgbWVzc2VzIHVwIHdpdGggc25hYmJkb21cbiAgICAgICAgaCgnaW5wdXQnLCB7XG4gICAgICAgICAgYXR0cnM6IHsgcGxhY2Vob2xkZXI6IGN0cmwudHJhbnMubm9hcmcoJ3NlYXJjaEJ5VXNlcm5hbWUnKSB9LFxuICAgICAgICAgIGhvb2s6IG9uSW5zZXJ0PEhUTUxJbnB1dEVsZW1lbnQ+KGVsID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5saWNoZXNzLnVzZXJBdXRvY29tcGxldGUoJChlbCksIHtcbiAgICAgICAgICAgICAgdGFnOiAnc3BhbicsXG4gICAgICAgICAgICAgIG9uU2VsZWN0KHYpIHtcbiAgICAgICAgICAgICAgICBjdHJsLmludml0ZSh2Lm5hbWUpO1xuICAgICAgICAgICAgICAgICQoZWwpLnR5cGVhaGVhZCgnY2xvc2UnKTtcbiAgICAgICAgICAgICAgICBlbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIGN0cmwucmVkcmF3KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICBdKSxcbiAgICAgIGNhbmRpZGF0ZXMubGVuZ3RoID8gaCgnZGl2LnVzZXJzJywgY2FuZGlkYXRlcy5tYXAoZnVuY3Rpb24odXNlcm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGgoJ3NwYW4uYnV0dG9uLmJ1dHRvbi1tZXRhbCcsIHtcbiAgICAgICAgICBrZXk6IHVzZXJuYW1lLFxuICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBjdHJsLmludml0ZSh1c2VybmFtZSkpXG4gICAgICAgIH0sIHVzZXJuYW1lKTtcbiAgICAgIH0pKSA6IHVuZGVmaW5lZFxuICAgIF1cbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgQ2hlc3Nncm91bmQgfSBmcm9tICdjaGVzc2dyb3VuZCc7XG5pbXBvcnQgeyBvcHBvc2l0ZSB9IGZyb20gJ2NoZXNzZ3JvdW5kL3V0aWwnO1xuaW1wb3J0IHsgU3R1ZHlDdHJsLCBDaGFwdGVyUHJldmlldywgQ2hhcHRlclByZXZpZXdQbGF5ZXIgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgTWF5YmVWTm9kZXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IG11bHRpQm9hcmQgYXMgeGhyTG9hZCB9IGZyb20gJy4vc3R1ZHlYaHInO1xuaW1wb3J0IHsgYmluZCwgc3Bpbm5lciB9IGZyb20gJy4uL3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlCb2FyZEN0cmwge1xuXG4gIGxvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcGFnZTogbnVtYmVyID0gMTtcbiAgcGFnZXI/OiBQYWdpbmF0b3I8Q2hhcHRlclByZXZpZXc+O1xuICBwbGF5aW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgc3R1ZHlJZDogc3RyaW5nLCByZWFkb25seSByZWRyYXc6ICgpID0+IHZvaWQsIHJlYWRvbmx5IHRyYW5zOiBUcmFucykge31cblxuICBhZGROb2RlKHBvcywgbm9kZSkge1xuICAgIGNvbnN0IGNwID0gdGhpcy5wYWdlciAmJiB0aGlzLnBhZ2VyLmN1cnJlbnRQYWdlUmVzdWx0cy5maW5kKGNwID0+IGNwLmlkID09IHBvcy5jaGFwdGVySWQpO1xuICAgIGlmIChjcCAmJiBjcC5wbGF5aW5nKSB7XG4gICAgICBjcC5mZW4gPSBub2RlLmZlbjtcbiAgICAgIGNwLmxhc3RNb3ZlID0gbm9kZS51Y2k7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgfVxuXG4gIHJlbG9hZChvbkluc2VydD86IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5wYWdlciAmJiAhb25JbnNlcnQpIHtcbiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgICB4aHJMb2FkKHRoaXMuc3R1ZHlJZCwgdGhpcy5wYWdlLCB0aGlzLnBsYXlpbmcpLnRoZW4ocCA9PiB7XG4gICAgICB0aGlzLnBhZ2VyID0gcDtcbiAgICAgIGlmIChwLm5iUGFnZXMgPCB0aGlzLnBhZ2UpIHtcbiAgICAgICAgaWYgKCFwLm5iUGFnZXMpIHRoaXMucGFnZSA9IDE7XG4gICAgICAgIGVsc2UgdGhpcy5zZXRQYWdlKHAubmJQYWdlcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRQYWdlID0gKHBhZ2U6IG51bWJlcikgPT4ge1xuICAgIGlmICh0aGlzLnBhZ2UgIT0gcGFnZSkge1xuICAgICAgdGhpcy5wYWdlID0gcGFnZTtcbiAgICAgIHRoaXMucmVsb2FkKCk7XG4gICAgfVxuICB9O1xuICBuZXh0UGFnZSA9ICgpID0+IHRoaXMuc2V0UGFnZSh0aGlzLnBhZ2UgKyAxKTtcbiAgcHJldlBhZ2UgPSAoKSA9PiB0aGlzLnNldFBhZ2UodGhpcy5wYWdlIC0gMSk7XG4gIGxhc3RQYWdlID0gKCkgPT4geyBpZiAodGhpcy5wYWdlcikgdGhpcy5zZXRQYWdlKHRoaXMucGFnZXIubmJQYWdlcyk7IH07XG5cbiAgc2V0UGxheWluZyA9ICh2OiBib29sZWFuKSA9PiB7XG4gICAgdGhpcy5wbGF5aW5nID0gdjtcbiAgICB0aGlzLnJlbG9hZCgpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBNdWx0aUJvYXJkQ3RybCwgc3R1ZHk6IFN0dWR5Q3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcblxuICByZXR1cm4gaCgnZGl2LnN0dWR5X19tdWx0aWJvYXJkJywge1xuICAgIGNsYXNzOiB7IGxvYWRpbmc6IGN0cmwubG9hZGluZywgbm9wYWdlcjogIWN0cmwucGFnZXIgfSxcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQoKSB7IGN0cmwucmVsb2FkKHRydWUpIH1cbiAgICB9XG4gIH0sIGN0cmwucGFnZXIgPyByZW5kZXJQYWdlcihjdHJsLnBhZ2VyLCBzdHVkeSkgOiBbc3Bpbm5lcigpXSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclBhZ2VyKHBhZ2VyOiBQYWdpbmF0b3I8Q2hhcHRlclByZXZpZXc+LCBzdHVkeTogU3R1ZHlDdHJsKTogTWF5YmVWTm9kZXMge1xuICBjb25zdCBjdHJsID0gc3R1ZHkubXVsdGlCb2FyZDtcbiAgcmV0dXJuIFtcbiAgICBoKCdkaXYudG9wJywgW1xuICAgICAgcmVuZGVyUGFnZXJOYXYocGFnZXIsIGN0cmwpLFxuICAgICAgcmVuZGVyUGxheWluZ1RvZ2dsZShjdHJsKVxuICAgIF0pLFxuICAgIGgoJ2Rpdi5ub3ctcGxheWluZycsIHBhZ2VyLmN1cnJlbnRQYWdlUmVzdWx0cy5tYXAobWFrZVByZXZpZXcoc3R1ZHkpKSlcbiAgXTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyUGxheWluZ1RvZ2dsZShjdHJsOiBNdWx0aUJvYXJkQ3RybCk6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2xhYmVsLnBsYXlpbmcnLCBbXG4gICAgaCgnaW5wdXQnLCB7XG4gICAgICBhdHRyczogeyB0eXBlOiAnY2hlY2tib3gnIH0sXG4gICAgICBob29rOiBiaW5kKCdjaGFuZ2UnLCBlID0+IHtcbiAgICAgICAgY3RybC5zZXRQbGF5aW5nKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKTtcbiAgICAgIH0pXG4gICAgfSksXG4gICAgY3RybC50cmFucy5ub2FyZygncGxheWluZycpXG4gIF0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJQYWdlck5hdihwYWdlcjogUGFnaW5hdG9yPENoYXB0ZXJQcmV2aWV3PiwgY3RybDogTXVsdGlCb2FyZEN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IHBhZ2UgPSBjdHJsLnBhZ2UsXG4gIGZyb20gPSBNYXRoLm1pbihwYWdlci5uYlJlc3VsdHMsIChwYWdlIC0gMSkgKiBwYWdlci5tYXhQZXJQYWdlICsgMSksXG4gIHRvID0gTWF0aC5taW4ocGFnZXIubmJSZXN1bHRzLCBwYWdlICogcGFnZXIubWF4UGVyUGFnZSk7XG4gIHJldHVybiBoKCdkaXYucGFnZXInLCBbXG4gICAgcGFnZXJCdXR0b24oY3RybC50cmFucy5ub2FyZygnZmlyc3QnKSwgJ1cnLCAoKSA9PiBjdHJsLnNldFBhZ2UoMSksIHBhZ2UgPiAxLCBjdHJsKSxcbiAgICBwYWdlckJ1dHRvbihjdHJsLnRyYW5zLm5vYXJnKCdwcmV2aW91cycpLCAnWScsIGN0cmwucHJldlBhZ2UsIHBhZ2UgPiAxLCBjdHJsKSxcbiAgICBoKCdzcGFuLnBhZ2UnLCBgJHtmcm9tfS0ke3RvfSAvICR7cGFnZXIubmJSZXN1bHRzfWApLFxuICAgIHBhZ2VyQnV0dG9uKGN0cmwudHJhbnMubm9hcmcoJ25leHQnKSwgJ1gnLCBjdHJsLm5leHRQYWdlLCBwYWdlIDwgcGFnZXIubmJQYWdlcywgY3RybCksXG4gICAgcGFnZXJCdXR0b24oY3RybC50cmFucy5ub2FyZygnbGFzdCcpLCAnVicsIGN0cmwubGFzdFBhZ2UsIHBhZ2UgPCBwYWdlci5uYlBhZ2VzLCBjdHJsKVxuICBdKTtcbn1cblxuZnVuY3Rpb24gcGFnZXJCdXR0b24odGV4dDogc3RyaW5nLCBpY29uOiBzdHJpbmcsIGNsaWNrOiAoKSA9PiB2b2lkLCBlbmFibGU6IGJvb2xlYW4sIGN0cmw6IE11bHRpQm9hcmRDdHJsKTogVk5vZGUge1xuICByZXR1cm4gaCgnYnV0dG9uLmZidCcsIHtcbiAgICBhdHRyczoge1xuICAgICAgJ2RhdGEtaWNvbic6IGljb24sXG4gICAgICBkaXNhYmxlZDogIWVuYWJsZSxcbiAgICAgIHRpdGxlOiB0ZXh0XG4gICAgfSxcbiAgICBob29rOiBiaW5kKCdtb3VzZWRvd24nLCBjbGljaywgY3RybC5yZWRyYXcpXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJldmlldyhzdHVkeTogU3R1ZHlDdHJsKSB7XG4gIHJldHVybiAocHJldmlldzogQ2hhcHRlclByZXZpZXcpID0+IHtcbiAgICBjb25zdCBjb250ZW50cyA9IHByZXZpZXcucGxheWVycyA/IFtcbiAgICAgIG1ha2VQbGF5ZXIocHJldmlldy5wbGF5ZXJzW29wcG9zaXRlKHByZXZpZXcub3JpZW50YXRpb24pXSksXG4gICAgICBtYWtlQ2cocHJldmlldyksXG4gICAgICBtYWtlUGxheWVyKHByZXZpZXcucGxheWVyc1twcmV2aWV3Lm9yaWVudGF0aW9uXSlcbiAgICBdIDogW1xuICAgICAgaCgnZGl2Lm5hbWUnLCBwcmV2aWV3Lm5hbWUpLFxuICAgICAgbWFrZUNnKHByZXZpZXcpXG4gICAgXTtcbiAgICByZXR1cm4gaCgnYS4nICsgcHJldmlldy5pZCwge1xuICAgICAgYXR0cnM6IHsgdGl0bGU6IHByZXZpZXcubmFtZSB9LFxuICAgICAgY2xhc3M6IHsgYWN0aXZlOiAhc3R1ZHkubXVsdGlCb2FyZC5sb2FkaW5nICYmIHN0dWR5LnZtLmNoYXB0ZXJJZCA9PSBwcmV2aWV3LmlkICYmICghc3R1ZHkucmVsYXkgfHwgIXN0dWR5LnJlbGF5LmludHJvLmFjdGl2ZSkgfSxcbiAgICAgIGhvb2s6IGJpbmQoJ21vdXNlZG93bicsIF8gPT4gc3R1ZHkuc2V0Q2hhcHRlcihwcmV2aWV3LmlkKSlcbiAgICB9LCBjb250ZW50cyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1ha2VQbGF5ZXIocGxheWVyOiBDaGFwdGVyUHJldmlld1BsYXllcik6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2Rpdi5wbGF5ZXInLCBbXG4gICAgcGxheWVyLnRpdGxlID8gYCR7cGxheWVyLnRpdGxlfSAke3BsYXllci5uYW1lfWAgOiBwbGF5ZXIubmFtZSxcbiAgICBwbGF5ZXIucmF0aW5nICYmIGgoJ3NwYW4nLCAnJyArIHBsYXllci5yYXRpbmcpXG4gIF0pO1xufVxuXG5mdW5jdGlvbiB1Y2lUb0xhc3RNb3ZlKGxtPzogc3RyaW5nKTogS2V5W10gfCB1bmRlZmluZWQge1xuICByZXR1cm4gbG0gPyAoW2xtWzBdICsgbG1bMV0sIGxtWzJdICsgbG1bM11dIGFzIEtleVtdKSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gbWFrZUNnKHByZXZpZXc6IENoYXB0ZXJQcmV2aWV3KTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2Lm1pbmktYm9hcmQuY2ctd3JhcC5pczJkJywge1xuICAgIGhvb2s6IHtcbiAgICAgIGluc2VydCh2bm9kZSkge1xuICAgICAgICBjb25zdCBjZyA9IENoZXNzZ3JvdW5kKHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCwge1xuICAgICAgICAgIGNvb3JkaW5hdGVzOiBmYWxzZSxcbiAgICAgICAgICBkcmF3YWJsZTogeyBlbmFibGVkOiBmYWxzZSwgdmlzaWJsZTogZmFsc2UgfSxcbiAgICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICAgIHZpZXdPbmx5OiB0cnVlLFxuICAgICAgICAgIG9yaWVudGF0aW9uOiBwcmV2aWV3Lm9yaWVudGF0aW9uLFxuICAgICAgICAgIGZlbjogcHJldmlldy5mZW4sXG4gICAgICAgICAgbGFzdE1vdmU6IHVjaVRvTGFzdE1vdmUocHJldmlldy5sYXN0TW92ZSlcbiAgICAgICAgfSk7XG4gICAgICAgIHZub2RlLmRhdGEhLmNwID0geyBjZywgZmVuOiBwcmV2aWV3LmZlbiB9O1xuICAgICAgfSxcbiAgICAgIHBvc3RwYXRjaChvbGQsIHZub2RlKSB7XG4gICAgICAgIGlmIChvbGQuZGF0YSEuY3AuZmVuICE9PSBwcmV2aWV3LmZlbikge1xuICAgICAgICAgIG9sZC5kYXRhIS5jcC5jZy5zZXQoe1xuICAgICAgICAgICAgZmVuOiBwcmV2aWV3LmZlbixcbiAgICAgICAgICAgIGxhc3RNb3ZlOiB1Y2lUb0xhc3RNb3ZlKHByZXZpZXcubGFzdE1vdmUpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb2xkLmRhdGEhLmNwLmZlbiA9IHByZXZpZXcuZmVuO1xuICAgICAgICB9XG4gICAgICAgIHZub2RlLmRhdGEhLmNwID0gb2xkLmRhdGEhLmNwO1xuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5cbmludGVyZmFjZSBOb3RpZiB7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHRleHQ6IHN0cmluZztcbiAgY2xhc3M/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZDdHJsIHtcbiAgc2V0KG46IE5vdGlmKTogdm9pZDtcbiAgZ2V0KCk6IE5vdGlmIHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdHJsKHJlZHJhdzogKCkgPT4gdm9pZCkge1xuICBsZXQgY3VycmVudDogTm90aWYgfCB1bmRlZmluZWQ7XG4gIGxldCB0aW1lb3V0OiBudW1iZXI7XG4gIHJldHVybiB7XG4gICAgc2V0KG46IE5vdGlmKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBjdXJyZW50ID0gbjtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICByZWRyYXcoKTtcbiAgICAgIH0sIG4uZHVyYXRpb24pO1xuICAgIH0sXG4gICAgZ2V0OiAoKSA9PiBjdXJyZW50XG4gIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBOb3RpZkN0cmwpOiBWTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGMgPSBjdHJsLmdldCgpO1xuICByZXR1cm4gYyA/IGgoJ2Rpdi5ub3RpZi4nICsgYy5jbGFzcywgYy50ZXh0KSA6IHVuZGVmaW5lZDtcbn07XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nO1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IG9wcyBhcyB0cmVlT3BzIH0gZnJvbSAndHJlZSc7XG5pbXBvcnQgeyBUYWdBcnJheSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgcmVuZGVyQ2xvY2tzIGZyb20gJy4uL2Nsb2Nrcyc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5pbXBvcnQgeyBpc0ZpbmlzaGVkLCBmaW5kVGFnLCByZXN1bHRPZiB9IGZyb20gJy4vc3R1ZHlDaGFwdGVycyc7XG5cbmludGVyZmFjZSBQbGF5ZXJOYW1lcyB7XG4gIHdoaXRlOiBzdHJpbmc7XG4gIGJsYWNrOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGVbXSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHN0dWR5ID0gY3RybC5zdHVkeTtcbiAgaWYgKCFzdHVkeSB8fCBjdHJsLmVtYmVkKSByZXR1cm47XG4gIGNvbnN0IHRhZ3MgPSBzdHVkeS5kYXRhLmNoYXB0ZXIudGFncyxcbiAgIHBsYXllck5hbWVzID0ge1xuICAgIHdoaXRlOiBmaW5kVGFnKHRhZ3MsICd3aGl0ZScpISxcbiAgICBibGFjazogZmluZFRhZyh0YWdzLCAnYmxhY2snKSFcbiAgfTtcbiAgaWYgKCFwbGF5ZXJOYW1lcy53aGl0ZSAmJiAhcGxheWVyTmFtZXMuYmxhY2sgJiYgIXRyZWVPcHMuZmluZEluTWFpbmxpbmUoY3RybC50cmVlLnJvb3QsIG4gPT4gISFuLmNsb2NrKSkgcmV0dXJuO1xuICBjb25zdCBjbG9ja3MgPSByZW5kZXJDbG9ja3MoY3RybCksXG4gIHRpY2tpbmcgPSAhaXNGaW5pc2hlZChzdHVkeS5kYXRhLmNoYXB0ZXIpICYmIGN0cmwudHVybkNvbG9yKCk7XG4gIHJldHVybiAoWyd3aGl0ZScsICdibGFjayddIGFzIENvbG9yW10pLm1hcChjb2xvciA9PlxuICAgIHJlbmRlclBsYXllcih0YWdzLCBjbG9ja3MsIHBsYXllck5hbWVzLCBjb2xvciwgdGlja2luZyA9PT0gY29sb3IsIGN0cmwuYm90dG9tQ29sb3IoKSAhPT0gY29sb3IpKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyUGxheWVyKHRhZ3M6IFRhZ0FycmF5W10sIGNsb2NrczogW1ZOb2RlLCBWTm9kZV0gfCB1bmRlZmluZWQsIHBsYXllck5hbWVzOiBQbGF5ZXJOYW1lcywgY29sb3I6IENvbG9yLCB0aWNraW5nOiBib29sZWFuLCB0b3A6IGJvb2xlYW4pOiBWTm9kZSB7XG4gIGNvbnN0IHRpdGxlID0gZmluZFRhZyh0YWdzLCBgJHtjb2xvcn10aXRsZWApLFxuICBlbG8gPSBmaW5kVGFnKHRhZ3MsIGAke2NvbG9yfWVsb2ApLFxuICByZXN1bHQgPSByZXN1bHRPZih0YWdzLCBjb2xvciA9PT0gJ3doaXRlJyk7XG4gIHJldHVybiBoKGBkaXYuc3R1ZHlfX3BsYXllci5zdHVkeV9fcGxheWVyLSR7dG9wID8gJ3RvcCcgOiAnYm90J31gLCB7XG4gICAgY2xhc3M6IHsgdGlja2luZyB9XG4gIH0sIFtcbiAgICBoKCdkaXYubGVmdCcsIFtcbiAgICAgIHJlc3VsdCAmJiBoKCdzcGFuLnJlc3VsdCcsIHJlc3VsdCksXG4gICAgICBoKCdzcGFuLmluZm8nLCBbXG4gICAgICAgIHRpdGxlICYmIGgoJ3NwYW4udGl0bGUnLCB0aXRsZSArICcgJyksXG4gICAgICAgIGgoJ3NwYW4ubmFtZScsIHBsYXllck5hbWVzW2NvbG9yXSksXG4gICAgICAgIGVsbyAmJiBoKCdzcGFuLmVsbycsIGVsbylcbiAgICAgIF0pXG4gICAgXSksXG4gICAgY2xvY2tzICYmIGNsb2Nrc1tjb2xvciA9PT0gJ3doaXRlJyA/IDAgOiAxXVxuICBdKTtcbn1cbiIsImxldCBiYXNlVXJsOiBzdHJpbmc7XG5cbmZ1bmN0aW9uIG1ha2UoZmlsZSkge1xuICBiYXNlVXJsID0gYmFzZVVybCB8fCAkKCdib2R5JykuZGF0YSgnYXNzZXQtdXJsJykgKyAnL2Fzc2V0cy9zb3VuZC8nO1xuICBjb25zdCBzb3VuZCA9IG5ldyB3aW5kb3cuSG93bCh7XG4gICAgc3JjOiBbXG4gICAgICBiYXNlVXJsICsgZmlsZSArICcub2dnJyxcbiAgICAgIGJhc2VVcmwgKyBmaWxlICsgJy5tcDMnXG4gICAgXVxuICB9KTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cubGljaGVzcy5zb3VuZC5zZXQoKSAhPT0gJ3NpbGVudCcpIHNvdW5kLnBsYXkoKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHN1Y2Nlc3M6IG1ha2UoJ290aGVyL2VuZXJneTMnKSxcbiAgICBmYWlsdXJlOiBtYWtlKCdvdGhlci9mYWlsdXJlMicpXG4gIH07XG59XG4iLCJpbXBvcnQgKiBhcyB4aHIgZnJvbSAnLi4vc3R1ZHlYaHInO1xuaW1wb3J0IHsgcHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyBzdG9yZWRQcm9wIH0gZnJvbSAnY29tbW9uL3N0b3JhZ2UnO1xuaW1wb3J0IG1ha2VTdWNjZXNzIGZyb20gJy4vc3R1ZHlQcmFjdGljZVN1Y2Nlc3MnO1xuaW1wb3J0IG1ha2VTb3VuZCBmcm9tICcuL3NvdW5kJztcbmltcG9ydCB7IHJlYWRPbmx5UHJvcCB9IGZyb20gJy4uLy4uL3V0aWwnO1xuaW1wb3J0IHsgU3R1ZHlQcmFjdGljZURhdGEsIEdvYWwsIFN0dWR5UHJhY3RpY2VDdHJsIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IFN0dWR5RGF0YSwgU3R1ZHlDdHJsIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vLi4vY3RybCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHJvb3Q6IEFuYWx5c2VDdHJsLCBzdHVkeURhdGE6IFN0dWR5RGF0YSwgZGF0YTogU3R1ZHlQcmFjdGljZURhdGEpOiBTdHVkeVByYWN0aWNlQ3RybCB7XG5cbiAgY29uc3QgZ29hbCA9IHByb3A8R29hbD4ocm9vdC5kYXRhLnByYWN0aWNlR29hbCEpLFxuICBuYk1vdmVzID0gcHJvcCgwKSxcbiAgLy8gbnVsbCA9IG9uZ29pbmcsIHRydWUgPSB3aW4sIGZhbHNlID0gZmFpbFxuICBzdWNjZXNzID0gcHJvcDxib29sZWFuIHwgbnVsbD4obnVsbCksXG4gIHNvdW5kID0gbWFrZVNvdW5kKCksXG4gIGFuYWx5c2lzVXJsID0gcHJvcCgnJyksXG4gIGF1dG9OZXh0ID0gc3RvcmVkUHJvcCgncHJhY3RpY2UtYXV0by1uZXh0JywgdHJ1ZSk7XG5cbiAgZnVuY3Rpb24gb25Mb2FkKCkge1xuICAgIHJvb3Quc2hvd0F1dG9TaGFwZXMgPSByZWFkT25seVByb3AodHJ1ZSk7XG4gICAgcm9vdC5zaG93R2F1Z2UgPSByZWFkT25seVByb3AodHJ1ZSk7XG4gICAgcm9vdC5zaG93Q29tcHV0ZXIgPSByZWFkT25seVByb3AodHJ1ZSk7XG4gICAgZ29hbChyb290LmRhdGEucHJhY3RpY2VHb2FsISk7XG4gICAgbmJNb3ZlcygwKTtcbiAgICBzdWNjZXNzKG51bGwpO1xuICAgIGNvbnN0IGNoYXB0ZXIgPSBzdHVkeURhdGEuY2hhcHRlcjtcbiAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBjaGFwdGVyLm5hbWUsIGRhdGEudXJsICsgJy8nICsgY2hhcHRlci5pZCk7XG4gICAgYW5hbHlzaXNVcmwoJy9hbmFseXNpcy9zdGFuZGFyZC8nICsgcm9vdC5ub2RlLmZlbi5yZXBsYWNlKC8gL2csICdfJykgKyAnP2NvbG9yPScgKyByb290LmJvdHRvbUNvbG9yKCkpO1xuICB9XG4gIG9uTG9hZCgpO1xuXG4gIGZ1bmN0aW9uIGNvbXB1dGVOYk1vdmVzKCk6IG51bWJlciB7XG4gICAgbGV0IHBsaWVzID0gcm9vdC5ub2RlLnBseSAtIHJvb3QudHJlZS5yb290LnBseTtcbiAgICBpZiAocm9vdC5ib3R0b21Db2xvcigpICE9PSByb290LmRhdGEucGxheWVyLmNvbG9yKSBwbGllcy0tO1xuICAgIHJldHVybiBNYXRoLmNlaWwocGxpZXMgLyAyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFN0dWR5KCk6IFN0dWR5Q3RybCB7XG4gICAgcmV0dXJuIHJvb3Quc3R1ZHkhO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tTdWNjZXNzKCk6IHZvaWQge1xuICAgIGNvbnN0IGdhbWVib29rID0gZ2V0U3R1ZHkoKS5nYW1lYm9va1BsYXkoKTtcbiAgICBpZiAoZ2FtZWJvb2spIHtcbiAgICAgIGlmIChnYW1lYm9vay5zdGF0ZS5mZWVkYmFjayA9PT0gJ2VuZCcpIG9uVmljdG9yeSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWdldFN0dWR5KCkuZGF0YS5jaGFwdGVyLnByYWN0aWNlKSB7XG4gICAgICByZXR1cm4gc2F2ZU5iTW92ZXMoKTtcbiAgICB9XG4gICAgaWYgKHN1Y2Nlc3MoKSAhPT0gbnVsbCkgcmV0dXJuO1xuICAgIG5iTW92ZXMoY29tcHV0ZU5iTW92ZXMoKSk7XG4gICAgY29uc3QgcmVzID0gc3VjY2VzcyhtYWtlU3VjY2Vzcyhyb290LCBnb2FsKCksIG5iTW92ZXMoKSkpO1xuICAgIGlmIChyZXMpIG9uVmljdG9yeSgpO1xuICAgIGVsc2UgaWYgKHJlcyA9PT0gZmFsc2UpIG9uRmFpbHVyZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25WaWN0b3J5KCk6IHZvaWQge1xuICAgIHNhdmVOYk1vdmVzKCk7XG4gICAgc291bmQuc3VjY2VzcygpO1xuICAgIGlmIChhdXRvTmV4dCgpKSBzZXRUaW1lb3V0KGdvVG9OZXh0LCAxMDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNhdmVOYk1vdmVzKCk6IHZvaWQge1xuICAgIGNvbnN0IGNoYXB0ZXJJZCA9IGdldFN0dWR5KCkuY3VycmVudENoYXB0ZXIoKS5pZCxcbiAgICBmb3JtZXIgPSBkYXRhLmNvbXBsZXRpb25bY2hhcHRlcklkXTtcbiAgICBpZiAodHlwZW9mIGZvcm1lciA9PT0gJ3VuZGVmaW5lZCcgfHwgbmJNb3ZlcygpIDwgZm9ybWVyKSB7XG4gICAgICBkYXRhLmNvbXBsZXRpb25bY2hhcHRlcklkXSA9IG5iTW92ZXMoKTtcbiAgICAgIHhoci5wcmFjdGljZUNvbXBsZXRlKGNoYXB0ZXJJZCwgbmJNb3ZlcygpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnb1RvTmV4dCgpIHtcbiAgICBjb25zdCBuZXh0ID0gZ2V0U3R1ZHkoKS5uZXh0Q2hhcHRlcigpO1xuICAgIGlmIChuZXh0KSBnZXRTdHVkeSgpLnNldENoYXB0ZXIobmV4dC5pZCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZhaWx1cmUoKTogdm9pZCB7XG4gICAgcm9vdC5ub2RlLmZhaWwgPSB0cnVlO1xuICAgIHNvdW5kLmZhaWx1cmUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb25Mb2FkLFxuICAgIG9uSnVtcCgpIHtcbiAgICAgIC8vIHJlc2V0IGZhaWx1cmUgc3RhdGUgaWYgbm8gZmFpbGVkIG1vdmUgZm91bmQgaW4gbWFpbmxpbmUgaGlzdG9yeVxuICAgICAgaWYgKHN1Y2Nlc3MoKSA9PT0gZmFsc2UgJiYgIXJvb3Qubm9kZUxpc3QuZmluZChuID0+ICEhbi5mYWlsKSkgc3VjY2VzcyhudWxsKTtcbiAgICAgIGNoZWNrU3VjY2VzcygpO1xuICAgIH0sXG4gICAgb25DZXZhbDogY2hlY2tTdWNjZXNzLFxuICAgIGRhdGEsXG4gICAgZ29hbCxcbiAgICBzdWNjZXNzLFxuICAgIG5iTW92ZXMsXG4gICAgcmVzZXQoKSB7XG4gICAgICByb290LnRyZWUucm9vdC5jaGlsZHJlbiA9IFtdO1xuICAgICAgcm9vdC51c2VySnVtcCgnJyk7XG4gICAgICByb290LnByYWN0aWNlIS5yZXNldCgpO1xuICAgICAgb25Mb2FkKCk7XG4gICAgICByb290LnByYWN0aWNlIS5yZXN1bWUoKTtcbiAgICB9LFxuICAgIGlzV2hpdGU6IHJvb3QuYm90dG9tSXNXaGl0ZSxcbiAgICBhbmFseXNpc1VybCxcbiAgICBhdXRvTmV4dCxcbiAgICBnb1RvTmV4dFxuICB9O1xufVxuIiwiaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uLy4uL2N0cmwnO1xuaW1wb3J0IHsgR29hbCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBDb21tZW50IH0gZnJvbSAnLi4vLi4vcHJhY3RpY2UvcHJhY3RpY2VDdHJsJztcblxuLy8gcmV0dXJucyBudWxsIGlmIG5vdCBkZWVwIGVub3VnaCB0byBrbm93XG5mdW5jdGlvbiBpc0RyYXdpc2gobm9kZTogVHJlZS5Ob2RlKTogYm9vbGVhbiB8IG51bGwge1xuICBpZiAoIWhhc1NvbGlkRXZhbChub2RlKSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAhbm9kZS5jZXZhbCEubWF0ZSAmJiBNYXRoLmFicyhub2RlLmNldmFsIS5jcCEpIDwgMTUwO1xufVxuLy8gcmV0dXJucyBudWxsIGlmIG5vdCBkZWVwIGVub3VnaCB0byBrbm93XG5mdW5jdGlvbiBpc1dpbm5pbmcobm9kZTogVHJlZS5Ob2RlLCBnb2FsQ3A6IG51bWJlciwgY29sb3I6IENvbG9yKTogYm9vbGVhbiB8IG51bGwge1xuICBpZiAoIWhhc1NvbGlkRXZhbChub2RlKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGNwID0gbm9kZS5jZXZhbCEubWF0ZSEgPiAwID8gOTk5OTkgOiAobm9kZS5jZXZhbCEubWF0ZSEgPCAwID8gLTk5OTk5IDogbm9kZS5jZXZhbCEuY3ApO1xuICByZXR1cm4gY29sb3IgPT09ICd3aGl0ZScgPyBjcCEgPj0gZ29hbENwIDogY3AhIDw9IGdvYWxDcDtcbn1cbi8vIHJldHVybnMgbnVsbCBpZiBub3QgZGVlcCBlbm91Z2ggdG8ga25vd1xuZnVuY3Rpb24gbXlNYXRlSW4obm9kZTogVHJlZS5Ob2RlLCBjb2xvcjogQ29sb3IpOiBudW1iZXIgfCBib29sZWFuIHwgbnVsbCB7XG4gIGlmICghaGFzU29saWRFdmFsKG5vZGUpKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFub2RlLmNldmFsIS5tYXRlKSByZXR1cm4gZmFsc2U7XG4gIHZhciBtYXRlSW4gPSBub2RlLmNldmFsIS5tYXRlISAqIChjb2xvciA9PT0gJ3doaXRlJyA/IDEgOiAtMSk7XG4gIHJldHVybiBtYXRlSW4gPiAwID8gbWF0ZUluIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGhhc1NvbGlkRXZhbChub2RlOiBUcmVlLk5vZGUpIHtcbiAgcmV0dXJuIG5vZGUuY2V2YWwgJiYgbm9kZS5jZXZhbC5kZXB0aCA+PSAxNjtcbn1cblxuZnVuY3Rpb24gaXNNYXRlKHJvb3Q6IEFuYWx5c2VDdHJsKSB7XG4gIHJldHVybiByb290LmdhbWVPdmVyKCkgPT09ICdjaGVja21hdGUnO1xufVxuXG5mdW5jdGlvbiBpc015TWF0ZShyb290OiBBbmFseXNlQ3RybCkge1xuICByZXR1cm4gaXNNYXRlKHJvb3QpICYmIHJvb3QudHVybkNvbG9yKCkgIT09IHJvb3QuYm90dG9tQ29sb3IoKTtcbn1cblxuZnVuY3Rpb24gaXNUaGVpck1hdGUocm9vdDogQW5hbHlzZUN0cmwpIHtcbiAgcmV0dXJuIGlzTWF0ZShyb290KSAmJiByb290LnR1cm5Db2xvcigpID09PSByb290LmJvdHRvbUNvbG9yKCk7XG59XG5cbmZ1bmN0aW9uIGhhc0JsdW5kZXJlZChjb21tZW50OiBDb21tZW50IHwgbnVsbCkge1xuICByZXR1cm4gY29tbWVudCAmJiAoY29tbWVudC52ZXJkaWN0ID09PSAnbWlzdGFrZScgfHwgY29tbWVudC52ZXJkaWN0ID09PSAnYmx1bmRlcicpO1xufVxuXG4vLyByZXR1cm5zIG51bGwgPSBvbmdvaW5nLCB0cnVlID0gd2luLCBmYWxzZSA9IGZhaWxcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHJvb3Q6IEFuYWx5c2VDdHJsLCBnb2FsOiBHb2FsLCBuYk1vdmVzOiBudW1iZXIpOiBib29sZWFuIHwgbnVsbCB7XG4gIGNvbnN0IG5vZGUgPSByb290Lm5vZGU7XG4gIGlmICghbm9kZS51Y2kpIHJldHVybiBudWxsO1xuICBpZiAoaXNUaGVpck1hdGUocm9vdCkpIHJldHVybiBmYWxzZTtcbiAgaWYgKGlzTXlNYXRlKHJvb3QpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKGhhc0JsdW5kZXJlZChyb290LnByYWN0aWNlIS5jb21tZW50KCkpKSByZXR1cm4gZmFsc2U7XG4gIHN3aXRjaCAoZ29hbC5yZXN1bHQpIHtcbiAgICBjYXNlICdkcmF3SW4nOlxuICAgIGNhc2UgJ2VxdWFsSW4nOlxuICAgICAgaWYgKG5vZGUudGhyZWVmb2xkKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChpc0RyYXdpc2gobm9kZSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAobmJNb3ZlcyA+IGdvYWwubW92ZXMhKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAocm9vdC5nYW1lT3ZlcigpID09PSAnZHJhdycpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKG5iTW92ZXMgPj0gZ29hbC5tb3ZlcyEpIHJldHVybiBpc0RyYXdpc2gobm9kZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdldmFsSW4nOlxuICAgICAgaWYgKG5iTW92ZXMgPj0gZ29hbC5tb3ZlcyEpIHJldHVybiBpc1dpbm5pbmcobm9kZSwgZ29hbC5jcCEsIHJvb3QuYm90dG9tQ29sb3IoKSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdtYXRlSW4nOlxuICAgICAgaWYgKG5iTW92ZXMgPiBnb2FsLm1vdmVzISkgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgbWF0ZUluID0gbXlNYXRlSW4obm9kZSwgcm9vdC5ib3R0b21Db2xvcigpKTtcbiAgICAgIGlmIChtYXRlSW4gPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgaWYgKCFtYXRlSW4gfHwgKG1hdGVJbiBhcyBudW1iZXIpICsgbmJNb3ZlcyA+IGdvYWwubW92ZXMhKSByZXR1cm4gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdwcm9tb3Rpb24nOlxuICAgICAgaWYgKCFub2RlLnVjaVs0XSkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gaXNXaW5uaW5nKG5vZGUsIGdvYWwuY3AhLCByb290LmJvdHRvbUNvbG9yKCkpO1xuICAgIGNhc2UgJ21hdGUnOlxuICB9XG4gIHJldHVybiBudWxsO1xufTtcbiIsImltcG9ydCB7IGgsIHRodW5rIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgcGx1cmFsLCBiaW5kLCBzcGlubmVyLCByaWNoSFRNTCwgb3B0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbCc7XG5pbXBvcnQgeyBTdHVkeUN0cmwgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IE1heWJlVk5vZGVzIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTdHVkeVByYWN0aWNlRGF0YSwgU3R1ZHlQcmFjdGljZUN0cmwgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgYm9vbFNldHRpbmcgfSBmcm9tICcuLi8uLi9ib29sU2V0dGluZyc7XG5pbXBvcnQgeyB2aWV3IGFzIGRlc2NWaWV3IH0gZnJvbSAnLi4vZGVzY3JpcHRpb24nO1xuXG5mdW5jdGlvbiBzZWxlY3RvcihkYXRhOiBTdHVkeVByYWN0aWNlRGF0YSkge1xuICByZXR1cm4gaCgnc2VsZWN0LnNlbGVjdG9yJywge1xuICAgIGhvb2s6IGJpbmQoJ2NoYW5nZScsIGUgPT4ge1xuICAgICAgbG9jYXRpb24uaHJlZiA9ICcvcHJhY3RpY2UvJyArIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICB9KVxuICB9LCBbXG4gICAgaCgnb3B0aW9uJywge1xuICAgICAgYXR0cnM6IHsgZGlzYWJsZWQ6IHRydWUsIHNlbGVjdGVkOiB0cnVlIH1cbiAgICB9LCAnUHJhY3RpY2UgbGlzdCcpLFxuICAgIC4uLmRhdGEuc3RydWN0dXJlLm1hcChmdW5jdGlvbihzZWN0aW9uKSB7XG4gICAgICByZXR1cm4gaCgnb3B0Z3JvdXAnLCB7XG4gICAgICAgIGF0dHJzOiB7IGxhYmVsOiBzZWN0aW9uLm5hbWUgfVxuICAgICAgfSwgc2VjdGlvbi5zdHVkaWVzLm1hcChmdW5jdGlvbihzdHVkeSkge1xuICAgICAgICByZXR1cm4gb3B0aW9uKFxuICAgICAgICAgIHNlY3Rpb24uaWQgKyAnLycgKyBzdHVkeS5zbHVnICsgJy8nICsgc3R1ZHkuaWQsXG4gICAgICAgICAgJycsXG4gICAgICAgICAgc3R1ZHkubmFtZSk7XG4gICAgICB9KSk7XG4gICAgfSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckdvYWwocHJhY3RpY2U6IFN0dWR5UHJhY3RpY2VDdHJsLCBpbk1vdmVzOiBudW1iZXIpIHtcbiAgY29uc3QgZ29hbCA9IHByYWN0aWNlLmdvYWwoKTtcbiAgc3dpdGNoIChnb2FsLnJlc3VsdCkge1xuICAgIGNhc2UgJ21hdGUnOlxuICAgICAgcmV0dXJuICdDaGVja21hdGUgdGhlIG9wcG9uZW50JztcbiAgICBjYXNlICdtYXRlSW4nOlxuICAgICAgcmV0dXJuICdDaGVja21hdGUgdGhlIG9wcG9uZW50IGluICcgKyBwbHVyYWwoJ21vdmUnLCBpbk1vdmVzKTtcbiAgICBjYXNlICdkcmF3SW4nOlxuICAgICAgcmV0dXJuICdIb2xkIHRoZSBkcmF3IGZvciAnICsgcGx1cmFsKCdtb3JlIG1vdmUnLCBpbk1vdmVzKTtcbiAgICBjYXNlICdlcXVhbEluJzpcbiAgICAgIHJldHVybiAnRXF1YWxpemUgaW4gJyArIHBsdXJhbCgnbW92ZScsIGluTW92ZXMpO1xuICAgIGNhc2UgJ2V2YWxJbic6XG4gICAgICBpZiAocHJhY3RpY2UuaXNXaGl0ZSgpID09PSAoZ29hbC5jcCEgPj0gMCkpXG4gICAgICAgIHJldHVybiAnR2V0IGEgd2lubmluZyBwb3NpdGlvbiBpbiAnICsgcGx1cmFsKCdtb3ZlJywgaW5Nb3Zlcyk7XG4gICAgICByZXR1cm4gJ0RlZmVuZCBmb3IgJyArIHBsdXJhbCgnbW92ZScsIGluTW92ZXMpO1xuICAgIGNhc2UgJ3Byb21vdGlvbic6XG4gICAgICByZXR1cm4gJ1NhZmVseSBwcm9tb3RlIHlvdXIgcGF3bic7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGVyYm9hcmQoY3RybDogU3R1ZHlDdHJsKTogTWF5YmVWTm9kZXMge1xuICBpZiAoY3RybC52bS5sb2FkaW5nKSByZXR1cm4gW2goJ2Rpdi5mZWVkYmFjaycsIHNwaW5uZXIoKSldO1xuICBjb25zdCBwID0gY3RybC5wcmFjdGljZSEsXG4gICAgZ2IgPSBjdHJsLmdhbWVib29rUGxheSgpLFxuICAgIHBpbm5lZCA9IGN0cmwuZGF0YS5jaGFwdGVyLmRlc2NyaXB0aW9uO1xuICBpZiAoZ2IpIHJldHVybiBwaW5uZWQgPyBbaCgnZGl2LmZlZWRiYWNrLm9uZ29pbmcnLCBbXG4gICAgaCgnZGl2LmNvbW1lbnQnLCB7IGhvb2s6IHJpY2hIVE1MKHBpbm5lZCkgfSlcbiAgXSldIDogW107XG4gIGVsc2UgaWYgKCFjdHJsLmRhdGEuY2hhcHRlci5wcmFjdGljZSkgcmV0dXJuIFtkZXNjVmlldyhjdHJsLCB0cnVlKV07XG4gIHN3aXRjaCAocC5zdWNjZXNzKCkpIHtcbiAgICBjYXNlIHRydWU6XG4gICAgICBjb25zdCBuZXh0ID0gY3RybC5uZXh0Q2hhcHRlcigpO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgaCgnYS5mZWVkYmFjay53aW4nLCBuZXh0ID8ge1xuICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgcC5nb1RvTmV4dClcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICBhdHRyczogeyBocmVmOiAnL3ByYWN0aWNlJyB9XG4gICAgICAgIH0sIFtcbiAgICAgICAgICBoKCdzcGFuJywgJ1N1Y2Nlc3MhJyksXG4gICAgICAgICAgY3RybC5uZXh0Q2hhcHRlcigpID8gJ0dvIHRvIG5leHQgZXhlcmNpc2UnIDogJ0JhY2sgdG8gcHJhY3RpY2UgbWVudSdcbiAgICAgICAgXSlcbiAgICAgIF07XG4gICAgY2FzZSBmYWxzZTpcbiAgICAgIHJldHVybiBbXG4gICAgICAgIGgoJ2EuZmVlZGJhY2suZmFpbCcsIHtcbiAgICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIHAucmVzZXQsIGN0cmwucmVkcmF3KVxuICAgICAgICB9LCBbXG4gICAgICAgICAgaCgnc3BhbicsIFtyZW5kZXJHb2FsKHAsIHAuZ29hbCgpLm1vdmVzISldKSxcbiAgICAgICAgICBoKCdzdHJvbmcnLCAnQ2xpY2sgdG8gcmV0cnknKVxuICAgICAgICBdKVxuICAgICAgXTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgaCgnZGl2LmZlZWRiYWNrLm9uZ29pbmcnLCBbXG4gICAgICAgICAgaCgnZGl2LmdvYWwnLCBbcmVuZGVyR29hbChwLCBwLmdvYWwoKS5tb3ZlcyEgLSBwLm5iTW92ZXMoKSldKSxcbiAgICAgICAgICBwaW5uZWQgPyBoKCdkaXYuY29tbWVudCcsIHsgaG9vazogcmljaEhUTUwocGlubmVkKSB9KSA6IG51bGxcbiAgICAgICAgXSksXG4gICAgICAgIGJvb2xTZXR0aW5nKHtcbiAgICAgICAgICBuYW1lOiAnTG9hZCBuZXh0IGV4ZXJjaXNlIGltbWVkaWF0ZWx5JyxcbiAgICAgICAgICBpZDogJ2F1dG9OZXh0JyxcbiAgICAgICAgICBjaGVja2VkOiBwLmF1dG9OZXh0KCksXG4gICAgICAgICAgY2hhbmdlOiBwLmF1dG9OZXh0XG4gICAgICAgIH0sIGN0cmwudHJhbnMsIGN0cmwucmVkcmF3KVxuICAgICAgXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lkZShjdHJsOiBTdHVkeUN0cmwpOiBWTm9kZSB7XG5cbiAgY29uc3QgY3VycmVudCA9IGN0cmwuY3VycmVudENoYXB0ZXIoKSxcbiAgICBkYXRhID0gY3RybC5wcmFjdGljZSEuZGF0YTtcblxuICByZXR1cm4gaCgnZGl2LnByYWN0aWNlX19zaWRlJywgW1xuICAgIGgoJ2Rpdi5wcmFjdGljZV9fc2lkZV9fdGl0bGUnLCBbXG4gICAgICBoKCdpLicgKyBkYXRhLnN0dWR5LmlkKSxcbiAgICAgIGgoJ2Rpdi50ZXh0JywgW1xuICAgICAgICBoKCdoMScsIGRhdGEuc3R1ZHkubmFtZSksXG4gICAgICAgIGgoJ2VtJywgZGF0YS5zdHVkeS5kZXNjKVxuICAgICAgXSlcbiAgICBdKSxcbiAgICBoKCdkaXYucHJhY3RpY2VfX3NpZGVfX2NoYXB0ZXJzJywge1xuICAgICAgaG9vazogYmluZCgnY2xpY2snLCBlID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICBpZCA9ICh0YXJnZXQucGFyZW50Tm9kZSBhcyBIVE1MRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgfHwgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgICAgICBpZiAoaWQpIGN0cmwuc2V0Q2hhcHRlcihpZCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pXG4gICAgfSwgY3RybC5jaGFwdGVycy5saXN0KCkubWFwKGZ1bmN0aW9uKGNoYXB0ZXIpIHtcbiAgICAgIGNvbnN0IGxvYWRpbmcgPSBjdHJsLnZtLmxvYWRpbmcgJiYgY2hhcHRlci5pZCA9PT0gY3RybC52bS5uZXh0Q2hhcHRlcklkLFxuICAgICAgICBhY3RpdmUgPSAhY3RybC52bS5sb2FkaW5nICYmIGN1cnJlbnQgJiYgY3VycmVudC5pZCA9PT0gY2hhcHRlci5pZCxcbiAgICAgICAgY29tcGxldGlvbiA9IGRhdGEuY29tcGxldGlvbltjaGFwdGVyLmlkXSA+PSAwID8gJ2RvbmUnIDogJ29uZ29pbmcnO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgaCgnYS5wc19fY2hhcHRlcicsIHtcbiAgICAgICAgICBrZXk6IGNoYXB0ZXIuaWQsXG4gICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGhyZWY6IGRhdGEudXJsICsgJy8nICsgY2hhcHRlci5pZCxcbiAgICAgICAgICAgICdkYXRhLWlkJzogY2hhcHRlci5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2xhc3M6IHsgYWN0aXZlLCBsb2FkaW5nIH1cbiAgICAgICAgfSwgW1xuICAgICAgICAgIGgoJ3NwYW4uc3RhdHVzLicgKyBjb21wbGV0aW9uLCB7XG4gICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAnZGF0YS1pY29uJzogKChsb2FkaW5nIHx8IGFjdGl2ZSkgJiYgY29tcGxldGlvbiA9PT0gJ29uZ29pbmcnKSA/ICdHJyA6ICdFJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGgoJ2gzJywgY2hhcHRlci5uYW1lKVxuICAgICAgICBdKVxuICAgICAgXTtcbiAgICB9KS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpLCBbXSkpLFxuICAgIGgoJ2Rpdi5maW5hbGx5JywgW1xuICAgICAgaCgnYS5iYWNrJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICdkYXRhLWljb24nOiAnSScsXG4gICAgICAgICAgaHJlZjogJy9wcmFjdGljZScsXG4gICAgICAgICAgdGl0bGU6ICdNb3JlIHByYWN0aWNlJ1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHRodW5rKCdzZWxlY3Quc2VsZWN0b3InLCBzZWxlY3RvciwgW2RhdGFdKVxuICAgIF0pXG4gIF0pO1xufVxuIiwiaW1wb3J0IHsgUmVsYXlEYXRhLCBMb2dFdmVudCwgUmVsYXlJbnRybyB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTdHVkeUNoYXB0ZXIsIFN0dWR5Q2hhcHRlclJlbGF5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBpc0ZpbmlzaGVkIH0gZnJvbSAnLi4vc3R1ZHlDaGFwdGVycyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbGF5Q3RybCB7XG5cbiAgbG9nOiBMb2dFdmVudFtdID0gW107XG4gIGNvb2xkb3duOiBib29sZWFuID0gZmFsc2U7XG4gIGNsb2NrSW50ZXJ2YWw/OiBudW1iZXI7XG4gIGludHJvOiBSZWxheUludHJvO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBkYXRhOiBSZWxheURhdGEsIHJlYWRvbmx5IHNlbmQ6IFNvY2tldFNlbmQsIHJlYWRvbmx5IHJlZHJhdzogKCkgPT4gdm9pZCwgcmVhZG9ubHkgbWVtYmVyczogYW55LCBjaGFwdGVyOiBTdHVkeUNoYXB0ZXIpIHtcbiAgICB0aGlzLmFwcGx5Q2hhcHRlclJlbGF5KGNoYXB0ZXIsIGNoYXB0ZXIucmVsYXkpO1xuICAgIHRoaXMuaW50cm8gPSB7XG4gICAgICBleGlzdHM6ICEhZGF0YS5tYXJrdXAsXG4gICAgICBhY3RpdmU6ICEhZGF0YS5tYXJrdXAgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cXC8vZyl8fFtdKS5sZW5ndGggPCA0LFxuICAgICAgZGlzYWJsZTogKCkgPT4geyB0aGlzLmludHJvLmFjdGl2ZSA9IGZhbHNlIH1cbiAgICB9O1xuICB9XG5cbiAgc2V0U3luYyA9ICh2OiBCb29sZWFuKSA9PiB7XG4gICAgdGhpcy5zZW5kKCdyZWxheVN5bmMnLCB2KTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG5cbiAgbG9hZGluZyA9ICgpID0+ICF0aGlzLmNvb2xkb3duICYmIHRoaXMuZGF0YS5zeW5jLm9uZ29pbmc7XG5cbiAgYXBwbHlDaGFwdGVyUmVsYXkgPSAoYzogU3R1ZHlDaGFwdGVyLCByPzogU3R1ZHlDaGFwdGVyUmVsYXkpID0+IHtcbiAgICBpZiAodGhpcy5jbG9ja0ludGVydmFsKSBjbGVhckludGVydmFsKHRoaXMuY2xvY2tJbnRlcnZhbCk7XG4gICAgaWYgKHIpIHtcbiAgICAgIGMucmVsYXkgPSB0aGlzLmNvbnZlcnREYXRlKHIpO1xuICAgICAgaWYgKCFpc0ZpbmlzaGVkKGMpKSB0aGlzLmNsb2NrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnJlZHJhdywgMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjb252ZXJ0RGF0ZSA9IChyOiBTdHVkeUNoYXB0ZXJSZWxheSk6IFN0dWR5Q2hhcHRlclJlbGF5ID0+IHtcbiAgICBpZiAodHlwZW9mIHIuc2Vjb25kc1NpbmNlTGFzdE1vdmUgIT09ICd1bmRlZmluZWQnICYmICFyLmxhc3RNb3ZlQXQpIHtcbiAgICAgIHIubGFzdE1vdmVBdCA9IERhdGUubm93KCkgLSByLnNlY29uZHNTaW5jZUxhc3RNb3ZlICogMTAwMDtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICBwcml2YXRlIHNvY2tldEhhbmRsZXJzID0ge1xuICAgIHJlbGF5RGF0YTogKGQ6IFJlbGF5RGF0YSkgPT4ge1xuICAgICAgZC5zeW5jLmxvZyA9IHRoaXMuZGF0YS5zeW5jLmxvZztcbiAgICAgIHRoaXMuZGF0YSA9IGQ7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH0sXG4gICAgcmVsYXlMb2c6IChldmVudDogTG9nRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5pZCAhPT0gdGhpcy5kYXRhLmlkKSByZXR1cm47XG4gICAgICB0aGlzLmRhdGEuc3luYy5sb2cucHVzaChldmVudCk7XG4gICAgICB0aGlzLmRhdGEuc3luYy5sb2cgPSB0aGlzLmRhdGEuc3luYy5sb2cuc2xpY2UoLTIwKTtcbiAgICAgIHRoaXMuY29vbGRvd24gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuY29vbGRvd24gPSBmYWxzZTsgdGhpcy5yZWRyYXcoKTsgfSwgNDUwMCk7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgaWYgKGV2ZW50LmVycm9yKSBjb25zb2xlLndhcm4oYHJlbGF5IHN5bmNocm9uaXNhdGlvbiBlcnJvcjogJHtldmVudC5lcnJvcn1gKTtcbiAgICB9XG4gIH07XG5cbiAgc29ja2V0SGFuZGxlciA9ICh0OiBzdHJpbmcsIGQ6IGFueSkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLnNvY2tldEhhbmRsZXJzW3RdO1xuICAgIGlmIChoYW5kbGVyICYmIGQuaWQgPT09IHRoaXMuZGF0YS5pZCkge1xuICAgICAgaGFuZGxlcihkKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSc7XG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi8uLi9jdHJsJztcbmltcG9ydCB7IGlubmVySFRNTCB9IGZyb20gJy4uLy4uL3V0aWwnO1xuaW1wb3J0IHsgdmlldyBhcyBtdWx0aUJvYXJkVmlldyB9IGZyb20gJy4uL211bHRpQm9hcmQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjdHJsOiBBbmFseXNlQ3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgY29uc3Qgc3R1ZHkgPSBjdHJsLnN0dWR5O1xuICBjb25zdCByZWxheSA9IHN0dWR5ICYmIHN0dWR5LnJlbGF5O1xuICBpZiAoc3R1ZHkgJiYgcmVsYXkgJiYgcmVsYXkuaW50cm8uYWN0aXZlKSByZXR1cm4gaCgnZGl2LmludHJvJywgW1xuICAgIGgoJ2Rpdi5pbnRyb19fdGV4dCcsIFtcbiAgICAgIGgoJ2gxJywgc3R1ZHkuZGF0YS5uYW1lKSxcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgaG9vazogaW5uZXJIVE1MKHJlbGF5LmRhdGEubWFya3VwLCAoKSA9PiByZWxheS5kYXRhLm1hcmt1cCEpXG4gICAgICB9KVxuICAgIF0pLFxuICAgIG11bHRpQm9hcmRWaWV3KHN0dWR5Lm11bHRpQm9hcmQsIHN0dWR5KVxuICBdKTtcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSc7XG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJztcbmltcG9ydCBSZWxheUN0cmwgZnJvbSAnLi9yZWxheUN0cmwnO1xuaW1wb3J0IHsgZGF0YUljb24sIGJpbmQsIG9uSW5zZXJ0IH0gZnJvbSAnLi4vLi4vdXRpbCc7XG5pbXBvcnQgeyBMb2dFdmVudCB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGN0cmw6IFJlbGF5Q3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgaWYgKGN0cmwubWVtYmVycy5jYW5Db250cmlidXRlKCkpIHJldHVybiBoKCdkaXYucmVsYXktYWRtaW4nLCB7XG4gICAgaG9vazogb25JbnNlcnQoXyA9PiB3aW5kb3cubGljaGVzcy5sb2FkQ3NzUGF0aCgnYW5hbHlzZS5yZWxheS1hZG1pbicpKVxuICB9LCBbXG4gICAgaCgnaDInLCBbXG4gICAgICBoKCdzcGFuLnRleHQnLCB7IGF0dHJzOiBkYXRhSWNvbign7oCOJykgfSwgJ0Jyb2FkY2FzdCBtYW5hZ2VyJyksXG4gICAgICBoKCdhJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgIGhyZWY6IGAvYnJvYWRjYXN0LyR7Y3RybC5kYXRhLnNsdWd9LyR7Y3RybC5kYXRhLmlkfS9lZGl0YCxcbiAgICAgICAgICAnZGF0YS1pY29uJzogJyUnXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgXSksXG4gICAgY3RybC5kYXRhLnN5bmMudXJsID8gKGN0cmwuZGF0YS5zeW5jLm9uZ29pbmcgPyBzdGF0ZU9uIDogc3RhdGVPZmYpKGN0cmwpIDogbnVsbCxcbiAgICByZW5kZXJMb2coY3RybClcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIGxvZ1N1Y2Nlc3MoZTogTG9nRXZlbnQpIHtcbiAgcmV0dXJuIFtcbiAgICBlLm1vdmVzID8gaCgnc3Ryb25nJywgJycgKyBlLm1vdmVzKSA6IGUubW92ZXMsXG4gICAgYCBuZXcgbW92ZSR7ZS5tb3ZlcyA+IDEgPyAncycgOiAnJ31gXG4gIF07XG59XG5cbmZ1bmN0aW9uIHJlbmRlckxvZyhjdHJsOiBSZWxheUN0cmwpIHtcbiAgY29uc3QgZGF0ZUZvcm1hdHRlciA9IGdldERhdGVGb3JtYXR0ZXIoKTtcbiAgY29uc3QgbG9nTGluZXMgPSBjdHJsLmRhdGEuc3luYy5sb2cuc2xpY2UoMCkucmV2ZXJzZSgpLm1hcChlID0+IHtcbiAgICBjb25zdCBlcnIgPSBlLmVycm9yICYmIGgoJ2EnLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBocmVmOiBjdHJsLmRhdGEuc3luYy51cmwsXG4gICAgICAgIHRhcmdldDogJ19ibGFuaydcbiAgICAgIH1cbiAgICB9LCBlLmVycm9yKTtcbiAgICByZXR1cm4gaCgnZGl2JyArIChlcnIgPyAnLmVycicgOiAnJyksIHtcbiAgICAgIGtleTogZS5hdCxcbiAgICAgIGF0dHJzOiBkYXRhSWNvbihlcnIgPyAnaicgOiAnRScpXG4gICAgfSwgW1xuICAgICAgaCgnZGl2JywgW1xuICAgICAgICAuLi4oZXJyID8gW2Vycl0gOiBsb2dTdWNjZXNzKGUpKSxcbiAgICAgICAgaCgndGltZScsIGRhdGVGb3JtYXR0ZXIobmV3IERhdGUoZS5hdCkpKVxuICAgICAgXSlcbiAgICBdKTtcbiAgfSk7XG4gIGlmIChjdHJsLmxvYWRpbmcoKSkgbG9nTGluZXMudW5zaGlmdChoKCdkaXYubG9hZCcsIFtcbiAgICBoKCdpLmRkbG9hZGVyJyksXG4gICAgJ1BvbGxpbmcgc291cmNlLi4uJ1xuICBdKSk7XG4gIHJldHVybiBoKCdkaXYubG9nJywgbG9nTGluZXMpO1xufVxuXG5mdW5jdGlvbiBzdGF0ZU9uKGN0cmw6IFJlbGF5Q3RybCkge1xuICByZXR1cm4gaCgnZGl2LnN0YXRlLm9uLmNsaWNrYWJsZScsIHtcbiAgICBob29rOiBiaW5kKCdjbGljaycsIF8gPT4gY3RybC5zZXRTeW5jKGZhbHNlKSksXG4gICAgYXR0cnM6IGRhdGFJY29uKCdCJylcbiAgfSwgW1xuICAgIGgoJ2RpdicsIFtcbiAgICAgICdDb25uZWN0ZWQgdG8gc291cmNlJyxcbiAgICAgIGgoJ2JyJyksXG4gICAgICBjdHJsLmRhdGEuc3luYy51cmwucmVwbGFjZSgvaHR0cHM/OlxcL1xcLy8sICcnKVxuICAgIF0pXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBzdGF0ZU9mZihjdHJsOiBSZWxheUN0cmwpIHtcbiAgcmV0dXJuIGgoJ2Rpdi5zdGF0ZS5vZmYuY2xpY2thYmxlJywge1xuICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBjdHJsLnNldFN5bmModHJ1ZSkpLFxuICAgIGF0dHJzOiBkYXRhSWNvbignRycpXG4gIH0sIFtcbiAgICBoKCdkaXYuZmF0JywgJ0NsaWNrIHRvIGNvbm5lY3QnKVxuICBdKTtcbn1cblxubGV0IGNhY2hlZERhdGVGb3JtYXR0ZXI6IChkYXRlOiBEYXRlKSA9PiBzdHJpbmc7XG5cbmZ1bmN0aW9uIGdldERhdGVGb3JtYXR0ZXIoKTogKGRhdGU6IERhdGUpID0+IHN0cmluZyB7XG4gIGlmICghY2FjaGVkRGF0ZUZvcm1hdHRlcikgY2FjaGVkRGF0ZUZvcm1hdHRlciA9ICh3aW5kb3cuSW50bCAmJiBJbnRsLkRhdGVUaW1lRm9ybWF0KSA/XG4gICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IS5sYW5nLCB7XG4gICAgICBtb250aDogJ3Nob3J0JyxcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgaG91cjogJ251bWVyaWMnLFxuICAgICAgbWludXRlOiAnbnVtZXJpYycsXG4gICAgICBzZWNvbmQ6ICdudW1lcmljJ1xuICAgIH0pLmZvcm1hdCA6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudG9Mb2NhbGVTdHJpbmcoKTsgfVxuXG4gIHJldHVybiBjYWNoZWREYXRlRm9ybWF0dGVyO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IHNwaW5uZXIsIGJpbmQsIG9uSW5zZXJ0IH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBQcm9wLCBwcm9wLCBkZWZpbmVkIH0gZnJvbSAnY29tbW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2ZXJFdmFsQ3RybCB7XG4gIHJlcXVlc3RlZDogUHJvcDxib29sZWFuPjtcbiAgcm9vdDogQW5hbHlzZUN0cmw7XG4gIGNoYXB0ZXJJZCgpOiBzdHJpbmc7XG4gIHJlcXVlc3QoKTogdm9pZDtcbiAgb25NZXJnZUFuYWx5c2lzRGF0YSgpOiB2b2lkO1xuICBjaGFydEVsOiBQcm9wPEhUTUxFbGVtZW50IHwgbnVsbD47XG4gIHJlc2V0KCk6IHZvaWQ7XG4gIGxhc3RQbHk6IFByb3A8bnVtYmVyIHwgZmFsc2U+O1xufVxuXG5jb25zdCBsaSA9IHdpbmRvdy5saWNoZXNzO1xuXG5leHBvcnQgZnVuY3Rpb24gY3RybChyb290OiBBbmFseXNlQ3RybCwgY2hhcHRlcklkOiAoKSA9PiBzdHJpbmcpOiBTZXJ2ZXJFdmFsQ3RybCB7XG5cbiAgY29uc3QgcmVxdWVzdGVkID0gcHJvcChmYWxzZSksXG4gICAgbGFzdFBseSA9IHByb3A8bnVtYmVyIHwgZmFsc2U+KGZhbHNlKSxcbiAgICBjaGFydEVsID0gcHJvcDxIVE1MRWxlbWVudCB8IG51bGw+KG51bGwpO1xuXG4gIGZ1bmN0aW9uIHVuc2VsZWN0KGNoYXJ0KSB7XG4gICAgY2hhcnQuZ2V0U2VsZWN0ZWRQb2ludHMoKS5mb3JFYWNoKHAgPT4gcC5zZWxlY3QoZmFsc2UpKTtcbiAgfVxuXG4gIGxpLnB1YnN1Yi5vbignYW5hbHlzaXMuY2hhbmdlJywgKF9mZW46IHN0cmluZywgX3BhdGg6IHN0cmluZywgbWFpbmxpbmVQbHk6IG51bWJlciB8IGZhbHNlKSA9PiB7XG4gICAgaWYgKCFsaS5hZHZhbnRhZ2VDaGFydCB8fCBsYXN0UGx5KCkgPT09IG1haW5saW5lUGx5KSByZXR1cm47XG4gICAgY29uc3QgbHAgPSBsYXN0UGx5KHR5cGVvZiBtYWlubGluZVBseSA9PT0gJ3VuZGVmaW5lZCcgPyBsYXN0UGx5KCkgOiBtYWlubGluZVBseSksXG4gICAgICBlbCA9IGNoYXJ0RWwoKTtcbiAgICBpZiAoZWwgJiYgd2luZG93LkhpZ2hjaGFydHMpIHtcbiAgICAgIGNvbnN0ICRjaGFydCA9ICQoZWwpO1xuICAgICAgaWYgKCRjaGFydC5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY2hhcnQgPSAkY2hhcnQuaGlnaGNoYXJ0cygpO1xuICAgICAgICBpZiAoY2hhcnQpIHtcbiAgICAgICAgICBpZiAobHAgPT09IGZhbHNlKSB1bnNlbGVjdChjaGFydCk7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IGNoYXJ0LnNlcmllc1swXS5kYXRhW2xwIC0gMSAtIHJvb3QudHJlZS5yb290LnBseV07XG4gICAgICAgICAgICBpZiAoZGVmaW5lZChwb2ludCkpIHBvaW50LnNlbGVjdCgpO1xuICAgICAgICAgICAgZWxzZSB1bnNlbGVjdChjaGFydCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgbGFzdFBseShmYWxzZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGxhc3RQbHkoZmFsc2UpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHJvb3QsXG4gICAgcmVzZXQoKSB7XG4gICAgICByZXF1ZXN0ZWQoZmFsc2UpO1xuICAgICAgbGFzdFBseShmYWxzZSk7XG4gICAgfSxcbiAgICBjaGFwdGVySWQsXG4gICAgb25NZXJnZUFuYWx5c2lzRGF0YSgpIHtcbiAgICAgIGlmIChsaS5hZHZhbnRhZ2VDaGFydCkgbGkuYWR2YW50YWdlQ2hhcnQudXBkYXRlKHJvb3QuZGF0YSk7XG4gICAgfSxcbiAgICByZXF1ZXN0KCkge1xuICAgICAgcm9vdC5zb2NrZXQuc2VuZCgncmVxdWVzdEFuYWx5c2lzJywgY2hhcHRlcklkKCkpO1xuICAgICAgcmVxdWVzdGVkKHRydWUpO1xuICAgIH0sXG4gICAgcmVxdWVzdGVkLFxuICAgIGxhc3RQbHksXG4gICAgY2hhcnRFbFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBTZXJ2ZXJFdmFsQ3RybCk6IFZOb2RlIHtcblxuICBjb25zdCBhbmFseXNpcyA9IGN0cmwucm9vdC5kYXRhLmFuYWx5c2lzO1xuXG4gIGlmICghY3RybC5yb290LnNob3dDb21wdXRlcigpKSByZXR1cm4gZGlzYWJsZWQoKTtcbiAgaWYgKCFhbmFseXNpcykgcmV0dXJuIGN0cmwucmVxdWVzdGVkKCkgPyByZXF1ZXN0ZWQoKSA6IHJlcXVlc3RCdXR0b24oY3RybCk7XG5cbiAgcmV0dXJuIGgoJ2Rpdi5zdHVkeV9fc2VydmVyLWV2YWwucmVhZHkuJyArIGFuYWx5c2lzLmlkLCB7XG4gICAgaG9vazogb25JbnNlcnQoZWwgPT4ge1xuICAgICAgY3RybC5sYXN0UGx5KGZhbHNlKTtcbiAgICAgIGxpLnJlcXVlc3RJZGxlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBsaS5sb2FkU2NyaXB0KCdqYXZhc2NyaXB0cy9jaGFydC9hY3BsLmpzJykudGhlbigoKSA9PiB7XG4gICAgICAgICAgbGkuYWR2YW50YWdlQ2hhcnQoY3RybC5yb290LmRhdGEsIGN0cmwucm9vdC50cmFucywgZWwpO1xuICAgICAgICAgIGN0cmwuY2hhcnRFbChlbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSlcbiAgfSwgW2goJ2Rpdi5zdHVkeV9fbWVzc2FnZScsIHNwaW5uZXIoKSldKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZWQoKTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2LnN0dWR5X19zZXJ2ZXItZXZhbC5kaXNhYmxlZC5wYWRkZWQnLCAnWW91IGRpc2FibGVkIGNvbXB1dGVyIGFuYWx5c2lzLicpO1xufVxuXG5mdW5jdGlvbiByZXF1ZXN0ZWQoKTogVk5vZGUge1xuICByZXR1cm4gaCgnZGl2LnN0dWR5X19zZXJ2ZXItZXZhbC5yZXF1ZXN0ZWQucGFkZGVkJywgc3Bpbm5lcigpKTtcbn1cblxuZnVuY3Rpb24gcmVxdWVzdEJ1dHRvbihjdHJsOiBTZXJ2ZXJFdmFsQ3RybCkge1xuICBjb25zdCByb290ID0gY3RybC5yb290O1xuICByZXR1cm4gaCgnZGl2LnN0dWR5X19tZXNzYWdlJyxcbiAgICByb290Lm1haW5saW5lLmxlbmd0aCA8IDUgPyBoKCdwJywgcm9vdC50cmFucy5ub2FyZygndGhlQ2hhcHRlcklzVG9vU2hvcnRUb0JlQW5hbHlzZWQnKSkgOiAoXG4gICAgICAhcm9vdC5zdHVkeSEubWVtYmVycy5jYW5Db250cmlidXRlKCkgPyBbcm9vdC50cmFucy5ub2FyZygnb25seUNvbnRyaWJ1dG9yc0NhblJlcXVlc3RBbmFseXNpcycpXSA6IFtcbiAgICAgICAgaCgncCcsIFtcbiAgICAgICAgICByb290LnRyYW5zLm5vYXJnKCdnZXRBRnVsbENvbXB1dGVyQW5hbHlzaXMnKSxcbiAgICAgICAgICBoKCdicicpLFxuICAgICAgICAgIHJvb3QudHJhbnMubm9hcmcoJ21ha2VTdXJlVGhlQ2hhcHRlcklzQ29tcGxldGUnKVxuICAgICAgICBdKSxcbiAgICAgICAgaCgnYS5idXR0b24udGV4dCcsIHtcbiAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgJ2RhdGEtaWNvbic6ICfugIQnLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHJvb3QubWFpbmxpbmUubGVuZ3RoIDwgNVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLnJlcXVlc3QsIHJvb3QucmVkcmF3KVxuICAgICAgICB9LCByb290LnRyYW5zLm5vYXJnKCdyZXF1ZXN0QUNvbXB1dGVyQW5hbHlzaXMnKSlcbiAgICAgIF0pXG4gICk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgcHJvcCwgUHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyBiaW5kLCBkYXRhSWNvbiwgaWNvblRhZywgc2Nyb2xsVG8gfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IGN0cmwgYXMgY2hhcHRlck5ld0Zvcm0sIFN0dWR5Q2hhcHRlck5ld0Zvcm1DdHJsIH0gZnJvbSAnLi9jaGFwdGVyTmV3Rm9ybSc7XG5pbXBvcnQgeyBjdHJsIGFzIGNoYXB0ZXJFZGl0Rm9ybSB9IGZyb20gJy4vY2hhcHRlckVkaXRGb3JtJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IFN0dWR5Q3RybCwgU3R1ZHlDaGFwdGVyTWV0YSwgTG9jYWxQYXRocywgU3R1ZHlDaGFwdGVyLCBUYWdBcnJheSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZHlDaGFwdGVyc0N0cmwge1xuICBuZXdGb3JtOiBTdHVkeUNoYXB0ZXJOZXdGb3JtQ3RybDtcbiAgZWRpdEZvcm06IGFueTtcbiAgbGlzdDogUHJvcDxTdHVkeUNoYXB0ZXJNZXRhW10+O1xuICBnZXQoaWQ6IHN0cmluZyk6IFN0dWR5Q2hhcHRlck1ldGEgfCB1bmRlZmluZWQ7XG4gIHNpemUoKTogbnVtYmVyO1xuICBzb3J0KGlkczogc3RyaW5nW10pOiB2b2lkO1xuICBmaXJzdENoYXB0ZXJJZCgpOiBzdHJpbmc7XG4gIHRvZ2dsZU5ld0Zvcm0oKTogdm9pZDtcbiAgbG9jYWxQYXRoczogTG9jYWxQYXRocztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwoaW5pdENoYXB0ZXJzOiBTdHVkeUNoYXB0ZXJNZXRhW10sIHNlbmQ6IFNvY2tldFNlbmQsIHNldFRhYjogKCkgPT4gdm9pZCwgY2hhcHRlckNvbmZpZywgcm9vdDogQW5hbHlzZUN0cmwpOiBTdHVkeUNoYXB0ZXJzQ3RybCB7XG5cbiAgY29uc3QgbGlzdDogUHJvcDxTdHVkeUNoYXB0ZXJNZXRhW10+ID0gcHJvcChpbml0Q2hhcHRlcnMpO1xuXG4gIGNvbnN0IG5ld0Zvcm0gPSBjaGFwdGVyTmV3Rm9ybShzZW5kLCBsaXN0LCBzZXRUYWIsIHJvb3QpO1xuICBjb25zdCBlZGl0Rm9ybSA9IGNoYXB0ZXJFZGl0Rm9ybShzZW5kLCBjaGFwdGVyQ29uZmlnLCByb290LnRyYW5zLCByb290LnJlZHJhdyk7XG5cbiAgY29uc3QgbG9jYWxQYXRoczogTG9jYWxQYXRocyA9IHt9O1xuXG4gIHJldHVybiB7XG4gICAgbmV3Rm9ybSxcbiAgICBlZGl0Rm9ybSxcbiAgICBsaXN0LFxuICAgIGdldChpZCkge1xuICAgICAgcmV0dXJuIGxpc3QoKS5maW5kKGMgPT4gYy5pZCA9PT0gaWQpO1xuICAgIH0sXG4gICAgc2l6ZSgpIHtcbiAgICAgIHJldHVybiBsaXN0KCkubGVuZ3RoO1xuICAgIH0sXG4gICAgc29ydChpZHMpIHtcbiAgICAgIHNlbmQoXCJzb3J0Q2hhcHRlcnNcIiwgaWRzKTtcbiAgICB9LFxuICAgIGZpcnN0Q2hhcHRlcklkKCkge1xuICAgICAgcmV0dXJuIGxpc3QoKVswXS5pZDtcbiAgICB9LFxuICAgIHRvZ2dsZU5ld0Zvcm0oKSB7XG4gICAgICBpZiAobmV3Rm9ybS52bS5vcGVuIHx8IGxpc3QoKS5sZW5ndGggPCA2NCkgbmV3Rm9ybS50b2dnbGUoKTtcbiAgICAgIGVsc2UgYWxlcnQoXCJZb3UgaGF2ZSByZWFjaGVkIHRoZSBsaW1pdCBvZiA2NCBjaGFwdGVycyBwZXIgc3R1ZHkuIFBsZWFzZSBjcmVhdGUgYSBuZXcgc3R1ZHkuXCIpO1xuICAgIH0sXG4gICAgbG9jYWxQYXRoc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGaW5pc2hlZChjOiBTdHVkeUNoYXB0ZXIpIHtcbiAgY29uc3QgcmVzdWx0ID0gZmluZFRhZyhjLnRhZ3MsICdyZXN1bHQnKTtcbiAgcmV0dXJuIHJlc3VsdCAmJiByZXN1bHQgIT09ICcqJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRUYWcodGFnczogVGFnQXJyYXlbXSwgbmFtZTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgdCA9IHRhZ3MuZmluZCh0ID0+IHRbMF0udG9Mb3dlckNhc2UoKSA9PT0gbmFtZSk7XG4gIHJldHVybiB0ICYmIHRbMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXN1bHRPZih0YWdzOiBUYWdBcnJheVtdLCBpc1doaXRlOiBib29sZWFuKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgc3dpdGNoKGZpbmRUYWcodGFncywgJ3Jlc3VsdCcpKSB7XG4gICAgY2FzZSAnMS0wJzogcmV0dXJuIGlzV2hpdGUgPyAnMScgOiAnMCc7XG4gICAgY2FzZSAnMC0xJzogcmV0dXJuIGlzV2hpdGUgPyAnMCcgOiAnMSc7XG4gICAgY2FzZSAnMS8yLTEvMic6IHJldHVybiAnMS8yJztcbiAgICBkZWZhdWx0OiByZXR1cm47XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZpZXcoY3RybDogU3R1ZHlDdHJsKTogVk5vZGUge1xuXG4gIGNvbnN0IGNhbkNvbnRyaWJ1dGUgPSBjdHJsLm1lbWJlcnMuY2FuQ29udHJpYnV0ZSgpLFxuICAgIGNvbmZpZ0J1dHRvbiA9IGNhbkNvbnRyaWJ1dGUgPyBoKCdhY3QnLCB7IGF0dHJzOiBkYXRhSWNvbignJScpIH0pIDogbnVsbCxcbiAgICBjdXJyZW50ID0gY3RybC5jdXJyZW50Q2hhcHRlcigpO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZSh2bm9kZTogVk5vZGUpIHtcbiAgICBjb25zdCBuZXdDb3VudCA9IGN0cmwuY2hhcHRlcnMubGlzdCgpLmxlbmd0aCxcbiAgICAgIHZEYXRhID0gdm5vZGUuZGF0YSEubGkhLFxuICAgICAgZWwgPSB2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHZEYXRhLmNvdW50ICE9PSBuZXdDb3VudCkge1xuICAgICAgaWYgKGN1cnJlbnQuaWQgIT09IGN0cmwuY2hhcHRlcnMuZmlyc3RDaGFwdGVySWQoKSkge1xuICAgICAgICBzY3JvbGxUbyhlbCwgZWwucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGN0cmwudm0ubG9hZGluZyAmJiB2RGF0YS5sb2FkaW5nSWQgIT09IGN0cmwudm0ubmV4dENoYXB0ZXJJZCkge1xuICAgICAgdkRhdGEubG9hZGluZ0lkID0gY3RybC52bS5uZXh0Q2hhcHRlcklkO1xuICAgICAgc2Nyb2xsVG8oZWwsIGVsLnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nJykpO1xuICAgIH1cbiAgICB2RGF0YS5jb3VudCA9IG5ld0NvdW50O1xuICAgIGlmIChjYW5Db250cmlidXRlICYmIG5ld0NvdW50ID4gMSAmJiAhdkRhdGEuc29ydGFibGUpIHtcbiAgICAgIGNvbnN0IG1ha2VTb3J0YWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2RGF0YS5zb3J0YWJsZSA9IHdpbmRvd1snU29ydGFibGUnXS5jcmVhdGUoZWwsIHtcbiAgICAgICAgICBkcmFnZ2FibGU6ICcuZHJhZ2dhYmxlJyxcbiAgICAgICAgICBoYW5kbGU6IHdpbmRvdy5saWNoZXNzLmhhc1RvdWNoRXZlbnRzID8gJ3NwYW4nIDogdW5kZWZpbmVkLFxuICAgICAgICAgIG9uU29ydCgpIHtcbiAgICAgICAgICAgIGN0cmwuY2hhcHRlcnMuc29ydCh2RGF0YS5zb3J0YWJsZS50b0FycmF5KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAod2luZG93WydTb3J0YWJsZSddKSBtYWtlU29ydGFibGUoKTtcbiAgICAgIGVsc2Ugd2luZG93LmxpY2hlc3MubG9hZFNjcmlwdCgnamF2YXNjcmlwdHMvdmVuZG9yL1NvcnRhYmxlLm1pbi5qcycpLnRoZW4obWFrZVNvcnRhYmxlKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBpbnRyb0FjdGl2ZSA9IGN0cmwucmVsYXkgJiYgY3RybC5yZWxheS5pbnRyby5hY3RpdmU7XG5cbiAgcmV0dXJuIGgoJ2Rpdi5zdHVkeV9fY2hhcHRlcnMnLCB7XG4gICAgaG9vazoge1xuICAgICAgaW5zZXJ0KHZub2RlKSB7XG4gICAgICAgICh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgaWQgPSAodGFyZ2V0LnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQpLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpIHx8IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcbiAgICAgICAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnQUNUJykgY3RybC5jaGFwdGVycy5lZGl0Rm9ybS50b2dnbGUoY3RybC5jaGFwdGVycy5nZXQoaWQpKTtcbiAgICAgICAgICBlbHNlIGN0cmwuc2V0Q2hhcHRlcihpZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB2bm9kZS5kYXRhIS5saSA9IHt9O1xuICAgICAgICB1cGRhdGUodm5vZGUpO1xuICAgICAgICB3aW5kb3cubGljaGVzcy5wdWJzdWIuZW1pdCgnY2hhdC5yZXNpemUnKTtcbiAgICAgIH0sXG4gICAgICBwb3N0cGF0Y2gob2xkLCB2bm9kZSkge1xuICAgICAgICB2bm9kZS5kYXRhIS5saSA9IG9sZC5kYXRhIS5saTtcbiAgICAgICAgdXBkYXRlKHZub2RlKTtcbiAgICAgIH0sXG4gICAgICBkZXN0cm95OiB2bm9kZSA9PiB7XG4gICAgICAgIGNvbnN0IHNvcnRhYmxlID0gdm5vZGUuZGF0YSEubGkhLnNvcnRhYmxlO1xuICAgICAgICBpZiAoc29ydGFibGUpIHNvcnRhYmxlLmRlc3Ryb3koKVxuICAgICAgfVxuICAgIH1cbiAgfSwgY3RybC5jaGFwdGVycy5saXN0KCkubWFwKChjaGFwdGVyLCBpKSA9PiB7XG4gICAgY29uc3QgZWRpdGluZyA9IGN0cmwuY2hhcHRlcnMuZWRpdEZvcm0uaXNFZGl0aW5nKGNoYXB0ZXIuaWQpLFxuICAgICAgbG9hZGluZyA9IGN0cmwudm0ubG9hZGluZyAmJiBjaGFwdGVyLmlkID09PSBjdHJsLnZtLm5leHRDaGFwdGVySWQsXG4gICAgICBhY3RpdmUgPSAhY3RybC52bS5sb2FkaW5nICYmIGN1cnJlbnQgJiYgIWludHJvQWN0aXZlICYmIGN1cnJlbnQuaWQgPT09IGNoYXB0ZXIuaWQ7XG4gICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgIGtleTogY2hhcHRlci5pZCxcbiAgICAgIGF0dHJzOiB7ICdkYXRhLWlkJzogY2hhcHRlci5pZCB9LFxuICAgICAgY2xhc3M6IHsgYWN0aXZlLCBlZGl0aW5nLCBsb2FkaW5nLCBkcmFnZ2FibGU6IGNhbkNvbnRyaWJ1dGUgfVxuICAgIH0sIFtcbiAgICAgIGgoJ3NwYW4nLCBsb2FkaW5nID8gaCgnc3Bhbi5kZGxvYWRlcicpIDogWycnICsgKGkgKyAxKV0pLFxuICAgICAgaCgnaDMnLCBjaGFwdGVyLm5hbWUpLFxuICAgICAgY29uZmlnQnV0dG9uXG4gICAgXSk7XG4gIH0pLmNvbmNhdChcbiAgICBjdHJsLm1lbWJlcnMuY2FuQ29udHJpYnV0ZSgpID8gW1xuICAgICAgaCgnZGl2LmFkZCcsIHtcbiAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLmNoYXB0ZXJzLnRvZ2dsZU5ld0Zvcm0sIGN0cmwucmVkcmF3KVxuICAgICAgfSwgW1xuICAgICAgICBoKCdzcGFuJywgaWNvblRhZygnTycpKSxcbiAgICAgICAgaCgnaDMnLCBjdHJsLnRyYW5zLm5vYXJnKCdhZGROZXdDaGFwdGVyJykpXG4gICAgICBdKVxuICAgIF0gOiBbXVxuICApKTtcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5pbXBvcnQgeyBub2RlRnVsbE5hbWUsIGJpbmQsIHJpY2hIVE1MIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBTdHVkeUN0cmwgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5mdW5jdGlvbiBhdXRob3JEb20oYXV0aG9yKSB7XG4gIGlmICghYXV0aG9yKSByZXR1cm4gJ1Vua25vd24nO1xuICBpZiAoIWF1dGhvci5uYW1lKSByZXR1cm4gYXV0aG9yO1xuICByZXR1cm4gaCgnc3Bhbi51c2VyLWxpbmsudWxwdCcsIHtcbiAgICBhdHRyczogeyAnZGF0YS1ocmVmJzogJy9ALycgKyBhdXRob3IuaWQgfVxuICB9LCBhdXRob3IubmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhdXRob3JUZXh0KGF1dGhvcik6IHN0cmluZyB7XG4gIGlmICghYXV0aG9yKSByZXR1cm4gJ1Vua25vd24nO1xuICBpZiAoIWF1dGhvci5uYW1lKSByZXR1cm4gYXV0aG9yO1xuICByZXR1cm4gYXV0aG9yLm5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50Q29tbWVudHMoY3RybDogQW5hbHlzZUN0cmwsIGluY2x1ZGluZ01pbmU6IGJvb2xlYW4pOiBWTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGlmICghY3RybC5ub2RlLmNvbW1lbnRzKSByZXR1cm47XG4gIGNvbnN0IG5vZGUgPSBjdHJsLm5vZGUsXG4gIHN0dWR5OiBTdHVkeUN0cmwgPSBjdHJsLnN0dWR5ISxcbiAgY2hhcHRlciA9IHN0dWR5LmN1cnJlbnRDaGFwdGVyKCksXG4gIGNvbW1lbnRzID0gbm9kZS5jb21tZW50cyE7XG4gIGlmICghY29tbWVudHMubGVuZ3RoKSByZXR1cm47XG4gIHJldHVybiBoKCdkaXYnLCBjb21tZW50cy5tYXAoKGNvbW1lbnQ6IFRyZWUuQ29tbWVudCkgPT4ge1xuICAgIGNvbnN0IGJ5OiBhbnkgPSBjb21tZW50LmJ5O1xuICAgIGNvbnN0IGlzTWluZSA9IGJ5LmlkICYmIGN0cmwub3B0cy51c2VySWQgPT09IGJ5LmlkO1xuICAgIGlmICghaW5jbHVkaW5nTWluZSAmJiBpc01pbmUpIHJldHVybjtcbiAgICBjb25zdCBjYW5EZWxldGUgPSBpc01pbmUgfHwgc3R1ZHkubWVtYmVycy5pc093bmVyKCk7XG4gICAgcmV0dXJuIGgoJ2Rpdi5zdHVkeV9fY29tbWVudC4nICsgY29tbWVudC5pZCwgW1xuICAgICAgY2FuRGVsZXRlICYmIHN0dWR5LnZtLm1vZGUud3JpdGUgPyBoKCdhLmVkaXQnLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgJ2RhdGEtaWNvbic6ICdxJyxcbiAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSdcbiAgICAgICAgfSxcbiAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IHtcbiAgICAgICAgICBpZiAoY29uZmlybSgnRGVsZXRlICcgKyBhdXRob3JUZXh0KGJ5KSArICdcXCdzIGNvbW1lbnQ/JykpXG4gICAgICAgICAgc3R1ZHkuY29tbWVudEZvcm0uZGVsZXRlKGNoYXB0ZXIuaWQsIGN0cmwucGF0aCwgY29tbWVudC5pZCk7XG4gICAgICAgIH0sIGN0cmwucmVkcmF3KVxuICAgICAgfSkgOiBudWxsLFxuICAgICAgaXNNaW5lICYmIHN0dWR5LnZtLm1vZGUud3JpdGUgPyBoKCdhLmVkaXQnLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgJ2RhdGEtaWNvbic6ICdtJyxcbiAgICAgICAgICB0aXRsZTogJ0VkaXQnXG4gICAgICAgIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiB7XG4gICAgICAgICAgc3R1ZHkuY29tbWVudEZvcm0uc3RhcnQoY2hhcHRlci5pZCwgY3RybC5wYXRoLCBub2RlKTtcbiAgICAgICAgfSwgY3RybC5yZWRyYXcpXG4gICAgICB9KSA6IG51bGwsXG4gICAgICBhdXRob3JEb20oYnkpLFxuICAgICAgLi4uKG5vZGUuc2FuID8gW1xuICAgICAgICAnIG9uICcsXG4gICAgICAgIGgoJ3NwYW4ubm9kZScsIG5vZGVGdWxsTmFtZShub2RlKSlcbiAgICAgIF0gOiBbXSksXG4gICAgICAnOiAnLFxuICAgICAgaCgnZGl2LnRleHQnLCB7IGhvb2s6IHJpY2hIVE1MKGNvbW1lbnQudGV4dCkgfSlcbiAgICBdKTtcbiAgfSkpO1xufVxuIiwiaW1wb3J0IHsgcHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnY29tbW9uL3Rocm90dGxlJztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IGN0cmwgYXMgbWVtYmVyQ3RybCB9IGZyb20gJy4vc3R1ZHlNZW1iZXJzJztcbmltcG9ydCB7IGN0cmwgYXMgY2hhcHRlckN0cmwgfSBmcm9tICcuL3N0dWR5Q2hhcHRlcnMnO1xuaW1wb3J0IHByYWN0aWNlQ3RybCBmcm9tICcuL3ByYWN0aWNlL3N0dWR5UHJhY3RpY2VDdHJsJztcbmltcG9ydCB7IFN0dWR5UHJhY3RpY2VEYXRhLCBTdHVkeVByYWN0aWNlQ3RybCB9IGZyb20gJy4vcHJhY3RpY2UvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBjdHJsIGFzIGNvbW1lbnRGb3JtQ3RybCwgQ29tbWVudEZvcm0gfSBmcm9tICcuL2NvbW1lbnRGb3JtJztcbmltcG9ydCB7IGN0cmwgYXMgZ2x5cGhGb3JtQ3RybCwgR2x5cGhDdHJsIH0gZnJvbSAnLi9zdHVkeUdseXBoJztcbmltcG9ydCB7IGN0cmwgYXMgc3R1ZHlGb3JtQ3RybCwgU3R1ZHlGb3JtQ3RybCB9IGZyb20gJy4vc3R1ZHlGb3JtJztcbmltcG9ydCB7IGN0cmwgYXMgbm90aWZDdHJsIH0gZnJvbSAnLi9ub3RpZic7XG5pbXBvcnQgeyBjdHJsIGFzIHNoYXJlQ3RybCB9IGZyb20gJy4vc3R1ZHlTaGFyZSc7XG5pbXBvcnQgeyBjdHJsIGFzIHRhZ3NDdHJsIH0gZnJvbSAnLi9zdHVkeVRhZ3MnO1xuaW1wb3J0IHsgY3RybCBhcyBzZXJ2ZXJFdmFsQ3RybCB9IGZyb20gJy4vc2VydmVyRXZhbCc7XG5pbXBvcnQgKiBhcyB0b3VycyBmcm9tICcuL3N0dWR5VG91cic7XG5pbXBvcnQgKiBhcyB4aHIgZnJvbSAnLi9zdHVkeVhocic7XG5pbXBvcnQgeyBwYXRoIGFzIHRyZWVQYXRoIH0gZnJvbSAndHJlZSc7XG5pbXBvcnQgeyBTdHVkeUN0cmwsIFN0dWR5Vm0sIFRhYiwgVG9vbFRhYiwgVGFnVHlwZXMsIFN0dWR5RGF0YSwgU3R1ZHlDaGFwdGVyTWV0YSwgUmVsb2FkRGF0YSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgR2FtZWJvb2tQbGF5Q3RybCBmcm9tICcuL2dhbWVib29rL2dhbWVib29rUGxheUN0cmwnO1xuaW1wb3J0IHsgRGVzY3JpcHRpb25DdHJsIH0gZnJvbSAnLi9kZXNjcmlwdGlvbic7XG5pbXBvcnQgUmVsYXlDdHJsIGZyb20gJy4vcmVsYXkvcmVsYXlDdHJsJztcbmltcG9ydCB7IFJlbGF5RGF0YSB9IGZyb20gJy4vcmVsYXkvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBNdWx0aUJvYXJkQ3RybCB9IGZyb20gJy4vbXVsdGlCb2FyZCc7XG5cbmNvbnN0IGxpID0gd2luZG93LmxpY2hlc3M7XG5cbi8vIGRhdGEucG9zaXRpb24ucGF0aCByZXByZXNlbnRzIHRoZSBzZXJ2ZXIgc3RhdGVcbi8vIGN0cmwucGF0aCBpcyB0aGUgY2xpZW50IHN0YXRlXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkYXRhOiBTdHVkeURhdGEsIGN0cmw6IEFuYWx5c2VDdHJsLCB0YWdUeXBlczogVGFnVHlwZXMsIHByYWN0aWNlRGF0YT86IFN0dWR5UHJhY3RpY2VEYXRhLCByZWxheURhdGE/OiBSZWxheURhdGEpOiBTdHVkeUN0cmwge1xuXG4gIGNvbnN0IHNlbmQgPSBjdHJsLnNvY2tldC5zZW5kO1xuICBjb25zdCByZWRyYXcgPSBjdHJsLnJlZHJhdztcblxuICBjb25zdCB2bTogU3R1ZHlWbSA9ICgoKSA9PiB7XG4gICAgY29uc3QgaXNNYW51YWxDaGFwdGVyID0gZGF0YS5jaGFwdGVyLmlkICE9PSBkYXRhLnBvc2l0aW9uLmNoYXB0ZXJJZDtcbiAgICBjb25zdCBzdGlja2VkID0gZGF0YS5mZWF0dXJlcy5zdGlja3kgJiYgIWN0cmwuaW5pdGlhbFBhdGggJiYgIWlzTWFudWFsQ2hhcHRlciAmJiAhcHJhY3RpY2VEYXRhO1xuICAgIHJldHVybiB7XG4gICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIHRhYjogcHJvcDxUYWI+KHJlbGF5RGF0YSB8fCBkYXRhLmNoYXB0ZXJzLmxlbmd0aCA+IDEgPyAnY2hhcHRlcnMnIDogJ21lbWJlcnMnKSxcbiAgICAgIHRvb2xUYWI6IHByb3A8VG9vbFRhYj4oJ3RhZ3MnKSxcbiAgICAgIGNoYXB0ZXJJZDogc3RpY2tlZCA/IGRhdGEucG9zaXRpb24uY2hhcHRlcklkIDogZGF0YS5jaGFwdGVyLmlkLFxuICAgICAgLy8gcGF0aCBpcyBhdCBjdHJsLnBhdGhcbiAgICAgIG1vZGU6IHtcbiAgICAgICAgc3RpY2t5OiBzdGlja2VkLFxuICAgICAgICB3cml0ZTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIC8vIGhvdyBtYW55IGV2ZW50cyBtaXNzZWQgYmVjYXVzZSBzeW5jPW9mZlxuICAgICAgYmVoaW5kOiAwLFxuICAgICAgLy8gaG93IHN0YWxlIGlzIHRoZSBzdHVkeVxuICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpIC0gZGF0YS5zZWNvbmRzU2luY2VVcGRhdGUgKiAxMDAwLFxuICAgICAgZ2FtZWJvb2tPdmVycmlkZTogdW5kZWZpbmVkXG4gICAgfTtcbiAgfSkoKTtcblxuICBjb25zdCBub3RpZiA9IG5vdGlmQ3RybChyZWRyYXcpO1xuXG4gIGZ1bmN0aW9uIHN0YXJ0VG91cigpIHtcbiAgICB0b3Vycy5zdHVkeShjdHJsKTtcbiAgfTtcblxuICBjb25zdCBtZW1iZXJzID0gbWVtYmVyQ3RybCh7XG4gICAgaW5pdERpY3Q6IGRhdGEubWVtYmVycyxcbiAgICBteUlkOiBwcmFjdGljZURhdGEgPyBudWxsIDogY3RybC5vcHRzLnVzZXJJZCxcbiAgICBvd25lcklkOiBkYXRhLm93bmVySWQsXG4gICAgc2VuZCxcbiAgICB0YWI6IHZtLnRhYixcbiAgICBzdGFydFRvdXIsXG4gICAgbm90aWYsXG4gICAgb25CZWNvbWluZ0NvbnRyaWJ1dG9yKCkge1xuICAgICAgdm0ubW9kZS53cml0ZSA9IHRydWU7XG4gICAgfSxcbiAgICByZWRyYXcsXG4gICAgdHJhbnM6IGN0cmwudHJhbnNcbiAgfSk7XG5cbiAgY29uc3QgY2hhcHRlcnMgPSBjaGFwdGVyQ3RybChcbiAgICBkYXRhLmNoYXB0ZXJzLFxuICAgIHNlbmQsXG4gICAgKCkgPT4gdm0udGFiKCdjaGFwdGVycycpLFxuICAgIGNoYXB0ZXJJZCA9PiB4aHIuY2hhcHRlckNvbmZpZyhkYXRhLmlkLCBjaGFwdGVySWQpLFxuICAgIGN0cmwpO1xuXG4gIGZ1bmN0aW9uIGN1cnJlbnRDaGFwdGVyKCk6IFN0dWR5Q2hhcHRlck1ldGEge1xuICAgIHJldHVybiBjaGFwdGVycy5nZXQodm0uY2hhcHRlcklkKSE7XG4gIH07XG4gIGZ1bmN0aW9uIGlzQ2hhcHRlck93bmVyKCkge1xuICAgIHJldHVybiBjdHJsLm9wdHMudXNlcklkID09PSBkYXRhLmNoYXB0ZXIub3duZXJJZDtcbiAgfTtcblxuICBjb25zdCBtdWx0aUJvYXJkID0gbmV3IE11bHRpQm9hcmRDdHJsKGRhdGEuaWQsIHJlZHJhdywgY3RybC50cmFucyk7XG5cbiAgY29uc3QgcmVsYXkgPSByZWxheURhdGEgPyBuZXcgUmVsYXlDdHJsKHJlbGF5RGF0YSwgc2VuZCwgcmVkcmF3LCBtZW1iZXJzLCBkYXRhLmNoYXB0ZXIpIDogdW5kZWZpbmVkO1xuXG4gIGNvbnN0IGZvcm06IFN0dWR5Rm9ybUN0cmwgPSBzdHVkeUZvcm1DdHJsKChkLCBpc05ldykgPT4ge1xuICAgIHNlbmQoXCJlZGl0U3R1ZHlcIiwgZCk7XG4gICAgaWYgKGlzTmV3ICYmIGRhdGEuY2hhcHRlci5zZXR1cC52YXJpYW50LmtleSA9PT0gJ3N0YW5kYXJkJyAmJiBjdHJsLm1haW5saW5lLmxlbmd0aCA9PT0gMSAmJiAhZGF0YS5jaGFwdGVyLnNldHVwLmZyb21GZW4gJiYgIXJlbGF5KVxuICAgICAgY2hhcHRlcnMubmV3Rm9ybS5vcGVuSW5pdGlhbCgpO1xuICB9LCAoKSA9PiBkYXRhLCBjdHJsLnRyYW5zLCByZWRyYXcsIHJlbGF5KTtcblxuICBmdW5jdGlvbiBpc1dyaXRpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHZtLm1vZGUud3JpdGUgJiYgIWlzR2FtZWJvb2tQbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlKHQ6IHN0cmluZywgZDogYW55KTogYm9vbGVhbiB7XG4gICAgaWYgKGlzV3JpdGluZygpKSB7XG4gICAgICBzZW5kKHQsIGQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2bS5tb2RlLnN0aWNreSA9IGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGNvbW1lbnRGb3JtOiBDb21tZW50Rm9ybSA9IGNvbW1lbnRGb3JtQ3RybChjdHJsKTtcbiAgY29uc3QgZ2x5cGhGb3JtOiBHbHlwaEN0cmwgPSBnbHlwaEZvcm1DdHJsKGN0cmwpO1xuICBjb25zdCB0YWdzID0gdGFnc0N0cmwoY3RybCwgKCkgPT4gZGF0YS5jaGFwdGVyLCB0YWdUeXBlcyk7XG4gIGNvbnN0IHN0dWR5RGVzYyA9IG5ldyBEZXNjcmlwdGlvbkN0cmwoZGF0YS5kZXNjcmlwdGlvbiwgdCA9PiB7XG4gICAgZGF0YS5kZXNjcmlwdGlvbiA9IHQ7XG4gICAgc2VuZChcImRlc2NTdHVkeVwiLCB0KTtcbiAgfSwgcmVkcmF3KTtcbiAgY29uc3QgY2hhcHRlckRlc2MgPSBuZXcgRGVzY3JpcHRpb25DdHJsKGRhdGEuY2hhcHRlci5kZXNjcmlwdGlvbiwgdCA9PiB7XG4gICAgZGF0YS5jaGFwdGVyLmRlc2NyaXB0aW9uID0gdDtcbiAgICBzZW5kKFwiZGVzY0NoYXB0ZXJcIiwgeyBpZDogdm0uY2hhcHRlcklkLCBkZXNjOiB0IH0pO1xuICB9LCByZWRyYXcpO1xuXG4gIGNvbnN0IHNlcnZlckV2YWwgPSBzZXJ2ZXJFdmFsQ3RybChjdHJsLCAoKSA9PiB2bS5jaGFwdGVySWQpO1xuXG4gIGZ1bmN0aW9uIGFkZENoYXB0ZXJJZChyZXEpIHtcbiAgICByZXEuY2ggPSB2bS5jaGFwdGVySWQ7XG4gICAgcmV0dXJuIHJlcTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzR2FtZWJvb2tQbGF5KCkge1xuICAgIHJldHVybiBkYXRhLmNoYXB0ZXIuZ2FtZWJvb2sgJiYgdm0uZ2FtZWJvb2tPdmVycmlkZSAhPT0gJ2FuYWx5c2UnICYmXG4gICAgICAodm0uZ2FtZWJvb2tPdmVycmlkZSA9PT0gJ3BsYXknIHx8ICFtZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKSk7XG4gIH1cblxuICBpZiAodm0ubW9kZS5zdGlja3kgJiYgIWlzR2FtZWJvb2tQbGF5KCkpIGN0cmwudXNlckp1bXAoZGF0YS5wb3NpdGlvbi5wYXRoKTtcbiAgZWxzZSBpZiAoZGF0YS5jaGFwdGVyLnJlbGF5ICYmICFjdHJsLmluaXRpYWxQYXRoKSBjdHJsLnVzZXJKdW1wKGRhdGEuY2hhcHRlci5yZWxheS5wYXRoKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmVBbmFseXNpcygpIHtcbiAgICBpZiAoY3RybC5lbWJlZCkgcmV0dXJuO1xuICAgIGNvbnN0IGNhbkNvbnRyaWJ1dGUgPSBtZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKTtcbiAgICAvLyB1bndyaXRlIGlmIG1lbWJlciBsb3N0IHByaXZpbGVnZXNcbiAgICB2bS5tb2RlLndyaXRlID0gdm0ubW9kZS53cml0ZSAmJiBjYW5Db250cmlidXRlO1xuICAgIGxpLnB1YnN1Yi5lbWl0KCdjaGF0LndyaXRlYWJsZScsIGRhdGEuZmVhdHVyZXMuY2hhdCk7XG4gICAgbGkucHVic3ViLmVtaXQoJ2NoYXQucGVybWlzc2lvbnMnLCB7bG9jYWw6IGNhbkNvbnRyaWJ1dGV9KTtcbiAgICBsaS5wdWJzdWIuZW1pdCgncGFsYW50aXIudG9nZ2xlJywgZGF0YS5mZWF0dXJlcy5jaGF0ICYmICEhbWVtYmVycy5teU1lbWJlcigpKTtcbiAgICBjb25zdCBjb21wdXRlcjogYm9vbGVhbiA9ICFpc0dhbWVib29rUGxheSgpICYmICEhKGRhdGEuY2hhcHRlci5mZWF0dXJlcy5jb21wdXRlciB8fCBkYXRhLmNoYXB0ZXIucHJhY3RpY2UpO1xuICAgIGlmICghY29tcHV0ZXIpIGN0cmwuZ2V0Q2V2YWwoKS5lbmFibGVkKGZhbHNlKTtcbiAgICBjdHJsLmdldENldmFsKCkuYWxsb3dlZChjb21wdXRlcik7XG4gICAgaWYgKCFkYXRhLmNoYXB0ZXIuZmVhdHVyZXMuZXhwbG9yZXIpIGN0cmwuZXhwbG9yZXIuZGlzYWJsZSgpO1xuICAgIGN0cmwuZXhwbG9yZXIuYWxsb3dlZChkYXRhLmNoYXB0ZXIuZmVhdHVyZXMuZXhwbG9yZXIpO1xuICB9O1xuICBjb25maWd1cmVBbmFseXNpcygpO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZVByYWN0aWNlKCkge1xuICAgIGlmICghZGF0YS5jaGFwdGVyLnByYWN0aWNlICYmIGN0cmwucHJhY3RpY2UpIGN0cmwudG9nZ2xlUHJhY3RpY2UoKTtcbiAgICBpZiAoZGF0YS5jaGFwdGVyLnByYWN0aWNlKSBjdHJsLnJlc3RhcnRQcmFjdGljZSgpO1xuICAgIGlmIChwcmFjdGljZSkgcHJhY3RpY2Uub25Mb2FkKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gb25SZWxvYWQoZDogUmVsb2FkRGF0YSkge1xuICAgIGNvbnN0IHMgPSBkLnN0dWR5ITtcbiAgICBjb25zdCBwcmV2UGF0aCA9IGN0cmwucGF0aDtcbiAgICBjb25zdCBzYW1lQ2hhcHRlciA9IGRhdGEuY2hhcHRlci5pZCA9PT0gcy5jaGFwdGVyLmlkO1xuICAgIHZtLm1vZGUuc3RpY2t5ID0gKHZtLm1vZGUuc3RpY2t5ICYmIHMuZmVhdHVyZXMuc3RpY2t5KSB8fCAoIWRhdGEuZmVhdHVyZXMuc3RpY2t5ICYmIHMuZmVhdHVyZXMuc3RpY2t5KTtcbiAgICBpZiAodm0ubW9kZS5zdGlja3kpIHZtLmJlaGluZCA9IDA7XG4gICAgJ3Bvc2l0aW9uIG5hbWUgdmlzaWJpbGl0eSBmZWF0dXJlcyBzZXR0aW5ncyBjaGFwdGVyIGxpa2VzIGxpa2VkIGRlc2NyaXB0aW9uJy5zcGxpdCgnICcpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGRhdGFba2V5XSA9IHNba2V5XTtcbiAgICB9KTtcbiAgICBjaGFwdGVyRGVzYy5zZXQoZGF0YS5jaGFwdGVyLmRlc2NyaXB0aW9uKTtcbiAgICBzdHVkeURlc2Muc2V0KGRhdGEuZGVzY3JpcHRpb24pO1xuICAgIGRvY3VtZW50LnRpdGxlID0gZGF0YS5uYW1lO1xuICAgIG1lbWJlcnMuZGljdChzLm1lbWJlcnMpO1xuICAgIGNoYXB0ZXJzLmxpc3Qocy5jaGFwdGVycyk7XG4gICAgY3RybC5mbGlwcGVkID0gZmFsc2U7XG5cbiAgICBjb25zdCBtZXJnZSA9ICF2bS5tb2RlLndyaXRlICYmIHNhbWVDaGFwdGVyO1xuICAgIGN0cmwucmVsb2FkRGF0YShkLmFuYWx5c2lzLCBtZXJnZSk7XG4gICAgdm0uZ2FtZWJvb2tPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICBjb25maWd1cmVBbmFseXNpcygpO1xuICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcblxuICAgIGluc3RhbmNpYXRlR2FtZWJvb2tQbGF5KCk7XG4gICAgaWYgKHJlbGF5KSByZWxheS5hcHBseUNoYXB0ZXJSZWxheShkYXRhLmNoYXB0ZXIsIHMuY2hhcHRlci5yZWxheSk7XG5cbiAgICBsZXQgbmV4dFBhdGg6IFRyZWUuUGF0aDtcblxuICAgIGlmICh2bS5tb2RlLnN0aWNreSkge1xuICAgICAgdm0uY2hhcHRlcklkID0gZGF0YS5wb3NpdGlvbi5jaGFwdGVySWQ7XG4gICAgICBuZXh0UGF0aCA9IChcbiAgICAgICAgKHZtLmp1c3RTZXRDaGFwdGVySWQgPT09IHZtLmNoYXB0ZXJJZCkgJiYgY2hhcHRlcnMubG9jYWxQYXRoc1t2bS5jaGFwdGVySWRdXG4gICAgICApIHx8IGRhdGEucG9zaXRpb24ucGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFBhdGggPSBzYW1lQ2hhcHRlciA/IHByZXZQYXRoIDogKFxuICAgICAgICBkYXRhLmNoYXB0ZXIucmVsYXkgPyBkYXRhLmNoYXB0ZXIucmVsYXkhLnBhdGggOiAoY2hhcHRlcnMubG9jYWxQYXRoc1t2bS5jaGFwdGVySWRdIHx8IHRyZWVQYXRoLnJvb3QpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHBhdGggY291bGQgYmUgZ29uZSAoYmVjYXVzZSBvZiBzdWJ0cmVlIGRlbGV0aW9uKSwgZ28gYXMgZmFyIGFzIHBvc3NpYmxlXG4gICAgY3RybC51c2VySnVtcChjdHJsLnRyZWUubG9uZ2VzdFZhbGlkUGF0aChuZXh0UGF0aCkpO1xuXG4gICAgdm0uanVzdFNldENoYXB0ZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIGNvbmZpZ3VyZVByYWN0aWNlKCk7XG4gICAgc2VydmVyRXZhbC5yZXNldCgpO1xuICAgIGNvbW1lbnRGb3JtLm9uU2V0UGF0aChkYXRhLmNoYXB0ZXIuaWQsIGN0cmwucGF0aCwgY3RybC5ub2RlLCBmYWxzZSk7XG5cbiAgICByZWRyYXcoKTtcbiAgICBjdHJsLnN0YXJ0Q2V2YWwoKTtcbiAgfTtcblxuICBjb25zdCB4aHJSZWxvYWQgPSB0aHJvdHRsZSg3MDAsICgpID0+IHtcbiAgICB2bS5sb2FkaW5nID0gdHJ1ZTtcbiAgICByZXR1cm4geGhyLnJlbG9hZChcbiAgICAgIHByYWN0aWNlID8gJ3ByYWN0aWNlL2xvYWQnIDogJ3N0dWR5JyxcbiAgICAgIGRhdGEuaWQsXG4gICAgICB2bS5tb2RlLnN0aWNreSA/IHVuZGVmaW5lZCA6IHZtLmNoYXB0ZXJJZFxuICAgICkudGhlbihvblJlbG9hZCwgbGkucmVsb2FkKTtcbiAgfSk7XG5cbiAgY29uc3Qgb25TZXRQYXRoID0gdGhyb3R0bGUoMzAwLCAocGF0aDogVHJlZS5QYXRoKSA9PiB7XG4gICAgaWYgKHZtLm1vZGUuc3RpY2t5ICYmIHBhdGggIT09IGRhdGEucG9zaXRpb24ucGF0aCkgbWFrZUNoYW5nZShcInNldFBhdGhcIiwgYWRkQ2hhcHRlcklkKHtcbiAgICAgIHBhdGhcbiAgICB9KSk7XG4gIH0pO1xuXG4gIGlmIChtZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKSkgZm9ybS5vcGVuSWZOZXcoKTtcblxuICBmdW5jdGlvbiBjdXJyZW50Tm9kZSgpIHtcbiAgICByZXR1cm4gY3RybC5ub2RlO1xuICB9O1xuXG4gIGNvbnN0IHNoYXJlID0gc2hhcmVDdHJsKGRhdGEsIGN1cnJlbnRDaGFwdGVyLCBjdXJyZW50Tm9kZSwgcmVkcmF3LCBjdHJsLnRyYW5zKTtcblxuICBjb25zdCBwcmFjdGljZTogU3R1ZHlQcmFjdGljZUN0cmwgfCB1bmRlZmluZWQgPSBwcmFjdGljZURhdGEgJiYgcHJhY3RpY2VDdHJsKGN0cmwsIGRhdGEsIHByYWN0aWNlRGF0YSk7XG5cbiAgbGV0IGdhbWVib29rUGxheTogR2FtZWJvb2tQbGF5Q3RybCB8IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBpbnN0YW5jaWF0ZUdhbWVib29rUGxheSgpIHtcbiAgICBpZiAoIWlzR2FtZWJvb2tQbGF5KCkpIHJldHVybiBnYW1lYm9va1BsYXkgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGdhbWVib29rUGxheSAmJiBnYW1lYm9va1BsYXkuY2hhcHRlcklkID09PSB2bS5jaGFwdGVySWQpIHJldHVybjtcbiAgICBnYW1lYm9va1BsYXkgPSBuZXcgR2FtZWJvb2tQbGF5Q3RybChjdHJsLCB2bS5jaGFwdGVySWQsIGN0cmwudHJhbnMsIHJlZHJhdyk7XG4gICAgdm0ubW9kZS5zdGlja3kgPSBmYWxzZTtcbiAgfVxuICBpbnN0YW5jaWF0ZUdhbWVib29rUGxheSgpO1xuXG4gIGZ1bmN0aW9uIG11dGF0ZUNnQ29uZmlnKGNvbmZpZykge1xuICAgIGNvbmZpZy5kcmF3YWJsZS5vbkNoYW5nZSA9IHNoYXBlcyA9PiB7XG4gICAgICBpZiAodm0ubW9kZS53cml0ZSkge1xuICAgICAgICBjdHJsLnRyZWUuc2V0U2hhcGVzKHNoYXBlcywgY3RybC5wYXRoKTtcbiAgICAgICAgbWFrZUNoYW5nZShcInNoYXBlc1wiLCBhZGRDaGFwdGVySWQoe1xuICAgICAgICAgIHBhdGg6IGN0cmwucGF0aCxcbiAgICAgICAgICBzaGFwZXNcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgZ2FtZWJvb2tQbGF5ICYmIGdhbWVib29rUGxheS5vblNoYXBlQ2hhbmdlKHNoYXBlcyk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyb25nQ2hhcHRlcihzZXJ2ZXJEYXRhKSB7XG4gICAgaWYgKHNlcnZlckRhdGEucC5jaGFwdGVySWQgIT09IHZtLmNoYXB0ZXJJZCkge1xuICAgICAgLy8gc3RpY2t5IHNob3VsZCByZWFsbHkgYmUgb24gdGhlIHNhbWUgY2hhcHRlclxuICAgICAgaWYgKHZtLm1vZGUuc3RpY2t5ICYmIHNlcnZlckRhdGEuc3RpY2t5KSB4aHJSZWxvYWQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldE1lbWJlckFjdGl2ZSh3aG8/OiB7dTogc3RyaW5nfSkge1xuICAgIHdobyAmJiBtZW1iZXJzLnNldEFjdGl2ZSh3aG8udSk7XG4gICAgdm0udXBkYXRlZEF0ID0gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdpdGhQb3NpdGlvbihvYmo6IGFueSkge1xuICAgIG9iai5jaCA9IHZtLmNoYXB0ZXJJZDtcbiAgICBvYmoucGF0aCA9IGN0cmwucGF0aDtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgY29uc3QgbGlrZVRvZ2dsZXIgPSBsaS5kZWJvdW5jZSgoKSA9PiBzZW5kKFwibGlrZVwiLCB7IGxpa2VkOiBkYXRhLmxpa2VkIH0pLCAxMDAwKTtcblxuICBjb25zdCBzb2NrZXRIYW5kbGVycyA9IHtcbiAgICBwYXRoKGQpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZC5wLFxuICAgICAgICB3aG8gPSBkLnc7XG4gICAgICBzZXRNZW1iZXJBY3RpdmUod2hvKTtcbiAgICAgIGlmICghdm0ubW9kZS5zdGlja3kpIHtcbiAgICAgICAgdm0uYmVoaW5kKys7XG4gICAgICAgIHJldHVybiByZWRyYXcoKTtcbiAgICAgIH1cbiAgICAgIGlmIChwb3NpdGlvbi5jaGFwdGVySWQgIT09IGRhdGEucG9zaXRpb24uY2hhcHRlcklkIHx8XG4gICAgICAgICFjdHJsLnRyZWUucGF0aEV4aXN0cyhwb3NpdGlvbi5wYXRoKSkge1xuICAgICAgICByZXR1cm4geGhyUmVsb2FkKCk7XG4gICAgICB9XG4gICAgICBkYXRhLnBvc2l0aW9uLnBhdGggPSBwb3NpdGlvbi5wYXRoO1xuICAgICAgaWYgKHdobyAmJiB3aG8ucyA9PT0gbGkuc3JpKSByZXR1cm47XG4gICAgICBjdHJsLnVzZXJKdW1wKHBvc2l0aW9uLnBhdGgpO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSxcbiAgICBhZGROb2RlKGQpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZC5wLFxuICAgICAgICBub2RlID0gZC5uLFxuICAgICAgICB3aG8gPSBkLncsXG4gICAgICAgIHN0aWNreSA9IGQucztcbiAgICAgIHNldE1lbWJlckFjdGl2ZSh3aG8pO1xuICAgICAgaWYgKHZtLnRvb2xUYWIoKSA9PSAnbXVsdGlCb2FyZCcgfHwgcmVsYXkgJiYgcmVsYXkuaW50cm8uYWN0aXZlKSBtdWx0aUJvYXJkLmFkZE5vZGUoZC5wLCBkLm4pO1xuICAgICAgaWYgKHN0aWNreSAmJiAhdm0ubW9kZS5zdGlja3kpIHZtLmJlaGluZCsrO1xuICAgICAgaWYgKHdyb25nQ2hhcHRlcihkKSkge1xuICAgICAgICBpZiAoc3RpY2t5ICYmICF2bS5tb2RlLnN0aWNreSkgcmVkcmF3KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzdGlja3kgJiYgd2hvICYmIHdoby5zID09PSBsaS5zcmkpIHtcbiAgICAgICAgZGF0YS5wb3NpdGlvbi5wYXRoID0gcG9zaXRpb24ucGF0aCArIG5vZGUuaWQ7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChyZWxheSkgcmVsYXkuYXBwbHlDaGFwdGVyUmVsYXkoZGF0YS5jaGFwdGVyLCBkLnJlbGF5KTtcbiAgICAgIGNvbnN0IG5ld1BhdGggPSBjdHJsLnRyZWUuYWRkTm9kZShub2RlLCBwb3NpdGlvbi5wYXRoKTtcbiAgICAgIGlmICghbmV3UGF0aCkgcmV0dXJuIHhoclJlbG9hZCgpO1xuICAgICAgY3RybC50cmVlLmFkZERlc3RzKGQuZCwgbmV3UGF0aCwgZC5vKTtcbiAgICAgIGlmIChzdGlja3kpIGRhdGEucG9zaXRpb24ucGF0aCA9IG5ld1BhdGg7XG4gICAgICBpZiAoKHN0aWNreSAmJiB2bS5tb2RlLnN0aWNreSkgfHwgKFxuICAgICAgICBwb3NpdGlvbi5wYXRoID09PSBjdHJsLnBhdGggJiZcbiAgICAgICAgcG9zaXRpb24ucGF0aCA9PT0gdHJlZVBhdGguZnJvbU5vZGVMaXN0KGN0cmwubWFpbmxpbmUpXG4gICAgICApKSBjdHJsLmp1bXAobmV3UGF0aCk7XG4gICAgICByZWRyYXcoKTtcbiAgICB9LFxuICAgIGRlbGV0ZU5vZGUoZCkge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBkLnAsXG4gICAgICAgIHdobyA9IGQudztcbiAgICAgIHNldE1lbWJlckFjdGl2ZSh3aG8pO1xuICAgICAgaWYgKHdyb25nQ2hhcHRlcihkKSkgcmV0dXJuO1xuICAgICAgLy8gZGVsZXRlciBhbHJlYWR5IGhhcyBpdCBkb25lXG4gICAgICBpZiAod2hvICYmIHdoby5zID09PSBsaS5zcmkpIHJldHVybjtcbiAgICAgIGlmICghY3RybC50cmVlLnBhdGhFeGlzdHMoZC5wLnBhdGgpKSByZXR1cm4geGhyUmVsb2FkKCk7XG4gICAgICBjdHJsLnRyZWUuZGVsZXRlTm9kZUF0KHBvc2l0aW9uLnBhdGgpO1xuICAgICAgaWYgKHZtLm1vZGUuc3RpY2t5KSBjdHJsLmp1bXAoY3RybC5wYXRoKTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgcHJvbW90ZShkKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGQucCxcbiAgICAgICAgd2hvID0gZC53O1xuICAgICAgc2V0TWVtYmVyQWN0aXZlKHdobyk7XG4gICAgICBpZiAod3JvbmdDaGFwdGVyKGQpKSByZXR1cm47XG4gICAgICBpZiAod2hvICYmIHdoby5zID09PSBsaS5zcmkpIHJldHVybjtcbiAgICAgIGlmICghY3RybC50cmVlLnBhdGhFeGlzdHMoZC5wLnBhdGgpKSByZXR1cm4geGhyUmVsb2FkKCk7XG4gICAgICBjdHJsLnRyZWUucHJvbW90ZUF0KHBvc2l0aW9uLnBhdGgsIGQudG9NYWlubGluZSk7XG4gICAgICBpZiAodm0ubW9kZS5zdGlja3kpIGN0cmwuanVtcChjdHJsLnBhdGgpO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSxcbiAgICByZWxvYWQ6IHhoclJlbG9hZCxcbiAgICBjaGFuZ2VDaGFwdGVyKGQpIHtcbiAgICAgIHNldE1lbWJlckFjdGl2ZShkLncpO1xuICAgICAgaWYgKCF2bS5tb2RlLnN0aWNreSkgdm0uYmVoaW5kKys7XG4gICAgICBkYXRhLnBvc2l0aW9uID0gZC5wO1xuICAgICAgaWYgKHZtLm1vZGUuc3RpY2t5KSB4aHJSZWxvYWQoKTtcbiAgICAgIGVsc2UgcmVkcmF3KCk7XG4gICAgfSxcbiAgICB1cGRhdGVDaGFwdGVyKGQpIHtcbiAgICAgIHNldE1lbWJlckFjdGl2ZShkLncpO1xuICAgICAgeGhyUmVsb2FkKCk7XG4gICAgfSxcbiAgICBkZXNjQ2hhcHRlcihkKSB7XG4gICAgICBzZXRNZW1iZXJBY3RpdmUoZC53KTtcbiAgICAgIGlmIChkLncgJiYgZC53LnMgPT09IGxpLnNyaSkgcmV0dXJuO1xuICAgICAgaWYgKGRhdGEuY2hhcHRlci5pZCA9PT0gZC5jaGFwdGVySWQpIHtcbiAgICAgICAgZGF0YS5jaGFwdGVyLmRlc2NyaXB0aW9uID0gZC5kZXNjO1xuICAgICAgICBjaGFwdGVyRGVzYy5zZXQoZC5kZXNjKTtcbiAgICAgIH1cbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgZGVzY1N0dWR5KGQpIHtcbiAgICAgIHNldE1lbWJlckFjdGl2ZShkLncpO1xuICAgICAgaWYgKGQudyAmJiBkLncucyA9PT0gbGkuc3JpKSByZXR1cm47XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uID0gZC5kZXNjO1xuICAgICAgc3R1ZHlEZXNjLnNldChkLmRlc2MpO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSxcbiAgICBhZGRDaGFwdGVyKGQpIHtcbiAgICAgIHNldE1lbWJlckFjdGl2ZShkLncpO1xuICAgICAgaWYgKGQucyAmJiAhdm0ubW9kZS5zdGlja3kpIHZtLmJlaGluZCsrO1xuICAgICAgaWYgKGQucykgZGF0YS5wb3NpdGlvbiA9IGQucDtcbiAgICAgIGVsc2UgaWYgKGQudyAmJiBkLncucyA9PT0gbGkuc3JpKSB7XG4gICAgICAgIHZtLm1vZGUud3JpdGUgPSB0cnVlO1xuICAgICAgICB2bS5jaGFwdGVySWQgPSBkLnAuY2hhcHRlcklkO1xuICAgICAgfVxuICAgICAgeGhyUmVsb2FkKCk7XG4gICAgfSxcbiAgICBtZW1iZXJzKGQpIHtcbiAgICAgIG1lbWJlcnMudXBkYXRlKGQpO1xuICAgICAgY29uZmlndXJlQW5hbHlzaXMoKTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgY2hhcHRlcnMoZCkge1xuICAgICAgY2hhcHRlcnMubGlzdChkKTtcbiAgICAgIGlmICghY3VycmVudENoYXB0ZXIoKSkge1xuICAgICAgICB2bS5jaGFwdGVySWQgPSBkWzBdLmlkO1xuICAgICAgICBpZiAoIXZtLm1vZGUuc3RpY2t5KSB4aHJSZWxvYWQoKTtcbiAgICAgIH1cbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgc2hhcGVzKGQpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZC5wLFxuICAgICAgICB3aG8gPSBkLnc7XG4gICAgICBzZXRNZW1iZXJBY3RpdmUod2hvKTtcbiAgICAgIGlmICh3cm9uZ0NoYXB0ZXIoZCkpIHJldHVybjtcbiAgICAgIGlmICh3aG8gJiYgd2hvLnMgPT09IGxpLnNyaSkgcmV0dXJuO1xuICAgICAgY3RybC50cmVlLnNldFNoYXBlcyhkLnMsIGN0cmwucGF0aCk7XG4gICAgICBpZiAoY3RybC5wYXRoID09PSBwb3NpdGlvbi5wYXRoKSBjdHJsLndpdGhDZyhjZyA9PiBjZy5zZXRTaGFwZXMoZC5zKSk7XG4gICAgICByZWRyYXcoKTtcbiAgICB9LFxuICAgIHZhbGlkYXRpb25FcnJvcihkKSB7XG4gICAgICBhbGVydChkLmVycm9yKTtcbiAgICB9LFxuICAgIHNldENvbW1lbnQoZCkge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBkLnAsXG4gICAgICAgIHdobyA9IGQudztcbiAgICAgIHNldE1lbWJlckFjdGl2ZSh3aG8pO1xuICAgICAgaWYgKHdyb25nQ2hhcHRlcihkKSkgcmV0dXJuO1xuICAgICAgY3RybC50cmVlLnNldENvbW1lbnRBdChkLmMsIHBvc2l0aW9uLnBhdGgpO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSxcbiAgICBzZXRUYWdzKGQpIHtcbiAgICAgIHNldE1lbWJlckFjdGl2ZShkLncpO1xuICAgICAgaWYgKGQuY2hhcHRlcklkICE9PSB2bS5jaGFwdGVySWQpIHJldHVybjtcbiAgICAgIGRhdGEuY2hhcHRlci50YWdzID0gZC50YWdzO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSxcbiAgICBkZWxldGVDb21tZW50KGQpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZC5wLFxuICAgICAgICB3aG8gPSBkLnc7XG4gICAgICBzZXRNZW1iZXJBY3RpdmUod2hvKTtcbiAgICAgIGlmICh3cm9uZ0NoYXB0ZXIoZCkpIHJldHVybjtcbiAgICAgIGN0cmwudHJlZS5kZWxldGVDb21tZW50QXQoZC5pZCwgcG9zaXRpb24ucGF0aCk7XG4gICAgICByZWRyYXcoKTtcbiAgICB9LFxuICAgIGdseXBocyhkKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGQucCxcbiAgICAgICAgd2hvID0gZC53O1xuICAgICAgc2V0TWVtYmVyQWN0aXZlKHdobyk7XG4gICAgICBpZiAod3JvbmdDaGFwdGVyKGQpKSByZXR1cm47XG4gICAgICBjdHJsLnRyZWUuc2V0R2x5cGhzQXQoZC5nLCBwb3NpdGlvbi5wYXRoKTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgY2xvY2soZCkge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBkLnAsXG4gICAgICAgIHdobyA9IGQudztcbiAgICAgIHNldE1lbWJlckFjdGl2ZSh3aG8pO1xuICAgICAgaWYgKHdyb25nQ2hhcHRlcihkKSkgcmV0dXJuO1xuICAgICAgY3RybC50cmVlLnNldENsb2NrQXQoZC5jLCBwb3NpdGlvbi5wYXRoKTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgZm9yY2VWYXJpYXRpb24oZCkge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBkLnAsXG4gICAgICAgIHdobyA9IGQudztcbiAgICAgIHNldE1lbWJlckFjdGl2ZSh3aG8pO1xuICAgICAgaWYgKHdyb25nQ2hhcHRlcihkKSkgcmV0dXJuO1xuICAgICAgY3RybC50cmVlLmZvcmNlVmFyaWF0aW9uQXQocG9zaXRpb24ucGF0aCwgZC5mb3JjZSk7XG4gICAgICByZWRyYXcoKTtcbiAgICB9LFxuICAgIGNvbmNlYWwoZCkge1xuICAgICAgaWYgKHdyb25nQ2hhcHRlcihkKSkgcmV0dXJuO1xuICAgICAgZGF0YS5jaGFwdGVyLmNvbmNlYWwgPSBkLnBseTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgbGlraW5nKGQpIHtcbiAgICAgIGRhdGEubGlrZXMgPSBkLmwubGlrZXM7XG4gICAgICBpZiAoZC53ICYmIGQudy5zID09PSBsaS5zcmkpIGRhdGEubGlrZWQgPSBkLmwubWU7XG4gICAgICByZWRyYXcoKTtcbiAgICB9LFxuICAgIGZvbGxvd2luZ19vbmxpbmVzOiBtZW1iZXJzLmludml0ZUZvcm0uc2V0Rm9sbG93aW5ncyxcbiAgICBmb2xsb3dpbmdfbGVhdmVzOiBtZW1iZXJzLmludml0ZUZvcm0uZGVsRm9sbG93aW5nLFxuICAgIGZvbGxvd2luZ19lbnRlcnM6IG1lbWJlcnMuaW52aXRlRm9ybS5hZGRGb2xsb3dpbmcsXG4gICAgY3Jvd2QoZCkge1xuICAgICAgbWVtYmVycy5zZXRTcGVjdGF0b3JzKGQudXNlcnMpO1xuICAgIH0sXG4gICAgZXJyb3IobXNnKSB7XG4gICAgICBhbGVydChtc2cpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGRhdGEsXG4gICAgZm9ybSxcbiAgICBtZW1iZXJzLFxuICAgIGNoYXB0ZXJzLFxuICAgIG5vdGlmLFxuICAgIGNvbW1lbnRGb3JtLFxuICAgIGdseXBoRm9ybSxcbiAgICBzZXJ2ZXJFdmFsLFxuICAgIHNoYXJlLFxuICAgIHRhZ3MsXG4gICAgc3R1ZHlEZXNjLFxuICAgIGNoYXB0ZXJEZXNjLFxuICAgIHZtLFxuICAgIHJlbGF5LFxuICAgIG11bHRpQm9hcmQsXG4gICAgaXNVcGRhdGVkUmVjZW50bHkoKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHZtLnVwZGF0ZWRBdCA8IDMwMCAqIDEwMDA7XG4gICAgfSxcbiAgICB0b2dnbGVMaWtlKCkge1xuICAgICAgZGF0YS5saWtlZCA9ICFkYXRhLmxpa2VkO1xuICAgICAgcmVkcmF3KCk7XG4gICAgICBsaWtlVG9nZ2xlcigpO1xuICAgIH0sXG4gICAgcG9zaXRpb24oKSB7XG4gICAgICByZXR1cm4gZGF0YS5wb3NpdGlvbjtcbiAgICB9LFxuICAgIGN1cnJlbnRDaGFwdGVyLFxuICAgIGlzQ2hhcHRlck93bmVyLFxuICAgIGNhbkp1bXBUbyhwYXRoOiBUcmVlLlBhdGgpIHtcbiAgICAgIGlmIChnYW1lYm9va1BsYXkpIHJldHVybiBnYW1lYm9va1BsYXkuY2FuSnVtcFRvKHBhdGgpO1xuICAgICAgcmV0dXJuIGRhdGEuY2hhcHRlci5jb25jZWFsID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgaXNDaGFwdGVyT3duZXIoKSB8fFxuICAgICAgICB0cmVlUGF0aC5jb250YWlucyhjdHJsLnBhdGgsIHBhdGgpIHx8IC8vIGNhbiBhbHdheXMgZ28gYmFja1xuICAgICAgICBjdHJsLnRyZWUubGFzdE1haW5saW5lTm9kZShwYXRoKS5wbHkgPD0gZGF0YS5jaGFwdGVyLmNvbmNlYWwhO1xuICAgIH0sXG4gICAgb25KdW1wKCkge1xuICAgICAgaWYgKGdhbWVib29rUGxheSkgZ2FtZWJvb2tQbGF5Lm9uSnVtcCgpO1xuICAgICAgZWxzZSBjaGFwdGVycy5sb2NhbFBhdGhzW3ZtLmNoYXB0ZXJJZF0gPSBjdHJsLnBhdGg7IC8vIGRvbid0IHJlbWVtYmVyIHBvc2l0aW9uIG9uIGdhbWVib29rXG4gICAgICBpZiAocHJhY3RpY2UpIHByYWN0aWNlLm9uSnVtcCgpO1xuICAgIH0sXG4gICAgd2l0aFBvc2l0aW9uLFxuICAgIHNldFBhdGgocGF0aCwgbm9kZSwgcGxheWVkTXlzZWxmKSB7XG4gICAgICBvblNldFBhdGgocGF0aCk7XG4gICAgICBjb21tZW50Rm9ybS5vblNldFBhdGgodm0uY2hhcHRlcklkLCBwYXRoLCBub2RlLCBwbGF5ZWRNeXNlbGYpO1xuICAgIH0sXG4gICAgZGVsZXRlTm9kZShwYXRoKSB7XG4gICAgICBtYWtlQ2hhbmdlKFwiZGVsZXRlTm9kZVwiLCBhZGRDaGFwdGVySWQoe1xuICAgICAgICBwYXRoLFxuICAgICAgICBqdW1wVG86IGN0cmwucGF0aFxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgcHJvbW90ZShwYXRoLCB0b01haW5saW5lKSB7XG4gICAgICBtYWtlQ2hhbmdlKFwicHJvbW90ZVwiLCBhZGRDaGFwdGVySWQoe1xuICAgICAgICB0b01haW5saW5lLFxuICAgICAgICBwYXRoXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBmb3JjZVZhcmlhdGlvbihwYXRoLCBmb3JjZSkge1xuICAgICAgbWFrZUNoYW5nZShcImZvcmNlVmFyaWF0aW9uXCIsIGFkZENoYXB0ZXJJZCh7XG4gICAgICAgIGZvcmNlLFxuICAgICAgICBwYXRoXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBzZXRDaGFwdGVyKGlkLCBmb3JjZSkge1xuICAgICAgY29uc3QgYWxyZWFkeVNldCA9IGlkID09PSB2bS5jaGFwdGVySWQgJiYgIWZvcmNlO1xuICAgICAgaWYgKHJlbGF5ICYmIHJlbGF5LmludHJvLmFjdGl2ZSkge1xuICAgICAgICByZWxheS5pbnRyby5kaXNhYmxlKCk7XG4gICAgICAgIGlmIChhbHJlYWR5U2V0KSByZWRyYXcoKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbHJlYWR5U2V0KSByZXR1cm47XG4gICAgICBpZiAoIXZtLm1vZGUuc3RpY2t5IHx8ICFtYWtlQ2hhbmdlKFwic2V0Q2hhcHRlclwiLCBpZCkpIHtcbiAgICAgICAgdm0ubW9kZS5zdGlja3kgPSBmYWxzZTtcbiAgICAgICAgaWYgKCF2bS5iZWhpbmQpIHZtLmJlaGluZCA9IDE7XG4gICAgICAgIHZtLmNoYXB0ZXJJZCA9IGlkO1xuICAgICAgICB4aHJSZWxvYWQoKTtcbiAgICAgIH1cbiAgICAgIHZtLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgdm0ubmV4dENoYXB0ZXJJZCA9IGlkO1xuICAgICAgdm0uanVzdFNldENoYXB0ZXJJZCA9IGlkO1xuICAgICAgcmVkcmF3KCk7XG4gICAgfSxcbiAgICB0b2dnbGVTdGlja3koKSB7XG4gICAgICB2bS5tb2RlLnN0aWNreSA9ICF2bS5tb2RlLnN0aWNreSAmJiBkYXRhLmZlYXR1cmVzLnN0aWNreTtcbiAgICAgIHhoclJlbG9hZCgpO1xuICAgIH0sXG4gICAgdG9nZ2xlV3JpdGUoKSB7XG4gICAgICB2bS5tb2RlLndyaXRlID0gIXZtLm1vZGUud3JpdGUgJiYgbWVtYmVycy5jYW5Db250cmlidXRlKCk7XG4gICAgICB4aHJSZWxvYWQoKTtcbiAgICB9LFxuICAgIGlzV3JpdGluZyxcbiAgICBtYWtlQ2hhbmdlLFxuICAgIHN0YXJ0VG91cixcbiAgICB1c2VySnVtcDogY3RybC51c2VySnVtcCxcbiAgICBjdXJyZW50Tm9kZSxcbiAgICBwcmFjdGljZSxcbiAgICBnYW1lYm9va1BsYXk6ICgpID0+IGdhbWVib29rUGxheSxcbiAgICBuZXh0Q2hhcHRlcigpOiBTdHVkeUNoYXB0ZXJNZXRhIHwgdW5kZWZpbmVkIHtcbiAgICAgIGNvbnN0IGNoYXB0ZXJzID0gZGF0YS5jaGFwdGVycyxcbiAgICAgICAgY3VycmVudElkID0gY3VycmVudENoYXB0ZXIoKS5pZDtcbiAgICAgIGZvciAobGV0IGkgaW4gY2hhcHRlcnMpXG4gICAgICAgIGlmIChjaGFwdGVyc1tpXS5pZCA9PT0gY3VycmVudElkKSByZXR1cm4gY2hhcHRlcnNbcGFyc2VJbnQoaSkgKyAxXTtcbiAgICB9LFxuICAgIHNldEdhbWVib29rT3ZlcnJpZGUobykge1xuICAgICAgdm0uZ2FtZWJvb2tPdmVycmlkZSA9IG87XG4gICAgICBpbnN0YW5jaWF0ZUdhbWVib29rUGxheSgpO1xuICAgICAgY29uZmlndXJlQW5hbHlzaXMoKTtcbiAgICAgIGN0cmwudXNlckp1bXAoY3RybC5wYXRoKTtcbiAgICAgIGlmICghbykgeGhyUmVsb2FkKCk7XG4gICAgfSxcbiAgICBtdXRhdGVDZ0NvbmZpZyxcbiAgICBleHBsb3JlckdhbWUoZ2FtZUlkOiBzdHJpbmcsIGluc2VydDogYm9vbGVhbikge1xuICAgICAgbWFrZUNoYW5nZSgnZXhwbG9yZXJHYW1lJywgd2l0aFBvc2l0aW9uKHsgZ2FtZUlkLCBpbnNlcnQgfSkpO1xuICAgIH0sXG4gICAgb25QcmVtb3ZlU2V0KCkge1xuICAgICAgaWYgKGdhbWVib29rUGxheSkgZ2FtZWJvb2tQbGF5Lm9uUHJlbW92ZVNldCgpO1xuICAgIH0sXG4gICAgcmVkcmF3LFxuICAgIHRyYW5zOiBjdHJsLnRyYW5zLFxuICAgIHNvY2tldEhhbmRsZXI6ICh0OiBzdHJpbmcsIGQ6IGFueSkgPT4ge1xuICAgICAgY29uc3QgaGFuZGxlciA9IHNvY2tldEhhbmRsZXJzW3RdO1xuICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgaGFuZGxlcihkKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gISFyZWxheSAmJiByZWxheS5zb2NrZXRIYW5kbGVyKHQsIGQpO1xuICAgIH0sXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCAqIGFzIG1vZGFsIGZyb20gJy4uL21vZGFsJztcbmltcG9ydCB7IHByb3AsIFByb3AgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgYmluZCwgYmluZFN1Ym1pdCwgZW1wdHlSZWRCdXR0b24gfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IFN0dWR5RGF0YSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBSZWRyYXcsIE1heWJlVk5vZGVzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgUmVsYXlDdHJsIGZyb20gJy4vcmVsYXkvcmVsYXlDdHJsJztcblxuZXhwb3J0IGludGVyZmFjZSBTdHVkeUZvcm1DdHJsIHtcbiAgb3BlbjogUHJvcDxib29sZWFuPjtcbiAgb3BlbklmTmV3KCk6IHZvaWQ7XG4gIHNhdmUoZGF0YTogRm9ybURhdGEsIGlzTmV3OiBib29sZWFuKTogdm9pZDtcbiAgZ2V0RGF0YSgpOiBTdHVkeURhdGE7XG4gIGlzTmV3KCk6IGJvb2xlYW47XG4gIHRyYW5zOiBUcmFucztcbiAgcmVkcmF3OiBSZWRyYXc7XG4gIHJlbGF5PzogUmVsYXlDdHJsO1xufVxuXG5pbnRlcmZhY2UgRm9ybURhdGEge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTZWxlY3Qge1xuICBrZXk6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBjaG9pY2VzOiBDaG9pY2VbXTtcbiAgc2VsZWN0ZWQ6IHN0cmluZztcbn1cbnR5cGUgQ2hvaWNlID0gW3N0cmluZywgc3RyaW5nXTtcblxuZnVuY3Rpb24gc2VsZWN0KHM6IFNlbGVjdCk6IE1heWJlVk5vZGVzIHtcbiAgcmV0dXJuIFtcbiAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywge1xuICAgICAgYXR0cnM6IHsgZm9yOiAnc3R1ZHktJyArIHMua2V5IH1cbiAgICB9LCBzLm5hbWUpLFxuICAgIGgoYHNlbGVjdCNzdHVkeS0ke3Mua2V5fS5mb3JtLWNvbnRyb2xgLCBzLmNob2ljZXMubWFwKGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBoKCdvcHRpb24nLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgdmFsdWU6IG9bMF0sXG4gICAgICAgICAgc2VsZWN0ZWQ6IHMuc2VsZWN0ZWQgPT09IG9bMF1cbiAgICAgICAgfVxuICAgICAgfSwgb1sxXSk7XG4gICAgfSkpXG4gIF07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY3RybChzYXZlOiAoZGF0YTogRm9ybURhdGEsIGlzTmV3OiBib29sZWFuKSA9PiB2b2lkLCBnZXREYXRhOiAoKSA9PiBTdHVkeURhdGEsIHRyYW5zOiBUcmFucywgcmVkcmF3OiBSZWRyYXcsIHJlbGF5PzogUmVsYXlDdHJsKTogU3R1ZHlGb3JtQ3RybCB7XG5cbiAgY29uc3QgaW5pdEF0ID0gRGF0ZS5ub3coKTtcblxuICBmdW5jdGlvbiBpc05ldygpOiBib29sZWFuIHtcbiAgICBjb25zdCBkID0gZ2V0RGF0YSgpO1xuICAgIHJldHVybiBkLmZyb20gPT09ICdzY3JhdGNoJyAmJiAhIWQuaXNOZXcgJiYgRGF0ZS5ub3coKSAtIGluaXRBdCA8IDkwMDA7XG4gIH1cblxuICBjb25zdCBvcGVuID0gcHJvcChmYWxzZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvcGVuLFxuICAgIG9wZW5JZk5ldygpIHtcbiAgICAgIGlmIChpc05ldygpKSBvcGVuKHRydWUpO1xuICAgIH0sXG4gICAgc2F2ZShkYXRhOiBGb3JtRGF0YSwgaXNOZXc6IGJvb2xlYW4pIHtcbiAgICAgIHNhdmUoZGF0YSwgaXNOZXcpO1xuICAgICAgb3BlbihmYWxzZSk7XG4gICAgfSxcbiAgICBnZXREYXRhLFxuICAgIGlzTmV3LFxuICAgIHRyYW5zLFxuICAgIHJlZHJhdyxcbiAgICByZWxheVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBTdHVkeUZvcm1DdHJsKTogVk5vZGUge1xuICBjb25zdCBkYXRhID0gY3RybC5nZXREYXRhKCk7XG4gIGNvbnN0IGlzTmV3ID0gY3RybC5pc05ldygpO1xuICBjb25zdCB1cGRhdGVOYW1lID0gZnVuY3Rpb24odm5vZGUsIGlzVXBkYXRlKSB7XG4gICAgY29uc3QgZWwgPSB2bm9kZS5lbG0gYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBpZiAoIWlzVXBkYXRlICYmICFlbC52YWx1ZSkge1xuICAgICAgZWwudmFsdWUgPSBkYXRhLm5hbWU7XG4gICAgICBpZiAoaXNOZXcpIGVsLnNlbGVjdCgpO1xuICAgICAgZWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdXNlclNlbGVjdGlvbkNob2ljZXM6IENob2ljZVtdID0gW1xuICAgIFsnbm9ib2R5JywgY3RybC50cmFucy5ub2FyZygnbm9ib2R5JyldLFxuICAgIFsnb3duZXInLCBjdHJsLnRyYW5zLm5vYXJnKCdvbmx5TWUnKV0sXG4gICAgWydjb250cmlidXRvcicsIGN0cmwudHJhbnMubm9hcmcoJ2NvbnRyaWJ1dG9ycycpXSxcbiAgICBbJ21lbWJlcicsIGN0cmwudHJhbnMubm9hcmcoJ21lbWJlcnMnKV0sXG4gICAgWydldmVyeW9uZScsIGN0cmwudHJhbnMubm9hcmcoJ2V2ZXJ5b25lJyldXG4gIF07XG4gIHJldHVybiBtb2RhbC5tb2RhbCh7XG4gICAgY2xhc3M6ICdzdHVkeS1lZGl0JyxcbiAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIGN0cmwub3BlbihmYWxzZSk7XG4gICAgICBjdHJsLnJlZHJhdygpO1xuICAgIH0sXG4gICAgY29udGVudDogW1xuICAgICAgaCgnaDInLCBjdHJsLnRyYW5zLm5vYXJnKGN0cmwucmVsYXkgPyAnY29uZmlndXJlTGl2ZUJyb2FkY2FzdCcgOiAoaXNOZXcgPyAnY3JlYXRlU3R1ZHknIDogJ2VkaXRTdHVkeScpKSksXG4gICAgICBoKCdmb3JtLmZvcm0zJywge1xuICAgICAgICBob29rOiBiaW5kU3VibWl0KGUgPT4ge1xuICAgICAgICAgIGNvbnN0IG9iajogRm9ybURhdGEgPSB7fTtcbiAgICAgICAgICAnbmFtZSB2aXNpYmlsaXR5IGNvbXB1dGVyIGV4cGxvcmVyIGNsb25lYWJsZSBjaGF0IHN0aWNreSBkZXNjcmlwdGlvbicuc3BsaXQoJyAnKS5mb3JFYWNoKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yKCcjc3R1ZHktJyArIG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGVsKSBvYmpbbl0gPSBlbC52YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjdHJsLnNhdmUob2JqLCBpc05ldyk7XG4gICAgICAgIH0sIGN0cmwucmVkcmF3KVxuICAgICAgfSwgW1xuICAgICAgICBoKCdkaXYuZm9ybS1ncm91cCcgKyAoY3RybC5yZWxheSA/ICcubm9uZScgOiAnJyksIFtcbiAgICAgICAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywgeyBhdHRyczogeyAnZm9yJzogJ3N0dWR5LW5hbWUnIH0gfSwgY3RybC50cmFucy5ub2FyZygnbmFtZScpKSxcbiAgICAgICAgICBoKCdpbnB1dCNzdHVkeS1uYW1lLmZvcm0tY29udHJvbCcsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgIG1pbmxlbmd0aDogMyxcbiAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBob29rOiB7XG4gICAgICAgICAgICAgIGluc2VydDogdm5vZGUgPT4gdXBkYXRlTmFtZSh2bm9kZSwgZmFsc2UpLFxuICAgICAgICAgICAgICBwb3N0cGF0Y2g6IChfLCB2bm9kZSkgPT4gdXBkYXRlTmFtZSh2bm9kZSwgdHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICBdKSxcbiAgICAgICAgaCgnZGl2LmZvcm0tc3BsaXQnLCBbXG4gICAgICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAuZm9ybS1oYWxmJywgc2VsZWN0KHtcbiAgICAgICAgICAgIGtleTogJ3Zpc2liaWxpdHknLFxuICAgICAgICAgICAgbmFtZTogY3RybC50cmFucy5ub2FyZygndmlzaWJpbGl0eScpLFxuICAgICAgICAgICAgY2hvaWNlczogW1xuICAgICAgICAgICAgICBbJ3B1YmxpYycsIGN0cmwudHJhbnMubm9hcmcoJ3B1YmxpYycpXSxcbiAgICAgICAgICAgICAgWyd1bmxpc3RlZCcsIGN0cmwudHJhbnMubm9hcmcoJ3VubGlzdGVkJyldLFxuICAgICAgICAgICAgICBbJ3ByaXZhdGUnLCBjdHJsLnRyYW5zLm5vYXJnKCdpbnZpdGVPbmx5JyldXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IGRhdGEudmlzaWJpbGl0eVxuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBoKCdkaXYuZm9ybS1ncm91cC5mb3JtLWhhbGYnLCBzZWxlY3Qoe1xuICAgICAgICAgICAga2V5OiAnY2xvbmVhYmxlJyxcbiAgICAgICAgICAgIG5hbWU6IGN0cmwudHJhbnMubm9hcmcoJ2FsbG93Q2xvbmluZycpLFxuICAgICAgICAgICAgY2hvaWNlczogdXNlclNlbGVjdGlvbkNob2ljZXMsXG4gICAgICAgICAgICBzZWxlY3RlZDogZGF0YS5zZXR0aW5ncy5jbG9uZWFibGVcbiAgICAgICAgICB9KSlcbiAgICAgICAgXSksXG4gICAgICAgIGgoJ2Rpdi5mb3JtLXNwbGl0JywgW1xuICAgICAgICAgIGgoJ2Rpdi5mb3JtLWdyb3VwLmZvcm0taGFsZicsIHNlbGVjdCh7XG4gICAgICAgICAgICBrZXk6ICdjb21wdXRlcicsXG4gICAgICAgICAgICBuYW1lOiBjdHJsLnRyYW5zLm5vYXJnKCdjb21wdXRlckFuYWx5c2lzJyksXG4gICAgICAgICAgICBjaG9pY2VzOiB1c2VyU2VsZWN0aW9uQ2hvaWNlcy5tYXAoYyA9PiBbY1swXSwgY3RybC50cmFucy5ub2FyZyhjWzFdKV0pLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IGRhdGEuc2V0dGluZ3MuY29tcHV0ZXJcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAuZm9ybS1oYWxmJywgc2VsZWN0KHtcbiAgICAgICAgICAgIGtleTogJ2V4cGxvcmVyJyxcbiAgICAgICAgICAgIG5hbWU6IGN0cmwudHJhbnMubm9hcmcoJ29wZW5pbmdFeHBsb3JlcicpLFxuICAgICAgICAgICAgY2hvaWNlczogdXNlclNlbGVjdGlvbkNob2ljZXMsXG4gICAgICAgICAgICBzZWxlY3RlZDogZGF0YS5zZXR0aW5ncy5leHBsb3JlclxuICAgICAgICAgIH0pKVxuICAgICAgICBdKSxcbiAgICAgICAgaCgnZGl2LmZvcm0tc3BsaXQnLCBbXG4gICAgICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAuZm9ybS1oYWxmJywgc2VsZWN0KHtcbiAgICAgICAgICAgIGtleTogJ2NoYXQnLFxuICAgICAgICAgICAgbmFtZTogY3RybC50cmFucy5ub2FyZygnY2hhdCcpLFxuICAgICAgICAgICAgY2hvaWNlczogdXNlclNlbGVjdGlvbkNob2ljZXMsXG4gICAgICAgICAgICBzZWxlY3RlZDogZGF0YS5zZXR0aW5ncy5jaGF0XG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIGgoJ2Rpdi5mb3JtLWdyb3VwLmZvcm0taGFsZicsIHNlbGVjdCh7XG4gICAgICAgICAgICBrZXk6ICdzdGlja3knLFxuICAgICAgICAgICAgbmFtZTogY3RybC50cmFucy5ub2FyZygnZW5hYmxlU3luYycpLFxuICAgICAgICAgICAgY2hvaWNlczogW1xuICAgICAgICAgICAgICBbJ3RydWUnLCBjdHJsLnRyYW5zLm5vYXJnKCd5ZXNLZWVwRXZlcnlvbmVPblRoZVNhbWVQb3NpdGlvbicpXSxcbiAgICAgICAgICAgICAgWydmYWxzZScsIGN0cmwudHJhbnMubm9hcmcoJ25vTGV0UGVvcGxlQnJvd3NlRnJlZWx5JyldXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcnICsgZGF0YS5zZXR0aW5ncy5zdGlja3lcbiAgICAgICAgICB9KSlcbiAgICAgICAgXSksXG4gICAgICAgIGgoJ2Rpdi5mb3JtLWdyb3VwLmZvcm0taGFsZicsIHNlbGVjdCh7XG4gICAgICAgICAga2V5OiAnZGVzY3JpcHRpb24nLFxuICAgICAgICAgIG5hbWU6IGN0cmwudHJhbnMubm9hcmcoJ3Bpbm5lZFN0dWR5Q29tbWVudCcpLFxuICAgICAgICAgIGNob2ljZXM6IFtcbiAgICAgICAgICAgIFsnZmFsc2UnLCBjdHJsLnRyYW5zLm5vYXJnKCdub1Bpbm5lZENvbW1lbnQnKV0sXG4gICAgICAgICAgICBbJ3RydWUnLCBjdHJsLnRyYW5zLm5vYXJnKCdyaWdodFVuZGVyVGhlQm9hcmQnKV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHNlbGVjdGVkOiAnJyArIGRhdGEuc2V0dGluZ3MuZGVzY3JpcHRpb25cbiAgICAgICAgfSkpLFxuICAgICAgICBtb2RhbC5idXR0b24oY3RybC50cmFucy5ub2FyZyhpc05ldyA/ICdzdGFydCcgOiAnc2F2ZScpKVxuICAgICAgXSksXG4gICAgICBoKCdkaXYuZGVzdHJ1Y3RpdmUnLCBbXG4gICAgICAgIGlzTmV3ID8gbnVsbCA6IGgoJ2Zvcm0nLCB7XG4gICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGFjdGlvbjogJy9zdHVkeS8nICsgZGF0YS5pZCArICcvY2xlYXItY2hhdCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaG9vazogYmluZCgnc3VibWl0JywgXyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY29uZmlybShjdHJsLnRyYW5zLm5vYXJnKCdkZWxldGVUaGVTdHVkeUNoYXRIaXN0b3J5JykpO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0sIFtcbiAgICAgICAgICBoKGVtcHR5UmVkQnV0dG9uLCBjdHJsLnRyYW5zLm5vYXJnKCdjbGVhckNoYXQnKSlcbiAgICAgICAgXSksXG4gICAgICAgIGgoJ2Zvcm0nLCB7XG4gICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGFjdGlvbjogJy9zdHVkeS8nICsgZGF0YS5pZCArICcvZGVsZXRlJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBob29rOiBiaW5kKCdzdWJtaXQnLCBfID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpc05ldyB8fCBjb25maXJtKGN0cmwudHJhbnMubm9hcmcoJ2RlbGV0ZVRoZUVudGlyZVN0dWR5JykpO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0sIFtcbiAgICAgICAgICBoKGVtcHR5UmVkQnV0dG9uLCBjdHJsLnRyYW5zLm5vYXJnKGlzTmV3ID8gJ2NhbmNlbCcgOiAnZGVsZXRlU3R1ZHknKSlcbiAgICAgICAgXSlcbiAgICAgIF0pXG4gICAgXVxuICB9KTtcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgKiBhcyB4aHIgZnJvbSAnLi9zdHVkeVhocic7XG5pbXBvcnQgeyBwcm9wLCBQcm9wIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB0aHJvdHRsZSBmcm9tICdjb21tb24vdGhyb3R0bGUnO1xuaW1wb3J0IHsgYmluZCwgc3Bpbm5lciB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuXG5pbnRlcmZhY2UgQWxsR2x5cGhzIHtcbiAgbW92ZTogVHJlZS5HbHlwaFtdO1xuICBvYnNlcnZhdGlvbjogVHJlZS5HbHlwaFtdO1xuICBwb3NpdGlvbjogVHJlZS5HbHlwaFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdseXBoQ3RybCB7XG4gIHJvb3Q6IEFuYWx5c2VDdHJsO1xuICBhbGw6IFByb3A8QWxsR2x5cGhzPjtcbiAgbG9hZEdseXBocygpOiB2b2lkO1xuICB0b2dnbGVHbHlwaChpZDogVHJlZS5HbHlwaElkKTogdm9pZDtcbiAgcmVkcmF3KCk6IHZvaWQ7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckdseXBoKGN0cmw6IEdseXBoQ3RybCwgbm9kZTogVHJlZS5Ob2RlKSB7XG4gIHJldHVybiBmdW5jdGlvbihnbHlwaCkge1xuICAgIHJldHVybiBoKCdhJywge1xuICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IHtcbiAgICAgICAgY3RybC50b2dnbGVHbHlwaChnbHlwaC5pZCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0sIGN0cmwucmVkcmF3KSxcbiAgICAgIGF0dHJzOiB7ICdkYXRhLXN5bWJvbCc6IGdseXBoLnN5bWJvbCB9LFxuICAgICAgY2xhc3M6IHtcbiAgICAgICAgYWN0aXZlOiAhIW5vZGUuZ2x5cGhzICYmICEhbm9kZS5nbHlwaHMuZmluZChnID0+IGcuaWQgPT09IGdseXBoLmlkKVxuICAgICAgfVxuICAgIH0sIFtcbiAgICAgIGdseXBoLm5hbWVcbiAgICBdKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwocm9vdDogQW5hbHlzZUN0cmwpIHtcblxuICBjb25zdCBhbGwgPSBwcm9wPGFueSB8IG51bGw+KG51bGwpO1xuXG4gIGZ1bmN0aW9uIGxvYWRHbHlwaHMoKSB7XG4gICAgaWYgKCFhbGwoKSkgeGhyLmdseXBocygpLnRoZW4oZ3MgPT4ge1xuICAgICAgYWxsKGdzKTtcbiAgICAgIHJvb3QucmVkcmF3KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlR2x5cGggPSB0aHJvdHRsZSg1MDAsIChpZDogc3RyaW5nKSA9PiB7XG4gICAgcm9vdC5zdHVkeSEubWFrZUNoYW5nZSgndG9nZ2xlR2x5cGgnLCByb290LnN0dWR5IS53aXRoUG9zaXRpb24oe1xuICAgICAgaWRcbiAgICB9KSk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgcm9vdCxcbiAgICBhbGwsXG4gICAgbG9hZEdseXBocyxcbiAgICB0b2dnbGVHbHlwaCxcbiAgICByZWRyYXc6IHJvb3QucmVkcmF3XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3RGlzYWJsZWQod2h5OiBzdHJpbmcpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYuc3R1ZHlfX2dseXBocycsIFtcbiAgICBoKCdkaXYuc3R1ZHlfX21lc3NhZ2UnLCB3aHkpXG4gIF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBHbHlwaEN0cmwpOiBWTm9kZSB7XG5cbiAgY29uc3QgYWxsID0gY3RybC5hbGwoKSwgbm9kZSA9IGN0cmwucm9vdC5ub2RlO1xuXG4gIHJldHVybiBoKCdkaXYuc3R1ZHlfX2dseXBocycgKyAoYWxsID8gJycgOiAnLmVtcHR5JyksIHtcbiAgICBob29rOiB7IGluc2VydDogY3RybC5sb2FkR2x5cGhzIH1cbiAgfSxcbiAgICBhbGwgPyBbXG4gICAgICBoKCdkaXYubW92ZScsIGFsbC5tb3ZlLm1hcChyZW5kZXJHbHlwaChjdHJsLCBub2RlKSkpLFxuICAgICAgaCgnZGl2LnBvc2l0aW9uJywgYWxsLnBvc2l0aW9uLm1hcChyZW5kZXJHbHlwaChjdHJsLCBub2RlKSkpLFxuICAgICAgaCgnZGl2Lm9ic2VydmF0aW9uJywgYWxsLm9ic2VydmF0aW9uLm1hcChyZW5kZXJHbHlwaChjdHJsLCBub2RlKSkpXG4gICAgXSA6IFtoKCdkaXYuc3R1ZHlfX21lc3NhZ2UnLCBzcGlubmVyKCkpXVxuICApO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IHRpdGxlTmFtZVRvSWQsIGJpbmQsIGRhdGFJY29uLCBpY29uVGFnLCBvbkluc2VydCwgc2Nyb2xsVG8gfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IHByb3AsIFByb3AgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgY3RybCBhcyBpbnZpdGVGb3JtQ3RybCB9IGZyb20gJy4vaW52aXRlRm9ybSc7XG5pbXBvcnQgeyBTdHVkeUN0cmwsIFN0dWR5TWVtYmVyLCBTdHVkeU1lbWJlck1hcCwgVGFiIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IE5vdGlmQ3RybCB9IGZyb20gJy4vbm90aWYnO1xuXG5pbnRlcmZhY2UgT3B0cyB7XG4gIGluaXREaWN0OiBTdHVkeU1lbWJlck1hcDtcbiAgbXlJZDogc3RyaW5nIHwgbnVsbDtcbiAgb3duZXJJZDogc3RyaW5nO1xuICBzZW5kOiBTb2NrZXRTZW5kO1xuICB0YWI6IFByb3A8VGFiPjtcbiAgc3RhcnRUb3VyKCk6IHZvaWQ7XG4gIG5vdGlmOiBOb3RpZkN0cmw7XG4gIG9uQmVjb21pbmdDb250cmlidXRvcigpOiB2b2lkO1xuICByZWRyYXcoKTogdm9pZDtcbiAgdHJhbnM6IFRyYW5zO1xufVxuXG5mdW5jdGlvbiBtZW1iZXJBY3Rpdml0eShvbklkbGUpIHtcbiAgbGV0IHRpbWVvdXQ7XG4gIGxldCBzY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aW1lb3V0KSBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQob25JZGxlLCAxMDApO1xuICB9O1xuICBzY2hlZHVsZSgpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdHJsKG9wdHM6IE9wdHMpIHtcblxuICBjb25zdCBkaWN0ID0gcHJvcDxTdHVkeU1lbWJlck1hcD4ob3B0cy5pbml0RGljdCk7XG4gIGNvbnN0IGNvbmZpbmcgPSBwcm9wPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgbGV0IGFjdGl2ZTogeyBbaWQ6IHN0cmluZ106ICgpID0+IHZvaWQgfSA9IHt9O1xuICBsZXQgb25saW5lOiB7IFtpZDogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XG4gIGxldCBzcGVjdGF0b3JJZHM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IG1heCA9IDMwO1xuXG4gIGZ1bmN0aW9uIG93bmVyKCkge1xuICAgIHJldHVybiBkaWN0KClbb3B0cy5vd25lcklkXTtcbiAgfTtcblxuICBmdW5jdGlvbiBpc093bmVyKCkge1xuICAgIHJldHVybiBvcHRzLm15SWQgPT09IG9wdHMub3duZXJJZDtcbiAgfTtcblxuICBmdW5jdGlvbiBteU1lbWJlcigpIHtcbiAgICByZXR1cm4gb3B0cy5teUlkID8gZGljdCgpW29wdHMubXlJZF0gOiBudWxsO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNhbkNvbnRyaWJ1dGUoKSB7XG4gICAgdmFyIG0gPSBteU1lbWJlcigpO1xuICAgIHJldHVybiBtICYmIG0ucm9sZSA9PT0gJ3cnO1xuICB9O1xuXG4gIGNvbnN0IGludml0ZUZvcm0gPSBpbnZpdGVGb3JtQ3RybChvcHRzLnNlbmQsIGRpY3QsICgpID0+IG9wdHMudGFiKCdtZW1iZXJzJyksIG9wdHMucmVkcmF3LCBvcHRzLnRyYW5zKTtcblxuICBmdW5jdGlvbiBzZXRBY3RpdmUoaWQpIHtcbiAgICBpZiAob3B0cy50YWIoKSAhPT0gJ21lbWJlcnMnKSByZXR1cm47XG4gICAgaWYgKGFjdGl2ZVtpZF0pIGFjdGl2ZVtpZF0oKTtcbiAgICBlbHNlIGFjdGl2ZVtpZF0gPSBtZW1iZXJBY3Rpdml0eShmdW5jdGlvbigpIHtcbiAgICAgIGRlbGV0ZShhY3RpdmVbaWRdKTtcbiAgICAgIG9wdHMucmVkcmF3KCk7XG4gICAgfSk7XG4gICAgb3B0cy5yZWRyYXcoKTtcbiAgfTtcblxuICBmdW5jdGlvbiB1cGRhdGVPbmxpbmUoKSB7XG4gICAgb25saW5lID0ge307XG4gICAgY29uc3QgbWVtYmVyczogU3R1ZHlNZW1iZXJNYXAgPSBkaWN0KCk7XG4gICAgc3BlY3RhdG9ySWRzLmZvckVhY2goZnVuY3Rpb24oaWQpIHtcbiAgICAgIGlmIChtZW1iZXJzW2lkXSkgb25saW5lW2lkXSA9IHRydWU7XG4gICAgfSk7XG4gICAgaWYgKG9wdHMudGFiKCkgPT09ICdtZW1iZXJzJykgb3B0cy5yZWRyYXcoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGljdCxcbiAgICBjb25maW5nLFxuICAgIG15SWQ6IG9wdHMubXlJZCxcbiAgICBpbnZpdGVGb3JtLFxuICAgIHVwZGF0ZShtZW1iZXJzOiBTdHVkeU1lbWJlck1hcCkge1xuICAgICAgaWYgKGlzT3duZXIoKSkgY29uZmluZyhPYmplY3Qua2V5cyhtZW1iZXJzKS5maW5kKGZ1bmN0aW9uKHNyaSkge1xuICAgICAgICByZXR1cm4gIWRpY3QoKVtzcmldO1xuICAgICAgfSkpO1xuICAgICAgY29uc3Qgd2FzVmlld2VyID0gbXlNZW1iZXIoKSAmJiAhY2FuQ29udHJpYnV0ZSgpO1xuICAgICAgY29uc3Qgd2FzQ29udHJpYiA9IG15TWVtYmVyKCkgJiYgY2FuQ29udHJpYnV0ZSgpO1xuICAgICAgZGljdChtZW1iZXJzKTtcbiAgICAgIGlmICh3YXNWaWV3ZXIgJiYgY2FuQ29udHJpYnV0ZSgpKSB7XG4gICAgICAgIGlmICh3aW5kb3cubGljaGVzcy5vbmNlKCdzdHVkeS10b3VyJykpIG9wdHMuc3RhcnRUb3VyKCk7XG4gICAgICAgIG9wdHMub25CZWNvbWluZ0NvbnRyaWJ1dG9yKCk7XG4gICAgICAgIG9wdHMubm90aWYuc2V0KHtcbiAgICAgICAgICB0ZXh0OiBvcHRzLnRyYW5zLm5vYXJnKCd5b3VBcmVOb3dBQ29udHJpYnV0b3InKSxcbiAgICAgICAgICBkdXJhdGlvbjogMzAwMFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAod2FzQ29udHJpYiAmJiAhY2FuQ29udHJpYnV0ZSgpKSBvcHRzLm5vdGlmLnNldCh7XG4gICAgICAgIHRleHQ6IG9wdHMudHJhbnMubm9hcmcoJ3lvdUFyZU5vd0FTcGVjdGF0b3InKSxcbiAgICAgICAgZHVyYXRpb246IDMwMDBcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlT25saW5lKCk7XG4gICAgfSxcbiAgICBzZXRBY3RpdmUsXG4gICAgaXNBY3RpdmUoaWQpIHtcbiAgICAgIHJldHVybiAhIWFjdGl2ZVtpZF07XG4gICAgfSxcbiAgICBvd25lcixcbiAgICBteU1lbWJlcixcbiAgICBpc093bmVyLFxuICAgIGNhbkNvbnRyaWJ1dGUsXG4gICAgbWF4LFxuICAgIHNldFJvbGUoaWQsIHJvbGUpIHtcbiAgICAgIHNldEFjdGl2ZShpZCk7XG4gICAgICBvcHRzLnNlbmQoXCJzZXRSb2xlXCIsIHtcbiAgICAgICAgdXNlcklkOiBpZCxcbiAgICAgICAgcm9sZVxuICAgICAgfSk7XG4gICAgICBjb25maW5nKHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBraWNrKGlkKSB7XG4gICAgICBvcHRzLnNlbmQoXCJraWNrXCIsIGlkKTtcbiAgICAgIGNvbmZpbmcodW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIGxlYXZlKCkge1xuICAgICAgb3B0cy5zZW5kKFwibGVhdmVcIik7XG4gICAgfSxcbiAgICBvcmRlcmVkKCkge1xuICAgICAgY29uc3QgZCA9IGRpY3QoKTtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhkKS5tYXAoaWQgPT4gZFtpZF0pLnNvcnQoKGEsIGIpID0+XG4gICAgICAgIGEucm9sZSA9PT0gJ3InICYmIGIucm9sZSA9PT0gJ3cnID8gMSA6IChcbiAgICAgICAgICBhLnJvbGUgPT09ICd3JyAmJiBiLnJvbGUgPT09ICdyJyA/IC0xIDogMFxuICAgICAgICApKTtcbiAgICB9LFxuICAgIHNpemUoKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoZGljdCgpKS5sZW5ndGg7XG4gICAgfSxcbiAgICBzZXRTcGVjdGF0b3JzKHVzZXJuYW1lcz86IHN0cmluZ1tdKSB7XG4gICAgICBjb25zdCBuYW1lcyA9IHVzZXJuYW1lcyB8fCBbXTtcbiAgICAgIHRoaXMuaW52aXRlRm9ybS5zZXRTcGVjdGF0b3JzKG5hbWVzKTtcbiAgICAgIHNwZWN0YXRvcklkcyA9IG5hbWVzLm1hcCh0aXRsZU5hbWVUb0lkKTtcbiAgICAgIHVwZGF0ZU9ubGluZSgpO1xuICAgIH0sXG4gICAgaXNPbmxpbmUodXNlcklkOiBzdHJpbmcpIHtcbiAgICAgIHJldHVybiBvbmxpbmVbdXNlcklkXTtcbiAgICB9LFxuICAgIGhhc09ubGluZUNvbnRyaWJ1dG9yKCkge1xuICAgICAgY29uc3QgbWVtYmVycyA9IGRpY3QoKTtcbiAgICAgIGZvciAobGV0IGkgaW4gbWVtYmVycykgaWYgKG9ubGluZVtpXSAmJiBtZW1iZXJzW2ldLnJvbGUgPT09ICd3JykgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhjdHJsOiBTdHVkeUN0cmwpOiBWTm9kZSB7XG5cbiAgY29uc3QgaXNPd25lciA9IGN0cmwubWVtYmVycy5pc093bmVyKCk7XG5cbiAgZnVuY3Rpb24gdXNlcm5hbWUobWVtYmVyOiBTdHVkeU1lbWJlcikge1xuICAgIHZhciB1ID0gbWVtYmVyLnVzZXI7XG4gICAgcmV0dXJuIGgoJ3NwYW4udXNlci1saW5rLnVscHQnLCB7XG4gICAgICBhdHRyczogeyAnZGF0YS1ocmVmJzogJy9ALycgKyB1Lm5hbWUgfVxuICAgIH0sICh1LnRpdGxlID8gdS50aXRsZSArICcgJyA6ICcnKSArIHUubmFtZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gc3RhdHVzSWNvbihtZW1iZXI6IFN0dWR5TWVtYmVyKSB7XG4gICAgY29uc3QgY29udHJpYiA9IG1lbWJlci5yb2xlID09PSAndyc7XG4gICAgcmV0dXJuIGgoJ3NwYW4uc3RhdHVzJywge1xuICAgICAgY2xhc3M6IHtcbiAgICAgICAgY29udHJpYixcbiAgICAgICAgYWN0aXZlOiBjdHJsLm1lbWJlcnMuaXNBY3RpdmUobWVtYmVyLnVzZXIuaWQpLFxuICAgICAgICBvbmxpbmU6IGN0cmwubWVtYmVycy5pc09ubGluZShtZW1iZXIudXNlci5pZClcbiAgICAgIH0sXG4gICAgICBhdHRyczogeyB0aXRsZTogY3RybC50cmFucy5ub2FyZyhjb250cmliID8gJ2NvbnRyaWJ1dG9yJyA6ICdzcGVjdGF0b3InKSB9LFxuICAgIH0sIFtcbiAgICAgIGljb25UYWcoY29udHJpYiA/ICdyJyA6ICd2JylcbiAgICBdKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25maWdCdXR0b24oY3RybDogU3R1ZHlDdHJsLCBtZW1iZXI6IFN0dWR5TWVtYmVyKSB7XG4gICAgaWYgKGlzT3duZXIgJiYgbWVtYmVyLnVzZXIuaWQgIT09IGN0cmwubWVtYmVycy5teUlkKVxuICAgICAgcmV0dXJuIGgoJ2FjdCcsIHtcbiAgICAgICAga2V5OiAnY2ZnLScgKyBtZW1iZXIudXNlci5pZCxcbiAgICAgICAgYXR0cnM6IGRhdGFJY29uKCclJyksXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiB7XG4gICAgICAgICAgY3RybC5tZW1iZXJzLmNvbmZpbmcoY3RybC5tZW1iZXJzLmNvbmZpbmcoKSA9PT0gbWVtYmVyLnVzZXIuaWQgPyBudWxsIDogbWVtYmVyLnVzZXIuaWQpO1xuICAgICAgICB9LCBjdHJsLnJlZHJhdylcbiAgICAgIH0pO1xuICAgIGlmICghaXNPd25lciAmJiBtZW1iZXIudXNlci5pZCA9PT0gY3RybC5tZW1iZXJzLm15SWQpXG4gICAgICByZXR1cm4gaCgnYWN0LmxlYXZlJywge1xuICAgICAgICBrZXk6ICdsZWF2ZScsXG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgJ2RhdGEtaWNvbic6ICdGJyxcbiAgICAgICAgICB0aXRsZTogY3RybC50cmFucy5ub2FyZygnbGVhdmVUaGVTdHVkeScpXG4gICAgICAgIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgY3RybC5tZW1iZXJzLmxlYXZlLCBjdHJsLnJlZHJhdylcbiAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1lbWJlckNvbmZpZyhtZW1iZXI6IFN0dWR5TWVtYmVyKTogVk5vZGUge1xuICAgIGNvbnN0IHJvbGVJZCA9ICdtZW1iZXItcm9sZSc7XG4gICAgcmV0dXJuIGgoJ20tY29uZmlnJywge1xuICAgICAga2V5OiBtZW1iZXIudXNlci5pZCArICctY29uZmlnJyxcbiAgICAgIGhvb2s6IG9uSW5zZXJ0KGVsID0+IHNjcm9sbFRvKCQoZWwpLnBhcmVudCgnLm1lbWJlcnMnKVswXSBhcyBIVE1MRWxlbWVudCwgZWwpKVxuICAgIH0sIFtcbiAgICAgIGgoJ2Rpdi5yb2xlJywgW1xuICAgICAgICBoKCdkaXYuc3dpdGNoJywgW1xuICAgICAgICAgIGgoJ2lucHV0LmNtbi10b2dnbGUnLCB7XG4gICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICBpZDogcm9sZUlkLFxuICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICBjaGVja2VkOiBtZW1iZXIucm9sZSA9PT0gJ3cnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaG9vazogYmluZCgnY2hhbmdlJywgZSA9PiB7XG4gICAgICAgICAgICAgIGN0cmwubWVtYmVycy5zZXRSb2xlKG1lbWJlci51c2VyLmlkLCAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCA/ICd3JyA6ICdyJyk7XG4gICAgICAgICAgICB9LCBjdHJsLnJlZHJhdylcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBoKCdsYWJlbCcsIHsgYXR0cnM6IHsgJ2Zvcic6IHJvbGVJZCB9IH0pXG4gICAgICAgIF0pLFxuICAgICAgICBoKCdsYWJlbCcsIHsgYXR0cnM6IHsgJ2Zvcic6IHJvbGVJZCB9IH0sIGN0cmwudHJhbnMubm9hcmcoJ2NvbnRyaWJ1dG9yJykpXG4gICAgICBdKSxcbiAgICAgIGgoJ2Rpdi5raWNrJywgaCgnYS5idXR0b24uYnV0dG9uLXJlZC5idXR0b24tZW1wdHkudGV4dCcsIHtcbiAgICAgICAgYXR0cnM6IGRhdGFJY29uKCdMJyksXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgXyA9PiBjdHJsLm1lbWJlcnMua2ljayhtZW1iZXIudXNlci5pZCksIGN0cmwucmVkcmF3KVxuICAgICAgfSwgY3RybC50cmFucy5ub2FyZygna2ljaycpKSlcbiAgICBdKTtcbiAgfTtcblxuICB2YXIgb3JkZXJlZCA9IGN0cmwubWVtYmVycy5vcmRlcmVkKCk7XG5cbiAgcmV0dXJuIGgoJ2Rpdi5zdHVkeV9fbWVtYmVycycsIHtcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IF8gPT4ge1xuICAgICAgICB3aW5kb3cubGljaGVzcy5wdWJzdWIuZW1pdCgnY29udGVudF9sb2FkZWQnKTtcbiAgICAgICAgd2luZG93LmxpY2hlc3MucHVic3ViLmVtaXQoJ2NoYXQucmVzaXplJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXG4gICAgLi4ub3JkZXJlZC5tYXAoZnVuY3Rpb24obWVtYmVyKSB7XG4gICAgICBjb25zdCBjb25maW5nID0gY3RybC5tZW1iZXJzLmNvbmZpbmcoKSA9PT0gbWVtYmVyLnVzZXIuaWQ7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAga2V5OiBtZW1iZXIudXNlci5pZCxcbiAgICAgICAgICBjbGFzczogeyBlZGl0aW5nOiAhIWNvbmZpbmcgfVxuICAgICAgICB9LCBbXG4gICAgICAgICAgaCgnZGl2LmxlZnQnLCBbXG4gICAgICAgICAgICBzdGF0dXNJY29uKG1lbWJlciksXG4gICAgICAgICAgICB1c2VybmFtZShtZW1iZXIpXG4gICAgICAgICAgXSksXG4gICAgICAgICAgY29uZmlnQnV0dG9uKGN0cmwsIG1lbWJlcilcbiAgICAgICAgXSksXG4gICAgICAgIGNvbmZpbmcgPyBtZW1iZXJDb25maWcobWVtYmVyKSA6IG51bGxcbiAgICAgIF07XG4gICAgfSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pLFxuICAgIChpc093bmVyICYmIG9yZGVyZWQubGVuZ3RoIDwgY3RybC5tZW1iZXJzLm1heCkgPyBoKCdkaXYuYWRkJywge1xuICAgICAga2V5OiAnYWRkJyxcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgY3RybC5tZW1iZXJzLmludml0ZUZvcm0udG9nZ2xlLCBjdHJsLnJlZHJhdylcbiAgICB9LCBbXG4gICAgICBoKCdkaXYubGVmdCcsIFtcbiAgICAgICAgaCgnc3Bhbi5zdGF0dXMnLCBpY29uVGFnKCdPJykpLFxuICAgICAgICBoKCdkaXYudXNlci1saW5rJywgY3RybC50cmFucy5ub2FyZygnYWRkTWVtYmVycycpKVxuICAgICAgXSlcbiAgICBdKSA6IG51bGxcbiAgXSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgYmluZCwgYmFzZVVybCB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgcHJvcCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgeyByZW5kZXJJbmRleEFuZE1vdmUgfSBmcm9tICcuLi9tb3ZlVmlldyc7XG5pbXBvcnQgeyBTdHVkeURhdGEsIFN0dWR5Q2hhcHRlck1ldGEgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5mdW5jdGlvbiBmcm9tUGx5KGN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IHJlbmRlcmVkTW92ZSA9IHJlbmRlckluZGV4QW5kTW92ZSh7XG4gICAgd2l0aERvdHM6IHRydWUsXG4gICAgc2hvd0V2YWw6IGZhbHNlXG4gIH0sIGN0cmwuY3VycmVudE5vZGUoKSk7XG4gIHJldHVybiBoKCdkaXYucGx5LXdyYXAnLCBoKCdsYWJlbC5wbHknLCBbXG4gICAgaCgnaW5wdXQnLCB7XG4gICAgICBhdHRyczogeyB0eXBlOiAnY2hlY2tib3gnIH0sXG4gICAgICBob29rOiBiaW5kKCdjaGFuZ2UnLCBlID0+IHtcbiAgICAgICAgY3RybC53aXRoUGx5KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKTtcbiAgICAgIH0sIGN0cmwucmVkcmF3KVxuICAgIH0pLFxuICAgIC4uLihcbiAgICAgIHJlbmRlcmVkTW92ZSA/XG4gICAgICBjdHJsLnRyYW5zLnZkb20oJ3N0YXJ0QXRYJywgaCgnc3Ryb25nJywgcmVuZGVyZWRNb3ZlKSkgOlxuICAgICAgW2N0cmwudHJhbnMubm9hcmcoJ3N0YXJ0QXRJbml0aWFsUG9zaXRpb24nKV1cbiAgICApXG4gIF0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwoZGF0YTogU3R1ZHlEYXRhLCBjdXJyZW50Q2hhcHRlcjogKCkgPT4gU3R1ZHlDaGFwdGVyTWV0YSwgY3VycmVudE5vZGU6ICgpID0+IFRyZWUuTm9kZSwgcmVkcmF3OiAoKSA9PiB2b2lkLCB0cmFuczogVHJhbnMpIHtcbiAgY29uc3Qgd2l0aFBseSA9IHByb3AoZmFsc2UpO1xuICByZXR1cm4ge1xuICAgIHN0dWR5SWQ6IGRhdGEuaWQsXG4gICAgY2hhcHRlcjogY3VycmVudENoYXB0ZXIsXG4gICAgaXNQcml2YXRlKCkge1xuICAgICAgcmV0dXJuIGRhdGEudmlzaWJpbGl0eSA9PT0gJ3ByaXZhdGUnO1xuICAgIH0sXG4gICAgY3VycmVudE5vZGUsXG4gICAgd2l0aFBseSxcbiAgICBjbG9uZWFibGU6IGRhdGEuZmVhdHVyZXMuY2xvbmVhYmxlLFxuICAgIHJlZHJhdyxcbiAgICB0cmFuc1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3KGN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IHN0dWR5SWQgPSBjdHJsLnN0dWR5SWQsIGNoYXB0ZXIgPSBjdHJsLmNoYXB0ZXIoKTtcbiAgbGV0IGZ1bGxVcmwgPSBgJHtiYXNlVXJsKCl9L3N0dWR5LyR7c3R1ZHlJZH0vJHtjaGFwdGVyLmlkfWA7XG4gIGxldCBlbWJlZFVybCA9IGAke2Jhc2VVcmwoKX0vc3R1ZHkvZW1iZWQvJHtzdHVkeUlkfS8ke2NoYXB0ZXIuaWR9YDtcbiAgY29uc3QgaXNQcml2YXRlID0gY3RybC5pc1ByaXZhdGUoKTtcbiAgaWYgKGN0cmwud2l0aFBseSgpKSB7XG4gICAgY29uc3QgcCA9IGN0cmwuY3VycmVudE5vZGUoKS5wbHk7XG4gICAgZnVsbFVybCArPSAnIycgKyBwO1xuICAgIGVtYmVkVXJsICs9ICcjJyArIHA7XG4gIH1cbiAgcmV0dXJuIGgoJ2Rpdi5zdHVkeV9fc2hhcmUnLCBbXG4gICAgaCgnZGl2LmRvd25sb2FkcycsIFtcbiAgICAgIGN0cmwuY2xvbmVhYmxlID8gaCgnYS5idXR0b24udGV4dCcsIHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAnZGF0YS1pY29uJzogJzQnLFxuICAgICAgICAgIGhyZWY6ICcvc3R1ZHkvJyArIHN0dWR5SWQgKyAnL2Nsb25lJ1xuICAgICAgICB9XG4gICAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdjbG9uZVN0dWR5JykpIDogbnVsbCxcbiAgICAgIGgoJ2EuYnV0dG9uLnRleHQnLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgJ2RhdGEtaWNvbic6ICd4JyxcbiAgICAgICAgICBocmVmOiAnL3N0dWR5LycgKyBzdHVkeUlkICsgJy5wZ24nXG4gICAgICAgIH1cbiAgICAgIH0sIGN0cmwudHJhbnMubm9hcmcoJ3N0dWR5UGduJykpLFxuICAgICAgaCgnYS5idXR0b24udGV4dCcsIHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAnZGF0YS1pY29uJzogJ3gnLFxuICAgICAgICAgIGhyZWY6ICcvc3R1ZHkvJyArIHN0dWR5SWQgKyAnLycgKyBjaGFwdGVyLmlkICsgJy5wZ24nXG4gICAgICAgIH1cbiAgICAgIH0sIGN0cmwudHJhbnMubm9hcmcoJ2NoYXB0ZXJQZ24nKSlcbiAgICBdKSxcbiAgICBoKCdmb3JtLmZvcm0zJywgW1xuICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICAgIGgoJ2xhYmVsLmZvcm0tbGFiZWwnLCBjdHJsLnRyYW5zLm5vYXJnKCdzdHVkeVVybCcpKSxcbiAgICAgICAgaCgnaW5wdXQuZm9ybS1jb250cm9sLmF1dG9zZWxlY3QnLCB7XG4gICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIHJlYWRvbmx5OiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGAke2Jhc2VVcmwoKX0vc3R1ZHkvJHtzdHVkeUlkfWBcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBdKSxcbiAgICAgIGgoJ2Rpdi5mb3JtLWdyb3VwJywgW1xuICAgICAgICBoKCdsYWJlbC5mb3JtLWxhYmVsJywgY3RybC50cmFucy5ub2FyZygnY3VycmVudENoYXB0ZXJVcmwnKSksXG4gICAgICAgIGgoJ2lucHV0LmZvcm0tY29udHJvbC5hdXRvc2VsZWN0Jywge1xuICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmdWxsVXJsXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgZnJvbVBseShjdHJsKSxcbiAgICAgICAgIWlzUHJpdmF0ZSA/IGgoJ3AuZm9ybS1oZWxwLnRleHQnLCB7XG4gICAgICAgICAgYXR0cnM6IHsgJ2RhdGEtaWNvbic6ICfugIUnIH1cbiAgICAgICAgfSwgY3RybC50cmFucy5ub2FyZygneW91Q2FuUGFzdGVUaGlzSW5UaGVGb3J1bVRvRW1iZWRUaGVDaGFwdGVyJykpIDogbnVsbCxcbiAgICAgIF0pLFxuICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICAgIGgoJ2xhYmVsLmZvcm0tbGFiZWwnLCBjdHJsLnRyYW5zLm5vYXJnKCdlbWJlZFRoaXNDaGFwdGVyJykpLFxuICAgICAgICBoKCdpbnB1dC5mb3JtLWNvbnRyb2wuYXV0b3NlbGVjdCcsIHtcbiAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgcmVhZG9ubHk6IHRydWUsXG4gICAgICAgICAgICBkaXNhYmxlZDogaXNQcml2YXRlLFxuICAgICAgICAgICAgdmFsdWU6ICFpc1ByaXZhdGUgPyAnPGlmcmFtZSB3aWR0aD02MDAgaGVpZ2h0PTM3MSBzcmM9XCInICsgZW1iZWRVcmwgKyAnXCIgZnJhbWVib3JkZXI9MD48L2lmcmFtZT4nIDogY3RybC50cmFucy5ub2FyZygnb25seVB1YmxpY1N0dWRpZXNDYW5CZUVtYmVkZGVkJylcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBdLmNvbmNhdChcbiAgICAgICAgIWlzUHJpdmF0ZSA/IFtcbiAgICAgICAgICBmcm9tUGx5KGN0cmwpLFxuICAgICAgICAgIGgoJ2EuZm9ybS1oZWxwLnRleHQnLCB7XG4gICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICBocmVmOiAnL2RldmVsb3BlcnMjZW1iZWQtc3R1ZHknLFxuICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgICAgICAgICAnZGF0YS1pY29uJzogJ+6AhSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdyZWFkTW9yZUFib3V0RW1iZWRkaW5nQVN0dWR5Q2hhcHRlcicpKVxuICAgICAgICBdIDogW10pXG4gICAgICApLFxuICAgICAgaCgnZGl2LmZvcm0tZ3JvdXAnLCBbXG4gICAgICAgIGgoJ2xhYmVsLmZvcm0tbGFiZWwnLCAnRkVOJyksXG4gICAgICAgIGgoJ2lucHV0LmZvcm0tY29udHJvbC5hdXRvc2VsZWN0Jywge1xuICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBjdHJsLmN1cnJlbnROb2RlKCkuZmVuXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIF0pXG4gICAgXSlcbiAgXSk7XG59XG4iLCJpbXBvcnQgeyBoLCB0aHVuayB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB0aHJvdHRsZSBmcm9tICdjb21tb24vdGhyb3R0bGUnO1xuaW1wb3J0IHsgb3B0aW9uLCBvbkluc2VydCB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuaW1wb3J0IHsgU3R1ZHlDdHJsLCBTdHVkeUNoYXB0ZXIgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5mdW5jdGlvbiBlZGl0YWJsZSh2YWx1ZTogc3RyaW5nLCBzdWJtaXQ6ICh2OiBzdHJpbmcsIGVsOiBIVE1MSW5wdXRFbGVtZW50KSA9PiB2b2lkKTogVk5vZGUge1xuICByZXR1cm4gaCgnaW5wdXQnLCB7XG4gICAga2V5OiB2YWx1ZSwgLy8gZm9yY2UgdG8gcmVkcmF3IG9uIGNoYW5nZSwgdG8gdmlzaWJseSB1cGRhdGUgdGhlIGlucHV0IHZhbHVlXG4gICAgYXR0cnM6IHtcbiAgICAgIHNwZWxsY2hlY2s6IGZhbHNlLFxuICAgICAgdmFsdWVcbiAgICB9LFxuICAgIGhvb2s6IG9uSW5zZXJ0PEhUTUxJbnB1dEVsZW1lbnQ+KGVsID0+IHtcbiAgICAgIGVsLm9uYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdWJtaXQoZWwudmFsdWUsIGVsKTtcbiAgICAgIH07XG4gICAgICBlbC5vbmtleXByZXNzID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoKGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PSAxMykgZWwuYmx1cigpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmaXhlZCh0ZXh0OiBzdHJpbmcpIHtcbiAgcmV0dXJuIGgoJ3NwYW4nLCB0ZXh0KTtcbn1cblxubGV0IHNlbGVjdGVkVHlwZTogc3RyaW5nO1xuXG50eXBlIFRhZ1JvdyA9IChzdHJpbmcgfCBWTm9kZSlbXTtcblxuZnVuY3Rpb24gcmVuZGVyUGduVGFncyhjaGFwdGVyOiBTdHVkeUNoYXB0ZXIsIHN1Ym1pdCwgdHlwZXM6IHN0cmluZ1tdLCB0cmFuczogVHJhbnMpOiBWTm9kZSB7XG4gIGxldCByb3dzOiBUYWdSb3dbXSA9IFtdO1xuICBpZiAoY2hhcHRlci5zZXR1cC52YXJpYW50LmtleSAhPT0gJ3N0YW5kYXJkJylcbiAgICByb3dzLnB1c2goWydWYXJpYW50JywgZml4ZWQoY2hhcHRlci5zZXR1cC52YXJpYW50Lm5hbWUpXSk7XG4gIHJvd3MgPSByb3dzLmNvbmNhdChjaGFwdGVyLnRhZ3MubWFwKHRhZyA9PiBbXG4gICAgdGFnWzBdLFxuICAgIHN1Ym1pdCA/IGVkaXRhYmxlKHRhZ1sxXSwgc3VibWl0KHRhZ1swXSkpIDogZml4ZWQodGFnWzFdKVxuICBdKSk7XG4gIGlmIChzdWJtaXQpIHtcbiAgICBjb25zdCBleGlzdGluZ1R5cGVzID0gY2hhcHRlci50YWdzLm1hcCh0ID0+IHRbMF0pO1xuICAgIHJvd3MucHVzaChbXG4gICAgICBoKCdzZWxlY3QnLCB7XG4gICAgICAgIGhvb2s6IHtcbiAgICAgICAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gdm5vZGUuZWxtIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBzZWxlY3RlZFR5cGUgPSBlbC52YWx1ZTtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIF8gPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZFR5cGUgPSBlbC52YWx1ZTtcbiAgICAgICAgICAgICAgJChlbCkucGFyZW50cygndHInKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvc3RwYXRjaDogKF8sIHZub2RlKSA9PiB7XG4gICAgICAgICAgICBzZWxlY3RlZFR5cGUgPSAodm5vZGUuZWxtIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgW1xuICAgICAgICBoKCdvcHRpb24nLCB0cmFucy5ub2FyZygnbmV3VGFnJykpLFxuICAgICAgICAuLi50eXBlcy5tYXAodCA9PiB7XG4gICAgICAgICAgaWYgKCFleGlzdGluZ1R5cGVzLmluY2x1ZGVzKHQpKSByZXR1cm4gb3B0aW9uKHQsICcnLCB0KTtcbiAgICAgICAgfSlcbiAgICAgIF0pLFxuICAgICAgZWRpdGFibGUoJycsICh2YWx1ZSwgZWwpID0+IHtcbiAgICAgICAgaWYgKHNlbGVjdGVkVHlwZSkge1xuICAgICAgICAgIHN1Ym1pdChzZWxlY3RlZFR5cGUpKHZhbHVlKTtcbiAgICAgICAgICBlbC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIF0pO1xuICB9XG5cbiAgcmV0dXJuIGgoJ3RhYmxlLnN0dWR5X190YWdzLnNsaXN0JywgaCgndGJvZHknLCByb3dzLm1hcChmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIGgoJ3RyJywge1xuICAgICAga2V5OiAnJyArIHJbMF1cbiAgICB9LCBbXG4gICAgICBoKCd0aCcsIFtyWzBdXSksXG4gICAgICBoKCd0ZCcsIFtyWzFdXSlcbiAgICBdKTtcbiAgfSkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmwocm9vdDogQW5hbHlzZUN0cmwsIGdldENoYXB0ZXI6ICgpID0+IFN0dWR5Q2hhcHRlciwgdHlwZXMpIHtcblxuICBjb25zdCBzdWJtaXQgPSB0aHJvdHRsZSg1MDAsIGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgcm9vdC5zdHVkeSEubWFrZUNoYW5nZSgnc2V0VGFnJywge1xuICAgICAgY2hhcHRlcklkOiBnZXRDaGFwdGVyKCkuaWQsXG4gICAgICBuYW1lLFxuICAgICAgdmFsdWU6IHZhbHVlLnN1YnN0cigwLCAxNDApXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgc3VibWl0KG5hbWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PiBzdWJtaXQobmFtZSwgdmFsdWUpO1xuICAgIH0sXG4gICAgZ2V0Q2hhcHRlcixcbiAgICB0eXBlc1xuICB9XG59XG5mdW5jdGlvbiBkb1JlbmRlcihyb290OiBTdHVkeUN0cmwpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdkaXYnLCByZW5kZXJQZ25UYWdzKFxuICAgIHJvb3QudGFncy5nZXRDaGFwdGVyKCksXG4gICAgcm9vdC52bS5tb2RlLndyaXRlICYmIHJvb3QudGFncy5zdWJtaXQsXG4gICAgcm9vdC50YWdzLnR5cGVzLFxuICAgIHJvb3QudHJhbnMpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmlldyhyb290OiBTdHVkeUN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IGNoYXB0ZXIgPSByb290LnRhZ3MuZ2V0Q2hhcHRlcigpLFxuICAgIHRhZ0tleSA9IGNoYXB0ZXIudGFncy5tYXAodCA9PiB0WzFdKS5qb2luKCcsJyksXG4gICAga2V5ID0gY2hhcHRlci5pZCArIHJvb3QuZGF0YS5uYW1lICsgY2hhcHRlci5uYW1lICsgcm9vdC5kYXRhLmxpa2VzICsgdGFnS2V5ICsgcm9vdC52bS5tb2RlLndyaXRlO1xuICByZXR1cm4gdGh1bmsoJ2Rpdi4nICsgY2hhcHRlci5pZCwgZG9SZW5kZXIsIFtyb290LCBrZXldKTtcbn1cbiIsImltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IFRhYiB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHVkeShjdHJsOiBBbmFseXNlQ3RybCkge1xuICB3aW5kb3cubGljaGVzcy5sb2FkU2NyaXB0KCdqYXZhc2NyaXB0cy9zdHVkeS90b3VyLmpzJykudGhlbigoKSA9PiB7XG4gICAgd2luZG93LmxpY2hlc3NbJ3N0dWR5VG91ciddKHtcbiAgICAgIHVzZXJJZDogY3RybC5vcHRzLnVzZXJJZCxcbiAgICAgIGlzQ29udHJpYjogY3RybC5zdHVkeSEubWVtYmVycy5jYW5Db250cmlidXRlKCksXG4gICAgICBpc093bmVyOiBjdHJsLnN0dWR5IS5tZW1iZXJzLmlzT3duZXIoKSxcbiAgICAgIHNldFRhYjogKHRhYjogVGFiKSA9PiB7XG4gICAgICAgIGN0cmwuc3R1ZHkhLnZtLnRhYih0YWIpO1xuICAgICAgICBjdHJsLnJlZHJhdygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoYXB0ZXIoc2V0VGFiOiAodGFiOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgd2luZG93LmxpY2hlc3MubG9hZFNjcmlwdCgnamF2YXNjcmlwdHMvc3R1ZHkvdG91ci1jaGFwdGVyLmpzJykudGhlbigoKSA9PiB7XG4gICAgd2luZG93LmxpY2hlc3NbJ3N0dWR5VG91ckNoYXB0ZXInXSh7XG4gICAgICBzZXRUYWJcbiAgICB9KTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgYmluZCwgZGF0YUljb24sIGljb25UYWcsIHJpY2hIVE1MIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyB2aWV3IGFzIG1lbWJlclZpZXcgfSBmcm9tICcuL3N0dWR5TWVtYmVycyc7XG5pbXBvcnQgeyB2aWV3IGFzIGNoYXB0ZXJWaWV3IH0gZnJvbSAnLi9zdHVkeUNoYXB0ZXJzJztcbmltcG9ydCB7IHZpZXcgYXMgY2hhcHRlck5ld0Zvcm1WaWV3IH0gZnJvbSAnLi9jaGFwdGVyTmV3Rm9ybSc7XG5pbXBvcnQgeyB2aWV3IGFzIGNoYXB0ZXJFZGl0Rm9ybVZpZXcgfSBmcm9tICcuL2NoYXB0ZXJFZGl0Rm9ybSc7XG5pbXBvcnQgKiBhcyBjb21tZW50Rm9ybSBmcm9tICcuL2NvbW1lbnRGb3JtJztcbmltcG9ydCAqIGFzIGdseXBoRm9ybSBmcm9tICcuL3N0dWR5R2x5cGgnO1xuaW1wb3J0IHsgdmlldyBhcyBpbnZpdGVGb3JtVmlldyB9IGZyb20gJy4vaW52aXRlRm9ybSc7XG5pbXBvcnQgeyB2aWV3IGFzIHN0dWR5Rm9ybVZpZXcgfSBmcm9tICcuL3N0dWR5Rm9ybSc7XG5pbXBvcnQgeyB2aWV3IGFzIHN0dWR5U2hhcmVWaWV3IH0gZnJvbSAnLi9zdHVkeVNoYXJlJztcbmltcG9ydCB7IHZpZXcgYXMgbXVsdGlCb2FyZFZpZXcgfSBmcm9tICcuL211bHRpQm9hcmQnO1xuaW1wb3J0IHsgdmlldyBhcyBub3RpZlZpZXcgfSBmcm9tICcuL25vdGlmJztcbmltcG9ydCB7IHZpZXcgYXMgdGFnc1ZpZXcgfSBmcm9tICcuL3N0dWR5VGFncyc7XG5pbXBvcnQgeyB2aWV3IGFzIHNlcnZlckV2YWxWaWV3IH0gZnJvbSAnLi9zZXJ2ZXJFdmFsJztcbmltcG9ydCAqIGFzIHByYWN0aWNlVmlldyBmcm9tICcuL3ByYWN0aWNlL3N0dWR5UHJhY3RpY2VWaWV3JztcbmltcG9ydCB7IHBsYXlCdXR0b25zIGFzIGdiUGxheUJ1dHRvbnMsIG92ZXJyaWRlQnV0dG9uIGFzIGdiT3ZlcnJpZGVCdXR0b24gfSBmcm9tICcuL2dhbWVib29rL2dhbWVib29rQnV0dG9ucyc7XG5pbXBvcnQgeyB2aWV3IGFzIGRlc2NWaWV3IH0gZnJvbSAnLi9kZXNjcmlwdGlvbic7XG5pbXBvcnQgQW5hbHlzZUN0cmwgZnJvbSAnLi4vY3RybCc7XG5pbXBvcnQgeyBTdHVkeUN0cmwsIFRhYiwgVG9vbFRhYiB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBNYXliZVZOb2RlcyB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuXG5cbmludGVyZmFjZSBUb29sQnV0dG9uT3B0cyB7XG4gIGN0cmw6IFN0dWR5Q3RybDtcbiAgdGFiOiBUb29sVGFiO1xuICBoaW50OiBzdHJpbmc7XG4gIGljb246IFZOb2RlO1xuICBvbkNsaWNrPzogKCkgPT4gdm9pZDtcbiAgY291bnQ/OiBudW1iZXIgfCBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHRvb2xCdXR0b24ob3B0czogVG9vbEJ1dHRvbk9wdHMpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdzcGFuLicgKyBvcHRzLnRhYiwge1xuICAgIGF0dHJzOiB7IHRpdGxlOiBvcHRzLmhpbnQgfSxcbiAgICBjbGFzczogeyBhY3RpdmU6IG9wdHMudGFiID09PSBvcHRzLmN0cmwudm0udG9vbFRhYigpIH0sXG4gICAgaG9vazogYmluZCgnbW91c2Vkb3duJywgKCkgPT4ge1xuICAgICAgaWYgKG9wdHMub25DbGljaykgb3B0cy5vbkNsaWNrKCk7XG4gICAgICBvcHRzLmN0cmwudm0udG9vbFRhYihvcHRzLnRhYik7XG4gICAgfSwgb3B0cy5jdHJsLnJlZHJhdylcbiAgfSwgW1xuICAgIG9wdHMuY291bnQgPyBoKCdjb3VudC5kYXRhLWNvdW50JywgeyBhdHRyczogeyAnZGF0YS1jb3VudCc6IG9wdHMuY291bnQgfSB9KSA6IG51bGwsXG4gICAgb3B0cy5pY29uXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBidXR0b25zKHJvb3Q6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICBjb25zdCBjdHJsOiBTdHVkeUN0cmwgPSByb290LnN0dWR5ISxcbiAgICBjYW5Db250cmlidXRlID0gY3RybC5tZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKSxcbiAgICBzaG93U3RpY2t5ID0gY3RybC5kYXRhLmZlYXR1cmVzLnN0aWNreSAmJiAoY2FuQ29udHJpYnV0ZSB8fCAoY3RybC52bS5iZWhpbmQgJiYgY3RybC5pc1VwZGF0ZWRSZWNlbnRseSgpKSksXG4gICAgbm9hcmcgPSByb290LnRyYW5zLm5vYXJnO1xuICByZXR1cm4gaCgnZGl2LnN0dWR5X19idXR0b25zJywgW1xuICAgIGgoJ2Rpdi5sZWZ0LWJ1dHRvbnMudGFicy1ob3JpeicsIFtcbiAgICAgIC8vIGRpc3RpbmN0IGNsYXNzZXMgKHN5bmMsIHdyaXRlKSBhbGxvdyBzbmFiYmRvbSB0byBkaWZmZXJlbnRpYXRlIGJ1dHRvbnNcbiAgICAgIHNob3dTdGlja3kgPyBoKCdhLm1vZGUuc3luYycsIHtcbiAgICAgICAgYXR0cnM6IHsgdGl0bGU6IG5vYXJnKCdhbGxTeW5jTWVtYmVyc1JlbWFpbk9uVGhlU2FtZVBvc2l0aW9uJykgfSxcbiAgICAgICAgY2xhc3M6IHsgb246IGN0cmwudm0ubW9kZS5zdGlja3kgfSxcbiAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLnRvZ2dsZVN0aWNreSlcbiAgICAgIH0sIFtcbiAgICAgICAgY3RybC52bS5iZWhpbmQgPyBoKCdzcGFuLmJlaGluZCcsICcnICsgY3RybC52bS5iZWhpbmQpIDogaCgnaS5pcycpLFxuICAgICAgICAnU1lOQydcbiAgICAgIF0pIDogbnVsbCxcbiAgICAgIGN0cmwubWVtYmVycy5jYW5Db250cmlidXRlKCkgPyBoKCdhLm1vZGUud3JpdGUnLCB7XG4gICAgICAgIGF0dHJzOiB7IHRpdGxlOiBub2FyZygnc2hhcmVDaGFuZ2VzJykgfSxcbiAgICAgICAgY2xhc3M6IHsgb246IGN0cmwudm0ubW9kZS53cml0ZSB9LFxuICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwudG9nZ2xlV3JpdGUpXG4gICAgICB9LCBbIGgoJ2kuaXMnKSwgJ1JFQycgXSkgOiBudWxsLFxuICAgICAgdG9vbEJ1dHRvbih7XG4gICAgICAgIGN0cmwsXG4gICAgICAgIHRhYjogJ3RhZ3MnLFxuICAgICAgICBoaW50OiBub2FyZygncGduVGFncycpLFxuICAgICAgICBpY29uOiBpY29uVGFnKCdvJyksXG4gICAgICB9KSxcbiAgICAgIHRvb2xCdXR0b24oe1xuICAgICAgICBjdHJsLFxuICAgICAgICB0YWI6ICdjb21tZW50cycsXG4gICAgICAgIGhpbnQ6IG5vYXJnKCdjb21tZW50VGhpc1Bvc2l0aW9uJyksXG4gICAgICAgIGljb246IGljb25UYWcoJ2MnKSxcbiAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICBjdHJsLmNvbW1lbnRGb3JtLnN0YXJ0KGN0cmwudm0uY2hhcHRlcklkLCByb290LnBhdGgsIHJvb3Qubm9kZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50OiAocm9vdC5ub2RlLmNvbW1lbnRzIHx8IFtdKS5sZW5ndGhcbiAgICAgIH0pLFxuICAgICAgY2FuQ29udHJpYnV0ZSA/ICB0b29sQnV0dG9uKHtcbiAgICAgICAgY3RybCxcbiAgICAgICAgdGFiOiAnZ2x5cGhzJyxcbiAgICAgICAgaGludDogbm9hcmcoJ2Fubm90YXRlV2l0aEdseXBocycpLFxuICAgICAgICBpY29uOiBoKCdpLmdseXBoLWljb24nKSxcbiAgICAgICAgY291bnQ6IChyb290Lm5vZGUuZ2x5cGhzIHx8IFtdKS5sZW5ndGhcbiAgICAgIH0pIDogbnVsbCxcbiAgICAgIHRvb2xCdXR0b24oe1xuICAgICAgICBjdHJsLFxuICAgICAgICB0YWI6ICdzZXJ2ZXJFdmFsJyxcbiAgICAgICAgaGludDogbm9hcmcoJ2NvbXB1dGVyQW5hbHlzaXMnKSxcbiAgICAgICAgaWNvbjogaWNvblRhZygn7oCEJyksXG4gICAgICAgIGNvdW50OiByb290LmRhdGEuYW5hbHlzaXMgJiYgJ+KckydcbiAgICAgIH0pLFxuICAgICAgdG9vbEJ1dHRvbih7XG4gICAgICAgIGN0cmwsXG4gICAgICAgIHRhYjogJ211bHRpQm9hcmQnLFxuICAgICAgICBoaW50OiAnTXVsdGlib2FyZCcsXG4gICAgICAgIGljb246IGljb25UYWcoJ+6AiCcpXG4gICAgICB9KSxcbiAgICAgIHRvb2xCdXR0b24oe1xuICAgICAgICBjdHJsLFxuICAgICAgICB0YWI6ICdzaGFyZScsXG4gICAgICAgIGhpbnQ6IG5vYXJnKCdzaGFyZUFuZEV4cG9ydCcpLFxuICAgICAgICBpY29uOiBpY29uVGFnKCckJylcbiAgICAgIH0pLFxuICAgICAgaCgnc3Bhbi5oZWxwJywge1xuICAgICAgICBhdHRyczogeyB0aXRsZTogJ05lZWQgaGVscD8gR2V0IHRoZSB0b3VyIScsICdkYXRhLWljb24nOiAn7oCFJyB9LFxuICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwuc3RhcnRUb3VyKVxuICAgICAgfSlcbiAgICBdKSxcbiAgICBoKCdkaXYucmlnaHQnLCBbXG4gICAgICBnYk92ZXJyaWRlQnV0dG9uKGN0cmwpXG4gICAgXSlcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIG1ldGFkYXRhKGN0cmw6IFN0dWR5Q3RybCk6IFZOb2RlIHtcbiAgY29uc3QgZCA9IGN0cmwuZGF0YSxcbiAgICBjcmVkaXQgPSBjdHJsLnJlbGF5ICYmIGN0cmwucmVsYXkuZGF0YS5jcmVkaXQ7XG4gIHJldHVybiBoKCdkaXYuc3R1ZHlfX21ldGFkYXRhJywgW1xuICAgIGgoJ2gyJywgW1xuICAgICAgaCgnc3Bhbi5uYW1lJywgW1xuICAgICAgICBkLm5hbWUsXG4gICAgICAgICc6ICcgKyBjdHJsLmN1cnJlbnRDaGFwdGVyKCkubmFtZSxcbiAgICAgICAgY3JlZGl0ID8gIGgoJ3NwYW4uY3JlZGl0JywgeyBob29rOiByaWNoSFRNTChjcmVkaXQsIGZhbHNlKSB9KSA6IHVuZGVmaW5lZFxuICAgICAgXSksXG4gICAgICBoKCdzcGFuLmxpa2luZy50ZXh0Jywge1xuICAgICAgICBjbGFzczogeyBsaWtlZDogZC5saWtlZCB9LFxuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICdkYXRhLWljb24nOiBkLmxpa2VkID8gJ+6AjScgOiAn7oCJJyxcbiAgICAgICAgICB0aXRsZTogY3RybC50cmFucy5ub2FyZygnbGlrZScpXG4gICAgICAgIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgY3RybC50b2dnbGVMaWtlKVxuICAgICAgfSwgJycgKyBkLmxpa2VzKVxuICAgIF0pLFxuICAgIHRhZ3NWaWV3KGN0cmwpXG4gIF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lkZShjdHJsOiBTdHVkeUN0cmwpOiBWTm9kZSB7XG5cbiAgY29uc3QgYWN0aXZlVGFiID0gY3RybC52bS50YWIoKSxcbiAgICBpbnRybyA9IGN0cmwucmVsYXkgJiYgY3RybC5yZWxheS5pbnRybztcblxuICBjb25zdCBtYWtlVGFiID0gZnVuY3Rpb24oa2V5OiBUYWIsIG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBoKCdzcGFuLicgKyBrZXksIHtcbiAgICAgIGNsYXNzOiB7IGFjdGl2ZTogKCFpbnRybyB8fCAhaW50cm8uYWN0aXZlKSAmJiBhY3RpdmVUYWIgPT09IGtleSB9LFxuICAgICAgaG9vazogYmluZCgnbW91c2Vkb3duJywgKCkgPT4ge1xuICAgICAgICBpZiAoaW50cm8pIGludHJvLmRpc2FibGUoKTtcbiAgICAgICAgY3RybC52bS50YWIoa2V5KTtcbiAgICAgIH0sIGN0cmwucmVkcmF3KVxuICAgIH0sIG5hbWUpO1xuICB9O1xuXG4gIGNvbnN0IGludHJvVGFiID0gaW50cm8gJiYgaW50cm8uZXhpc3RzID8gaCgnc3Bhbi5pbnRybycsIHtcbiAgICBjbGFzczogeyBhY3RpdmU6IGludHJvLmFjdGl2ZSB9LFxuICAgIGhvb2s6IGJpbmQoJ21vdXNlZG93bicsICgpID0+IHsgaW50cm8uYWN0aXZlID0gdHJ1ZSB9LCBjdHJsLnJlZHJhdylcbiAgfSwgW2ljb25UYWcoJ+6AjicpXSkgOiBudWxsO1xuXG4gIGNvbnN0IHRhYnMgPSBoKCdkaXYudGFicy1ob3JpeicsIFtcbiAgICBpbnRyb1RhYixcbiAgICBtYWtlVGFiKCdjaGFwdGVycycsIGN0cmwudHJhbnMucGx1cmFsKGN0cmwucmVsYXkgPyAnbmJHYW1lcycgOiAnbmJDaGFwdGVycycsIGN0cmwuY2hhcHRlcnMuc2l6ZSgpKSksXG4gICAgbWFrZVRhYignbWVtYmVycycsIGN0cmwudHJhbnMucGx1cmFsKCduYk1lbWJlcnMnLCBjdHJsLm1lbWJlcnMuc2l6ZSgpKSksXG4gICAgY3RybC5tZW1iZXJzLmlzT3duZXIoKSA/IGgoJ3NwYW4ubW9yZScsIHtcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4gY3RybC5mb3JtLm9wZW4oIWN0cmwuZm9ybS5vcGVuKCkpLCBjdHJsLnJlZHJhdylcbiAgICB9LCBbIGljb25UYWcoJ1snKSBdKSA6IG51bGxcbiAgXSk7XG5cbiAgcmV0dXJuIGgoJ2Rpdi5zdHVkeV9fc2lkZScsIFtcbiAgICB0YWJzLFxuICAgIChhY3RpdmVUYWIgPT09ICdtZW1iZXJzJyA/IG1lbWJlclZpZXcgOiBjaGFwdGVyVmlldykoY3RybClcbiAgXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250ZXh0TWVudShjdHJsOiBTdHVkeUN0cmwsIHBhdGg6IFRyZWUuUGF0aCwgbm9kZTogVHJlZS5Ob2RlKTogVk5vZGVbXSB7XG4gIHJldHVybiBjdHJsLnZtLm1vZGUud3JpdGUgPyBbXG4gICAgaCgnYScsIHtcbiAgICAgIGF0dHJzOiBkYXRhSWNvbignYycpLFxuICAgICAgaG9vazogYmluZCgnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGN0cmwudm0udG9vbFRhYignY29tbWVudHMnKTtcbiAgICAgICAgY3RybC5jb21tZW50Rm9ybS5zdGFydChjdHJsLmN1cnJlbnRDaGFwdGVyKCkhLmlkLCBwYXRoLCBub2RlKTtcbiAgICAgIH0pXG4gICAgfSwgY3RybC50cmFucy5ub2FyZygnY29tbWVudFRoaXNNb3ZlJykpLFxuICAgIGgoJ2EuZ2x5cGgtaWNvbicsIHtcbiAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjdHJsLnZtLnRvb2xUYWIoJ2dseXBocycpO1xuICAgICAgICBjdHJsLnVzZXJKdW1wKHBhdGgpO1xuICAgICAgfSlcbiAgICB9LCBjdHJsLnRyYW5zLm5vYXJnKCdhbm5vdGF0ZVdpdGhHbHlwaHMnKSlcbiAgXSA6IFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3ZlcmJvYXJkKGN0cmw6IFN0dWR5Q3RybCkge1xuICBpZiAoY3RybC5jaGFwdGVycy5uZXdGb3JtLnZtLm9wZW4pIHJldHVybiBjaGFwdGVyTmV3Rm9ybVZpZXcoY3RybC5jaGFwdGVycy5uZXdGb3JtKTtcbiAgaWYgKGN0cmwuY2hhcHRlcnMuZWRpdEZvcm0uY3VycmVudCgpKSByZXR1cm4gY2hhcHRlckVkaXRGb3JtVmlldyhjdHJsLmNoYXB0ZXJzLmVkaXRGb3JtKTtcbiAgaWYgKGN0cmwubWVtYmVycy5pbnZpdGVGb3JtLm9wZW4oKSkgcmV0dXJuIGludml0ZUZvcm1WaWV3KGN0cmwubWVtYmVycy5pbnZpdGVGb3JtKTtcbiAgaWYgKGN0cmwuZm9ybS5vcGVuKCkpIHJldHVybiBzdHVkeUZvcm1WaWV3KGN0cmwuZm9ybSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmRlcmJvYXJkKGN0cmw6IEFuYWx5c2VDdHJsKTogTWF5YmVWTm9kZXMge1xuICBpZiAoY3RybC5lbWJlZCkgcmV0dXJuIFtdO1xuICBpZiAoY3RybC5zdHVkeVByYWN0aWNlKSByZXR1cm4gcHJhY3RpY2VWaWV3LnVuZGVyYm9hcmQoY3RybC5zdHVkeSEpO1xuICBjb25zdCBzdHVkeSA9IGN0cmwuc3R1ZHkhLCB0b29sVGFiID0gc3R1ZHkudm0udG9vbFRhYigpO1xuICBpZiAoc3R1ZHkuZ2FtZWJvb2tQbGF5KCkpIHJldHVybiBbXG4gICAgZ2JQbGF5QnV0dG9ucyhjdHJsKSxcbiAgICBkZXNjVmlldyhzdHVkeSwgdHJ1ZSksXG4gICAgZGVzY1ZpZXcoc3R1ZHksIGZhbHNlKSxcbiAgICBtZXRhZGF0YShzdHVkeSlcbiAgXTtcbiAgbGV0IHBhbmVsO1xuICBzd2l0Y2godG9vbFRhYikge1xuICAgIGNhc2UgJ3RhZ3MnOlxuICAgICAgcGFuZWwgPSBtZXRhZGF0YShzdHVkeSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdjb21tZW50cyc6XG4gICAgICBwYW5lbCA9IHN0dWR5LnZtLm1vZGUud3JpdGUgP1xuICAgICAgICBjb21tZW50Rm9ybS52aWV3KGN0cmwpIDogKFxuICAgICAgICAgIGNvbW1lbnRGb3JtLnZpZXdEaXNhYmxlZChjdHJsLCBzdHVkeS5tZW1iZXJzLmNhbkNvbnRyaWJ1dGUoKSA/XG4gICAgICAgICAgICAnUHJlc3MgUkVDIHRvIGNvbW1lbnQgbW92ZXMnIDpcbiAgICAgICAgICAgICdPbmx5IHRoZSBzdHVkeSBtZW1iZXJzIGNhbiBjb21tZW50IG9uIG1vdmVzJylcbiAgICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2dseXBocyc6XG4gICAgICBwYW5lbCA9IGN0cmwucGF0aCA/IChcbiAgICAgICAgc3R1ZHkudm0ubW9kZS53cml0ZSA/XG4gICAgICAgIGdseXBoRm9ybS52aWV3KHN0dWR5LmdseXBoRm9ybSkgOlxuICAgICAgICBnbHlwaEZvcm0udmlld0Rpc2FibGVkKCdQcmVzcyBSRUMgdG8gYW5ub3RhdGUgbW92ZXMnKVxuICAgICAgKSA6IGdseXBoRm9ybS52aWV3RGlzYWJsZWQoJ1NlbGVjdCBhIG1vdmUgdG8gYW5ub3RhdGUnKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NlcnZlckV2YWwnOlxuICAgICAgcGFuZWwgPSBzZXJ2ZXJFdmFsVmlldyhzdHVkeS5zZXJ2ZXJFdmFsKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NoYXJlJzpcbiAgICAgIHBhbmVsID0gc3R1ZHlTaGFyZVZpZXcoc3R1ZHkuc2hhcmUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbXVsdGlCb2FyZCc6XG4gICAgICBwYW5lbCA9IG11bHRpQm9hcmRWaWV3KHN0dWR5Lm11bHRpQm9hcmQsIHN0dWR5KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBbXG4gICAgbm90aWZWaWV3KHN0dWR5Lm5vdGlmKSxcbiAgICBkZXNjVmlldyhzdHVkeSwgdHJ1ZSksXG4gICAgZGVzY1ZpZXcoc3R1ZHksIGZhbHNlKSxcbiAgICBidXR0b25zKGN0cmwpLFxuICAgIHBhbmVsXG4gIF07XG59XG4iLCJpbXBvcnQgeyBTdHVkeUNoYXB0ZXJDb25maWcgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5jb25zdCBoZWFkZXJzID0ge1xuICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL3ZuZC5saWNoZXNzLnYzK2pzb24nXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVsb2FkKGJhc2VVcmw6IHN0cmluZywgaWQ6IHN0cmluZywgY2hhcHRlcklkPzogc3RyaW5nKSB7XG4gIGxldCB1cmwgPSAnLycgKyBiYXNlVXJsICsgJy8nICsgaWQ7XG4gIGlmIChjaGFwdGVySWQpIHVybCArPSAnLycgKyBjaGFwdGVySWQ7XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybCxcbiAgICBoZWFkZXJzXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFyaWFudHMoKSB7XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybDogJy92YXJpYW50JyxcbiAgICBoZWFkZXJzLFxuICAgIGNhY2hlOiB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2x5cGhzKCkge1xuICByZXR1cm4gJC5hamF4KHtcbiAgICB1cmw6IHdpbmRvdy5saWNoZXNzLmFzc2V0VXJsKCdnbHlwaHMuanNvbicsIHsgbm9WZXJzaW9uOiB0cnVlIH0pLFxuICAgIGhlYWRlcnMsXG4gICAgY2FjaGU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGFwdGVyQ29uZmlnKHN0dWR5SWQ6IHN0cmluZywgY2hhcHRlcklkOiBzdHJpbmcpOiBKUXVlcnlQcm9taXNlPFN0dWR5Q2hhcHRlckNvbmZpZz4ge1xuICByZXR1cm4gJC5hamF4KHtcbiAgICB1cmw6IGAvc3R1ZHkvJHtzdHVkeUlkfS8ke2NoYXB0ZXJJZH0vbWV0YWAsXG4gICAgaGVhZGVyc1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByYWN0aWNlQ29tcGxldGUoY2hhcHRlcklkOiBzdHJpbmcsIG5iTW92ZXM6IG51bWJlcikge1xuICByZXR1cm4gJC5hamF4KHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6IGAvcHJhY3RpY2UvY29tcGxldGUvJHtjaGFwdGVySWR9LyR7bmJNb3Zlc31gLFxuICAgIGhlYWRlcnNcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbXBvcnRQZ24oc3R1ZHlJZDogc3RyaW5nLCBkYXRhOiBhbnkpIHtcbiAgcmV0dXJuICQuYWpheCh7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiBgL3N0dWR5LyR7c3R1ZHlJZH0vaW1wb3J0LXBnbj9zcmk9JHt3aW5kb3cubGljaGVzcy5zcml9YCxcbiAgICBkYXRhOiBkYXRhLFxuICAgIGhlYWRlcnNcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUJvYXJkKHN0dWR5SWQ6IHN0cmluZywgcGFnZTogbnVtYmVyLCBwbGF5aW5nOiBib29sZWFuKSB7XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIHVybDogYC9zdHVkeS8ke3N0dWR5SWR9L211bHRpLWJvYXJkP3BhZ2U9JHtwYWdlfSZwbGF5aW5nPSR7cGxheWluZ31gLFxuICAgIGhlYWRlcnNcbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgZW1wdHkgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgZml4Q3JhenlTYW4gfSBmcm9tICdjaGVzcyc7XG5pbXBvcnQgeyBwYXRoIGFzIHRyZWVQYXRoLCBvcHMgYXMgdHJlZU9wcyB9IGZyb20gJ3RyZWUnO1xuaW1wb3J0ICogYXMgbW92ZVZpZXcgZnJvbSAnLi4vbW92ZVZpZXcnO1xuaW1wb3J0IHsgYXV0aG9yVGV4dCBhcyBjb21tZW50QXV0aG9yVGV4dCB9IGZyb20gJy4uL3N0dWR5L3N0dWR5Q29tbWVudHMnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuaW1wb3J0IHsgTWF5YmVWTm9kZXMsIENvbmNlYWxPZiwgQ29uY2VhbCB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgbm9uRW1wdHksIG1haW5Ib29rLCBub2RlQ2xhc3NlcywgZmluZEN1cnJlbnRQYXRoLCByZW5kZXJJbmxpbmVDb21tZW50c09mLCB0cnVuY2F0ZUNvbW1lbnQsIHJldHJvTGluZSB9IGZyb20gJy4vdHJlZVZpZXcnO1xuaW1wb3J0IHsgZW5yaWNoVGV4dCwgaW5uZXJIVE1MIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBDdHggYXMgQmFzZUN0eCwgT3B0cyBhcyBCYXNlT3B0cyB9IGZyb20gJy4vdHJlZVZpZXcnO1xuXG5pbnRlcmZhY2UgQ3R4IGV4dGVuZHMgQmFzZUN0eCB7XG4gIGNvbmNlYWxPZjogQ29uY2VhbE9mO1xufVxuaW50ZXJmYWNlIE9wdHMgZXh0ZW5kcyBCYXNlT3B0cyB7XG4gIGNvbmNlYWw/OiBDb25jZWFsO1xuICBub0NvbmNlYWw/OiBib29sZWFuO1xufVxuXG5mdW5jdGlvbiBlbXB0eU1vdmUoY29uY2VhbD86IENvbmNlYWwpOiBWTm9kZSB7XG4gIGNvbnN0IGMgPSB7fTtcbiAgaWYgKGNvbmNlYWwpIGNbY29uY2VhbCBhcyBzdHJpbmddID0gdHJ1ZTtcbiAgcmV0dXJuIGgoJ21vdmUuZW1wdHknLCB7XG4gICAgY2xhc3M6IGNcbiAgfSwgJy4uLicpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDaGlsZHJlbk9mKGN0eDogQ3R4LCBub2RlOiBUcmVlLk5vZGUsIG9wdHM6IE9wdHMpOiBNYXliZVZOb2RlcyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGNzID0gbm9kZS5jaGlsZHJlbixcbiAgbWFpbiA9IGNzWzBdO1xuICBpZiAoIW1haW4pIHJldHVybjtcbiAgY29uc3QgY29uY2VhbCA9IG9wdHMubm9Db25jZWFsID8gbnVsbCA6IChvcHRzLmNvbmNlYWwgfHwgY3R4LmNvbmNlYWxPZih0cnVlKShvcHRzLnBhcmVudFBhdGggKyBtYWluLmlkLCBtYWluKSk7XG4gIGlmIChjb25jZWFsID09PSAnaGlkZScpIHJldHVybjtcbiAgaWYgKG9wdHMuaXNNYWlubGluZSkge1xuICAgIGNvbnN0IGlzV2hpdGUgPSBtYWluLnBseSAlIDIgPT09IDEsXG4gICAgY29tbWVudFRhZ3MgPSByZW5kZXJNYWlubGluZUNvbW1lbnRzT2YoY3R4LCBtYWluLCBjb25jZWFsLCB0cnVlKS5maWx0ZXIobm9uRW1wdHkpO1xuICAgIGlmICghY3NbMV0gJiYgZW1wdHkoY29tbWVudFRhZ3MpICYmICFtYWluLmZvcmNlVmFyaWF0aW9uKSByZXR1cm4gKChpc1doaXRlID8gW21vdmVWaWV3LnJlbmRlckluZGV4KG1haW4ucGx5LCBmYWxzZSldIDogW10pIGFzIE1heWJlVk5vZGVzKS5jb25jYXQoXG4gICAgICByZW5kZXJNb3ZlQW5kQ2hpbGRyZW5PZihjdHgsIG1haW4sIHtcbiAgICAgICAgcGFyZW50UGF0aDogb3B0cy5wYXJlbnRQYXRoLFxuICAgICAgICBpc01haW5saW5lOiB0cnVlLFxuICAgICAgICBjb25jZWFsXG4gICAgICB9KSB8fCBbXVxuICAgICk7XG4gICAgY29uc3QgbWFpbkNoaWxkcmVuID0gbWFpbi5mb3JjZVZhcmlhdGlvbiA/IHVuZGVmaW5lZCA6IHJlbmRlckNoaWxkcmVuT2YoY3R4LCBtYWluLCB7XG4gICAgICBwYXJlbnRQYXRoOiBvcHRzLnBhcmVudFBhdGggKyBtYWluLmlkLFxuICAgICAgaXNNYWlubGluZTogdHJ1ZSxcbiAgICAgIGNvbmNlYWxcbiAgICB9KTtcbiAgICBjb25zdCBwYXNzT3B0cyA9IHtcbiAgICAgIHBhcmVudFBhdGg6IG9wdHMucGFyZW50UGF0aCxcbiAgICAgIGlzTWFpbmxpbmU6ICFtYWluLmZvcmNlVmFyaWF0aW9uLFxuICAgICAgY29uY2VhbFxuICAgIH07XG4gICAgcmV0dXJuIChpc1doaXRlID8gW21vdmVWaWV3LnJlbmRlckluZGV4KG1haW4ucGx5LCBmYWxzZSldIDogW10gYXMgTWF5YmVWTm9kZXMpLmNvbmNhdChcbiAgICAgIG1haW4uZm9yY2VWYXJpYXRpb24gPyBbXSA6IFtcbiAgICAgICAgcmVuZGVyTW92ZU9mKGN0eCwgbWFpbiwgcGFzc09wdHMpLFxuICAgICAgICBpc1doaXRlID8gZW1wdHlNb3ZlKHBhc3NPcHRzLmNvbmNlYWwpIDogbnVsbFxuICAgICAgXSkuY29uY2F0KFtcbiAgICAgICAgaCgnaW50ZXJydXB0JywgY29tbWVudFRhZ3MuY29uY2F0KFxuICAgICAgICAgIHJlbmRlckxpbmVzKGN0eCwgbWFpbi5mb3JjZVZhcmlhdGlvbiA/IGNzIDogY3Muc2xpY2UoMSksIHtcbiAgICAgICAgICAgIHBhcmVudFBhdGg6IG9wdHMucGFyZW50UGF0aCxcbiAgICAgICAgICAgIGlzTWFpbmxpbmU6IHBhc3NPcHRzLmlzTWFpbmxpbmUsXG4gICAgICAgICAgICBjb25jZWFsLFxuICAgICAgICAgICAgbm9Db25jZWFsOiAhY29uY2VhbFxuICAgICAgICAgIH0pXG4gICAgICAgICkpXG4gICAgICBdIGFzIE1heWJlVk5vZGVzKS5jb25jYXQoXG4gICAgICAgIGlzV2hpdGUgJiYgbWFpbkNoaWxkcmVuID8gW1xuICAgICAgICAgIG1vdmVWaWV3LnJlbmRlckluZGV4KG1haW4ucGx5LCBmYWxzZSksXG4gICAgICAgICAgZW1wdHlNb3ZlKHBhc3NPcHRzLmNvbmNlYWwpXG4gICAgICAgIF0gOiBbXSkuY29uY2F0KG1haW5DaGlsZHJlbiB8fCBbXSk7XG4gIH1cbiAgaWYgKCFjc1sxXSkgcmV0dXJuIHJlbmRlck1vdmVBbmRDaGlsZHJlbk9mKGN0eCwgbWFpbiwgb3B0cyk7XG4gIHJldHVybiByZW5kZXJJbmxpbmVkKGN0eCwgY3MsIG9wdHMpIHx8IFtyZW5kZXJMaW5lcyhjdHgsIGNzLCBvcHRzKV07XG59XG5cbmZ1bmN0aW9uIHJlbmRlcklubGluZWQoY3R4OiBDdHgsIG5vZGVzOiBUcmVlLk5vZGVbXSwgb3B0czogT3B0cyk6IE1heWJlVk5vZGVzIHwgdW5kZWZpbmVkIHtcbiAgLy8gb25seSAyIGJyYW5jaGVzXG4gIGlmICghbm9kZXNbMV0gfHwgbm9kZXNbMl0pIHJldHVybjtcbiAgLy8gb25seSBpZiBzZWNvbmQgYnJhbmNoIGhhcyBubyBzdWItYnJhbmNoZXNcbiAgaWYgKHRyZWVPcHMuaGFzQnJhbmNoaW5nKG5vZGVzWzFdLCA2KSkgcmV0dXJuO1xuICByZXR1cm4gcmVuZGVyTW92ZUFuZENoaWxkcmVuT2YoY3R4LCBub2Rlc1swXSwge1xuICAgIHBhcmVudFBhdGg6IG9wdHMucGFyZW50UGF0aCxcbiAgICBpc01haW5saW5lOiBmYWxzZSxcbiAgICBub0NvbmNlYWw6IG9wdHMubm9Db25jZWFsLFxuICAgIGlubGluZTogbm9kZXNbMV1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckxpbmVzKGN0eDogQ3R4LCBub2RlczogVHJlZS5Ob2RlW10sIG9wdHM6IE9wdHMpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdsaW5lcycsIHtcbiAgICBjbGFzczogeyBzaW5nbGU6ICFub2Rlc1sxXSB9XG4gIH0sIG5vZGVzLm1hcChuID0+IHtcbiAgICByZXR1cm4gcmV0cm9MaW5lKGN0eCwgbiwgb3B0cykgfHwgaCgnbGluZScsIHJlbmRlck1vdmVBbmRDaGlsZHJlbk9mKGN0eCwgbiwge1xuICAgICAgcGFyZW50UGF0aDogb3B0cy5wYXJlbnRQYXRoLFxuICAgICAgaXNNYWlubGluZTogZmFsc2UsXG4gICAgICB3aXRoSW5kZXg6IHRydWUsXG4gICAgICBub0NvbmNlYWw6IG9wdHMubm9Db25jZWFsLFxuICAgICAgdHJ1bmNhdGU6IG4uY29tcCAmJiAhdHJlZVBhdGguY29udGFpbnMoY3R4LmN0cmwucGF0aCwgb3B0cy5wYXJlbnRQYXRoICsgbi5pZCkgPyAzIDogdW5kZWZpbmVkXG4gICAgfSkpO1xuICB9KSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlck1vdmVPZihjdHg6IEN0eCwgbm9kZTogVHJlZS5Ob2RlLCBvcHRzOiBPcHRzKTogVk5vZGUge1xuICByZXR1cm4gb3B0cy5pc01haW5saW5lID8gcmVuZGVyTWFpbmxpbmVNb3ZlT2YoY3R4LCBub2RlLCBvcHRzKSA6IHJlbmRlclZhcmlhdGlvbk1vdmVPZihjdHgsIG5vZGUsIG9wdHMpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJNYWlubGluZU1vdmVPZihjdHg6IEN0eCwgbm9kZTogVHJlZS5Ob2RlLCBvcHRzOiBPcHRzKTogVk5vZGUge1xuICBjb25zdCBwYXRoID0gb3B0cy5wYXJlbnRQYXRoICsgbm9kZS5pZCxcbiAgY2xhc3NlcyA9IG5vZGVDbGFzc2VzKGN0eCwgcGF0aCk7XG4gIGlmIChvcHRzLmNvbmNlYWwpIGNsYXNzZXNbb3B0cy5jb25jZWFsIGFzIHN0cmluZ10gPSB0cnVlO1xuICByZXR1cm4gaCgnbW92ZScsIHtcbiAgICBhdHRyczogeyBwOiBwYXRoIH0sXG4gICAgY2xhc3M6IGNsYXNzZXNcbiAgfSwgbW92ZVZpZXcucmVuZGVyTW92ZShjdHgsIG5vZGUpKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVmFyaWF0aW9uTW92ZU9mKGN0eDogQ3R4LCBub2RlOiBUcmVlLk5vZGUsIG9wdHM6IE9wdHMpOiBWTm9kZSB7XG4gIGNvbnN0IHdpdGhJbmRleCA9IG9wdHMud2l0aEluZGV4IHx8IG5vZGUucGx5ICUgMiA9PT0gMSxcbiAgcGF0aCA9IG9wdHMucGFyZW50UGF0aCArIG5vZGUuaWQsXG4gIGNvbnRlbnQ6IE1heWJlVk5vZGVzID0gW1xuICAgIHdpdGhJbmRleCA/IG1vdmVWaWV3LnJlbmRlckluZGV4KG5vZGUucGx5LCB0cnVlKSA6IG51bGwsXG4gICAgZml4Q3JhenlTYW4obm9kZS5zYW4hKVxuICBdLFxuICBjbGFzc2VzID0gbm9kZUNsYXNzZXMoY3R4LCBwYXRoKTtcbiAgaWYgKG9wdHMuY29uY2VhbCkgY2xhc3Nlc1tvcHRzLmNvbmNlYWwgYXMgc3RyaW5nXSA9IHRydWU7XG4gIGlmIChub2RlLmdseXBocykgbW92ZVZpZXcucmVuZGVyR2x5cGhzKG5vZGUuZ2x5cGhzKS5mb3JFYWNoKGcgPT4gY29udGVudC5wdXNoKGcpKTtcbiAgcmV0dXJuIGgoJ21vdmUnLCB7XG4gICAgYXR0cnM6IHsgcDogcGF0aCB9LFxuICAgIGNsYXNzOiBjbGFzc2VzXG4gIH0sIGNvbnRlbnQpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJNb3ZlQW5kQ2hpbGRyZW5PZihjdHg6IEN0eCwgbm9kZTogVHJlZS5Ob2RlLCBvcHRzOiBPcHRzKTogTWF5YmVWTm9kZXMge1xuICBjb25zdCBwYXRoID0gb3B0cy5wYXJlbnRQYXRoICsgbm9kZS5pZDtcbiAgaWYgKG9wdHMudHJ1bmNhdGUgPT09IDApIHJldHVybiBbXG4gICAgaCgnbW92ZScsIHtcbiAgICAgIGF0dHJzOiB7IHA6IHBhdGggfVxuICAgIH0sIFtoKCdpbmRleCcsICdbLi4uXScpXSlcbiAgXTtcbiAgcmV0dXJuIChbcmVuZGVyTW92ZU9mKGN0eCwgbm9kZSwgb3B0cyldIGFzIE1heWJlVk5vZGVzKVxuICAgIC5jb25jYXQocmVuZGVySW5saW5lQ29tbWVudHNPZihjdHgsIG5vZGUpKVxuICAgIC5jb25jYXQob3B0cy5pbmxpbmUgPyByZW5kZXJJbmxpbmUoY3R4LCBvcHRzLmlubGluZSwgb3B0cykgOiBudWxsKVxuICAgIC5jb25jYXQocmVuZGVyQ2hpbGRyZW5PZihjdHgsIG5vZGUsIHtcbiAgICAgIHBhcmVudFBhdGg6IHBhdGgsXG4gICAgICBpc01haW5saW5lOiBvcHRzLmlzTWFpbmxpbmUsXG4gICAgICBub0NvbmNlYWw6IG9wdHMubm9Db25jZWFsLFxuICAgICAgdHJ1bmNhdGU6IG9wdHMudHJ1bmNhdGUgPyBvcHRzLnRydW5jYXRlIC0gMSA6IHVuZGVmaW5lZFxuICAgIH0pIHx8IFtdKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVySW5saW5lKGN0eDogQ3R4LCBub2RlOiBUcmVlLk5vZGUsIG9wdHM6IE9wdHMpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdpbmxpbmUnLCByZW5kZXJNb3ZlQW5kQ2hpbGRyZW5PZihjdHgsIG5vZGUsIHtcbiAgICB3aXRoSW5kZXg6IHRydWUsXG4gICAgcGFyZW50UGF0aDogb3B0cy5wYXJlbnRQYXRoLFxuICAgIGlzTWFpbmxpbmU6IGZhbHNlLFxuICAgIG5vQ29uY2VhbDogb3B0cy5ub0NvbmNlYWwsXG4gICAgdHJ1bmNhdGU6IG9wdHMudHJ1bmNhdGVcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJNYWlubGluZUNvbW1lbnRzT2YoY3R4OiBDdHgsIG5vZGU6IFRyZWUuTm9kZSwgY29uY2VhbDogQ29uY2VhbCwgd2l0aENvbG9yOiBib29sZWFuKTogTWF5YmVWTm9kZXMge1xuXG4gIGlmICghY3R4LmN0cmwuc2hvd0NvbW1lbnRzIHx8IGVtcHR5KG5vZGUuY29tbWVudHMpKSByZXR1cm4gW107XG5cbiAgY29uc3QgY29sb3JDbGFzcyA9IHdpdGhDb2xvciA/IChub2RlLnBseSAlIDIgPT09IDAgPyAnLmJsYWNrICcgOiAnLndoaXRlICcpIDogJyc7XG5cbiAgcmV0dXJuIG5vZGUuY29tbWVudHMhLm1hcChjb21tZW50ID0+IHtcbiAgICBpZiAoY29tbWVudC5ieSA9PT0gJ2xpY2hlc3MnICYmICFjdHguc2hvd0NvbXB1dGVyKSByZXR1cm47XG4gICAgbGV0IHNlbCA9ICdjb21tZW50JyArIGNvbG9yQ2xhc3M7XG4gICAgaWYgKGNvbW1lbnQudGV4dC5zdGFydHNXaXRoKCdJbmFjY3VyYWN5LicpKSBzZWwgKz0gJy5pbmFjY3VyYWN5JztcbiAgICBlbHNlIGlmIChjb21tZW50LnRleHQuc3RhcnRzV2l0aCgnTWlzdGFrZS4nKSkgc2VsICs9ICcubWlzdGFrZSc7XG4gICAgZWxzZSBpZiAoY29tbWVudC50ZXh0LnN0YXJ0c1dpdGgoJ0JsdW5kZXIuJykpIHNlbCArPSAnLmJsdW5kZXInO1xuICAgIGlmIChjb25jZWFsKSBzZWwgKz0gJy4nICsgY29uY2VhbDtcbiAgICBjb25zdCBieSA9IG5vZGUuY29tbWVudHMhWzFdID8gYDxzcGFuIGNsYXNzPVwiYnlcIj4ke2NvbW1lbnRBdXRob3JUZXh0KGNvbW1lbnQuYnkpfTwvc3Bhbj5gIDogJycsXG4gICAgdHJ1bmNhdGVkID0gdHJ1bmNhdGVDb21tZW50KGNvbW1lbnQudGV4dCwgNDAwLCBjdHgpO1xuICAgIHJldHVybiBoKHNlbCwge1xuICAgICAgaG9vazogaW5uZXJIVE1MKHRydW5jYXRlZCwgdGV4dCA9PiBieSArIGVucmljaFRleHQodGV4dCkpXG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCBlbXB0eUNvbmNlYWxPZjogQ29uY2VhbE9mID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIG51bGw7IH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjdHJsOiBBbmFseXNlQ3RybCwgY29uY2VhbE9mPzogQ29uY2VhbE9mKTogVk5vZGUge1xuICBjb25zdCByb290ID0gY3RybC50cmVlLnJvb3Q7XG4gIGNvbnN0IGN0eDogQ3R4ID0ge1xuICAgIGN0cmwsXG4gICAgdHJ1bmNhdGVDb21tZW50czogIWN0cmwuZW1iZWQsXG4gICAgY29uY2VhbE9mOiBjb25jZWFsT2YgfHwgZW1wdHlDb25jZWFsT2YsXG4gICAgc2hvd0NvbXB1dGVyOiBjdHJsLnNob3dDb21wdXRlcigpICYmICFjdHJsLnJldHJvLFxuICAgIHNob3dHbHlwaHM6ICEhY3RybC5zdHVkeSB8fCBjdHJsLnNob3dDb21wdXRlcigpLFxuICAgIHNob3dFdmFsOiBjdHJsLnNob3dDb21wdXRlcigpLFxuICAgIGN1cnJlbnRQYXRoOiBmaW5kQ3VycmVudFBhdGgoY3RybClcbiAgfTtcbiAgY29uc3QgY29tbWVudFRhZ3MgPSByZW5kZXJNYWlubGluZUNvbW1lbnRzT2YoY3R4LCByb290LCBmYWxzZSwgZmFsc2UpO1xuICByZXR1cm4gaCgnZGl2LnR2aWV3Mi50dmlldzItY29sdW1uJywge1xuICAgIGhvb2s6IG1haW5Ib29rKGN0cmwpXG4gIH0sIChbXG4gICAgZW1wdHkoY29tbWVudFRhZ3MpID8gbnVsbCA6IGgoJ2ludGVycnVwdCcsIGNvbW1lbnRUYWdzKSxcbiAgICByb290LnBseSAmIDEgPyBtb3ZlVmlldy5yZW5kZXJJbmRleChyb290LnBseSwgZmFsc2UpIDogbnVsbCxcbiAgICByb290LnBseSAmIDEgPyBlbXB0eU1vdmUoKSA6IG51bGxcbiAgXSBhcyBNYXliZVZOb2RlcykuY29uY2F0KHJlbmRlckNoaWxkcmVuT2YoY3R4LCByb290LCB7XG4gICAgcGFyZW50UGF0aDogJycsXG4gICAgaXNNYWlubGluZTogdHJ1ZVxuICB9KSB8fCBbXSkpO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCBzdHVkeVZpZXcgPSByZXF1aXJlKCcuLi9zdHVkeS9zdHVkeVZpZXcnKTtcbmltcG9ydCB7IG5vZGVGdWxsTmFtZSwgYmluZCB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuaW1wb3J0IHsgcGF0Y2ggfSBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBPcHRzIHtcbiAgcGF0aDogVHJlZS5QYXRoO1xuICByb290OiBBbmFseXNlQ3RybDtcbn1cblxuaW50ZXJmYWNlIENvb3JkcyB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufVxuXG5jb25zdCBlbGVtZW50SWQgPSAnYW5hbHlzZS1jbSc7XG5cbmZ1bmN0aW9uIGdldFBvc2l0aW9uKGU6IE1vdXNlRXZlbnQpOiBDb29yZHMge1xuICBsZXQgcG9zeCA9IDAsIHBvc3kgPSAwO1xuICBpZiAoZS5wYWdlWCB8fCBlLnBhZ2VZKSB7XG4gICAgcG9zeCA9IGUucGFnZVg7XG4gICAgcG9zeSA9IGUucGFnZVk7XG4gIH0gZWxzZSBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WSkge1xuICAgIHBvc3ggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQhLnNjcm9sbExlZnQ7XG4gICAgcG9zeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IS5zY3JvbGxUb3A7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4OiBwb3N4LFxuICAgIHk6IHBvc3lcbiAgfVxufVxuXG5mdW5jdGlvbiBwb3NpdGlvbk1lbnUobWVudTogSFRNTEVsZW1lbnQsIGNvb3JkczogQ29vcmRzKTogdm9pZCB7XG5cbiAgY29uc3QgbWVudVdpZHRoID0gbWVudS5vZmZzZXRXaWR0aCArIDQsXG4gIG1lbnVIZWlnaHQgPSBtZW51Lm9mZnNldEhlaWdodCArIDQsXG4gIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG4gIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICBtZW51LnN0eWxlLmxlZnQgPSAod2luZG93V2lkdGggLSBjb29yZHMueCkgPCBtZW51V2lkdGggP1xuICAgIHdpbmRvd1dpZHRoIC0gbWVudVdpZHRoICsgXCJweFwiIDpcbiAgICBtZW51LnN0eWxlLmxlZnQgPSBjb29yZHMueCArIFwicHhcIjtcblxuICBtZW51LnN0eWxlLnRvcCA9ICh3aW5kb3dIZWlnaHQgLSBjb29yZHMueSkgPCBtZW51SGVpZ2h0ID9cbiAgICB3aW5kb3dIZWlnaHQgLSBtZW51SGVpZ2h0ICsgXCJweFwiIDpcbiAgICBtZW51LnN0eWxlLnRvcCA9IGNvb3Jkcy55ICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBhY3Rpb24oaWNvbjogc3RyaW5nLCB0ZXh0OiBzdHJpbmcsIGhhbmRsZXI6ICgpID0+IHZvaWQpOiBWTm9kZSB7XG4gIHJldHVybiBoKCdhJywge1xuICAgIGF0dHJzOiB7ICdkYXRhLWljb24nOiBpY29uIH0sXG4gICAgaG9vazogYmluZCgnY2xpY2snLCBoYW5kbGVyKVxuICB9LCB0ZXh0KTtcbn1cblxuZnVuY3Rpb24gdmlldyhvcHRzOiBPcHRzLCBjb29yZHM6IENvb3Jkcyk6IFZOb2RlIHtcbiAgY29uc3QgY3RybCA9IG9wdHMucm9vdCxcbiAgbm9kZSA9IGN0cmwudHJlZS5ub2RlQXRQYXRoKG9wdHMucGF0aCksXG4gIG9uTWFpbmxpbmUgPSBjdHJsLnRyZWUucGF0aElzTWFpbmxpbmUob3B0cy5wYXRoKSAmJiAhY3RybC50cmVlLnBhdGhJc0ZvcmNlZFZhcmlhdGlvbihvcHRzLnBhdGgpLFxuICB0cmFucyA9IGN0cmwudHJhbnMubm9hcmc7XG4gIHJldHVybiBoKCdkaXYjJyArIGVsZW1lbnRJZCArICcudmlzaWJsZScsIHtcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IHZub2RlID0+IHBvc2l0aW9uTWVudSh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQsIGNvb3JkcyksXG4gICAgICBwb3N0cGF0Y2g6IChfLCB2bm9kZSkgPT4gcG9zaXRpb25NZW51KHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCwgY29vcmRzKVxuICAgIH1cbiAgfSwgW1xuICAgIGgoJ3AudGl0bGUnLCBub2RlRnVsbE5hbWUobm9kZSkpLFxuICAgIG9uTWFpbmxpbmUgPyBudWxsIDogYWN0aW9uKCdTJywgdHJhbnMoJ3Byb21vdGVWYXJpYXRpb24nKSwgKCkgPT4gY3RybC5wcm9tb3RlKG9wdHMucGF0aCwgZmFsc2UpKSxcbiAgICBvbk1haW5saW5lID8gbnVsbCA6IGFjdGlvbignRScsIHRyYW5zKCdtYWtlTWFpbkxpbmUnKSwgKCkgPT4gY3RybC5wcm9tb3RlKG9wdHMucGF0aCwgdHJ1ZSkpLFxuICAgIGFjdGlvbigncScsIHRyYW5zKCdkZWxldGVGcm9tSGVyZScpLCAoKSA9PiBjdHJsLmRlbGV0ZU5vZGUob3B0cy5wYXRoKSlcbiAgXS5jb25jYXQoXG4gICAgY3RybC5zdHVkeSA/IHN0dWR5Vmlldy5jb250ZXh0TWVudShjdHJsLnN0dWR5LCBvcHRzLnBhdGgsIG5vZGUpIDogW11cbiAgKS5jb25jYXQoW1xuICAgIG9uTWFpbmxpbmUgP1xuICAgIGFjdGlvbignRicsIHRyYW5zKCdmb3JjZVZhcmlhdGlvbicpLCAoKSA9PiBjdHJsLmZvcmNlVmFyaWF0aW9uKG9wdHMucGF0aCwgdHJ1ZSkpIDpcbiAgICBudWxsXG4gIF0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZTogTW91c2VFdmVudCwgb3B0czogT3B0cyk6IHZvaWQge1xuICBjb25zdCBlbCA9ICQoJyMnICsgZWxlbWVudElkKVswXSB8fCAkKCc8ZGl2IGlkPVwiJyArIGVsZW1lbnRJZCArICdcIj4nKS5hcHBlbmRUbygkKCdib2R5JykpWzBdO1xuICBvcHRzLnJvb3QuY29udGV4dE1lbnVQYXRoID0gb3B0cy5wYXRoO1xuICBmdW5jdGlvbiBjbG9zZShlOiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKGUuYnV0dG9uID09PSAyKSByZXR1cm47IC8vIHJpZ2h0IGNsaWNrXG4gICAgb3B0cy5yb290LmNvbnRleHRNZW51UGF0aCA9IHVuZGVmaW5lZDtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlLCBmYWxzZSk7XG4gICAgJCgnIycgKyBlbGVtZW50SWQpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgb3B0cy5yb290LnJlZHJhdygpO1xuICB9O1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlLCBmYWxzZSk7XG4gIGVsLmlubmVySFRNTCA9ICcnO1xuICBwYXRjaChlbCwgdmlldyhvcHRzLCBnZXRQb3NpdGlvbihlKSkpO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IGZpeENyYXp5U2FuIH0gZnJvbSAnY2hlc3MnO1xuaW1wb3J0IHsgcGF0aCBhcyB0cmVlUGF0aCwgb3BzIGFzIHRyZWVPcHMgfSBmcm9tICd0cmVlJztcbmltcG9ydCAqIGFzIG1vdmVWaWV3IGZyb20gJy4uL21vdmVWaWV3JztcbmltcG9ydCBBbmFseXNlQ3RybCBmcm9tICcuLi9jdHJsJztcbmltcG9ydCB7IE1heWJlVk5vZGVzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBtYWluSG9vaywgbm9kZUNsYXNzZXMsIGZpbmRDdXJyZW50UGF0aCwgcmVuZGVySW5saW5lQ29tbWVudHNPZiwgcmV0cm9MaW5lIH0gZnJvbSAnLi90cmVlVmlldyc7XG5pbXBvcnQgeyBDdHgsIE9wdHMgfSBmcm9tICcuL3RyZWVWaWV3JztcblxuZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW5PZihjdHg6IEN0eCwgbm9kZTogVHJlZS5Ob2RlLCBvcHRzOiBPcHRzKTogTWF5YmVWTm9kZXMgfCB1bmRlZmluZWQge1xuICBjb25zdCBjcyA9IG5vZGUuY2hpbGRyZW4sXG4gIG1haW4gPSBjc1swXTtcbiAgaWYgKCFtYWluKSByZXR1cm47XG4gIGlmIChvcHRzLmlzTWFpbmxpbmUpIHtcbiAgICBpZiAoIWNzWzFdICYmICFtYWluLmZvcmNlVmFyaWF0aW9uKSByZXR1cm4gcmVuZGVyTW92ZUFuZENoaWxkcmVuT2YoY3R4LCBtYWluLCB7XG4gICAgICBwYXJlbnRQYXRoOiBvcHRzLnBhcmVudFBhdGgsXG4gICAgICBpc01haW5saW5lOiB0cnVlLFxuICAgICAgd2l0aEluZGV4OiBvcHRzLndpdGhJbmRleFxuICAgIH0pO1xuICAgIHJldHVybiByZW5kZXJJbmxpbmVkKGN0eCwgY3MsIG9wdHMpIHx8IFtcbiAgICAgIC4uLihtYWluLmZvcmNlVmFyaWF0aW9uID8gW10gOiBbXG4gICAgICAgIHJlbmRlck1vdmVPZihjdHgsIG1haW4sIHtcbiAgICAgICAgICBwYXJlbnRQYXRoOiBvcHRzLnBhcmVudFBhdGgsXG4gICAgICAgICAgaXNNYWlubGluZTogdHJ1ZSxcbiAgICAgICAgICB3aXRoSW5kZXg6IG9wdHMud2l0aEluZGV4XG4gICAgICAgIH0pLFxuICAgICAgICAuLi5yZW5kZXJJbmxpbmVDb21tZW50c09mKGN0eCwgbWFpbilcbiAgICAgIF0pLFxuICAgICAgaCgnaW50ZXJydXB0JywgcmVuZGVyTGluZXMoY3R4LCBtYWluLmZvcmNlVmFyaWF0aW9uID8gY3MgOiBjcy5zbGljZSgxKSwge1xuICAgICAgICBwYXJlbnRQYXRoOiBvcHRzLnBhcmVudFBhdGgsXG4gICAgICAgIGlzTWFpbmxpbmU6IHRydWVcbiAgICAgIH0pKSxcbiAgICAgIC4uLihtYWluLmZvcmNlVmFyaWF0aW9uID8gW10gOiAocmVuZGVyQ2hpbGRyZW5PZihjdHgsIG1haW4sIHtcbiAgICAgICAgcGFyZW50UGF0aDogb3B0cy5wYXJlbnRQYXRoICsgbWFpbi5pZCxcbiAgICAgICAgaXNNYWlubGluZTogdHJ1ZSxcbiAgICAgICAgd2l0aEluZGV4OiB0cnVlXG4gICAgICB9KSB8fCBbXSkpXG4gICAgXTtcbiAgfVxuICBpZiAoIWNzWzFdKSByZXR1cm4gcmVuZGVyTW92ZUFuZENoaWxkcmVuT2YoY3R4LCBtYWluLCBvcHRzKTtcbiAgcmV0dXJuIHJlbmRlcklubGluZWQoY3R4LCBjcywgb3B0cykgfHwgW3JlbmRlckxpbmVzKGN0eCwgY3MsIG9wdHMpXTtcbn1cblxuZnVuY3Rpb24gcmVuZGVySW5saW5lZChjdHg6IEN0eCwgbm9kZXM6IFRyZWUuTm9kZVtdLCBvcHRzOiBPcHRzKTogTWF5YmVWTm9kZXMgfCB1bmRlZmluZWQge1xuICAvLyBvbmx5IDIgYnJhbmNoZXNcbiAgaWYgKCFub2Rlc1sxXSB8fCBub2Rlc1syXSB8fCBub2Rlc1swXS5mb3JjZVZhcmlhdGlvbikgcmV0dXJuO1xuICAvLyBvbmx5IGlmIHNlY29uZCBicmFuY2ggaGFzIG5vIHN1Yi1icmFuY2hlc1xuICBpZiAodHJlZU9wcy5oYXNCcmFuY2hpbmcobm9kZXNbMV0sIDYpKSByZXR1cm47XG4gIHJldHVybiByZW5kZXJNb3ZlQW5kQ2hpbGRyZW5PZihjdHgsIG5vZGVzWzBdLCB7XG4gICAgcGFyZW50UGF0aDogb3B0cy5wYXJlbnRQYXRoLFxuICAgIGlzTWFpbmxpbmU6IG9wdHMuaXNNYWlubGluZSxcbiAgICBpbmxpbmU6IG5vZGVzWzFdXG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMaW5lcyhjdHg6IEN0eCwgbm9kZXM6IFRyZWUuTm9kZVtdLCBvcHRzOiBPcHRzKTogVk5vZGUge1xuICByZXR1cm4gaCgnbGluZXMnLCBub2Rlcy5tYXAobiA9PiB7XG4gICAgcmV0dXJuIHJldHJvTGluZShjdHgsIG4sIG9wdHMpIHx8IGgoJ2xpbmUnLCByZW5kZXJNb3ZlQW5kQ2hpbGRyZW5PZihjdHgsIG4sIHtcbiAgICAgIHBhcmVudFBhdGg6IG9wdHMucGFyZW50UGF0aCxcbiAgICAgIGlzTWFpbmxpbmU6IGZhbHNlLFxuICAgICAgd2l0aEluZGV4OiB0cnVlLFxuICAgICAgdHJ1bmNhdGU6IG4uY29tcCAmJiAhdHJlZVBhdGguY29udGFpbnMoY3R4LmN0cmwucGF0aCwgb3B0cy5wYXJlbnRQYXRoICsgbi5pZCkgPyAzIDogdW5kZWZpbmVkXG4gICAgfSkpO1xuICB9KSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlck1vdmVBbmRDaGlsZHJlbk9mKGN0eDogQ3R4LCBub2RlOiBUcmVlLk5vZGUsIG9wdHM6IE9wdHMpOiBNYXliZVZOb2RlcyB7XG4gIGNvbnN0IHBhdGggPSBvcHRzLnBhcmVudFBhdGggKyBub2RlLmlkLFxuICBjb21tZW50cyA9IHJlbmRlcklubGluZUNvbW1lbnRzT2YoY3R4LCBub2RlKTtcbiAgaWYgKG9wdHMudHJ1bmNhdGUgPT09IDApIHJldHVybiBbXG4gICAgaCgnbW92ZScsIHsgYXR0cnM6IHsgcDogcGF0aCB9IH0sICdbLi4uXScpXG4gIF07XG4gIHJldHVybiAoW3JlbmRlck1vdmVPZihjdHgsIG5vZGUsIG9wdHMpXSBhcyBNYXliZVZOb2RlcylcbiAgICAuY29uY2F0KGNvbW1lbnRzKVxuICAgIC5jb25jYXQob3B0cy5pbmxpbmUgPyByZW5kZXJJbmxpbmUoY3R4LCBvcHRzLmlubGluZSwgb3B0cykgOiBudWxsKVxuICAgIC5jb25jYXQocmVuZGVyQ2hpbGRyZW5PZihjdHgsIG5vZGUsIHtcbiAgICAgIHBhcmVudFBhdGg6IHBhdGgsXG4gICAgICBpc01haW5saW5lOiBvcHRzLmlzTWFpbmxpbmUsXG4gICAgICB0cnVuY2F0ZTogb3B0cy50cnVuY2F0ZSA/IG9wdHMudHJ1bmNhdGUgLSAxIDogdW5kZWZpbmVkLFxuICAgICAgd2l0aEluZGV4OiAhIWNvbW1lbnRzWzBdXG4gICAgfSkgfHwgW10pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJJbmxpbmUoY3R4OiBDdHgsIG5vZGU6IFRyZWUuTm9kZSwgb3B0czogT3B0cyk6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2lubGluZScsIHJlbmRlck1vdmVBbmRDaGlsZHJlbk9mKGN0eCwgbm9kZSwge1xuICAgIHdpdGhJbmRleDogdHJ1ZSxcbiAgICBwYXJlbnRQYXRoOiBvcHRzLnBhcmVudFBhdGgsXG4gICAgaXNNYWlubGluZTogZmFsc2VcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJNb3ZlT2YoY3R4OiBDdHgsIG5vZGU6IFRyZWUuTm9kZSwgb3B0czogT3B0cyk6IFZOb2RlIHtcbiAgY29uc3QgcGF0aCA9IG9wdHMucGFyZW50UGF0aCArIG5vZGUuaWQsXG4gIGNvbnRlbnQ6IE1heWJlVk5vZGVzID0gW1xuICAgIG9wdHMud2l0aEluZGV4IHx8IG5vZGUucGx5ICYgMSA/IG1vdmVWaWV3LnJlbmRlckluZGV4KG5vZGUucGx5LCB0cnVlKSA6IG51bGwsXG4gICAgZml4Q3JhenlTYW4obm9kZS5zYW4hKVxuICBdO1xuICBpZiAobm9kZS5nbHlwaHMpIG1vdmVWaWV3LnJlbmRlckdseXBocyhub2RlLmdseXBocykuZm9yRWFjaChnID0+IGNvbnRlbnQucHVzaChnKSk7XG4gIHJldHVybiBoKCdtb3ZlJywge1xuICAgIGF0dHJzOiB7IHA6IHBhdGggfSxcbiAgICBjbGFzczogbm9kZUNsYXNzZXMoY3R4LCBwYXRoKVxuICB9LCBjb250ZW50KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY3RybDogQW5hbHlzZUN0cmwpOiBWTm9kZSB7XG4gIGNvbnN0IGN0eDogQ3R4ID0ge1xuICAgIGN0cmwsXG4gICAgdHJ1bmNhdGVDb21tZW50czogZmFsc2UsXG4gICAgc2hvd0NvbXB1dGVyOiBjdHJsLnNob3dDb21wdXRlcigpICYmICFjdHJsLnJldHJvLFxuICAgIHNob3dHbHlwaHM6ICEhY3RybC5zdHVkeSB8fCBjdHJsLnNob3dDb21wdXRlcigpLFxuICAgIHNob3dFdmFsOiAhIWN0cmwuc3R1ZHkgfHwgY3RybC5zaG93Q29tcHV0ZXIoKSxcbiAgICBjdXJyZW50UGF0aDogZmluZEN1cnJlbnRQYXRoKGN0cmwpXG4gIH07XG4gIHJldHVybiBoKCdkaXYudHZpZXcyLnR2aWV3Mi1pbmxpbmUnLCB7XG4gICAgaG9vazogbWFpbkhvb2soY3RybClcbiAgfSwgW1xuICAgIC4uLnJlbmRlcklubGluZUNvbW1lbnRzT2YoY3R4LCBjdHJsLnRyZWUucm9vdCksXG4gICAgLi4uKHJlbmRlckNoaWxkcmVuT2YoY3R4LCBjdHJsLnRyZWUucm9vdCwge1xuICAgICAgcGFyZW50UGF0aDogJycsXG4gICAgICBpc01haW5saW5lOiB0cnVlXG4gICAgfSkgfHwgW10pXG4gIF0pO1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IEhvb2tzIH0gZnJvbSAnc25hYmJkb20vaG9va3MnXG5pbXBvcnQgeyBwbGF5YWJsZSB9IGZyb20gJ2dhbWUnO1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4uL2N0cmwnO1xuaW1wb3J0IGNvbnRleHRNZW51IGZyb20gJy4vY29udGV4dE1lbnUnO1xuaW1wb3J0IHsgTWF5YmVWTm9kZXMsIENvbmNlYWxPZiB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgYXV0aG9yVGV4dCBhcyBjb21tZW50QXV0aG9yVGV4dCB9IGZyb20gJy4uL3N0dWR5L3N0dWR5Q29tbWVudHMnO1xuaW1wb3J0IHsgZW5yaWNoVGV4dCwgaW5uZXJIVE1MIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBwYXRoIGFzIHRyZWVQYXRoIH0gZnJvbSAndHJlZSc7XG5pbXBvcnQgY29sdW1uIGZyb20gJy4vY29sdW1uVmlldyc7XG5pbXBvcnQgaW5saW5lIGZyb20gJy4vaW5saW5lVmlldyc7XG5pbXBvcnQgeyBlbXB0eSwgZGVmaW5lZCB9IGZyb20gJ2NvbW1vbic7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnY29tbW9uL3Rocm90dGxlJztcbmltcG9ydCB7IHN0b3JlZFByb3AsIFN0b3JlZFByb3AgfSBmcm9tICdjb21tb24vc3RvcmFnZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3R4IHtcbiAgY3RybDogQW5hbHlzZUN0cmw7XG4gIHNob3dDb21wdXRlcjogYm9vbGVhbjtcbiAgc2hvd0dseXBoczogYm9vbGVhbjtcbiAgc2hvd0V2YWw6IGJvb2xlYW47XG4gIHRydW5jYXRlQ29tbWVudHM6IGJvb2xlYW47XG4gIGN1cnJlbnRQYXRoOiBUcmVlLlBhdGggfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0cyB7XG4gIHBhcmVudFBhdGg6IFRyZWUuUGF0aDtcbiAgaXNNYWlubGluZTogYm9vbGVhbjtcbiAgaW5saW5lPzogVHJlZS5Ob2RlO1xuICB3aXRoSW5kZXg/OiBib29sZWFuO1xuICB0cnVuY2F0ZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlQ2xhc3NlcyB7XG4gIGFjdGl2ZTogYm9vbGVhbjtcbiAgJ2NvbnRleHQtbWVudSc6IGJvb2xlYW47XG4gIGN1cnJlbnQ6IGJvb2xlYW47XG4gIG5vbmdhbWU6IGJvb2xlYW47XG4gIFtrZXk6IHN0cmluZ106IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIFRyZWVWaWV3S2V5ID0gJ2NvbHVtbicgfCAnaW5saW5lJztcblxuZXhwb3J0IGludGVyZmFjZSBUcmVlVmlldyB7XG4gIGdldDogU3RvcmVkUHJvcDxUcmVlVmlld0tleT47XG4gIHNldChpbmxpbmU6IGJvb2xlYW4pOiB2b2lkO1xuICB0b2dnbGUoKTogdm9pZDtcbiAgaW5saW5lKCk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdHJsKGluaXRpYWxWYWx1ZTogVHJlZVZpZXdLZXkgPSAnY29sdW1uJyk6IFRyZWVWaWV3IHtcbiAgY29uc3QgdmFsdWUgPSBzdG9yZWRQcm9wPFRyZWVWaWV3S2V5PigndHJlZVZpZXcnLCBpbml0aWFsVmFsdWUpO1xuICBmdW5jdGlvbiBpbmxpbmUoKSB7XG4gICAgcmV0dXJuIHZhbHVlKCkgPT09ICdpbmxpbmUnO1xuICB9XG4gIGZ1bmN0aW9uIHNldChpOiBib29sZWFuKSB7XG4gICAgdmFsdWUoaSA/ICdpbmxpbmUnIDogJ2NvbHVtbicpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZ2V0OiB2YWx1ZSxcbiAgICBzZXQsXG4gICAgdG9nZ2xlKCkge1xuICAgICAgc2V0KCFpbmxpbmUoKSk7XG4gICAgfSxcbiAgICBpbmxpbmVcbiAgfTtcbn1cblxuLy8gZW50cnkgcG9pbnQsIGRpc3BhdGNoaW5nIHRvIHNlbGVjdGVkIHZpZXdcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoY3RybDogQW5hbHlzZUN0cmwsIGNvbmNlYWxPZj86IENvbmNlYWxPZik6IFZOb2RlIHtcbiAgcmV0dXJuIChjdHJsLnRyZWVWaWV3LmlubGluZSgpIHx8IHdpbmRvdy5saWNoZXNzLmlzQ29sMSgpKSA/IGlubGluZShjdHJsKSA6IGNvbHVtbihjdHJsLCBjb25jZWFsT2YpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9kZUNsYXNzZXMoY3R4OiBDdHgsIHBhdGg6IFRyZWUuUGF0aCk6IE5vZGVDbGFzc2VzIHtcbiAgcmV0dXJuIHtcbiAgICBhY3RpdmU6IHBhdGggPT09IGN0eC5jdHJsLnBhdGgsXG4gICAgJ2NvbnRleHQtbWVudSc6IHBhdGggPT09IGN0eC5jdHJsLmNvbnRleHRNZW51UGF0aCxcbiAgICBjdXJyZW50OiBwYXRoID09PSBjdHguY3VycmVudFBhdGgsXG4gICAgbm9uZ2FtZTogIWN0eC5jdXJyZW50UGF0aCAmJiAhIWN0eC5jdHJsLmdhbWVQYXRoICYmIHRyZWVQYXRoLmNvbnRhaW5zKHBhdGgsIGN0eC5jdHJsLmdhbWVQYXRoKSAmJiBwYXRoICE9PSBjdHguY3RybC5nYW1lUGF0aFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEN1cnJlbnRQYXRoKGM6IEFuYWx5c2VDdHJsKTogVHJlZS5QYXRoIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuICghYy5zeW50aGV0aWMgJiYgcGxheWFibGUoYy5kYXRhKSAmJiBjLmluaXRpYWxQYXRoKSB8fCAoXG4gICAgYy5yZXRybyAmJiBjLnJldHJvLmN1cnJlbnQoKSAmJiBjLnJldHJvLmN1cnJlbnQoKS5wcmV2LnBhdGhcbiAgKSB8fCAoXG4gICAgYy5zdHVkeSAmJiBjLnN0dWR5LmRhdGEuY2hhcHRlci5yZWxheSAmJiBjLnN0dWR5LmRhdGEuY2hhcHRlci5yZWxheS5wYXRoXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJJbmxpbmVDb21tZW50c09mKGN0eDogQ3R4LCBub2RlOiBUcmVlLk5vZGUpOiBNYXliZVZOb2RlcyB7XG4gIGlmICghY3R4LmN0cmwuc2hvd0NvbW1lbnRzIHx8IGVtcHR5KG5vZGUuY29tbWVudHMpKSByZXR1cm4gW107XG4gIHJldHVybiBub2RlLmNvbW1lbnRzIS5tYXAoY29tbWVudCA9PiB7XG4gICAgaWYgKGNvbW1lbnQuYnkgPT09ICdsaWNoZXNzJyAmJiAhY3R4LnNob3dDb21wdXRlcikgcmV0dXJuO1xuICAgIGNvbnN0IGJ5ID0gbm9kZS5jb21tZW50cyFbMV0gPyBgPHNwYW4gY2xhc3M9XCJieVwiPiR7Y29tbWVudEF1dGhvclRleHQoY29tbWVudC5ieSl9PC9zcGFuPmAgOiAnJyxcbiAgICB0cnVuY2F0ZWQgPSB0cnVuY2F0ZUNvbW1lbnQoY29tbWVudC50ZXh0LCAzMDAsIGN0eCk7XG4gICAgcmV0dXJuIGgoJ2NvbW1lbnQnLCB7XG4gICAgICBob29rOiBpbm5lckhUTUwodHJ1bmNhdGVkLCB0ZXh0ID0+IGJ5ICsgZW5yaWNoVGV4dCh0ZXh0KSlcbiAgICB9KTtcbiAgfSkuZmlsdGVyKG5vbkVtcHR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlQ29tbWVudCh0ZXh0OiBzdHJpbmcsIGxlbjogbnVtYmVyLCBjdHg6IEN0eCkge1xuICByZXR1cm4gY3R4LnRydW5jYXRlQ29tbWVudHMgJiYgdGV4dC5sZW5ndGggPiBsZW4gPyB0ZXh0LnNsaWNlKDAsIGxlbiAtIDEwKSArICcgWy4uLl0nIDogdGV4dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1haW5Ib29rKGN0cmw6IEFuYWx5c2VDdHJsKTogSG9va3Mge1xuICByZXR1cm4ge1xuICAgIGluc2VydDogdm5vZGUgPT4ge1xuICAgICAgY29uc3QgZWwgPSB2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoY3RybC5wYXRoICE9PSAnJykgYXV0b1Njcm9sbChjdHJsLCBlbCk7XG4gICAgICBlbC5vbmNvbnRleHRtZW51ID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IGV2ZW50UGF0aChlKTtcbiAgICAgICAgaWYgKHBhdGggIT09IG51bGwpIGNvbnRleHRNZW51KGUsIHtcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHJvb3Q6IGN0cmxcbiAgICAgICAgfSk7XG4gICAgICAgIGN0cmwucmVkcmF3KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZGVmaW5lZChlLmJ1dHRvbikgJiYgZS5idXR0b24gIT09IDApIHJldHVybjsgLy8gb25seSB0b3VjaCBvciBsZWZ0IGNsaWNrXG4gICAgICAgIGNvbnN0IHBhdGggPSBldmVudFBhdGgoZSk7XG4gICAgICAgIGlmIChwYXRoKSBjdHJsLnVzZXJKdW1wKHBhdGgpO1xuICAgICAgICBjdHJsLnJlZHJhdygpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwb3N0cGF0Y2g6IChfLCB2bm9kZSkgPT4ge1xuICAgICAgaWYgKGN0cmwuYXV0b1Njcm9sbFJlcXVlc3RlZCkge1xuICAgICAgICBhdXRvU2Nyb2xsKGN0cmwsIHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgIGN0cmwuYXV0b1Njcm9sbFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldHJvTGluZShjdHg6IEN0eCwgbm9kZTogVHJlZS5Ob2RlLCBvcHRzOiBPcHRzKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICByZXR1cm4gbm9kZS5jb21wICYmIGN0eC5jdHJsLnJldHJvICYmIGN0eC5jdHJsLnJldHJvLmhpZGVDb21wdXRlckxpbmUobm9kZSwgb3B0cy5wYXJlbnRQYXRoKSA/XG4gIGgoJ2xpbmUnLCBjdHguY3RybC50cmFucy5ub2FyZygnbGVhcm5Gcm9tVGhpc01pc3Rha2UnKSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGV2ZW50UGF0aChlOiBNb3VzZUV2ZW50KTogVHJlZS5QYXRoIHwgbnVsbCB7XG4gIHJldHVybiAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmdldEF0dHJpYnV0ZSgncCcpIHx8XG4gICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQpLmdldEF0dHJpYnV0ZSgncCcpO1xufVxuXG5leHBvcnQgY29uc3QgYXV0b1Njcm9sbCA9IHRocm90dGxlKDIwMCwgKGN0cmw6IEFuYWx5c2VDdHJsLCBlbDogSFRNTEVsZW1lbnQpID0+IHtcbiAgY29uc3QgY29udCA9IGVsLnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmICghY29udCkgcmV0dXJuO1xuICBjb25zdCB0YXJnZXQgPSBlbC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgY29udC5zY3JvbGxUb3AgPSBjdHJsLnBhdGggPyA5OTk5OSA6IDA7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnQuc2Nyb2xsVG9wID0gdGFyZ2V0Lm9mZnNldFRvcCAtIGNvbnQub2Zmc2V0SGVpZ2h0IC8gMiArIHRhcmdldC5vZmZzZXRIZWlnaHQ7XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vbkVtcHR5KHg6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gISF4O1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSc7XG5pbXBvcnQgeyBIb29rcyB9IGZyb20gJ3NuYWJiZG9tL2hvb2tzJ1xuaW1wb3J0IHsgQXR0cnMgfSBmcm9tICdzbmFiYmRvbS9tb2R1bGVzL2F0dHJpYnV0ZXMnXG5pbXBvcnQgeyBmaXhDcmF6eVNhbiB9IGZyb20gJ2NoZXNzJztcblxuZXhwb3J0IGNvbnN0IGVtcHR5UmVkQnV0dG9uID0gJ2J1dHRvbi5idXR0b24uYnV0dG9uLXJlZC5idXR0b24tZW1wdHknO1xuXG5leHBvcnQgZnVuY3Rpb24gcGx5Q29sb3IocGx5OiBudW1iZXIpOiBDb2xvciB7XG4gIHJldHVybiAocGx5ICUgMiA9PT0gMCkgPyAnd2hpdGUnIDogJ2JsYWNrJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRNb2JpbGVNb3VzZWRvd24oZWw6IEhUTUxFbGVtZW50LCBmOiAoZTogRXZlbnQpID0+IGFueSwgcmVkcmF3PzogKCkgPT4gdm9pZCkge1xuICBmb3IgKGNvbnN0IG1vdXNlZG93bkV2ZW50IG9mIFsndG91Y2hzdGFydCcsICdtb3VzZWRvd24nXSkge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIobW91c2Vkb3duRXZlbnQsIGUgPT4ge1xuICAgICAgZihlKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChyZWRyYXcpIHJlZHJhdygpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxpc3RlblRvKGVsOiBIVE1MRWxlbWVudCwgZXZlbnROYW1lOiBzdHJpbmcsIGY6IChlOiBFdmVudCkgPT4gYW55LCByZWRyYXc/OiAoKSA9PiB2b2lkKSB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBlID0+IHtcbiAgICBjb25zdCByZXMgPSBmKGUpO1xuICAgIGlmIChyZXMgPT09IGZhbHNlKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHJlZHJhdykgcmVkcmF3KCk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmQoZXZlbnROYW1lOiBzdHJpbmcsIGY6IChlOiBFdmVudCkgPT4gYW55LCByZWRyYXc/OiAoKSA9PiB2b2lkKTogSG9va3Mge1xuICByZXR1cm4gb25JbnNlcnQoZWwgPT4gbGlzdGVuVG8oZWwsIGV2ZW50TmFtZSwgZiwgcmVkcmF3KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kU3VibWl0KGY6IChlOiBFdmVudCkgPT4gYW55LCByZWRyYXc/OiAoKSA9PiB2b2lkKTogSG9va3Mge1xuICByZXR1cm4gYmluZCgnc3VibWl0JywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBmKGUpO1xuICB9LCByZWRyYXcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb25JbnNlcnQ8QSBleHRlbmRzIEhUTUxFbGVtZW50PihmOiAoZWxlbWVudDogQSkgPT4gdm9pZCk6IEhvb2tzIHtcbiAgcmV0dXJuIHtcbiAgICBpbnNlcnQ6IHZub2RlID0+IGYodm5vZGUuZWxtIGFzIEEpXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkT25seVByb3A8QT4odmFsdWU6IEEpOiAoKSA9PiBBIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCk6IEEge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFJY29uKGljb246IHN0cmluZyk6IEF0dHJzIHtcbiAgcmV0dXJuIHtcbiAgICAnZGF0YS1pY29uJzogaWNvblxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaWNvblRhZyhpY29uOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGgoJ2knLCB7IGF0dHJzOiBkYXRhSWNvbihpY29uKSB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBseVRvVHVybihwbHk6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLmZsb29yKChwbHkgLSAxKSAvIDIpICsgMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVGdWxsTmFtZShub2RlOiBUcmVlLk5vZGUpIHtcbiAgaWYgKG5vZGUuc2FuKSByZXR1cm4gcGx5VG9UdXJuKG5vZGUucGx5KSArIChcbiAgICBub2RlLnBseSAlIDIgPT09IDEgPyAnLicgOiAnLi4uJ1xuICApICsgJyAnICsgZml4Q3JhenlTYW4obm9kZS5zYW4pO1xuICByZXR1cm4gJ0luaXRpYWwgcG9zaXRpb24nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGx1cmFsKG5vdW46IHN0cmluZywgbmI6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBuYiArICcgJyArIChuYiA9PT0gMSA/IG5vdW4gOiBub3VuICsgJ3MnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpdGxlTmFtZVRvSWQodGl0bGVOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzcGxpdCA9IHRpdGxlTmFtZS5zcGxpdCgnICcpO1xuICByZXR1cm4gKHNwbGl0Lmxlbmd0aCA9PT0gMSA/IHNwbGl0WzBdIDogc3BsaXRbMV0pLnRvTG93ZXJDYXNlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGlubmVyKCk6IFZOb2RlIHtcbiAgcmV0dXJuIGgoJ2Rpdi5zcGlubmVyJywgW1xuICAgIGgoJ3N2ZycsIHsgYXR0cnM6IHsgdmlld0JveDogJzAgMCA0MCA0MCcgfSB9LCBbXG4gICAgICBoKCdjaXJjbGUnLCB7XG4gICAgICAgIGF0dHJzOiB7IGN4OiAyMCwgY3k6IDIwLCByOiAxOCwgZmlsbDogJ25vbmUnIH1cbiAgICAgIH0pXSldKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlubmVySFRNTDxBPihhOiBBLCB0b0h0bWw6IChhOiBBKSA9PiBzdHJpbmcpOiBIb29rcyB7XG4gIHJldHVybiB7XG4gICAgaW5zZXJ0KHZub2RlKSB7XG4gICAgICAodm5vZGUuZWxtIGFzIEhUTUxFbGVtZW50KS5pbm5lckhUTUwgPSB0b0h0bWwoYSk7XG4gICAgICB2bm9kZS5kYXRhIS5jYWNoZWRBID0gYTtcbiAgICB9LFxuICAgIHBvc3RwYXRjaChvbGQsIHZub2RlKSB7XG4gICAgICBpZiAob2xkLmRhdGEhLmNhY2hlZEEgIT09IGEpIHtcbiAgICAgICAgKHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCkuaW5uZXJIVE1MID0gdG9IdG1sKGEpO1xuICAgICAgfVxuICAgICAgdm5vZGUuZGF0YSEuY2FjaGVkQSA9IGE7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmljaEhUTUwodGV4dDogc3RyaW5nLCBuZXdMaW5lczogYm9vbGVhbiA9IHRydWUpOiBIb29rcyB7XG4gIHJldHVybiBpbm5lckhUTUwodGV4dCwgdCA9PiBlbnJpY2hUZXh0KHQsIG5ld0xpbmVzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlVXJsKCkge1xuICByZXR1cm4gYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sfS8vJHt3aW5kb3cubG9jYXRpb24uaG9zdH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9Zb3VUdWJlRW1iZWQodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCBlbWJlZFVybCA9IHRvWW91VHViZUVtYmVkVXJsKHVybCk7XG4gIGlmIChlbWJlZFVybCkgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZW1iZWRcIj48aWZyYW1lIHdpZHRoPVwiMTAwJVwiIHNyYz1cIiR7ZW1iZWRVcmx9XCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3c9XCJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZVwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT48L2Rpdj5gO1xufVxuXG5mdW5jdGlvbiB0b1lvdVR1YmVFbWJlZFVybCh1cmwpIHtcbiAgaWYgKCF1cmwpIHJldHVybjtcbiAgdmFyIG0gPSB1cmwubWF0Y2goLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/KD86eW91dHViZVxcLmNvbXx5b3V0dVxcLmJlKVxcLyg/OndhdGNoKT8oPzpcXD92PSk/KFteXCImP1xcLyBdezExfSkoPzpcXD98JnwpKFxcUyopL2kpO1xuICBpZiAoIW0pIHJldHVybjtcbiAgdmFyIHN0YXJ0ID0gMDtcbiAgbVsyXS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24ocCkge1xuICAgIHZhciBzID0gcC5zcGxpdCgnPScpO1xuICAgIGlmIChzWzBdID09PSAndCcgfHwgc1swXSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgaWYgKHNbMV0ubWF0Y2goL15cXGQrJC8pKSBzdGFydCA9IHBhcnNlSW50KHNbMV0pO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBuID0gc1sxXS5tYXRjaCgvKD86KFxcZCspaCk/KD86KFxcZCspbSk/KD86KFxcZCspcyk/Lyk7XG4gICAgICAgIHN0YXJ0ID0gKHBhcnNlSW50KG5bMV0pIHx8IDApICogMzYwMCArIChwYXJzZUludChuWzJdKSB8fCAwKSAqIDYwICsgKHBhcnNlSW50KG5bM10pIHx8IDApO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHZhciBwYXJhbXMgPSAnbW9kZXN0YnJhbmRpbmc9MSZyZWw9MCZjb250cm9scz0yJml2X2xvYWRfcG9saWN5PTMnICsgKHN0YXJ0ID8gJyZzdGFydD0nICsgc3RhcnQgOiAnJyk7XG4gIHJldHVybiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJyArIG1bMV0gKyAnPycgKyBwYXJhbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b1R3aXRjaEVtYmVkKHVybDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgZW1iZWRVcmwgPSB0b1R3aXRjaEVtYmVkVXJsKHVybCk7XG4gIGlmIChlbWJlZFVybCkgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZW1iZWRcIj48aWZyYW1lIHdpZHRoPVwiMTAwJVwiIHNyYz1cIiR7ZW1iZWRVcmx9XCIgZnJhbWVib3JkZXI9MCBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+PC9kaXY+YDtcbn1cblxuZnVuY3Rpb24gdG9Ud2l0Y2hFbWJlZFVybCh1cmwpIHtcbiAgaWYgKCF1cmwpIHJldHVybjtcbiAgdmFyIG0gPSB1cmwubWF0Y2goLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/KD86dHdpdGNoLnR2KVxcLyhbXlwiJj8vIF0rKS9pKTtcbmlmIChtKSByZXR1cm4gJ2h0dHBzOi8vcGxheWVyLnR3aXRjaC50di8/Y2hhbm5lbD0nICsgbVsxXSArICcmYXV0b3BsYXk9ZmFsc2UnO1xufVxuXG5jb25zdCBjb21tZW50WW91dHViZVJlZ2V4ID0gLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/KD86eW91dHViZVxcLmNvbVxcLyg/Oi4qPyg/Ols/Jl12PSl8dlxcLyl8eW91dHVcXC5iZVxcLykoPzpbXlwiJj9cXC8gXXsxMX0pXFxiL2k7XG5jb25zdCBjb21tZW50VHdpdGNoUmVnZXggPSAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT8oPzp0d2l0Y2gudHYpXFwvKFteXCImPy8gXSspKD86XFw/fCZ8KShcXFMqKS9pO1xuY29uc3QgaW1nVXJsUmVnZXggPSAvXFwuKGpwZ3xqcGVnfHBuZ3xnaWYpJC87XG5jb25zdCBuZXdMaW5lUmVnZXggPSAvXFxuL2c7XG5cbmZ1bmN0aW9uIGltYWdlVGFnKHVybDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgaWYgKGltZ1VybFJlZ2V4LnRlc3QodXJsKSkgcmV0dXJuIGA8aW1nIHNyYz1cIiR7dXJsfVwiIGNsYXNzPVwiZW1iZWRcIi8+YDtcbn1cblxuZnVuY3Rpb24gdG9MaW5rKHVybDogc3RyaW5nKSB7XG4gIGlmIChjb21tZW50WW91dHViZVJlZ2V4LnRlc3QodXJsKSkgcmV0dXJuIHRvWW91VHViZUVtYmVkKHVybCkgfHwgdXJsO1xuICBpZiAoY29tbWVudFR3aXRjaFJlZ2V4LnRlc3QodXJsKSkgcmV0dXJuIHRvVHdpdGNoRW1iZWQodXJsKSB8fCB1cmw7XG4gIGNvbnN0IHNob3cgPSBpbWFnZVRhZyh1cmwpIHx8IHVybC5yZXBsYWNlKC9odHRwcz86XFwvXFwvLywgJycpO1xuICByZXR1cm4gJzxhIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vZm9sbG93XCIgaHJlZj1cIicgKyB1cmwgKyAnXCI+JyArIHNob3cgKyAnPC9hPic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnJpY2hUZXh0KHRleHQ6IHN0cmluZywgYWxsb3dOZXdsaW5lczogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICBsZXQgaHRtbCA9IGF1dG9saW5rKHdpbmRvdy5saWNoZXNzLmVzY2FwZUh0bWwodGV4dCksIHRvTGluayk7XG4gIGlmIChhbGxvd05ld2xpbmVzKSBodG1sID0gaHRtbC5yZXBsYWNlKG5ld0xpbmVSZWdleCwgJzxicj4nKTtcbiAgcmV0dXJuIGh0bWw7XG59XG5cbi8vIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2JyeWFud29vZHMvYXV0b2xpbmstanMvYmxvYi9tYXN0ZXIvYXV0b2xpbmsuanNcbmNvbnN0IGxpbmtSZWdleCA9IC8oXnxbXFxzXFxuXXw8W0EtWmEtel0qXFwvPz4pKCg/Omh0dHBzP3xmdHApOlxcL1xcL1tcXC1BLVowLTkrXFx1MDAyNlxcdTIwMTlAI1xcLyU/PSgpfl98ITosLjtdKltcXC1BLVowLTkrXFx1MDAyNkAjXFwvJT1+KClffF0pL2dpO1xuXG5leHBvcnQgZnVuY3Rpb24gYXV0b2xpbmsoc3RyOiBzdHJpbmcsIGNhbGxiYWNrOiAoc3RyOiBzdHJpbmcpID0+IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIucmVwbGFjZShsaW5rUmVnZXgsIChfLCBzcGFjZSwgdXJsKSA9PiBzcGFjZSArIGNhbGxiYWNrKHVybCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uKHZhbHVlOiBzdHJpbmcsIGN1cnJlbnQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgbmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiBoKCdvcHRpb24nLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHNlbGVjdGVkOiB2YWx1ZSA9PT0gY3VycmVudFxuICAgIH0sXG4gIH0sIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsVG8oZWw6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkLCB0YXJnZXQ6IEhUTUxFbGVtZW50IHwgIG51bGwpIHtcbiAgaWYgKGVsICYmIHRhcmdldCkgZWwuc2Nyb2xsVG9wID0gdGFyZ2V0Lm9mZnNldFRvcCAtIGVsLm9mZnNldEhlaWdodCAvIDIgKyB0YXJnZXQub2Zmc2V0SGVpZ2h0IC8gMjtcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgKiBhcyBjaGVzc2dyb3VuZCBmcm9tICcuL2dyb3VuZCc7XG5pbXBvcnQgeyBiaW5kLCBvbkluc2VydCwgZGF0YUljb24sIHNwaW5uZXIsIGJpbmRNb2JpbGVNb3VzZWRvd24gfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgZ2V0UGxheWVyLCBwbGF5YWJsZSB9IGZyb20gJ2dhbWUnO1xuaW1wb3J0ICogYXMgcm91dGVyIGZyb20gJ2dhbWUvcm91dGVyJztcbmltcG9ydCBzdGF0dXNWaWV3IGZyb20gJ2dhbWUvdmlldy9zdGF0dXMnO1xuaW1wb3J0IHsgcGF0aCBhcyB0cmVlUGF0aCB9IGZyb20gJ3RyZWUnO1xuaW1wb3J0IHsgcmVuZGVyIGFzIHJlbmRlclRyZWVWaWV3IH0gZnJvbSAnLi90cmVlVmlldy90cmVlVmlldyc7XG5pbXBvcnQgKiBhcyBjb250cm9sIGZyb20gJy4vY29udHJvbCc7XG5pbXBvcnQgeyB2aWV3IGFzIGFjdGlvbk1lbnUgfSBmcm9tICcuL2FjdGlvbk1lbnUnO1xuaW1wb3J0IHsgdmlldyBhcyByZW5kZXJQcm9tb3Rpb24gfSBmcm9tICcuL3Byb21vdGlvbic7XG5pbXBvcnQgcmVuZGVyQ2xvY2tzIGZyb20gJy4vY2xvY2tzJztcbmltcG9ydCAqIGFzIHBnbkV4cG9ydCBmcm9tICcuL3BnbkV4cG9ydCc7XG5pbXBvcnQgZm9yZWNhc3RWaWV3IGZyb20gJy4vZm9yZWNhc3QvZm9yZWNhc3RWaWV3JztcbmltcG9ydCB7IHZpZXcgYXMgY2V2YWxWaWV3IH0gZnJvbSAnY2V2YWwnO1xuaW1wb3J0IGNyYXp5VmlldyBmcm9tICcuL2NyYXp5L2NyYXp5Vmlldyc7XG5pbXBvcnQgeyB2aWV3IGFzIGtleWJvYXJkVmlld30gZnJvbSAnLi9rZXlib2FyZCc7XG5pbXBvcnQgZXhwbG9yZXJWaWV3IGZyb20gJy4vZXhwbG9yZXIvZXhwbG9yZXJWaWV3JztcbmltcG9ydCByZXRyb1ZpZXcgZnJvbSAnLi9yZXRyb3NwZWN0L3JldHJvVmlldyc7XG5pbXBvcnQgcHJhY3RpY2VWaWV3IGZyb20gJy4vcHJhY3RpY2UvcHJhY3RpY2VWaWV3JztcbmltcG9ydCAqIGFzIGdiRWRpdCBmcm9tICcuL3N0dWR5L2dhbWVib29rL2dhbWVib29rRWRpdCc7XG5pbXBvcnQgKiBhcyBnYlBsYXkgZnJvbSAnLi9zdHVkeS9nYW1lYm9vay9nYW1lYm9va1BsYXlWaWV3JztcbmltcG9ydCB7IFN0dWR5Q3RybCB9IGZyb20gJy4vc3R1ZHkvaW50ZXJmYWNlcyc7XG5pbXBvcnQgKiBhcyBzdHVkeVZpZXcgZnJvbSAnLi9zdHVkeS9zdHVkeVZpZXcnO1xuaW1wb3J0ICogYXMgc3R1ZHlQcmFjdGljZVZpZXcgZnJvbSAnLi9zdHVkeS9wcmFjdGljZS9zdHVkeVByYWN0aWNlVmlldyc7XG5pbXBvcnQgeyB2aWV3IGFzIGZvcmtWaWV3IH0gZnJvbSAnLi9mb3JrJ1xuaW1wb3J0IHsgcmVuZGVyIGFzIGFjcGxWaWV3IH0gZnJvbSAnLi9hY3BsJ1xuaW1wb3J0IEFuYWx5c2VDdHJsIGZyb20gJy4vY3RybCc7XG5pbXBvcnQgeyBDb25jZWFsT2YgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHJlbGF5TWFuYWdlciBmcm9tICcuL3N0dWR5L3JlbGF5L3JlbGF5TWFuYWdlclZpZXcnO1xuaW1wb3J0IHJlbGF5SW50cm8gZnJvbSAnLi9zdHVkeS9yZWxheS9yZWxheUludHJvVmlldyc7XG5pbXBvcnQgcmVuZGVyUGxheWVyQmFycyBmcm9tICcuL3N0dWR5L3BsYXllckJhcnMnO1xuaW1wb3J0IHNlcnZlclNpZGVVbmRlcmJvYXJkIGZyb20gJy4vc2VydmVyU2lkZVVuZGVyYm9hcmQnO1xuaW1wb3J0ICogYXMgZ3JpZEhhY2tzIGZyb20gJy4vZ3JpZEhhY2tzJztcblxuY29uc3QgbGkgPSB3aW5kb3cubGljaGVzcztcblxuZnVuY3Rpb24gcmVuZGVyUmVzdWx0KGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGVbXSB7XG4gIGxldCByZXN1bHQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgaWYgKGN0cmwuZGF0YS5nYW1lLnN0YXR1cy5pZCA+PSAzMCkgc3dpdGNoIChjdHJsLmRhdGEuZ2FtZS53aW5uZXIpIHtcbiAgICBjYXNlICd3aGl0ZSc6XG4gICAgICByZXN1bHQgPSAnMS0wJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2JsYWNrJzpcbiAgICAgIHJlc3VsdCA9ICcwLTEnO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJlc3VsdCA9ICfCvS3CvSc7XG4gIH1cbiAgY29uc3QgdGFnczogVk5vZGVbXSA9IFtdO1xuICBpZiAocmVzdWx0KSB7XG4gICAgdGFncy5wdXNoKGgoJ2Rpdi5yZXN1bHQnLCByZXN1bHQpKTtcbiAgICBjb25zdCB3aW5uZXIgPSBnZXRQbGF5ZXIoY3RybC5kYXRhLCBjdHJsLmRhdGEuZ2FtZS53aW5uZXIhKTtcbiAgICB0YWdzLnB1c2goaCgnZGl2LnN0YXR1cycsIFtcbiAgICAgIHN0YXR1c1ZpZXcoY3RybCksXG4gICAgICB3aW5uZXIgPyAnLCAnICsgY3RybC50cmFucyh3aW5uZXIuY29sb3IgPT0gJ3doaXRlJyA/ICd3aGl0ZUlzVmljdG9yaW91cycgOiAnYmxhY2tJc1ZpY3RvcmlvdXMnKSA6IG51bGxcbiAgICBdKSk7XG4gIH1cbiAgcmV0dXJuIHRhZ3M7XG59XG5cbmZ1bmN0aW9uIG1ha2VDb25jZWFsT2YoY3RybDogQW5hbHlzZUN0cmwpOiBDb25jZWFsT2YgfCB1bmRlZmluZWQge1xuICBjb25zdCBjb25jZWFsID0gKGN0cmwuc3R1ZHkgJiYgY3RybC5zdHVkeS5kYXRhLmNoYXB0ZXIuY29uY2VhbCAhPT0gdW5kZWZpbmVkKSA/IHtcbiAgICBvd25lcjogY3RybC5zdHVkeS5pc0NoYXB0ZXJPd25lcigpLFxuICAgIHBseTogY3RybC5zdHVkeS5kYXRhLmNoYXB0ZXIuY29uY2VhbFxuICB9IDogbnVsbDtcbiAgaWYgKGNvbmNlYWwpIHJldHVybiBmdW5jdGlvbihpc01haW5saW5lOiBib29sZWFuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHBhdGg6IFRyZWUuUGF0aCwgbm9kZTogVHJlZS5Ob2RlKSB7XG4gICAgICBpZiAoIWNvbmNlYWwgfHwgKGlzTWFpbmxpbmUgJiYgY29uY2VhbC5wbHkgPj0gbm9kZS5wbHkpKSByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh0cmVlUGF0aC5jb250YWlucyhjdHJsLnBhdGgsIHBhdGgpKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiBjb25jZWFsLm93bmVyID8gJ2NvbmNlYWwnIDogJ2hpZGUnO1xuICAgIH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlbmRlckFuYWx5c2UoY3RybDogQW5hbHlzZUN0cmwsIGNvbmNlYWxPZj86IENvbmNlYWxPZikge1xuICByZXR1cm4gaCgnZGl2LmFuYWx5c2VfX21vdmVzLmFyZXBsYXknLCBbXG4gICAgKGN0cmwuZW1iZWQgJiYgY3RybC5zdHVkeSkgPyBoKCdkaXYuY2hhcHRlci1uYW1lJywgY3RybC5zdHVkeS5jdXJyZW50Q2hhcHRlcigpLm5hbWUpIDogbnVsbCxcbiAgICByZW5kZXJPcGVuaW5nQm94KGN0cmwpLFxuICAgIHJlbmRlclRyZWVWaWV3KGN0cmwsIGNvbmNlYWxPZiksXG4gIF0uY29uY2F0KHJlbmRlclJlc3VsdChjdHJsKSkpO1xufVxuXG5mdW5jdGlvbiB3aGVlbChjdHJsOiBBbmFseXNlQ3RybCwgZTogV2hlZWxFdmVudCkge1xuICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgaWYgKHRhcmdldC50YWdOYW1lICE9PSAnUElFQ0UnICYmIHRhcmdldC50YWdOYW1lICE9PSAnU1FVQVJFJyAmJiB0YXJnZXQudGFnTmFtZSAhPT0gJ0NHLUJPQVJEJykgcmV0dXJuO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGlmIChlLmRlbHRhWSA+IDApIGNvbnRyb2wubmV4dChjdHJsKTtcbiAgZWxzZSBpZiAoZS5kZWx0YVkgPCAwKSBjb250cm9sLnByZXYoY3RybCk7XG4gIGN0cmwucmVkcmF3KCk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaW5wdXRzKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUgfCB1bmRlZmluZWQge1xuICBpZiAoY3RybC5vbmdvaW5nIHx8ICFjdHJsLmRhdGEudXNlckFuYWx5c2lzKSByZXR1cm47XG4gIGlmIChjdHJsLnJlZGlyZWN0aW5nKSByZXR1cm4gc3Bpbm5lcigpO1xuICByZXR1cm4gaCgnZGl2LmNvcHlhYmxlcycsIFtcbiAgICBoKCdkaXYucGFpcicsIFtcbiAgICAgIGgoJ2xhYmVsLm5hbWUnLCAnRkVOJyksXG4gICAgICBoKCdpbnB1dC5jb3B5YWJsZS5hdXRvc2VsZWN0LmFuYWx5c2VfX3VuZGVyYm9hcmRfX2ZlbicsIHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICBzcGVsbENoZWNrOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogY3RybC5ub2RlLmZlblxuICAgICAgICB9LFxuICAgICAgICBob29rOiBiaW5kKCdjaGFuZ2UnLCBlID0+IHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IGN0cmwubm9kZS5mZW4pIGN0cmwuY2hhbmdlRmVuKHZhbHVlKTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgXSksXG4gICAgaCgnZGl2LnBnbicsIFtcbiAgICAgIGgoJ2Rpdi5wYWlyJywgW1xuICAgICAgICBoKCdsYWJlbC5uYW1lJywgJ1BHTicpLFxuICAgICAgICBoKCd0ZXh0YXJlYS5jb3B5YWJsZS5hdXRvc2VsZWN0Jywge1xuICAgICAgICAgIGF0dHJzOiB7IHNwZWxsQ2hlY2s6IGZhbHNlIH0sXG4gICAgICAgICAgaG9vazoge1xuICAgICAgICAgICAgcG9zdHBhdGNoOiAoXywgdm5vZGUpID0+IHtcbiAgICAgICAgICAgICAgKHZub2RlLmVsbSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHBnbkV4cG9ydC5yZW5kZXJGdWxsVHh0KGN0cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGgoJ2J1dHRvbi5idXR0b24uYnV0dG9uLXRoaW4uYWN0aW9uLnRleHQnLCB7XG4gICAgICAgICAgYXR0cnM6IGRhdGFJY29uKCdHJyksXG4gICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBfID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBnbiA9ICQoJy5jb3B5YWJsZXMgLnBnbiB0ZXh0YXJlYScpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKHBnbiAhPT0gcGduRXhwb3J0LnJlbmRlckZ1bGxUeHQoY3RybCkpIGN0cmwuY2hhbmdlUGduKHBnbik7XG4gICAgICAgICAgfSwgY3RybC5yZWRyYXcpXG4gICAgICAgIH0sIGN0cmwudHJhbnMubm9hcmcoJ2ltcG9ydFBnbicpKVxuICAgICAgXSlcbiAgICBdKVxuICBdKTtcbn1cblxuZnVuY3Rpb24ganVtcEJ1dHRvbihpY29uOiBzdHJpbmcsIGVmZmVjdDogc3RyaW5nLCBlbmFibGVkOiBib29sZWFuKTogVk5vZGUge1xuICByZXR1cm4gaCgnYnV0dG9uLmZidCcsIHtcbiAgICBjbGFzczogeyBkaXNhYmxlZDogIWVuYWJsZWQgfSxcbiAgICBhdHRyczogeyAnZGF0YS1hY3QnOiBlZmZlY3QsICdkYXRhLWljb24nOiBpY29uIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRhdGFBY3QoZTogRXZlbnQpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gIHJldHVybiB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdCcpIHx8XG4gICAgKHRhcmdldC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50KS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0Jyk7XG59XG5cblxuZnVuY3Rpb24gcmVwZWF0ZXIoY3RybDogQW5hbHlzZUN0cmwsIGFjdGlvbjogJ3ByZXYnIHwgJ25leHQnLCBlOiBFdmVudCkge1xuICBjb25zdCByZXBlYXQgPSBmdW5jdGlvbigpIHtcbiAgICBjb250cm9sW2FjdGlvbl0oY3RybCk7XG4gICAgY3RybC5yZWRyYXcoKTtcbiAgICBkZWxheSA9IE1hdGgubWF4KDEwMCwgZGVsYXkgLSBkZWxheSAvIDE1KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChyZXBlYXQsIGRlbGF5KTtcbiAgfTtcbiAgbGV0IGRlbGF5ID0gMzUwO1xuICBsZXQgdGltZW91dCA9IHNldFRpbWVvdXQocmVwZWF0LCA1MDApO1xuICBjb250cm9sW2FjdGlvbl0oY3RybCk7XG4gIGNvbnN0IGV2ZW50TmFtZSA9IGUudHlwZSA9PSAndG91Y2hzdGFydCcgPyAndG91Y2hlbmQnIDogJ21vdXNldXAnO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpLCB7b25jZTogdHJ1ZX0pO1xufVxuXG5mdW5jdGlvbiBjb250cm9scyhjdHJsOiBBbmFseXNlQ3RybCkge1xuICBjb25zdCBjYW5KdW1wUHJldiA9IGN0cmwucGF0aCAhPT0gJycsXG4gICAgY2FuSnVtcE5leHQgPSAhIWN0cmwubm9kZS5jaGlsZHJlblswXSxcbiAgICBtZW51SXNPcGVuID0gY3RybC5hY3Rpb25NZW51Lm9wZW4sXG4gICAgbm9hcmcgPSBjdHJsLnRyYW5zLm5vYXJnO1xuICByZXR1cm4gaCgnZGl2LmFuYWx5c2VfX2NvbnRyb2xzLmFuYWx5c2UtY29udHJvbHMnLCB7XG4gICAgaG9vazogb25JbnNlcnQoZWwgPT4ge1xuICAgICAgYmluZE1vYmlsZU1vdXNlZG93bihlbCwgZSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGRhdGFBY3QoZSk7XG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdwcmV2JyB8fCBhY3Rpb24gPT09ICduZXh0JykgcmVwZWF0ZXIoY3RybCwgYWN0aW9uLCBlKTtcbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnZmlyc3QnKSBjb250cm9sLmZpcnN0KGN0cmwpO1xuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdsYXN0JykgY29udHJvbC5sYXN0KGN0cmwpO1xuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdleHBsb3JlcicpIGN0cmwudG9nZ2xlRXhwbG9yZXIoKTtcbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAncHJhY3RpY2UnKSBjdHJsLnRvZ2dsZVByYWN0aWNlKCk7XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ21lbnUnKSBjdHJsLmFjdGlvbk1lbnUudG9nZ2xlKCk7XG4gICAgICB9LCBjdHJsLnJlZHJhdyk7XG4gICAgfSlcbiAgfSwgW1xuICAgIGN0cmwuZW1iZWQgPyBudWxsIDogaCgnZGl2LmZlYXR1cmVzJywgY3RybC5zdHVkeVByYWN0aWNlID8gW1xuICAgICAgaCgnYS5mYnQnLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgdGl0bGU6IG5vYXJnKCdhbmFseXNpcycpLFxuICAgICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgICAgaHJlZjogY3RybC5zdHVkeVByYWN0aWNlLmFuYWx5c2lzVXJsKCksXG4gICAgICAgICAgJ2RhdGEtaWNvbic6ICdBJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIF0gOiBbXG4gICAgICBoKCdidXR0b24uZmJ0Jywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgIHRpdGxlOiBub2FyZygnb3BlbmluZ0V4cGxvcmVyQW5kVGFibGViYXNlJyksXG4gICAgICAgICAgJ2RhdGEtYWN0JzogJ2V4cGxvcmVyJyxcbiAgICAgICAgICAnZGF0YS1pY29uJzogJ10nXG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzOiB7XG4gICAgICAgICAgaGlkZGVuOiBtZW51SXNPcGVuIHx8ICFjdHJsLmV4cGxvcmVyLmFsbG93ZWQoKSB8fCAhIWN0cmwucmV0cm8sXG4gICAgICAgICAgYWN0aXZlOiBjdHJsLmV4cGxvcmVyLmVuYWJsZWQoKVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGN0cmwuY2V2YWwucG9zc2libGUgJiYgY3RybC5jZXZhbC5hbGxvd2VkKCkgJiYgIWN0cmwuaXNHYW1lYm9vaygpID8gaCgnYnV0dG9uLmZidCcsIHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICB0aXRsZTogbm9hcmcoJ3ByYWN0aWNlV2l0aENvbXB1dGVyJyksXG4gICAgICAgICAgJ2RhdGEtYWN0JzogJ3ByYWN0aWNlJyxcbiAgICAgICAgICAnZGF0YS1pY29uJzogJ+6AgSdcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3M6IHtcbiAgICAgICAgICBoaWRkZW46IG1lbnVJc09wZW4gfHwgISFjdHJsLnJldHJvLFxuICAgICAgICAgIGFjdGl2ZTogISFjdHJsLnByYWN0aWNlXG4gICAgICAgIH1cbiAgICAgIH0pIDogbnVsbFxuICAgIF0pLFxuICAgIGgoJ2Rpdi5qdW1wcycsIFtcbiAgICAgIGp1bXBCdXR0b24oJ1cnLCAnZmlyc3QnLCBjYW5KdW1wUHJldiksXG4gICAgICBqdW1wQnV0dG9uKCdZJywgJ3ByZXYnLCBjYW5KdW1wUHJldiksXG4gICAgICBqdW1wQnV0dG9uKCdYJywgJ25leHQnLCBjYW5KdW1wTmV4dCksXG4gICAgICBqdW1wQnV0dG9uKCdWJywgJ2xhc3QnLCBjYW5KdW1wTmV4dClcbiAgICBdKSxcbiAgICBjdHJsLnN0dWR5UHJhY3RpY2UgPyBoKCdkaXYubm9vcCcpIDogaCgnYnV0dG9uLmZidCcsIHtcbiAgICAgIGNsYXNzOiB7IGFjdGl2ZTogbWVudUlzT3BlbiB9LFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdGl0bGU6IG5vYXJnKCdtZW51JyksXG4gICAgICAgICdkYXRhLWFjdCc6ICdtZW51JyxcbiAgICAgICAgJ2RhdGEtaWNvbic6ICdbJ1xuICAgICAgfVxuICAgIH0pXG4gIF0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJPcGVuaW5nQm94KGN0cmw6IEFuYWx5c2VDdHJsKSB7XG4gIGxldCBvcGVuaW5nID0gY3RybC50cmVlLmdldE9wZW5pbmcoY3RybC5ub2RlTGlzdCk7XG4gIGlmICghb3BlbmluZyAmJiAhY3RybC5wYXRoKSBvcGVuaW5nID0gY3RybC5kYXRhLmdhbWUub3BlbmluZztcbiAgaWYgKG9wZW5pbmcpIHJldHVybiBoKCdkaXYub3BlbmluZ19ib3gnLCB7XG4gICAgYXR0cnM6IHsgdGl0bGU6IG9wZW5pbmcuZWNvICsgJyAnICsgb3BlbmluZy5uYW1lIH1cbiAgfSwgW1xuICAgIGgoJ3N0cm9uZycsIG9wZW5pbmcuZWNvKSxcbiAgICAnICcgKyBvcGVuaW5nLm5hbWVcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIGZvcmNlSW5uZXJDb29yZHMoY3RybDogQW5hbHlzZUN0cmwsIHY6IGJvb2xlYW4pIHtcbiAgaWYgKGN0cmwuZGF0YS5wcmVmLmNvb3JkcyA9PSAyKVxuICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnY29vcmRzLWluJywgdikudG9nZ2xlQ2xhc3MoJ2Nvb3Jkcy1vdXQnLCAhdik7XG59XG5cbmZ1bmN0aW9uIGFkZENoYXB0ZXJJZChzdHVkeTogU3R1ZHlDdHJsIHwgdW5kZWZpbmVkLCBjc3NDbGFzczogc3RyaW5nKSB7XG4gIHJldHVybiBjc3NDbGFzcyArIChzdHVkeSAmJiBzdHVkeS5kYXRhLmNoYXB0ZXIgPyAnLicgKyBzdHVkeS5kYXRhLmNoYXB0ZXIuaWQgOiAnJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGN0cmw6IEFuYWx5c2VDdHJsKTogVk5vZGUge1xuICBpZiAoY3RybC5udnVpKSByZXR1cm4gY3RybC5udnVpLnJlbmRlcihjdHJsKTtcbiAgY29uc3QgY29uY2VhbE9mID0gbWFrZUNvbmNlYWxPZihjdHJsKSxcbiAgICBzdHVkeSA9IGN0cmwuc3R1ZHksXG4gICAgc2hvd0NldmFsUHZzID0gIShjdHJsLnJldHJvICYmIGN0cmwucmV0cm8uaXNTb2x2aW5nKCkpICYmICFjdHJsLnByYWN0aWNlLFxuICAgIG1lbnVJc09wZW4gPSBjdHJsLmFjdGlvbk1lbnUub3BlbixcbiAgICBnYW1lYm9va1BsYXkgPSBjdHJsLmdhbWVib29rUGxheSgpLFxuICAgIGdhbWVib29rUGxheVZpZXcgPSBnYW1lYm9va1BsYXkgJiYgZ2JQbGF5LnJlbmRlcihnYW1lYm9va1BsYXkpLFxuICAgIGdhbWVib29rRWRpdFZpZXcgPSBnYkVkaXQucnVubmluZyhjdHJsKSA/IGdiRWRpdC5yZW5kZXIoY3RybCkgOiB1bmRlZmluZWQsXG4gICAgcGxheWVyQmFycyA9IHJlbmRlclBsYXllckJhcnMoY3RybCksXG4gICAgY2xvY2tzID0gIXBsYXllckJhcnMgJiYgcmVuZGVyQ2xvY2tzKGN0cmwpLFxuICAgIGdhdWdlT24gPSBjdHJsLnNob3dFdmFsR2F1Z2UoKSxcbiAgICBuZWVkc0lubmVyQ29vcmRzID0gISFnYXVnZU9uIHx8ICEhcGxheWVyQmFycyxcbiAgICBpbnRybyA9IHJlbGF5SW50cm8oY3RybCk7XG4gIHJldHVybiBoKCdtYWluLmFuYWx5c2UudmFyaWFudC0nICsgY3RybC5kYXRhLmdhbWUudmFyaWFudC5rZXksIHtcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IHZuID0+IHtcbiAgICAgICAgZm9yY2VJbm5lckNvb3JkcyhjdHJsLCBuZWVkc0lubmVyQ29vcmRzKTtcbiAgICAgICAgaWYgKCEhcGxheWVyQmFycyAhPSAkKCdib2R5JykuaGFzQ2xhc3MoJ2hlYWRlci1tYXJnaW4nKSkge1xuICAgICAgICAgIGxpLnJhZigoKSA9PiB7XG4gICAgICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ2hlYWRlci1tYXJnaW4nLCAhIXBsYXllckJhcnMpO1xuICAgICAgICAgICAgY3RybC5yZWRyYXcoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBncmlkSGFja3Muc3RhcnQodm4uZWxtIGFzIEhUTUxFbGVtZW50KTtcbiAgICAgIH0sXG4gICAgICB1cGRhdGUoXywgXzIpIHtcbiAgICAgICAgZm9yY2VJbm5lckNvb3JkcyhjdHJsLCBuZWVkc0lubmVyQ29vcmRzKTtcbiAgICAgIH0sXG4gICAgICBwb3N0cGF0Y2gob2xkLCB2bm9kZSkge1xuICAgICAgICBpZiAob2xkLmRhdGEhLmdhdWdlT24gIT09IGdhdWdlT24pIGxpLmRpc3BhdGNoRXZlbnQoZG9jdW1lbnQuYm9keSwgJ2NoZXNzZ3JvdW5kLnJlc2l6ZScpO1xuICAgICAgICB2bm9kZS5kYXRhIS5nYXVnZU9uID0gZ2F1Z2VPbjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsYXNzOiB7XG4gICAgICAnY29tcC1vZmYnOiAhY3RybC5zaG93Q29tcHV0ZXIoKSxcbiAgICAgICdnYXVnZS1vbic6IGdhdWdlT24sXG4gICAgICAnaGFzLXBsYXllcnMnOiAhIXBsYXllckJhcnMsXG4gICAgICAnaGFzLWNsb2Nrcyc6ICEhY2xvY2tzLFxuICAgICAgJ2hhcy1pbnRybyc6ICEhaW50cm9cbiAgICB9XG4gIH0sIFtcbiAgICBjdHJsLmtleWJvYXJkSGVscCA/IGtleWJvYXJkVmlldyhjdHJsKSA6IG51bGwsXG4gICAgc3R1ZHkgPyBzdHVkeVZpZXcub3ZlcmJvYXJkKHN0dWR5KSA6IG51bGwsXG4gICAgaW50cm8gfHwgaChhZGRDaGFwdGVySWQoc3R1ZHksICdkaXYuYW5hbHlzZV9fYm9hcmQubWFpbi1ib2FyZCcpLCB7XG4gICAgICBob29rOiAod2luZG93LmxpY2hlc3MuaGFzVG91Y2hFdmVudHMgfHwgY3RybC5nYW1lYm9va1BsYXkoKSkgPyB1bmRlZmluZWQgOiBiaW5kKCd3aGVlbCcsIChlOiBXaGVlbEV2ZW50KSA9PiB3aGVlbChjdHJsLCBlKSlcbiAgICB9LCBbXG4gICAgICAuLi4oY2xvY2tzIHx8IFtdKSxcbiAgICAgIHBsYXllckJhcnMgPyBwbGF5ZXJCYXJzW2N0cmwuYm90dG9tSXNXaGl0ZSgpID8gMSA6IDBdIDogbnVsbCxcbiAgICAgIGNoZXNzZ3JvdW5kLnJlbmRlcihjdHJsKSxcbiAgICAgIHBsYXllckJhcnMgPyBwbGF5ZXJCYXJzW2N0cmwuYm90dG9tSXNXaGl0ZSgpID8gMCA6IDFdIDogbnVsbCxcbiAgICAgIHJlbmRlclByb21vdGlvbihjdHJsKVxuICAgIF0pLFxuICAgIChnYXVnZU9uICYmICFpbnRybykgPyBjZXZhbFZpZXcucmVuZGVyR2F1Z2UoY3RybCkgOiBudWxsLFxuICAgIChtZW51SXNPcGVuIHx8IGludHJvKSA/IG51bGwgOiBjcmF6eVZpZXcoY3RybCwgY3RybC50b3BDb2xvcigpLCAndG9wJyksXG4gICAgZ2FtZWJvb2tQbGF5VmlldyB8fCAoaW50cm8gPyBudWxsIDogaChhZGRDaGFwdGVySWQoc3R1ZHksICdkaXYuYW5hbHlzZV9fdG9vbHMnKSwgW1xuICAgICAgLi4uKG1lbnVJc09wZW4gPyBbYWN0aW9uTWVudShjdHJsKV0gOiBbXG4gICAgICAgIGNldmFsVmlldy5yZW5kZXJDZXZhbChjdHJsKSxcbiAgICAgICAgc2hvd0NldmFsUHZzID8gY2V2YWxWaWV3LnJlbmRlclB2cyhjdHJsKSA6IG51bGwsXG4gICAgICAgIHJlbmRlckFuYWx5c2UoY3RybCwgY29uY2VhbE9mKSxcbiAgICAgICAgZ2FtZWJvb2tFZGl0VmlldyB8fCBmb3JrVmlldyhjdHJsLCBjb25jZWFsT2YpLFxuICAgICAgICByZXRyb1ZpZXcoY3RybCkgfHwgcHJhY3RpY2VWaWV3KGN0cmwpIHx8IGV4cGxvcmVyVmlldyhjdHJsKVxuICAgICAgXSlcbiAgICBdKSksXG4gICAgKG1lbnVJc09wZW4gfHwgaW50cm8pID8gbnVsbCA6IGNyYXp5VmlldyhjdHJsLCBjdHJsLmJvdHRvbUNvbG9yKCksICdib3R0b20nKSxcbiAgICAoZ2FtZWJvb2tQbGF5VmlldyB8fCBpbnRybykgPyBudWxsIDogY29udHJvbHMoY3RybCksXG4gICAgKGN0cmwuZW1iZWQgfHwgaW50cm8pID8gbnVsbCA6IGgoJ2Rpdi5hbmFseXNlX191bmRlcmJvYXJkJywge1xuICAgICAgaG9vazogKGN0cmwuc3ludGhldGljIHx8IHBsYXlhYmxlKGN0cmwuZGF0YSkpID8gdW5kZWZpbmVkIDogb25JbnNlcnQoZWxtID0+IHNlcnZlclNpZGVVbmRlcmJvYXJkKGVsbSwgY3RybCkpXG4gICAgfSwgc3R1ZHkgPyBzdHVkeVZpZXcudW5kZXJib2FyZChjdHJsKSA6IFtpbnB1dHMoY3RybCldKSxcbiAgICBpbnRybyA/IG51bGwgOiBhY3BsVmlldyhjdHJsKSxcbiAgICBjdHJsLmVtYmVkID8gbnVsbCA6IChcbiAgICAgIGN0cmwuc3R1ZHlQcmFjdGljZSA/IHN0dWR5UHJhY3RpY2VWaWV3LnNpZGUoc3R1ZHkhKSA6XG4gICAgICBoKCdhc2lkZS5hbmFseXNlX19zaWRlJywge1xuICAgICAgICBob29rOiBvbkluc2VydChlbG0gPT4ge1xuICAgICAgICAgIGN0cmwub3B0cy4kc2lkZSAmJiBjdHJsLm9wdHMuJHNpZGUubGVuZ3RoICYmICQoZWxtKS5yZXBsYWNlV2l0aChjdHJsLm9wdHMuJHNpZGUpO1xuICAgICAgICAgICQoZWxtKS5hcHBlbmQoJCgnLnN0cmVhbWVycycpLmNsb25lKCkucmVtb3ZlQ2xhc3MoJ25vbmUnKSk7XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgICBjdHJsLnN0dWR5UHJhY3RpY2UgPyBbc3R1ZHlQcmFjdGljZVZpZXcuc2lkZShzdHVkeSEpXSA6IChcbiAgICAgICAgICBzdHVkeSA/IFtzdHVkeVZpZXcuc2lkZShzdHVkeSldIDogW1xuICAgICAgICAgICAgY3RybC5mb3JlY2FzdCA/IGZvcmVjYXN0VmlldyhjdHJsLCBjdHJsLmZvcmVjYXN0KSA6IG51bGwsXG4gICAgICAgICAgICAoIWN0cmwuc3ludGhldGljICYmIHBsYXlhYmxlKGN0cmwuZGF0YSkpID8gaCgnZGl2LmJhY2stdG8tZ2FtZScsXG4gICAgICAgICAgICAgIGgoJ2EuYnV0dG9uLmJ1dHRvbi1lbXB0eS50ZXh0Jywge1xuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICBocmVmOiByb3V0ZXIuZ2FtZShjdHJsLmRhdGEsIGN0cmwuZGF0YS5wbGF5ZXIuY29sb3IpLFxuICAgICAgICAgICAgICAgICAgJ2RhdGEtaWNvbic6ICdpJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgY3RybC50cmFucy5ub2FyZygnYmFja1RvR2FtZScpKVxuICAgICAgICAgICAgKSA6IG51bGxcbiAgICAgICAgICBdXG4gICAgICAgIClcbiAgICAgIClcbiAgICApLFxuICAgIHN0dWR5ICYmIHN0dWR5LnJlbGF5ICYmIHJlbGF5TWFuYWdlcihzdHVkeS5yZWxheSksXG4gICAgY3RybC5vcHRzLmNoYXQgJiYgaCgnc2VjdGlvbi5tY2hhdCcsIHtcbiAgICAgIGhvb2s6IG9uSW5zZXJ0KF8gPT4ge1xuICAgICAgICBpZiAoY3RybC5vcHRzLmNoYXQuaW5zdGFuY2UpIGN0cmwub3B0cy5jaGF0Lmluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgICAgY3RybC5vcHRzLmNoYXQucGFyc2VNb3ZlcyA9IHRydWU7XG4gICAgICAgIGxpLm1ha2VDaGF0KGN0cmwub3B0cy5jaGF0LCBjaGF0ID0+IHtcbiAgICAgICAgICBjdHJsLm9wdHMuY2hhdC5pbnN0YW5jZSA9IGNoYXQ7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9KSxcbiAgICBjdHJsLmVtYmVkID8gbnVsbCA6IGgoJ2Rpdi5jaGF0X19tZW1iZXJzLm5vbmUnLCB7XG4gICAgICBob29rOiBvbkluc2VydChlbCA9PiAkKGVsKS53YXRjaGVycygpKVxuICAgIH0sIFtoKCdzcGFuLm51bWJlcicsICdcXHhhMCcpLCAnICcsIGN0cmwudHJhbnMubm9hcmcoJ3NwZWN0YXRvcnMnKSwgJyAnLCBoKCdzcGFuLmxpc3QnKV0pXG4gIF0pO1xufVxuIiwiaW1wb3J0IHsgQ2V2YWxDdHJsLCBDZXZhbE9wdHMsIENldmFsVGVjaG5vbG9neSwgV29yaywgU3RlcCwgSG92ZXJpbmcsIFN0YXJ0ZWQgfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IHsgUG9vbCB9IGZyb20gJy4vcG9vbCc7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IHN0b3JlZFByb3AgfSBmcm9tICdjb21tb24vc3RvcmFnZSc7XG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnY29tbW9uL3Rocm90dGxlJztcbmltcG9ydCB7IHBvdkNoYW5jZXMgfSBmcm9tICcuL3dpbm5pbmdDaGFuY2VzJztcblxuY29uc3QgbGkgPSB3aW5kb3cubGljaGVzcztcblxuZnVuY3Rpb24gc2FuSXJyZXZlcnNpYmxlKHZhcmlhbnQ6IFZhcmlhbnRLZXksIHNhbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmIChzYW4uc3RhcnRzV2l0aCgnTy1PJykpIHJldHVybiB0cnVlO1xuICBpZiAodmFyaWFudCA9PT0gJ2NyYXp5aG91c2UnKSByZXR1cm4gZmFsc2U7XG4gIGlmIChzYW4uaW5jbHVkZXMoJ3gnKSkgcmV0dXJuIHRydWU7IC8vIGNhcHR1cmVcbiAgaWYgKHNhbi50b0xvd2VyQ2FzZSgpID09PSBzYW4pIHJldHVybiB0cnVlOyAvLyBwYXduIG1vdmVcbiAgcmV0dXJuIHZhcmlhbnQgPT09ICd0aHJlZUNoZWNrJyAmJiBzYW4uaW5jbHVkZXMoJysnKTtcbn1cblxuZnVuY3Rpb24gb2ZmaWNpYWxTdG9ja2Zpc2godmFyaWFudDogVmFyaWFudEtleSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFyaWFudCA9PT0gJ3N0YW5kYXJkJyB8fCB2YXJpYW50ID09PSAnY2hlc3M5NjAnO1xufVxuXG5mdW5jdGlvbiBpczY0Qml0KCk6IGJvb2xlYW4ge1xuICBjb25zdCB4NjQgPSBbJ3g4Nl82NCcsICd4ODYtNjQnLCAnV2luNjQnLCd4NjQnLCAnYW1kNjQnLCAnQU1ENjQnXTtcbiAgZm9yIChjb25zdCBzdWJzdHIgb2YgeDY0KSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhzdWJzdHIpKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ0xpbnV4IHg4Nl82NCcgfHwgbmF2aWdhdG9yLnBsYXRmb3JtID09PSAnTWFjSW50ZWwnO1xufVxuXG5mdW5jdGlvbiBzaGFyZWRXYXNtTWVtb3J5KGluaXRpYWw6IG51bWJlciwgbWF4aW11bTogbnVtYmVyKTogV2ViQXNzZW1ibHkuTWVtb3J5IHwgdW5kZWZpbmVkIHtcbiAgLy8gSW4gdGhlb3J5IDMyIGJpdCBzaG91bGQgYmUgc3VwcG9ydGVkIGp1c3QgdGhlIHNhbWUsIGJ1dCBzb21lIDMyIGJpdFxuICAvLyBicm93c2VyIGJ1aWxkcyBzZWVtIHRvIGhhdmUgdHJvdWJsZSB3aXRoIFdBU01YLiBTbyBmb3Igbm93IGRldGVjdCBhbmRcbiAgLy8gcmVxdWlyZSBhIDY0IGJpdCBwbGF0Zm9ybS5cbiAgaWYgKCFpczY0Qml0KCkpIHJldHVybjtcblxuICAvLyBBdG9taWNzXG4gIGlmICh0eXBlb2YgQXRvbWljcyAhPT0gJ29iamVjdCcpIHJldHVybjtcblxuICAvLyBTaGFyZWRBcnJheUJ1ZmZlclxuICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG5cbiAgLy8gU2hhcmVkIG1lbW9yeVxuICBjb25zdCBtZW0gPSBuZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtzaGFyZWQ6IHRydWUsIGluaXRpYWwsIG1heGltdW19IGFzIFdlYkFzc2VtYmx5Lk1lbW9yeURlc2NyaXB0b3IpO1xuICBpZiAoIShtZW0uYnVmZmVyIGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpKSByZXR1cm47XG5cbiAgLy8gU3RydWN0dXJlZCBjbG9uaW5nXG4gIHRyeSB7XG4gICAgd2luZG93LnBvc3RNZXNzYWdlKG1lbSwgJyonKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBtZW07XG59XG5cbmZ1bmN0aW9uIG1lZGlhbih2YWx1ZXM6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgdmFsdWVzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgY29uc3QgaGFsZiA9IE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIDIpO1xuICByZXR1cm4gdmFsdWVzLmxlbmd0aCAlIDIgPyB2YWx1ZXNbaGFsZl0gOiAodmFsdWVzW2hhbGYgLSAxXSArIHZhbHVlc1toYWxmXSkgLyAyLjA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG9wdHM6IENldmFsT3B0cyk6IENldmFsQ3RybCB7XG4gIGNvbnN0IHN0b3JhZ2VLZXkgPSAoazogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIG9wdHMuc3RvcmFnZUtleVByZWZpeCA/IGAke29wdHMuc3RvcmFnZUtleVByZWZpeH0uJHtrfWAgOiBrO1xuICB9O1xuXG4gIC8vIHNlbGVjdCB3YXNteCB3aXRoIGdyb3dhYmxlIHNoYXJlZCBtZW0gPiB3YXNteCA+IHdhc20gPiBhc21qc1xuICBsZXQgdGVjaG5vbG9neTogQ2V2YWxUZWNobm9sb2d5ID0gJ2FzbWpzJztcbiAgbGV0IGdyb3dhYmxlU2hhcmVkTWVtID0gZmFsc2U7XG4gIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkgPT09ICdvYmplY3QnICYmIFdlYkFzc2VtYmx5LnZhbGlkYXRlKFVpbnQ4QXJyYXkub2YoMHgwLCAweDYxLCAweDczLCAweDZkLCAweDAxLCAweDAwLCAweDAwLCAweDAwKSkpIHtcbiAgICB0ZWNobm9sb2d5ID0gJ3dhc20nOyAvLyBXZWJBc3NlbWJseSAxLjBcbiAgICBpZiAob2ZmaWNpYWxTdG9ja2Zpc2gob3B0cy52YXJpYW50LmtleSkpIHtcbiAgICAgIGNvbnN0IHNoYXJlZE1lbSA9IHNoYXJlZFdhc21NZW1vcnkoOCwgMTYpO1xuICAgICAgaWYgKHNoYXJlZE1lbSkge1xuICAgICAgICB0ZWNobm9sb2d5ID0gJ3dhc214JztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzaGFyZWRNZW0uZ3Jvdyg4KTtcbiAgICAgICAgICBncm93YWJsZVNoYXJlZE1lbSA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1heFRocmVhZHMgPSBNYXRoLm1pbihNYXRoLm1heCgobmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgfHwgMSkgLSAxLCAxKSwgZ3Jvd2FibGVTaGFyZWRNZW0gPyAxNiA6IDIpO1xuICBjb25zdCB0aHJlYWRzID0gc3RvcmVkUHJvcChzdG9yYWdlS2V5KCdjZXZhbC50aHJlYWRzJyksIE1hdGgubWluKE1hdGguY2VpbCgobmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgfHwgMSkgLyA0KSwgbWF4VGhyZWFkcykpO1xuXG4gIGNvbnN0IG1heEhhc2hTaXplID0gTWF0aC5taW4oKG5hdmlnYXRvci5kZXZpY2VNZW1vcnkgfHwgMC4yNSkgKiAxMDI0IC8gOCwgZ3Jvd2FibGVTaGFyZWRNZW0gPyAxMDI0IDogMTYpO1xuICBjb25zdCBoYXNoU2l6ZSA9IHN0b3JlZFByb3Aoc3RvcmFnZUtleSgnY2V2YWwuaGFzaC1zaXplJyksIDE2KTtcblxuICBjb25zdCBtaW5EZXB0aCA9IDY7XG4gIGNvbnN0IG1heERlcHRoID0gc3RvcmVkUHJvcDxudW1iZXI+KHN0b3JhZ2VLZXkoJ2NldmFsLm1heC1kZXB0aCcpLCAxOCk7XG4gIGNvbnN0IG11bHRpUHYgPSBzdG9yZWRQcm9wKHN0b3JhZ2VLZXkoJ2NldmFsLm11bHRpcHYnKSwgb3B0cy5tdWx0aVB2RGVmYXVsdCB8fCAxKTtcbiAgY29uc3QgaW5maW5pdGUgPSBzdG9yZWRQcm9wKCdjZXZhbC5pbmZpbml0ZScsIGZhbHNlKTtcbiAgbGV0IGN1ckV2YWw6IFRyZWUuQ2xpZW50RXZhbCB8IG51bGwgPSBudWxsO1xuICBjb25zdCBlbmFibGVTdG9yYWdlID0gbGkuc3RvcmFnZS5tYWtlQm9vbGVhbihzdG9yYWdlS2V5KCdjbGllbnQtZXZhbC1lbmFibGVkJykpO1xuICBjb25zdCBhbGxvd2VkID0gcHJvcCh0cnVlKTtcbiAgY29uc3QgZW5hYmxlZCA9IHByb3Aob3B0cy5wb3NzaWJsZSAmJiBhbGxvd2VkKCkgJiYgZW5hYmxlU3RvcmFnZS5nZXQoKSAmJiAhZG9jdW1lbnQuaGlkZGVuKTtcbiAgbGV0IHN0YXJ0ZWQ6IFN0YXJ0ZWQgfCBmYWxzZSA9IGZhbHNlO1xuICBsZXQgbGFzdFN0YXJ0ZWQ6IFN0YXJ0ZWQgfCBmYWxzZSA9IGZhbHNlOyAvLyBsYXN0IHN0YXJ0ZWQgb2JqZWN0IChmb3IgZ29pbmcgZGVlcGVyIGV2ZW4gaWYgc3RvcHBlZClcbiAgY29uc3QgaG92ZXJpbmcgPSBwcm9wPEhvdmVyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGlzRGVlcGVyID0gcHJvcChmYWxzZSk7XG5cbiAgY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgICB0ZWNobm9sb2d5LFxuICAgIGFzbWpzOiAndmVuZG9yL3N0b2NrZmlzaC5qcy9zdG9ja2Zpc2guanMnLFxuICAgIHdhc206ICd2ZW5kb3Ivc3RvY2tmaXNoLmpzL3N0b2NrZmlzaC53YXNtLmpzJyxcbiAgICB3YXNteDogb2ZmaWNpYWxTdG9ja2Zpc2gob3B0cy52YXJpYW50LmtleSkgPyAndmVuZG9yL3N0b2NrZmlzaC53YXNtL3N0b2NrZmlzaC5qcycgOiAndmVuZG9yL3N0b2NrZmlzaC1tdi53YXNtL3N0b2NrZmlzaC5qcycsXG4gIH0sIHtcbiAgICBtaW5EZXB0aCxcbiAgICB2YXJpYW50OiBvcHRzLnZhcmlhbnQua2V5LFxuICAgIHRocmVhZHM6IHRlY2hub2xvZ3kgPT0gJ3dhc214JyAmJiAoKCkgPT4gTWF0aC5taW4ocGFyc2VJbnQodGhyZWFkcygpKSwgbWF4VGhyZWFkcykpLFxuICAgIGhhc2hTaXplOiB0ZWNobm9sb2d5ID09ICd3YXNteCcgJiYgKCgpID0+IE1hdGgubWluKHBhcnNlSW50KGhhc2hTaXplKCkpLCBtYXhIYXNoU2l6ZSkpLFxuICB9KTtcblxuICAvLyBhZGp1c3RzIG1heERlcHRoIGJhc2VkIG9uIG5vZGVzIHBlciBzZWNvbmRcbiAgY29uc3QgbnBzUmVjb3JkZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdmFsdWVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IGFwcGxpZXMgPSBmdW5jdGlvbihldjogVHJlZS5DbGllbnRFdmFsKSB7XG4gICAgICByZXR1cm4gZXYua25wcyAmJiBldi5kZXB0aCA+PSAxNiAmJlxuICAgICAgICB0eXBlb2YgZXYuY3AgIT09ICd1bmRlZmluZWQnICYmIE1hdGguYWJzKGV2LmNwKSA8IDUwMCAmJlxuICAgICAgICAoZXYuZmVuLnNwbGl0KC9cXHMvKVswXS5zcGxpdCgvW25icnFrcF0vaSkubGVuZ3RoIC0gMSkgPj0gMTA7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihldjogVHJlZS5DbGllbnRFdmFsKSB7XG4gICAgICBpZiAoIWFwcGxpZXMoZXYpKSByZXR1cm47XG4gICAgICB2YWx1ZXMucHVzaChldi5rbnBzKTtcbiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID4gOSkge1xuICAgICAgICBsZXQgZGVwdGggPSAxOCxcbiAgICAgICAgICBrbnBzID0gbWVkaWFuKHZhbHVlcykgfHwgMDtcbiAgICAgICAgaWYgKGtucHMgPiAxMDApIGRlcHRoID0gMTk7XG4gICAgICAgIGlmIChrbnBzID4gMTUwKSBkZXB0aCA9IDIwO1xuICAgICAgICBpZiAoa25wcyA+IDI1MCkgZGVwdGggPSAyMTtcbiAgICAgICAgaWYgKGtucHMgPiA1MDApIGRlcHRoID0gMjI7XG4gICAgICAgIGlmIChrbnBzID4gMTAwMCkgZGVwdGggPSAyMztcbiAgICAgICAgaWYgKGtucHMgPiAyMDAwKSBkZXB0aCA9IDI0O1xuICAgICAgICBpZiAoa25wcyA+IDM1MDApIGRlcHRoID0gMjU7XG4gICAgICAgIGlmIChrbnBzID4gNTAwMCkgZGVwdGggPSAyNjtcbiAgICAgICAgaWYgKGtucHMgPiA3MDAwKSBkZXB0aCA9IDI3O1xuICAgICAgICBtYXhEZXB0aChkZXB0aCk7XG4gICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID4gNDApIHZhbHVlcy5zaGlmdCgpO1xuICAgICAgfVxuICAgIH07XG4gIH0pKCk7XG5cbiAgbGV0IGxhc3RFbWl0RmVuOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBjb25zdCBvbkVtaXQgPSB0aHJvdHRsZSgyMDAsIChldjogVHJlZS5DbGllbnRFdmFsLCB3b3JrOiBXb3JrKSA9PiB7XG4gICAgc29ydFB2c0luUGxhY2UoZXYucHZzLCAod29yay5wbHkgJSAyID09PSAod29yay50aHJlYXRNb2RlID8gMSA6IDApKSA/ICd3aGl0ZScgOiAnYmxhY2snKTtcbiAgICBucHNSZWNvcmRlcihldik7XG4gICAgY3VyRXZhbCA9IGV2O1xuICAgIG9wdHMuZW1pdChldiwgd29yayk7XG4gICAgaWYgKGV2LmZlbiAhPT0gbGFzdEVtaXRGZW4pIHtcbiAgICAgIGxhc3RFbWl0RmVuID0gZXYuZmVuO1xuICAgICAgbGkuc3RvcmFnZS5maXJlKCdjZXZhbC5mZW4nLCBldi5mZW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgZWZmZWN0aXZlTWF4RGVwdGggPSAoKSA9PiAoaXNEZWVwZXIoKSB8fCBpbmZpbml0ZSgpKSA/IDk5IDogcGFyc2VJbnQobWF4RGVwdGgoKSk7XG5cbiAgY29uc3Qgc29ydFB2c0luUGxhY2UgPSAocHZzOiBUcmVlLlB2RGF0YVtdLCBjb2xvcjogQ29sb3IpID0+XG4gICAgcHZzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIHBvdkNoYW5jZXMoY29sb3IsIGIpIC0gcG92Q2hhbmNlcyhjb2xvciwgYSk7XG4gICAgfSk7XG5cbiAgY29uc3Qgc3RhcnQgPSAocGF0aDogVHJlZS5QYXRoLCBzdGVwczogU3RlcFtdLCB0aHJlYXRNb2RlOiBib29sZWFuLCBkZWVwZXI6IGJvb2xlYW4pID0+IHtcblxuICAgIGlmICghZW5hYmxlZCgpIHx8ICFvcHRzLnBvc3NpYmxlKSByZXR1cm47XG5cbiAgICBpc0RlZXBlcihkZWVwZXIpO1xuICAgIGNvbnN0IG1heEQgPSBlZmZlY3RpdmVNYXhEZXB0aCgpO1xuXG4gICAgY29uc3Qgc3RlcCA9IHN0ZXBzW3N0ZXBzLmxlbmd0aCAtIDFdO1xuXG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aHJlYXRNb2RlID8gc3RlcC50aHJlYXQgOiBzdGVwLmNldmFsO1xuICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy5kZXB0aCA+PSBtYXhEKSByZXR1cm47XG5cbiAgICBjb25zdCB3b3JrOiBXb3JrID0ge1xuICAgICAgaW5pdGlhbEZlbjogc3RlcHNbMF0uZmVuLFxuICAgICAgbW92ZXM6IFtdLFxuICAgICAgY3VycmVudEZlbjogc3RlcC5mZW4sXG4gICAgICBwYXRoLFxuICAgICAgcGx5OiBzdGVwLnBseSxcbiAgICAgIG1heERlcHRoOiBtYXhELFxuICAgICAgbXVsdGlQdjogcGFyc2VJbnQobXVsdGlQdigpKSxcbiAgICAgIHRocmVhdE1vZGUsXG4gICAgICBlbWl0KGV2OiBUcmVlLkNsaWVudEV2YWwpIHtcbiAgICAgICAgaWYgKGVuYWJsZWQoKSkgb25FbWl0KGV2LCB3b3JrKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHRocmVhdE1vZGUpIHtcbiAgICAgIGNvbnN0IGMgPSBzdGVwLnBseSAlIDIgPT09IDEgPyAndycgOiAnYic7XG4gICAgICBjb25zdCBmZW4gPSBzdGVwLmZlbi5yZXBsYWNlKC8gKHd8YikgLywgJyAnICsgYyArICcgJyk7XG4gICAgICB3b3JrLmN1cnJlbnRGZW4gPSBmZW47XG4gICAgICB3b3JrLmluaXRpYWxGZW4gPSBmZW47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNlbmQgZmVuIGFmdGVyIGxhdGVzdCBjYXN0bGluZyBtb3ZlIGFuZCB0aGUgZm9sbG93aW5nIG1vdmVzXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN0ZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzID0gc3RlcHNbaV07XG4gICAgICAgIGlmIChzYW5JcnJldmVyc2libGUob3B0cy52YXJpYW50LmtleSwgcy5zYW4hKSkge1xuICAgICAgICAgIHdvcmsubW92ZXMgPSBbXTtcbiAgICAgICAgICB3b3JrLmluaXRpYWxGZW4gPSBzLmZlbjtcbiAgICAgICAgfSBlbHNlIHdvcmsubW92ZXMucHVzaChzLnVjaSEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBvb2wuc3RhcnQod29yayk7XG5cbiAgICBzdGFydGVkID0ge1xuICAgICAgcGF0aCxcbiAgICAgIHN0ZXBzLFxuICAgICAgdGhyZWF0TW9kZVxuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gZ29EZWVwZXIoKSB7XG4gICAgY29uc3QgcyA9IHN0YXJ0ZWQgfHwgbGFzdFN0YXJ0ZWQ7XG4gICAgaWYgKHMpIHtcbiAgICAgIHN0b3AoKTtcbiAgICAgIHN0YXJ0KHMucGF0aCwgcy5zdGVwcywgcy50aHJlYXRNb2RlLCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBpZiAoIWVuYWJsZWQoKSB8fCAhc3RhcnRlZCkgcmV0dXJuO1xuICAgIHBvb2wuc3RvcCgpO1xuICAgIGxhc3RTdGFydGVkID0gc3RhcnRlZDtcbiAgICBzdGFydGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLy8gYXNrIG90aGVyIHRhYnMgaWYgYSBnYW1lIGlzIGluIHByb2dyZXNzXG4gIGlmIChlbmFibGVkKCkpIHtcbiAgICBsaS5zdG9yYWdlLmZpcmUoJ2NldmFsLmZlbicsICdzdGFydCcpO1xuICAgIGxpLnN0b3JhZ2UubWFrZSgncm91bmQub25nb2luZycpLmxpc3RlbihfID0+IHtcbiAgICAgIGVuYWJsZWQoZmFsc2UpO1xuICAgICAgb3B0cy5yZWRyYXcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdGVjaG5vbG9neSxcbiAgICBzdGFydCxcbiAgICBzdG9wLFxuICAgIGFsbG93ZWQsXG4gICAgcG9zc2libGU6IG9wdHMucG9zc2libGUsXG4gICAgZW5hYmxlZCxcbiAgICBtdWx0aVB2LFxuICAgIHRocmVhZHM6IHRlY2hub2xvZ3kgPT0gJ3dhc214JyA/IHRocmVhZHMgOiB1bmRlZmluZWQsXG4gICAgaGFzaFNpemU6IHRlY2hub2xvZ3kgPT0gJ3dhc214JyA/IGhhc2hTaXplIDogdW5kZWZpbmVkLFxuICAgIG1heFRocmVhZHMsXG4gICAgbWF4SGFzaFNpemUsXG4gICAgaW5maW5pdGUsXG4gICAgaG92ZXJpbmcsXG4gICAgc2V0SG92ZXJpbmcoZmVuOiBGZW4sIHVjaT86IFVjaSkge1xuICAgICAgaG92ZXJpbmcodWNpID8ge1xuICAgICAgICBmZW4sXG4gICAgICAgIHVjaVxuICAgICAgfSA6IG51bGwpO1xuICAgICAgb3B0cy5zZXRBdXRvU2hhcGVzKCk7XG4gICAgfSxcbiAgICB0b2dnbGUoKSB7XG4gICAgICBpZiAoIW9wdHMucG9zc2libGUgfHwgIWFsbG93ZWQoKSkgcmV0dXJuO1xuICAgICAgc3RvcCgpO1xuICAgICAgZW5hYmxlZCghZW5hYmxlZCgpKTtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgIT09ICdoaWRkZW4nKVxuICAgICAgICBlbmFibGVTdG9yYWdlLnNldChlbmFibGVkKCkpO1xuICAgIH0sXG4gICAgY3VyRGVwdGg6ICgpID0+IGN1ckV2YWwgPyBjdXJFdmFsLmRlcHRoIDogMCxcbiAgICBlZmZlY3RpdmVNYXhEZXB0aCxcbiAgICB2YXJpYW50OiBvcHRzLnZhcmlhbnQsXG4gICAgaXNEZWVwZXIsXG4gICAgZ29EZWVwZXIsXG4gICAgY2FuR29EZWVwZXI6ICgpID0+ICFpc0RlZXBlcigpICYmICFpbmZpbml0ZSgpICYmICFwb29sLmlzQ29tcHV0aW5nKCksXG4gICAgaXNDb21wdXRpbmc6ICgpID0+ICEhc3RhcnRlZCAmJiBwb29sLmlzQ29tcHV0aW5nKCksXG4gICAgZW5naW5lTmFtZTogcG9vbC5lbmdpbmVOYW1lLFxuICAgIGRlc3Ryb3k6IHBvb2wuZGVzdHJveSxcbiAgICByZWRyYXc6IG9wdHMucmVkcmF3XG4gIH07XG59O1xuIiwiaW1wb3J0IGN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCAqIGFzIHZpZXcgZnJvbSAnLi92aWV3JztcbmltcG9ydCAqIGFzIHdpbm5pbmdDaGFuY2VzIGZyb20gJy4vd2lubmluZ0NoYW5jZXMnO1xuXG5leHBvcnQgeyBDZXZhbEN0cmwsIE5vZGVFdmFscywgRXZhbCwgV29yaywgQ2V2YWxPcHRzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCB7IGN0cmwsIHZpZXcsIHdpbm5pbmdDaGFuY2VzIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0V2YWxCZXR0ZXIoYTogVHJlZS5DbGllbnRFdmFsLCBiPzogVHJlZS5DbGllbnRFdmFsKTogYm9vbGVhbiB7XG4gIHJldHVybiAhYiB8fCBhLmRlcHRoID4gYi5kZXB0aCB8fCAoYS5kZXB0aCA9PT0gYi5kZXB0aCAmJiBhLm5vZGVzID4gYi5ub2Rlcyk7XG59XG5cbi8vIHN0b3Agd2hlbiBhbm90aGVyIHRhYiBzdGFydHMuIExpc3RlbiBvbmx5IG9uY2UgaGVyZSxcbi8vIGFzIHRoZSBjdHJsIGNhbiBiZSBpbnN0YW5jaWF0ZWQgc2V2ZXJhbCB0aW1lcy5cbi8vIGdvdHRhIGRvIHRoZSBjbGljayBvbiB0aGUgdG9nZ2xlIHRvIGhhdmUgaXQgdmlzdWFsbHkgY2hhbmdlLlxud2luZG93LmxpY2hlc3Muc3RvcmFnZS5tYWtlKCdjZXZhbC5wb29sLnN0YXJ0JykubGlzdGVuKF8gPT4ge1xuICBjb25zdCB0b2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5hbHlzZS10b2dnbGUtY2V2YWwnKTtcbiAgaWYgKHRvZ2dsZSAmJiAodG9nZ2xlIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHRvZ2dsZS5jbGljaygpO1xufSk7XG4iLCJpbXBvcnQgeyBzeW5jLCBTeW5jIH0gZnJvbSAnY29tbW9uL3N5bmMnO1xuaW1wb3J0IHsgUG9vbE9wdHMsIFdvcmtlck9wdHMsIFdvcmsgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCBQcm90b2NvbCBmcm9tICcuL3N0b2NrZmlzaFByb3RvY29sJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0V29ya2VyIHtcblxuICBwcm90ZWN0ZWQgcHJvdG9jb2w6IFN5bmM8UHJvdG9jb2w+O1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB1cmw6IHN0cmluZywgcHJvdGVjdGVkIHBvb2xPcHRzOiBQb29sT3B0cywgcHJvdGVjdGVkIHdvcmtlck9wdHM6IFdvcmtlck9wdHMpIHtcbiAgICB0aGlzLnByb3RvY29sID0gc3luYyh0aGlzLmJvb3QoKSk7XG4gIH1cblxuICBzdG9wKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnByb3RvY29sLnByb21pc2UudGhlbihwcm90b2NvbCA9PiBwcm90b2NvbC5zdG9wKCkpO1xuICB9XG5cbiAgc3RhcnQod29yazogV29yayk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnByb3RvY29sLnByb21pc2UudGhlbihwcm90b2NvbCA9PiB7XG4gICAgICByZXR1cm4gcHJvdG9jb2wuc3RvcCgpLnRoZW4oKCkgPT4gcHJvdG9jb2wuc3RhcnQod29yaykpO1xuICAgIH0pO1xuICB9XG5cbiAgaXNDb21wdXRpbmc6ICgpID0+IGJvb2xlYW4gPSAoKSA9PlxuICAgICEhdGhpcy5wcm90b2NvbC5zeW5jICYmIHRoaXMucHJvdG9jb2wuc3luYy5pc0NvbXB1dGluZygpO1xuXG4gIGVuZ2luZU5hbWU6ICgpID0+IHN0cmluZyB8IHVuZGVmaW5lZCA9ICgpID0+XG4gICAgdGhpcy5wcm90b2NvbC5zeW5jICYmIHRoaXMucHJvdG9jb2wuc3luYy5lbmdpbmVOYW1lO1xuXG4gIGFic3RyYWN0IGJvb3QoKTogUHJvbWlzZTxQcm90b2NvbD47XG4gIGFic3RyYWN0IHNlbmQoY21kOiBzdHJpbmcpOiB2b2lkO1xuICBhYnN0cmFjdCBkZXN0cm95KCk6IHZvaWQ7XG59XG5cbmNsYXNzIFdlYldvcmtlciBleHRlbmRzIEFic3RyYWN0V29ya2VyIHtcbiAgd29ya2VyOiBXb3JrZXI7XG5cbiAgYm9vdCgpOiBQcm9taXNlPFByb3RvY29sPiB7XG4gICAgdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKHdpbmRvdy5saWNoZXNzLmFzc2V0VXJsKHRoaXMudXJsLCB7c2FtZURvbWFpbjogdHJ1ZX0pKTtcbiAgICBjb25zdCBwcm90b2NvbCA9IG5ldyBQcm90b2NvbCh0aGlzLnNlbmQuYmluZCh0aGlzKSwgdGhpcy53b3JrZXJPcHRzKTtcbiAgICB0aGlzLndvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZSA9PiB7XG4gICAgICBwcm90b2NvbC5yZWNlaXZlZChlLmRhdGEpO1xuICAgIH0sIHRydWUpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvdG9jb2wpO1xuICB9XG5cbiAgc3RhcnQod29yazogV29yayk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIHdhaXQgZm9yIGJvb3RcbiAgICByZXR1cm4gdGhpcy5wcm90b2NvbC5wcm9taXNlLnRoZW4ocHJvdG9jb2wgPT4ge1xuICAgICAgY29uc3QgdGltZW91dCA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHNldFRpbWVvdXQocmVqZWN0LCAxMDAwKSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtwcm90b2NvbC5zdG9wKCksIHRpbWVvdXRdKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIHJlYm9vdCBpZiBub3Qgc3RvcHBlZCBhZnRlciAxc1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHN5bmModGhpcy5ib290KCkpO1xuICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3RvY29sLnByb21pc2UudGhlbihwcm90b2NvbCA9PiBwcm90b2NvbC5zdGFydCh3b3JrKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XG4gIH1cblxuICBzZW5kKGNtZDogc3RyaW5nKSB7XG4gICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoY21kKTtcbiAgfVxufVxuXG5jbGFzcyBUaHJlYWRlZFdhc21Xb3JrZXIgZXh0ZW5kcyBBYnN0cmFjdFdvcmtlciB7XG4gIHN0YXRpYyBnbG9iYWw6IFByb21pc2U8e2luc3RhbmNlOiB1bmtub3duLCBwcm90b2NvbDogUHJvdG9jb2x9PjtcblxuICBwcml2YXRlIGluc3RhbmNlPzogYW55O1xuXG4gIGJvb3QoKTogUHJvbWlzZTxQcm90b2NvbD4ge1xuICAgIGlmICghVGhyZWFkZWRXYXNtV29ya2VyLmdsb2JhbCkgVGhyZWFkZWRXYXNtV29ya2VyLmdsb2JhbCA9IHdpbmRvdy5saWNoZXNzLmxvYWRTY3JpcHQodGhpcy51cmwsIHtzYW1lRG9tYWluOiB0cnVlfSkudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2UgPSB3aW5kb3dbJ1N0b2NrZmlzaCddKCksXG4gICAgICAgIHByb3RvY29sID0gbmV3IFByb3RvY29sKHRoaXMuc2VuZC5iaW5kKHRoaXMpLCB0aGlzLndvcmtlck9wdHMpLFxuICAgICAgICBsaXN0ZW5lciA9IHByb3RvY29sLnJlY2VpdmVkLmJpbmQocHJvdG9jb2wpO1xuICAgICAgaW5zdGFuY2UuYWRkTWVzc2FnZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluc3RhbmNlLCAvLyBhbHdheXMgd3JhcCwgaW4gcHJvbWlzZSBjb250ZXh0IChodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vaXNzdWVzLzU4MjApXG4gICAgICAgIHByb3RvY29sXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBUaHJlYWRlZFdhc21Xb3JrZXIuZ2xvYmFsLnRoZW4oZ2xvYmFsID0+IHtcbiAgICAgIHRoaXMuaW5zdGFuY2UgPSBnbG9iYWwuaW5zdGFuY2U7XG4gICAgICByZXR1cm4gZ2xvYmFsLnByb3RvY29sO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAoVGhyZWFkZWRXYXNtV29ya2VyLmdsb2JhbCkge1xuICAgICAgY29uc29sZS5sb2coJ3N0b3BwaW5nIHNpbmdsZXRvbiB3YXNteCB3b3JrZXIgKGluc3RlYWQgb2YgZGVzdHJveWluZykgLi4uJyk7XG4gICAgICB0aGlzLnN0b3AoKS50aGVuKCgpID0+IGNvbnNvbGUubG9nKCcuLi4gc3VjY2Vzc2Z1bGx5IHN0b3BwZWQnKSk7XG4gICAgfVxuICB9XG5cbiAgc2VuZChjbWQ6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmluc3RhbmNlKSB0aGlzLmluc3RhbmNlLnBvc3RNZXNzYWdlKGNtZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvb2wge1xuICBwcml2YXRlIHdvcmtlcnM6IEFic3RyYWN0V29ya2VyW10gPSBbXTtcbiAgcHJpdmF0ZSB0b2tlbiA9IDA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBwb29sT3B0czogUG9vbE9wdHMsIHByaXZhdGUgcHJvdG9jb2xPcHRzOiBXb3JrZXJPcHRzKSB7IH1cblxuICBnZXRXb3JrZXIoKTogUHJvbWlzZTxBYnN0cmFjdFdvcmtlcj4ge1xuICAgIHRoaXMud2FybXVwKCk7XG5cbiAgICAvLyBicmllZmx5IHdhaXQgYW5kIGdpdmUgYSBjaGFuY2UgdG8gcmV1c2UgdGhlIGN1cnJlbnQgd29ya2VyXG4gICAgY29uc3Qgd29ya2VyID0gbmV3IFByb21pc2U8QWJzdHJhY3RXb3JrZXI+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRXb3JrZXIgPSB0aGlzLndvcmtlcnNbdGhpcy50b2tlbl07XG4gICAgICBjdXJyZW50V29ya2VyLnN0b3AoKS50aGVuKCgpID0+IHJlc29sdmUoY3VycmVudFdvcmtlcikpO1xuICAgICAgc2V0VGltZW91dChyZWplY3QsIDUwKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB3b3JrZXIuY2F0Y2goKCkgPT4ge1xuICAgICAgdGhpcy50b2tlbiA9ICh0aGlzLnRva2VuICsgMSkgJSB0aGlzLndvcmtlcnMubGVuZ3RoO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLndvcmtlcnNbdGhpcy50b2tlbl0pO1xuICAgIH0pO1xuICB9XG5cbiAgd2FybXVwID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLndvcmtlcnMubGVuZ3RoKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5wb29sT3B0cy50ZWNobm9sb2d5ID09ICd3YXNteCcpXG4gICAgICB0aGlzLndvcmtlcnMucHVzaChuZXcgVGhyZWFkZWRXYXNtV29ya2VyKHRoaXMucG9vbE9wdHMud2FzbXgsIHRoaXMucG9vbE9wdHMsIHRoaXMucHJvdG9jb2xPcHRzKSk7XG4gICAgZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAyOyBpKyspXG4gICAgICAgIHRoaXMud29ya2Vycy5wdXNoKG5ldyBXZWJXb3JrZXIodGhpcy5wb29sT3B0cy50ZWNobm9sb2d5ID09ICd3YXNtJyA/IHRoaXMucG9vbE9wdHMud2FzbSA6IHRoaXMucG9vbE9wdHMuYXNtanMsIHRoaXMucG9vbE9wdHMsIHRoaXMucHJvdG9jb2xPcHRzKSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCA9ICgpID0+IHRoaXMud29ya2Vycy5mb3JFYWNoKHcgPT4gdy5zdG9wKCkpO1xuXG4gIGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgdGhpcy53b3JrZXJzLmZvckVhY2godyA9PiB3LmRlc3Ryb3koKSk7XG4gIH07XG5cbiAgc3RhcnQgPSAod29yazogV29yaykgPT4ge1xuICAgIHdpbmRvdy5saWNoZXNzLnN0b3JhZ2UuZmlyZSgnY2V2YWwucG9vbC5zdGFydCcpO1xuICAgIHRoaXMuZ2V0V29ya2VyKCkudGhlbihmdW5jdGlvbih3b3JrZXIpIHtcbiAgICAgIHdvcmtlci5zdGFydCh3b3JrKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB3aW5kb3cubGljaGVzcy5yZWxvYWQoKSwgMTAwMDApO1xuICAgIH0pO1xuICB9O1xuXG4gIGlzQ29tcHV0aW5nID0gKCkgPT5cbiAgICAhIXRoaXMud29ya2Vycy5sZW5ndGggJiYgdGhpcy53b3JrZXJzW3RoaXMudG9rZW5dLmlzQ29tcHV0aW5nKCk7XG5cbiAgZW5naW5lTmFtZTogKCkgPT4gc3RyaW5nIHwgdW5kZWZpbmVkID0gKCkgPT5cbiAgICB0aGlzLndvcmtlcnNbdGhpcy50b2tlbl0gJiYgdGhpcy53b3JrZXJzW3RoaXMudG9rZW5dLmVuZ2luZU5hbWUoKTtcbn1cbiIsImltcG9ydCB7IHZhcmlhbnRUb1J1bGVzIH0gZnJvbSAnY2hlc3MnO1xuaW1wb3J0IHsgV29ya2VyT3B0cywgV29yayB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBFVkFMX1JFR0VYID0gbmV3IFJlZ0V4cCgnJ1xuICArIC9eaW5mbyBkZXB0aCAoXFxkKykgc2VsZGVwdGggXFxkKyBtdWx0aXB2IChcXGQrKSAvLnNvdXJjZVxuICArIC9zY29yZSAoY3B8bWF0ZSkgKFstXFxkXSspIC8uc291cmNlXG4gICsgLyg/Oih1cHBlcnxsb3dlcilib3VuZCApP25vZGVzIChcXGQrKSBucHMgXFxTKyAvLnNvdXJjZVxuICArIC8oPzpoYXNoZnVsbCBcXGQrICk/KD86dGJoaXRzIFxcZCsgKT90aW1lIChcXFMrKSAvLnNvdXJjZVxuICArIC9wdiAoLispLy5zb3VyY2UpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm90b2NvbCB7XG4gIHByaXZhdGUgd29yazogV29yayB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGN1ckV2YWw6IFRyZWUuQ2xpZW50RXZhbCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGV4cGVjdGVkUHZzID0gMTtcbiAgcHJpdmF0ZSBzdG9wcGVkOiBEZWZlclByb21pc2UuRGVmZXJyZWQ8dm9pZD4gfCBudWxsO1xuXG4gIHB1YmxpYyBlbmdpbmVOYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzZW5kOiAoY21kOiBzdHJpbmcpID0+IHZvaWQsIHByaXZhdGUgb3B0czogV29ya2VyT3B0cykge1xuXG4gICAgdGhpcy5zdG9wcGVkID0gZGVmZXI8dm9pZD4oKTtcbiAgICB0aGlzLnN0b3BwZWQucmVzb2x2ZSgpO1xuXG4gICAgLy8gZ2V0IGVuZ2luZSBuYW1lL3ZlcnNpb25cbiAgICB0aGlzLnNlbmQoJ3VjaScpO1xuXG4gICAgLy8gYW5hbHlzZSB3aXRob3V0IGNvbnRlbXB0XG4gICAgdGhpcy5zZXRPcHRpb24oJ1VDSV9BbmFseXNlTW9kZScsICd0cnVlJyk7XG4gICAgdGhpcy5zZXRPcHRpb24oJ0FuYWx5c2lzIENvbnRlbXB0JywgJ09mZicpO1xuXG4gICAgaWYgKG9wdHMudmFyaWFudCA9PT0gJ2Zyb21Qb3NpdGlvbicgfHwgb3B0cy52YXJpYW50ID09PSAnY2hlc3M5NjAnKVxuICAgICAgdGhpcy5zZXRPcHRpb24oJ1VDSV9DaGVzczk2MCcsICd0cnVlJyk7XG4gICAgZWxzZSBpZiAob3B0cy52YXJpYW50ID09PSAnYW50aWNoZXNzJylcbiAgICAgIHRoaXMuc2V0T3B0aW9uKCdVQ0lfVmFyaWFudCcsICdnaXZlYXdheScpO1xuICAgIGVsc2UgaWYgKG9wdHMudmFyaWFudCAhPT0gJ3N0YW5kYXJkJylcbiAgICAgIHRoaXMuc2V0T3B0aW9uKCdVQ0lfVmFyaWFudCcsIHZhcmlhbnRUb1J1bGVzKG9wdHMudmFyaWFudCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgdGhpcy5zZW5kKGBzZXRvcHRpb24gbmFtZSAke25hbWV9IHZhbHVlICR7dmFsdWV9YCk7XG4gIH1cblxuICByZWNlaXZlZCh0ZXh0OiBzdHJpbmcpIHtcbiAgICBpZiAodGV4dC5zdGFydHNXaXRoKCdpZCBuYW1lICcpKSB0aGlzLmVuZ2luZU5hbWUgPSB0ZXh0LnN1YnN0cmluZygnaWQgbmFtZSAnLmxlbmd0aCk7XG4gICAgZWxzZSBpZiAodGV4dC5zdGFydHNXaXRoKCdiZXN0bW92ZSAnKSkge1xuICAgICAgaWYgKCF0aGlzLnN0b3BwZWQpIHRoaXMuc3RvcHBlZCA9IGRlZmVyPHZvaWQ+KCk7XG4gICAgICB0aGlzLnN0b3BwZWQucmVzb2x2ZSgpO1xuICAgICAgaWYgKHRoaXMud29yayAmJiB0aGlzLmN1ckV2YWwpIHRoaXMud29yay5lbWl0KHRoaXMuY3VyRXZhbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy53b3JrKSByZXR1cm47XG5cbiAgICBsZXQgbWF0Y2hlcyA9IHRleHQubWF0Y2goRVZBTF9SRUdFWCk7XG4gICAgaWYgKCFtYXRjaGVzKSByZXR1cm47XG5cbiAgICBsZXQgZGVwdGggPSBwYXJzZUludChtYXRjaGVzWzFdKSxcbiAgICAgIG11bHRpUHYgPSBwYXJzZUludChtYXRjaGVzWzJdKSxcbiAgICAgIGlzTWF0ZSA9IG1hdGNoZXNbM10gPT09ICdtYXRlJyxcbiAgICAgIGV2ID0gcGFyc2VJbnQobWF0Y2hlc1s0XSksXG4gICAgICBldmFsVHlwZSA9IG1hdGNoZXNbNV0sXG4gICAgICBub2RlcyA9IHBhcnNlSW50KG1hdGNoZXNbNl0pLFxuICAgICAgZWxhcHNlZE1zOiBudW1iZXIgPSBwYXJzZUludChtYXRjaGVzWzddKSxcbiAgICAgIG1vdmVzID0gbWF0Y2hlc1s4XS5zcGxpdCgnICcpO1xuXG4gICAgLy8gU29tZXRpbWVzIHdlIGdldCAjMC4gTGV0J3MganVzdCBza2lwIGl0LlxuICAgIGlmIChpc01hdGUgJiYgIWV2KSByZXR1cm47XG5cbiAgICAvLyBUcmFjayBtYXggcHYgaW5kZXggdG8gZGV0ZXJtaW5lIHdoZW4gcHYgcHJpbnRzIGFyZSBkb25lLlxuICAgIGlmICh0aGlzLmV4cGVjdGVkUHZzIDwgbXVsdGlQdikgdGhpcy5leHBlY3RlZFB2cyA9IG11bHRpUHY7XG5cbiAgICBpZiAoZGVwdGggPCB0aGlzLm9wdHMubWluRGVwdGgpIHJldHVybjtcblxuICAgIGxldCBwaXZvdCA9IHRoaXMud29yay50aHJlYXRNb2RlID8gMCA6IDE7XG4gICAgaWYgKHRoaXMud29yay5wbHkgJSAyID09PSBwaXZvdCkgZXYgPSAtZXY7XG5cbiAgICAvLyBGb3Igbm93LCBpZ25vcmUgbW9zdCB1cHBlcmJvdW5kL2xvd2VyYm91bmQgbWVzc2FnZXMuXG4gICAgLy8gVGhlIGV4Y2VwdGlvbiBpcyBmb3IgbXVsdGlQViwgc29tZXRpbWVzIG5vbi1wcmltYXJ5IFBWc1xuICAgIC8vIG9ubHkgaGF2ZSBhbiB1cHBlcmJvdW5kLlxuICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RkdWdvdmljL1N0b2NrZmlzaC9pc3N1ZXMvMjI4XG4gICAgaWYgKGV2YWxUeXBlICYmIG11bHRpUHYgPT09IDEpIHJldHVybjtcblxuICAgIGxldCBwdkRhdGEgPSB7XG4gICAgICBtb3ZlcyxcbiAgICAgIGNwOiBpc01hdGUgPyB1bmRlZmluZWQgOiBldixcbiAgICAgIG1hdGU6IGlzTWF0ZSA/IGV2IDogdW5kZWZpbmVkLFxuICAgICAgZGVwdGgsXG4gICAgfTtcblxuICAgIGlmIChtdWx0aVB2ID09PSAxKSB7XG4gICAgICB0aGlzLmN1ckV2YWwgPSB7XG4gICAgICAgIGZlbjogdGhpcy53b3JrLmN1cnJlbnRGZW4sXG4gICAgICAgIG1heERlcHRoOiB0aGlzLndvcmsubWF4RGVwdGgsXG4gICAgICAgIGRlcHRoLFxuICAgICAgICBrbnBzOiBub2RlcyAvIGVsYXBzZWRNcyxcbiAgICAgICAgbm9kZXMsXG4gICAgICAgIGNwOiBpc01hdGUgPyB1bmRlZmluZWQgOiBldixcbiAgICAgICAgbWF0ZTogaXNNYXRlID8gZXYgOiB1bmRlZmluZWQsXG4gICAgICAgIHB2czogW3B2RGF0YV0sXG4gICAgICAgIG1pbGxpczogZWxhcHNlZE1zXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJFdmFsKSB7XG4gICAgICB0aGlzLmN1ckV2YWwucHZzLnB1c2gocHZEYXRhKTtcbiAgICAgIHRoaXMuY3VyRXZhbC5kZXB0aCA9IE1hdGgubWluKHRoaXMuY3VyRXZhbC5kZXB0aCwgZGVwdGgpO1xuICAgIH1cblxuICAgIGlmIChtdWx0aVB2ID09PSB0aGlzLmV4cGVjdGVkUHZzICYmIHRoaXMuY3VyRXZhbCkge1xuICAgICAgdGhpcy53b3JrLmVtaXQodGhpcy5jdXJFdmFsKTtcbiAgICB9XG4gIH1cblxuICBzdGFydCh3OiBXb3JrKSB7XG4gICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgIC8vIFRPRE86IFdvcmsgaXMgc3RhcnRlZCBieSBiYXNpY2FsbHkgZG9pbmcgc3RvcCgpLnRoZW4oKCkgPT4gc3RhcnQodykpLlxuICAgICAgLy8gVGhlcmUgaXMgYSByYWNlIGNvbmRpdGlvbiB3aGVyZSBtdWx0aXBsZSBjYWxsZXJzIGFyZSB3YWl0aW5nIGZvclxuICAgICAgLy8gY29tcGxldGlvbiBvZiB0aGUgc2FtZSBzdG9wIGZ1dHVyZSwgYW5kIHNvIHRoZXkgd2lsbCBzdGFydCB3b3JrIGF0XG4gICAgICAvLyB0aGUgc2FtZSB0aW1lLlxuICAgICAgLy8gVGhpcyBjYW4gbGVhZCB0byBhbGwga2luZHMgb2YgaXNzdWVzLCBpbmNsdWRpbmcgZGVhZGxvY2tzLiBJbnN0ZWFkXG4gICAgICAvLyB3ZSBpZ25vcmUgYWxsIGJ1dCB0aGUgZmlyc3QgcmVxdWVzdC4gVGhlIGVuZ2luZSB3aWxsIHNob3cgYXMgbG9hZGluZ1xuICAgICAgLy8gaW5kZWZpbml0ZWx5LiBVbnRpbCB0aGlzIGlzIGZpeGVkLCBpdCBpcyBzdGlsbCBiZXR0ZXIgdGhhbiBhXG4gICAgICAvLyBwb3NzaWJsZSBkZWFkbG9jay5cbiAgICAgIGNvbnNvbGUubG9nKCdjZXZhbDogdHJpZWQgdG8gc3RhcnQgYW5hbHlzaW5nIGJlZm9yZSByZXF1ZXN0aW5nIHN0b3AnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy53b3JrID0gdztcbiAgICB0aGlzLmN1ckV2YWwgPSBudWxsO1xuICAgIHRoaXMuc3RvcHBlZCA9IG51bGw7XG4gICAgdGhpcy5leHBlY3RlZFB2cyA9IDE7XG4gICAgaWYgKHRoaXMub3B0cy50aHJlYWRzKSB0aGlzLnNldE9wdGlvbignVGhyZWFkcycsIHRoaXMub3B0cy50aHJlYWRzKCkpO1xuICAgIGlmICh0aGlzLm9wdHMuaGFzaFNpemUpIHRoaXMuc2V0T3B0aW9uKCdIYXNoJywgdGhpcy5vcHRzLmhhc2hTaXplKCkpO1xuICAgIHRoaXMuc2V0T3B0aW9uKCdNdWx0aVBWJywgdGhpcy53b3JrLm11bHRpUHYpO1xuICAgIHRoaXMuc2VuZChbJ3Bvc2l0aW9uJywgJ2ZlbicsIHRoaXMud29yay5pbml0aWFsRmVuLCAnbW92ZXMnXS5jb25jYXQodGhpcy53b3JrLm1vdmVzKS5qb2luKCcgJykpO1xuICAgIGlmICh0aGlzLndvcmsubWF4RGVwdGggPj0gOTkpIHRoaXMuc2VuZCgnZ28gZGVwdGggOTknKTtcbiAgICBlbHNlIHRoaXMuc2VuZCgnZ28gbW92ZXRpbWUgOTAwMDAgZGVwdGggJyArIHRoaXMud29yay5tYXhEZXB0aCk7XG4gIH1cblxuICBzdG9wKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zdG9wcGVkKSB7XG4gICAgICB0aGlzLndvcmsgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZGVmZXI8dm9pZD4oKTtcbiAgICAgIHRoaXMuc2VuZCgnc3RvcCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdG9wcGVkLnByb21pc2U7XG4gIH1cblxuICBpc0NvbXB1dGluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuc3RvcHBlZDtcbiAgfVxufTtcblxuZnVuY3Rpb24gZGVmZXI8QT4oKTogRGVmZXJQcm9taXNlLkRlZmVycmVkPEE+IHtcbiAgY29uc3QgZGVmZXJyZWQ6IFBhcnRpYWw8RGVmZXJQcm9taXNlLkRlZmVycmVkPEE+PiA9IHt9XG4gIGRlZmVycmVkLnByb21pc2UgPSBuZXcgUHJvbWlzZTxBPihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmVcbiAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3RcbiAgfSlcbiAgcmV0dXJuIGRlZmVycmVkIGFzIERlZmVyUHJvbWlzZS5EZWZlcnJlZDxBPjtcbn1cbiIsImltcG9ydCB7IEV2YWwsIENldmFsQ3RybCwgUGFyZW50Q3RybCwgTm9kZUV2YWxzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgKiBhcyB3aW5uaW5nQ2hhbmNlcyBmcm9tICcuL3dpbm5pbmdDaGFuY2VzJztcbmltcG9ydCB7IGRlZmluZWQgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0IHsgcmVuZGVyRXZhbCwgdmFyaWFudFRvUnVsZXMgfSBmcm9tICdjaGVzcyc7XG5pbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgb3Bwb3NpdGUsIHBhcnNlVWNpIH0gZnJvbSAnY2hlc3NvcHMvdXRpbCc7XG5pbXBvcnQgeyBwYXJzZUZlbiB9IGZyb20gJ2NoZXNzb3BzL2Zlbic7XG5pbXBvcnQgeyBtYWtlU2FuVmFyaWF0aW9uIH0gZnJvbSAnY2hlc3NvcHMvc2FuJztcbmltcG9ydCB7IHNldHVwUG9zaXRpb24gfSBmcm9tICdjaGVzc29wcy92YXJpYW50JztcblxubGV0IGdhdWdlTGFzdCA9IDA7XG5jb25zdCBnYXVnZVRpY2tzOiBWTm9kZVtdID0gWy4uLkFycmF5KDgpLmtleXMoKV0ubWFwKGkgPT5cbiAgaChpID09PSAzID8gJ3RpY2suemVybycgOiAndGljaycsIHsgYXR0cnM6IHsgc3R5bGU6IGBoZWlnaHQ6ICR7KGkgKyAxKSAqIDEyLjV9JWAgfSB9KVxuKTtcblxuZnVuY3Rpb24gbG9jYWxFdmFsSW5mbyhjdHJsOiBQYXJlbnRDdHJsLCBldnM6IE5vZGVFdmFscyk6IEFycmF5PFZOb2RlIHwgc3RyaW5nPiB7XG4gIGNvbnN0IGNldmFsID0gY3RybC5nZXRDZXZhbCgpLCB0cmFucyA9IGN0cmwudHJhbnM7XG4gIGlmICghZXZzLmNsaWVudCkgcmV0dXJuIFtcbiAgICBldnMuc2VydmVyICYmIGN0cmwubmV4dE5vZGVCZXN0KCkgPyB0cmFucy5ub2FyZygndXNpbmdTZXJ2ZXJBbmFseXNpcycpIDogdHJhbnMubm9hcmcoJ2xvYWRpbmdFbmdpbmUnKSxcbiAgXTtcblxuICBjb25zdCB0OiBBcnJheTxWTm9kZSB8IHN0cmluZz4gPSBldnMuY2xpZW50LmNsb3VkID8gW1xuICAgIHRyYW5zKCdkZXB0aFgnLCBldnMuY2xpZW50LmRlcHRoIHx8IDApLFxuICAgIGgoJ3NwYW4uY2xvdWQnLCB7IGF0dHJzOiB7IHRpdGxlOiB0cmFucy5ub2FyZygnY2xvdWRBbmFseXNpcycpIH0gfSwgJ0Nsb3VkJylcbiAgXSA6IFtcbiAgICB0cmFucygnZGVwdGhYJywgKGV2cy5jbGllbnQuZGVwdGggfHwgMCkgKyAnLycgKyBldnMuY2xpZW50Lm1heERlcHRoKVxuICBdO1xuICBpZiAoY2V2YWwuY2FuR29EZWVwZXIoKSkgdC5wdXNoKGgoJ2EuZGVlcGVyJywge1xuICAgIGF0dHJzOiB7XG4gICAgICB0aXRsZTogdHJhbnMubm9hcmcoJ2dvRGVlcGVyJyksXG4gICAgICAnZGF0YS1pY29uJzogJ08nXG4gICAgfSxcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IHZub2RlID0+ICh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjZXZhbC5nb0RlZXBlcigpO1xuICAgICAgICBjZXZhbC5yZWRyYXcoKTtcbiAgICAgIH0pXG4gICAgfVxuICB9KSk7XG4gIGVsc2UgaWYgKCFldnMuY2xpZW50LmNsb3VkICYmIGV2cy5jbGllbnQua25wcykgdC5wdXNoKCcsICcgKyBNYXRoLnJvdW5kKGV2cy5jbGllbnQua25wcykgKyAnIGtub2Rlcy9zJyk7XG4gIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiB0aHJlYXRJbmZvKGN0cmw6IFBhcmVudEN0cmwsIHRocmVhdD86IFRyZWUuQ2xpZW50RXZhbCB8IGZhbHNlKTogc3RyaW5nIHtcbiAgaWYgKCF0aHJlYXQpIHJldHVybiBjdHJsLnRyYW5zLm5vYXJnKCdsb2FkaW5nRW5naW5lJyk7XG4gIGxldCB0ID0gY3RybC50cmFucygnZGVwdGhYJywgKHRocmVhdC5kZXB0aCB8fCAwKSArICcvJyArIHRocmVhdC5tYXhEZXB0aCk7XG4gIGlmICh0aHJlYXQua25wcykgdCArPSAnLCAnICsgTWF0aC5yb3VuZCh0aHJlYXQua25wcykgKyAnIGtub2Rlcy9zJztcbiAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIHRocmVhdEJ1dHRvbihjdHJsOiBQYXJlbnRDdHJsKTogVk5vZGUgfCBudWxsIHtcbiAgaWYgKGN0cmwuZGlzYWJsZVRocmVhdE1vZGUgJiYgY3RybC5kaXNhYmxlVGhyZWF0TW9kZSgpKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIGgoJ2Euc2hvdy10aHJlYXQnLCB7XG4gICAgY2xhc3M6IHtcbiAgICAgIGFjdGl2ZTogY3RybC50aHJlYXRNb2RlKCksXG4gICAgICBoaWRkZW46ICEhY3RybC5nZXROb2RlKCkuY2hlY2tcbiAgICB9LFxuICAgIGF0dHJzOiB7XG4gICAgICAnZGF0YS1pY29uJzogJzcnLFxuICAgICAgdGl0bGU6IGN0cmwudHJhbnMubm9hcmcoJ3Nob3dUaHJlYXQnKSArICcgKHgpJ1xuICAgIH0sXG4gICAgaG9vazoge1xuICAgICAgaW5zZXJ0OiB2bm9kZSA9PiAodm5vZGUuZWxtIGFzIEhUTUxFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGN0cmwudG9nZ2xlVGhyZWF0TW9kZSlcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbmdpbmVOYW1lKGN0cmw6IENldmFsQ3RybCk6IFZOb2RlW10ge1xuICBjb25zdCB2ZXJzaW9uID0gY3RybC5lbmdpbmVOYW1lKCk7XG4gIHJldHVybiBbXG4gICAgaCgnc3BhbicsIHZlcnNpb24gPyB7IGF0dHJzOiB7IHRpdGxlOiB2ZXJzaW9uIH0gfSA6IHt9LCBjdHJsLnRlY2hub2xvZ3kgPT0gJ3dhc214JyA/IHdpbmRvdy5saWNoZXNzLmVuZ2luZU5hbWUgOiAnU3RvY2tmaXNoIDEwKycpLFxuICAgIGN0cmwudGVjaG5vbG9neSA9PSAnd2FzbXgnID8gaCgnc3Bhbi5uYXRpdmUnLCB7IGF0dHJzOiB7IHRpdGxlOiAnTXVsdGktdGhyZWFkZWQgV2ViQXNzZW1ibHkgKGV4cGVyaW1lbnRhbCknIH0gfSwgJ3dhc214JykgOlxuICAgICAgKGN0cmwudGVjaG5vbG9neSA9PSAnd2FzbScgPyBoKCdzcGFuLm5hdGl2ZScsIHsgYXR0cnM6IHsgdGl0bGU6ICdXZWJBc3NlbWJseScgfSB9LCAnd2FzbScpIDpcbiAgICAgICAgaCgnc3Bhbi5hc21qcycsIHsgYXR0cnM6IHsgdGl0bGU6ICdKYXZhU2NyaXB0IGZhbGxiYWNrJyB9IH0sICdhc21qcycpKVxuICBdO1xufVxuXG5jb25zdCBzZXJ2ZXJOb2RlcyA9IDRlNjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJlc3RFdmFsKGV2czogTm9kZUV2YWxzKTogRXZhbCB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHNlcnZlckV2ID0gZXZzLnNlcnZlcixcbiAgICBsb2NhbEV2ID0gZXZzLmNsaWVudDtcblxuICBpZiAoIXNlcnZlckV2KSByZXR1cm4gbG9jYWxFdjtcbiAgaWYgKCFsb2NhbEV2KSByZXR1cm4gc2VydmVyRXY7XG5cbiAgLy8gUHJlZmVyIGxvY2FsRXYgaWYgaXQgZXhlZWRzIGZpc2huZXQgbm9kZSBsaW1pdCBvciBmaW5kcyBhIGJldHRlciBtYXRlLlxuICBpZiAobG9jYWxFdi5ub2RlcyA+IHNlcnZlck5vZGVzIHx8XG4gICAgKHR5cGVvZiBsb2NhbEV2Lm1hdGUgIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2Ygc2VydmVyRXYubWF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgTWF0aC5hYnMobG9jYWxFdi5tYXRlKSA8IE1hdGguYWJzKHNlcnZlckV2Lm1hdGUpKSkpXG4gICAgcmV0dXJuIGxvY2FsRXY7XG5cbiAgcmV0dXJuIHNlcnZlckV2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyR2F1Z2UoY3RybDogUGFyZW50Q3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgaWYgKGN0cmwub25nb2luZyB8fCAhY3RybC5zaG93RXZhbEdhdWdlKCkpIHJldHVybjtcbiAgbGV0IGV2LCBiZXN0RXYgPSBnZXRCZXN0RXZhbChjdHJsLmN1cnJlbnRFdmFscygpKTtcbiAgaWYgKGJlc3RFdikge1xuICAgIGV2ID0gd2lubmluZ0NoYW5jZXMucG92Q2hhbmNlcygnd2hpdGUnLCBiZXN0RXYpO1xuICAgIGdhdWdlTGFzdCA9IGV2O1xuICB9IGVsc2UgZXYgPSBnYXVnZUxhc3Q7XG4gIHJldHVybiBoKCdkaXYuZXZhbC1nYXVnZScsIHtcbiAgICBjbGFzczoge1xuICAgICAgZW1wdHk6IGV2ID09PSBudWxsLFxuICAgICAgcmV2ZXJzZTogY3RybC5nZXRPcmllbnRhdGlvbigpID09PSAnYmxhY2snXG4gICAgfVxuICB9LCBbXG4gICAgaCgnZGl2LmJsYWNrJywgeyBhdHRyczogeyBzdHlsZTogYGhlaWdodDogJHsxMDAgLSAoZXYgKyAxKSAqIDUwfSVgIH0gfSksXG4gICAgLi4uZ2F1Z2VUaWNrc1xuICBdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckNldmFsKGN0cmw6IFBhcmVudEN0cmwpOiBWTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGluc3RhbmNlID0gY3RybC5nZXRDZXZhbCgpLCB0cmFucyA9IGN0cmwudHJhbnM7XG4gIGlmICghaW5zdGFuY2UuYWxsb3dlZCgpIHx8ICFpbnN0YW5jZS5wb3NzaWJsZSB8fCAhY3RybC5zaG93Q29tcHV0ZXIoKSkgcmV0dXJuO1xuICBjb25zdCBlbmFibGVkID0gaW5zdGFuY2UuZW5hYmxlZCgpLFxuICAgIGV2cyA9IGN0cmwuY3VycmVudEV2YWxzKCksXG4gICAgdGhyZWF0TW9kZSA9IGN0cmwudGhyZWF0TW9kZSgpLFxuICAgIHRocmVhdCA9IHRocmVhdE1vZGUgJiYgY3RybC5nZXROb2RlKCkudGhyZWF0LFxuICAgIGJlc3RFdiA9IHRocmVhdCB8fCBnZXRCZXN0RXZhbChldnMpO1xuICBsZXQgcGVhcmw6IFZOb2RlIHwgc3RyaW5nLCBwZXJjZW50OiBudW1iZXI7XG4gIGlmIChiZXN0RXYgJiYgdHlwZW9mIGJlc3RFdi5jcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBwZWFybCA9IHJlbmRlckV2YWwoYmVzdEV2LmNwKTtcbiAgICBwZXJjZW50ID0gZXZzLmNsaWVudCA/IE1hdGgubWluKDEwMCwgTWF0aC5yb3VuZCgxMDAgKiBldnMuY2xpZW50LmRlcHRoIC8gKGV2cy5jbGllbnQubWF4RGVwdGggfHwgaW5zdGFuY2UuZWZmZWN0aXZlTWF4RGVwdGgoKSkpKSA6IDA7XG4gIH0gZWxzZSBpZiAoYmVzdEV2ICYmIGRlZmluZWQoYmVzdEV2Lm1hdGUpKSB7XG4gICAgcGVhcmwgPSAnIycgKyBiZXN0RXYubWF0ZTtcbiAgICBwZXJjZW50ID0gMTAwO1xuICB9IGVsc2UgaWYgKGN0cmwuZ2FtZU92ZXIoKSkge1xuICAgIHBlYXJsID0gJy0nO1xuICAgIHBlcmNlbnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIHBlYXJsID0gZW5hYmxlZCA/IGgoJ2kuZGRsb2FkZXInKSA6IGgoJ2knKTtcbiAgICBwZXJjZW50ID0gMDtcbiAgfVxuICBpZiAodGhyZWF0TW9kZSkge1xuICAgIGlmICh0aHJlYXQpIHBlcmNlbnQgPSBNYXRoLm1pbigxMDAsIE1hdGgucm91bmQoMTAwICogdGhyZWF0LmRlcHRoIC8gdGhyZWF0Lm1heERlcHRoKSk7XG4gICAgZWxzZSBwZXJjZW50ID0gMDtcbiAgfVxuXG4gIGNvbnN0IHByb2dyZXNzQmFyOiBWTm9kZSB8IG51bGwgPSBlbmFibGVkID8gaCgnZGl2LmJhcicsIGgoJ3NwYW4nLCB7XG4gICAgY2xhc3M6IHsgdGhyZWF0OiB0aHJlYXRNb2RlIH0sXG4gICAgYXR0cnM6IHsgc3R5bGU6IGB3aWR0aDogJHtwZXJjZW50fSVgIH0sXG4gICAgaG9vazoge1xuICAgICAgcG9zdHBhdGNoOiAob2xkLCB2bm9kZSkgPT4ge1xuICAgICAgICBpZiAob2xkLmRhdGEhLnBlcmNlbnQgPiBwZXJjZW50IHx8ICEhb2xkLmRhdGEhLnRocmVhdE1vZGUgIT0gdGhyZWF0TW9kZSkge1xuICAgICAgICAgIGNvbnN0IGVsID0gdm5vZGUuZWxtIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IHAgPSBlbC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIHAucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICAgIHAuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB9XG4gICAgICAgIHZub2RlLmRhdGEhLnBlcmNlbnQgPSBwZXJjZW50O1xuICAgICAgICB2bm9kZS5kYXRhIS50aHJlYXRNb2RlID0gdGhyZWF0TW9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pKSA6IG51bGw7XG5cbiAgY29uc3QgYm9keTogQXJyYXk8Vk5vZGUgfCBudWxsPiA9IGVuYWJsZWQgPyBbXG4gICAgaCgncGVhcmwnLCBbcGVhcmxdKSxcbiAgICBoKCdkaXYuZW5naW5lJywgW1xuICAgICAgLi4uKHRocmVhdE1vZGUgPyBbdHJhbnMubm9hcmcoJ3Nob3dUaHJlYXQnKV0gOiBlbmdpbmVOYW1lKGluc3RhbmNlKSksXG4gICAgICBoKCdzcGFuLmluZm8nLFxuICAgICAgICBjdHJsLmdhbWVPdmVyKCkgPyBbdHJhbnMubm9hcmcoJ2dhbWVPdmVyJyldIDpcbiAgICAgICAgKHRocmVhdE1vZGUgPyBbdGhyZWF0SW5mbyhjdHJsLCB0aHJlYXQpXSA6IGxvY2FsRXZhbEluZm8oY3RybCwgZXZzKSlcbiAgICAgIClcbiAgICBdKVxuICBdIDogW1xuICAgIHBlYXJsID8gaCgncGVhcmwnLCBbcGVhcmxdKSA6IG51bGwsXG4gICAgaCgnaGVscCcsIFtcbiAgICAgIC4uLmVuZ2luZU5hbWUoaW5zdGFuY2UpLFxuICAgICAgaCgnYnInKSxcbiAgICAgIHRyYW5zLm5vYXJnKCdpbkxvY2FsQnJvd3NlcicpXG4gICAgXSlcbiAgXTtcblxuICBjb25zdCBzd2l0Y2hCdXR0b246IFZOb2RlIHwgbnVsbCA9IGN0cmwubWFuZGF0b3J5Q2V2YWwgJiYgY3RybC5tYW5kYXRvcnlDZXZhbCgpID8gbnVsbCA6IGgoJ2Rpdi5zd2l0Y2gnLCB7XG4gICAgYXR0cnM6IHsgdGl0bGU6IHRyYW5zLm5vYXJnKCd0b2dnbGVMb2NhbEV2YWx1YXRpb24nKSArICcgKGwpJyB9XG4gIH0sIFtcbiAgICBoKCdpbnB1dCNhbmFseXNlLXRvZ2dsZS1jZXZhbC5jbW4tdG9nZ2xlLmNtbi10b2dnbGUtLXN1YnRsZScsIHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNoZWNrZWQ6IGVuYWJsZWRcbiAgICAgIH0sXG4gICAgICBob29rOiB7XG4gICAgICAgIGluc2VydDogdm5vZGUgPT4gKHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY3RybC50b2dnbGVDZXZhbClcbiAgICAgIH1cbiAgICB9KSxcbiAgICBoKCdsYWJlbCcsIHsgYXR0cnM6IHsgJ2Zvcic6ICdhbmFseXNlLXRvZ2dsZS1jZXZhbCcgfSB9KVxuICBdKVxuXG4gIHJldHVybiBoKCdkaXYuY2V2YWwnICsgKGVuYWJsZWQgPyAnLmVuYWJsZWQnIDogJycpLCB7XG4gICAgY2xhc3M6IHtcbiAgICAgIGNvbXB1dGluZzogcGVyY2VudCA8IDEwMCAmJiBpbnN0YW5jZS5pc0NvbXB1dGluZygpXG4gICAgfVxuICB9LCBbXG4gICAgcHJvZ3Jlc3NCYXIsXG4gICAgLi4uYm9keSxcbiAgICB0aHJlYXRCdXR0b24oY3RybCksXG4gICAgc3dpdGNoQnV0dG9uXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBnZXRFbEZlbihlbDogSFRNTEVsZW1lbnQpOiBzdHJpbmcge1xuICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWZlbicpITtcbn1cblxuZnVuY3Rpb24gZ2V0RWxVY2koZTogTW91c2VFdmVudCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAkKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdkaXYucHYnKS5hdHRyKCdkYXRhLXVjaScpO1xufVxuXG5mdW5jdGlvbiBjaGVja0hvdmVyKGVsOiBIVE1MRWxlbWVudCwgaW5zdGFuY2U6IENldmFsQ3RybCk6IHZvaWQge1xuICB3aW5kb3cubGljaGVzcy5yZXF1ZXN0SWRsZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpbnN0YW5jZS5zZXRIb3ZlcmluZyhnZXRFbEZlbihlbCksICQoZWwpLmZpbmQoJ2Rpdi5wdjpob3ZlcicpLmF0dHIoJ2RhdGEtdWNpJykpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclB2cyhjdHJsOiBQYXJlbnRDdHJsKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gY3RybC5nZXRDZXZhbCgpO1xuICBpZiAoIWluc3RhbmNlLmFsbG93ZWQoKSB8fCAhaW5zdGFuY2UucG9zc2libGUgfHwgIWluc3RhbmNlLmVuYWJsZWQoKSkgcmV0dXJuO1xuICBjb25zdCBtdWx0aVB2ID0gcGFyc2VJbnQoaW5zdGFuY2UubXVsdGlQdigpKSxcbiAgICBub2RlID0gY3RybC5nZXROb2RlKCksXG4gICAgc2V0dXAgPSBwYXJzZUZlbihub2RlLmZlbikudW53cmFwKCk7XG4gIGxldCBwdnMgOiBUcmVlLlB2RGF0YVtdLCB0aHJlYXQgPSBmYWxzZTtcbiAgaWYgKGN0cmwudGhyZWF0TW9kZSgpICYmIG5vZGUudGhyZWF0KSB7XG4gICAgcHZzID0gbm9kZS50aHJlYXQucHZzO1xuICAgIHRocmVhdCA9IHRydWU7XG4gIH0gZWxzZSBpZiAobm9kZS5jZXZhbCkgcHZzID0gbm9kZS5jZXZhbC5wdnM7XG4gIGVsc2UgcHZzID0gW107XG4gIGlmICh0aHJlYXQpIHNldHVwLnR1cm4gPSBvcHBvc2l0ZShzZXR1cC50dXJuKTtcbiAgY29uc3QgcG9zID0gc2V0dXBQb3NpdGlvbih2YXJpYW50VG9SdWxlcyhpbnN0YW5jZS52YXJpYW50LmtleSksIHNldHVwKTtcbiAgcmV0dXJuIGgoJ2Rpdi5wdl9ib3gnLCB7XG4gICAgYXR0cnM6IHsgJ2RhdGEtZmVuJzogbm9kZS5mZW4gfSxcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQ6IHZub2RlID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSB2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgaW5zdGFuY2Uuc2V0SG92ZXJpbmcoZ2V0RWxGZW4oZWwpLCBnZXRFbFVjaShlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgICBpbnN0YW5jZS5zZXRIb3ZlcmluZyhnZXRFbEZlbihlbCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCB1Y2kgPSBnZXRFbFVjaShlKTtcbiAgICAgICAgICBpZiAodWNpKSBjdHJsLnBsYXlVY2kodWNpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNoZWNrSG92ZXIoZWwsIGluc3RhbmNlKTtcbiAgICAgIH0sXG4gICAgICBwb3N0cGF0Y2g6IChfLCB2bm9kZSkgPT4gY2hlY2tIb3Zlcih2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQsIGluc3RhbmNlKVxuICAgIH1cbiAgfSwgWy4uLkFycmF5KG11bHRpUHYpLmtleXMoKV0ubWFwKGZ1bmN0aW9uKGkpIHtcbiAgICBpZiAoIXB2c1tpXSkgcmV0dXJuIGgoJ2Rpdi5wdicpO1xuICAgIHJldHVybiBoKCdkaXYucHYnLCB0aHJlYXQgPyB7fSA6IHtcbiAgICAgIGF0dHJzOiB7ICdkYXRhLXVjaSc6IHB2c1tpXS5tb3Zlc1swXSB9XG4gICAgfSwgW1xuICAgICAgbXVsdGlQdiA+IDEgPyBoKCdzdHJvbmcnLCBkZWZpbmVkKHB2c1tpXS5tYXRlKSA/ICgnIycgKyBwdnNbaV0ubWF0ZSkgOiByZW5kZXJFdmFsKHB2c1tpXS5jcCEpKSA6IG51bGwsXG4gICAgICBoKCdzcGFuJywgcG9zLnVud3JhcChwb3MgPT4gbWFrZVNhblZhcmlhdGlvbihwb3MsIHB2c1tpXS5tb3Zlcy5zbGljZSgwLCAxMikubWFwKG0gPT4gcGFyc2VVY2kobSkhKSksIF8gPT4gJy0tJykpXG4gICAgXSk7XG4gIH0pKTtcbn1cbiIsImltcG9ydCB7IEV2YWwgfSBmcm9tICcuL3R5cGVzJztcblxuZnVuY3Rpb24gdG9Qb3YoY29sb3I6IENvbG9yLCBkaWZmOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gY29sb3IgPT09ICd3aGl0ZScgPyBkaWZmIDogLWRpZmY7XG59XG5cbi8qKlxuICogaHR0cHM6Ly9ncmFwaHNrZXRjaC5jb20vP2VxbjFfY29sb3I9MSZlcW4xX2Vxbj0xMDArKislMjgyKyUyRislMjgxKyUyQitleHAlMjgtMC4wMDUrKit4JTI5JTI5Ky0rMSUyOSZlcW4yX2NvbG9yPTImZXFuMl9lcW49MTAwKyorJTI4MislMkYrJTI4MSslMkIrZXhwJTI4LTAuMDA0KyoreCUyOSUyOSstKzElMjkmZXFuM19jb2xvcj0zJmVxbjNfZXFuPSZlcW40X2NvbG9yPTQmZXFuNF9lcW49JmVxbjVfY29sb3I9NSZlcW41X2Vxbj0mZXFuNl9jb2xvcj02JmVxbjZfZXFuPSZ4X21pbj0tMTAwMCZ4X21heD0xMDAwJnlfbWluPS0xMDAmeV9tYXg9MTAwJnhfdGljaz0xMDAmeV90aWNrPTEwJnhfbGFiZWxfZnJlcT0yJnlfbGFiZWxfZnJlcT0yJmRvX2dyaWQ9MCZkb19ncmlkPTEmYm9sZF9sYWJlbGVkX2xpbmVzPTAmYm9sZF9sYWJlbGVkX2xpbmVzPTEmbGluZV93aWR0aD00JmltYWdlX3c9ODUwJmltYWdlX2g9NTI1XG4gKi9cbmZ1bmN0aW9uIHJhd1dpbm5pbmdDaGFuY2VzKGNwOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gMiAvICgxICsgTWF0aC5leHAoLTAuMDA0ICogY3ApKSAtIDE7XG59XG5cbmZ1bmN0aW9uIGNwV2lubmluZ0NoYW5jZXMoY3A6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiByYXdXaW5uaW5nQ2hhbmNlcyhNYXRoLm1pbihNYXRoLm1heCgtMTAwMCwgY3ApLCAxMDAwKSk7XG59XG5cbmZ1bmN0aW9uIG1hdGVXaW5uaW5nQ2hhbmNlcyhtYXRlOiBudW1iZXIpOiBudW1iZXIge1xuICB2YXIgY3AgPSAoMjEgLSBNYXRoLm1pbigxMCwgTWF0aC5hYnMobWF0ZSkpKSAqIDEwMDtcbiAgdmFyIHNpZ25lZCA9IGNwICogKG1hdGUgPiAwID8gMSA6IC0xKTtcbiAgcmV0dXJuIHJhd1dpbm5pbmdDaGFuY2VzKHNpZ25lZCk7XG59XG5cbmZ1bmN0aW9uIGV2YWxXaW5uaW5nQ2hhbmNlcyhldjogRXZhbCk6IG51bWJlciB7XG4gIHJldHVybiB0eXBlb2YgZXYubWF0ZSAhPT0gJ3VuZGVmaW5lZCcgPyBtYXRlV2lubmluZ0NoYW5jZXMoZXYubWF0ZSkgOiBjcFdpbm5pbmdDaGFuY2VzKGV2LmNwISk7XG59XG5cbi8vIHdpbm5pbmcgY2hhbmNlcyBmb3IgYSBjb2xvclxuLy8gMSAgaW5maW5pdGVseSB3aW5uaW5nXG4vLyAtMSBpbmZpbml0ZWx5IGxvc2luZ1xuZXhwb3J0IGZ1bmN0aW9uIHBvdkNoYW5jZXMoY29sb3I6IENvbG9yLCBldjogRXZhbCkge1xuICByZXR1cm4gdG9Qb3YoY29sb3IsIGV2YWxXaW5uaW5nQ2hhbmNlcyhldikpO1xufVxuXG4vLyBjb21wdXRlcyB0aGUgZGlmZmVyZW5jZSwgaW4gd2lubmluZyBjaGFuY2VzLCBiZXR3ZWVuIHR3byBldmFsdWF0aW9uc1xuLy8gMSAgPSBlMSBpcyBpbmZpbmF0ZWx5IGJldHRlciB0aGFuIGUyXG4vLyAtMSA9IGUxIGlzIGluZmluYXRlbHkgd29yc2UgIHRoYW4gZTJcbmV4cG9ydCBmdW5jdGlvbiBwb3ZEaWZmKGNvbG9yOiBDb2xvciwgZTE6IEV2YWwsIGUyOiBFdmFsKSB7XG4gIHJldHVybiAocG92Q2hhbmNlcyhjb2xvciwgZTEpIC0gcG92Q2hhbmNlcyhjb2xvciwgZTIpKSAvIDI7XG59XG4iLCJpbXBvcnQgeyBDdHJsLCBDaGF0T3B0cywgTGluZSwgVGFiLCBWaWV3TW9kZWwsIFJlZHJhdywgUGVybWlzc2lvbnMsIE1vZGVyYXRpb25DdHJsIH0gZnJvbSAnLi9pbnRlcmZhY2VzJ1xuaW1wb3J0IHsgcHJlc2V0Q3RybCB9IGZyb20gJy4vcHJlc2V0J1xuaW1wb3J0IHsgbm90ZUN0cmwgfSBmcm9tICcuL25vdGUnXG5pbXBvcnQgeyBtb2RlcmF0aW9uQ3RybCB9IGZyb20gJy4vbW9kZXJhdGlvbidcbmltcG9ydCB7IHByb3AgfSBmcm9tICdjb21tb24nO1xuXG5jb25zdCBsaSA9IHdpbmRvdy5saWNoZXNzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHRzOiBDaGF0T3B0cywgcmVkcmF3OiBSZWRyYXcpOiBDdHJsIHtcblxuICBjb25zdCBkYXRhID0gb3B0cy5kYXRhO1xuICBkYXRhLmRvbVZlcnNpb24gPSAxOyAvLyBpbmNyZW1lbnQgdG8gZm9yY2UgcmVkcmF3XG4gIGNvbnN0IG1heExpbmVzID0gMjAwO1xuICBjb25zdCBtYXhMaW5lc0Ryb3AgPSA1MDsgLy8gaG93IG1hbnkgbGluZXMgdG8gZHJvcCBhdCBvbmNlXG5cbiAgY29uc3QgcGFsYW50aXIgPSB7XG4gICAgaW5zdGFuY2U6IHVuZGVmaW5lZCxcbiAgICBsb2FkZWQ6IGZhbHNlLFxuICAgIGVuYWJsZWQ6IHByb3AoISFkYXRhLnBhbGFudGlyKVxuICB9O1xuXG4gIGNvbnN0IGFsbFRhYnM6IFRhYltdID0gWydkaXNjdXNzaW9uJ107XG4gIGlmIChvcHRzLm5vdGVJZCkgYWxsVGFicy5wdXNoKCdub3RlJyk7XG4gIGlmIChvcHRzLnBsdWdpbikgYWxsVGFicy5wdXNoKG9wdHMucGx1Z2luLnRhYi5rZXkpO1xuXG4gIGNvbnN0IHRhYlN0b3JhZ2UgPSBsaS5zdG9yYWdlLm1ha2UoJ2NoYXQudGFiJyksXG4gICAgc3RvcmVkVGFiID0gdGFiU3RvcmFnZS5nZXQoKTtcblxuICBsZXQgbW9kZXJhdGlvbjogTW9kZXJhdGlvbkN0cmwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3Qgdm06IFZpZXdNb2RlbCA9IHtcbiAgICB0YWI6IGFsbFRhYnMuZmluZCh0YWIgPT4gdGFiID09PSBzdG9yZWRUYWIpIHx8IGFsbFRhYnNbMF0sXG4gICAgZW5hYmxlZDogb3B0cy5hbHdheXNFbmFibGVkIHx8ICFsaS5zdG9yYWdlLmdldCgnbm9jaGF0JyksXG4gICAgcGxhY2Vob2xkZXJLZXk6ICd0YWxrSW5DaGF0JyxcbiAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICB0aW1lb3V0OiBvcHRzLnRpbWVvdXQsXG4gICAgd3JpdGVhYmxlOiBvcHRzLndyaXRlYWJsZVxuICB9O1xuXG4gIC8qIElmIGRpc2N1c3Npb24gaXMgZGlzYWJsZWQsIGFuZCB3ZSBoYXZlIGFub3RoZXIgY2hhdCB0YWIsXG4gICAqIHRoZW4gc2VsZWN0IHRoYXQgdGFiIG92ZXIgZGlzY3Vzc2lvbiAqL1xuICBpZiAoYWxsVGFicy5sZW5ndGggPiAxICYmIHZtLnRhYiA9PT0gJ2Rpc2N1c3Npb24nICYmIGxpLnN0b3JhZ2UuZ2V0KCdub2NoYXQnKSkgdm0udGFiID0gYWxsVGFic1sxXTtcblxuICBjb25zdCBwb3N0ID0gZnVuY3Rpb24odGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGV4dCA9IHRleHQudHJpbSgpO1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDE0MCkge1xuICAgICAgYWxlcnQoJ01heCBsZW5ndGg6IDE0MCBjaGFycy4gJyArIHRleHQubGVuZ3RoICsgJyBjaGFycyB1c2VkLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsaS5wdWJzdWIuZW1pdCgnc29ja2V0LnNlbmQnLCAndGFsaycsIHRleHQpO1xuICB9O1xuXG4gIGNvbnN0IG9uVGltZW91dCA9IGZ1bmN0aW9uKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgZGF0YS5saW5lcy5mb3JFYWNoKGwgPT4ge1xuICAgICAgaWYgKGwudSAmJiBsLnUudG9Mb3dlckNhc2UoKSA9PSB1c2VySWQpIGwuZCA9IHRydWU7XG4gICAgfSk7XG4gICAgaWYgKHVzZXJJZCA9PSBkYXRhLnVzZXJJZCkgdm0udGltZW91dCA9IHRydWU7XG4gICAgZGF0YS5kb21WZXJzaW9uKys7XG4gICAgcmVkcmF3KCk7XG4gIH07XG5cbiAgY29uc3Qgb25SZWluc3RhdGUgPSBmdW5jdGlvbih1c2VySWQ6IHN0cmluZykge1xuICAgIGlmICh1c2VySWQgPT0gZGF0YS51c2VySWQpIHtcbiAgICAgIHZtLnRpbWVvdXQgPSBmYWxzZTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbk1lc3NhZ2UgPSBmdW5jdGlvbihsaW5lOiBMaW5lKSB7XG4gICAgZGF0YS5saW5lcy5wdXNoKGxpbmUpO1xuICAgIGNvbnN0IG5iID0gZGF0YS5saW5lcy5sZW5ndGg7XG4gICAgaWYgKG5iID4gbWF4TGluZXMpIHtcbiAgICAgIGRhdGEubGluZXMuc3BsaWNlKDAsIG5iIC0gbWF4TGluZXMgKyBtYXhMaW5lc0Ryb3ApO1xuICAgICAgZGF0YS5kb21WZXJzaW9uKys7XG4gICAgfVxuICAgIHJlZHJhdygpO1xuICB9O1xuXG4gIGNvbnN0IG9uV3JpdGVhYmxlID0gZnVuY3Rpb24odjogYm9vbGVhbikge1xuICAgIHZtLndyaXRlYWJsZSA9IHY7XG4gICAgcmVkcmF3KCk7XG4gIH1cblxuICBjb25zdCBvblBlcm1pc3Npb25zID0gZnVuY3Rpb24ob2JqOiBQZXJtaXNzaW9ucykge1xuICAgIGxldCBwOiBrZXlvZiBQZXJtaXNzaW9ucztcbiAgICBmb3IgKHAgaW4gb2JqKSBvcHRzLnBlcm1pc3Npb25zW3BdID0gb2JqW3BdO1xuICAgIGluc3RhbmNpYXRlTW9kZXJhdGlvbigpO1xuICAgIHJlZHJhdygpO1xuICB9XG5cbiAgY29uc3QgdHJhbnMgPSBsaS50cmFucyhvcHRzLmkxOG4pO1xuXG4gIGZ1bmN0aW9uIGNhbk1vZCgpIHtcbiAgICByZXR1cm4gb3B0cy5wZXJtaXNzaW9ucy50aW1lb3V0IHx8IG9wdHMucGVybWlzc2lvbnMubG9jYWw7XG4gIH1cblxuICBmdW5jdGlvbiBpbnN0YW5jaWF0ZU1vZGVyYXRpb24oKSB7XG4gICAgbW9kZXJhdGlvbiA9IGNhbk1vZCgpID8gbW9kZXJhdGlvbkN0cmwoe1xuICAgICAgcmVhc29uczogb3B0cy50aW1lb3V0UmVhc29ucyB8fCAoW3trZXk6ICdvdGhlcicsIG5hbWU6ICdJbmFwcHJvcHJpYXRlIGJlaGF2aW9yJ31dKSxcbiAgICAgIHBlcm1pc3Npb25zOiBvcHRzLnBlcm1pc3Npb25zLFxuICAgICAgcmVkcmF3XG4gICAgfSkgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGNhbk1vZCgpKSBvcHRzLmxvYWRDc3MoJ2NoYXQubW9kJyk7XG4gIH1cbiAgaW5zdGFuY2lhdGVNb2RlcmF0aW9uKCk7XG5cbiAgY29uc3Qgbm90ZSA9IG9wdHMubm90ZUlkID8gbm90ZUN0cmwoe1xuICAgIGlkOiBvcHRzLm5vdGVJZCxcbiAgICB0cmFucyxcbiAgICByZWRyYXdcbiAgfSkgOiB1bmRlZmluZWQ7XG5cbiAgY29uc3QgcHJlc2V0ID0gcHJlc2V0Q3RybCh7XG4gICAgaW5pdGlhbEdyb3VwOiBvcHRzLnByZXNldCxcbiAgICBwb3N0LFxuICAgIHJlZHJhd1xuICB9KTtcblxuICBjb25zdCBzdWJzOiBbc3RyaW5nLCBQdWJzdWJDYWxsYmFja11bXSAgPSBbXG4gICAgWydzb2NrZXQuaW4ubWVzc2FnZScsIG9uTWVzc2FnZV0sXG4gICAgWydzb2NrZXQuaW4uY2hhdF90aW1lb3V0Jywgb25UaW1lb3V0XSxcbiAgICBbJ3NvY2tldC5pbi5jaGF0X3JlaW5zdGF0ZScsIG9uUmVpbnN0YXRlXSxcbiAgICBbJ2NoYXQud3JpdGVhYmxlJywgb25Xcml0ZWFibGVdLFxuICAgIFsnY2hhdC5wZXJtaXNzaW9ucycsIG9uUGVybWlzc2lvbnNdLFxuICAgIFsncGFsYW50aXIudG9nZ2xlJywgcGFsYW50aXIuZW5hYmxlZF1cbiAgXTtcbiAgc3Vicy5mb3JFYWNoKChbZXZlbnROYW1lLCBjYWxsYmFja10pID0+IGxpLnB1YnN1Yi5vbihldmVudE5hbWUsIGNhbGxiYWNrKSk7XG5cbiAgY29uc3QgZGVzdHJveSA9ICgpID0+IHtcbiAgICBzdWJzLmZvckVhY2goKFtldmVudE5hbWUsIGNhbGxiYWNrXSkgPT4gbGkucHVic3ViLm9mZihldmVudE5hbWUsIGNhbGxiYWNrKSk7XG4gIH07XG5cbiAgY29uc3QgZW1pdEVuYWJsZWQgPSAoKSA9PiBsaS5wdWJzdWIuZW1pdCgnY2hhdC5lbmFibGVkJywgdm0uZW5hYmxlZCk7XG4gIGVtaXRFbmFibGVkKCk7XG5cbiAgcmV0dXJuIHtcbiAgICBkYXRhLFxuICAgIG9wdHMsXG4gICAgdm0sXG4gICAgYWxsVGFicyxcbiAgICBzZXRUYWIodDogVGFiKSB7XG4gICAgICB2bS50YWIgPSB0O1xuICAgICAgdGFiU3RvcmFnZS5zZXQodCk7XG4gICAgICAvLyBJdCdzIGEgbGFtZSB3YXkgdG8gZG8gaXQuIEdpdmUgbWUgYSBicmVhay5cbiAgICAgIGlmICh0ID09PSAnZGlzY3Vzc2lvbicpIGxpLnJlcXVlc3RJZGxlQ2FsbGJhY2soKCkgPT4gJCgnLm1jaGF0X19zYXknKS5mb2N1cygpKTtcbiAgICAgIHJlZHJhdygpO1xuICAgIH0sXG4gICAgbW9kZXJhdGlvbjogKCkgPT4gbW9kZXJhdGlvbixcbiAgICBub3RlLFxuICAgIHByZXNldCxcbiAgICBwb3N0LFxuICAgIHRyYW5zLFxuICAgIHBsdWdpbjogb3B0cy5wbHVnaW4sXG4gICAgc2V0RW5hYmxlZCh2OiBib29sZWFuKSB7XG4gICAgICB2bS5lbmFibGVkID0gdjtcbiAgICAgIGVtaXRFbmFibGVkKCk7XG4gICAgICBpZiAoIXYpIGxpLnN0b3JhZ2Uuc2V0KCdub2NoYXQnLCAnMScpO1xuICAgICAgZWxzZSBsaS5zdG9yYWdlLnJlbW92ZSgnbm9jaGF0Jyk7XG4gICAgICByZWRyYXcoKTtcbiAgICB9LFxuICAgIHJlZHJhdyxcbiAgICBwYWxhbnRpcixcbiAgICBkZXN0cm95XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgaCwgdGh1bmsgfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlLCBWTm9kZURhdGEgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IEN0cmwsIExpbmUgfSBmcm9tICcuL2ludGVyZmFjZXMnXG5pbXBvcnQgKiBhcyBzcGFtIGZyb20gJy4vc3BhbSdcbmltcG9ydCAqIGFzIGVuaGFuY2UgZnJvbSAnLi9lbmhhbmNlJztcbmltcG9ydCB7IHByZXNldFZpZXcgfSBmcm9tICcuL3ByZXNldCc7XG5pbXBvcnQgeyBsaW5lQWN0aW9uIGFzIG1vZExpbmVBY3Rpb24gfSBmcm9tICcuL21vZGVyYXRpb24nO1xuaW1wb3J0IHsgdXNlckxpbmsgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgZmxhZyB9IGZyb20gJy4veGhyJ1xuXG5jb25zdCB3aGlzcGVyUmVnZXggPSAvXlxcL3coPzpoaXNwZXIpP1xccy87XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGN0cmw6IEN0cmwpOiBBcnJheTxWTm9kZSB8IHVuZGVmaW5lZD4ge1xuICBpZiAoIWN0cmwudm0uZW5hYmxlZCkgcmV0dXJuIFtdO1xuICBjb25zdCBzY3JvbGxDYiA9ICh2bm9kZTogVk5vZGUpID0+IHtcbiAgICBjb25zdCBlbCA9IHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudFxuICAgIGlmIChjdHJsLmRhdGEubGluZXMubGVuZ3RoID4gNSkge1xuICAgICAgY29uc3QgYXV0b1Njcm9sbCA9IChlbC5zY3JvbGxUb3AgPT09IDAgfHwgKGVsLnNjcm9sbFRvcCA+IChlbC5zY3JvbGxIZWlnaHQgLSBlbC5jbGllbnRIZWlnaHQgLSAxMDApKSk7XG4gICAgICBpZiAoYXV0b1Njcm9sbCkge1xuICAgICAgICBlbC5zY3JvbGxUb3AgPSA5OTk5OTk7XG4gICAgICAgIHNldFRpbWVvdXQoKF86IGFueSkgPT4gZWwuc2Nyb2xsVG9wID0gOTk5OTk5LCAzMDApXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBtb2QgPSBjdHJsLm1vZGVyYXRpb24oKTtcbiAgY29uc3Qgdm5vZGVzID0gW1xuICAgIGgoJ29sLm1jaGF0X19tZXNzYWdlcy5jaGF0LXYtJyArIGN0cmwuZGF0YS5kb21WZXJzaW9uLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICByb2xlOiAnbG9nJyxcbiAgICAgICAgJ2FyaWEtbGl2ZSc6ICdwb2xpdGUnLFxuICAgICAgICAnYXJpYS1hdG9taWMnOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGhvb2s6IHtcbiAgICAgICAgaW5zZXJ0KHZub2RlKSB7XG4gICAgICAgICAgY29uc3QgJGVsID0gJCh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQpLm9uKCdjbGljaycsICdhLmp1bXAnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5saWNoZXNzLnB1YnN1Yi5lbWl0KCdqdW1wJywgKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGx5JykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChtb2QpICRlbC5vbignY2xpY2snLCAnLm1vZCcsIChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgbW9kLm9wZW4oKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXJuYW1lJykgYXMgc3RyaW5nKS5zcGxpdCgnICcpWzBdKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBlbHNlICRlbC5vbignY2xpY2snLCAnLmZsYWcnLCAoZTogRXZlbnQpID0+XG4gICAgICAgICAgICByZXBvcnQoY3RybCwgKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50KVxuICAgICAgICAgICk7XG4gICAgICAgICAgc2Nyb2xsQ2Iodm5vZGUpO1xuICAgICAgICB9LFxuICAgICAgICBwb3N0cGF0Y2g6IChfLCB2bm9kZSkgPT4gc2Nyb2xsQ2Iodm5vZGUpXG4gICAgICB9XG4gICAgfSwgc2VsZWN0TGluZXMoY3RybCkubWFwKGxpbmUgPT4gcmVuZGVyTGluZShjdHJsLCBsaW5lKSkpLFxuICAgIHJlbmRlcklucHV0KGN0cmwpXG4gIF07XG4gIGNvbnN0IHByZXNldHMgPSBwcmVzZXRWaWV3KGN0cmwucHJlc2V0KTtcbiAgaWYgKHByZXNldHMpIHZub2Rlcy5wdXNoKHByZXNldHMpXG4gIHJldHVybiB2bm9kZXM7XG59XG5cbmZ1bmN0aW9uIHJlbmRlcklucHV0KGN0cmw6IEN0cmwpOiBWTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGlmICghY3RybC52bS53cml0ZWFibGUpIHJldHVybjtcbiAgaWYgKChjdHJsLmRhdGEubG9naW5SZXF1aXJlZCAmJiAhY3RybC5kYXRhLnVzZXJJZCkgfHwgY3RybC5kYXRhLnJlc3RyaWN0ZWQpXG4gICAgcmV0dXJuIGgoJ2lucHV0Lm1jaGF0X19zYXknLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBwbGFjZWhvbGRlcjogY3RybC50cmFucygnbG9naW5Ub0NoYXQnKSxcbiAgICAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgbGV0IHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gIGlmIChjdHJsLnZtLnRpbWVvdXQpIHBsYWNlaG9sZGVyID0gY3RybC50cmFucygneW91SGF2ZUJlZW5UaW1lZE91dCcpO1xuICBlbHNlIGlmIChjdHJsLm9wdHMuYmxpbmQpIHBsYWNlaG9sZGVyID0gJ0NoYXQnO1xuICBlbHNlIHBsYWNlaG9sZGVyID0gY3RybC50cmFucy5ub2FyZyhjdHJsLnZtLnBsYWNlaG9sZGVyS2V5KTtcbiAgcmV0dXJuIGgoJ2lucHV0Lm1jaGF0X19zYXknLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgYXV0b2NvbXBsZXRlOiAnb2ZmJyxcbiAgICAgIG1heGxlbmd0aDogMTQwLFxuICAgICAgZGlzYWJsZWQ6IGN0cmwudm0udGltZW91dCB8fCAhY3RybC52bS53cml0ZWFibGVcbiAgICB9LFxuICAgIGhvb2s6IHtcbiAgICAgIGluc2VydCh2bm9kZSkge1xuICAgICAgICBzZXR1cEhvb2tzKGN0cmwsIHZub2RlLmVsbSBhcyBIVE1MRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxubGV0IG1vdWNoTGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI7XG5cbmNvbnN0IHNldHVwSG9va3MgPSAoY3RybDogQ3RybCwgY2hhdEVsOiBIVE1MRWxlbWVudCkgPT4ge1xuICBjaGF0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLFxuICAgIChlOiBLZXlib2FyZEV2ZW50KSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IGVsID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgdHh0ID0gZWwudmFsdWUsXG4gICAgICAgIHB1YiA9IGN0cmwub3B0cy5wdWJsaWM7XG4gICAgICBpZiAoZS53aGljaCA9PSAxMCB8fCBlLndoaWNoID09IDEzKSB7XG4gICAgICAgIGlmICh0eHQgPT09ICcnKSAkKCcua2V5Ym9hcmQtbW92ZSBpbnB1dCcpLmZvY3VzKCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwYW0ucmVwb3J0KHR4dCk7XG4gICAgICAgICAgaWYgKHB1YiAmJiBzcGFtLmhhc1RlYW1VcmwodHh0KSkgYWxlcnQoXCJQbGVhc2UgZG9uJ3QgYWR2ZXJ0aXNlIHRlYW1zIGluIHRoZSBjaGF0LlwiKTtcbiAgICAgICAgICBlbHNlIGN0cmwucG9zdCh0eHQpO1xuICAgICAgICAgIGVsLnZhbHVlID0gJyc7XG4gICAgICAgICAgaWYgKCFwdWIpIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3doaXNwZXInKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgaWYgKCFwdWIpIGVsLmNsYXNzTGlzdC50b2dnbGUoJ3doaXNwZXInLCAhIXR4dC5tYXRjaCh3aGlzcGVyUmVnZXgpKTtcbiAgICAgIH1cbiAgICB9KVxuICApO1xuXG4gIHdpbmRvdy5Nb3VzZXRyYXAuYmluZCgnYycsICgpID0+IHtcbiAgICBjaGF0RWwuZm9jdXMoKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG4gIHdpbmRvdy5Nb3VzZXRyYXAoY2hhdEVsKS5iaW5kKCdlc2MnLCAoKSA9PiBjaGF0RWwuYmx1cigpKTtcblxuXG4gIC8vIEVuc3VyZSBjbGlja3MgcmVtb3ZlIGNoYXQgZm9jdXMuXG4gIC8vIFNlZSBvcm5pY2FyL2NoZXNzZ3JvdW5kIzEwOVxuXG4gIGNvbnN0IG1vdWNoRXZlbnRzID0gWyd0b3VjaHN0YXJ0JywgJ21vdXNlZG93biddO1xuXG4gIGlmIChtb3VjaExpc3RlbmVyKSBtb3VjaEV2ZW50cy5mb3JFYWNoKGV2ZW50ID0+XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBtb3VjaExpc3RlbmVyLCB7Y2FwdHVyZTogdHJ1ZX0pXG4gICk7XG5cbiAgbW91Y2hMaXN0ZW5lciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgaWYgKCFlLnNoaWZ0S2V5ICYmIGUuYnV0dG9ucyAhPT0gMiAmJiBlLmJ1dHRvbiAhPT0gMikgY2hhdEVsLmJsdXIoKTtcbiAgfTtcblxuICBjaGF0RWwub25mb2N1cyA9ICgpID0+XG4gICAgbW91Y2hFdmVudHMuZm9yRWFjaChldmVudCA9PlxuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBtb3VjaExpc3RlbmVyLFxuICAgICAgICB7cGFzc2l2ZTogdHJ1ZSwgY2FwdHVyZTogdHJ1ZX1cbiAgICAgICkpO1xuXG4gIGNoYXRFbC5vbmJsdXIgPSAoKSA9PlxuICAgIG1vdWNoRXZlbnRzLmZvckVhY2goZXZlbnQgPT5cbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbW91Y2hMaXN0ZW5lciwge2NhcHR1cmU6IHRydWV9KVxuICAgICk7XG59O1xuXG5mdW5jdGlvbiBzYW1lTGluZXMobDE6IExpbmUsIGwyOiBMaW5lKSB7XG4gIHJldHVybiBsMS5kICYmIGwyLmQgJiYgbDEudSA9PT0gbDIudTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0TGluZXMoY3RybDogQ3RybCk6IEFycmF5PExpbmU+IHtcbiAgbGV0IHByZXY6IExpbmUsIGxzOiBBcnJheTxMaW5lPiA9IFtdO1xuICBjdHJsLmRhdGEubGluZXMuZm9yRWFjaChsaW5lID0+IHtcbiAgICBpZiAoIWxpbmUuZCAmJlxuICAgICAgKCFwcmV2IHx8ICFzYW1lTGluZXMocHJldiwgbGluZSkpICYmXG4gICAgICAoIWxpbmUuciB8fCAobGluZS51IHx8ICcnKS50b0xvd2VyQ2FzZSgpID09IGN0cmwuZGF0YS51c2VySWQpICYmXG4gICAgICAhc3BhbS5za2lwKGxpbmUudClcbiAgICApIGxzLnB1c2gobGluZSk7XG4gICAgcHJldiA9IGxpbmU7XG4gIH0pO1xuICByZXR1cm4gbHM7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRleHQocGFyc2VNb3ZlczogYm9vbGVhbikge1xuICByZXR1cm4gKG9sZFZub2RlOiBWTm9kZSwgdm5vZGU6IFZOb2RlKSA9PiB7XG4gICAgaWYgKCh2bm9kZS5kYXRhIGFzIFZOb2RlRGF0YSkubGljaGVzc0NoYXQgIT09IChvbGRWbm9kZS5kYXRhIGFzIFZOb2RlRGF0YSkubGljaGVzc0NoYXQpIHtcbiAgICAgICh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQpLmlubmVySFRNTCA9IGVuaGFuY2UuZW5oYW5jZSgodm5vZGUuZGF0YSBhcyBWTm9kZURhdGEpLmxpY2hlc3NDaGF0LCBwYXJzZU1vdmVzKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRleHQodDogc3RyaW5nLCBwYXJzZU1vdmVzOiBib29sZWFuKSB7XG4gIGlmIChlbmhhbmNlLmlzTW9yZVRoYW5UZXh0KHQpKSB7XG4gICAgY29uc3QgaG9vayA9IHVwZGF0ZVRleHQocGFyc2VNb3Zlcyk7XG4gICAgcmV0dXJuIGgoJ3QnLCB7XG4gICAgICBsaWNoZXNzQ2hhdDogdCxcbiAgICAgIGhvb2s6IHtcbiAgICAgICAgY3JlYXRlOiBob29rLFxuICAgICAgICB1cGRhdGU6IGhvb2tcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gaCgndCcsIHQpO1xufVxuXG5mdW5jdGlvbiByZXBvcnQoY3RybDogQ3RybCwgbGluZTogSFRNTEVsZW1lbnQpIHtcbiAgY29uc3QgdXNlckEgPSBsaW5lLnF1ZXJ5U2VsZWN0b3IoJ2EudXNlci1saW5rJykgYXMgSFRNTExpbmtFbGVtZW50O1xuICBjb25zdCB0ZXh0ID0gKGxpbmUucXVlcnlTZWxlY3RvcigndCcpIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQ7XG4gIGlmICh1c2VyQSAmJiBjb25maXJtKGBSZXBvcnQgXCIke3RleHR9XCIgdG8gbW9kZXJhdG9ycz9gKSkgZmxhZyhcbiAgICBjdHJsLmRhdGEucmVzb3VyY2VJZCxcbiAgICB1c2VyQS5ocmVmLnNwbGl0KCcvJylbNF0sXG4gICAgdGV4dFxuICApO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMaW5lKGN0cmw6IEN0cmwsIGxpbmU6IExpbmUpIHtcblxuICBjb25zdCB0ZXh0Tm9kZSA9IHJlbmRlclRleHQobGluZS50LCBjdHJsLm9wdHMucGFyc2VNb3Zlcyk7XG5cbiAgaWYgKGxpbmUudSA9PT0gJ2xpY2hlc3MnKSByZXR1cm4gaCgnbGkuc3lzdGVtJywgdGV4dE5vZGUpO1xuXG4gIGlmIChsaW5lLmMpIHJldHVybiBoKCdsaScsIFtcbiAgICBoKCdzcGFuLmNvbG9yJywgJ1snICsgbGluZS5jICsgJ10nKSxcbiAgICB0ZXh0Tm9kZVxuICBdKTtcblxuICBjb25zdCB1c2VyTm9kZSA9IHRodW5rKCdhJywgbGluZS51LCB1c2VyTGluaywgW2xpbmUudSwgbGluZS50aXRsZV0pO1xuXG4gIHJldHVybiBoKCdsaScsIHtcbiAgfSwgY3RybC5tb2RlcmF0aW9uKCkgPyBbXG4gICAgbGluZS51ID8gbW9kTGluZUFjdGlvbihsaW5lLnUpIDogbnVsbCxcbiAgICB1c2VyTm9kZSxcbiAgICB0ZXh0Tm9kZVxuICBdIDogW1xuICAgIGN0cmwuZGF0YS51c2VySWQgJiYgbGluZS51ICYmIGN0cmwuZGF0YS51c2VySWQgIT0gbGluZS51ID8gaCgnaS5mbGFnJywge1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgJ2RhdGEtaWNvbic6ICchJyxcbiAgICAgICAgdGl0bGU6ICdSZXBvcnQnXG4gICAgICB9XG4gICAgfSkgOiBudWxsLFxuICAgIHVzZXJOb2RlLFxuICAgIHRleHROb2RlXG4gIF0pO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGVuaGFuY2UodGV4dDogc3RyaW5nLCBwYXJzZU1vdmVzOiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3QgZXNjYXBlZCA9IHdpbmRvdy5saWNoZXNzLmVzY2FwZUh0bWwodGV4dCk7XG4gIGNvbnN0IGxpbmtlZCA9IGF1dG9MaW5rKGVzY2FwZWQpO1xuICBjb25zdCBwbGllZCA9IHBhcnNlTW92ZXMgJiYgbGlua2VkID09PSBlc2NhcGVkID8gYWRkUGxpZXMobGlua2VkKSA6IGxpbmtlZDtcbiAgcmV0dXJuIHBsaWVkO1xufVxuXG5jb25zdCBtb3JlVGhhblRleHRQYXR0ZXJuID0gL1smPD5cIkBdLztcbmNvbnN0IHBvc3NpYmxlTGlua1BhdHRlcm4gPSAvXFwuXFx3LztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9yZVRoYW5UZXh0KHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBtb3JlVGhhblRleHRQYXR0ZXJuLnRlc3Qoc3RyKSB8fCBwb3NzaWJsZUxpbmtQYXR0ZXJuLnRlc3Qoc3RyKTtcbn1cblxuY29uc3QgbGlua1BhdHRlcm4gPSAvXFxiKGh0dHBzPzpcXC9cXC98bGljaGVzc1xcLm9yZ1xcLylbLeKAk+KAlFxcdysmJ0AjXFwvJT89KCl+fCE6LC47XStbXFx3KyZAI1xcLyU9fnxdL2dpO1xuXG5mdW5jdGlvbiBsaW5rUmVwbGFjZSh1cmw6IHN0cmluZywgc2NoZW1lOiBzdHJpbmcpIHtcbiAgaWYgKHVybC5pbmNsdWRlcygnJnF1b3Q7JykpIHJldHVybiB1cmw7XG4gIGNvbnN0IGZ1bGxVcmwgPSBzY2hlbWUgPT09ICdsaWNoZXNzLm9yZy8nID8gJ2h0dHBzOi8vJyArIHVybCA6IHVybDtcbiAgY29uc3QgbWluVXJsID0gdXJsLnJlcGxhY2UoL15odHRwczpcXC9cXC8vLCAnJyk7XG4gIHJldHVybiAnPGEgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9mb2xsb3dcIiBocmVmPVwiJyArIGZ1bGxVcmwgKyAnXCI+JyArIG1pblVybCArICc8L2E+Jztcbn1cblxuY29uc3QgdXNlclBhdHRlcm4gPSAvKF58W15cXHdAIy9dKUAoW1xcdy1dezIsfSkvZztcbmNvbnN0IHBhd25Ecm9wUGF0dGVybiA9IC9eW2EtaF1bMi03XSQvO1xuXG5mdW5jdGlvbiB1c2VyTGlua1JlcGxhY2Uob3JpZzogc3RyaW5nLCBwcmVmaXg6IFN0cmluZywgdXNlcjogc3RyaW5nKSB7XG4gIGlmICh1c2VyLmxlbmd0aCA+IDIwIHx8IHVzZXIubWF0Y2gocGF3bkRyb3BQYXR0ZXJuKSkgcmV0dXJuIG9yaWc7XG4gIHJldHVybiBwcmVmaXggKyAnPGEgaHJlZj1cIi9ALycgKyB1c2VyICsgJ1wiPkAnICsgdXNlciArIFwiPC9hPlwiO1xufVxuXG5mdW5jdGlvbiBhdXRvTGluayhodG1sOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGh0bWwucmVwbGFjZSh1c2VyUGF0dGVybiwgdXNlckxpbmtSZXBsYWNlKS5yZXBsYWNlKGxpbmtQYXR0ZXJuLCBsaW5rUmVwbGFjZSk7XG59XG5cbmNvbnN0IG1vdmVQYXR0ZXJuID0gL1xcYihcXGQrKVxccyooXFwuKylcXHMqKD86W28wLV0rW28wXXxbTkJSUUtQXT9bYS1oXT9bMS04XT9beEBdP1thLXpdWzEtOF0oPzo9W05CUlFLXSk/KVxcKz9cXCM/WyFcXD89XXswLDV9L2dpO1xuZnVuY3Rpb24gbW92ZVJlcGxhY2VyKG1hdGNoOiBzdHJpbmcsIHR1cm46IG51bWJlciwgZG90czogc3RyaW5nKSB7XG4gIGlmICh0dXJuIDwgMSB8fCB0dXJuID4gMjAwKSByZXR1cm4gbWF0Y2g7XG4gIGNvbnN0IHBseSA9IHR1cm4gKiAyIC0gKGRvdHMubGVuZ3RoID4gMSA/IDAgOiAxKTtcbiAgcmV0dXJuICc8YSBjbGFzcz1cImp1bXBcIiBkYXRhLXBseT1cIicgKyBwbHkgKyAnXCI+JyArIG1hdGNoICsgJzwvYT4nO1xufVxuXG5mdW5jdGlvbiBhZGRQbGllcyhodG1sOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGh0bWwucmVwbGFjZShtb3ZlUGF0dGVybiwgbW92ZVJlcGxhY2VyKTtcbn1cbiIsImltcG9ydCB7IGluaXQgfSBmcm9tICdzbmFiYmRvbSc7XG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuXG5pbXBvcnQgbWFrZUN0cmwgZnJvbSAnLi9jdHJsJztcbmltcG9ydCB2aWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBDaGF0T3B0cywgQ3RybCB9IGZyb20gJy4vaW50ZXJmYWNlcydcbmltcG9ydCB7IFByZXNldEN0cmwgfSBmcm9tICcuL3ByZXNldCdcblxuaW1wb3J0IGtsYXNzIGZyb20gJ3NuYWJiZG9tL21vZHVsZXMvY2xhc3MnO1xuaW1wb3J0IGF0dHJpYnV0ZXMgZnJvbSAnc25hYmJkb20vbW9kdWxlcy9hdHRyaWJ1dGVzJztcblxuZXhwb3J0IHsgQ3RybCBhcyBDaGF0Q3RybCwgQ2hhdFBsdWdpbiB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExpY2hlc3NDaGF0KGVsZW1lbnQ6IEVsZW1lbnQsIG9wdHM6IENoYXRPcHRzKToge1xuICBwcmVzZXQ6IFByZXNldEN0cmxcbn0ge1xuICBjb25zdCBwYXRjaCA9IGluaXQoW2tsYXNzLCBhdHRyaWJ1dGVzXSk7XG5cbiAgbGV0IHZub2RlOiBWTm9kZSwgY3RybDogQ3RybFxuXG4gIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICB2bm9kZSA9IHBhdGNoKHZub2RlLCB2aWV3KGN0cmwpKTtcbiAgfVxuXG4gIGN0cmwgPSBtYWtlQ3RybChvcHRzLCByZWRyYXcpO1xuXG4gIGNvbnN0IGJsdWVwcmludCA9IHZpZXcoY3RybCk7XG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gIHZub2RlID0gcGF0Y2goZWxlbWVudCwgYmx1ZXByaW50KTtcblxuICByZXR1cm4gY3RybDtcbn07XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgTW9kZXJhdGlvbkN0cmwsIE1vZGVyYXRpb25PcHRzLCBNb2RlcmF0aW9uRGF0YSwgTW9kZXJhdGlvblJlYXNvbiB9IGZyb20gJy4vaW50ZXJmYWNlcydcbmltcG9ydCB7IHVzZXJNb2RJbmZvIH0gZnJvbSAnLi94aHInXG5pbXBvcnQgeyB1c2VyTGluaywgc3Bpbm5lciwgYmluZCB9IGZyb20gJy4vdXRpbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtb2RlcmF0aW9uQ3RybChvcHRzOiBNb2RlcmF0aW9uT3B0cyk6IE1vZGVyYXRpb25DdHJsIHtcblxuICBsZXQgZGF0YTogTW9kZXJhdGlvbkRhdGEgfCB1bmRlZmluZWQ7XG4gIGxldCBsb2FkaW5nID0gZmFsc2U7XG5cbiAgY29uc3Qgb3BlbiA9ICh1c2VybmFtZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKG9wdHMucGVybWlzc2lvbnMudGltZW91dCkge1xuICAgICAgbG9hZGluZyA9IHRydWU7XG4gICAgICB1c2VyTW9kSW5mbyh1c2VybmFtZSkudGhlbihkID0+IHtcbiAgICAgICAgZGF0YSA9IGQ7XG4gICAgICAgIGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgb3B0cy5yZWRyYXcoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICBpZDogdXNlcm5hbWUsXG4gICAgICAgIHVzZXJuYW1lXG4gICAgICB9O1xuICAgIH1cbiAgICBvcHRzLnJlZHJhdygpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgbG9hZGluZyA9IGZhbHNlO1xuICAgIG9wdHMucmVkcmF3KCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkaW5nOiAoKSA9PiBsb2FkaW5nLFxuICAgIGRhdGE6ICgpID0+IGRhdGEsXG4gICAgcmVhc29uczogb3B0cy5yZWFzb25zLFxuICAgIHBlcm1pc3Npb25zOiAoKSA9PiBvcHRzLnBlcm1pc3Npb25zLFxuICAgIG9wZW4sXG4gICAgY2xvc2UsXG4gICAgdGltZW91dChyZWFzb246IE1vZGVyYXRpb25SZWFzb24pIHtcbiAgICAgIGRhdGEgJiYgd2luZG93LmxpY2hlc3MucHVic3ViLmVtaXQoJ3NvY2tldC5zZW5kJywgJ3RpbWVvdXQnLCB7XG4gICAgICAgIHVzZXJJZDogZGF0YS5pZCxcbiAgICAgICAgcmVhc29uOiByZWFzb24ua2V5XG4gICAgICB9KTtcbiAgICAgIGNsb3NlKCk7XG4gICAgICBvcHRzLnJlZHJhdygpO1xuICAgIH0sXG4gICAgc2hhZG93YmFuKCkge1xuICAgICAgbG9hZGluZyA9IHRydWU7XG4gICAgICBkYXRhICYmICQucG9zdCgnL21vZC8nICsgZGF0YS5pZCArICcvdHJvbGwvdHJ1ZScpLnRoZW4oKCkgPT4gZGF0YSAmJiBvcGVuKGRhdGEudXNlcm5hbWUpKTtcbiAgICAgIG9wdHMucmVkcmF3KCk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGluZUFjdGlvbih1c2VybmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiBoKCdpLm1vZCcsIHtcbiAgICBhdHRyczoge1xuICAgICAgJ2RhdGEtaWNvbic6ICfugIInLFxuICAgICAgJ2RhdGEtdXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgIHRpdGxlOiAnTW9kZXJhdGlvbidcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW9kZXJhdGlvblZpZXcoY3RybD86IE1vZGVyYXRpb25DdHJsKTogVk5vZGVbXSB8IHVuZGVmaW5lZCB7XG4gIGlmICghY3RybCkgcmV0dXJuO1xuICBpZiAoY3RybC5sb2FkaW5nKCkpIHJldHVybiBbaCgnZGl2LmxvYWRpbmcnLCBzcGlubmVyKCkpXTtcbiAgY29uc3QgZGF0YSA9IGN0cmwuZGF0YSgpO1xuICBpZiAoIWRhdGEpIHJldHVybjtcbiAgY29uc3QgcGVybXMgPSBjdHJsLnBlcm1pc3Npb25zKCk7XG5cbiAgY29uc3QgaW5mb3MgPSBkYXRhLmhpc3RvcnkgPyBoKCdkaXYuaW5mb3MuYmxvY2snLCBbXG4gICAgd2luZG93LmxpY2hlc3MubnVtYmVyRm9ybWF0KGRhdGEuZ2FtZXMgfHwgMCkgKyAnIGdhbWVzJyxcbiAgICBkYXRhLnRyb2xsID8gJ1RST0xMJyA6IHVuZGVmaW5lZCxcbiAgICBkYXRhLmVuZ2luZSA/ICdFTkdJTkUnIDogdW5kZWZpbmVkLFxuICAgIGRhdGEuYm9vc3RlciA/ICdCT09TVEVSJyA6IHVuZGVmaW5lZFxuICBdLm1hcCh0ID0+IHQgJiYgaCgnc3BhbicsIHQpKS5jb25jYXQoW1xuICAgIGgoJ2EnLCB7XG4gICAgICBhdHRyczoge1xuICAgICAgICBocmVmOiAnL0AvJyArIGRhdGEudXNlcm5hbWUgKyAnP21vZCdcbiAgICAgIH1cbiAgICB9LCAncHJvZmlsZScpXG4gIF0pLmNvbmNhdChcbiAgICBwZXJtcy5zaGFkb3diYW4gPyBbXG4gICAgICBoKCdhJywge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgIGhyZWY6ICcvbW9kLycgKyBkYXRhLnVzZXJuYW1lICsgJy9jb21tdW5pY2F0aW9uJ1xuICAgICAgICB9XG4gICAgICB9LCAnY29tcycpXG4gICAgXSA6IFtdKSkgOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCB0aW1lb3V0ID0gcGVybXMudGltZW91dCA/IGgoJ2Rpdi50aW1lb3V0LmJsb2NrJywgW1xuICAgICAgaCgnc3Ryb25nJywgJ1RpbWVvdXQgMTAgbWludXRlcyBmb3InKSxcbiAgICAgIC4uLmN0cmwucmVhc29ucy5tYXAociA9PiB7XG4gICAgICAgIHJldHVybiBoKCdhLnRleHQnLCB7XG4gICAgICAgICAgYXR0cnM6IHsgJ2RhdGEtaWNvbic6ICdwJyB9LFxuICAgICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4gY3RybC50aW1lb3V0KHIpKVxuICAgICAgICB9LCByLm5hbWUpO1xuICAgICAgfSksXG4gICAgICAuLi4oXG4gICAgICAgIChkYXRhLnRyb2xsIHx8ICFwZXJtcy5zaGFkb3diYW4pID8gW10gOiBbaCgnZGl2LnNoYWRvd2JhbicsIFtcbiAgICAgICAgICAnT3IgJyxcbiAgICAgICAgICBoKCdidXR0b24uYnV0dG9uLmJ1dHRvbi1yZWQuYnV0dG9uLWVtcHR5Jywge1xuICAgICAgICAgICAgaG9vazogYmluZCgnY2xpY2snLCBjdHJsLnNoYWRvd2JhbilcbiAgICAgICAgICB9LCAnc2hhZG93YmFuJylcbiAgICAgICAgXSldKVxuICAgIF0pIDogaCgnZGl2LnRpbWVvdXQuYmxvY2snLCBbXG4gICAgICBoKCdzdHJvbmcnLCAnTW9kZXJhdGlvbicpLFxuICAgICAgaCgnYS50ZXh0Jywge1xuICAgICAgICBhdHRyczogeyAnZGF0YS1pY29uJzogJ3AnIH0sXG4gICAgICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4gY3RybC50aW1lb3V0KGN0cmwucmVhc29uc1swXSkpXG4gICAgICB9LCAnVGltZW91dCAxMCBtaW51dGVzJylcbiAgICBdKTtcblxuICAgIGNvbnN0IGhpc3RvcnkgPSBkYXRhLmhpc3RvcnkgPyBoKCdkaXYuaGlzdG9yeS5ibG9jaycsIFtcbiAgICAgIGgoJ3N0cm9uZycsICdUaW1lb3V0IGhpc3RvcnknKSxcbiAgICAgIGgoJ3RhYmxlJywgaCgndGJvZHkuc2xpc3QnLCB7XG4gICAgICAgIGhvb2s6IHtcbiAgICAgICAgICBpbnNlcnQ6ICgpID0+IHdpbmRvdy5saWNoZXNzLnB1YnN1Yi5lbWl0KCdjb250ZW50X2xvYWRlZCcpXG4gICAgICAgIH1cbiAgICAgIH0sIGRhdGEuaGlzdG9yeS5tYXAoZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gaCgndHInLCBbXG4gICAgICAgICAgaCgndGQucmVhc29uJywgZS5yZWFzb24pLFxuICAgICAgICAgIGgoJ3RkLm1vZCcsIGUubW9kKSxcbiAgICAgICAgICBoKCd0ZCcsIGgoJ3RpbWUudGltZWFnbycsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7IGRhdGV0aW1lOiBlLmRhdGUgfVxuICAgICAgICAgIH0pKVxuICAgICAgICBdKTtcbiAgICAgIH0pKSlcbiAgICBdKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiBbXG4gICAgICBoKCdkaXYudG9wJywgeyBrZXk6ICdtb2QtJyArIGRhdGEuaWQgfSwgW1xuICAgICAgICBoKCdzcGFuLnRleHQnLCB7XG4gICAgICAgICAgYXR0cnM6IHsnZGF0YS1pY29uJzogJ+6AgicgfSxcbiAgICAgICAgfSwgW3VzZXJMaW5rKGRhdGEudXNlcm5hbWUpXSksXG4gICAgICAgIGgoJ2EnLCB7XG4gICAgICAgICAgYXR0cnM6IHsnZGF0YS1pY29uJzogJ0wnfSxcbiAgICAgICAgICBob29rOiBiaW5kKCdjbGljaycsIGN0cmwuY2xvc2UpXG4gICAgICAgIH0pXG4gICAgICBdKSxcbiAgICAgIGgoJ2Rpdi5tY2hhdF9fY29udGVudC5tb2RlcmF0aW9uJywgW1xuICAgICAgICBpbmZvcyxcbiAgICAgICAgdGltZW91dCxcbiAgICAgICAgaGlzdG9yeVxuICAgICAgXSlcbiAgICBdO1xufTtcbiIsImltcG9ydCB7IGggfSBmcm9tICdzbmFiYmRvbSdcbmltcG9ydCB7IFZOb2RlIH0gZnJvbSAnc25hYmJkb20vdm5vZGUnXG5pbXBvcnQgeyBOb3RlQ3RybCwgTm90ZU9wdHMgfSBmcm9tICcuL2ludGVyZmFjZXMnXG5pbXBvcnQgKiBhcyB4aHIgZnJvbSAnLi94aHInXG5pbXBvcnQgeyBzcGlubmVyIH0gZnJvbSAnLi91dGlsJ1xuXG5leHBvcnQgZnVuY3Rpb24gbm90ZUN0cmwob3B0czogTm90ZU9wdHMpOiBOb3RlQ3RybCB7XG4gIGxldCB0ZXh0OiBzdHJpbmdcbiAgY29uc3QgZG9Qb3N0ID0gd2luZG93LmxpY2hlc3MuZGVib3VuY2UoKCkgPT4ge1xuICAgIHhoci5zZXROb3RlKG9wdHMuaWQsIHRleHQpO1xuICB9LCAxMDAwKTtcbiAgcmV0dXJuIHtcbiAgICBpZDogb3B0cy5pZCxcbiAgICB0cmFuczogb3B0cy50cmFucyxcbiAgICB0ZXh0OiAoKSA9PiB0ZXh0LFxuICAgIGZldGNoKCkge1xuICAgICAgeGhyLmdldE5vdGUob3B0cy5pZCkudGhlbih0ID0+IHtcbiAgICAgICAgdGV4dCA9IHQgfHwgJyc7XG4gICAgICAgIG9wdHMucmVkcmF3KClcbiAgICAgIH0pXG4gICAgfSxcbiAgICBwb3N0KHQpIHtcbiAgICAgIHRleHQgPSB0O1xuICAgICAgZG9Qb3N0KClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vdGVWaWV3KGN0cmw6IE5vdGVDdHJsKTogVk5vZGUge1xuICBjb25zdCB0ZXh0ID0gY3RybC50ZXh0KCk7XG4gIGlmICh0ZXh0ID09IHVuZGVmaW5lZCkgcmV0dXJuIGgoJ2Rpdi5sb2FkaW5nJywge1xuICAgIGhvb2s6IHtcbiAgICAgIGluc2VydDogY3RybC5mZXRjaFxuICAgIH0sXG4gIH0sIFtzcGlubmVyKCldKVxuICByZXR1cm4gaCgndGV4dGFyZWEnLCB7XG4gICAgYXR0cnM6IHtcbiAgICAgIHBsYWNlaG9sZGVyOiBjdHJsLnRyYW5zKCd0eXBlUHJpdmF0ZU5vdGVzSGVyZScpXG4gICAgfSxcbiAgICBob29rOiB7XG4gICAgICBpbnNlcnQodm5vZGUpIHtcbiAgICAgICAgY29uc3QgJGVsID0gJCh2bm9kZS5lbG0gYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgICAkZWwudmFsKHRleHQpLm9uKCdjaGFuZ2Uga2V5dXAgcGFzdGUnLCAoKSA9PiB7XG4gICAgICAgICAgY3RybC5wb3N0KCRlbC52YWwoKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuaW1wb3J0IHsgYmluZCB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCB7IFJlZHJhdyB9IGZyb20gJy4vaW50ZXJmYWNlcydcblxuZXhwb3J0IGludGVyZmFjZSBQcmVzZXRDdHJsIHtcbiAgZ3JvdXAoKTogc3RyaW5nIHwgdW5kZWZpbmVkXG4gIHNhaWQoKTogc3RyaW5nW11cbiAgc2V0R3JvdXAoZ3JvdXA6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHZvaWRcbiAgcG9zdChwcmVzZXQ6IFByZXNldCk6IHZvaWRcbn1cblxuZXhwb3J0IHR5cGUgUHJlc2V0S2V5ID0gc3RyaW5nXG5leHBvcnQgdHlwZSBQcmVzZXRUZXh0ID0gc3RyaW5nXG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc2V0IHtcbiAga2V5OiBQcmVzZXRLZXlcbiAgdGV4dDogUHJlc2V0VGV4dFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByZXNldEdyb3VwcyB7XG4gIHN0YXJ0OiBQcmVzZXRbXVxuICBlbmQ6IFByZXNldFtdXG4gIFtrZXk6IHN0cmluZ106IFByZXNldFtdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc2V0T3B0cyB7XG4gIGluaXRpYWxHcm91cD86IHN0cmluZ1xuICByZWRyYXc6IFJlZHJhd1xuICBwb3N0KHRleHQ6IHN0cmluZyk6IHZvaWRcbn1cblxuY29uc3QgZ3JvdXBzOiBQcmVzZXRHcm91cHMgPSB7XG4gIHN0YXJ0OiBbXG4gICAgJ2hpL0hlbGxvJywgJ2dsL0dvb2QgbHVjaycsICdoZi9IYXZlIGZ1biEnLCAndTIvWW91IHRvbyEnXG4gIF0ubWFwKHNwbGl0SXQpLFxuICBlbmQ6IFtcbiAgICAnZ2cvR29vZCBnYW1lJywgJ3dwL1dlbGwgcGxheWVkJywgJ3R5L1RoYW5rIHlvdScsICdndGcvSVxcJ3ZlIGdvdCB0byBnbycsICdieWUvQnllISdcbiAgXS5tYXAoc3BsaXRJdClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXNldEN0cmwob3B0czogUHJlc2V0T3B0cyk6IFByZXNldEN0cmwge1xuXG4gIGxldCBncm91cDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0cy5pbml0aWFsR3JvdXA7XG5cbiAgbGV0IHNhaWQ6IHN0cmluZ1tdID0gW107XG5cbiAgcmV0dXJuIHtcbiAgICBncm91cDogKCkgPT4gZ3JvdXAsXG4gICAgc2FpZDogKCkgPT4gc2FpZCxcbiAgICBzZXRHcm91cChwOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChwICE9PSBncm91cCkge1xuICAgICAgICBncm91cCA9IHA7XG4gICAgICAgIGlmICghcCkgc2FpZCA9IFtdO1xuICAgICAgICBvcHRzLnJlZHJhdygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcG9zdChwcmVzZXQpIHtcbiAgICAgIGlmICghZ3JvdXApIHJldHVybjtcbiAgICAgIGNvbnN0IHNldHMgPSBncm91cHNbZ3JvdXBdO1xuICAgICAgaWYgKCFzZXRzKSByZXR1cm47XG4gICAgICBpZiAoc2FpZC5pbmNsdWRlcyhwcmVzZXQua2V5KSkgcmV0dXJuO1xuICAgICAgb3B0cy5wb3N0KHByZXNldC50ZXh0KTtcbiAgICAgIHNhaWQucHVzaChwcmVzZXQua2V5KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXNldFZpZXcoY3RybDogUHJlc2V0Q3RybCk6IFZOb2RlIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgZ3JvdXAgPSBjdHJsLmdyb3VwKCk7XG4gIGlmICghZ3JvdXApIHJldHVybjtcbiAgY29uc3Qgc2V0cyA9IGdyb3Vwc1tncm91cF07XG4gIGNvbnN0IHNhaWQgPSBjdHJsLnNhaWQoKTtcbiAgcmV0dXJuIChzZXRzICYmIHNhaWQubGVuZ3RoIDwgMikgPyBoKCdkaXYubWNoYXRfX3ByZXNldHMnLCBzZXRzLm1hcCgocDogUHJlc2V0KSA9PiB7XG4gICAgY29uc3QgZGlzYWJsZWQgPSBzYWlkLmluY2x1ZGVzKHAua2V5KTtcbiAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgIGNsYXNzOiB7XG4gICAgICAgIGRpc2FibGVkXG4gICAgICB9LFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdGl0bGU6IHAudGV4dCxcbiAgICAgICAgZGlzYWJsZWRcbiAgICAgIH0sXG4gICAgICBob29rOiBiaW5kKCdjbGljaycsICgpID0+IHsgIWRpc2FibGVkICYmIGN0cmwucG9zdChwKSB9KVxuICAgIH0sIHAua2V5KTtcbiAgfSkpIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBzcGxpdEl0KHM6IHN0cmluZyk6IFByZXNldCB7XG4gIGNvbnN0IHBhcnRzID0gcy5zcGxpdCgnLycpO1xuICByZXR1cm4ge1xuICAgIGtleTogcGFydHNbMF0sXG4gICAgdGV4dDogcGFydHNbMV1cbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHNraXAodHh0OiBzdHJpbmcpIHtcbiAgcmV0dXJuIGFuYWx5c2UodHh0KSAmJiB3aW5kb3cubGljaGVzcy5zdG9yYWdlLmdldCgnY2hhdC1zcGFtJykgIT0gJzEnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc1RlYW1VcmwodHh0OiBzdHJpbmcpIHtcbiAgcmV0dXJuICEhdHh0Lm1hdGNoKHRlYW1VcmxSZWdleCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVwb3J0KHR4dDogc3RyaW5nKSB7XG4gIGlmIChhbmFseXNlKHR4dCkpIHtcbiAgICAkLnBvc3QoJy9qc2xvZy8nICsgd2luZG93LmxvY2F0aW9uLmhyZWYuc3Vic3RyKC0xMikgKyAnP249c3BhbScpO1xuICAgIHdpbmRvdy5saWNoZXNzLnN0b3JhZ2Uuc2V0KCdjaGF0LXNwYW0nLCAnMScpO1xuICB9XG59XG5cbmNvbnN0IHNwYW1SZWdleCA9IG5ldyBSZWdFeHAoW1xuICAneGNhbXdlYi5jb20nLFxuICAnKF58W15pXSljaGVzcy1ib3QnLFxuICAnY2hlc3MtY2hlYXQnLFxuICAnY29vbHRlZW5iaXRjaCcsXG4gICdsZXRjYWZhLndlYmNhbScsXG4gICd0aW55dXJsLmNvbS8nLFxuICAnd29vZ2EuaW5mby8nLFxuICAnYml0Lmx5LycsXG4gICd3YnQubGluay8nLFxuICAnZWIuYnkvJyxcbiAgJzAwMS5ycy8nLFxuICAnc2hyLm5hbWUvJyxcbiAgJ3UudG8vJyxcbiAgJy4zLWEubmV0JyxcbiAgJy5zc2w0NDMub3JnJyxcbiAgJy5uczAyLnVzJyxcbiAgJy5teWZ0cC5pbmZvJyxcbiAgJy5mbGlua3VwLmNvbScsXG4gICcuc2VydmV1c2Vycy5jb20nLFxuICAnYmFkb29naXJscy5jb20nLFxuICAnaGlkZS5zdScsXG4gICd3eW9uLmRlJyxcbiAgJ3NleGRhdGluZ2N6LmNsdWInXG5dLm1hcCh1cmwgPT4ge1xuICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcLi9nLCAnXFxcXC4nKS5yZXBsYWNlKC9cXC8vZywgJ1xcXFwvJyk7XG59KS5qb2luKCd8JykpO1xuXG5mdW5jdGlvbiBhbmFseXNlKHR4dDogc3RyaW5nKSB7XG4gIHJldHVybiAhIXR4dC5tYXRjaChzcGFtUmVnZXgpO1xufVxuXG5jb25zdCB0ZWFtVXJsUmVnZXggPSAvbGljaGVzc1xcLm9yZ1xcL3RlYW1cXC8vXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnc25hYmJkb20nXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3NuYWJiZG9tL3Zub2RlJ1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlckxpbmsodTogc3RyaW5nLCB0aXRsZT86IHN0cmluZykge1xuICBjb25zdCB0cnVuYyA9IHUuc3Vic3RyaW5nKDAsIDE0KTtcbiAgcmV0dXJuIGgoJ2EnLCB7XG4gICAgLy8gY2FuJ3QgYmUgaW5saW5lZCBiZWNhdXNlIG9mIHRodW5rc1xuICAgIGNsYXNzOiB7XG4gICAgICAndXNlci1saW5rJzogdHJ1ZSxcbiAgICAgIHVscHQ6IHRydWVcbiAgICB9LFxuICAgIGF0dHJzOiB7XG4gICAgICBocmVmOiAnL0AvJyArIHVcbiAgICB9XG4gIH0sIHRpdGxlID8gW1xuICAgIGgoXG4gICAgICAnc3Bhbi50aXRsZScsXG4gICAgICB0aXRsZSA9PSAnQk9UJyA/IHsgYXR0cnM6IHsnZGF0YS1ib3QnOiB0cnVlIH0gfSA6IHt9LFxuICAgICAgdGl0bGUpLCB0cnVuY1xuICBdIDogW3RydW5jXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGlubmVyKCkge1xuICByZXR1cm4gaCgnZGl2LnNwaW5uZXInLCBbXG4gICAgaCgnc3ZnJywgeyBhdHRyczogeyB2aWV3Qm94OiAnMCAwIDQwIDQwJyB9IH0sIFtcbiAgICAgIGgoJ2NpcmNsZScsIHtcbiAgICAgICAgYXR0cnM6IHsgY3g6IDIwLCBjeTogMjAsIHI6IDE4LCBmaWxsOiAnbm9uZScgfVxuICAgICAgfSldKV0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZChldmVudE5hbWU6IHN0cmluZywgZjogKGU6IEV2ZW50KSA9PiB2b2lkKSB7XG4gIHJldHVybiB7XG4gICAgaW5zZXJ0OiAodm5vZGU6IFZOb2RlKSA9PiB7XG4gICAgICAodm5vZGUuZWxtIGFzIEhUTUxFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZik7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3NuYWJiZG9tJ1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICdzbmFiYmRvbS92bm9kZSdcbmltcG9ydCB7IEN0cmwsIFRhYiB9IGZyb20gJy4vaW50ZXJmYWNlcydcbmltcG9ydCBkaXNjdXNzaW9uVmlldyBmcm9tICcuL2Rpc2N1c3Npb24nXG5pbXBvcnQgeyBub3RlVmlldyB9IGZyb20gJy4vbm90ZSdcbmltcG9ydCB7IG1vZGVyYXRpb25WaWV3IH0gZnJvbSAnLi9tb2RlcmF0aW9uJ1xuaW1wb3J0IHsgYmluZCB9IGZyb20gJy4vdXRpbCdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY3RybDogQ3RybCk6IFZOb2RlIHtcblxuICBjb25zdCBtb2QgPSBjdHJsLm1vZGVyYXRpb24oKTtcblxuICByZXR1cm4gaCgnc2VjdGlvbi5tY2hhdCcgKyAoY3RybC5vcHRzLmFsd2F5c0VuYWJsZWQgPyAnJyA6ICcubWNoYXQtb3B0aW9uYWwnKSwge1xuICAgIGNsYXNzOiB7XG4gICAgICAnbWNoYXQtbW9kJzogISFtb2RcbiAgICB9LFxuICAgIGhvb2s6IHtcbiAgICAgIGRlc3Ryb3k6IGN0cmwuZGVzdHJveVxuICAgIH1cbiAgfSwgbW9kZXJhdGlvblZpZXcobW9kKSB8fCBub3JtYWxWaWV3KGN0cmwpKVxufVxuXG5mdW5jdGlvbiByZW5kZXJQYWxhbnRpcihjdHJsOiBDdHJsKSB7XG4gIGNvbnN0IHAgPSBjdHJsLnBhbGFudGlyO1xuICBpZiAoIXAuZW5hYmxlZCgpKSByZXR1cm47XG4gIHJldHVybiBwLmluc3RhbmNlID8gcC5pbnN0YW5jZS5yZW5kZXIoaCkgOiBoKCdkaXYubWNoYXRfX3RhYi5wYWxhbnRpci5wYWxhbnRpci1zbG90Jyx7XG4gICAgYXR0cnM6IHtcbiAgICAgICdkYXRhLWljb24nOiAn7oCgJyxcbiAgICAgIHRpdGxlOiAnVm9pY2UgY2hhdCdcbiAgICB9LFxuICAgIGhvb2s6IGJpbmQoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKCFwLmxvYWRlZCkge1xuICAgICAgICBwLmxvYWRlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGxpID0gd2luZG93LmxpY2hlc3M7XG4gICAgICAgIGxpLmxvYWRTY3JpcHQoJ2phdmFzY3JpcHRzL3ZlbmRvci9wZWVyanMubWluLmpzJykudGhlbigoKSA9PiB7XG4gICAgICAgICAgbGkubG9hZFNjcmlwdChsaS5jb21waWxlZFNjcmlwdCgncGFsYW50aXInKSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwLmluc3RhbmNlID0gd2luZG93LlBhbGFudGlyIS5wYWxhbnRpcih7XG4gICAgICAgICAgICAgIHVpZDogY3RybC5kYXRhLnVzZXJJZCxcbiAgICAgICAgICAgICAgcmVkcmF3OiBjdHJsLnJlZHJhd1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjdHJsLnJlZHJhdygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9KTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsVmlldyhjdHJsOiBDdHJsKSB7XG4gIGNvbnN0IGFjdGl2ZSA9IGN0cmwudm0udGFiO1xuICByZXR1cm4gW1xuICAgIGgoJ2Rpdi5tY2hhdF9fdGFicy5uYl8nICsgY3RybC5hbGxUYWJzLmxlbmd0aCwgW1xuICAgICAgLi4uY3RybC5hbGxUYWJzLm1hcCh0ID0+IHJlbmRlclRhYihjdHJsLCB0LCBhY3RpdmUpKSxcbiAgICAgIHJlbmRlclBhbGFudGlyKGN0cmwpXG4gICAgXSksXG4gICAgaCgnZGl2Lm1jaGF0X19jb250ZW50LicgKyBhY3RpdmUsXG4gICAgICAoYWN0aXZlID09PSAnbm90ZScgJiYgY3RybC5ub3RlKSA/IFtub3RlVmlldyhjdHJsLm5vdGUpXSA6IChcbiAgICAgICAgY3RybC5wbHVnaW4gJiYgYWN0aXZlID09PSBjdHJsLnBsdWdpbi50YWIua2V5ID8gW2N0cmwucGx1Z2luLnZpZXcoKV0gOiBkaXNjdXNzaW9uVmlldyhjdHJsKVxuICAgICAgKSlcbiAgXVxufVxuXG5mdW5jdGlvbiByZW5kZXJUYWIoY3RybDogQ3RybCwgdGFiOiBUYWIsIGFjdGl2ZTogVGFiKSB7XG4gIHJldHVybiBoKCdkaXYubWNoYXRfX3RhYi4nICsgdGFiLCB7XG4gICAgY2xhc3M6IHsgJ21jaGF0X190YWItYWN0aXZlJzogdGFiID09PSBhY3RpdmUgfSxcbiAgICBob29rOiBiaW5kKCdjbGljaycsICgpID0+IGN0cmwuc2V0VGFiKHRhYikpXG4gIH0sIHRhYk5hbWUoY3RybCwgdGFiKSk7XG59XG5cbmZ1bmN0aW9uIHRhYk5hbWUoY3RybDogQ3RybCwgdGFiOiBUYWIpIHtcbiAgaWYgKHRhYiA9PT0gJ2Rpc2N1c3Npb24nKSByZXR1cm4gW1xuICAgIGgoJ3NwYW4nLCBjdHJsLmRhdGEubmFtZSksXG4gICAgY3RybC5vcHRzLmFsd2F5c0VuYWJsZWQgPyB1bmRlZmluZWQgOiBoKCdpbnB1dCcsIHtcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIHRpdGxlOiBjdHJsLnRyYW5zLm5vYXJnKCd0b2dnbGVUaGVDaGF0JyksXG4gICAgICAgIGNoZWNrZWQ6IGN0cmwudm0uZW5hYmxlZFxuICAgICAgfSxcbiAgICAgIGhvb2s6IGJpbmQoJ2NoYW5nZScsIChlOiBFdmVudCkgPT4ge1xuICAgICAgICBjdHJsLnNldEVuYWJsZWQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpO1xuICAgICAgfSlcbiAgICB9KVxuICBdO1xuICBpZiAodGFiID09PSAnbm90ZScpIHJldHVybiBbaCgnc3BhbicsIGN0cmwudHJhbnMubm9hcmcoJ25vdGVzJykpXTtcbiAgaWYgKGN0cmwucGx1Z2luICYmIHRhYiA9PT0gY3RybC5wbHVnaW4udGFiLmtleSkgcmV0dXJuIFtoKCdzcGFuJywgY3RybC5wbHVnaW4udGFiLm5hbWUpXTtcbiAgcmV0dXJuIFtdO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHVzZXJNb2RJbmZvKHVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuICQuZ2V0KCcvbW9kL2NoYXQtdXNlci8nICsgdXNlcm5hbWUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmbGFnKHJlc291cmNlOiBzdHJpbmcsIHVzZXJuYW1lOiBzdHJpbmcsIHRleHQ6IHN0cmluZykge1xuICByZXR1cm4gJC5wb3N0KCcvcmVwb3J0L2ZsYWcnLCB7IHVzZXJuYW1lLCByZXNvdXJjZSwgdGV4dCB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vdGUoaWQ6IHN0cmluZykge1xuICByZXR1cm4gJC5nZXQobm90ZVVybChpZCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Tm90ZShpZDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpIHtcbiAgcmV0dXJuICQucG9zdChub3RlVXJsKGlkKSwgeyB0ZXh0IH0pXG59XG5cbmZ1bmN0aW9uIG5vdGVVcmwoaWQ6IHN0cmluZykge1xuICByZXR1cm4gYC8ke2lkfS9ub3RlYDtcbn1cbiIsImltcG9ydCBwaW90ciBmcm9tICcuL3Bpb3RyJztcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxGZW46IEZlbiA9ICdybmJxa2Juci9wcHBwcHBwcC84LzgvOC84L1BQUFBQUFBQL1JOQlFLQk5SIHcgS1FrcSAtIDAgMSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmaXhDcmF6eVNhbihzYW46IFNhbik6IFNhbiB7XG4gIHJldHVybiBzYW5bMF0gPT09ICdQJyA/IHNhbi5zbGljZSgxKSA6IHNhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29tcG9zZVVjaSh1Y2k6IFVjaSk6IFtLZXksIEtleSwgc3RyaW5nXSB7XG4gIHJldHVybiBbdWNpLnNsaWNlKDAsIDIpIGFzIEtleSwgdWNpLnNsaWNlKDIsIDQpIGFzIEtleSwgdWNpLnNsaWNlKDQsIDUpXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckV2YWwoZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgZSA9IE1hdGgubWF4KE1hdGgubWluKE1hdGgucm91bmQoZSAvIDEwKSAvIDEwLCA5OSksIC05OSk7XG4gIHJldHVybiAoZSA+IDAgPyAnKycgOiAnJykgKyBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlc3RzIHtcbiAgW3NxdWFyZTogc3RyaW5nXTogS2V5W107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkRGVzdHMobGluZXM/OiBzdHJpbmcpOiBEZXN0cyB8IG51bGwge1xuICBpZiAodHlwZW9mIGxpbmVzID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGRlc3RzOiBEZXN0cyA9IHt9O1xuICBpZiAobGluZXMpIGxpbmVzLnNwbGl0KCcgJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICBkZXN0c1twaW90cltsaW5lWzBdXV0gPSBsaW5lLnNsaWNlKDEpLnNwbGl0KCcnKS5tYXAoYyA9PiBwaW90cltjXSBhcyBLZXkpXG4gIH0pO1xuICByZXR1cm4gZGVzdHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkRHJvcHMobGluZT86IHN0cmluZyB8IG51bGwpOiBzdHJpbmdbXSB8IG51bGwge1xuICBpZiAodHlwZW9mIGxpbmUgPT09ICd1bmRlZmluZWQnIHx8IGxpbmUgPT09IG51bGwpIHJldHVybiBudWxsO1xuICByZXR1cm4gbGluZS5tYXRjaCgvLnsyfS9nKSB8fCBbXTtcbn1cblxuZXhwb3J0IGNvbnN0IHJvbGVUb1NhbiA9IHtcbiAgcGF3bjogJ1AnLFxuICBrbmlnaHQ6ICdOJyxcbiAgYmlzaG9wOiAnQicsXG4gIHJvb2s6ICdSJyxcbiAgcXVlZW46ICdRJyxcbiAga2luZzogJ0snXG59O1xuXG5leHBvcnQgY29uc3Qgc2FuVG9Sb2xlID0ge1xuICBQOiAncGF3bicsXG4gIE46ICdrbmlnaHQnLFxuICBCOiAnYmlzaG9wJyxcbiAgUjogJ3Jvb2snLFxuICBROiAncXVlZW4nLFxuICBLOiAna2luZydcbn07XG5cbmV4cG9ydCB7IHBpb3RyIH07XG5cbmV4cG9ydCBmdW5jdGlvbiB2YXJpYW50VG9SdWxlcyh2YXJpYW50OiBWYXJpYW50S2V5KTogJ2NoZXNzJyB8ICdhbnRpY2hlc3MnIHwgJ2tpbmdvZnRoZWhpbGwnIHwgJzNjaGVjaycgfCAnYXRvbWljJyB8ICdob3JkZScgfCAncmFjaW5na2luZ3MnIHwgJ2NyYXp5aG91c2UnIHtcbiAgc3dpdGNoICh2YXJpYW50KSB7XG4gICAgY2FzZSAnc3RhbmRhcmQnOlxuICAgIGNhc2UgJ2NoZXNzOTYwJzpcbiAgICBjYXNlICdmcm9tUG9zaXRpb24nOlxuICAgICAgcmV0dXJuICdjaGVzcyc7XG4gICAgY2FzZSAndGhyZWVDaGVjayc6XG4gICAgICByZXR1cm4gJzNjaGVjayc7XG4gICAgY2FzZSAna2luZ09mVGhlSGlsbCc6XG4gICAgICByZXR1cm4gJ2tpbmdvZnRoZWhpbGwnO1xuICAgIGNhc2UgJ3JhY2luZ0tpbmdzJzpcbiAgICAgIHJldHVybiAncmFjaW5na2luZ3MnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdmFyaWFudDtcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQaW90ciB7XG4gIFtwOiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbmNvbnN0IHBpb3RyOiBQaW90ciA9IHtcbiAgJ2EnOiAnYTEnLFxuICAnYic6ICdiMScsXG4gICdjJzogJ2MxJyxcbiAgJ2QnOiAnZDEnLFxuICAnZSc6ICdlMScsXG4gICdmJzogJ2YxJyxcbiAgJ2cnOiAnZzEnLFxuICAnaCc6ICdoMScsXG4gICdpJzogJ2EyJyxcbiAgJ2onOiAnYjInLFxuICAnayc6ICdjMicsXG4gICdsJzogJ2QyJyxcbiAgJ20nOiAnZTInLFxuICAnbic6ICdmMicsXG4gICdvJzogJ2cyJyxcbiAgJ3AnOiAnaDInLFxuICAncSc6ICdhMycsXG4gICdyJzogJ2IzJyxcbiAgJ3MnOiAnYzMnLFxuICAndCc6ICdkMycsXG4gICd1JzogJ2UzJyxcbiAgJ3YnOiAnZjMnLFxuICAndyc6ICdnMycsXG4gICd4JzogJ2gzJyxcbiAgJ3knOiAnYTQnLFxuICAneic6ICdiNCcsXG4gICdBJzogJ2M0JyxcbiAgJ0InOiAnZDQnLFxuICAnQyc6ICdlNCcsXG4gICdEJzogJ2Y0JyxcbiAgJ0UnOiAnZzQnLFxuICAnRic6ICdoNCcsXG4gICdHJzogJ2E1JyxcbiAgJ0gnOiAnYjUnLFxuICAnSSc6ICdjNScsXG4gICdKJzogJ2Q1JyxcbiAgJ0snOiAnZTUnLFxuICAnTCc6ICdmNScsXG4gICdNJzogJ2c1JyxcbiAgJ04nOiAnaDUnLFxuICAnTyc6ICdhNicsXG4gICdQJzogJ2I2JyxcbiAgJ1EnOiAnYzYnLFxuICAnUic6ICdkNicsXG4gICdTJzogJ2U2JyxcbiAgJ1QnOiAnZjYnLFxuICAnVSc6ICdnNicsXG4gICdWJzogJ2g2JyxcbiAgJ1cnOiAnYTcnLFxuICAnWCc6ICdiNycsXG4gICdZJzogJ2M3JyxcbiAgJ1onOiAnZDcnLFxuICAnMCc6ICdlNycsXG4gICcxJzogJ2Y3JyxcbiAgJzInOiAnZzcnLFxuICAnMyc6ICdoNycsXG4gICc0JzogJ2E4JyxcbiAgJzUnOiAnYjgnLFxuICAnNic6ICdjOCcsXG4gICc3JzogJ2Q4JyxcbiAgJzgnOiAnZTgnLFxuICAnOSc6ICdmOCcsXG4gICchJzogJ2c4JyxcbiAgJz8nOiAnaDgnXG59O1xuXG5leHBvcnQgZGVmYXVsdCBwaW90cjtcbiIsImV4cG9ydCBmdW5jdGlvbiBkZWZpbmVkPEE+KHY6IEEgfCB1bmRlZmluZWQpOiB2IGlzIEEge1xuICByZXR1cm4gdHlwZW9mIHYgIT09ICd1bmRlZmluZWQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW1wdHkoYTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiAhYSB8fCBhLmxlbmd0aCA9PT0gMDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9wPFQ+IHtcbiAgKCk6IFRcbiAgKHY6IFQpOiBUXG59XG5cbi8vIGxpa2UgbWl0aHJpbCBwcm9wIGJ1dCB3aXRoIHR5cGUgc2FmZXR5XG5leHBvcnQgZnVuY3Rpb24gcHJvcDxBPihpbml0aWFsVmFsdWU6IEEpOiBQcm9wPEE+IHtcbiAgbGV0IHZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICBjb25zdCBmdW4gPSBmdW5jdGlvbih2OiBBIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRlZmluZWQodikpIHZhbHVlID0gdjtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIHJldHVybiBmdW4gYXMgUHJvcDxBPjtcbn1cbiIsImltcG9ydCB0aHJvdHRsZSBmcm9tICcuL3Rocm90dGxlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJ1bm5lcihoYWNrczogKCkgPT4gdm9pZCwgdGhyb3R0bGVNczogbnVtYmVyID0gMTAwKSB7XG5cbiAgbGV0IHRpbWVvdXQ6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBjb25zdCBydW5IYWNrcyA9IHRocm90dGxlKHRocm90dGxlTXMsICgpID0+IHtcbiAgICB3aW5kb3cubGljaGVzcy5yYWYoKCkgPT4ge1xuICAgICAgaGFja3MoKTtcbiAgICAgIHNjaGVkdWxlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlKCkge1xuICAgIHRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJ1bkhhY2tzLCA1MDApO1xuICB9XG5cbiAgcnVuSGFja3MoKTtcbn1cblxubGV0IGxhc3RNYWluQm9hcmRIZWlnaHQ6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuLy8gRmlyZWZveCA2MC0gbmVlZHMgdGhpcyB0byBwcm9wZXJseSBjb21wdXRlIHRoZSBncmlkIGxheW91dC5cbmV4cG9ydCBmdW5jdGlvbiBmaXhNYWluQm9hcmRIZWlnaHQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICBjb25zdCBtYWluQm9hcmQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1haW4tYm9hcmQnKSBhcyBIVE1MRWxlbWVudCxcbiAgICB3aWR0aCA9IG1haW5Cb2FyZC5vZmZzZXRXaWR0aDtcbiAgaWYgKGxhc3RNYWluQm9hcmRIZWlnaHQgIT0gd2lkdGgpIHtcbiAgICBsYXN0TWFpbkJvYXJkSGVpZ2h0ID0gd2lkdGg7XG4gICAgbWFpbkJvYXJkLnN0eWxlLmhlaWdodCA9IHdpZHRoICsgJ3B4JztcbiAgICAobWFpbkJvYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jZy13cmFwJykgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmhlaWdodCA9IHdpZHRoICsgJ3B4JztcbiAgICB3aW5kb3cubGljaGVzcy5kaXNwYXRjaEV2ZW50KGRvY3VtZW50LmJvZHksICdjaGVzc2dyb3VuZC5yZXNpemUnKTtcbiAgfVxufVxuXG5sZXQgYm91bmRDaGVzc2dyb3VuZFJlc2l6ZSA9IGZhbHNlO1xuXG5leHBvcnQgZnVuY3Rpb24gYmluZENoZXNzZ3JvdW5kUmVzaXplT25jZShmOiAoKSA9PiB2b2lkKSB7XG4gIGlmICghYm91bmRDaGVzc2dyb3VuZFJlc2l6ZSkge1xuICAgIGJvdW5kQ2hlc3Nncm91bmRSZXNpemUgPSB0cnVlO1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2hlc3Nncm91bmQucmVzaXplJywgZik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5lZWRzQm9hcmRIZWlnaHRGaXgoKSB7XG4gIC8vIENocm9tZSwgQ2hyb21pdW0sIEJyYXZlLCBPcGVyYSwgU2FmYXJpIDEyKyBhcmUgT0tcbiAgaWYgKHdpbmRvdy5jaHJvbWUpIHJldHVybiBmYWxzZTtcblxuICAvLyBGaXJlZm94ID49IDYxIGlzIE9LXG4gIGNvbnN0IGZmdiA9IG5hdmlnYXRvci51c2VyQWdlbnQuc3BsaXQoJ0ZpcmVmb3gvJyk7XG4gIHJldHVybiAhZmZ2WzFdIHx8IHBhcnNlSW50KGZmdlsxXSkgPCA2MTtcbn1cbiIsIi8qIEJhc2VkIG9uOiAqL1xuLyohXG4gKiBob3ZlckludGVudCB2MS4xMC4wIC8vIDIwMTkuMDIuMjUgLy8galF1ZXJ5IHYxLjcuMCtcbiAqIGh0dHA6Ly9icmlhbmNoZXJuZS5naXRodWIuaW8vanF1ZXJ5LWhvdmVySW50ZW50L1xuICpcbiAqIFlvdSBtYXkgdXNlIGhvdmVySW50ZW50IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIGxpY2Vuc2UuIEJhc2ljYWxseSB0aGF0XG4gKiBtZWFucyB5b3UgYXJlIGZyZWUgdG8gdXNlIGhvdmVySW50ZW50IGFzIGxvbmcgYXMgdGhpcyBoZWFkZXIgaXMgbGVmdCBpbnRhY3QuXG4gKiBDb3B5cmlnaHQgMjAwNy0yMDE5IEJyaWFuIENoZXJuZVxuICovXG5cbnR5cGUgU3RhdGUgPSBhbnk7XG5cbmV4cG9ydCBjb25zdCBtZW51SG92ZXIgPSAoKSA9PiB3aW5kb3cubGljaGVzcy5yYWYoZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHdpbmRvdy5saWNoZXNzLmhhc1RvdWNoRXZlbnRzKSByZXR1cm47XG5cbiAgbGV0IGludGVydmFsOiBudW1iZXIgPSAxMDA7XG4gIGxldCBzZW5zaXRpdml0eTogbnVtYmVyID0gMTA7XG5cbiAgLy8gY3VycmVudCBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlLCB1cGRhdGVkIGR1cmluZyBtb3VzZW1vdmUgdHJhY2tpbmcgKHNoYXJlZCBhY3Jvc3MgaW5zdGFuY2VzKVxuICBsZXQgY1g6IG51bWJlciwgY1k6IG51bWJlcjtcblxuICAvLyBzYXZlcyB0aGUgY3VycmVudCBwb2ludGVyIHBvc2l0aW9uIGNvb3JkaW5hdGVzIGJhc2VkIG9uIHRoZSBnaXZlbiBtb3VzZW1vdmUgZXZlbnRcbiAgbGV0IHRyYWNrID0gZnVuY3Rpb24oZXY6IEpRdWVyeUV2ZW50T2JqZWN0KSB7XG4gICAgY1ggPSBldi5wYWdlWDtcbiAgICBjWSA9IGV2LnBhZ2VZO1xuICB9O1xuXG4gIC8vIHN0YXRlIHByb3BlcnRpZXM6XG4gIC8vIHRpbWVvdXRJZCA9IHRpbWVvdXQgSUQsIHJldXNlZCBmb3IgdHJhY2tpbmcgbW91c2UgcG9zaXRpb24gYW5kIGRlbGF5aW5nIFwib3V0XCIgaGFuZGxlclxuICAvLyBpc0FjdGl2ZSA9IHBsdWdpbiBzdGF0ZSwgdHJ1ZSBhZnRlciBgb3ZlcmAgaXMgY2FsbGVkIGp1c3QgdW50aWwgYG91dGAgaXMgY2FsbGVkXG4gIC8vIHBYLCBwWSA9IHByZXZpb3VzbHktbWVhc3VyZWQgcG9pbnRlciBjb29yZGluYXRlcywgdXBkYXRlZCBhdCBlYWNoIHBvbGxpbmcgaW50ZXJ2YWxcbiAgLy8gZXZlbnQgPSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBuYW1lc3BhY2VkIGV2ZW50IHVzZWQgZm9yIG1vdXNlIHRyYWNraW5nXG4gIGxldCBzdGF0ZTogU3RhdGUgPSB7fTtcblxuICAkKCcjdG9wbmF2LmhvdmVyJykuZWFjaChmdW5jdGlvbih0aGlzOiBIVE1MRWxlbWVudCkge1xuXG4gICAgY29uc3QgJGVsID0gJCh0aGlzKS5yZW1vdmVDbGFzcygnaG92ZXInKSxcbiAgICAgIGhhbmRsZXIgPSAoKSA9PiAkZWwudG9nZ2xlQ2xhc3MoJ2hvdmVyJyk7XG5cblxuICAgIC8vIGNvbXBhcmVzIGN1cnJlbnQgYW5kIHByZXZpb3VzIG1vdXNlIHBvc2l0aW9uc1xuICAgIGNvbnN0IGNvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGNvbXBhcmUgbW91c2UgcG9zaXRpb25zIHRvIHNlZSBpZiBwb2ludGVyIGhhcyBzbG93ZWQgZW5vdWdoIHRvIHRyaWdnZXIgYG92ZXJgIGZ1bmN0aW9uXG4gICAgICBpZiAoIE1hdGguc3FydCggKHN0YXRlLnBYLWNYKSooc3RhdGUucFgtY1gpICsgKHN0YXRlLnBZLWNZKSooc3RhdGUucFktY1kpICkgPCBzZW5zaXRpdml0eSApIHtcbiAgICAgICAgJGVsLm9mZihzdGF0ZS5ldmVudCwgdHJhY2spO1xuICAgICAgICBkZWxldGUgc3RhdGUudGltZW91dElkO1xuICAgICAgICAvLyBzZXQgaG92ZXJJbnRlbnQgc3RhdGUgYXMgYWN0aXZlIGZvciB0aGlzIGVsZW1lbnQgKHBlcm1pdHMgYG91dGAgaGFuZGxlciB0byB0cmlnZ2VyKVxuICAgICAgICBzdGF0ZS5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIGhhbmRsZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHNldCBwcmV2aW91cyBjb29yZGluYXRlcyBmb3IgbmV4dCBjb21wYXJpc29uXG4gICAgICAgIHN0YXRlLnBYID0gY1g7IHN0YXRlLnBZID0gY1k7XG4gICAgICAgIC8vIHVzZSBzZWxmLWNhbGxpbmcgdGltZW91dCwgZ3VhcmFudGVlcyBpbnRlcnZhbHMgYXJlIHNwYWNlZCBvdXQgcHJvcGVybHkgKGF2b2lkcyBKYXZhU2NyaXB0IHRpbWVyIGJ1Z3MpXG4gICAgICAgIHN0YXRlLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoY29tcGFyZSwgaW50ZXJ2YWwgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQSBwcml2YXRlIGZ1bmN0aW9uIGZvciBoYW5kbGluZyBtb3VzZSAnaG92ZXJpbmcnXG4gICAgdmFyIGhhbmRsZUhvdmVyID0gZnVuY3Rpb24oZXY6IEpRdWVyeUV2ZW50T2JqZWN0KSB7XG5cbiAgICAgIC8vIGNsZWFyIGFueSBleGlzdGluZyB0aW1lb3V0XG4gICAgICBpZiAoc3RhdGUudGltZW91dElkKSB7IHN0YXRlLnRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0SWQpOyB9XG5cbiAgICAgIC8vIG5hbWVzcGFjZWQgZXZlbnQgdXNlZCB0byByZWdpc3RlciBhbmQgdW5yZWdpc3RlciBtb3VzZW1vdmUgdHJhY2tpbmdcbiAgICAgIHZhciBtb3VzZW1vdmUgPSBzdGF0ZS5ldmVudCA9ICdtb3VzZW1vdmUnO1xuXG4gICAgICAvLyBoYW5kbGUgdGhlIGV2ZW50LCBiYXNlZCBvbiBpdHMgdHlwZVxuICAgICAgaWYgKGV2LnR5cGUgPT0gJ21vdXNlZW50ZXInKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgYWxyZWFkeSBhY3RpdmUgb3IgYSBidXR0b24gaXMgcHJlc3NlZCAoZHJhZ2dpbmcgYSBwaWVjZSlcbiAgICAgICAgaWYgKHN0YXRlLmlzQWN0aXZlIHx8IChldi5vcmlnaW5hbEV2ZW50IGFzIE1vdXNlRXZlbnQpLmJ1dHRvbnMpIHJldHVybjtcbiAgICAgICAgLy8gc2V0IFwicHJldmlvdXNcIiBYIGFuZCBZIHBvc2l0aW9uIGJhc2VkIG9uIGluaXRpYWwgZW50cnkgcG9pbnRcbiAgICAgICAgc3RhdGUucFggPSBldi5wYWdlWDsgc3RhdGUucFkgPSBldi5wYWdlWTtcbiAgICAgICAgLy8gdXBkYXRlIFwiY3VycmVudFwiIFggYW5kIFkgcG9zaXRpb24gYmFzZWQgb24gbW91c2Vtb3ZlXG4gICAgICAgICRlbC5vZmYobW91c2Vtb3ZlLCB0cmFjaykub24obW91c2Vtb3ZlLCB0cmFjayk7XG4gICAgICAgIC8vIHN0YXJ0IHBvbGxpbmcgaW50ZXJ2YWwgKHNlbGYtY2FsbGluZyB0aW1lb3V0KSB0byBjb21wYXJlIG1vdXNlIGNvb3JkaW5hdGVzIG92ZXIgdGltZVxuICAgICAgICBzdGF0ZS50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGNvbXBhcmUsIGludGVydmFsICk7XG4gICAgICB9IGVsc2UgeyAvLyBcIm1vdXNlbGVhdmVcIlxuICAgICAgICAvLyBkbyBub3RoaW5nIGlmIG5vdCBhbHJlYWR5IGFjdGl2ZVxuICAgICAgICBpZiAoIXN0YXRlLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIC8vIHVuYmluZCBleHBlbnNpdmUgbW91c2Vtb3ZlIGV2ZW50XG4gICAgICAgICRlbC5vZmYobW91c2Vtb3ZlLHRyYWNrKTtcbiAgICAgICAgLy8gaWYgaG92ZXJJbnRlbnQgc3RhdGUgaXMgdHJ1ZSwgdGhlbiBjYWxsIHRoZSBtb3VzZU91dCBmdW5jdGlvbiBhZnRlciB0aGUgc3BlY2lmaWVkIGRlbGF5XG4gICAgICAgIHN0YXRlID0ge307XG4gICAgICAgIGhhbmRsZXIoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJGVsLm9uKCdtb3VzZWVudGVyJywgaGFuZGxlSG92ZXIpLm9uKCdtb3VzZWxlYXZlJywgaGFuZGxlSG92ZXIpO1xuICB9KTtcbn0pO1xuIiwiaW1wb3J0ICogYXMgY2cgZnJvbSAnY2hlc3Nncm91bmQvdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBNb3VjaEV2ZW50ID0gTW91c2VFdmVudCAmIFRvdWNoRXZlbnQ7XG5cbnR5cGUgVmlzaWJsZSA9IChwbHk6IFBseSkgPT4gYm9vbGVhbjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzaXplSGFuZGxlKGVsczogY2cuRWxlbWVudHMsIHByZWY6IG51bWJlciwgcGx5OiBudW1iZXIsIHZpc2libGU/OiBWaXNpYmxlKSB7XG5cbiAgaWYgKCFwcmVmKSByZXR1cm47XG5cbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjZy1yZXNpemUnKTtcbiAgZWxzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbCk7XG5cbiAgY29uc3Qgc3RhcnRSZXNpemUgPSAoc3RhcnQ6IE1vdWNoRXZlbnQpID0+IHtcblxuICAgIHN0YXJ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBtb3VzZW1vdmVFdmVudCA9IHN0YXJ0LnR5cGUgPT09ICd0b3VjaHN0YXJ0JyA/ICd0b3VjaG1vdmUnIDogJ21vdXNlbW92ZSc7XG4gICAgY29uc3QgbW91c2V1cEV2ZW50ID0gc3RhcnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnID8gJ3RvdWNoZW5kJyA6ICdtb3VzZXVwJztcblxuICAgIGNvbnN0IHN0YXJ0UG9zID0gZXZlbnRQb3NpdGlvbihzdGFydCkhO1xuICAgIGNvbnN0IGluaXRpYWxab29tID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLXpvb20nKSk7XG4gICAgbGV0IHpvb20gPSBpbml0aWFsWm9vbTtcblxuICAgIGNvbnN0IHNhdmVab29tID0gd2luZG93LmxpY2hlc3MuZGVib3VuY2UoKCkgPT4ge1xuICAgICAgJC5hamF4KHsgbWV0aG9kOiAncG9zdCcsIHVybDogJy9wcmVmL3pvb20/dj0nICsgKDEwMCArIHpvb20pIH0pO1xuICAgIH0sIDcwMCk7XG5cbiAgICBjb25zdCByZXNpemUgPSAobW92ZTogTW91Y2hFdmVudCkgPT4ge1xuXG4gICAgICBjb25zdCBwb3MgPSBldmVudFBvc2l0aW9uKG1vdmUpITtcbiAgICAgIGNvbnN0IGRlbHRhID0gcG9zWzBdIC0gc3RhcnRQb3NbMF0gKyBwb3NbMV0gLSBzdGFydFBvc1sxXTtcblxuICAgICAgem9vbSA9IE1hdGgucm91bmQoTWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCBpbml0aWFsWm9vbSArIGRlbHRhIC8gMTApKSk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdzdHlsZScsICctLXpvb206JyArIHpvb20pO1xuICAgICAgd2luZG93LmxpY2hlc3MuZGlzcGF0Y2hFdmVudCh3aW5kb3csICdyZXNpemUnKTtcblxuICAgICAgc2F2ZVpvb20oKTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdyZXNpemluZycpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihtb3VzZW1vdmVFdmVudCwgcmVzaXplKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIobW91c2V1cEV2ZW50LCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG1vdXNlbW92ZUV2ZW50LCByZXNpemUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdyZXNpemluZycpO1xuICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgfTtcblxuICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc3RhcnRSZXNpemUpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydFJlc2l6ZSk7XG5cbiAgaWYgKHByZWYgPT0gMSkge1xuICAgIGNvbnN0IHRvZ2dsZSA9IChwbHk6IG51bWJlcikgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZSgnbm9uZScsIHZpc2libGUgPyAhdmlzaWJsZShwbHkpIDogcGx5ID49IDIpO1xuICAgIHRvZ2dsZShwbHkpO1xuICAgIHdpbmRvdy5saWNoZXNzLnB1YnN1Yi5vbigncGx5JywgdG9nZ2xlKTtcbiAgfVxuXG4gIGFkZE5hZyhlbCk7XG59XG5cbmZ1bmN0aW9uIGV2ZW50UG9zaXRpb24oZTogTW91Y2hFdmVudCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WCA9PT0gMCkgcmV0dXJuIFtlLmNsaWVudFgsIGUuY2xpZW50WV07XG4gIGlmIChlLnRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzWzBdKSByZXR1cm4gW2UudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYLCBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WV07XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZE5hZyhlbDogSFRNTEVsZW1lbnQpIHtcblxuICBjb25zdCBzdG9yYWdlID0gd2luZG93LmxpY2hlc3Muc3RvcmFnZS5tYWtlQm9vbGVhbigncmVzaXplLW5hZycpO1xuICBpZiAoc3RvcmFnZS5nZXQoKSkgcmV0dXJuO1xuXG4gIHdpbmRvdy5saWNoZXNzLmxvYWRDc3NQYXRoKCduYWctY2lyY2xlJyk7XG4gIGVsLnRpdGxlID0gJ0RyYWcgdG8gcmVzaXplJztcbiAgZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJuYWctY2lyY2xlXCI+PC9kaXY+JztcbiAgZm9yIChjb25zdCBtb3VzZWRvd25FdmVudCBvZiBbJ3RvdWNoc3RhcnQnLCAnbW91c2Vkb3duJ10pIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKG1vdXNlZG93bkV2ZW50LCAoKSA9PiB7XG4gICAgICBzdG9yYWdlLnNldCh0cnVlKTtcbiAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xuICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHNldFRpbWVvdXQoKCkgPT4gc3RvcmFnZS5zZXQodHJ1ZSksIDE1MDAwKTtcbn1cbiIsImltcG9ydCB7IGRlZmluZWQgfSBmcm9tICcuL2NvbW1vbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcmVkUHJvcDxUPiB7XG4gICgpOiBzdHJpbmc7XG4gICh2OiBUKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9yZWRCb29sZWFuUHJvcCB7XG4gICgpOiBib29sZWFuO1xuICAodjogYm9vbGVhbik6IHZvaWQ7XG59XG5cbmNvbnN0IHN0b3JhZ2UgPSB3aW5kb3cubGljaGVzcy5zdG9yYWdlO1xuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVkUHJvcChrOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogYm9vbGVhbik6IFN0b3JlZEJvb2xlYW5Qcm9wO1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlZFByb3A8VD4oazogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IFQpOiBTdG9yZWRQcm9wPFQ+O1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlZFByb3Aoazogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IGFueSkge1xuICBjb25zdCBzayA9ICdhbmFseXNlLicgKyBrO1xuICBjb25zdCBpc0Jvb2xlYW4gPSBkZWZhdWx0VmFsdWUgPT09IHRydWUgfHwgZGVmYXVsdFZhbHVlID09PSBmYWxzZTtcbiAgbGV0IHZhbHVlOiBhbnk7XG4gIHJldHVybiBmdW5jdGlvbih2OiBhbnkpIHtcbiAgICBpZiAoZGVmaW5lZCh2KSAmJiB2ICE9IHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IHYgKyAnJztcbiAgICAgIHN0b3JhZ2Uuc2V0KHNrLCB2KTtcbiAgICB9IGVsc2UgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSBzdG9yYWdlLmdldChzayk7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHZhbHVlID0gZGVmYXVsdFZhbHVlICsgJyc7XG4gICAgfVxuICAgIHJldHVybiBpc0Jvb2xlYW4gPyB2YWx1ZSA9PT0gJ3RydWUnIDogdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcmVkSnNvblByb3A8VD4ge1xuICAoKTogVDtcbiAgKHY6IFQpOiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVkSnNvblByb3A8VD4oa2V5OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogVCk6IFN0b3JlZEpzb25Qcm9wPFQ+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHY/OiBUKSB7XG4gICAgaWYgKGRlZmluZWQodikpIHtcbiAgICAgIHN0b3JhZ2Uuc2V0KGtleSwgSlNPTi5zdHJpbmdpZnkodikpO1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IEpTT04ucGFyc2Uoc3RvcmFnZS5nZXQoa2V5KSEpO1xuICAgIHJldHVybiAocmV0ICE9PSBudWxsKSA/IHJldCA6IGRlZmF1bHRWYWx1ZTtcbiAgfTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgU3luYzxUPiB7XG4gIHByb21pc2U6IFByb21pc2U8VD47XG4gIHN5bmM6IFQgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzeW5jPFQ+KHByb21pc2U6IFByb21pc2U8VD4pOiBTeW5jPFQ+IHtcbiAgY29uc3Qgc3luYzogU3luYzxUPiA9IHtcbiAgICBzeW5jOiB1bmRlZmluZWQsXG4gICAgcHJvbWlzZTogcHJvbWlzZS50aGVuKHYgPT4ge1xuICAgICAgc3luYy5zeW5jID0gdjtcbiAgICAgIHJldHVybiB2O1xuICAgIH0pXG4gIH07XG4gIHJldHVybiBzeW5jO1xufVxuIiwiLy8gRW5zdXJlcyBjYWxscyB0byB0aGUgd3JhcHBlZCBmdW5jdGlvbiBhcmUgc3BhY2VkIGJ5IHRoZSBnaXZlbiBkZWxheS5cbi8vIEFueSBleHRyYSBjYWxscyBhcmUgZHJvcHBlZCwgZXhjZXB0IHRoZSBsYXN0IG9uZS5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRocm90dGxlKGRlbGF5OiBudW1iZXIsIGNhbGxiYWNrOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQge1xuICBsZXQgdGltZXI6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgbGV0IGxhc3RFeGVjID0gMDtcblxuICByZXR1cm4gZnVuY3Rpb24odGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IHNlbGY6IGFueSA9IHRoaXM7XG4gICAgY29uc3QgZWxhcHNlZCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbGFzdEV4ZWM7XG5cbiAgICBmdW5jdGlvbiBleGVjKCkge1xuICAgICAgdGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICBsYXN0RXhlYyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgY2FsbGJhY2suYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgfVxuXG4gICAgaWYgKHRpbWVyKSBjbGVhclRpbWVvdXQodGltZXIpO1xuXG4gICAgaWYgKGVsYXBzZWQgPiBkZWxheSkgZXhlYygpO1xuICAgIGVsc2UgdGltZXIgPSBzZXRUaW1lb3V0KGV4ZWMsIGRlbGF5IC0gZWxhcHNlZCk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBHYW1lRGF0YSwgUGxheWVyIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCAqIGFzIHN0YXR1cyBmcm9tICcuL3N0YXR1cyc7XG5cbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGF5YWJsZShkYXRhOiBHYW1lRGF0YSk6IGJvb2xlYW4ge1xuICByZXR1cm4gZGF0YS5nYW1lLnN0YXR1cy5pZCA8IHN0YXR1cy5pZHMuYWJvcnRlZCAmJiAhaW1wb3J0ZWQoZGF0YSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYXllclBsYXlpbmcoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIHBsYXlhYmxlKGRhdGEpICYmICFkYXRhLnBsYXllci5zcGVjdGF0b3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYXllclR1cm4oZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzUGxheWVyUGxheWluZyhkYXRhKSAmJiBkYXRhLmdhbWUucGxheWVyID09IGRhdGEucGxheWVyLmNvbG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGcmllbmRHYW1lKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBkYXRhLmdhbWUuc291cmNlID09PSAnZnJpZW5kJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2xhc3NpY2FsKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBkYXRhLmdhbWUucGVyZiA9PT0gJ2NsYXNzaWNhbCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYW5kYXRvcnkoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhZGF0YS50b3VybmFtZW50IHx8ICEhZGF0YS5zaW11bDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXllZFR1cm5zKGRhdGE6IEdhbWVEYXRhKTogbnVtYmVyIHtcbiAgcmV0dXJuIGRhdGEuZ2FtZS50dXJucyAtIChkYXRhLmdhbWUuc3RhcnRlZEF0VHVybiB8fCAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJvdGhQbGF5ZXJzSGF2ZVBsYXllZChkYXRhOiBHYW1lRGF0YSk6IGJvb2xlYW4ge1xuICByZXR1cm4gcGxheWVkVHVybnMoZGF0YSkgPiAxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWJvcnRhYmxlKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBwbGF5YWJsZShkYXRhKSAmJiAhYm90aFBsYXllcnNIYXZlUGxheWVkKGRhdGEpICYmICFtYW5kYXRvcnkoZGF0YSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0YWtlYmFja2FibGUoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIHBsYXlhYmxlKGRhdGEpICYmXG4gICAgZGF0YS50YWtlYmFja2FibGUgJiZcbiAgICBib3RoUGxheWVyc0hhdmVQbGF5ZWQoZGF0YSkgJiZcbiAgICAhZGF0YS5wbGF5ZXIucHJvcG9zaW5nVGFrZWJhY2sgJiZcbiAgICAhZGF0YS5vcHBvbmVudC5wcm9wb3NpbmdUYWtlYmFjaztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdhYmxlKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBwbGF5YWJsZShkYXRhKSAmJlxuICAgIGRhdGEuZ2FtZS50dXJucyA+PSAyICYmXG4gICAgIWRhdGEucGxheWVyLm9mZmVyaW5nRHJhdyAmJlxuICAgICFoYXNBaShkYXRhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2lnbmFibGUoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIHBsYXlhYmxlKGRhdGEpICYmICFhYm9ydGFibGUoZGF0YSk7XG59XG5cbi8vIGNhbiB0aGUgY3VycmVudCBwbGF5ZXIgZ28gYmVyc2Vyaz9cbmV4cG9ydCBmdW5jdGlvbiBiZXJzZXJrYWJsZUJ5KGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIWRhdGEudG91cm5hbWVudCAmJlxuICAgIGRhdGEudG91cm5hbWVudC5iZXJzZXJrYWJsZSAmJlxuICAgIGlzUGxheWVyUGxheWluZyhkYXRhKSAmJlxuICAgICFib3RoUGxheWVyc0hhdmVQbGF5ZWQoZGF0YSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3JldGltZWFibGUoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzUGxheWVyUGxheWluZyhkYXRhKSAmJiBkYXRhLm1vcmV0aW1lYWJsZSAmJiAoXG4gICAgISFkYXRhLmNsb2NrIHx8XG4gICAgKCEhZGF0YS5jb3JyZXNwb25kZW5jZSAmJlxuICAgICAgZGF0YS5jb3JyZXNwb25kZW5jZVtkYXRhLm9wcG9uZW50LmNvbG9yXSA8IChkYXRhLmNvcnJlc3BvbmRlbmNlLmluY3JlbWVudCAtIDM2MDApXG4gICAgKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW1wb3J0ZWQoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIGRhdGEuZ2FtZS5zb3VyY2UgPT09ICdpbXBvcnQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGF5YWJsZShkYXRhOiBHYW1lRGF0YSk6IGJvb2xlYW4ge1xuICByZXR1cm4gaW1wb3J0ZWQoZGF0YSkgfHwgc3RhdHVzLmZpbmlzaGVkKGRhdGEpIHx8XG4gICAgKHN0YXR1cy5hYm9ydGVkKGRhdGEpICYmIGJvdGhQbGF5ZXJzSGF2ZVBsYXllZChkYXRhKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQbGF5ZXIoZGF0YTogR2FtZURhdGEsIGNvbG9yOiBDb2xvciB8IHVuZGVmaW5lZCk6IFBsYXllcjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRQbGF5ZXIoZGF0YTogR2FtZURhdGEsIGNvbG9yPzogQ29sb3IpOiBQbGF5ZXIgfCBudWxsIHtcbiAgaWYgKGRhdGEucGxheWVyLmNvbG9yID09PSBjb2xvcikgcmV0dXJuIGRhdGEucGxheWVyO1xuICBpZiAoZGF0YS5vcHBvbmVudC5jb2xvciA9PT0gY29sb3IpIHJldHVybiBkYXRhLm9wcG9uZW50O1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FpKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIShkYXRhLnBsYXllci5haSB8fCBkYXRhLm9wcG9uZW50LmFpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZXJBbmFseXNhYmxlKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBzdGF0dXMuZmluaXNoZWQoZGF0YSkgfHwgcGxheWFibGUoZGF0YSkgJiYgKCFkYXRhLmNsb2NrIHx8ICFpc1BsYXllclBsYXlpbmcoZGF0YSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb3JyZXNwb25kZW5jZShkYXRhOiBHYW1lRGF0YSk6IGJvb2xlYW4ge1xuICByZXR1cm4gZGF0YS5nYW1lLnNwZWVkID09PSAnY29ycmVzcG9uZGVuY2UnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0T25HYW1lKGRhdGE6IEdhbWVEYXRhLCBjb2xvcjogQ29sb3IsIG9uR2FtZTogYm9vbGVhbik6IHZvaWQge1xuICBjb25zdCBwbGF5ZXIgPSBnZXRQbGF5ZXIoZGF0YSwgY29sb3IpO1xuICBvbkdhbWUgPSBvbkdhbWUgfHwgISFwbGF5ZXIuYWk7XG4gIHBsYXllci5vbkdhbWUgPSBvbkdhbWU7XG4gIGlmIChvbkdhbWUpIHNldEdvbmUoZGF0YSwgY29sb3IsIGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEdvbmUoZGF0YTogR2FtZURhdGEsIGNvbG9yOiBDb2xvciwgZ29uZTogbnVtYmVyIHwgYm9vbGVhbik6IHZvaWQge1xuICBjb25zdCBwbGF5ZXIgPSBnZXRQbGF5ZXIoZGF0YSwgY29sb3IpO1xuICBwbGF5ZXIuZ29uZSA9ICFwbGF5ZXIuYWkgJiYgZ29uZTtcbiAgaWYgKHBsYXllci5nb25lID09PSBmYWxzZSAmJiBwbGF5ZXIudXNlcikgcGxheWVyLnVzZXIub25saW5lID0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5iTW92ZXMoZGF0YTogR2FtZURhdGEsIGNvbG9yOiBDb2xvcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLmZsb29yKChkYXRhLmdhbWUudHVybnMgKyAoY29sb3IgPT0gJ3doaXRlJyA/IDEgOiAwKSkgLyAyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3dpdGNoYWJsZShkYXRhOiBHYW1lRGF0YSk6IGJvb2xlYW4ge1xuICByZXR1cm4gIWhhc0FpKGRhdGEpICYmICghIWRhdGEuc2ltdWwgfHwgaXNDb3JyZXNwb25kZW5jZShkYXRhKSk7XG59XG4iLCJpbXBvcnQgeyBHYW1lRGF0YSwgQ29udGludWVNb2RlIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdhbWUoZGF0YTogR2FtZURhdGEsIGNvbG9yPzogQ29sb3IsIGVtYmVkPzogYm9vbGVhbik6IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiBnYW1lKGRhdGE6IHN0cmluZywgY29sb3I/OiBDb2xvciwgZW1iZWQ/OiBib29sZWFuKTogc3RyaW5nO1xuZXhwb3J0IGZ1bmN0aW9uIGdhbWUoZGF0YTogYW55LCBjb2xvcj86IENvbG9yLCBlbWJlZD86IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBpZCA9IGRhdGEuZ2FtZSA/IGRhdGEuZ2FtZS5pZCA6IGRhdGE7XG4gIHJldHVybiAoZW1iZWQgPyAnL2VtYmVkLycgOiAnLycpICsgaWQgKyAoY29sb3IgPyAnLycgKyBjb2xvciA6ICcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnQoZGF0YTogR2FtZURhdGEsIG1vZGU6IENvbnRpbnVlTW9kZSk6IHN0cmluZyB7XG4gIHJldHVybiBnYW1lKGRhdGEpICsgJy9jb250aW51ZS8nICsgbW9kZTtcbn1cbiIsImltcG9ydCB7IEdhbWVEYXRhIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL29ybmljYXIvc2NhbGFjaGVzcy9ibG9iL21hc3Rlci9zcmMvbWFpbi9zY2FsYS9TdGF0dXMuc2NhbGFcblxuZXhwb3J0IGNvbnN0IGlkcyA9IHtcbiAgY3JlYXRlZDogMTAsXG4gIHN0YXJ0ZWQ6IDIwLFxuICBhYm9ydGVkOiAyNSxcbiAgbWF0ZTogMzAsXG4gIHJlc2lnbjogMzEsXG4gIHN0YWxlbWF0ZTogMzIsXG4gIHRpbWVvdXQ6IDMzLFxuICBkcmF3OiAzNCxcbiAgb3V0b2Z0aW1lOiAzNSxcbiAgY2hlYXQ6IDM2LFxuICBub1N0YXJ0OiAzNyxcbiAgdmFyaWFudEVuZDogNjBcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydGVkKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBkYXRhLmdhbWUuc3RhdHVzLmlkID49IGlkcy5zdGFydGVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluaXNoZWQoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIGRhdGEuZ2FtZS5zdGF0dXMuaWQgPj0gaWRzLm1hdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhYm9ydGVkKGRhdGE6IEdhbWVEYXRhKTogYm9vbGVhbiB7XG4gIHJldHVybiBkYXRhLmdhbWUuc3RhdHVzLmlkID09PSBpZHMuYWJvcnRlZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlpbmcoZGF0YTogR2FtZURhdGEpOiBib29sZWFuIHtcbiAgcmV0dXJuIHN0YXJ0ZWQoZGF0YSkgJiYgIWZpbmlzaGVkKGRhdGEpICYmICFhYm9ydGVkKGRhdGEpO1xufVxuIiwiaW1wb3J0IHsgQ3RybCB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGF0dXMoY3RybDogQ3RybCk6IHN0cmluZyB7XG4gIGNvbnN0IG5vYXJnID0gY3RybC50cmFucy5ub2FyZywgZCA9IGN0cmwuZGF0YTtcbiAgc3dpdGNoIChkLmdhbWUuc3RhdHVzLm5hbWUpIHtcbiAgICBjYXNlICdzdGFydGVkJzpcbiAgICAgIHJldHVybiBub2FyZygncGxheWluZ1JpZ2h0Tm93Jyk7XG4gICAgY2FzZSAnYWJvcnRlZCc6XG4gICAgICByZXR1cm4gbm9hcmcoJ2dhbWVBYm9ydGVkJyk7XG4gICAgY2FzZSAnbWF0ZSc6XG4gICAgICByZXR1cm4gbm9hcmcoJ2NoZWNrbWF0ZScpO1xuICAgIGNhc2UgJ3Jlc2lnbic6XG4gICAgICByZXR1cm4gbm9hcmcoZC5nYW1lLndpbm5lciA9PSAnd2hpdGUnID8gJ2JsYWNrUmVzaWduZWQnIDogJ3doaXRlUmVzaWduZWQnKTtcbiAgICBjYXNlICdzdGFsZW1hdGUnOlxuICAgICAgcmV0dXJuIG5vYXJnKCdzdGFsZW1hdGUnKTtcbiAgICBjYXNlICd0aW1lb3V0JzpcbiAgICAgIHN3aXRjaCAoZC5nYW1lLndpbm5lcikge1xuICAgICAgICBjYXNlICd3aGl0ZSc6XG4gICAgICAgICAgcmV0dXJuIG5vYXJnKCdibGFja0xlZnRUaGVHYW1lJyk7XG4gICAgICAgIGNhc2UgJ2JsYWNrJzpcbiAgICAgICAgICByZXR1cm4gbm9hcmcoJ3doaXRlTGVmdFRoZUdhbWUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub2FyZygnZHJhdycpO1xuICAgIGNhc2UgJ2RyYXcnOlxuICAgICAgcmV0dXJuIG5vYXJnKCdkcmF3Jyk7XG4gICAgY2FzZSAnb3V0b2Z0aW1lJzpcbiAgICAgIHJldHVybiBub2FyZygndGltZU91dCcpO1xuICAgIGNhc2UgJ25vU3RhcnQnOlxuICAgICAgcmV0dXJuIChkLmdhbWUud2lubmVyID09ICd3aGl0ZScgPyAnQmxhY2snIDogJ1doaXRlJykgKyAnIGRpZG5cXCd0IG1vdmUnO1xuICAgIGNhc2UgJ2NoZWF0JzpcbiAgICAgIHJldHVybiAnQ2hlYXQgZGV0ZWN0ZWQnO1xuICAgIGNhc2UgJ3ZhcmlhbnRFbmQnOlxuICAgICAgc3dpdGNoIChkLmdhbWUudmFyaWFudC5rZXkpIHtcbiAgICAgICAgY2FzZSAna2luZ09mVGhlSGlsbCc6XG4gICAgICAgICAgcmV0dXJuIG5vYXJnKCdraW5nSW5UaGVDZW50ZXInKTtcbiAgICAgICAgY2FzZSAndGhyZWVDaGVjayc6XG4gICAgICAgICAgcmV0dXJuIG5vYXJnKCd0aHJlZUNoZWNrcycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vYXJnKCd2YXJpYW50RW5kaW5nJyk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBkLmdhbWUuc3RhdHVzLm5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCB7IGJ1aWxkLCBUcmVlV3JhcHBlciB9IGZyb20gJy4vdHJlZSc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJy4vcGF0aCc7XG5pbXBvcnQgKiBhcyBvcHMgZnJvbSAnLi9vcHMnO1xuXG5leHBvcnQgeyBidWlsZCwgVHJlZVdyYXBwZXIsIHBhdGgsIG9wcyB9O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHdpdGhNYWlubGluZUNoaWxkPFQ+KG5vZGU6IFRyZWUuTm9kZSwgZjogKG5vZGU6IFRyZWUuTm9kZSkgPT4gVCk6IFQgfCB1bmRlZmluZWQge1xuICBjb25zdCBuZXh0ID0gbm9kZS5jaGlsZHJlblswXTtcbiAgcmV0dXJuIG5leHQgPyBmKG5leHQpIDogdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEluTWFpbmxpbmUoZnJvbU5vZGU6IFRyZWUuTm9kZSwgcHJlZGljYXRlOiAobm9kZTogVHJlZS5Ob2RlKSA9PiBib29sZWFuKTogVHJlZS5Ob2RlIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgZmluZEZyb20gPSBmdW5jdGlvbihub2RlOiBUcmVlLk5vZGUpOiBUcmVlLk5vZGUgfCB1bmRlZmluZWQge1xuICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHJldHVybiBub2RlO1xuICAgIHJldHVybiB3aXRoTWFpbmxpbmVDaGlsZChub2RlLCBmaW5kRnJvbSk7XG4gIH07XG4gIHJldHVybiBmaW5kRnJvbShmcm9tTm9kZSk7XG59XG5cbi8vIHJldHVybnMgYSBsaXN0IG9mIG5vZGVzIGNvbGxlY3RlZCBmcm9tIHRoZSBvcmlnaW5hbCBvbmVcbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0KGZyb206IFRyZWUuTm9kZSwgcGlja0NoaWxkOiAobm9kZTogVHJlZS5Ob2RlKSA9PiBUcmVlLk5vZGUgfCB1bmRlZmluZWQpOiBUcmVlLk5vZGVbXSB7XG4gIGxldCBub2RlcyA9IFtmcm9tXSwgbiA9IGZyb20sIGM7XG4gIHdoaWxlKGMgPSBwaWNrQ2hpbGQobikpIHtcbiAgICBub2Rlcy5wdXNoKGMpO1xuICAgIG4gPSBjO1xuICB9XG4gIHJldHVybiBub2Rlcztcbn1cblxuZnVuY3Rpb24gcGlja0ZpcnN0Q2hpbGQobm9kZTogVHJlZS5Ob2RlKTogVHJlZS5Ob2RlIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIG5vZGUuY2hpbGRyZW5bMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEJ5SWQobm9kZTogVHJlZS5Ob2RlLCBpZDogc3RyaW5nKTogVHJlZS5Ob2RlIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIG5vZGUuY2hpbGRyZW4uZmluZChjaGlsZCA9PiBjaGlsZC5pZCA9PT0gaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGFzdChub2RlTGlzdDogVHJlZS5Ob2RlW10pOiBUcmVlLk5vZGUgfCB1bmRlZmluZWQge1xuICByZXR1cm4gbm9kZUxpc3Rbbm9kZUxpc3QubGVuZ3RoIC0gMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub2RlQXRQbHkobm9kZUxpc3Q6IFRyZWUuTm9kZVtdLCBwbHk6IG51bWJlcik6IFRyZWUuTm9kZSB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBub2RlTGlzdC5maW5kKG5vZGUgPT4gbm9kZS5wbHkgPT09IHBseSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0YWtlUGF0aFdoaWxlKG5vZGVMaXN0OiBUcmVlLk5vZGVbXSwgcHJlZGljYXRlOiAobm9kZTogVHJlZS5Ob2RlKSA9PiBib29sZWFuKTogVHJlZS5QYXRoIHtcbiAgbGV0IHBhdGggPSAnJztcbiAgZm9yIChsZXQgaSBpbiBub2RlTGlzdCkge1xuICAgIGlmIChwcmVkaWNhdGUobm9kZUxpc3RbaV0pKSBwYXRoICs9IG5vZGVMaXN0W2ldLmlkO1xuICAgIGVsc2UgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZChwYXJlbnQ6IFRyZWUuTm9kZSwgaWQ6IHN0cmluZyk6IHZvaWQge1xuICBwYXJlbnQuY2hpbGRyZW4gPSBwYXJlbnQuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbi5pZCAhPT0gaWQ7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY291bnRDaGlsZHJlbkFuZENvbW1lbnRzKG5vZGU6IFRyZWUuTm9kZSkge1xuICBjb25zdCBjb3VudCA9IHtcbiAgICBub2RlczogMSxcbiAgICBjb21tZW50czogKG5vZGUuY29tbWVudHMgfHwgW10pLmxlbmd0aFxuICB9O1xuICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcbiAgICBjb25zdCBjID0gY291bnRDaGlsZHJlbkFuZENvbW1lbnRzKGNoaWxkKTtcbiAgICBjb3VudC5ub2RlcyArPSBjLm5vZGVzO1xuICAgIGNvdW50LmNvbW1lbnRzICs9IGMuY29tbWVudHM7XG4gIH0pO1xuICByZXR1cm4gY291bnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWNvbnN0cnVjdChwYXJ0czogYW55KTogVHJlZS5Ob2RlIHtcbiAgY29uc3Qgcm9vdCA9IHBhcnRzWzBdLCBuYiA9IHBhcnRzLmxlbmd0aDtcbiAgbGV0IG5vZGUgPSByb290LCBpOiBudW1iZXI7XG4gIHJvb3QuaWQgPSAnJztcbiAgZm9yIChpID0gMTsgaSA8IG5iOyBpKyspIHtcbiAgICBjb25zdCBuID0gcGFydHNbaV07XG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIG5vZGUuY2hpbGRyZW4udW5zaGlmdChuKTtcbiAgICBlbHNlIG5vZGUuY2hpbGRyZW4gPSBbbl07XG4gICAgbm9kZSA9IG47XG4gIH1cbiAgbm9kZS5jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4gfHwgW107XG4gIHJldHVybiByb290O1xufVxuXG4vLyBhZGRzIG4yIGludG8gbjFcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShuMTogVHJlZS5Ob2RlLCBuMjogVHJlZS5Ob2RlKTogdm9pZCB7XG4gIG4xLmV2YWwgPSBuMi5ldmFsO1xuICBpZiAobjIuZ2x5cGhzKSBuMS5nbHlwaHMgPSBuMi5nbHlwaHM7XG4gIG4yLmNvbW1lbnRzICYmIG4yLmNvbW1lbnRzLmZvckVhY2goZnVuY3Rpb24oYykge1xuICAgIGlmICghbjEuY29tbWVudHMpIG4xLmNvbW1lbnRzID0gW2NdO1xuICAgIGVsc2UgaWYgKCFuMS5jb21tZW50cy5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgcmV0dXJuIGQudGV4dCA9PT0gYy50ZXh0O1xuICAgIH0pLmxlbmd0aCkgbjEuY29tbWVudHMucHVzaChjKTtcbiAgfSk7XG4gIG4yLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oYykge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gY2hpbGRCeUlkKG4xLCBjLmlkKTtcbiAgICBpZiAoZXhpc3RpbmcpIG1lcmdlKGV4aXN0aW5nLCBjKTtcbiAgICBlbHNlIG4xLmNoaWxkcmVuLnB1c2goYyk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzQnJhbmNoaW5nKG5vZGU6IFRyZWUuTm9kZSwgbWF4RGVwdGg6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gbWF4RGVwdGggPD0gMCB8fCAhIW5vZGUuY2hpbGRyZW5bMV0gfHwgKFxuICAgIG5vZGUuY2hpbGRyZW5bMF0gJiYgaGFzQnJhbmNoaW5nKG5vZGUuY2hpbGRyZW5bMF0sIG1heERlcHRoIC0gMSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1haW5saW5lTm9kZUxpc3QoZnJvbTogVHJlZS5Ob2RlKTogVHJlZS5Ob2RlW10ge1xuICByZXR1cm4gY29sbGVjdChmcm9tLCBwaWNrRmlyc3RDaGlsZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBbGwocm9vdDogVHJlZS5Ob2RlLCBmOiAobm9kZTogVHJlZS5Ob2RlKSA9PiB2b2lkKTogdm9pZCB7XG4gIC8vIGFwcGxpZXMgZiByZWN1cnNpdmVseSB0byBhbGwgbm9kZXNcbiAgZnVuY3Rpb24gdXBkYXRlKG5vZGU6IFRyZWUuTm9kZSkge1xuICAgIGYobm9kZSk7XG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKHVwZGF0ZSk7XG4gIH07XG4gIHVwZGF0ZShyb290KTtcbn1cbiIsImV4cG9ydCBjb25zdCByb290OiBUcmVlLlBhdGggPSAnJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNpemUocGF0aDogVHJlZS5QYXRoKTogbnVtYmVyIHtcbiAgcmV0dXJuIHBhdGgubGVuZ3RoIC8gMjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhlYWQocGF0aDogVHJlZS5QYXRoKTogVHJlZS5QYXRoIHtcbiAgcmV0dXJuIHBhdGguc2xpY2UoMCwgMik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0YWlsKHBhdGg6IFRyZWUuUGF0aCk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLnNsaWNlKDIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChwYXRoOiBUcmVlLlBhdGgpOiBUcmVlLlBhdGgge1xuICByZXR1cm4gcGF0aC5zbGljZSgwLCAtMik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsYXN0KHBhdGg6IFRyZWUuUGF0aCk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLnNsaWNlKC0yKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zKHAxOiBUcmVlLlBhdGgsIHAyOiBUcmVlLlBhdGgpOiBib29sZWFuIHtcbiAgcmV0dXJuIHAxLnN0YXJ0c1dpdGgocDIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU5vZGVMaXN0KG5vZGVzOiBUcmVlLk5vZGVbXSk6IFRyZWUuUGF0aCB7XG4gIHZhciBwYXRoID0gJyc7XG4gIGZvciAodmFyIGkgaW4gbm9kZXMpIHBhdGggKz0gbm9kZXNbaV0uaWQ7XG4gIHJldHVybiBwYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDaGlsZE9mKGNoaWxkOiBUcmVlLlBhdGgsIHBhcmVudDogVHJlZS5QYXRoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIWNoaWxkICYmIGNoaWxkLnNsaWNlKDAsIC0yKSA9PT0gcGFyZW50O1xufVxuIiwiaW1wb3J0ICogYXMgdHJlZVBhdGggZnJvbSAnLi9wYXRoJztcbmltcG9ydCAqIGFzIG9wcyBmcm9tICcuL29wcyc7XG5pbXBvcnQgeyBkZWZpbmVkIH0gZnJvbSAnY29tbW9uJztcblxuZXhwb3J0IHR5cGUgTWF5YmVOb2RlID0gVHJlZS5Ob2RlIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyZWVXcmFwcGVyIHtcbiAgcm9vdDogVHJlZS5Ob2RlO1xuICBsYXN0UGx5KCk6IG51bWJlcjtcbiAgbm9kZUF0UGF0aChwYXRoOiBUcmVlLlBhdGgpOiBUcmVlLk5vZGU7XG4gIGdldE5vZGVMaXN0KHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuTm9kZVtdO1xuICBsb25nZXN0VmFsaWRQYXRoKHBhdGg6IHN0cmluZyk6IFRyZWUuUGF0aDtcbiAgZ2V0T3BlbmluZyhub2RlTGlzdDogVHJlZS5Ob2RlW10pOiBUcmVlLk9wZW5pbmcgfCB1bmRlZmluZWQ7XG4gIHVwZGF0ZUF0KHBhdGg6IFRyZWUuUGF0aCwgdXBkYXRlOiAobm9kZTogVHJlZS5Ob2RlKSA9PiB2b2lkKTogTWF5YmVOb2RlO1xuICBhZGROb2RlKG5vZGU6IFRyZWUuTm9kZSwgcGF0aDogVHJlZS5QYXRoKTogVHJlZS5QYXRoIHwgdW5kZWZpbmVkO1xuICBhZGROb2Rlcyhub2RlczogVHJlZS5Ob2RlW10sIHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuUGF0aCB8IHVuZGVmaW5lZDtcbiAgYWRkRGVzdHMoZGVzdHM6IHN0cmluZywgcGF0aDogVHJlZS5QYXRoLCBvcGVuaW5nPzogVHJlZS5PcGVuaW5nKTogTWF5YmVOb2RlO1xuICBzZXRTaGFwZXMoc2hhcGVzOiBUcmVlLlNoYXBlW10sIHBhdGg6IFRyZWUuUGF0aCk6IE1heWJlTm9kZTtcbiAgc2V0Q29tbWVudEF0KGNvbW1lbnQ6IFRyZWUuQ29tbWVudCwgcGF0aDogVHJlZS5QYXRoKTogTWF5YmVOb2RlO1xuICBkZWxldGVDb21tZW50QXQoaWQ6IHN0cmluZywgcGF0aDogVHJlZS5QYXRoKTogTWF5YmVOb2RlO1xuICBzZXRHbHlwaHNBdChnbHlwaHM6IFRyZWUuR2x5cGhbXSwgcGF0aDogVHJlZS5QYXRoKTogTWF5YmVOb2RlO1xuICBzZXRDbG9ja0F0KGNsb2NrOiBUcmVlLkNsb2NrIHwgdW5kZWZpbmVkLCBwYXRoOiBUcmVlLlBhdGgpOiBNYXliZU5vZGU7XG4gIHBhdGhJc01haW5saW5lKHBhdGg6IFRyZWUuUGF0aCk6IGJvb2xlYW47XG4gIHBhdGhJc0ZvcmNlZFZhcmlhdGlvbihwYXRoOiBUcmVlLlBhdGgpOiBib29sZWFuO1xuICBsYXN0TWFpbmxpbmVOb2RlKHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuTm9kZTtcbiAgcGF0aEV4aXN0cyhwYXRoOiBUcmVlLlBhdGgpOiBib29sZWFuO1xuICBkZWxldGVOb2RlQXQocGF0aDogVHJlZS5QYXRoKTogdm9pZDtcbiAgcHJvbW90ZUF0KHBhdGg6IFRyZWUuUGF0aCwgdG9NYWlubGluZTogYm9vbGVhbik6IHZvaWQ7XG4gIGZvcmNlVmFyaWF0aW9uQXQocGF0aDogVHJlZS5QYXRoLCBmb3JjZTogYm9vbGVhbik6IE1heWJlTm9kZTtcbiAgZ2V0Q3VycmVudE5vZGVzQWZ0ZXJQbHkobm9kZUxpc3Q6IFRyZWUuTm9kZVtdLCBtYWlubGluZTogVHJlZS5Ob2RlW10sIHBseTogbnVtYmVyKTogVHJlZS5Ob2RlW107XG4gIG1lcmdlKHRyZWU6IFRyZWUuTm9kZSk6IHZvaWQ7XG4gIHJlbW92ZUNldmFsKCk6IHZvaWQ7XG4gIHJlbW92ZUNvbXB1dGVyVmFyaWF0aW9ucygpOiB2b2lkO1xuICBwYXJlbnROb2RlKHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuTm9kZTtcbiAgZ2V0UGFyZW50Q2xvY2sobm9kZTogVHJlZS5Ob2RlLCBwYXRoOiBUcmVlLlBhdGgpOiBUcmVlLkNsb2NrIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGQocm9vdDogVHJlZS5Ob2RlKTogVHJlZVdyYXBwZXIge1xuXG4gIGZ1bmN0aW9uIGxhc3ROb2RlKCk6IFRyZWUuTm9kZSB7XG4gICAgcmV0dXJuIG9wcy5maW5kSW5NYWlubGluZShyb290LCBmdW5jdGlvbihub2RlOiBUcmVlLk5vZGUpIHtcbiAgICAgIHJldHVybiAhbm9kZS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgfSkhO1xuICB9XG5cbiAgZnVuY3Rpb24gbm9kZUF0UGF0aChwYXRoOiBUcmVlLlBhdGgpOiBUcmVlLk5vZGUge1xuICAgIHJldHVybiBub2RlQXRQYXRoRnJvbShyb290LCBwYXRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vZGVBdFBhdGhGcm9tKG5vZGU6IFRyZWUuTm9kZSwgcGF0aDogVHJlZS5QYXRoKTogVHJlZS5Ob2RlIHtcbiAgICBpZiAocGF0aCA9PT0gJycpIHJldHVybiBub2RlO1xuICAgIGNvbnN0IGNoaWxkID0gb3BzLmNoaWxkQnlJZChub2RlLCB0cmVlUGF0aC5oZWFkKHBhdGgpKTtcbiAgICByZXR1cm4gY2hpbGQgPyBub2RlQXRQYXRoRnJvbShjaGlsZCwgdHJlZVBhdGgudGFpbChwYXRoKSkgOiBub2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gbm9kZUF0UGF0aE9yTnVsbChwYXRoOiBUcmVlLlBhdGgpOiBUcmVlLk5vZGUgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBub2RlQXRQYXRoT3JOdWxsRnJvbShyb290LCBwYXRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vZGVBdFBhdGhPck51bGxGcm9tKG5vZGU6IFRyZWUuTm9kZSwgcGF0aDogVHJlZS5QYXRoKTogVHJlZS5Ob2RlIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAocGF0aCA9PT0gJycpIHJldHVybiBub2RlO1xuICAgIGNvbnN0IGNoaWxkID0gb3BzLmNoaWxkQnlJZChub2RlLCB0cmVlUGF0aC5oZWFkKHBhdGgpKTtcbiAgICByZXR1cm4gY2hpbGQgPyBub2RlQXRQYXRoT3JOdWxsRnJvbShjaGlsZCwgdHJlZVBhdGgudGFpbChwYXRoKSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBsb25nZXN0VmFsaWRQYXRoRnJvbShub2RlOiBUcmVlLk5vZGUsIHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuUGF0aCB7XG4gICAgdmFyIGlkID0gdHJlZVBhdGguaGVhZChwYXRoKTtcbiAgICBjb25zdCBjaGlsZCA9IG9wcy5jaGlsZEJ5SWQobm9kZSwgaWQpO1xuICAgIHJldHVybiBjaGlsZCA/IGlkICsgbG9uZ2VzdFZhbGlkUGF0aEZyb20oY2hpbGQsIHRyZWVQYXRoLnRhaWwocGF0aCkpIDogJyc7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDdXJyZW50Tm9kZXNBZnRlclBseShub2RlTGlzdDogVHJlZS5Ob2RlW10sIG1haW5saW5lOiBUcmVlLk5vZGVbXSwgcGx5OiBudW1iZXIpOiBUcmVlLk5vZGVbXSB7XG4gICAgdmFyIG5vZGUsIG5vZGVzID0gW107XG4gICAgZm9yICh2YXIgaSBpbiBub2RlTGlzdCkge1xuICAgICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgICAgaWYgKG5vZGUucGx5IDw9IHBseSAmJiBtYWlubGluZVtpXS5pZCAhPT0gbm9kZS5pZCkgYnJlYWs7XG4gICAgICBpZiAobm9kZS5wbHkgPiBwbHkpIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBub2RlcztcbiAgfTtcblxuICBmdW5jdGlvbiBwYXRoSXNNYWlubGluZShwYXRoOiBUcmVlLlBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcGF0aElzTWFpbmxpbmVGcm9tKHJvb3QsIHBhdGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF0aEV4aXN0cyhwYXRoOiBUcmVlLlBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFub2RlQXRQYXRoT3JOdWxsKHBhdGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF0aElzTWFpbmxpbmVGcm9tKG5vZGU6IFRyZWUuTm9kZSwgcGF0aDogVHJlZS5QYXRoKTogYm9vbGVhbiB7XG4gICAgaWYgKHBhdGggPT09ICcnKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBwYXRoSWQgPSB0cmVlUGF0aC5oZWFkKHBhdGgpLFxuICAgIGNoaWxkID0gbm9kZS5jaGlsZHJlblswXTtcbiAgICBpZiAoIWNoaWxkIHx8IGNoaWxkLmlkICE9PSBwYXRoSWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gcGF0aElzTWFpbmxpbmVGcm9tKGNoaWxkLCB0cmVlUGF0aC50YWlsKHBhdGgpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdGhJc0ZvcmNlZFZhcmlhdGlvbihwYXRoOiBUcmVlLlBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFnZXROb2RlTGlzdChwYXRoKS5maW5kKG4gPT4gbi5mb3JjZVZhcmlhdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiBsYXN0TWFpbmxpbmVOb2RlRnJvbShub2RlOiBUcmVlLk5vZGUsIHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuTm9kZSB7XG4gICAgaWYgKHBhdGggPT09ICcnKSByZXR1cm4gbm9kZTtcbiAgICBjb25zdCBwYXRoSWQgPSB0cmVlUGF0aC5oZWFkKHBhdGgpO1xuICAgIGNvbnN0IGNoaWxkID0gbm9kZS5jaGlsZHJlblswXTtcbiAgICBpZiAoIWNoaWxkIHx8IGNoaWxkLmlkICE9PSBwYXRoSWQpIHJldHVybiBub2RlO1xuICAgIHJldHVybiBsYXN0TWFpbmxpbmVOb2RlRnJvbShjaGlsZCwgdHJlZVBhdGgudGFpbChwYXRoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXROb2RlTGlzdChwYXRoOiBUcmVlLlBhdGgpOiBUcmVlLk5vZGVbXSB7XG4gICAgcmV0dXJuIG9wcy5jb2xsZWN0KHJvb3QsIGZ1bmN0aW9uKG5vZGU6IFRyZWUuTm9kZSkge1xuICAgICAgY29uc3QgaWQgPSB0cmVlUGF0aC5oZWFkKHBhdGgpO1xuICAgICAgaWYgKGlkID09PSAnJykgcmV0dXJuO1xuICAgICAgcGF0aCA9IHRyZWVQYXRoLnRhaWwocGF0aCk7XG4gICAgICByZXR1cm4gb3BzLmNoaWxkQnlJZChub2RlLCBpZCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRPcGVuaW5nKG5vZGVMaXN0OiBUcmVlLk5vZGVbXSk6IFRyZWUuT3BlbmluZyB8IHVuZGVmaW5lZCB7XG4gICAgdmFyIG9wZW5pbmc6IFRyZWUuT3BlbmluZyB8IHVuZGVmaW5lZDtcbiAgICBub2RlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG5vZGU6IFRyZWUuTm9kZSkge1xuICAgICAgb3BlbmluZyA9IG5vZGUub3BlbmluZyB8fCBvcGVuaW5nO1xuICAgIH0pO1xuICAgIHJldHVybiBvcGVuaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQXQocGF0aDogVHJlZS5QYXRoLCB1cGRhdGU6IChub2RlOiBUcmVlLk5vZGUpID0+IHZvaWQpOiBUcmVlLk5vZGUgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IG5vZGUgPSBub2RlQXRQYXRoT3JOdWxsKHBhdGgpO1xuICAgIGlmIChub2RlKSB7XG4gICAgICB1cGRhdGUobm9kZSk7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gcmV0dXJucyBuZXcgcGF0aFxuICBmdW5jdGlvbiBhZGROb2RlKG5vZGU6IFRyZWUuTm9kZSwgcGF0aDogVHJlZS5QYXRoKTogVHJlZS5QYXRoIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBuZXdQYXRoID0gcGF0aCArIG5vZGUuaWQsXG4gICAgZXhpc3RpbmcgPSBub2RlQXRQYXRoT3JOdWxsKG5ld1BhdGgpO1xuICAgIGlmIChleGlzdGluZykge1xuICAgICAgKFsnZGVzdHMnLCAnZHJvcHMnLCAnY2xvY2snXSBhcyBBcnJheTxrZXlvZiBUcmVlLk5vZGU+KS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmIChkZWZpbmVkKG5vZGVba2V5XSkgJiYgIWRlZmluZWQoZXhpc3Rpbmdba2V5XSkpIGV4aXN0aW5nW2tleV0gPSBub2RlW2tleV0gYXMgbmV2ZXI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdQYXRoO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlQXQocGF0aCwgZnVuY3Rpb24ocGFyZW50OiBUcmVlLk5vZGUpIHtcbiAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgIH0pID8gbmV3UGF0aCA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE5vZGVzKG5vZGVzOiBUcmVlLk5vZGVbXSwgcGF0aDogVHJlZS5QYXRoKTogVHJlZS5QYXRoIHwgdW5kZWZpbmVkIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzWzBdO1xuICAgIGlmICghbm9kZSkgcmV0dXJuIHBhdGg7XG4gICAgY29uc3QgbmV3UGF0aCA9IGFkZE5vZGUobm9kZSwgcGF0aCk7XG4gICAgcmV0dXJuIG5ld1BhdGggPyBhZGROb2Rlcyhub2Rlcy5zbGljZSgxKSwgbmV3UGF0aCkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxldGVOb2RlQXQocGF0aDogVHJlZS5QYXRoKTogdm9pZCB7XG4gICAgb3BzLnJlbW92ZUNoaWxkKHBhcmVudE5vZGUocGF0aCksIHRyZWVQYXRoLmxhc3QocGF0aCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbW90ZUF0KHBhdGg6IFRyZWUuUGF0aCwgdG9NYWlubGluZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHZhciBub2RlcyA9IGdldE5vZGVMaXN0KHBhdGgpO1xuICAgIGZvciAodmFyIGkgPSBub2Rlcy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpICsgMV07XG4gICAgICB2YXIgcGFyZW50ID0gbm9kZXNbaV07XG4gICAgICBpZiAocGFyZW50LmNoaWxkcmVuWzBdLmlkICE9PSBub2RlLmlkKSB7XG4gICAgICAgIG9wcy5yZW1vdmVDaGlsZChwYXJlbnQsIG5vZGUuaWQpO1xuICAgICAgICBwYXJlbnQuY2hpbGRyZW4udW5zaGlmdChub2RlKTtcbiAgICAgICAgaWYgKCF0b01haW5saW5lKSBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5mb3JjZVZhcmlhdGlvbikge1xuICAgICAgICBub2RlLmZvcmNlVmFyaWF0aW9uID0gZmFsc2U7XG4gICAgICAgIGlmICghdG9NYWlubGluZSkgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0Q29tbWVudEF0KGNvbW1lbnQ6IFRyZWUuQ29tbWVudCwgcGF0aDogVHJlZS5QYXRoKSB7XG4gICAgcmV0dXJuICFjb21tZW50LnRleHQgPyBkZWxldGVDb21tZW50QXQoY29tbWVudC5pZCwgcGF0aCkgOiB1cGRhdGVBdChwYXRoLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlLmNvbW1lbnRzID0gbm9kZS5jb21tZW50cyB8fCBbXTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gbm9kZS5jb21tZW50cy5maW5kKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIGMuaWQgPT09IGNvbW1lbnQuaWQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChleGlzdGluZykgZXhpc3RpbmcudGV4dCA9IGNvbW1lbnQudGV4dDtcbiAgICAgIGVsc2Ugbm9kZS5jb21tZW50cy5wdXNoKGNvbW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsZXRlQ29tbWVudEF0KGlkOiBzdHJpbmcsIHBhdGg6IFRyZWUuUGF0aCkge1xuICAgIHJldHVybiB1cGRhdGVBdChwYXRoLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgY29tbWVudHMgPSAobm9kZS5jb21tZW50cyB8fCBbXSkuZmlsdGVyKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIGMuaWQgIT09IGlkXG4gICAgICB9KTtcbiAgICAgIG5vZGUuY29tbWVudHMgPSBjb21tZW50cy5sZW5ndGggPyBjb21tZW50cyA6IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEdseXBoc0F0KGdseXBoczogVHJlZS5HbHlwaFtdLCBwYXRoOiBUcmVlLlBhdGgpIHtcbiAgICByZXR1cm4gdXBkYXRlQXQocGF0aCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgbm9kZS5nbHlwaHMgPSBnbHlwaHM7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJlbnROb2RlKHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuTm9kZSB7XG4gICAgcmV0dXJuIG5vZGVBdFBhdGgodHJlZVBhdGguaW5pdChwYXRoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYXJlbnRDbG9jayhub2RlOiBUcmVlLk5vZGUsIHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuQ2xvY2sgfCB1bmRlZmluZWQge1xuICAgIGlmICghKCdwYXJlbnRDbG9jaycgaW4gbm9kZSkpIHtcbiAgICAgIGNvbnN0IHBhciA9IHBhdGggJiYgcGFyZW50Tm9kZShwYXRoKTtcbiAgICAgIGlmICghcGFyKSBub2RlLnBhcmVudENsb2NrID0gbm9kZS5jbG9jaztcbiAgICAgIGVsc2UgaWYgKCEoJ2Nsb2NrJyBpbiBwYXIpKSBub2RlLnBhcmVudENsb2NrID0gdW5kZWZpbmVkO1xuICAgICAgZWxzZSBub2RlLnBhcmVudENsb2NrID0gcGFyLmNsb2NrO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZS5wYXJlbnRDbG9jaztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcm9vdCxcbiAgICBsYXN0UGx5KCk6IG51bWJlciB7XG4gICAgICByZXR1cm4gbGFzdE5vZGUoKS5wbHk7XG4gICAgfSxcbiAgICBub2RlQXRQYXRoLFxuICAgIGdldE5vZGVMaXN0LFxuICAgIGxvbmdlc3RWYWxpZFBhdGg6IChwYXRoOiBzdHJpbmcpID0+IGxvbmdlc3RWYWxpZFBhdGhGcm9tKHJvb3QsIHBhdGgpLFxuICAgIGdldE9wZW5pbmcsXG4gICAgdXBkYXRlQXQsXG4gICAgYWRkTm9kZSxcbiAgICBhZGROb2RlcyxcbiAgICBhZGREZXN0cyhkZXN0czogc3RyaW5nLCBwYXRoOiBUcmVlLlBhdGgsIG9wZW5pbmc/OiBUcmVlLk9wZW5pbmcpIHtcbiAgICAgIHJldHVybiB1cGRhdGVBdChwYXRoLCBmdW5jdGlvbihub2RlOiBUcmVlLk5vZGUpIHtcbiAgICAgICAgbm9kZS5kZXN0cyA9IGRlc3RzO1xuICAgICAgICBpZiAob3BlbmluZykgbm9kZS5vcGVuaW5nID0gb3BlbmluZztcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0U2hhcGVzKHNoYXBlczogVHJlZS5TaGFwZVtdLCBwYXRoOiBUcmVlLlBhdGgpIHtcbiAgICAgIHJldHVybiB1cGRhdGVBdChwYXRoLCBmdW5jdGlvbihub2RlOiBUcmVlLk5vZGUpIHtcbiAgICAgICAgbm9kZS5zaGFwZXMgPSBzaGFwZXM7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHNldENvbW1lbnRBdCxcbiAgICBkZWxldGVDb21tZW50QXQsXG4gICAgc2V0R2x5cGhzQXQsXG4gICAgc2V0Q2xvY2tBdChjbG9jazogVHJlZS5DbG9jayB8IHVuZGVmaW5lZCwgcGF0aDogVHJlZS5QYXRoKSB7XG4gICAgICByZXR1cm4gdXBkYXRlQXQocGF0aCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBub2RlLmNsb2NrID0gY2xvY2s7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhdGhJc01haW5saW5lLFxuICAgIHBhdGhJc0ZvcmNlZFZhcmlhdGlvbixcbiAgICBsYXN0TWFpbmxpbmVOb2RlKHBhdGg6IFRyZWUuUGF0aCk6IFRyZWUuTm9kZSB7XG4gICAgICByZXR1cm4gbGFzdE1haW5saW5lTm9kZUZyb20ocm9vdCwgcGF0aCk7XG4gICAgfSxcbiAgICBwYXRoRXhpc3RzLFxuICAgIGRlbGV0ZU5vZGVBdCxcbiAgICBwcm9tb3RlQXQsXG4gICAgZm9yY2VWYXJpYXRpb25BdChwYXRoOiBUcmVlLlBhdGgsIGZvcmNlOiBib29sZWFuKSB7XG4gICAgICByZXR1cm4gdXBkYXRlQXQocGF0aCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBub2RlLmZvcmNlVmFyaWF0aW9uID0gZm9yY2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldEN1cnJlbnROb2Rlc0FmdGVyUGx5LFxuICAgIG1lcmdlKHRyZWU6IFRyZWUuTm9kZSkge1xuICAgICAgb3BzLm1lcmdlKHJvb3QsIHRyZWUpO1xuICAgIH0sXG4gICAgcmVtb3ZlQ2V2YWwoKSB7XG4gICAgICBvcHMudXBkYXRlQWxsKHJvb3QsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgZGVsZXRlIG4uY2V2YWw7XG4gICAgICAgIGRlbGV0ZSBuLnRocmVhdDtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVtb3ZlQ29tcHV0ZXJWYXJpYXRpb25zKCkge1xuICAgICAgb3BzLm1haW5saW5lTm9kZUxpc3Qocm9vdCkuZm9yRWFjaChmdW5jdGlvbihuKSB7XG4gICAgICAgIG4uY2hpbGRyZW4gPSBuLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuICFjLmNvbXA7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXJlbnROb2RlLFxuICAgIGdldFBhcmVudENsb2NrXG4gIH07XG59XG4iXX0=
